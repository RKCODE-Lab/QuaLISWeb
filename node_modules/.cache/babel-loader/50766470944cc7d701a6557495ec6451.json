{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Row,Col,Card,Tab,Nav}from'react-bootstrap';import{injectIntl}from'react-intl';import{FormattedMessage}from'react-intl';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddContactInfoManufacturer from'../../pages/contactmaster/AddContactInfoManufacturer';import AddSiteManufacturer from'../../pages/contactmaster/AddSiteManufacturer';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,validateEmail,validatePhoneNumber,onDropAttachFileList,deleteAttachmentDropZone,create_UUID}from'../../components/CommonScript';import Esign from'../audittrail/Esign';import{transactionStatus,attachmentType}from'../../components/Enumeration';import CustomAccordion from'../../components/custom-accordion/custom-accordion.component';import ManufacturerTabsAccordion from'./ManufacturerTabsAccordion';import{toast}from'react-toastify';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';//import ReactTooltip from 'react-tooltip';\nimport AddManufacturerFile from'./AddManufacturerFile';var ManufacturerSiteTab=/*#__PURE__*/function(_Component){_inherits(ManufacturerSiteTab,_Component);var _super=_createSuper(ManufacturerSiteTab);function ManufacturerSiteTab(props){var _this;_classCallCheck(this,ManufacturerSiteTab);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.ManufacturerContactInfo,event.dataState),dataState:event.dataState});};_this.openModalContact=function(input){var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:true,operation:input.operation,selectedRecord:{\"ndefaultstatus\":transactionStatus.NO},defaultSite:undefined,ncontrolCode:input.ncontrolCode,screenName:\"IDS_SITECONTACT\",loading:false}};_this.props.updateStore(updateInfo);};_this.manufacturerSiteAccordion=function(manufacturerSiteAddress){var primaryKeyField=\"nmanufcontactcode\";var addManufacturerContactId=_this.props.controlMap.has(\"AddManufacturerContactInfo\")&&_this.props.controlMap.get(\"AddManufacturerContactInfo\").ncontrolcode;var editManufacturerContactId=_this.props.controlMap.has(\"EditManufacturerContactInfo\")&&_this.props.controlMap.get(\"EditManufacturerContactInfo\").ncontrolcode;var editContactParam={screenName:\"ManufacturerContact\",primaryKeyField:\"nmanufcontactcode\",operation:\"update\",inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,ncontrolCode:editManufacturerContactId};var AddContactParam={screenName:\"ManufacturerContact\",primaryKeyField:primaryKeyField,undefined:undefined,operation:\"create\",inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,ncontrolCode:addManufacturerContactId};var accordionMap=new Map();manufacturerSiteAddress.map(function(siteAddress){return accordionMap.set(siteAddress.nmanufsitecode,/*#__PURE__*/React.createElement(ManufacturerTabsAccordion,{siteAddress:siteAddress,getSiteManufacturerLoadEdit:_this.props.getSiteManufacturerLoadEdit,masterData:_this.props.masterData,ConfirmDelete:_this.ConfirmDelete,addManufacturerContactId:addManufacturerContactId,AddContactParam:AddContactParam,openModalContact:_this.openModalContact// tabDetail={this.tabDetail(userSite)}   \n,primaryKeyField:primaryKeyField,expandField:\"expanded\",detailedFieldList:_this.detailedFieldList,extractedColumnList:_this.ContactColumns,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,data:_this.state.ManufacturerContactInfo||[],ManufacturerContactInfo:_this.state.ManufacturerContactInfo||[],dataState:_this.state.dataState,dataStateChange:_this.dataStateChange,controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights||[],methodUrl:\"ManufacturerContactInfo\",getContactManufacturerLoadEdit:_this.props.getContactManufacturerLoadEdit,editParam:editContactParam,deleteParam:{operation:\"delete\"},deleteRecord:_this.DeleteContact,scrollable:\"scrollable\",isActionRequired:true,selectedId:_this.props.selectedId,hasDynamicColSize:true}));});return accordionMap;};_this.ConfirmDelete=function(obj){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.Delete(obj);});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name==='ntransactionstatus'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;}else if(event.target.name===\"agree\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;}else{if(event.target.name===\"sphoneno\"||event.target.name===\"smobileno\"||event.target.name===\"sfaxno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}// selectedRecord[event.target.name] = event.target.value;\n}_this.setState({selectedRecord:selectedRecord});};_this.onComboChange=function(comboData,fieldName){if(comboData!==null){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;//.value;\n_this.setState({selectedRecord:selectedRecord});}};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onSaveClick=function(saveType,formRef){if(_this.state.selectedRecord['semail']?validateEmail(_this.state.selectedRecord['semail']):true){var inputParam={};if(_this.props.screenName===\"IDS_MANUFACTURESITE\"){inputParam=_this.SaveSiteDetails(saveType,formRef);}else if(_this.props.screenName===\"IDS_SITECONTACT\"){inputParam=_this.SaveContactInfo(saveType,formRef);}else{inputParam=_this.SaveManufacturerFile(saveType,formRef);}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}};_this.DeleteContact=function(deleteParam){var inputData=[];if(deleteParam.selectedRecord.expanded!==undefined){delete deleteParam.selectedRecord.expanded;}inputData[\"manufacturercontactinfo\"]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.userInfo;var inputParam={methodUrl:\"ContactInfo\",classUrl:_this.props.inputParam.classUrl,inputData:inputData,operation:\"delete\",dataState:_this.state.dataState};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:\"Contact\",operation:\"delete\"}};_this.props.updateStore(updateInfo);}else{if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var _updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:\"Contact\",operation:\"delete\"}};_this.props.updateStore(_updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.Delete=function(deleteParam){var inputData=[];if(deleteParam.selectedRecord.expanded&&deleteParam.selectedRecord.expanded!==undefined){delete deleteParam.selectedRecord.expanded;}inputData[deleteParam.Type]=deleteParam.selectedRecord;inputData[\"userinfo\"]=_this.props.userInfo;var inputParam={methodUrl:deleteParam.methodURL,classUrl:_this.props.inputParam.classUrl,inputData:inputData,operation:\"delete\"};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{if(showEsign(_this.props.userRoleControlRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var _updateInfo2={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(_updateInfo2);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}//this.props.crudMaster(inputParam, this.props.masterData);\n};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.onDropManufacturerFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isSiteOpen:false,isContactOpen:false,siteSelectedRecord:{},contactSelectedRecord:{},dataResult:[],dataState:dataState,ManufacturerContactInfo:_this.props.masterData.ManufacturerContactInfo,Country:[],SiteCode:_this.props.masterData.SiteCode,selectedRecord:{},countryCode:[]};_this.ContactColumns=[{\"idsName\":\"IDS_CONTACTNAME\",\"mandatory\":true,\"dataField\":\"scontactname\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{dataField:\"semail\",idsName:\"IDS_EMAILID\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{dataField:\"sdefaultContact\",idsName:\"IDS_DEFAULT\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.siteColumns=[{\"idsName\":\"IDS_MANUFSITENAME\",\"mandatory\":true,\"dataField\":\"smanufsitename\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_ADDRESS1\",\"mandatory\":true,\"dataField\":\"saddress1\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_COUNTRYNAME\",\"mandatory\":true,\"dataField\":\"ncountrycode\",\"width\":\"150px\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.manufacturerFileFTP=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];_this.manufacturerFileLink=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.detailedFieldList=[{\"dataField\":\"sphoneno\",\"idsName\":\"IDS_PHONE\",columnSize:\"4\"},{\"idsName\":\"IDS_MOBILE\",\"dataField\":\"smobileno\",columnSize:\"4\"},{dataField:\"sfaxno\",idsName:\"IDS_FAX\",columnSize:\"4\"},{dataField:\"scomments\",idsName:\"IDS_COMMENTS\",columnSize:\"12\"}];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(ManufacturerSiteTab,[{key:\"render\",value:function render(){var _this2=this;var addManufacturerSiteId=this.props.controlMap.has(\"AddManufacturerSiteAddress\")&&this.props.controlMap.get(\"AddManufacturerSiteAddress\").ncontrolcode;// const editManufacturerSiteId = this.props.controlMap.has(\"EditManufacturerSiteAddress\") && this.props.controlMap.get(\"EditManufacturerSiteAddress\").ncontrolcode;\n// const deleteManufacturerSiteId = this.props.controlMap.has(\"DeleteManufacturerSiteAddress\") && this.props.controlMap.get(\"DeleteManufacturerSiteAddress\").ncontrolcode\n//const editManufacturerContactId = this.props.controlMap.has(\"EditManufacturerContactInfo\") && this.props.controlMap.get(\"EditManufacturerContactInfo\").ncontrolcode;\n// const deleteManufacturerContactId = this.props.controlMap.has(\"DeleteManufacturerContactInfo\") && this.props.controlMap.get(\"DeleteManufacturerContactInfo\").ncontrolcode\n//let primaryKeyField = \"nmanufcontactcode\";\n// const editContactParam = {\n//     screenName: \"ManufacturerContact\", primaryKeyField: \"nmanufcontactcode\", operation: \"update\",\n//     inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: editManufacturerContactId\n// };\n// const deleteParam = { operation: \"delete\" };\nvar mandatoryFields=[];if(this.props.screenName===\"IDS_MANUFACTURESITE\"){this.siteColumns.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}else if(this.props.screenName===\"IDS_SITECONTACT\"){this.ContactColumns.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}else if(this.props.screenName===\"Manufacturer File\"){if(this.props.selectedRecord.nattachmenttypecode===attachmentType.FTP){this.manufacturerFileFTP.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}else{this.manufacturerFileLink.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});}}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(Tab.Content,null,/*#__PURE__*/React.createElement(Tab.Pane,{\"aria-labelledby\":\"Version-tab\",className:\"p-0 active show\"},/*#__PURE__*/React.createElement(Row,{className:\"no-gutters pt-2 pb-2 col-12 text-right border-bottom\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addManufacturerSiteId)===-1,onClick:function onClick(){return _this2.props.getSiteManufacturerLoadEdit(\"SiteManufacturer\",\"create\",_this2.props.masterData.selectedManufacturer.nmanufcode,undefined,addManufacturerSiteId,_this2.props.userInfo);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_MANUFACTURESITE\",defaultMessage:\"Site Details\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},this.props.masterData.ManufacturerSiteAddress&&this.props.masterData.ManufacturerSiteAddress.length>0?/*#__PURE__*/React.createElement(CustomAccordion,{key:\"filter\",accordionTitle:\"smanufsitename\",accordionComponent:this.manufacturerSiteAccordion(this.props.masterData.ManufacturerSiteAddress),inputParam:{masterData:this.props.masterData,userInfo:this.props.userInfo},accordionClick:this.props.getContactInfo,accordionPrimaryKey:\"nmanufsitecode\",accordionObjectName:\"siteAddress\",selectedKey:this.props.masterData.selectedSite.nmanufsitecode}):\"\"))))))),/*#__PURE__*/React.createElement(React.Fragment,null,this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation//  formatMessage={this.props.formatMessage}\n,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_MANUFACTURESITE\"?/*#__PURE__*/React.createElement(AddSiteManufacturer,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange//   formatMessage={this.props.formatMessage}\n,Country:this.props.Country||[],inputParam:this.props.inputParam// defaultValue={this.props.countryCode}\n}):this.props.screenName===\"IDS_SITECONTACT\"?/*#__PURE__*/React.createElement(AddContactInfoManufacturer,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange//  formatMessage={this.props.formatMessage}\n}):this.props.screenName===\"Manufacturer File\"?/*#__PURE__*/React.createElement(AddManufacturerFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropManufacturerFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType,onComboChange:this.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20// maxFiles={this.props.operation === \"update\" ? 1 : 3}\n// multiple={this.props.operation === \"update\" ? false : true}\n,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_MANUFACTURERFILE\"}),name:\"manufacturerfilename\"}):\"\"})));}},{key:\"SaveSiteDetails\",value:function SaveSiteDetails(saveType,formRef){var _this3=this;var inputData=[];var postParam=undefined;inputData[\"userinfo\"]=this.props.userInfo;var fieldList=[\"nmanufsitecode\",\"ncountrycode\",\"smanufsitename\",\"saddress1\",\"saddress2\",\"saddress3\",\"ndefaultstatus\"];if(this.props.operation===\"update\"){postParam={inputListName:\"SiteAddress\",selectedObject:\"selectedSite\",primaryKeyField:\"nmanufsitecode\"};inputData[\"manufacturersiteaddress\"]={\"nmanufcode\":this.props.masterData.selectedManufacturer.nmanufcode};fieldList.map(function(item){if(item===\"ncountrycode\"){return inputData[\"manufacturersiteaddress\"][item]=_this3.state.selectedRecord[item]?_this3.state.selectedRecord[item].value:\"\";}else{return inputData[\"manufacturersiteaddress\"][item]=_this3.state.selectedRecord[item]?_this3.state.selectedRecord[item]:\"\";}});}else{inputData[\"manufacturersiteaddress\"]={\"nmanufcode\":this.props.masterData.selectedManufacturer.nmanufcode};fieldList.map(function(item){if(item===\"ncountrycode\"){return inputData[\"manufacturersiteaddress\"][item]=_this3.state.selectedRecord[item].value;}else{return inputData[\"manufacturersiteaddress\"][item]=_this3.state.selectedRecord[item];}});}var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"SiteAddress\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef,postParam:postParam};return inputParam;//this.props.crudMaster(inputParam, this.props.masterData);\n}},{key:\"SaveContactInfo\",value:function SaveContactInfo(saveType,formRef){var _this4=this;var dataState=undefined;var inputData=[];var postParam=undefined;inputData[\"userinfo\"]=this.props.userInfo;var fieldList=[\"nmanufcontactcode\",\"scontactname\",\"sphoneno\",\"smobileno\",\"semail\",\"sfaxno\",\"scomments\",\"ndefaultstatus\"];var selectedId=null;if(this.props.operation===\"update\"){postParam={inputListName:\"ContactInfo\",selectedObject:\"selectedContact\",primaryKeyField:\"nmanufcontactcode\"};inputData[\"manufacturercontactinfo\"]={\"nmanufcode\":this.props.masterData.selectedManufacturer.nmanufcode,\"nmanufsitecode\":this.props.masterData.SiteCode};selectedId=this.props.selectedRecord.nmanufcontactcode;fieldList.map(function(item){return inputData[\"manufacturercontactinfo\"][item]=_this4.state.selectedRecord[item]?_this4.state.selectedRecord[item]:\"\";});dataState=this.state.dataState;}else{inputData[\"manufacturercontactinfo\"]={\"nmanufcode\":this.props.masterData.selectedManufacturer.nmanufcode,\"nmanufsitecode\":this.props.masterData.SiteCode};fieldList.map(function(item){return inputData[\"manufacturercontactinfo\"][item]=_this4.state.selectedRecord[item]?_this4.state.selectedRecord[item]:\"\";});inputData[\"manufacturercontactinfo\"]['ndefaultstatus']=this.state.selectedRecord&&this.state.selectedRecord.ndefaultstatus?this.state.selectedRecord.ndefaultstatus:transactionStatus.YES;}var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"ContactInfo\",inputData:inputData,selectedId:selectedId,operation:this.props.operation,saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;// this.props.crudMaster(inputParam, this.props.masterData);\n}},{key:\"SaveManufacturerFile\",value:function SaveManufacturerFile(saveType,formRef){var selectedRecord=this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var manufacturerFileArray=[];var manufacturerFile={nmanufcode:this.props.masterData.selectedManufacturer.nmanufcode,nmanufacturerfilecode:selectedRecord.nmanufacturerfilecode?selectedRecord.nmanufacturerfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode,ndefaultstatus:selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]?selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]:4};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},manufacturerFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?selectedRecord.ssystemfilename.split('.'):create_UUID();var filesystemfileext=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?file.name.split('.')[ssystemfilename.length-1]:fileExtension;var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.nmanufacturerfilecode&&selectedRecord.nmanufacturerfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);manufacturerFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{manufacturerFile[\"sfilename\"]=selectedRecord.sfilename;manufacturerFile[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";manufacturerFile[\"nlinkcode\"]=transactionStatus.NA;manufacturerFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;manufacturerFile[\"nfilesize\"]=selectedRecord.nfilesize;manufacturerFileArray.push(manufacturerFile);}}else{manufacturerFile[\"sfilename\"]=selectedRecord.slinkfilename.trim();manufacturerFile[\"sdescription\"]=selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\";manufacturerFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;manufacturerFile[\"ssystemfilename\"]=\"\";manufacturerFile[\"nfilesize\"]=0;manufacturerFileArray.push(manufacturerFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"manufacturerfile\",JSON.stringify(manufacturerFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nvar selectedId=null;var postParam=undefined;if(this.props.operation===\"update\"){// edit\npostParam={inputListName:\"Manufacturer\",selectedObject:\"selectedManufacturer\",primaryKeyField:\"nmanufcode\"};selectedId=selectedRecord[\"nmanufacturerfilecode\"];}var inputParam={inputData:{userinfo:this.props.userInfo},formData:formData,isFileupload:true,operation:this.props.operation,classUrl:\"manufacturer\",saveType:saveType,formRef:formRef,methodUrl:\"ManufacturerFile\",postParam:postParam};return inputParam;}// DeleteContact = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var dataState=this.state.dataState;if(this.props.dataState===undefined){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};}this.setState({isSiteOpen:false,isContactOpen:false,ManufacturerContactInfo:this.props.masterData.ManufacturerContactInfo,SiteCode:this.props.masterData.SiteCode,Country:this.props.masterData.Country,dataState:dataState});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}}]);return ManufacturerSiteTab;}(Component);export default injectIntl(ManufacturerSiteTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/contactmaster/ManufacturerSiteTab.jsx"],"names":["React","Component","Row","Col","Card","Tab","Nav","injectIntl","FormattedMessage","FontAwesomeIcon","faPlus","process","SlideOutModal","AddContactInfoManufacturer","AddSiteManufacturer","DEFAULT_RETURN","showEsign","validateEmail","validatePhoneNumber","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","Esign","transactionStatus","attachmentType","CustomAccordion","ManufacturerTabsAccordion","toast","ConfirmMessage","AddManufacturerFile","ManufacturerSiteTab","props","dataStateChange","event","setState","dataResult","state","ManufacturerContactInfo","dataState","openModalContact","input","updateInfo","typeName","data","openChildModal","operation","selectedRecord","NO","defaultSite","undefined","ncontrolCode","screenName","loading","updateStore","manufacturerSiteAccordion","manufacturerSiteAddress","primaryKeyField","addManufacturerContactId","controlMap","has","get","ncontrolcode","editManufacturerContactId","editContactParam","inputParam","userInfo","AddContactParam","accordionMap","Map","map","siteAddress","set","nmanufsitecode","getSiteManufacturerLoadEdit","masterData","ConfirmDelete","detailedFieldList","ContactColumns","userRoleControlRights","getContactManufacturerLoadEdit","DeleteContact","selectedId","obj","confirmMessage","confirm","intl","formatMessage","id","Delete","onInputOnChange","optional","target","type","name","checked","ACTIVE","DEACTIVE","YES","value","onComboChange","comboData","fieldName","closeModal","loadEsign","onSaveClick","saveType","formRef","SaveSiteDetails","SaveContactInfo","SaveManufacturerFile","esignRights","nformcode","screenData","crudMaster","warn","deleteParam","inputData","expanded","methodUrl","classUrl","Type","methodURL","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","onDropManufacturerFile","attachedFiles","maxSize","actionType","deleteAttachment","file","skip","take","settings","parseInt","isSiteOpen","isContactOpen","siteSelectedRecord","contactSelectedRecord","Country","SiteCode","countryCode","dataField","idsName","siteColumns","manufacturerFileFTP","manufacturerFileLink","columnSize","addManufacturerSiteId","mandatoryFields","forEach","item","mandatory","push","nattachmenttypecode","FTP","indexOf","selectedManufacturer","nmanufcode","ManufacturerSiteAddress","length","getContactInfo","selectedSite","onDropAccepted","linkMaster","editFiles","postParam","fieldList","inputListName","selectedObject","nmanufcontactcode","ndefaultstatus","acceptedFiles","sfilename","isFileEdited","manufacturerFileArray","manufacturerFile","nmanufacturerfilecode","nstatus","LINK","formData","FormData","Array","isArray","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","sdescription","trim","NA","size","append","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","userinfo","isFileupload","previousProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Row, Col, Card, Tab, Nav } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddContactInfoManufacturer from '../../pages/contactmaster/AddContactInfoManufacturer';\r\nimport AddSiteManufacturer from '../../pages/contactmaster/AddSiteManufacturer';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, validateEmail, validatePhoneNumber, onDropAttachFileList, deleteAttachmentDropZone, create_UUID } from '../../components/CommonScript';\r\nimport Esign from '../audittrail/Esign';\r\nimport { transactionStatus, attachmentType } from '../../components/Enumeration';\r\nimport CustomAccordion from '../../components/custom-accordion/custom-accordion.component';\r\nimport ManufacturerTabsAccordion from './ManufacturerTabsAccordion';\r\nimport { toast } from 'react-toastify';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\n//import ReactTooltip from 'react-tooltip';\r\nimport AddManufacturerFile from './AddManufacturerFile';\r\n\r\nclass ManufacturerSiteTab extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take :this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isSiteOpen: false, isContactOpen: false, siteSelectedRecord: {}, contactSelectedRecord: {}, dataResult: [],\r\n            dataState: dataState, ManufacturerContactInfo: this.props.masterData.ManufacturerContactInfo, Country: [],\r\n            SiteCode: this.props.masterData.SiteCode, selectedRecord: {}, countryCode: [],\r\n\r\n        };\r\n        this.ContactColumns = [{ \"idsName\": \"IDS_CONTACTNAME\", \"mandatory\": true, \"dataField\": \"scontactname\", \"width\": \"150px\" , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n        { dataField: \"semail\", idsName: \"IDS_EMAILID\",\"width\": \"150px\" , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n        { dataField: \"sdefaultContact\", idsName: \"IDS_DEFAULT\",\"width\": \"150px\", \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"}\r\n     \r\n\r\n        ];\r\n\r\n        this.siteColumns = [{ \"idsName\": \"IDS_MANUFSITENAME\", \"mandatory\": true, \"dataField\": \"smanufsitename\", \"width\": \"150px\" , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n        { \"idsName\": \"IDS_ADDRESS1\", \"mandatory\": true, \"dataField\": \"saddress1\", \"width\": \"150px\" , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n        { \"idsName\": \"IDS_COUNTRYNAME\", \"mandatory\": true, \"dataField\": \"ncountrycode\", \"width\": \"150px\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"}\r\n\r\n        ];\r\n        \r\n        this.manufacturerFileFTP = [\r\n            { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\"}\r\n        ];\r\n\r\n        this.manufacturerFileLink = [\r\n            { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n            { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        ];\r\n\r\n        this.detailedFieldList = [\r\n            { \"dataField\": \"sphoneno\",\"idsName\": \"IDS_PHONE\" , columnSize:\"4\"},\r\n            { \"idsName\": \"IDS_MOBILE\", \"dataField\": \"smobileno\" , columnSize:\"4\"},\r\n            { dataField: \"sfaxno\", idsName: \"IDS_FAX\" , columnSize:\"4\"},\r\n            { dataField: \"scomments\", idsName: \"IDS_COMMENTS\", columnSize:\"12\" }\r\n          \r\n        ];\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.ManufacturerContactInfo, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n    openModalContact = (input) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                openChildModal: true, operation: input.operation,\r\n                selectedRecord:{\"ndefaultstatus\":transactionStatus.NO},\r\n                defaultSite: undefined, ncontrolCode: input.ncontrolCode,\r\n                screenName: \"IDS_SITECONTACT\", loading: false\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    render() {\r\n\r\n        const addManufacturerSiteId = this.props.controlMap.has(\"AddManufacturerSiteAddress\") && this.props.controlMap.get(\"AddManufacturerSiteAddress\").ncontrolcode\r\n        // const editManufacturerSiteId = this.props.controlMap.has(\"EditManufacturerSiteAddress\") && this.props.controlMap.get(\"EditManufacturerSiteAddress\").ncontrolcode;\r\n        // const deleteManufacturerSiteId = this.props.controlMap.has(\"DeleteManufacturerSiteAddress\") && this.props.controlMap.get(\"DeleteManufacturerSiteAddress\").ncontrolcode\r\n\r\n\r\n        //const editManufacturerContactId = this.props.controlMap.has(\"EditManufacturerContactInfo\") && this.props.controlMap.get(\"EditManufacturerContactInfo\").ncontrolcode;\r\n        // const deleteManufacturerContactId = this.props.controlMap.has(\"DeleteManufacturerContactInfo\") && this.props.controlMap.get(\"DeleteManufacturerContactInfo\").ncontrolcode\r\n\r\n        //let primaryKeyField = \"nmanufcontactcode\";\r\n\r\n        // const editContactParam = {\r\n        //     screenName: \"ManufacturerContact\", primaryKeyField: \"nmanufcontactcode\", operation: \"update\",\r\n        //     inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: editManufacturerContactId\r\n        // };\r\n\r\n        // const deleteParam = { operation: \"delete\" };\r\n        const mandatoryFields = [];\r\n        if (this.props.screenName === \"IDS_MANUFACTURESITE\") {\r\n            this.siteColumns.forEach(item => item.mandatory === true ?\r\n                mandatoryFields.push(item) : \"\"\r\n            );\r\n        }\r\n        else if (this.props.screenName === \"IDS_SITECONTACT\"){\r\n            this.ContactColumns.forEach(item => item.mandatory === true ?\r\n                mandatoryFields.push(item) : \"\"\r\n            );\r\n        }\r\n        else if (this.props.screenName === \"Manufacturer File\"){\r\n            if(this.props.selectedRecord.nattachmenttypecode === attachmentType.FTP){\r\n                this.manufacturerFileFTP.forEach(item => item.mandatory === true ?\r\n                    mandatoryFields.push(item) : \"\"\r\n                );\r\n            }\r\n            else {\r\n                this.manufacturerFileLink.forEach(item => item.mandatory === true ?\r\n                    mandatoryFields.push(item) : \"\"\r\n                );\r\n            }\r\n\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Row noGutters={true}>\r\n                    <Col md='12'>\r\n                        <Card className=\"at-tabs\">\r\n                            <Tab.Content>\r\n                                <Tab.Pane aria-labelledby=\"Version-tab\" className=\"p-0 active show\">\r\n\r\n                                    <Row className=\"no-gutters pt-2 pb-2 col-12 text-right border-bottom\" >\r\n                                        <Col md={12}>\r\n                                            <div className=\"d-flex justify-content-end\">\r\n                                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\"/> */}\r\n                                                <Nav.Link className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addManufacturerSiteId) === -1}\r\n                                                    onClick={() => this.props.getSiteManufacturerLoadEdit(\"SiteManufacturer\", \"create\", this.props.masterData.selectedManufacturer.nmanufcode, undefined, addManufacturerSiteId, this.props.userInfo)}>\r\n                                                    <FontAwesomeIcon icon={faPlus} /> { }\r\n                                                    <FormattedMessage id='IDS_MANUFACTURESITE' defaultMessage='Site Details' />\r\n                                                </Nav.Link>\r\n                                            </div>\r\n                                        </Col>\r\n\r\n                                    </Row>\r\n\r\n                                    <Row className=\"no-gutters\">\r\n                                        <Col md={12}>\r\n                                            {this.props.masterData.ManufacturerSiteAddress && this.props.masterData.ManufacturerSiteAddress.length > 0 ?\r\n                                                <CustomAccordion key=\"filter\"\r\n                                                    accordionTitle={\"smanufsitename\"}\r\n                                                    accordionComponent={this.manufacturerSiteAccordion(this.props.masterData.ManufacturerSiteAddress)}\r\n                                                    inputParam={{ masterData: this.props.masterData,userInfo:this.props.userInfo }}\r\n                                                    accordionClick={this.props.getContactInfo}\r\n                                                    accordionPrimaryKey={\"nmanufsitecode\"}\r\n                                                    accordionObjectName={\"siteAddress\"}\r\n                                                    selectedKey={this.props.masterData.selectedSite.nmanufsitecode}\r\n                                                />\r\n                                                : \"\"}\r\n                                        </Col>\r\n                                    </Row>\r\n                                    {/* <Row>\r\n                                        <Col>\r\n                                            <DataGrid\r\n                                                primaryKeyField={primaryKeyField}\r\n                                                expandField=\"expanded\"\r\n                                                detailedFieldList={this.detailedFieldList}\r\n                                                extractedColumnList={this.ContactColumns}\r\n                                                inputParam={this.props.inputParam}\r\n                                                userInfo={this.props.userInfo}\r\n                                                // width=\"600px\"\r\n                                                data={this.state.ManufacturerContactInfo || []}\r\n                                                dataResult={process(this.state.ManufacturerContactInfo || [], this.state.dataState)}\r\n                                                dataState={this.state.dataState}\r\n                                                dataStateChange={this.dataStateChange}\r\n                                                controlMap={this.props.controlMap}\r\n                                                userRoleControlRights={this.props.userRoleControlRights || []}\r\n                                                methodUrl=\"ManufacturerContactInfo\"\r\n                                                fetchRecord={this.props.getContactManufacturerLoadEdit}\r\n                                                editParam={editContactParam}\r\n                                                deleteParam={{ operation: \"delete\" }}\r\n                                                deleteRecord={this.DeleteContact}\r\n                                                //pageable={false}\r\n                                                scrollable={\"scrollable\"}\r\n                                                isActionRequired={true}\r\n                                                selectedId={this.props.selectedId}\r\n                                            // isComponent={true}\r\n                                            >\r\n                                            </DataGrid>\r\n                                        </Col>\r\n                                    </Row> */}\r\n\r\n                                </Tab.Pane >\r\n                            </Tab.Content >\r\n                        </Card >\r\n                    </Col >\r\n                </Row >\r\n                <>\r\n                    {this.props.openChildModal &&\r\n                        <SlideOutModal show={this.props.openChildModal}\r\n                            closeModal={this.closeModal}\r\n                            operation={this.props.operation}\r\n                            inputParam={this.props.inputParam}\r\n                            screenName={this.props.screenName}\r\n                            onSaveClick={this.onSaveClick}\r\n                            updateStore={this.props.updateStore}\r\n                            esign={this.props.loadEsign}\r\n                            validateEsign={this.validateEsign}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            mandatoryFields={mandatoryFields}\r\n                            addComponent={this.props.loadEsign ?\r\n                                <Esign operation={this.props.operation}\r\n                                    //  formatMessage={this.props.formatMessage}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                /> :\r\n                                this.props.screenName === \"IDS_MANUFACTURESITE\" ?\r\n                                    <AddSiteManufacturer selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                        //   formatMessage={this.props.formatMessage}\r\n                                        Country={this.props.Country || []}\r\n                                        inputParam={this.props.inputParam}\r\n                                    // defaultValue={this.props.countryCode}\r\n                                    />\r\n                                    :\r\n                                    this.props.screenName === \"IDS_SITECONTACT\" ?\r\n                                    <AddContactInfoManufacturer\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onComboChange={this.onComboChange}\r\n                                    //  formatMessage={this.props.formatMessage}\r\n\r\n                                    />\r\n                                    :\r\n                                    this.props.screenName === \"Manufacturer File\" ?\r\n                                    <AddManufacturerFile\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        onDrop={this.onDropManufacturerFile}\r\n                                        onDropAccepted={this.onDropAccepted}\r\n                                        deleteAttachment={this.deleteAttachment}\r\n                                        actionType={this.state.actionType}\r\n                                        onComboChange={this.onComboChange}\r\n                                        linkMaster={this.props.linkMaster}\r\n                                        editFiles={this.props.editFiles}\r\n                                        maxSize={20}\r\n                                        // maxFiles={this.props.operation === \"update\" ? 1 : 3}\r\n                                        // multiple={this.props.operation === \"update\" ? false : true}\r\n                                        maxFiles={1}\r\n                                        multiple={false}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_MANUFACTURERFILE\" })}\r\n                                        name=\"manufacturerfilename\"\r\n                                    /> : \"\"\r\n\r\n                                    \r\n                            }\r\n                        />\r\n\r\n                    }\r\n\r\n                </>\r\n            </>\r\n        );\r\n    }\r\n    manufacturerSiteAccordion = (manufacturerSiteAddress) => {\r\n        let primaryKeyField = \"nmanufcontactcode\";\r\n        const addManufacturerContactId = this.props.controlMap.has(\"AddManufacturerContactInfo\") && this.props.controlMap.get(\"AddManufacturerContactInfo\").ncontrolcode\r\n        const editManufacturerContactId = this.props.controlMap.has(\"EditManufacturerContactInfo\") && this.props.controlMap.get(\"EditManufacturerContactInfo\").ncontrolcode;\r\n        const editContactParam = {\r\n            screenName: \"ManufacturerContact\", primaryKeyField: \"nmanufcontactcode\", operation: \"update\",\r\n            inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: editManufacturerContactId\r\n        };\r\n        const AddContactParam = {\r\n            screenName: \"ManufacturerContact\", primaryKeyField, undefined, operation: \"create\",\r\n            inputParam: this.props.inputParam, userInfo: this.props.userInfo, ncontrolCode: addManufacturerContactId\r\n        };\r\n\r\n        const accordionMap = new Map();\r\n        manufacturerSiteAddress.map((siteAddress) =>\r\n            accordionMap.set(siteAddress.nmanufsitecode,\r\n                <ManufacturerTabsAccordion siteAddress={siteAddress}\r\n                    getSiteManufacturerLoadEdit={this.props.getSiteManufacturerLoadEdit}\r\n                    masterData={this.props.masterData}\r\n                    ConfirmDelete={this.ConfirmDelete}\r\n                    addManufacturerContactId={addManufacturerContactId}\r\n                    AddContactParam={AddContactParam}\r\n                    openModalContact={this.openModalContact}\r\n                    // tabDetail={this.tabDetail(userSite)}   \r\n\r\n                    primaryKeyField={primaryKeyField}\r\n                    expandField=\"expanded\"\r\n                    detailedFieldList={this.detailedFieldList}\r\n                    extractedColumnList={this.ContactColumns}\r\n                    inputParam={this.props.inputParam}\r\n                    userInfo={this.props.userInfo}\r\n                    data={this.state.ManufacturerContactInfo || []}\r\n                    ManufacturerContactInfo={this.state.ManufacturerContactInfo || []}\r\n                    dataState={this.state.dataState}\r\n                    dataStateChange={this.dataStateChange}\r\n                    controlMap={this.props.controlMap}\r\n                    userRoleControlRights={this.props.userRoleControlRights || []}\r\n                    methodUrl=\"ManufacturerContactInfo\"\r\n                    getContactManufacturerLoadEdit={this.props.getContactManufacturerLoadEdit}\r\n                    editParam={editContactParam}\r\n                    deleteParam={{ operation: \"delete\" }}\r\n                    deleteRecord={this.DeleteContact}\r\n                    scrollable={\"scrollable\"}\r\n                    isActionRequired={true}\r\n                    selectedId={this.props.selectedId}\r\n                    hasDynamicColSize={true}\r\n                />)\r\n        )\r\n        return accordionMap;\r\n    }\r\n\r\n    ConfirmDelete = (obj) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.Delete(obj));\r\n    }\r\n\r\n    onInputOnChange = (event, optional) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === 'ntransactionstatus') {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            }\r\n            else if (event.target.name === \"agree\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            } else {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n\r\n        }\r\n        else if (event.target.type === \"radio\"){\r\n            selectedRecord[event.target.name] = optional;\r\n        }\r\n\r\n        else {\r\n\r\n            if (event.target.name === \"sphoneno\" || event.target.name === \"smobileno\"\r\n                || event.target.name === \"sfaxno\") {\r\n\r\n                if (event.target.value !== \"\") {\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                }\r\n                else {\r\n                    selectedRecord[event.target.name] = event.target.value\r\n                }\r\n            }  else {\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n            // selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onComboChange = (comboData, fieldName) => {\r\n        if (comboData !== null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[fieldName] = comboData;//.value;\r\n\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.state.selectedRecord['semail'] ? validateEmail(this.state.selectedRecord['semail']) : true) {\r\n            let inputParam = {};\r\n\r\n            if (this.props.screenName === \"IDS_MANUFACTURESITE\") {\r\n                inputParam = this.SaveSiteDetails(saveType, formRef);\r\n            }\r\n            else if (this.props.screenName === \"IDS_SITECONTACT\")\r\n            {\r\n                inputParam = this.SaveContactInfo(saveType, formRef);\r\n            }\r\n            else {\r\n                inputParam = this.SaveManufacturerFile(saveType, formRef);\r\n            }\r\n\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n        else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }));\r\n        }\r\n    }\r\n    SaveSiteDetails(saveType, formRef) {\r\n        let inputData = [];\r\n        let postParam=undefined;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nmanufsitecode\", \"ncountrycode\", \"smanufsitename\",\r\n            \"saddress1\", \"saddress2\", \"saddress3\", \"ndefaultstatus\"];\r\n\r\n        if (this.props.operation === \"update\") {\r\n            postParam = {\r\n                inputListName: \"SiteAddress\",\r\n                selectedObject: \"selectedSite\",\r\n                primaryKeyField: \"nmanufsitecode\",\r\n              };\r\n\r\n            inputData[\"manufacturersiteaddress\"] = { \"nmanufcode\": this.props.masterData.selectedManufacturer.nmanufcode };\r\n            fieldList.map(item => {\r\n                if (item === \"ncountrycode\") {\r\n                    return inputData[\"manufacturersiteaddress\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item].value : \"\";\r\n                }\r\n                else {\r\n                    return inputData[\"manufacturersiteaddress\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n                }\r\n            })\r\n        }\r\n        else {\r\n\r\n            inputData[\"manufacturersiteaddress\"] = { \"nmanufcode\": this.props.masterData.selectedManufacturer.nmanufcode };\r\n\r\n            fieldList.map(item => {\r\n                if (item === \"ncountrycode\") {\r\n                    return inputData[\"manufacturersiteaddress\"][item] = this.state.selectedRecord[item].value\r\n                }\r\n                else {\r\n                    return inputData[\"manufacturersiteaddress\"][item] = this.state.selectedRecord[item]\r\n                }\r\n            })\r\n        }\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"SiteAddress\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef,\r\n            postParam:postParam\r\n        }\r\n        return inputParam;\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    SaveContactInfo(saveType, formRef) {\r\n\r\n        let dataState = undefined;\r\n        let inputData = [];\r\n        let postParam=undefined;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        let fieldList = [\"nmanufcontactcode\", \"scontactname\",\r\n            \"sphoneno\", \"smobileno\", \"semail\", \"sfaxno\", \"scomments\", \"ndefaultstatus\"];\r\n\r\n        let selectedId = null;\r\n        if (this.props.operation === \"update\") {\r\n            postParam = {\r\n                inputListName: \"ContactInfo\",\r\n                selectedObject: \"selectedContact\",\r\n                primaryKeyField: \"nmanufcontactcode\",\r\n              };\r\n\r\n            inputData[\"manufacturercontactinfo\"] = {\r\n                \"nmanufcode\": this.props.masterData.selectedManufacturer.nmanufcode,\r\n                \"nmanufsitecode\": this.props.masterData.SiteCode\r\n            };\r\n\r\n            selectedId = this.props.selectedRecord.nmanufcontactcode;\r\n\r\n            fieldList.map(item => {\r\n                return inputData[\"manufacturercontactinfo\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n            dataState = this.state.dataState;\r\n        }\r\n        else {\r\n\r\n            inputData[\"manufacturercontactinfo\"] = {\r\n                \"nmanufcode\": this.props.masterData.selectedManufacturer.nmanufcode,\r\n                \"nmanufsitecode\": this.props.masterData.SiteCode\r\n            };\r\n            fieldList.map(item => {\r\n                return inputData[\"manufacturercontactinfo\"][item] = this.state.selectedRecord[item] ? this.state.selectedRecord[item] : \"\";\r\n            })\r\n            inputData[\"manufacturercontactinfo\"]['ndefaultstatus'] = this.state.selectedRecord && this.state.selectedRecord.ndefaultstatus ?\r\n                this.state.selectedRecord.ndefaultstatus\r\n                : transactionStatus.YES\r\n\r\n        }\r\n        const inputParam = {\r\n            classUrl: this.props.inputParam.classUrl,\r\n            methodUrl: \"ContactInfo\",\r\n            inputData: inputData, selectedId,\r\n            operation: this.props.operation, saveType, formRef, dataState,\r\n            postParam:postParam\r\n        }\r\n        return inputParam;\r\n\r\n        // this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n\r\n    SaveManufacturerFile(saveType, formRef) {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let manufacturerFileArray = [];\r\n        let manufacturerFile = {\r\n            nmanufcode: this.props.masterData.selectedManufacturer.nmanufcode,\r\n            nmanufacturerfilecode: selectedRecord.nmanufacturerfilecode ? selectedRecord.nmanufacturerfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n            ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, manufacturerFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !==undefined ? selectedRecord.ssystemfilename.split('.') :  create_UUID();\r\n                    const filesystemfileext = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !==undefined  ? file.name.split('.')[ssystemfilename.length - 1] : fileExtension;\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nmanufacturerfilecode && selectedRecord.nmanufacturerfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext:  create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name;\r\n                    tempData[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    manufacturerFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                manufacturerFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                manufacturerFile[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                manufacturerFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                manufacturerFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                manufacturerFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                manufacturerFileArray.push(manufacturerFile);\r\n            }\r\n        } else {\r\n            manufacturerFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n            manufacturerFile[\"sdescription\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n            manufacturerFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            manufacturerFile[\"ssystemfilename\"] = \"\";\r\n            manufacturerFile[\"nfilesize\"] = 0;\r\n            manufacturerFileArray.push(manufacturerFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"manufacturerfile\", JSON.stringify(manufacturerFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n\r\n\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"Manufacturer\", selectedObject: \"selectedManufacturer\", primaryKeyField: \"nmanufcode\" };\r\n            selectedId = selectedRecord[\"nmanufacturerfilecode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"manufacturer\",\r\n            saveType, formRef, methodUrl: \"ManufacturerFile\", postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    // DeleteContact = (e, selectedRecord, Type, methodURL,operation,screenName, ncontrolCode) => {\r\n    DeleteContact = (deleteParam) => {\r\n        let inputData = [];\r\n        if (deleteParam.selectedRecord.expanded !== undefined) {\r\n            delete deleteParam.selectedRecord.expanded\r\n        }\r\n        inputData[\"manufacturercontactinfo\"] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        const inputParam = {\r\n            methodUrl: \"ContactInfo\",\r\n            classUrl: this.props.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            dataState: this.state.dataState\r\n        }\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: \"Contact\", operation: \"delete\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: \"Contact\", operation: \"delete\"\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n    }\r\n    //Delete = (e, selectedRecord, Type, methodURL, operation, screenName, ncontrolCode) => {\r\n    Delete = (deleteParam) => {\r\n        let inputData = [];\r\n        if (deleteParam.selectedRecord.expanded && deleteParam.selectedRecord.expanded !== undefined) {\r\n            delete deleteParam.selectedRecord.expanded\r\n        }\r\n        inputData[deleteParam.Type] = deleteParam.selectedRecord;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        const inputParam = {\r\n            methodUrl: deleteParam.methodURL,\r\n            classUrl: this.props.inputParam.classUrl,\r\n            inputData: inputData,\r\n            operation: \"delete\"\r\n        }\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                    openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            if (showEsign(this.props.userRoleControlRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n        //this.props.crudMaster(inputParam, this.props.masterData);\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let { dataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0 ,take :this.props.settings ? parseInt(this.props.settings[14]) : 5}\r\n            }\r\n\r\n            this.setState({\r\n                isSiteOpen: false, isContactOpen: false,\r\n                ManufacturerContactInfo: this.props.masterData.ManufacturerContactInfo,\r\n                SiteCode: this.props.masterData.SiteCode, Country: this.props.masterData.Country, dataState\r\n\r\n            });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n\r\n    onDropManufacturerFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n}\r\nexport default (injectIntl(ManufacturerSiteTab));"]},"metadata":{},"sourceType":"module"}