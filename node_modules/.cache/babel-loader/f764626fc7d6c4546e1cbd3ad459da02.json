{"ast":null,"code":"import _createForOfIteratorHelper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Nav,Button,Modal,Card}from'react-bootstrap';import{FormattedMessage,injectIntl}from'react-intl';import{ListWrapper}from'../../components/client-group.styles';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import FormTextarea from'../../components/form-textarea/form-textarea.component';import DropZone from'../../components/dropzone/dropzone.component';import'../../components/list-master/list-master.styles';import{attachmentType,parameterType,transactionStatus}from'../../components/Enumeration';import'./result.css';import'../../assets/styles/tree.css';import{MediaHeader,MediaLabel,MediaSubHeader}from'../../components/App.styles';import FormInput from'../../components/form-input/form-input.component';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCalculator,faEye,faInfo,faInfoCircle,faSave}from'@fortawesome/free-solid-svg-icons';import TestPopOver from'./TestPopOver';import{numberConversion,numericGrade}from'./ResultEntryValidation';import{constructOptionList,deleteAttachmentDropZone,rearrangeDateFormat}from'../../components/CommonScript';import{connect}from'react-redux';import ResultEntryPredefinedComments from'./ResultEntryPredefinedComments';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import ModalShow from'../../components/ModalShow';import{// getPredefinedData,\nupdateStore}from'../../actions';import rsapi from'../../rsapi';import{withRouter}from'react-router-dom';import{initRequest}from'../../actions/LoginAction';import{toast}from'react-toastify';import Axios from'axios';import{intl}from'../../components/App';var mapStatetoProps=function mapStatetoProps(state){return{Login:state.Login};};var ResultEntryForm=/*#__PURE__*/function(_React$Component){_inherits(ResultEntryForm,_React$Component);var _super=_createSuper(ResultEntryForm);function ResultEntryForm(props){var _this;_classCallCheck(this,ResultEntryForm);_this=_super.call(this,props);_this.onComboChange=function(comboData,comboName){var selectedRecord=_this.state.selectedRecord||[];var currentAlertResultCode=_this.state.currentAlertResultCode||0;if(comboData){selectedRecord[comboName]=comboData;}else{selectedRecord[comboName]=[];}_this.setState({selectedRecord:selectedRecord});};_this.onInputChange=function(Data,name){var selectedRecord=_this.state.selectedRecord||[];var currentAlertResultCode=_this.state.currentAlertResultCode||0;if(Data){selectedRecord[name]=Data.target.value;}else{selectedRecord[name]=[];}_this.setState({selectedRecord:selectedRecord});};_this.closeModalShow=function(){var showAlertGrid=_this.props.Login.showAlertGrid;var selectedRecord=_this.props.Login.selectedRecord;selectedRecord['ntestgrouptestpredefsubcode']&&delete selectedRecord['ntestgrouptestpredefsubcode'];showAlertGrid=false;var updateInfo={typeName:DEFAULT_RETURN,data:{showAlertGrid:showAlertGrid,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.onModalSave=function(){var selectedRecord=_this.state.selectedRecord||[];var currentAlertResultCode=_this.state.currentAlertResultCode||0;var parameterResults=_this.state.parameterResults;var currentntestgrouptestpredefcode=_this.state.currentntestgrouptestpredefcode||0;var bool=parameterResults.some(function(x){return x['ntransactionresultcode']===currentAlertResultCode;});if(bool){parameterResults.map(function(Parameter){if(Parameter['ntransactionresultcode']===currentAlertResultCode){Parameter['additionalInfoUidata']={ntestgrouptestpredefsubcode:selectedRecord['ntestgrouptestpredefsubcode']};if(selectedRecord['ntestgrouptestpredefsubcode']){if(typeof selectedRecord['ntestgrouptestpredefsubcode']==='string'){Parameter['additionalInfo']=selectedRecord['ntestgrouptestpredefsubcode'];}else{Parameter['additionalInfo']=\"\";Parameter['additionalInfo']=selectedRecord['ntestgrouptestpredefsubcode'].map(function(x){return x.label+\",\";}).join('\\n');Parameter['additionalInfo']=Parameter['additionalInfo'].substring(0,Parameter['additionalInfo'].length-1);}}else{Parameter['additionalInfo']=\"\";Parameter['additionalInfoUidata']&&delete Parameter['additionalInfoUidata'];}Parameter['ntestgrouptestpredefcode']=currentntestgrouptestpredefcode;}});}// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: { parameterResults:parameterResults,selectedRecord: selectedRecord, showAlert: false }\n// }\n// this.props.updateStore(updateInfo);\n_this.setState({parameterResults:parameterResults,selectedRecord:selectedRecord,showAlert:false});};_this.onGradeEvent=function(ResultParameter,index,parameter){if(ResultParameter.length>0&&ResultParameter[index]!==undefined&&ResultParameter[index].sresult!==null){var selectedRecord=_this.state.selectedRecord||[];var selectedResultGrade=_this.state.selectedResultGrade||[];if(parameter.nparametertypecode===parameterType.NUMERIC){selectedResultGrade[index]={ngradecode:ResultParameter[index].sresult!==\"\"?numericGrade(parameter,numberConversion(parseFloat(ResultParameter[index].sresult),parseInt(parameter.nroundingdigits))):-1};}if(parameter.nparametertypecode===parameterType.PREDEFINED){if(ResultParameter[index].sresult!==null){selectedResultGrade[index]={ngradecode:ResultParameter[index].ngradecode};}else{selectedResultGrade[index]={ngradecode:0};}}if(parameter.nparametertypecode===parameterType.CHARACTER){if(ResultParameter[index].sresult!==null&&ResultParameter[index].sresult.trim()!==\"\"){//selectedResultGrade[index] = { ngradecode: ResultParameter[index].ngradecode };\nselectedResultGrade[index]={ngradecode:4};}else{selectedResultGrade[index]={ngradecode:-1};}}selectedRecord.selectedResultGrade=selectedResultGrade;_this.setState({selectedRecord:selectedRecord});}};_this.deleteAttachmentParameterFile=function(event,file,fieldName,index){var ResultParameter=_this.state.parameterResults[index];var parameterResults=_this.state.parameterResults;ResultParameter[fieldName]=deleteAttachmentDropZone(ResultParameter[fieldName],file);parameterResults[index]['editable']=true;_this.setState({parameterResults:parameterResults});};_this.onResultInputChange=function(event,index,parameter){var selectedRecord=_this.state.selectedRecord||[];var ResultParameter=_this.state.parameterResults?_toConsumableArray(_this.state.parameterResults):[];var sresult=\"\";var sfinal=\"\";var sresultpredefinedname=\"\";var salertmessage=\"\";var sresultcomment=\"\";var value=-1;var acceptedFile=[];var ncalculatedresult;var currentAlertResultCode=0;var currentntestgrouptestpredefcode=0;var inputData={};if(parameter.nparametertypecode===parameterType.NUMERIC){if(/^-?\\d*?\\.?\\d*?$/.test(event.target.value)||event.target.value===\"\"){sresult=event.target.value;ncalculatedresult=4;}else{sresult=ResultParameter[index]['sresult']===null?\"\":ResultParameter[index]['sresult'];ncalculatedresult=ResultParameter[index]['ncalculatedresult'];}}if(parameter.nparametertypecode===parameterType.PREDEFINED){currentAlertResultCode=event.item.ntransactionresultcode;currentntestgrouptestpredefcode=event.item.ntestgrouptestpredefcode;if(event!=null){sresult=event.item.spredefinedname;sresultpredefinedname=event.item.sresultpredefinedname;sfinal=event.item.spredefinedsynonym;value=event.item.ngradecode;salertmessage=event.item.salertmessage?event.item.salertmessage:\"\";sresultcomment=event.item.spredefinedcomments?event.item.spredefinedcomments:\"\";ncalculatedresult=4;}else{sresult=\"\";sfinal=\"\";sresultpredefinedname=\"\";value=-1;ncalculatedresult=4;}inputData={'ntestgrouptestpredefcode':event.item.ntestgrouptestpredefcode,'salertmessage':salertmessage,'nneedresultentryalert':event.item.nneedresultentryalert,'nneedsubcodedresult':event.item.nneedsubcodedresult};if(event.item.nneedresultentryalert===transactionStatus.NO&&event.item.nneedsubcodedresult===transactionStatus.NO){if(ResultParameter[index]['additionalInfo']){ResultParameter[index]['additionalInfo']=\"\";}if(ResultParameter[index]['additionalInfoUidata']){ResultParameter[index]['additionalInfoUidata']=\"\";}}}if(parameter.nparametertypecode===parameterType.CHARACTER){sresult=event.target.value;if(event.target.value.trim()===\"\")ncalculatedresult=-1;else ncalculatedresult=4;}if(parameter.nparametertypecode===parameterType.ATTACHMENT){sresult=event[0]&&event[0].name;sfinal=event;ncalculatedresult=4;}ResultParameter[index]['sresult']=sresult;ResultParameter[index]['sfinal']=sfinal;ResultParameter[index]['sresultpredefinedname']=sresultpredefinedname;ResultParameter[index]['sresultcomment']=sresultcomment;ResultParameter[index]['salertmessage']=salertmessage;ResultParameter[index]['acceptedFile']=acceptedFile;ResultParameter[index]['editable']=true;ResultParameter[index]['ngradecode']=value;ResultParameter[index]['ncalculatedresult']=ncalculatedresult;ResultParameter[index]['dummty']='dummty';selectedRecord.ResultParameter=ResultParameter;var parameterResults=ResultParameter;if(parameter.nparametertypecode===parameterType.PREDEFINED&&(event.item.nneedresultentryalert===transactionStatus.YES||event.item.nneedsubcodedresult===transactionStatus.YES)){// this.props.\n_this.getPredefinedData(inputData,selectedRecord,currentAlertResultCode,_this.props.Login.masterData,currentntestgrouptestpredefcode);}_this.setState({parameterResults:parameterResults,currentAlertResultCode:currentAlertResultCode,currentntestgrouptestpredefcode:currentntestgrouptestpredefcode});};_this.renderSwitch=function(parameter,index,result,screenName){var selectedResultGrade=_this.state.selectedResultGrade;//this.props.selectedResultGrade;\nvar gradeValues=_this.props.gradeValues;var gradeCode=selectedResultGrade?selectedResultGrade.length>0?selectedResultGrade[index]?selectedResultGrade[index]['ngradecode']:undefined:\"\":\"\";var isAdditionalInfoRequired=parameter.hasOwnProperty('additionalInfo')&&parameter['additionalInfo']!==\"\"&&parameter['additionalInfo']!==null?true:false;//  parameter.jsondata['value'] ? JSON.parse(parameter.jsondata['value']).hasOwnProperty('additionalInfo') &&\n//     JSON.parse(parameter.jsondata['value'])['additionalInfo'] !== \"\" ? true : false :\n//     parameter.jsondata.hasOwnProperty('additionalInfo') &&\n//         parameter.jsondata['additionalInfo'] !== \"\" ? true : false\nswitch(parameter.nparametertypecode){case 1:{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row w-100\"},/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(FormInput,{name:_this.state.parameterResults[index].ntransactionresultcode,type:\"text\",required:false,isMandatory:false// value={this.props.parameterResults.length > 0 ?\n//     this.props.parameterResults[index] ? (this.props.parameterResults[index]['sresult'] !== null ? this.props.parameterResults[index]['sresult'] : \"\") : \"\" : \"\"}\n,value:_this.state.parameterResults.length>0?_this.state.parameterResults[index]?_this.state.parameterResults[index]['sresult']!==null?_this.state.parameterResults[index]['sresult']:\"\":\"\":\"\"// placeholder={parameter.sparametersynonym}\n//label={parameter.sparametersynonym}\n// onChange={(event) => this.props.onResultInputChange(event, index, parameter)}\n,onChange:function onChange(event){return _this.onResultInputChange(event,index,parameter);},onBlur:function onBlur(){return _this.onGradeEvent(_this.state.parameterResults,index,parameter);}// onBlur={() => this.props.onGradeEvent(this.props.parameterResults, index, parameter)}\n,maxLength:9,onKeyUp:function onKeyUp(event){return _this.props.onKeyPress(event,index,_this.props.paremterResultcode);}})),parameter.ntestgrouptestformulacode>0?/*#__PURE__*/React.createElement(Col,{md:2,className:\"d-flex product-category justify-content-end icon-group-wrap\"},/*#__PURE__*/React.createElement(Nav.Link,{title:\"Calculate Formula\",className:\"btn btn-circle outline-grey ml-2\",role:\"button\",id:screenName+-+index,onClick:function onClick(event){return _this.props.getFormula(parameter,_this.props.Login.userInfo,_this.props.Login.masterData,index,event);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{title:\"Calculate Formula\",icon:faCalculator}))):\"\",/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListWrapper,null,/*#__PURE__*/React.createElement(MediaLabel,{className:\"labelfont\",style:{color:gradeValues[gradeCode][0]['scolorhexcode']}},gradeCode===undefined?\"\":gradeValues[gradeCode][0]['sgradename'])))));}case 2:{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{md:isAdditionalInfoRequired?8:10,className:\"pl-0\"},/*#__PURE__*/React.createElement(FormSelectSearch,_defineProperty({name:_this.state.parameterResults[index]&&_this.state.parameterResults[index].ntransactionresultcode,as:\"select\"//formLabel={parameter.sparametersynonym}\n,defaultValue:{\"value\":_this.state.parameterResults[index]&&_this.state.parameterResults[index].sresultpredefinedname,\"label\":_this.state.parameterResults[index]&&_this.state.parameterResults[index].sresultpredefinedname}//  defaultValue={{ \"value\": parameter.sresultpredefinedname, \"label\": parameter.sresultpredefinedname }}\n//  defaultValue={parameter.sresult && (parameter.sresult!=null || parameter.sresult !== \"\") ?  { \"value\": parameter.ngradecode, \"label\": parameter.sresult } :\n//  this.props.predefinedValues ? constructOptionList(this.props.predefinedValues[parameter.ntransactionresultcode]||[],'ngradecode',\n// 'spredefinedname' , undefined, undefined, undefined).get(\"DefaultValue\"):\"\"}\n,options:_this.props.predefinedValues?_this.props.predefinedValues[parameter.ntransactionresultcode]:\"\",optionId:\"ntestgrouptestpredefcode\",optionValue:\"spredefinedname\",isMulti:false,isDisabled:false,matchFrom:'start',isSearchable:true,isClearable:parameter.nresultmandatory===transactionStatus.YES?false:true,isMandatory:false,onKeyUp:function onKeyUp(event){return _this.props.onKeyPress(event,index,_this.props.paremterResultcode);}// onChange={(event) => this.props.onResultInputChange(event, index, parameter)}\n// onBlur={() => this.props.onGradeEvent(this.props.parameterResults, index, parameter)}\n,onChange:function onChange(event){return _this.onResultInputChange(event,index,parameter);}//  onBlur={() => this.onGradeEvent(this.state.parameterResults, index, parameter)}\n},\"matchFrom\",'start'))),/*#__PURE__*/React.createElement(Col,{md:2,className:\"pt-2\"},/*#__PURE__*/React.createElement(ListWrapper,null,/*#__PURE__*/React.createElement(MediaLabel,{className:\"labelfont\",style:{color:gradeValues[gradeCode][0]['scolorhexcode']}},gradeCode===undefined?\"\":gradeValues[gradeCode][0]['sgradename']))),isAdditionalInfoRequired&&/*#__PURE__*/React.createElement(Col,{md:2,className:\"pt-2\"},/*#__PURE__*/React.createElement(TestPopOver,{intl:_this.props.intl,needIcon:true,needPopoverTitleContent:true,placement:\"left\",stringList:// parameter.jsondata['value'] ?\n//      [JSON.parse(parameter.jsondata['value'])['additionalInfo']] :\n//              [parameter.jsondata['additionalInfo']] \nparameter.hasOwnProperty('additionalInfo')&&[parameter['additionalInfo']]})));}case 3:{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Col,{md:10,className:\"pl-0\"},/*#__PURE__*/React.createElement(FormTextarea,{name:parameter.ntransactionresultcode//label={parameter.sparametersynonym}\n//placeholder={parameter.sparametersynonym}\n,type:\"text\"//     defaultValue={parameter.sresult}\n,defaultValue:_this.state.parameterResults[index]&&_this.state.parameterResults[index]['sresult'],isMandatory:false,required:false,maxLength:255,onChange:function onChange(event){return _this.onResultInputChange(event,index,parameter);},onBlur:function onBlur(){return _this.onGradeEvent(_this.state.parameterResults,index,parameter);}})),/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(ListWrapper,null,/*#__PURE__*/React.createElement(MediaLabel,{className:\"labelfont\",style:{color:gradeValues[gradeCode][0]['scolorhexcode']}},gradeCode===undefined?\"\":gradeValues[gradeCode][0]['sgradename']))));}case 4:{return/*#__PURE__*/React.createElement(Col,{md:12,className:\"pl-0\"},/*#__PURE__*/React.createElement(DropZone,{maxFiles:1,isMandatory:false//label={parameter.sparametersynonym}\n,accept:\".pdf\",minSize:0,maxSize:20,multiple:false// editFiles={parameter.sfinal != null ? parameter : \"\"}\n,editFiles:_this.state.parameterResults[index].sfinal!=null?_this.state.parameterResults[index]:\"\",attachmentTypeCode:attachmentType.FTP,fileSizeName:\"nfilesize\",fileName:\"sfinal\",index:index// deleteAttachment={this.props.deleteAttachmentParamFile}\n// onDrop={(event) => this.props.onResultInputChange(event, index, parameter)}\n,deleteAttachment:_this.deleteAttachmentParameterFile,onDrop:function onDrop(event){return _this.onResultInputChange(event,index,parameter);}//disabled={disabled}\n}));}default:return\"\";}};_this.state={parameterResults:_toConsumableArray(_this.props.ResultParameter),selectedResultGrade:_this.props.selectedResultGrade};return _this;}// componentDidUpdate(previousProps) {\n//     let bool = false;\n//     let { currentAlertResultCode, currentntestgrouptestpredefcode,selectedRecord,showAlert } = this.state\n//     if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n//         bool = true;\n//         selectedRecord = this.props.Login.selectedRecord;\n//     }\n//     if (this.props.Login.showAlert !== previousProps.Login.showAlert) {\n//         bool = true;\n//         showAlert = this.props.Login.showAlert;\n//     }\n//     if (this.props.Login.currentAlertResultCode !== previousProps.Login.currentAlertResultCode) {\n//         bool = true;\n//         currentAlertResultCode = this.props.Login.currentAlertResultCode;\n//     }\n//     if (this.props.Login.currentntestgrouptestpredefcode !== previousProps.Login.currentntestgrouptestpredefcode) {\n//         bool = true;\n//         currentntestgrouptestpredefcode = this.props.Login.currentntestgrouptestpredefcode;\n//     }\n//     if (bool) {\n//         this.setState({ currentntestgrouptestpredefcode, currentAlertResultCode,selectedRecord,showAlert })\n//     }\n// }\n//For Subcode Result Start\n_createClass(ResultEntryForm,[{key:\"getPredefinedData\",value:function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode){var _this2=this;//  return function (dispatch) {\nvar inputParamData={ntestgrouptestpredefcode:inputData.ntestgrouptestpredefcode};//dispatch(initRequest(true));\nrsapi.post(\"resultentrybysample/getPredefinedData\",inputParamData).then(function(response){var showMultiSelectCombo=false;var ResultParameter=selectedRecord['ResultParameter'];var onlyAlertMsgAvailable=false;var testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult'];if(inputData['nneedsubcodedresult']===transactionStatus.YES){showMultiSelectCombo=true;masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult;}else{onlyAlertMsgAvailable=true;}var _iterator=_createForOfIteratorHelper(ResultParameter),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var Parameter=_step.value;if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){var additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata):Parameter.additionalInfoUidata;if(Parameter['ntransactionresultcode']===currentAlertResultCode&&Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){if(Parameter.additionalInfoUidata){selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'];break;}}else{if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){delete selectedRecord[\"ntestgrouptestpredefsubcode\"];}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();};masterData['salertmessage']=inputData.salertmessage;_this2.setState({masterData:masterData,showAlert:inputData.nneedresultentryalert===transactionStatus.NO?false:true,showAlertForPredefined:true,showMultiSelectCombo:showMultiSelectCombo,onlyAlertMsgAvailable:onlyAlertMsgAvailable,additionalInfoView:false,selectedRecord:selectedRecord,currentAlertResultCode:currentAlertResultCode,currentntestgrouptestpredefcode:currentntestgrouptestpredefcode});// dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: { \n//         loading: false,\n//        masterData, \n//         showAlert: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\n//          showAlertForPredefined: true,\n//          showMultiSelectCombo,\n//          onlyAlertMsgAvailable,\n//          additionalInfoView:false,\n//          selectedRecord,\n//          currentAlertResultCode,\n//          currentntestgrouptestpredefcode\n//     }\n// })\n});// .catch(error => {\n//     dispatch({\n//         type: DEFAULT_RETURN,\n//         payload: {\n//             loading: false\n//         }\n//     })\n//     if (error.response.status === 500) {\n//         toast.error(error.message);\n//     } else {\n//         toast.warn(error.response.data);\n//     }\n// })\n//    }\n}// componentDidUpdate(previousProps, prevState, snapshot) {\n//     let parameterResults=[];\n//     if(this.props.parameterResults!==previousProps.parameterResults){\n//         parameterResults=this.props.parameterResults;\n//         this.setState({parameterResults})\n//     } \n// }\n},{key:\"render\",value:// static getDerivedStateFromProps(props, state) {\n//     if( props.Login.showAlert !==  state.showAlert){\n//         //Change in props\n//         return{\n//             showAlert: props.Login.showAlert\n//         };\n//     } \n//     return null; // No change to state\n// }\n// componentWillUnmount() {\n//     let parameterResults = this.state.parameterResults\n//     const updateInfo = {\n//         typeName: DEFAULT_RETURN,\n//         data: { parameterResults: parameterResults }\n//     }\n//     this.props.updateStore(updateInfo);\n// }\n// shouldComponentUpdate (nextProps,nextState) {\n//     // Rendering the component only if\n//     // passed props value is changed\n//     console.log('nextProps',nextProps);\n//     if ((nextProps.Login.parameterResults !==this.props.Login.parameterResults)) {\n//       return false;\n//     }else if(nextState.parameterResults!==this.state.parameterResults){\n//         return true;\n//     } else {\n//       return false;\n//     }\n//   }\n// componentDidUpdate (prevProps, prevState) {\n//     console.log('Deleted User successfully');\n//     // Changing the state after 2 sec\n//     // from the time when the component\n//     // is rendered\n//     // setTimeout(() => {\n//     //   this.setState({ color: 'wheat' });\n//     // }, 2000);\n//     let parameterResults = this.state.parameterResults\n//     if(this.state.parameterResults!==prevState.parameterResults){\n//         const updateInfo = {\n//             typeName: DEFAULT_RETURN,\n//             data: { parameterResults: parameterResults }\n//         }\n//         this.updateStoreResultEntryForm(updateInfo);\n//     }\n//   }\n// this.props.onSaveClick = (childData) =>{\n//     this.setState({name: childData})\n// }\n// updateStoreResultEntryForm = (updateInfo)  => { \n//     return function (dispatch) {\n//         console.log('updateInfoXXXXX')\n//         dispatch({\n//             type: updateInfo.typeName,\n//             payload: {\n//                 ...updateInfo.data,\n//                 masterStatus: \"\",\n//                 errorCode: undefined\n//             }\n//         }); \n//     } \n// }\nfunction render(){return/*#__PURE__*/React.createElement(React.Fragment,null,//this.props.index===0&&\nthis.state.showAlert&&/*#__PURE__*/React.createElement(ModalShow,{modalShow:this.state.showAlert,modalTitle:this.props.intl.formatMessage({id:\"IDS_ADDITIONALINFOREQURIED\"}),closeModal:this.closeModalShow,onSaveClick:this.onModalSave,removeCancel:this.state.showAlertForPredefined||this.state.additionalInfoView?true:false,needSubmit:this.state.showAlertForPredefined||this.state.additionalInfoView?true:false,needSave:this.state.showAlertForPredefined||this.state.additionalInfoView?\"\":true,selectedRecord:this.state.selectedRecord||{},size:this.state.showAlertForPredefined||this.state.additionalInfoView?\"\":'lg',showAlertMsg:this.state.showAlertForPredefined?true:false,modalBody:/*#__PURE__*/React.createElement(ResultEntryPredefinedComments,{onlyAlertMsgAvailable:this.state.onlyAlertMsgAvailable,salertmessage:this.state.masterData['salertmessage'],showMultiSelectCombo:this.state.showMultiSelectCombo,testgrouptestpredefsubresultOptions:this.state.masterData.testgrouptestpredefsubresultOptions||[],selectedRecord:this.state.selectedRecord||{},onInputChange:this.onInputChange,onComboChange:this.onComboChange})}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(React.Fragment,null,this.props.needSubSample&&this.props.parameterResults.ssamplearno?/*#__PURE__*/React.createElement(MediaHeader,{className:\"labelfont\",style:{color:\"#007bff\"}},this.props.parameterResults.ssamplearno,this.props.parameterResults.stestsynonym?/*#__PURE__*/React.createElement(\"span\",{className:\"labelfont\"//style={{ color: \"#505f79\" }}\n,style:{color:\"#97a0af\",paddingLeft:'0.2rem'}},\" \",this.props.parameterResults.stestsynonym):\"\"):this.props.parameterResults.sarno?/*#__PURE__*/React.createElement(MediaHeader,{className:\"labelfont\",style:{color:\"#007bff\"}},this.props.parameterResults.sarno,this.props.parameterResults.stestsynonym?/*#__PURE__*/React.createElement(\"span\",{className:\"labelfont\"//style={{ color: \"#505f79\" }}\n,style:{color:\"#97a0af\",paddingLeft:'0.2rem'}},\" \",this.props.parameterResults.stestsynonym):\"\"):\"\",/*#__PURE__*/React.createElement(Col,{md:12,className:\"pl-0 mt-2\"},/*#__PURE__*/React.createElement(MediaHeader,{className:\"labelfont\",style:{color:\"#505f79\"}// style={{ color: \"#97a0af\" }}\n},\" \",this.props.parameterResults.sparametersynonym,this.props.parameterResults.nresultmandatory===transactionStatus.NO?\"(optional)\":\"\")),this.renderSwitch(this.props.parameterResults,this.props.index,this.props.parameterResults.ntransactionresultcode,this.props.Login.screenName))));}}]);return ResultEntryForm;}(React.Component);export default connect(mapStatetoProps,{updateStore:updateStore//,getPredefinedData\n})(injectIntl(ResultEntryForm));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/ResultEntryBySample/ResultEntryForm.jsx"],"names":["React","Row","Col","Nav","Button","Modal","Card","FormattedMessage","injectIntl","ListWrapper","FormSelectSearch","FormTextarea","DropZone","attachmentType","parameterType","transactionStatus","MediaHeader","MediaLabel","MediaSubHeader","FormInput","FontAwesomeIcon","faCalculator","faEye","faInfo","faInfoCircle","faSave","TestPopOver","numberConversion","numericGrade","constructOptionList","deleteAttachmentDropZone","rearrangeDateFormat","connect","ResultEntryPredefinedComments","DEFAULT_RETURN","ModalShow","updateStore","rsapi","withRouter","initRequest","toast","Axios","intl","mapStatetoProps","state","Login","ResultEntryForm","props","onComboChange","comboData","comboName","selectedRecord","currentAlertResultCode","setState","onInputChange","Data","name","target","value","closeModalShow","showAlertGrid","updateInfo","typeName","data","onModalSave","parameterResults","currentntestgrouptestpredefcode","bool","some","x","map","Parameter","ntestgrouptestpredefsubcode","label","join","substring","length","showAlert","onGradeEvent","ResultParameter","index","parameter","undefined","sresult","selectedResultGrade","nparametertypecode","NUMERIC","ngradecode","parseFloat","parseInt","nroundingdigits","PREDEFINED","CHARACTER","trim","deleteAttachmentParameterFile","event","file","fieldName","onResultInputChange","sfinal","sresultpredefinedname","salertmessage","sresultcomment","acceptedFile","ncalculatedresult","inputData","test","item","ntransactionresultcode","ntestgrouptestpredefcode","spredefinedname","spredefinedsynonym","spredefinedcomments","nneedresultentryalert","nneedsubcodedresult","NO","ATTACHMENT","YES","getPredefinedData","masterData","renderSwitch","result","screenName","gradeValues","gradeCode","isAdditionalInfoRequired","hasOwnProperty","onKeyPress","paremterResultcode","ntestgrouptestformulacode","getFormula","userInfo","color","predefinedValues","nresultmandatory","FTP","inputParamData","post","then","response","showMultiSelectCombo","onlyAlertMsgAvailable","testgrouptestpredefsubresult","additionalInfoUidata","JSON","parse","showAlertForPredefined","additionalInfoView","formatMessage","id","testgrouptestpredefsubresultOptions","needSubSample","ssamplearno","stestsynonym","paddingLeft","sarno","sparametersynonym","Component"],"mappings":"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AAS,CAACQ,qBAAV,GAAoClG,iBAAiB,CAACoG,EAAtD,CAA2D,KAA3D,CAAmE,IAFpE,CAGV+B,sBAAsB,CAAE,IAHd,CAIVN,oBAAoB,CAApBA,oBAJU,CAKVC,qBAAqB,CAArBA,qBALU,CAMVM,kBAAkB,CAAE,KANV,CAOVhG,cAAc,CAAdA,cAPU,CAQVC,sBAAsB,CAAtBA,sBARU,CASVc,+BAA+B,CAA/BA,+BATU,CAAd,EAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CA5DL,EA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH,CAED;AACA;AACA;AACA;AACA;AACA;AACA;sBA8MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS,CACL,mBACI,wCASK;AACG,KAAKtB,KAAL,CAAWiC,SAAX,eACA,oBAAC,SAAD,EACI,SAAS,CAAE,KAAKjC,KAAL,CAAWiC,SAD1B,CAEI,UAAU,CAAE,KAAK9B,KAAL,CAAWL,IAAX,CAAgB0G,aAAhB,CAA8B,CAAEC,EAAE,CAAE,4BAAN,CAA9B,CAFhB,CAGI,UAAU,CAAE,KAAK1F,cAHrB,CAII,WAAW,CAAE,KAAKK,WAJtB,CAKI,YAAY,CAAE,KAAKpB,KAAL,CAAWsG,sBAAX,EAAqC,KAAKtG,KAAL,CAAWuG,kBAAhD,CAAqE,IAArE,CAA4E,KAL9F,CAMI,UAAU,CAAE,KAAKvG,KAAL,CAAWsG,sBAAX,EAAqC,KAAKtG,KAAL,CAAWuG,kBAAhD,CAAqE,IAArE,CAA4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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Nav, Button, Modal, Card } from 'react-bootstrap';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport FormTextarea from '../../components/form-textarea/form-textarea.component';\r\nimport DropZone from '../../components/dropzone/dropzone.component';\r\nimport '../../components/list-master/list-master.styles';\r\nimport { attachmentType, parameterType, transactionStatus } from '../../components/Enumeration';\r\nimport './result.css';\r\nimport '../../assets/styles/tree.css';\r\nimport { MediaHeader, MediaLabel, MediaSubHeader } from '../../components/App.styles';\r\nimport FormInput from '../../components/form-input/form-input.component';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCalculator, faEye, faInfo, faInfoCircle, faSave } from '@fortawesome/free-solid-svg-icons';\r\nimport TestPopOver from './TestPopOver';\r\nimport { numberConversion, numericGrade } from './ResultEntryValidation';\r\nimport { constructOptionList, deleteAttachmentDropZone, rearrangeDateFormat } from '../../components/CommonScript';\r\nimport { connect } from 'react-redux';\r\nimport ResultEntryPredefinedComments from './ResultEntryPredefinedComments';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport ModalShow from '../../components/ModalShow';\r\nimport {\r\n    // getPredefinedData,\r\n    updateStore\r\n} from '../../actions';\r\nimport rsapi from '../../rsapi';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { initRequest } from '../../actions/LoginAction';\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { intl } from '../../components/App';\r\nconst mapStatetoProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nclass ResultEntryForm extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            parameterResults: [...this.props.ResultParameter],\r\n            selectedResultGrade: this.props.selectedResultGrade\r\n        }\r\n\r\n    } \r\n\r\n\r\n    // componentDidUpdate(previousProps) {\r\n    //     let bool = false;\r\n    //     let { currentAlertResultCode, currentntestgrouptestpredefcode,selectedRecord,showAlert } = this.state\r\n    //     if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n    //         bool = true;\r\n    //         selectedRecord = this.props.Login.selectedRecord;\r\n    //     }\r\n    //     if (this.props.Login.showAlert !== previousProps.Login.showAlert) {\r\n    //         bool = true;\r\n    //         showAlert = this.props.Login.showAlert;\r\n    //     }\r\n\r\n    //     if (this.props.Login.currentAlertResultCode !== previousProps.Login.currentAlertResultCode) {\r\n    //         bool = true;\r\n    //         currentAlertResultCode = this.props.Login.currentAlertResultCode;\r\n    //     }\r\n    //     if (this.props.Login.currentntestgrouptestpredefcode !== previousProps.Login.currentntestgrouptestpredefcode) {\r\n    //         bool = true;\r\n    //         currentntestgrouptestpredefcode = this.props.Login.currentntestgrouptestpredefcode;\r\n    //     }\r\n    //     if (bool) {\r\n    //         this.setState({ currentntestgrouptestpredefcode, currentAlertResultCode,selectedRecord,showAlert })\r\n    //     }\r\n    // }\r\n    //For Subcode Result Start\r\n    onComboChange = (comboData, comboName) => {\r\n        const selectedRecord = this.state.selectedRecord || [];\r\n        let currentAlertResultCode = this.state.currentAlertResultCode || 0;\r\n        if (comboData) {\r\n            selectedRecord[comboName] = comboData;\r\n        } else {\r\n            selectedRecord[comboName] = []\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    onInputChange = (Data, name) => {\r\n        const selectedRecord = this.state.selectedRecord || [];\r\n        let currentAlertResultCode = this.state.currentAlertResultCode || 0;\r\n        if (Data) {\r\n            selectedRecord[name] = Data.target.value;\r\n        }\r\n        else {\r\n            selectedRecord[name] = [];\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n    closeModalShow = () => {\r\n        let showAlertGrid = this.props.Login.showAlertGrid;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        selectedRecord['ntestgrouptestpredefsubcode'] && delete selectedRecord['ntestgrouptestpredefsubcode']\r\n        showAlertGrid = false;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { showAlertGrid, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    onModalSave = () => {\r\n        const selectedRecord = this.state.selectedRecord || [];\r\n        let currentAlertResultCode = this.state.currentAlertResultCode || 0;\r\n        let parameterResults = this.state.parameterResults\r\n        let currentntestgrouptestpredefcode = this.state.currentntestgrouptestpredefcode || 0;\r\n        let bool = parameterResults.some(x => x['ntransactionresultcode'] === currentAlertResultCode)\r\n        if (bool) {\r\n            parameterResults.map(Parameter => {\r\n                if (Parameter['ntransactionresultcode'] === currentAlertResultCode) {\r\n                    Parameter['additionalInfoUidata'] = { ntestgrouptestpredefsubcode: selectedRecord['ntestgrouptestpredefsubcode'] }\r\n                    if (selectedRecord['ntestgrouptestpredefsubcode']) {\r\n                        if (typeof selectedRecord['ntestgrouptestpredefsubcode'] === 'string') {\r\n                            Parameter['additionalInfo'] = selectedRecord['ntestgrouptestpredefsubcode']\r\n                        } else {\r\n                            Parameter['additionalInfo'] = \"\"\r\n                            Parameter['additionalInfo'] = selectedRecord['ntestgrouptestpredefsubcode'].map(x => x.label + \",\").join('\\n')\r\n                            Parameter['additionalInfo'] = Parameter['additionalInfo'].substring(0,\r\n                                Parameter['additionalInfo'].length - 1)\r\n                        }\r\n                    } else {\r\n                        Parameter['additionalInfo'] = \"\"\r\n                        Parameter['additionalInfoUidata'] && delete Parameter['additionalInfoUidata']\r\n                    }\r\n                    Parameter['ntestgrouptestpredefcode'] = currentntestgrouptestpredefcode\r\n                }\r\n            }\r\n            );\r\n        }\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: { parameterResults:parameterResults,selectedRecord: selectedRecord, showAlert: false }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n        this.setState({ parameterResults: parameterResults, selectedRecord: selectedRecord, showAlert: false })\r\n    }\r\n\r\n    //For Subcode Result End\r\n\r\n\r\n    onGradeEvent = (ResultParameter, index, parameter) => {\r\n        if (ResultParameter.length > 0 && ResultParameter[index] !== undefined && ResultParameter[index].sresult !== null) {\r\n            let selectedRecord = this.state.selectedRecord || [];\r\n            let selectedResultGrade = this.state.selectedResultGrade || [];\r\n            if (parameter.nparametertypecode === parameterType.NUMERIC) {\r\n                selectedResultGrade[index] = {\r\n                    ngradecode: ResultParameter[index].sresult !== \"\" ?\r\n                        numericGrade(parameter, numberConversion(parseFloat(ResultParameter[index].sresult), parseInt(parameter.nroundingdigits))) : -1\r\n                };\r\n            }\r\n            if (parameter.nparametertypecode === parameterType.PREDEFINED) {\r\n                if (ResultParameter[index].sresult !== null) {\r\n                    selectedResultGrade[index] = { ngradecode: ResultParameter[index].ngradecode };\r\n                }\r\n                else {\r\n                    selectedResultGrade[index] = { ngradecode: 0 };\r\n                }\r\n            }\r\n            if (parameter.nparametertypecode === parameterType.CHARACTER) {\r\n                if (ResultParameter[index].sresult !== null && ResultParameter[index].sresult.trim() !== \"\") {\r\n                    //selectedResultGrade[index] = { ngradecode: ResultParameter[index].ngradecode };\r\n                    selectedResultGrade[index] = { ngradecode: 4 };\r\n                }\r\n                else {\r\n                    selectedResultGrade[index] = { ngradecode: -1 };\r\n                }\r\n            }\r\n            selectedRecord.selectedResultGrade = selectedResultGrade;\r\n\r\n            this.setState({\r\n                selectedRecord\r\n            });\r\n        }\r\n    }\r\n    deleteAttachmentParameterFile = (event, file, fieldName, index) => {\r\n        let ResultParameter = this.state.parameterResults[index];\r\n        let parameterResults = this.state.parameterResults;\r\n        ResultParameter[fieldName] = deleteAttachmentDropZone(ResultParameter[fieldName],\r\n            file)\r\n        parameterResults[index]['editable'] = true;\r\n        this.setState({\r\n            parameterResults: parameterResults\r\n        });\r\n\r\n    }\r\n    onResultInputChange = (event, index, parameter) => {\r\n        let selectedRecord = this.state.selectedRecord || [];\r\n        let ResultParameter = this.state.parameterResults ? [...this.state.parameterResults] : [];\r\n        let sresult = \"\";\r\n        let sfinal = \"\";\r\n        let sresultpredefinedname = \"\";\r\n        let salertmessage = \"\";\r\n        let sresultcomment = \"\";\r\n        let value = -1;\r\n        let acceptedFile = [];\r\n        let ncalculatedresult;\r\n        let currentAlertResultCode = 0;\r\n        let currentntestgrouptestpredefcode = 0;\r\n        let inputData = {}\r\n        if (parameter.nparametertypecode === parameterType.NUMERIC) {\r\n            if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value) || event.target.value === \"\") {\r\n                sresult = event.target.value;\r\n                ncalculatedresult = 4\r\n            } else {\r\n                sresult = ResultParameter[index]['sresult'] === null ? \"\" : ResultParameter[index]['sresult'];\r\n                ncalculatedresult = ResultParameter[index]['ncalculatedresult'];\r\n            }\r\n        }\r\n        if (parameter.nparametertypecode === parameterType.PREDEFINED) {\r\n            currentAlertResultCode = event.item.ntransactionresultcode;\r\n            currentntestgrouptestpredefcode = event.item.ntestgrouptestpredefcode;\r\n            if (event != null) {\r\n                sresult = event.item.spredefinedname;\r\n                sresultpredefinedname = event.item.sresultpredefinedname;\r\n                sfinal = event.item.spredefinedsynonym\r\n                value = event.item.ngradecode;\r\n                salertmessage = event.item.salertmessage ? event.item.salertmessage : \"\";\r\n                sresultcomment = event.item.spredefinedcomments ? event.item.spredefinedcomments : \"\";\r\n                ncalculatedresult = 4;\r\n            }\r\n            else {\r\n                sresult = \"\";\r\n                sfinal = \"\";\r\n                sresultpredefinedname = \"\";\r\n                value = -1;\r\n                ncalculatedresult = 4\r\n            }\r\n            inputData = {\r\n                'ntestgrouptestpredefcode': event.item.ntestgrouptestpredefcode,\r\n                'salertmessage': salertmessage,\r\n                'nneedresultentryalert': event.item.nneedresultentryalert,\r\n                'nneedsubcodedresult': event.item.nneedsubcodedresult\r\n            }\r\n            if (event.item.nneedresultentryalert === transactionStatus.NO &&\r\n                event.item.nneedsubcodedresult === transactionStatus.NO) {\r\n                if (ResultParameter[index]['additionalInfo']) {\r\n                    ResultParameter[index]['additionalInfo'] = \"\"\r\n                }\r\n                if (ResultParameter[index]['additionalInfoUidata']) {\r\n                    ResultParameter[index]['additionalInfoUidata'] = \"\"\r\n                }\r\n            }\r\n\r\n        }\r\n        if (parameter.nparametertypecode === parameterType.CHARACTER) {\r\n            sresult = event.target.value;\r\n            if (event.target.value.trim() === \"\")\r\n                ncalculatedresult = -1;\r\n            else\r\n                ncalculatedresult = 4;\r\n        }\r\n        if (parameter.nparametertypecode === parameterType.ATTACHMENT) {\r\n            sresult = event[0] && event[0].name;\r\n            sfinal = event;\r\n            ncalculatedresult = 4\r\n        }\r\n        ResultParameter[index]['sresult'] = sresult\r\n        ResultParameter[index]['sfinal'] = sfinal\r\n        ResultParameter[index]['sresultpredefinedname'] = sresultpredefinedname\r\n        ResultParameter[index]['sresultcomment'] = sresultcomment\r\n        ResultParameter[index]['salertmessage'] = salertmessage\r\n        ResultParameter[index]['acceptedFile'] = acceptedFile\r\n        ResultParameter[index]['editable'] = true\r\n        ResultParameter[index]['ngradecode'] = value\r\n        ResultParameter[index]['ncalculatedresult'] = ncalculatedresult\r\n        ResultParameter[index]['dummty'] = 'dummty'\r\n        selectedRecord.ResultParameter = ResultParameter\r\n        let parameterResults = ResultParameter\r\n        if (parameter.nparametertypecode === parameterType.PREDEFINED && (event.item.nneedresultentryalert === transactionStatus.YES ||\r\n            event.item.nneedsubcodedresult === transactionStatus.YES)) {\r\n            // this.props.\r\n            this.getPredefinedData(inputData, selectedRecord, currentAlertResultCode, this.props.Login.masterData, currentntestgrouptestpredefcode)\r\n        }\r\n        this.setState({\r\n            parameterResults: parameterResults,\r\n            currentAlertResultCode,\r\n            currentntestgrouptestpredefcode\r\n        });\r\n    }\r\n\r\n    getPredefinedData(inputData, selectedRecord, currentAlertResultCode, masterData, currentntestgrouptestpredefcode) {\r\n        //  return function (dispatch) {\r\n        let inputParamData = {\r\n            ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\r\n        }\r\n        //dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\r\n            .then(response => {\r\n                let showMultiSelectCombo = false;\r\n                let ResultParameter = selectedRecord['ResultParameter']\r\n                let onlyAlertMsgAvailable = false;\r\n                let testgrouptestpredefsubresult = response.data['testgrouptestpredefsubresult']\r\n                if (inputData['nneedsubcodedresult'] === transactionStatus.YES) {\r\n                    showMultiSelectCombo = true\r\n                    masterData['testgrouptestpredefsubresultOptions'] = testgrouptestpredefsubresult\r\n                }\r\n                else {\r\n                    onlyAlertMsgAvailable = true;\r\n                }\r\n                for (const Parameter of ResultParameter) {\r\n                    if (Parameter.additionalInfoUidata || Parameter.additionalInfoUidata === \"\") {\r\n                        let additionalInfoUidata = typeof Parameter.additionalInfoUidata === 'string' ? Parameter.additionalInfoUidata === \"\" ? \"\" : JSON.parse(Parameter.additionalInfoUidata) :\r\n                            Parameter.additionalInfoUidata\r\n                        if (Parameter['ntransactionresultcode'] === currentAlertResultCode &&\r\n                            Parameter['ntestgrouptestpredefcode'] === inputData['ntestgrouptestpredefcode']) {\r\n                            if (Parameter.additionalInfoUidata) {\r\n                                selectedRecord[\"ntestgrouptestpredefsubcode\"] = additionalInfoUidata['ntestgrouptestpredefsubcode']\r\n                                break;\r\n                            }\r\n                        } else {\r\n                            if (selectedRecord[\"ntestgrouptestpredefsubcode\"]) {\r\n                                delete selectedRecord[\"ntestgrouptestpredefsubcode\"]\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                };\r\n                masterData['salertmessage'] = inputData.salertmessage\r\n\r\n                this.setState({\r\n                    masterData,\r\n                    showAlert: inputData.nneedresultentryalert === transactionStatus.NO ? false : true,\r\n                    showAlertForPredefined: true,\r\n                    showMultiSelectCombo,\r\n                    onlyAlertMsgAvailable,\r\n                    additionalInfoView: false,\r\n                    selectedRecord,\r\n                    currentAlertResultCode,\r\n                    currentntestgrouptestpredefcode\r\n                });\r\n\r\n                // dispatch({\r\n                //     type: DEFAULT_RETURN,\r\n                //     payload: { \r\n                //         loading: false,\r\n                //        masterData, \r\n                //         showAlert: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\r\n                //          showAlertForPredefined: true,\r\n                //          showMultiSelectCombo,\r\n                //          onlyAlertMsgAvailable,\r\n                //          additionalInfoView:false,\r\n                //          selectedRecord,\r\n                //          currentAlertResultCode,\r\n                //          currentntestgrouptestpredefcode\r\n                //     }\r\n                // })\r\n            })\r\n        // .catch(error => {\r\n        //     dispatch({\r\n        //         type: DEFAULT_RETURN,\r\n        //         payload: {\r\n        //             loading: false\r\n        //         }\r\n        //     })\r\n        //     if (error.response.status === 500) {\r\n        //         toast.error(error.message);\r\n        //     } else {\r\n        //         toast.warn(error.response.data);\r\n        //     }\r\n        // })\r\n        //    }\r\n\r\n    }\r\n\r\n    // componentDidUpdate(previousProps, prevState, snapshot) {\r\n    //     let parameterResults=[];\r\n    //     if(this.props.parameterResults!==previousProps.parameterResults){\r\n    //         parameterResults=this.props.parameterResults;\r\n    //         this.setState({parameterResults})\r\n    //     } \r\n    // }\r\n\r\n    renderSwitch = (parameter, index, result, screenName) => {\r\n        const selectedResultGrade = this.state.selectedResultGrade;//this.props.selectedResultGrade;\r\n        const gradeValues = this.props.gradeValues;\r\n        const gradeCode = selectedResultGrade ? selectedResultGrade.length > 0 ?\r\n            selectedResultGrade[index] ? selectedResultGrade[index]['ngradecode'] : undefined : \"\" : \"\";\r\n        let isAdditionalInfoRequired = parameter.hasOwnProperty('additionalInfo') &&\r\n            parameter['additionalInfo'] !== \"\" && parameter['additionalInfo'] !== null ? true : false\r\n        //  parameter.jsondata['value'] ? JSON.parse(parameter.jsondata['value']).hasOwnProperty('additionalInfo') &&\r\n        //     JSON.parse(parameter.jsondata['value'])['additionalInfo'] !== \"\" ? true : false :\r\n        //     parameter.jsondata.hasOwnProperty('additionalInfo') &&\r\n        //         parameter.jsondata['additionalInfo'] !== \"\" ? true : false\r\n        switch (parameter.nparametertypecode) {\r\n            case 1: {\r\n                return (\r\n                    <>\r\n                        <div className='row w-100'>\r\n                            <Col md={6}>\r\n                                <FormInput\r\n                                    name={this.state.parameterResults[index].ntransactionresultcode}\r\n                                    type=\"text\"\r\n                                    required={false}\r\n                                    isMandatory={false}\r\n                                    // value={this.props.parameterResults.length > 0 ?\r\n                                    //     this.props.parameterResults[index] ? (this.props.parameterResults[index]['sresult'] !== null ? this.props.parameterResults[index]['sresult'] : \"\") : \"\" : \"\"}\r\n                                    value={this.state.parameterResults.length > 0 ?\r\n                                        this.state.parameterResults[index] ? (this.state.parameterResults[index]['sresult'] !== null ? this.state.parameterResults[index]['sresult'] : \"\") : \"\" : \"\"}\r\n                                    // placeholder={parameter.sparametersynonym}\r\n                                    //label={parameter.sparametersynonym}\r\n                                    // onChange={(event) => this.props.onResultInputChange(event, index, parameter)}\r\n                                    onChange={(event) => this.onResultInputChange(event, index, parameter)}\r\n                                    onBlur={() => this.onGradeEvent(this.state.parameterResults, index, parameter)}\r\n                                    // onBlur={() => this.props.onGradeEvent(this.props.parameterResults, index, parameter)}\r\n                                    maxLength={9}\r\n                                    onKeyUp={(event) => this.props.onKeyPress(event, index, this.props.paremterResultcode)}\r\n                                />\r\n                            </Col>\r\n                            {parameter.ntestgrouptestformulacode > 0 ?\r\n                                <Col md={2} className=\"d-flex product-category justify-content-end icon-group-wrap\">\r\n                                    <Nav.Link title=\"Calculate Formula\" className=\"btn btn-circle outline-grey ml-2\" role=\"button\" id={screenName + -+index}\r\n                                        onClick={(event) => this.props.getFormula(parameter, this.props.Login.userInfo, this.props.Login.masterData, index, event)}>\r\n                                        <FontAwesomeIcon title=\"Calculate Formula\" icon={faCalculator} />\r\n                                    </Nav.Link>\r\n                                </Col>\r\n                                : \"\"}\r\n                            <Col md={4}>\r\n                                {/* {this.props.selectedResultGrade.length > 0 ? */}\r\n                                <ListWrapper><MediaLabel className=\"labelfont\" style={{ color: gradeValues[gradeCode][0]['scolorhexcode'] }}>\r\n                                    {gradeCode === undefined ? \"\" : gradeValues[gradeCode][0]['sgradename']}</MediaLabel></ListWrapper>\r\n                                {/* : \"\"} */}\r\n                            </Col>\r\n                        </div>\r\n                    </>\r\n                );\r\n            }\r\n            case 2: {\r\n                return (\r\n                    <>\r\n                        <Col md={isAdditionalInfoRequired ? 8 : 10} className=\"pl-0\" >\r\n                            <FormSelectSearch \r\n                                name={this.state.parameterResults[index] && this.state.parameterResults[index].ntransactionresultcode}\r\n                                as={\"select\"}\r\n                                //formLabel={parameter.sparametersynonym}\r\n\r\n                                defaultValue={{\r\n                                    \"value\": this.state.parameterResults[index] &&\r\n                                        this.state.parameterResults[index].sresultpredefinedname, \"label\":\r\n                                        this.state.parameterResults[index] && this.state.parameterResults[index]\r\n                                            .sresultpredefinedname\r\n                                }}\r\n\r\n                                //  defaultValue={{ \"value\": parameter.sresultpredefinedname, \"label\": parameter.sresultpredefinedname }}\r\n\r\n\r\n                                //  defaultValue={parameter.sresult && (parameter.sresult!=null || parameter.sresult !== \"\") ?  { \"value\": parameter.ngradecode, \"label\": parameter.sresult } :\r\n                                //  this.props.predefinedValues ? constructOptionList(this.props.predefinedValues[parameter.ntransactionresultcode]||[],'ngradecode',\r\n                                // 'spredefinedname' , undefined, undefined, undefined).get(\"DefaultValue\"):\"\"}\r\n\r\n                                options={this.props.predefinedValues ? this.props.predefinedValues[parameter.ntransactionresultcode] : \"\"}\r\n                                optionId={\"ntestgrouptestpredefcode\"}\r\n                                optionValue={\"spredefinedname\"}\r\n                                isMulti={false}\r\n                                isDisabled={false}\r\n                                matchFrom={'start'}\r\n                                isSearchable={true}\r\n                                isClearable={parameter.nresultmandatory === transactionStatus.YES ? false : true}\r\n                                isMandatory={false}\r\n                                onKeyUp={(event) => this.props.onKeyPress(event, index, this.props.paremterResultcode)}\r\n                                // onChange={(event) => this.props.onResultInputChange(event, index, parameter)}\r\n                                // onBlur={() => this.props.onGradeEvent(this.props.parameterResults, index, parameter)}\r\n\r\n                                onChange={(event) => this.onResultInputChange(event, index, parameter)}\r\n                            //  onBlur={() => this.onGradeEvent(this.state.parameterResults, index, parameter)}\r\n\r\n                                matchFrom={'start'}\r\n                            />\r\n                        </Col>\r\n                        <Col md={2} className=\"pt-2\">\r\n                            {/* {this.props.selectedResultGrade.length > 0 ? */}\r\n                            <ListWrapper><MediaLabel className=\"labelfont\" style={{ color: gradeValues[gradeCode][0]['scolorhexcode'] }}>\r\n                                {gradeCode === undefined ? \"\" : gradeValues[gradeCode][0]['sgradename']}</MediaLabel></ListWrapper>\r\n                            {/* : \"\"} */}\r\n                        </Col>\r\n                        {isAdditionalInfoRequired &&\r\n\r\n                            <Col md={2} className=\"pt-2\">\r\n                                {/* <Button className=\"btn btn-circle outline-grey ml-2\" variant=\"link\"\r\n                                     //   hidden={this.props.userRoleControlRights.indexOf(this.props.viewId) === -1}\r\n                                        title={this.props.intl.formatMessage({ id: \"IDS_VIEW\" })}\r\n                                        data-tip={  parameter.jsondata['value'] ?\r\n                                        JSON.parse(parameter.jsondata['value'])['additionalInfo'] :\r\n                                        parameter.jsondata['additionalInfo']}\r\n                                        data-for=\"tooltip_list_wrap\"\r\n                                         onClick={() => this.props.viewAdditionalInfo(parameter.ntransactionresultcode)}\r\n                                        >\r\n                                        <FontAwesomeIcon icon={faEye}/>\r\n                                     </Button>     */}\r\n                                {/* <Modal.Title id=\"password\" className=\"header-primary flex-grow-1\">\r\n                                      <FormattedMessage id='IDS_ADDITIONALINFOREQURIED' defaultMessage='Cancel' />\r\n                                      </Modal.Title> */}\r\n\r\n                                <TestPopOver intl={this.props.intl} needIcon={true} needPopoverTitleContent={true} placement=\"left\" stringList={\r\n                                    // parameter.jsondata['value'] ?\r\n                                    //      [JSON.parse(parameter.jsondata['value'])['additionalInfo']] :\r\n                                    //              [parameter.jsondata['additionalInfo']] \r\n                                    parameter.hasOwnProperty('additionalInfo') &&\r\n                                    [parameter['additionalInfo']]} ></TestPopOver>\r\n                                {/* <Nav.Link\r\n                                        className=\"btn btn-circle outline-grey ml-2\"\r\n                                        // data-for=\"tooltip-common-wrap\"\r\n                                        //  data-place={action.dataplace && action.dataplace ? action.dataplace : \"\"}\r\n                                         data-tip={ parameter.jsondata['value'] ?\r\n                                         JSON.parse(parameter.jsondata['value'])['additionalInfo'] :\r\n                                                 parameter.jsondata['additionalInfo'] }\r\n                                        data-html={true}\r\n                                        //   hidden={this.props.userRoleControlRights.indexOf(this.props.viewId) === -1}\r\n                                        onClick={() => this.props.viewAdditionalInfo(parameter.ntransactionresultcode)}>\r\n                                        <FontAwesomeIcon icon={faInfoCircle} />\r\n                                    </Nav.Link>  */}\r\n\r\n                            </Col>\r\n                        }\r\n\r\n                    </>\r\n                );\r\n            }\r\n            case 3: {\r\n                return (\r\n                    <>\r\n                        <Col md={10} className=\"pl-0\">\r\n                            <FormTextarea\r\n                                name={parameter.ntransactionresultcode}\r\n                                //label={parameter.sparametersynonym}\r\n                                //placeholder={parameter.sparametersynonym}\r\n                                type=\"text\"\r\n                                //     defaultValue={parameter.sresult}\r\n                                defaultValue={this.state.parameterResults[index] && this.state.parameterResults[index]['sresult']}\r\n\r\n                                isMandatory={false}\r\n                                required={false}\r\n                                maxLength={255}\r\n                                onChange={(event) => this.onResultInputChange(event, index, parameter)}\r\n                                onBlur={() => this.onGradeEvent(this.state.parameterResults, index, parameter)}\r\n                            />\r\n                        </Col>\r\n                        <Col md={2}>\r\n                            {/* {this.props.selectedResultGrade.length > 0 ? */}\r\n                            <ListWrapper><MediaLabel className=\"labelfont\" style={{ color: gradeValues[gradeCode][0]['scolorhexcode'] }}>\r\n                                {gradeCode === undefined ? \"\" : gradeValues[gradeCode][0]['sgradename']}</MediaLabel></ListWrapper>\r\n                            {/* : \"\"} */}\r\n                        </Col>\r\n                    </>\r\n                );\r\n            }\r\n            case 4: {\r\n                return (\r\n                    <Col md={12} className=\"pl-0\">\r\n                        <DropZone\r\n                            maxFiles={1}\r\n                            isMandatory={false}\r\n                            //label={parameter.sparametersynonym}\r\n                            accept=\".pdf\"\r\n                            minSize={0}\r\n                            maxSize={20}\r\n                            multiple={false}\r\n                            // editFiles={parameter.sfinal != null ? parameter : \"\"}\r\n                            editFiles={this.state.parameterResults[index].sfinal != null ? this.state.parameterResults[index] : \"\"}\r\n\r\n                            attachmentTypeCode={attachmentType.FTP}\r\n                            fileSizeName=\"nfilesize\"\r\n                            fileName=\"sfinal\"\r\n                            index={index}\r\n                            // deleteAttachment={this.props.deleteAttachmentParamFile}\r\n                            // onDrop={(event) => this.props.onResultInputChange(event, index, parameter)}\r\n                            deleteAttachment={this.deleteAttachmentParameterFile}\r\n                            onDrop={(event) => this.onResultInputChange(event, index, parameter)}\r\n                        //disabled={disabled}\r\n                        />\r\n                    </Col>\r\n                )\r\n            }\r\n            default:\r\n                return (\"\");\r\n        }\r\n    }\r\n    // static getDerivedStateFromProps(props, state) {\r\n    //     if( props.Login.showAlert !==  state.showAlert){\r\n    //         //Change in props\r\n    //         return{\r\n    //             showAlert: props.Login.showAlert\r\n    //         };\r\n    //     } \r\n    //     return null; // No change to state\r\n    // }\r\n    // componentWillUnmount() {\r\n     \r\n    //     let parameterResults = this.state.parameterResults\r\n    //     const updateInfo = {\r\n    //         typeName: DEFAULT_RETURN,\r\n    //         data: { parameterResults: parameterResults }\r\n    //     }\r\n    //     this.props.updateStore(updateInfo);\r\n    // }\r\n    \r\n    // shouldComponentUpdate (nextProps,nextState) {\r\n    //     // Rendering the component only if\r\n    //     // passed props value is changed\r\n    //     console.log('nextProps',nextProps);\r\n    //     if ((nextProps.Login.parameterResults !==this.props.Login.parameterResults)) {\r\n    //       return false;\r\n    //     }else if(nextState.parameterResults!==this.state.parameterResults){\r\n    //         return true;\r\n    //     } else {\r\n    //       return false;\r\n    //     }\r\n    //   }\r\n    // componentDidUpdate (prevProps, prevState) {\r\n    //     console.log('Deleted User successfully');\r\n    //     // Changing the state after 2 sec\r\n    //     // from the time when the component\r\n    //     // is rendered\r\n    //     // setTimeout(() => {\r\n    //     //   this.setState({ color: 'wheat' });\r\n    //     // }, 2000);\r\n    //     let parameterResults = this.state.parameterResults\r\n    //     if(this.state.parameterResults!==prevState.parameterResults){\r\n    //         const updateInfo = {\r\n    //             typeName: DEFAULT_RETURN,\r\n    //             data: { parameterResults: parameterResults }\r\n    //         }\r\n    //         this.updateStoreResultEntryForm(updateInfo);\r\n    //     }\r\n  \r\n    //   }\r\n    // this.props.onSaveClick = (childData) =>{\r\n    //     this.setState({name: childData})\r\n    // }\r\n\r\n    // updateStoreResultEntryForm = (updateInfo)  => { \r\n    //     return function (dispatch) {\r\n    //         console.log('updateInfoXXXXX')\r\n    //         dispatch({\r\n    //             type: updateInfo.typeName,\r\n    //             payload: {\r\n    //                 ...updateInfo.data,\r\n    //                 masterStatus: \"\",\r\n    //                 errorCode: undefined\r\n    //             }\r\n    //         }); \r\n    //     } \r\n    // }\r\n    render() {\r\n        return (\r\n            <>\r\n          {/* { this.props.index===0&&\r\n                <Button  className=\"btn-user btn-primary-blue\" onClick={() => this.props.onSaveClick(this.state)}>\r\n\r\n                    <FontAwesomeIcon icon={faSave} /> { }\r\n                    <FormattedMessage id='IDS_SAVEFILTER' defaultMessage='Save Filter' />\r\n                </Button> \r\n                \r\n                }    */}\r\n                {//this.props.index===0&&\r\n                    this.state.showAlert &&\r\n                    <ModalShow\r\n                        modalShow={this.state.showAlert}\r\n                        modalTitle={this.props.intl.formatMessage({ id: \"IDS_ADDITIONALINFOREQURIED\" })}\r\n                        closeModal={this.closeModalShow}\r\n                        onSaveClick={this.onModalSave}\r\n                        removeCancel={this.state.showAlertForPredefined || this.state.additionalInfoView ? true : false}\r\n                        needSubmit={this.state.showAlertForPredefined || this.state.additionalInfoView ? true : false}\r\n                        needSave={this.state.showAlertForPredefined || this.state.additionalInfoView ? \"\" : true}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        size={this.state.showAlertForPredefined || this.state.additionalInfoView ? \"\" : 'lg'}\r\n                        showAlertMsg={this.state.showAlertForPredefined ? true : false}\r\n                        modalBody={\r\n                            <ResultEntryPredefinedComments\r\n                                onlyAlertMsgAvailable={this.state.onlyAlertMsgAvailable}\r\n                                salertmessage={this.state.masterData['salertmessage']}\r\n                                showMultiSelectCombo={this.state.showMultiSelectCombo}\r\n                                testgrouptestpredefsubresultOptions={this.state.masterData.testgrouptestpredefsubresultOptions || []}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputChange={this.onInputChange}\r\n                                onComboChange={this.onComboChange}\r\n                            />\r\n                        }\r\n                    />}\r\n\r\n                <Row   >\r\n                    {/* {this.props.parameterResults.map((parameterResult, index) => {\r\n                    return (   */}\r\n                    <>\r\n\r\n                        {this.props.needSubSample && this.props.parameterResults.ssamplearno ?\r\n                            <MediaHeader className={`labelfont`} style={{ color: \"#007bff\" }}>\r\n                                {this.props.parameterResults.ssamplearno}\r\n                                {this.props.parameterResults.stestsynonym ?\r\n                                    <span className={`labelfont`} //style={{ color: \"#505f79\" }}\r\n                                        style={{ color: \"#97a0af\", paddingLeft: '0.2rem' }}>\r\n                                        {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                        {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                        { }{ } {this.props.parameterResults.stestsynonym}\r\n                                        {/* {this.props.parameterResults.sretestrepeatcount} */}\r\n                                    </span>\r\n                                    : \"\"}\r\n                            </MediaHeader>\r\n                            : this.props.parameterResults.sarno ?\r\n                                <MediaHeader className={`labelfont`} style={{ color: \"#007bff\" }}>\r\n                                    {this.props.parameterResults.sarno}\r\n                                    {this.props.parameterResults.stestsynonym ?\r\n                                        <span className={`labelfont`} //style={{ color: \"#505f79\" }}\r\n                                            style={{ color: \"#97a0af\", paddingLeft: '0.2rem' }}>\r\n                                            {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                            {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                            { }{ } {this.props.parameterResults.stestsynonym}\r\n                                            {/* {this.props.parameterResults.sretestrepeatcount} */}\r\n                                        </span>\r\n                                        : \"\"}\r\n                                </MediaHeader>\r\n                                : \"\"\r\n                        }\r\n\r\n                        <Col md={12} className=\"pl-0 mt-2\">\r\n                            <MediaHeader className={`labelfont`} style={{ color: \"#505f79\" }}\r\n                            // style={{ color: \"#97a0af\" }}\r\n                            >\r\n                                {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                {/* <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" />\r\n                                    <FontAwesomeIcon icon={faAngleRight} className=\"DeleteIconColor\" /> */}\r\n                                { }{ } {this.props.parameterResults.sparametersynonym}{ }{ }{this.props.parameterResults.nresultmandatory === transactionStatus.NO ? \"(optional)\" : \"\"}\r\n                            </MediaHeader>\r\n                        </Col>\r\n                        {this.renderSwitch(this.props.parameterResults, this.props.index, this.props.parameterResults.ntransactionresultcode, this.props.Login.screenName)}\r\n                    </>\r\n                    {/* )\r\n            })\r\n            } */}\r\n                </Row ></>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default  connect(mapStatetoProps, {\r\n   updateStore//,getPredefinedData\r\n} )\r\n    (injectIntl(ResultEntryForm)) ;"]},"metadata":{},"sourceType":"module"}