{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{DEFAULT_RETURN}from'./LoginTypes';import rsapi from'../rsapi';import{toast}from'react-toastify';import{sortData,constructOptionList}from'../components/CommonScript';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import Axios from'axios';import{transactionStatus}from'../components/Enumeration';export function getSiteDetail(Site,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"site/getSiteScreen\",{nsitecode:Site.nsitecode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getSiteCombo(siteParam){return function(dispatch){var urlArray=[];var selectedId=null;var timeZoneService=rsapi.post(\"timezone/getTimeZone\");var dateformat=rsapi.post(\"site/getDateFormat\",{userinfo:siteParam.userInfo});if(siteParam.operation===\"create\"){urlArray=[timeZoneService,dateformat];}else{var _rsapi$post;var SiteByID=rsapi.post(\"site/getActiveSiteById\",(_rsapi$post={},_defineProperty(_rsapi$post,siteParam.primaryKeyField,siteParam.primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",siteParam.userInfo),_rsapi$post));var districtService=rsapi.post(\"site/getDistrict\",{userinfo:siteParam.userInfo,\"nregioncode\":siteParam.editRow.nregioncode});urlArray=[timeZoneService,dateformat,SiteByID,districtService];selectedId=siteParam.primaryKeyValue;}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var _payload;var timezone=[];var dateFormat=[];var region=[];var district=[];var districtList=[];var selectedRecord={};var timezoneMap=constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,false);var TimeZoneList=timezoneMap.get(\"OptionList\");var dateFormatMap=constructOptionList(response[1].data.DateFormat||[],\"ndateformatcode\",\"sdateformat\",undefined,undefined,false);var dateFormatList=dateFormatMap.get(\"OptionList\");var regionMap=constructOptionList(response[1].data.Region||[],\"nregioncode\",\"sregionname\",undefined,undefined,false);var regionList=regionMap.get(\"OptionList\");if(siteParam.operation===\"update\"){var districtMap=constructOptionList(response[3].data.districtList||[],\"ndistrictcode\",\"sdistrictname\",undefined,undefined,false);districtList=districtMap.get(\"OptionList\");}if(siteParam.operation===\"update\"){selectedRecord=response[2].data;timezone.push({\"value\":response[2].data[\"ntimezonecode\"],\"label\":response[2].data[\"stimezoneid\"]});dateFormat.push({\"value\":response[2].data[\"ndateformatcode\"],\"label\":response[2].data[\"sdateformat\"]});region.push({\"value\":response[2].data[\"nregioncode\"],\"label\":response[2].data[\"sregionname\"]});district.push({\"value\":response[2].data[\"ndistrictcode\"],\"label\":response[2].data[\"sdistrictname\"]});if(response[2].data.nutcconversation!==transactionStatus.NO){selectedRecord[\"ntimezonecode\"]=timezone[0];selectedRecord[\"ndateformatcode\"]=dateFormat[0];}else{selectedRecord[\"ntimezonecode\"]=undefined;selectedRecord[\"ndateformatcode\"]=undefined;selectedRecord[\"nutcconversation\"]=response[2].data.nutcconversation;}if(response[2].data.nisdistributed!==transactionStatus.NO){selectedRecord[\"nregioncode\"]=region[0].label!=='NA'?region[0]:undefined;selectedRecord[\"ndistrictcode\"]=district[0].label!=='NA'?district[0]:undefined;}else{selectedRecord[\"nregioncode\"]=undefined;selectedRecord[\"ndistrictcode\"]=undefined;selectedRecord[\"ssitecode\"]=\"\";}}// else {\n//     selectedRecord = {\n//         ntimezonecode: {\n//             \"label\": siteParam.userInfo.stimezoneid,\n//             \"value\": siteParam.userInfo.ntimezonecode\n//         }\n//     };\n// }\ndispatch({type:DEFAULT_RETURN,payload:(_payload={TimeZoneList:TimeZoneList,isOpen:true,selectedRecord:siteParam.operation===\"update\"?selectedRecord:{\"ntransactionstatus\":1},operation:siteParam.operation,screenName:siteParam.screenName},_defineProperty(_payload,\"selectedRecord\",selectedRecord),_defineProperty(_payload,\"openModal\",true),_defineProperty(_payload,\"ncontrolCode\",siteParam.ncontrolCode),_defineProperty(_payload,\"loading\",false),_defineProperty(_payload,\"selectedId\",selectedId),_defineProperty(_payload,\"dateFormatList\",dateFormatList),_defineProperty(_payload,\"regionList\",regionList),_defineProperty(_payload,\"districtList\",districtList),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getDistrictByRegion(methodParam){return function(dispatch){var URL=[];URL=rsapi.post(\"/site/getDistrict\",{\"userinfo\":methodParam.inputData.userinfo,\"nregioncode\":methodParam.inputData.primarykey});dispatch(initRequest(true));Axios.all([URL]).then(function(response){var districtMap=constructOptionList(response[0].data['districtList']||[],\"ndistrictcode\",\"sdistrictname\",undefined,undefined,false);var districtList=districtMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{districtList:districtList,loading:false,data:undefined,dataState:undefined}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/actions/SiteAction.js"],"names":["DEFAULT_RETURN","rsapi","toast","sortData","constructOptionList","initRequest","intl","Axios","transactionStatus","getSiteDetail","Site","userInfo","masterData","dispatch","post","nsitecode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","dataState","catch","error","status","message","warn","getSiteCombo","siteParam","urlArray","selectedId","timeZoneService","dateformat","SiteByID","primaryKeyField","primaryKeyValue","districtService","editRow","nregioncode","all","timezone","dateFormat","region","district","districtList","selectedRecord","timezoneMap","TimeZoneList","get","dateFormatMap","DateFormat","dateFormatList","regionMap","Region","regionList","districtMap","push","nutcconversation","NO","nisdistributed","label","isOpen","screenName","ncontrolCode","formatMessage","id","getDistrictByRegion","methodParam","URL","inputData","primarykey"],"mappings":"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","sourcesContent":["import { DEFAULT_RETURN } from './LoginTypes';\r\nimport rsapi from '../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport { sortData, constructOptionList } from '../components/CommonScript';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport Axios from 'axios';\r\nimport { transactionStatus } from '../components/Enumeration';\r\n\r\n\r\nexport function getSiteDetail(Site, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"site/getSiteScreen\", { nsitecode: Site.nsitecode, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData, operation: null, modalName: undefined,\r\n                        loading: false, dataState: undefined\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getSiteCombo(siteParam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let selectedId = null;\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const dateformat = rsapi.post(\"site/getDateFormat\", { userinfo: siteParam.userInfo });\r\n        if (siteParam.operation === \"create\") {\r\n\r\n            urlArray = [timeZoneService, dateformat];\r\n        }\r\n        else {\r\n\r\n            const SiteByID = rsapi.post(\"site/getActiveSiteById\", { [siteParam.primaryKeyField]: siteParam.primaryKeyValue, \"userinfo\": siteParam.userInfo });\r\n            const districtService = rsapi.post(\"site/getDistrict\", { userinfo: siteParam.userInfo, \"nregioncode\": siteParam.editRow.nregioncode });\r\n            urlArray = [timeZoneService, dateformat, SiteByID, districtService];\r\n            selectedId = siteParam.primaryKeyValue;\r\n\r\n        }\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                let timezone = [];\r\n                let dateFormat = [];\r\n                let region = [];\r\n                let district = [];\r\n                let districtList = [];\r\n\r\n                let selectedRecord = {};\r\n                const timezoneMap = constructOptionList(response[0].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, false);\r\n\r\n                const TimeZoneList = timezoneMap.get(\"OptionList\");\r\n\r\n                const dateFormatMap = constructOptionList(response[1].data.DateFormat || [], \"ndateformatcode\",\r\n                    \"sdateformat\", undefined, undefined, false);\r\n\r\n                const dateFormatList = dateFormatMap.get(\"OptionList\");\r\n\r\n                const regionMap = constructOptionList(response[1].data.Region || [], \"nregioncode\",\r\n                    \"sregionname\", undefined, undefined, false);\r\n\r\n                const regionList = regionMap.get(\"OptionList\");\r\n                if (siteParam.operation === \"update\") {\r\n                    const districtMap = constructOptionList(response[3].data.districtList || [], \"ndistrictcode\",\r\n                        \"sdistrictname\", undefined, undefined, false);\r\n\r\n                    districtList = districtMap.get(\"OptionList\");\r\n                }\r\n                if (siteParam.operation === \"update\") {\r\n\r\n                    selectedRecord = response[2].data;\r\n                    timezone.push({ \"value\": response[2].data[\"ntimezonecode\"], \"label\": response[2].data[\"stimezoneid\"] });\r\n                    dateFormat.push({ \"value\": response[2].data[\"ndateformatcode\"], \"label\": response[2].data[\"sdateformat\"] });\r\n                    region.push({ \"value\": response[2].data[\"nregioncode\"], \"label\": response[2].data[\"sregionname\"] });\r\n                    district.push({ \"value\": response[2].data[\"ndistrictcode\"], \"label\": response[2].data[\"sdistrictname\"] });\r\n                    if (response[2].data.nutcconversation !== transactionStatus.NO) {\r\n                        selectedRecord[\"ntimezonecode\"] = timezone[0];\r\n                        selectedRecord[\"ndateformatcode\"] = dateFormat[0];\r\n                    } else {\r\n                        selectedRecord[\"ntimezonecode\"] = undefined;\r\n                        selectedRecord[\"ndateformatcode\"] = undefined;\r\n                        selectedRecord[\"nutcconversation\"] = response[2].data.nutcconversation;\r\n                    }\r\n                    if(response[2].data.nisdistributed !== transactionStatus.NO){\r\n                        selectedRecord[\"nregioncode\"] = region[0].label!=='NA'?region[0]:undefined;\r\n                        selectedRecord[\"ndistrictcode\"] = district[0].label!=='NA'?district[0]:undefined;\r\n                    }\r\n                    else {\r\n                        selectedRecord[\"nregioncode\"] = undefined;\r\n                        selectedRecord[\"ndistrictcode\"] = undefined;\r\n                        selectedRecord[\"ssitecode\"] = \"\";\r\n                    }\r\n                    \r\n                }\r\n                // else {\r\n                //     selectedRecord = {\r\n                //         ntimezonecode: {\r\n                //             \"label\": siteParam.userInfo.stimezoneid,\r\n                //             \"value\": siteParam.userInfo.ntimezonecode\r\n                //         }\r\n                //     };\r\n                // }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        TimeZoneList, isOpen: true,\r\n                        selectedRecord: siteParam.operation === \"update\" ? selectedRecord : { \"ntransactionstatus\": 1 },\r\n                        operation: siteParam.operation, screenName: siteParam.screenName, selectedRecord,\r\n                        openModal: true,\r\n                        ncontrolCode: siteParam.ncontrolCode,\r\n                        loading: false, selectedId, dateFormatList, regionList, districtList\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getDistrictByRegion(methodParam) {\r\n    return function (dispatch) {\r\n        let URL = [];\r\n        URL = rsapi.post(\"/site/getDistrict\", { \"userinfo\": methodParam.inputData.userinfo, \"nregioncode\": methodParam.inputData.primarykey })\r\n        dispatch(initRequest(true));\r\n        Axios.all([URL])\r\n            .then(response => {\r\n                const districtMap = constructOptionList(response[0].data['districtList'] || [], \"ndistrictcode\",\r\n                    \"sdistrictname\", undefined, undefined, false);\r\n\r\n                const districtList = districtMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload:\r\n                        { districtList, loading: false, data: undefined, dataState: undefined }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}