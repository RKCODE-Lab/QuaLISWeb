{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Col,Row}from'react-bootstrap';import{injectIntl}from'react-intl';import{transactionStatus}from'../../components/Enumeration';import{viewAttachment}from'../../actions';import{connect}from'react-redux';import CustomSwitch from'../../components/custom-switch/custom-switch.component';import FormTextarea from'../../components/form-textarea/form-textarea.component';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import rsapi from'../../rsapi';import{toast}from'react-toastify';import{constructOptionList}from\"../../components/CommonScript\";var AddReleaseTestAttachment=/*#__PURE__*/function(_React$Component){_inherits(AddReleaseTestAttachment,_React$Component);var _super=_createSuper(AddReleaseTestAttachment);function AddReleaseTestAttachment(props){var _this;_classCallCheck(this,AddReleaseTestAttachment);_this=_super.call(this,props);_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};var lstRegistrationSampleArno=_this.props.masterData.RegistrationSampleArno;var lstRegistrationTest=_this.props.masterData.RegistrationTest;var RegistrationSampleArno=[];var RegistrationTest=[];var ntransactionsamplecode=\"\";var ntransactiontestcode=\"\";var ssamplearno=null;var stestsynonym=null;var needSubSample=_this.props.masterData.realRegSubTypeValue&&_this.props.masterData.realRegSubTypeValue.nneedsubsample;if(fieldName===\"npreregno\"){lstRegistrationSampleArno.map(function(item){if(item.item.npreregno===comboData.value){RegistrationSampleArno.push(item);}});if(!needSubSample){lstRegistrationTest.map(function(item){if(item.item.ntransactionsamplecode===RegistrationSampleArno[0].item.ntransactionsamplecode){RegistrationTest.push(item);}});ntransactionsamplecode={item:RegistrationSampleArno[0],label:RegistrationSampleArno[0].label,value:RegistrationSampleArno[0].value};ssamplearno=RegistrationSampleArno[0].item.ssamplearno;}var npreregno={item:comboData.item,label:comboData.label,value:comboData.value};var sarno=comboData.item.sarno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationSampleArno:RegistrationSampleArno,RegistrationTest:RegistrationTest,npreregno:npreregno,sarno:sarno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,ssamplearno:ssamplearno,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactionsamplecode\"){lstRegistrationTest.map(function(item){if(item.item.ntransactionsamplecode===comboData.value){RegistrationTest.push(item);}});ntransactionsamplecode={item:comboData.item,label:comboData.label,value:comboData.value};ssamplearno=comboData.item.ssamplearno;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{RegistrationTest:RegistrationTest,ntransactionsamplecode:ntransactionsamplecode,ssamplearno:ssamplearno,ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ntransactiontestcode\"){ntransactiontestcode={item:comboData.item,label:comboData.label,value:comboData.value};stestsynonym=comboData.item.stestsynonym;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactiontestcode:ntransactiontestcode,stestsynonym:stestsynonym});_this.setState({selectedRecord:selectedRecord});}else if(fieldName===\"ncommentsubtypecode\"){rsapi.post(\"/comments/getSampleTestCommentsListById\",{userinfo:_this.props.userInfo,ncommentsubtypecode:comboData.value}).then(function(response){var listSampleTestComments=response.data.SampleTestComments;var lstSampleTestComments=constructOptionList(listSampleTestComments||[],\"nsampletestcommentscode\",\"spredefinedname\",false,false,true);var SampleTestComments=lstSampleTestComments.get(\"OptionList\");selectedRecord[\"scommentsubtype\"]=comboData.label;selectedRecord[\"ncommentsubtypecode\"]=comboData;// ALPD-4948    Modified code by Vishakh for showing commentsubtype field as 'NA' instead of showing '-'\nselectedRecord[\"nsampletestcommentscode\"]=SampleTestComments&&SampleTestComments.length>0&&SampleTestComments[0];selectedRecord[\"scomments\"]=\"\";selectedRecord[\"spredefinedname\"]=\"\";_this.setState({SampleTestComments:SampleTestComments,selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}_this.setState({loading:false});});}else if(fieldName===\"nsampletestcommentscode\"){selectedRecord[\"nsampletestcommentscode\"]=comboData;selectedRecord[\"spredefinedname\"]=comboData.label;selectedRecord[\"scomments\"]=comboData.item&&comboData.item.sdescription?comboData.item.sdescription:\"\";_this.setState({selectedRecord:selectedRecord});}_this.props.childDataChange(selectedRecord);};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[event.target.name]=event.target.value;if(event.target.type==='checkbox'){if(event.target.name===\"nneedreport\"){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}}else{selectedRecord[event.target.name]=event.target.value;}if(selectedRecord[\"nneedreport\"]&&selectedRecord[\"nneedreport\"]===transactionStatus.YES&&selectedRecord[\"sfilename\"]!==undefined&&selectedRecord[\"sfilename\"].length>0){var fileFormat=false;var requiredFileFormat=_this.props.settings&&_this.props.settings[32]&&_this.props.settings[32].split(\",\");var fileNameSplit=selectedRecord[\"sfilename\"]&&Array.isArray(selectedRecord[\"sfilename\"])?selectedRecord[\"sfilename\"][0].name.split(\".\"):selectedRecord[\"sfilename\"].split(\".\");requiredFileFormat.map(function(item){if(item.slice(1)===fileNameSplit[fileNameSplit.length-1]){fileFormat=true;}});selectedRecord[\"nneedreport\"]=fileFormat?selectedRecord[\"nneedreport\"]:transactionStatus.NO;!fileFormat&&toast.warn(_this.props.intl.formatMessage({id:\"IDS_REPORTSUPPORTSONLYFILEFORMATS\"}));}_this.setState({selectedRecord:selectedRecord});_this.props.childDataChange(selectedRecord);};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={loading:false,ReleaseTestCommentDetails:_this.props.ReleaseTestCommentDetails,dataState:dataState,openModal:false,inputParam:_this.props.inputParam,loadEsign:false,operation:_this.props.operation?_this.props.operation:\"\",selectedRecord:_this.props.selectedRecord,isneedReport:_this.props.isneedReport,SampleTestComments:_this.props.SampleTestComments};return _this;}_createClass(AddReleaseTestAttachment,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.ReleaseTestCommentDetails!==prevProps.ReleaseTestCommentDetails){this.setState({ReleaseTestCommentDetails:this.props.ReleaseTestCommentDetails});}if(this.props.inputParam!==prevProps.inputParam){this.setState({inputParam:this.props.inputParam});}if(this.props.selectedRecord!==prevProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.operation!==prevProps.operation){this.setState({operation:this.props.operation});}if(this.props.SampleTestComments!==prevProps.SampleTestComments){this.setState({SampleTestComments:this.props.SampleTestComments});}}},{key:\"render\",value:function render(){var _this2=this;// const addReleaseTestComment =\n//     this.props.controlMap.has(\"AddReleaseTestComment\") &&\n//     this.props.controlMap.get(\"AddReleaseTestComment\").ncontrolcode;\n// const editReleaseTestComment =\n//     this.props.controlMap.has(\"EditReleaseTestComment\") &&\n//     this.props.controlMap.get(\"EditReleaseTestComment\").ncontrolcode;\n// const editReleaseTestCommentParam = {\n//     screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTCOMMENT\" }),\n//     operation: \"update\", primaryKeyField: \"nreleasetestcommentcode\",\n//     inputParam: this.state.inputParam,\n//     userInfo: this.props.userInfo,\n//     ncontrolCode: editReleaseTestComment\n// };\nthis.fieldsForReleasedTestCommentGrid=[{\"idsName\":\"IDS_ARNO\",\"dataField\":\"sarno\",\"width\":\"200px\"}];this.props.masterData.realRegSubTypeValue&&this.props.masterData.realRegSubTypeValue.nneedsubsample&&this.fieldsForReleasedTestCommentGrid.push({\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"200px\"});this.fieldsForReleasedTestCommentGrid.push({\"idsName\":\"IDS_TESTSYNONYM\",\"dataField\":\"stestsynonym\",\"width\":\"200px\"},{\"idsName\":\"IDS_SCREENNAME\",\"dataField\":\"sformname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COMMENTNAME\",\"dataField\":\"scommentsubtype\",\"width\":\"200px\"},{\"idsName\":\"IDS_ABBREVIATIONNAME\",\"dataField\":\"spredefinedname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"scomments\",\"width\":\"200px\"},{\"idsName\":\"IDS_INCULDEINREPORT\",\"dataField\":\"sneedreport\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"susername\",\"width\":\"200px\"},{\"idsName\":\"IDS_USERROLENAME\",\"dataField\":\"suserrolename\",\"width\":\"200px\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_COMMENTNAME\"}),isSearchable:true,name:\"ncommentsubtypecode\",showOption:true,options:this.props.CommentSubType||[],optionId:\"ncommentsubtypecode\",optionValue:\"scommentsubtype\",value:this.state.selectedRecord[\"ncommentsubtypecode\"]&&(this.state.selectedRecord[\"ncommentsubtypecode\"]||\"\"),onChange:function onChange(value){return _this2.onComboChange(value,'ncommentsubtypecode');},isMandatory:true}),this.state.selectedRecord&&this.state.selectedRecord[\"ncommentsubtypecode\"]&&this.state.selectedRecord[\"ncommentsubtypecode\"].value===3?/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_ABBREVIATIONNAME\"}),isSearchable:true,name:\"nsampletestcommentscode\",showOption:true,options:this.state.SampleTestComments||[],optionId:\"nsampletestcommentscode\",optionValue:\"spredefinedname\",value:this.state.selectedRecord[\"nsampletestcommentscode\"]&&(this.state.selectedRecord[\"nsampletestcommentscode\"]||\"\"),onChange:function onChange(value){return _this2.onComboChange(value,'nsampletestcommentscode');},isMandatory:true}):\"\",/*#__PURE__*/React.createElement(FormTextarea,{formGroupClassName:\"remove-floating-label-margin\",label:this.props.intl.formatMessage({id:\"IDS_COMMENT\"}),name:\"scomments\",type:\"text\",required:false,isMandatory:true,value:this.state.selectedRecord[\"scomments\"]&&(this.state.selectedRecord[\"scomments\"]||\"\"),onChange:function onChange(event){return _this2.onInputOnChange(event);},maxLength:1500})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_ARNUMBER\"}),isSearchable:true,name:\"npreregno\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationArno:[],optionId:\"npreregno\",optionValue:\"sarno\",value:this.state.selectedRecord?this.state.selectedRecord.npreregno:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'npreregno');},closeMenuOnSelect:true,alphabeticalSort:true})),this.props.masterData.realRegSubTypeValue&&this.props.masterData.realRegSubTypeValue.nneedsubsample&&/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_SAMPLEARNO\"}),isSearchable:true,name:\"ntransactionsamplecode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationSampleArno:[],optionId:\"ntransactionsamplecode\",optionValue:\"ssamplearno\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactionsamplecode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactionsamplecode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_TESTSYNONYM\"}),isSearchable:true,name:\"ntransactiontestcode\",isDisabled:this.state.operation===\"create\"?false:true,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,options:this.state.selectedRecord?this.state.selectedRecord.RegistrationTest:[],optionId:\"ntransactiontestcode\",optionValue:\"stestsynonym\",value:this.state.selectedRecord?this.state.selectedRecord.ntransactiontestcode:\"\",onChange:function onChange(event){return _this2.onComboChange(event,'ntransactiontestcode');},closeMenuOnSelect:true,alphabeticalSort:true})),/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt-4\"},/*#__PURE__*/React.createElement(CustomSwitch,{label:this.props.intl.formatMessage({id:\"IDS_INCULDEINREPORT\"}),type:\"switch\",name:\"nneedreport\",onChange:function onChange(event){return _this2.onInputOnChange(event,1);},defaultValue:false,isMandatory:false,required:true,checked:this.state.selectedRecord?this.state.selectedRecord.nneedreport===transactionStatus.YES?true:false:false}))));}}]);return AddReleaseTestAttachment;}(React.Component);export default connect(null,{viewAttachment:viewAttachment})(injectIntl(AddReleaseTestAttachment));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/release/AddReleaseTestComment.jsx"],"names":["React","Col","Row","injectIntl","transactionStatus","viewAttachment","connect","CustomSwitch","FormTextarea","FormSelectSearch","rsapi","toast","constructOptionList","AddReleaseTestAttachment","props","onComboChange","comboData","fieldName","selectedRecord","state","lstRegistrationSampleArno","masterData","RegistrationSampleArno","lstRegistrationTest","RegistrationTest","ntransactionsamplecode","ntransactiontestcode","ssamplearno","stestsynonym","needSubSample","realRegSubTypeValue","nneedsubsample","map","item","npreregno","value","push","label","sarno","setState","post","userinfo","userInfo","ncommentsubtypecode","then","response","listSampleTestComments","data","SampleTestComments","lstSampleTestComments","get","length","childDataChange","catch","error","status","message","warn","loading","sdescription","onInputOnChange","event","target","name","type","checked","YES","NO","undefined","fileFormat","requiredFileFormat","settings","split","fileNameSplit","Array","isArray","slice","intl","formatMessage","id","dataState","skip","take","parseInt","ReleaseTestCommentDetails","openModal","inputParam","loadEsign","operation","isneedReport","prevProps","fieldsForReleasedTestCommentGrid","CommentSubType","RegistrationArno","nneedreport","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { viewAttachment } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport CustomSwitch from '../../components/custom-switch/custom-switch.component';\r\nimport FormTextarea from '../../components/form-textarea/form-textarea.component';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport { constructOptionList } from \"../../components/CommonScript\";\r\n\r\nclass AddReleaseTestAttachment extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            loading: false,\r\n            ReleaseTestCommentDetails: this.props.ReleaseTestCommentDetails,\r\n            dataState: dataState,\r\n            openModal: false,\r\n            inputParam: this.props.inputParam,\r\n            loadEsign: false,\r\n            operation: this.props.operation ? this.props.operation : \"\",\r\n            selectedRecord: this.props.selectedRecord,\r\n            isneedReport: this.props.isneedReport,\r\n            SampleTestComments: this.props.SampleTestComments\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.ReleaseTestCommentDetails !== prevProps.ReleaseTestCommentDetails) {\r\n            this.setState({ ReleaseTestCommentDetails: this.props.ReleaseTestCommentDetails })\r\n        }\r\n        if (this.props.inputParam !== prevProps.inputParam) {\r\n            this.setState({ inputParam: this.props.inputParam })\r\n        }\r\n        if (this.props.selectedRecord !== prevProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord })\r\n        }\r\n        if (this.props.operation !== prevProps.operation) {\r\n            this.setState({ operation: this.props.operation })\r\n        }\r\n        if (this.props.SampleTestComments !== prevProps.SampleTestComments) {\r\n            this.setState({ SampleTestComments: this.props.SampleTestComments })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // const addReleaseTestComment =\r\n        //     this.props.controlMap.has(\"AddReleaseTestComment\") &&\r\n        //     this.props.controlMap.get(\"AddReleaseTestComment\").ncontrolcode;\r\n\r\n        // const editReleaseTestComment =\r\n        //     this.props.controlMap.has(\"EditReleaseTestComment\") &&\r\n        //     this.props.controlMap.get(\"EditReleaseTestComment\").ncontrolcode;\r\n\r\n        // const editReleaseTestCommentParam = {\r\n        //     screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTCOMMENT\" }),\r\n        //     operation: \"update\", primaryKeyField: \"nreleasetestcommentcode\",\r\n        //     inputParam: this.state.inputParam,\r\n        //     userInfo: this.props.userInfo,\r\n        //     ncontrolCode: editReleaseTestComment\r\n        // };\r\n\r\n        this.fieldsForReleasedTestCommentGrid =\r\n            [\r\n                { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"200px\" }\r\n            ];\r\n        this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample &&\r\n                this.fieldsForReleasedTestCommentGrid.push(\r\n                    { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" }\r\n                )\r\n        this.fieldsForReleasedTestCommentGrid.push(\r\n            { \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_COMMENTNAME\", \"dataField\": \"scommentsubtype\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ABBREVIATIONNAME\", \"dataField\": \"spredefinedname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"scomments\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_INCULDEINREPORT\", \"dataField\": \"sneedreport\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLENAME\", \"dataField\": \"suserrolename\", \"width\": \"200px\" }\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <Row>\r\n\r\n                    {\r\n                        <Col md=\"12\" className=\"mt-4\">\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_COMMENTNAME\" })}\r\n                                isSearchable={true}\r\n                                name={\"ncommentsubtypecode\"}\r\n                                showOption={true}\r\n                                options={this.props.CommentSubType || []}\r\n                                optionId='ncommentsubtypecode'\r\n                                optionValue='scommentsubtype'\r\n                                value={this.state.selectedRecord[\"ncommentsubtypecode\"] && (this.state.selectedRecord[\"ncommentsubtypecode\"] || \"\")}\r\n                                onChange={value => this.onComboChange(value, 'ncommentsubtypecode')}\r\n                                isMandatory={true}\r\n                            />\r\n                            {this.state.selectedRecord && this.state.selectedRecord[\"ncommentsubtypecode\"] && this.state.selectedRecord[\"ncommentsubtypecode\"].value === 3 ?\r\n                                <FormSelectSearch\r\n                                    formLabel={this.props.intl.formatMessage({ id: \"IDS_ABBREVIATIONNAME\" })}\r\n                                    isSearchable={true}\r\n                                    name={\"nsampletestcommentscode\"}\r\n                                    showOption={true}\r\n                                    options={this.state.SampleTestComments || []}\r\n                                    optionId='nsampletestcommentscode'\r\n                                    optionValue='spredefinedname'\r\n                                    value={this.state.selectedRecord[\"nsampletestcommentscode\"] && (this.state.selectedRecord[\"nsampletestcommentscode\"] || \"\")}\r\n                                    onChange={value => this.onComboChange(value, 'nsampletestcommentscode')}\r\n                                    isMandatory={true}\r\n                                /> : \"\"}\r\n                            <FormTextarea\r\n                                formGroupClassName=\"remove-floating-label-margin\"\r\n                                label={this.props.intl.formatMessage({ id: \"IDS_COMMENT\" })}\r\n                                name={\"scomments\"}\r\n                                type=\"text\"\r\n                                required={false}\r\n                                isMandatory={true}\r\n                                value={this.state.selectedRecord[\"scomments\"] && (this.state.selectedRecord[\"scomments\"] || \"\")}\r\n                                onChange={(event) => this.onInputOnChange(event)}\r\n                                maxLength={1500}\r\n                            />\r\n                        </Col>\r\n                    }\r\n\r\n                    <Col md={12}>\r\n                        <FormSelectSearch\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_ARNUMBER\" })}\r\n                            isSearchable={true}\r\n                            name={\"npreregno\"}\r\n                            isDisabled={this.state.operation === \"create\" ? false : true}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            isMandatory={true}\r\n                            options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationArno : []}\r\n                            optionId='npreregno'\r\n                            optionValue='sarno'\r\n                            value={this.state.selectedRecord ? this.state.selectedRecord.npreregno : \"\"}\r\n                            onChange={(event) => this.onComboChange(event, 'npreregno')}\r\n                            closeMenuOnSelect={true}\r\n                            alphabeticalSort={true}\r\n                        />\r\n                    </Col>\r\n\r\n                    {this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample &&\r\n                        <Col md={12}>\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_SAMPLEARNO\" })}\r\n                                isSearchable={true}\r\n                                name={\"ntransactionsamplecode\"}\r\n                                isDisabled={this.state.operation === \"create\" ? false : true}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={true}\r\n                                options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationSampleArno : []}\r\n                                optionId='ntransactionsamplecode'\r\n                                optionValue='ssamplearno'\r\n                                value={this.state.selectedRecord ? this.state.selectedRecord.ntransactionsamplecode : \"\"}\r\n                                onChange={(event) => this.onComboChange(event, 'ntransactionsamplecode')}\r\n                                closeMenuOnSelect={true}\r\n                                alphabeticalSort={true}\r\n                            />\r\n                        </Col>\r\n                    }\r\n\r\n                    <Col md={12}>\r\n                        <FormSelectSearch\r\n                            formLabel={this.props.intl.formatMessage({ id: \"IDS_TESTSYNONYM\" })}\r\n                            isSearchable={true}\r\n                            name={\"ntransactiontestcode\"}\r\n                            isDisabled={this.state.operation === \"create\" ? false : true}\r\n                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                            isMandatory={true}\r\n                            options={this.state.selectedRecord ? this.state.selectedRecord.RegistrationTest : []}\r\n                            optionId='ntransactiontestcode'\r\n                            optionValue='stestsynonym'\r\n                            value={this.state.selectedRecord ? this.state.selectedRecord.ntransactiontestcode : \"\"}\r\n                            onChange={(event) => this.onComboChange(event, 'ntransactiontestcode')}\r\n                            closeMenuOnSelect={true}\r\n                            alphabeticalSort={true}\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col md=\"12\" className=\"mt-4\">\r\n                        <CustomSwitch\r\n                            label={this.props.intl.formatMessage({ id: \"IDS_INCULDEINREPORT\" })}\r\n                            type=\"switch\"\r\n                            name={\"nneedreport\"}\r\n                            onChange={(event) => this.onInputOnChange(event, 1)}\r\n                            defaultValue={false}\r\n                            isMandatory={false}\r\n                            required={true}\r\n                            checked={this.state.selectedRecord ? this.state.selectedRecord.nneedreport === transactionStatus.YES ? true : false : false}\r\n                        />\r\n                    </Col>\r\n                    {/* : \"\"} */}\r\n\r\n                </Row>\r\n            </>\r\n        );\r\n    };\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        let lstRegistrationSampleArno = this.props.masterData.RegistrationSampleArno;\r\n        let lstRegistrationTest = this.props.masterData.RegistrationTest;\r\n        let RegistrationSampleArno = [];\r\n        let RegistrationTest = [];\r\n        let ntransactionsamplecode = \"\";\r\n        let ntransactiontestcode = \"\";\r\n        let ssamplearno = null;\r\n        let stestsynonym = null;\r\n        const needSubSample = this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample;\r\n        if (fieldName === \"npreregno\") {\r\n            lstRegistrationSampleArno.map(item => {\r\n                if (item.item.npreregno === comboData.value) {\r\n                    RegistrationSampleArno.push(item);\r\n                }\r\n            });\r\n            if (!needSubSample) {\r\n                lstRegistrationTest.map(item => {\r\n                    if (item.item.ntransactionsamplecode === RegistrationSampleArno[0].item.ntransactionsamplecode) {\r\n                        RegistrationTest.push(item);\r\n                    }\r\n                });\r\n                ntransactionsamplecode = {\r\n                    item: RegistrationSampleArno[0],\r\n                    label: RegistrationSampleArno[0].label,\r\n                    value: RegistrationSampleArno[0].value\r\n                }\r\n                ssamplearno = RegistrationSampleArno[0].item.ssamplearno\r\n            }\r\n            let npreregno = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            };\r\n            let sarno = comboData.item.sarno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationSampleArno, RegistrationTest, npreregno\r\n                , sarno, ntransactionsamplecode, ntransactiontestcode, ssamplearno, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactionsamplecode\") {\r\n            lstRegistrationTest.map(item => {\r\n                if (item.item.ntransactionsamplecode === comboData.value) {\r\n                    RegistrationTest.push(item);\r\n                }\r\n            });\r\n            ntransactionsamplecode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            ssamplearno = comboData.item.ssamplearno;\r\n            selectedRecord = {\r\n                ...selectedRecord, RegistrationTest, ntransactionsamplecode\r\n                , ssamplearno, ntransactiontestcode, stestsynonym\r\n            };\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ntransactiontestcode\") {\r\n            ntransactiontestcode = {\r\n                item: comboData.item,\r\n                label: comboData.label,\r\n                value: comboData.value\r\n            }\r\n            stestsynonym = comboData.item.stestsynonym;\r\n            selectedRecord = {\r\n                ...selectedRecord, ntransactiontestcode\r\n                , stestsynonym\r\n            }\r\n            this.setState({ selectedRecord });\r\n        } else if (fieldName === \"ncommentsubtypecode\") {\r\n            rsapi.post(\"/comments/getSampleTestCommentsListById\", {\r\n                userinfo: this.props.userInfo,\r\n                ncommentsubtypecode: comboData.value\r\n            })\r\n                .then(response => {\r\n                    let listSampleTestComments = response.data.SampleTestComments;\r\n                    const lstSampleTestComments = constructOptionList(listSampleTestComments || [], \"nsampletestcommentscode\", \"spredefinedname\", false, false, true);\r\n                    const SampleTestComments = lstSampleTestComments.get(\"OptionList\");\r\n                    selectedRecord[\"scommentsubtype\"] = comboData.label;\r\n                    selectedRecord[\"ncommentsubtypecode\"] = comboData;\r\n                    // ALPD-4948    Modified code by Vishakh for showing commentsubtype field as 'NA' instead of showing '-'\r\n                    selectedRecord[\"nsampletestcommentscode\"] = SampleTestComments && SampleTestComments.length > 0 && SampleTestComments[0];\r\n                    selectedRecord[\"scomments\"] = \"\";\r\n                    selectedRecord[\"spredefinedname\"] = \"\";\r\n                    this.setState({\r\n                        SampleTestComments, selectedRecord,\r\n                    });\r\n                    this.props.childDataChange(selectedRecord);\r\n                }).catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                    this.setState({\r\n                        loading: false\r\n                    });\r\n                });\r\n        } else if (fieldName === \"nsampletestcommentscode\") {\r\n            selectedRecord[\"nsampletestcommentscode\"] = comboData;\r\n            selectedRecord[\"spredefinedname\"] = comboData.label;\r\n            selectedRecord[\"scomments\"] = comboData.item && comboData.item.sdescription ? comboData.item.sdescription : \"\";\r\n            this.setState({ selectedRecord });\r\n        }\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[event.target.name] = event.target.value;\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"nneedreport\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n            }\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        if (selectedRecord[\"nneedreport\"] && selectedRecord[\"nneedreport\"] === transactionStatus.YES && selectedRecord[\"sfilename\"] !== undefined && selectedRecord[\"sfilename\"].length > 0) {\r\n            let fileFormat = false;\r\n            let requiredFileFormat = this.props.settings && this.props.settings[32] && this.props.settings[32].split(\",\");\r\n            let fileNameSplit = selectedRecord[\"sfilename\"] && Array.isArray(selectedRecord[\"sfilename\"]) ? selectedRecord[\"sfilename\"][0].name.split(\".\") : selectedRecord[\"sfilename\"].split(\".\");\r\n            requiredFileFormat.map(item => {\r\n                if (item.slice(1) === fileNameSplit[fileNameSplit.length - 1]) {\r\n                    fileFormat = true;\r\n                }\r\n            });\r\n            selectedRecord[\"nneedreport\"] = fileFormat ? selectedRecord[\"nneedreport\"] : transactionStatus.NO;\r\n            !fileFormat && toast.warn(this.props.intl.formatMessage({ id: \"IDS_REPORTSUPPORTSONLYFILEFORMATS\" }));\r\n        }\r\n        this.setState({ selectedRecord })\r\n        this.props.childDataChange(selectedRecord);\r\n    }\r\n\r\n}\r\n\r\nexport default connect(null, { viewAttachment })(injectIntl(AddReleaseTestAttachment));"]},"metadata":{},"sourceType":"module"}