{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{toast}from'react-toastify';import{Row,Col,Nav,Button,Image,Media}from'react-bootstrap';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import{injectIntl}from'react-intl';import{callService,crudMaster,getUserMappingFilterChange,getUserMappingBySite,getUserMappingGraphView,getChildUsers,openUserMappingModal,updateStore,validateEsignCredential,filterColumnData,getCopyUserMapping,getCopyUserMappingSubType,getUserMapping}from'../../../actions';import{getControlMap,sortData,showEsign,constructOptionList}from'../../../components/CommonScript';import UserMappingFilter from'./UserMappingFilter';import{MediaHeader,ContentPanel}from'../../../components/App.styles';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faSitemap,faTrashAlt}from'@fortawesome/free-solid-svg-icons';import ListMaster from'../../../components/list-master/list-master.component';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import Esign from'../../audittrail/Esign';import FormSelectSearch from'../../../components/form-select-search/form-select-search.component';import{SearchAdd}from'../../product/product.styled';import ConfirmDialog from'../../../components/confirm-alert/confirm-alert.component';import{Grid,GridColumn,GridColumnMenuFilter}from'@progress/kendo-react-grid';import{process}from'@progress/kendo-data-query';import{ApprovalSubType,transactionStatus}from'../../../components/Enumeration';import ColumnMenu from'../../../components/data-grid/ColumnMenu';import UserTree from'./UserTree';import{AtTableWrap,FontIconWrap}from'../../../components/data-grid/data-grid.styles';import ReactTooltip from'react-tooltip';import'./UserMapping.css';import{AtHeader}from'../../../components/header/header.styles';import ConfirmMessage from'../../../components/confirm-alert/confirm-message.component';import{fileViewUrl}from'../../../rsapi';import{loadMessages,LocalizationProvider}from'@progress/kendo-react-intl';// import messages_en from '../../../assets/translations/en.json';\n// import messages_de from '../../../assets/translations/de.json';\nimport{Affix}from'rsuite';import BreadcrumbComponent from'../../../components/Breadcrumb.Component';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};// const messages = {\n//     'en-US': messages_en,\n//     'ko-KR': messages_de\n// }\nvar UserMapping=/*#__PURE__*/function(_React$Component){_inherits(UserMapping,_React$Component);var _super=_createSuper(UserMapping);function UserMapping(props){var _this;_classCallCheck(this,UserMapping);_this=_super.call(this,props);_this.sidebarExpandCollapse=function(){_this.setState({sidebarview:true});};_this.handlePanAndZoom=function(a,b,scale){scale=scale>1?1:scale;_this.setState({a:a,b:b,scale:scale});};_this.handlePanMove=function(a,b){_this.setState({a:a,b:b});};_this.dataStateChange=function(event,nuserrolecode){var dataState=_objectSpread(_objectSpread({},_this.state.dataState),{},_defineProperty({},nuserrolecode,event.dataState));var dataResult=_this.state.dataResult;dataResult[nuserrolecode]=process(_this.props.Login.masterData[nuserrolecode],event.dataState);_this.props.Login.dataState=dataState;_this.setState({dataState:dataState,dataResult:dataResult});};_this.acceptCopy=function(saveType,inputParam,masterData){var copyId=_this.state.controlMap.has(\"CopyUserMapping\")&&_this.state.controlMap.get(\"CopyUserMapping\").ncontrolcode;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,copyId)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType,operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.onSaveClick=function(saveType,formRef){var addedUsers=[];var inputData={};if(_this.props.Login.operation==='copy'){inputData={usermapping:{ntreeversiontempcode:_this.templateVersionValue.value,napprovalsubtypecode:_this.approvalSubTypeValue.value,nregtypecode:_this.state.selectedRecord[\"regtype\"].value,nregsubtypecode:_this.state.selectedRecord[\"regsubtype\"].value,userinfo:_this.props.Login.userInfo,nsitecode:_this.props.Login.masterData.selectedSite.nsitecode},userinfo:_this.props.Login.userInfo};var masterData=_this.props.Login.masterData;var inputParam={methodUrl:'UserMapping',classUrl:_this.props.Login.inputParam.classUrl,displayName:_this.props.Login.inputParam.displayName,inputData:inputData,saveType:saveType,formRef:formRef,operation:'copy',searchRef:_this.searchRef,dataState:_objectSpread(_objectSpread({},_this.state.dataState),{},_defineProperty({},_this.props.Login.childRole,{skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5}))};_this.confirmMessage.confirm(_this.props.intl.formatMessage({id:\"IDS_CONFIRMATION\"}),_this.props.intl.formatMessage({id:\"IDS_CONFIRMATION\"})+\"!\",_this.props.intl.formatMessage({id:\"IDS_COPYUSERMAPPINGALERT\"})+\" ?\",_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.acceptCopy(saveType,inputParam,masterData);});}if(_this.state.selectedRecord.nusercode&&_this.state.selectedRecord.nusercode.length>0){_this.state.selectedRecord.nusercode.map(function(user){addedUsers.push({nversioncode:_this.templateVersionValue.value,napprovalconfigcode:_this.props.Login.masterData.approvalConfigCode||_this.templateVersionValue.item.napprovalconfigcode||-1,nparentrolecode:_this.props.Login.parentRole,nparentusercode:_this.props.Login.parentRole===-2?-2:_this.props.Login.masterData[\"selectedUser_\".concat(_this.props.Login.parentRole)].UserCode,nparentusersitecode:_this.props.Login.parentRole===-2?-2:_this.props.Login.masterData[\"selectedUser_\".concat(_this.props.Login.parentRole)].usersitecode,nchildrolecode:user.item.nuserrolecode,nchildusercode:user.item.UserCode,nchildusersitecode:user.item.nusersitecode,nparusermappingcode:_this.props.Login.parentRole===-2?-2:_this.props.Login.masterData[\"selectedUser_\".concat(_this.props.Login.parentRole)].nusermappingcode,nlevel:user.item.nlevelno,nsitecode:_this.props.Login.masterData.selectedSite.nsitecode,nstatus:1});return null;});var _masterData=_this.props.Login.masterData;inputData={users:{userinfo:_this.props.Login.userInfo,usermapping:addedUsers,nparusermappingcode:_this.props.Login.parentRole===-2?-2:_this.props.Login.masterData[\"selectedUser_\".concat(_this.props.Login.parentRole)].nusermappingcode,nuserrolecode:_this.props.Login.parentRole,nsitecode:_this.props.Login.masterData.selectedSite.nsitecode,nversioncode:_this.templateVersionValue.value,levelno:_this.props.Login.nlevelno,nregtypecode:_this.props.Login.masterData.registrationTypeValue.value?_this.props.Login.masterData.registrationTypeValue.value:-1,nregsubtypecode:_this.props.Login.masterData.registrationSubTypeValue?_this.props.Login.masterData.registrationSubTypeValue.value:-1},userinfo:_this.props.Login.userInfo};var _inputParam={methodUrl:'Users',classUrl:_this.props.Login.inputParam.classUrl,displayName:_this.props.Login.inputParam.displayName,inputData:inputData,saveType:saveType,formRef:formRef,operation:'create',searchRef:_this.searchRef,dataState:_objectSpread(_objectSpread({},_this.state.dataState),{},_defineProperty({},_this.props.Login.childRole,{skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5}))};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:_inputParam,masterData:_masterData},saveType:saveType,operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(_inputParam,_masterData,\"openChildModal\");}}};_this.deleteUsers=function(deleteId,nusermappingcode,nparusermappingcode,role){var inputData={'users':{nusermappingcode:nusermappingcode,nparusermappingcode:nparusermappingcode,nuserrolecode:role.nparentrolecode,nsitecode:_this.props.Login.masterData.selectedSite.nsitecode,nversioncode:_this.templateVersionValue.value,levelno:role.nlevelno,userinfo:_this.props.Login.userInfo}};inputData['userinfo']=_this.props.Login.userInfo;var inputParam={methodUrl:'Users',classUrl:_this.props.Login.inputParam.classUrl,displayName:_this.props.Login.inputParam.displayName,inputData:inputData,operation:\"delete\",dataState:_this.state.dataState,postParam:{inputListName:\"Site\",selectedObject:\"selectedSite\",primaryKeyField:\"nsitecode\",searchFieldList:[\"ssitename\"],fetchUrl:\"usermapping/getUserMappingBySite\",fecthInputObject:{nversioncode:_this.templateVersionValue?_this.templateVersionValue.value:-1,userinfo:_this.props.Login.userInfo},unchangeList:[\"TreeVersion\",\"templateVersionValue\",\"Approvalsubtype\",\"approvalSubTypeValue\",\"RegistrationType\",\"registrationTypeValue\",\"RegistrationSubType\",\"registrationSubTypeValue\",\"realApprovalSubTypeValue\",\"realRegistrationTypeValue\",\"realRegistrationSubTypeValue\",\"realTemplateVersionValue\"],masterData:_this.props.Login.masterData}};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteId)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},operation:\"delete\",openChildModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName})}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openChildModal=_this.props.Login.openChildModal;var graphView=_this.props.Login.graphView;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=undefined;selectedRecord['esigncomments']=undefined;selectedRecord['esignreason']=undefined;}}else{openChildModal=false;graphView=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,graphView:graphView}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.getUserMapping=function(){if(_this.state.ApprovalsubtypeList.length>0){// this.searchRef.current.value = \"\"\n// let approvalSubTypeValue = this.approvalSubTypeValue ? this.approvalSubTypeValue : this.state.ApprovalsubtypeList.length > 0 ? \n//                             this.state.ApprovalsubtypeList[0] : -1;\nvar masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{realApprovalSubTypeValue:_this.props.Login.masterData.approvalSubTypeValue?_this.props.Login.masterData.approvalSubTypeValue:_this.props.Login.masterData.realApprovalSubTypeValue?_this.props.Login.masterData.realApprovalSubTypeValue:-1,//realApprovalSubTypeValue: this.props.Login.masterData.approvalSubTypeValue?this.props.Login.masterData.approvalSubTypeValue.value === 1 ? this.props.Login.masterData.approvalSubTypeValue :this.props.Login.masterData.realApprovalSubTypeValue?this.props.Login.masterData.realApprovalSubTypeValue:-1:this.props.Login.masterData.realApprovalSubTypeValue,\nrealRegistrationTypeValue:_this.props.Login.masterData.registrationTypeValue?_this.props.Login.masterData.registrationTypeValue:-1,realRegistrationSubTypeValue:_this.props.Login.masterData.registrationSubTypeValue?_this.props.Login.masterData.registrationSubTypeValue:-1,//realTemplateVersionValue: this.props.Login.masterData.templateVersionValue ? this.props.Login.masterData.templateVersionValue : -1,\nrealTemplateVersionValue:_this.props.Login.masterData.templateVersionValue?_this.props.Login.masterData.templateVersionValue:_this.props.Login.masterData.realTemplateVersionValue?_this.props.Login.masterData.realTemplateVersionValue:-1});var inputParamData={nFlag:6,// napprovalsubtypecode: this.props.Login.masterData.approvalSubTypeValue.value,\nnapprovalsubtypecode:_this.approvalSubTypeValue.value?_this.approvalSubTypeValue.value:-1,nregtypecode:_this.props.Login.masterData.registrationTypeValue.value?_this.props.Login.masterData.registrationTypeValue.value:-1,nregsubtypecode:_this.props.Login.masterData.registrationSubTypeValue?_this.props.Login.masterData.registrationSubTypeValue.value:-1,//ntemplatecode: this.props.Login.masterData.approvalSubTypeValue.item.ntemplatecode,\nntemplatecode:_this.approvalSubTypeValue.item.ntemplatecode,// nversioncode:  this.props.Login.masterData.templateVersionValue ?  this.props.Login.masterData.templateVersionValue.value : -1,\nnversioncode:_this.templateVersionValue.value?_this.templateVersionValue.value:-1,userinfo:_this.props.Login.userInfo,masterData:masterData,searchRef:_this.searchRef};if(inputParamData.napprovalsubtypecode>0&&inputParamData.nregtypecode>0&&inputParamData.nregsubtypecode>0&&inputParamData.nversioncode>0){_this.props.getUserMapping(inputParamData);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PLSSELECTALLVALUESINFILTER\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_APPROVALSUBTYPENOTAVAILABLE\"}));}};_this.reloadData=function(){// const inputParam = {\n//     inputData: { \"userinfo\": this.props.Login.userInfo },\n//     classUrl: \"usermapping\",\n//     methodUrl: \"UserMapping\",\n//     displayName: \"IDS_USERMAPPING\",\n//     userInfo: this.props.Login.userInfo\n// };\n// this.props.callService(inputParam);\nif(_this.props.Login.masterData.approvalSubTypeValue){//ALPD-4803 done by Dhanushya RI,To check searchref key is present or not\nif(_this.searchRef&&_this.searchRef.current){_this.searchRef.current.value=\"\";}var masterData=_objectSpread(_objectSpread({},_this.props.Login.masterData),{},{realApprovalSubTypeValue:_this.props.Login.masterData.approvalSubTypeValue?_this.props.Login.masterData.approvalSubTypeValue:-1,realRegistrationTypeValue:_this.props.Login.masterData.registrationTypeValue?_this.props.Login.masterData.registrationTypeValue:-1,realRegistrationSubTypeValue:_this.props.Login.masterData.registrationSubTypeValue?_this.props.Login.masterData.registrationSubTypeValue:-1,realApprovalConfigCode:_this.props.Login.masterData.approvalConfigCode||-1,realTreeVersionTemplateValue:_this.props.Login.masterData.userroleTemplateValue||-1});var inputData={napprovalsubtypecode:_this.props.Login.masterData.approvalSubTypeValue?_this.props.Login.masterData.approvalSubTypeValue.value:-1,napprovalconfigcode:_this.props.Login.masterData.approvalConfigCode,ntreeversiontempcode:_this.props.Login.masterData.userroleTemplateValue.value,userinfo:_this.props.Login.userInfo};var inputParamData={inputData:inputData,masterData:masterData};_this.props.getApprovalConfigurationVersion(inputParamData);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_APPROVALSUBTYPENOTAVAILABLE\"}));}};_this.onComboChange=function(comboData,comboName){var selectedRecord=_this.state.selectedRecord||{};if(comboData&&comboName===\"regtype\"){selectedRecord[comboName]=comboData;var nregsubtypecode=_this.props.Login.masterData.registrationSubTypeValue.value;_this.props.getCopyUserMappingSubType(comboData,nregsubtypecode,selectedRecord,_this.props.Login.userInfo,_this.props.Login.masterData,_this.props.Login.optCopyRegType);}else{if(comboData){selectedRecord[comboName]=comboData;_this.setState({selectedRecord:selectedRecord});}else{selectedRecord[comboName]=[];_this.setState({selectedRecord:selectedRecord,availableQB:[]});}}};_this.onFilterComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};var registrationTypeValue=_this.props.Login.masterData.registrationTypeValue;var registrationSubTypeValue=_this.props.Login.masterData.registrationSubTypeValue;var templateVersionValue=_this.props.Login.masterData.templateVersionValue;if(comboData){selectedRecord[fieldName]=comboData.value;var inputParamData={};if(fieldName==='napprovalsubtypecode'){_this.approvalSubTypeValue=comboData;inputParamData={nFlag:2,napprovalsubtypecode:comboData.value,ntemplatecode:comboData.item.ntemplatecode,userinfo:_this.props.Login.userInfo};}else if(fieldName==='nregtypecode'){registrationTypeValue=comboData;inputParamData={nFlag:3,napprovalsubtypecode:_this.approvalSubTypeValue.value,ntemplatecode:_this.approvalSubTypeValue.item.ntemplatecode,nregtypecode:comboData.value,userinfo:_this.props.Login.userInfo};}else if(fieldName==='nregsubtypecode'){registrationSubTypeValue=comboData;inputParamData={nFlag:4,napprovalsubtypecode:_this.approvalSubTypeValue.value,nregtypecode:registrationTypeValue.value,nregsubtypecode:comboData.value,ntemplatecode:_this.approvalSubTypeValue.item.ntemplatecode,userinfo:_this.props.Login.userInfo};}else{_this.templateVersionValue=comboData;templateVersionValue=comboData;inputParamData={nFlag:5,napprovalsubtypecode:_this.approvalSubTypeValue.value,nregtypecode:_this.approvalSubTypeValue.value===2?registrationTypeValue.value:-1,nregsubtypecode:_this.approvalSubTypeValue.value===2?registrationSubTypeValue.value:-1,ntemplatecode:_this.approvalSubTypeValue.item.ntemplatecode,nversioncode:comboData.value,userinfo:_this.props.Login.userInfo};}var oldState={Approvalsubtype:_this.props.Login.masterData.Approvalsubtype,RegistrationType:_this.props.Login.masterData.RegistrationType,RegistrationSubType:_this.props.Login.masterData.RegistrationSubType,TreeVersion:_this.props.Login.masterData.TreeVersion,approvalSubTypeValue:_this.approvalSubTypeValue,registrationTypeValue:registrationTypeValue,registrationSubTypeValue:registrationSubTypeValue,templateVersionValue:templateVersionValue,RegistrationTypeList:_this.state.RegistrationTypeList,RegistrationSubTypeList:_this.state.RegistrationSubTypeList,templateVersionOptionList:_this.state.templateVersionOptionList};_this.props.getUserMappingFilterChange(inputParamData,oldState,_this.props.Login.masterData);}else{selectedRecord[fieldName]=\"\";if(fieldName==='napprovalsubtypecode'){_this.approvalSubTypeValue=[];registrationTypeValue=[];registrationSubTypeValue=[];templateVersionValue=[];}else if(fieldName==='nregtypecode'){registrationTypeValue=[];registrationSubTypeValue=[];templateVersionValue=[];}else if(fieldName==='nregsubtypecode'){registrationSubTypeValue=[];templateVersionValue=[];}else{templateVersionValue=[];_this.templateVersionValue=[];}_this.setState({selectedRecord:selectedRecord});}};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.changeViewMode=function(event){event.target.checked===true?_this.setState({viewMode:\"Grid\"}):_this.setState({viewMode:\"List\"});};_this.copyData=function(){var napprovalsubtypecode=_this.approvalSubTypeValue.value;var nregsubtypecode=_this.props.Login.masterData.registrationSubTypeValue.value;_this.props.getCopyUserMapping(napprovalsubtypecode,nregsubtypecode,_this.props.Login.userInfo,_this.props.Login.masterData);};_this.userSearchFilterChange=function(comboData,comboName){var _ref=_this.state||[],selectedRecord=_ref.selectedRecord,userList=_ref.userList;if(comboData){if(comboName==='nuserrolecode'){var roleUsers=[];_this.props.Login.userTree.map(function(x){if(x.nchildrolecode===comboData.value&&!roleUsers.find(function(y){return y.nchildusercode===x.nchildusercode;})){roleUsers.push(x);}return null;});var userMap=constructOptionList(roleUsers,\"nusermappingcode\",\"username\",undefined,undefined,true);userList=userMap.get(\"OptionList\");selectedRecord[\"filteredRole\"]=comboData;selectedRecord[\"filteredUser\"]=null;}else{selectedRecord[\"filteredUser\"]=comboData;}}else{if(comboName==='nuserrolecode'){selectedRecord[\"filteredRole\"]=comboData;selectedRecord[\"filteredUser\"]=null;userList=[];}else{selectedRecord[\"filteredUser\"]=comboData;}}_this.setState({selectedRecord:selectedRecord,userList:userList});};_this.filterTree=function(){if(_this.state.selectedRecord.filteredRole){if(_this.state.selectedRecord.filteredUser){var siteName=_this.props.Login.masterData.selectedSite?_this.props.Login.masterData.selectedSite.ssitename:\"\";var data={id:0,label:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:\"#e7e6f5\",borderRadius:\"50%\",border:\"1px solid #cbc5f7\",color:\"#6554c0\",padding:\"3px\"}},siteName.split(\" \").length>1?siteName.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+siteName.split(\" \")[1].substring(0,1).toUpperCase():siteName.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"6px\"}},siteName))))),children:_this.getRoottree(_this.props.Login.userTree||[],-2,true)};_this.setState({data:data});}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTAUSERTOSEARCH\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTAUSERROLETOSEARCH\"}));}};_this.clearFilter=function(){var _this$state=_this.state,selectedRecord=_this$state.selectedRecord,userList=_this$state.userList;selectedRecord[\"filteredUser\"]=null;selectedRecord[\"filteredRole\"]=null;userList=[];var siteName=_this.props.Login.masterData.selectedSite?_this.props.Login.masterData.selectedSite.ssitename:\"\";var data={id:0,label:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:\"#e7e6f5\",borderRadius:\"50%\",border:\"1px solid #cbc5f7\",color:\"#6554c0\",padding:\"3px\"}},siteName.split(\" \").length>1?siteName.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+siteName.split(\" \")[1].substring(0,1).toUpperCase():siteName.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"6px\"}},siteName))))),children:_this.getRoottree(_this.props.Login.userTree||[],-2,false)};_this.setState({data:data,selectedRecord:selectedRecord,userList:userList});};_this.collapseAll=function(){_this.setState({expanded:!_this.state.expanded});};_this.formRef=React.createRef();_this.searchRef=React.createRef();_this.confirmMessage=new ConfirmMessage();var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:{0:_dataState},userRoleControlRights:[],controlMap:new Map(),ApprovalsubtypeList:[],RegistrationTypeList:[],RegistrationSubTypeList:[],templateVersionOptionList:[],userRoleList:[],userList:[],data:[],a:0.5,b:0.5,scale:1,expanded:false,//dataResult:{}\nsidebarview:false};return _this;}_createClass(UserMapping,[{key:\"columnProps\",value:function columnProps(field,nuserrolecode){return{field:field,columnMenu:ColumnMenu,headerClassName:this.isColumnActive(field,this.state.dataState,nuserrolecode)?'active':''};}},{key:\"isColumnActive\",value:function isColumnActive(field,dataState,nuserrolecode){return GridColumnMenuFilter.active(field,dataState[nuserrolecode]?dataState[nuserrolecode].filter:dataState['0'].filter);}},{key:\"render\",value:function render(){var _this2=this;// loadMessages(messages[this.props.Login.userInfo.slanguagetypecode], \"lang\");\nvar extractedColumnList=[{\"idsName\":\"IDS_USERNAME\",\"dataField\":\"Name\",\"width\":\"35%\"},{\"idsName\":\"IDS_LOGINID\",\"dataField\":\"LoginId\",\"width\":\"35%\"},{\"idsName\":\"IDS_DEPARTMENT\",\"dataField\":\"sdeptname\",\"width\":\"10%\"}];var addId=this.state.controlMap.has(\"AddUserMapping\")&&this.state.controlMap.get(\"AddUserMapping\").ncontrolcode;var deleteId=this.state.controlMap.has(\"DeleteUserMapping\")&&this.state.controlMap.get(\"DeleteUserMapping\").ncontrolcode;var copyId=this.state.controlMap.has(\"CopyUserMapping\")&&this.state.controlMap.get(\"CopyUserMapping\").ncontrolcode;//  let approvalSubTypes = this.props.Login.masterData.Approvalsubtype ? sortData(this.props.Login.masterData.Approvalsubtype, 'ascending', 'ntemplatecode') : [];\nvar approvalSubTypes=this.state.ApprovalsubtypeList?this.state.ApprovalsubtypeList:[];this.approvalSubTypeValue=this.props.Login.masterData.approvalSubTypeValue?this.props.Login.masterData.approvalSubTypeValue:approvalSubTypes.length>0?approvalSubTypes[0]:{};this.templateVersionValue=this.props.Login.masterData.templateVersionValue?this.props.Login.masterData.templateVersionValue:this.props.Login.masterData.TreeVersion?this.props.Login.masterData.TreeVersion.length>0?{value:this.props.Login.masterData.TreeVersion[0].ntreeversiontempcode,label:this.props.Login.masterData.TreeVersion[0].sversiondescription,item:this.props.Login.masterData.TreeVersion[0]}:{}:{};var userRole=this.props.Login.masterData.UserRole?sortData(this.props.Login.masterData.UserRole,'ascending','nlevelno'):[];var filterParam={inputListName:\"Site\",selectedObject:\"selectedSite\",primaryKeyField:\"nsitecode\",searchFieldList:[\"ssitename\"],fetchUrl:\"usermapping/getUserMappingBySite\",fecthInputObject:{nversioncode:this.templateVersionValue?this.templateVersionValue.value:-1,userinfo:this.props.Login.userInfo},unchangeList:[\"TreeVersion\",\"templateVersionValue\",\"Approvalsubtype\",\"approvalSubTypeValue\",\"RegistrationType\",\"registrationTypeValue\",\"RegistrationSubType\",\"registrationSubTypeValue\",\"realApprovalSubTypeValue\",\"realRegistrationTypeValue\",\"realRegistrationSubTypeValue\",\"realTemplateVersionValue\"],masterData:this.props.Login.masterData};var mandatoryFields=[{\"idsName\":\"IDS_USERS\",\"dataField\":\"nusercode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];if(this.props.Login.operation==='copy'){mandatoryFields=[{\"idsName\":\"IDS_REGISTRATIONTYPE\",\"dataField\":\"regtype\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_REGISTRATIONSUBTYPE\",\"dataField\":\"regsubtype\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}var breadCrumbData=[];if(this.props.Login.masterData.realApprovalSubTypeValue&&this.props.Login.masterData.realApprovalSubTypeValue.value===ApprovalSubType.TESTRESULTAPPROVAL){breadCrumbData=[{\"label\":\"IDS_APPROVALSUBTYPE\",\"value\":this.props.Login.masterData.realApprovalSubTypeValue?this.props.Login.masterData.realApprovalSubTypeValue.label:\"NA\"},{\"label\":\"IDS_REGISTRATIONTYPE\",\"value\":this.props.Login.masterData.realRegistrationTypeValue?this.props.Login.masterData.realRegistrationTypeValue.label:\"NA\"},{\"label\":\"IDS_REGISTRATIONSUBTYPE\",\"value\":this.props.Login.masterData.realRegistrationSubTypeValue?this.props.Login.masterData.realRegistrationSubTypeValue.label:\"NA\"},{\"label\":\"IDS_USERROLETEMPLATE\",\"value\":this.props.Login.masterData.realTemplateVersionValue?this.props.Login.masterData.realTemplateVersionValue.label:\"NA\"}];}else{breadCrumbData=[{\"label\":\"IDS_APPROVALSUBTYPE\",\"value\":this.props.Login.masterData.realApprovalSubTypeValue?this.props.Login.masterData.realApprovalSubTypeValue.label:\"NA\"},{\"label\":\"IDS_USERROLETEMPLATE\",\"value\":this.props.Login.masterData.realTemplateVersionValue?this.props.Login.masterData.realTemplateVersionValue.label:\"NA\"}];}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.props.sidebarview?'4':\"2\")},/*#__PURE__*/React.createElement(ListMaster//filterColumnData ={(filterValue)=>this.props.filterApprovalConfigColumnData(filterValue,this.props.Login.masterData,this.props.Login.userInfo,this.approvalSubTypeValue.value)}\n,{masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,screenName:this.props.intl.formatMessage({id:\"IDS_USERMAPPING\"}),masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Site,getMasterDetail:function getMasterDetail(site){return _this2.props.getUserMappingBySite(site,_this2.templateVersionValue.value,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.selectedSite,primaryKeyField:\"nsitecode\",mainField:\"ssitename\"//firstField=\"ssiteaddress\"\n,userRoleControlRights:this.state.userRoleControlRights,addId:-1,hidePaging:true,reloadData:this.getUserMapping,searchRef:this.searchRef,filterParam:filterParam,filterColumnData:this.props.filterColumnData,copyId:copyId,showCopy:this.approvalSubTypeValue.value===ApprovalSubType.TESTRESULTAPPROVAL,copyData:this.copyData,showGraphView:true,hideSearch:false,getGraphView:function getGraphView(){return _this2.props.getUserMappingGraphView(_this2.props.Login.masterData.selectedSite,_this2.templateVersionValue.value,_this2.props.Login.userInfo);},needAccordianFilter:false,showFilterIcon:true,onFilterSubmit:this.getUserMapping,filterComponent:[{\"IDS_FILTER\":/*#__PURE__*/React.createElement(UserMappingFilter,{selectedRecord:this.state.selectedRecord||{},filterComboChange:this.onFilterComboChange,templateVersionOptions:this.state.templateVersionOptionList,templateVersionValue:this.templateVersionValue,Approvalsubtype:this.state.ApprovalsubtypeList,approvalSubTypeValue:this.approvalSubTypeValue,RegistrationType:this.state.RegistrationTypeList,registrationTypeValue:this.props.Login.masterData.registrationTypeValue,RegistrationSubType:this.state.RegistrationSubTypeList,registrationSubTypeValue:this.props.Login.masterData.registrationSubTypeValue})}]})),/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.props.sidebarview?'8':\"10\"),className:\"position-relative\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-view-btn-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-view-btn \",onClick:this.props.parentFunction},!this.props.sidebarview?/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-less-than\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-greater-than\"}))),/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Row,null,userRole.map(function(role,index){return/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(SearchAdd,{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(MediaHeader,null,/*#__PURE__*/React.createElement(\"h4\",{style:{fontWeight:\"bold\"}},role.suserrolename)),/*#__PURE__*/React.createElement(Button,{id:\"adduser_\".concat(role.nuserrolecode),className:\"btn btn-circle solid-blue\",role:\"button\",hidden:_this2.state.userRoleControlRights.indexOf(addId)===-1,onClick:function onClick(){return _this2.props.openUserMappingModal(role,_this2.props.Login.masterData.selectedSite.nsitecode,_this2.props.Login.masterData[\"selectedUser_\".concat(role.nlevelno===1?role.nuserrolecode:role.nparentrolecode)],_this2.templateVersionValue.value,_this2.props.Login.userInfo,_this2.props.Login.masterData,userRole.filter(function(x){return x.nuserrolecode===role.nparentrolecode;}).length>0?userRole.filter(function(x){return x.nuserrolecode===role.nparentrolecode;})[0].suserrolename:\"\");}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus,title:_this2.props.intl.formatMessage({id:\"IDS_ADD\"})}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(AtTableWrap,{className:\"at-list-table\",actionColWidth:_this2.props.actionColWidth?_this2.props.actionColWidth:\"150px\"},/*#__PURE__*/React.createElement(LocalizationProvider,{language:_this2.props.Login.userInfo.slanguagetypecode},/*#__PURE__*/React.createElement(Grid,Object.assign({key:role.nuserrolecode,data:_this2.state.dataResult[\"\".concat(role.nuserrolecode)],onRowClick:function onRowClick(user){return _this2.props.getChildUsers(user.dataItem,role,_this2.props.Login.masterData.selectedSite.nsitecode,_this2.templateVersionValue.value,_this2.props.Login.userInfo,_this2.props.Login.masterData,_this2.state.dataState,userRole);},selectedField:\"selected\",style:{minHeight:'20em'},onDataStateChange:function onDataStateChange(event){return _this2.dataStateChange(event,role.nuserrolecode);},resizable:true,reorderable:true,scrollable:true,sortable:true,pageable:{buttonCount:2,pageSizes:_this2.props.Login.settings&&_this2.props.Login.settings[15].split(\",\").map(function(setting){return parseInt(setting);}),previousNext:false}},_this2.state.dataState[role.nuserrolecode]?_this2.state.dataState[role.nuserrolecode]:_this2.state.dataState['0']),extractedColumnList.map(function(item,key){return/*#__PURE__*/React.createElement(GridColumn,Object.assign({key:key,title:_this2.props.intl.formatMessage({id:item.idsName}),field:item.dataField},_this2.columnProps(item.dataField,role.nuserrolecode),{cell:function cell(row){return/*#__PURE__*/React.createElement(\"td\",{\"data-tip\":row[\"dataItem\"][item.dataField]//  data-for=\"tooltip-grid-wrap\" \n,className:_this2.props.Login.masterData[\"selectedUser_\".concat(role.nuserrolecode)].nusermappingcode===row[\"dataItem\"]['nusermappingcode']?'active':''},row[\"dataItem\"][item.dataField]);}}));}),/*#__PURE__*/React.createElement(GridColumn,{locked:true,headerClassName:\"text-center\",sort:false,title:_this2.props.intl.formatMessage({id:'IDS_ACTION'}),cell:function cell(row){return/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Nav.Link,{className:\"action-icons-wrap text-center\"},/*#__PURE__*/React.createElement(FontIconWrap,{className:\"d-font-icon\",\"data-tip\":_this2.props.intl.formatMessage({id:\"IDS_DELETE\"}),\"data-place\":\"left\",title:_this2.props.intl.formatMessage({id:\"IDS_DELETE\"})},/*#__PURE__*/React.createElement(ConfirmDialog,{name:\"deleteMessage\",message:_this2.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),doLabel:_this2.props.intl.formatMessage({id:\"IDS_OK\"}),doNotLabel:_this2.props.intl.formatMessage({id:\"IDS_CANCEL\"}),icon:faTrashAlt// title={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\n,hidden:_this2.state.userRoleControlRights.indexOf(deleteId)===-1,handleClickDelete:function handleClickDelete(){return _this2.deleteUsers(deleteId,row['dataItem'].nusermappingcode,row['dataItem'].nparusermappingcode,role);}})),userRole.length-1===index?\"\":/*#__PURE__*/React.createElement(FontIconWrap,{className:\"d-font-icon\",onClick:function onClick(){return _this2.props.getUserMappingGraphView(_this2.props.Login.masterData.selectedSite,_this2.templateVersionValue.value,_this2.props.Login.userInfo,row['dataItem'],role);},\"data-tip\":_this2.props.intl.formatMessage({id:\"IDS_GRAPH\"}),\"data-place\":\"left\",title:_this2.props.intl.formatMessage({id:\"IDS_GRAPH\"})},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSitemap,className:\"fa-rotate-270\"// onClick={() => this.props.getUserMappingGraphView(\n//     this.props.Login.masterData.selectedSite, this.templateVersionValue.value,\n//     this.props.Login.userInfo, row['dataItem'], role)}\n// title={this.props.intl.formatMessage({ id: \"IDS_GRAPH\" })}\n}))));}})))))));})))))),this.props.Login.openChildModal?/*#__PURE__*/React.createElement(SlideOutModal,{onSaveClick:this.onSaveClick,operation:this.props.Login.operation,screenName:this.props.Login.graphView?\"IDS_USERMAPPING\":this.props.Login.childRoleName||\"IDS_USERMAPPING\",closeModal:this.closeModal,show:this.props.Login.openChildModal,inputParam:this.props.Login.inputParam,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,graphView:this.props.Login.graphView,size:this.props.Login.graphView?'xl':'lg',addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.operation==='copy'?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},this.approvalSubTypeValue.value===ApprovalSubType.TESTRESULTAPPROVAL?/*#__PURE__*/React.createElement(React.Fragment,null,this.props.Login.optCopyRegType?/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_REGISTRATIONTYPE\"}),placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),name:\"regtype\",optionId:\"nregtypecode\",optionValue:\"sregtypename\",options:this.props.Login.optCopyRegType,value:this.state.selectedRecord?this.state.selectedRecord[\"regtype\"]:this.registrationTypeValue,onChange:function onChange(event){return _this2.onComboChange(event,'regtype');},isMandatory:false,isMulti:false,isSearchable:true,isDisabled:false}):\"\",this.props.Login.optCopyRegSubType?/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_REGISTRATIONSUBTYPE\"}),placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),name:\"regsubtype\",optionId:\"nregsubtypecode\",optionValue:\"sregsubtypename\",options:this.props.Login.optCopyRegSubType,value:this.state.selectedRecord&&this.state.selectedRecord[\"regsubtype\"],isMandatory:false,isMulti:false,isSearchable:true,isDisabled:false,onChange:function onChange(event){return _this2.onComboChange(event,'regsubtype');}}):\"\"):\"\")):this.props.Login.graphView?/*#__PURE__*/React.createElement(UserTree,{userRoleList:this.state.userRoleList,userList:this.state.userList,data:this.state.data,expanded:this.state.expanded,collapseAll:this.collapseAll,selectedRecord:this.state.selectedRecord,clearFilter:this.clearFilter,filterTree:this.filterTree,userSearchFilterChange:this.userSearchFilterChange,a:this.state.a,b:this.state.b,scale:this.state.scale,handlePanAndZoom:this.handlePanAndZoom,handlePanMove:this.handlePanMove,hideFilters:this.props.Login.hideFilters}):/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormSelectSearch,{name:'users',formLabel:this.props.Login.childRoleName//{this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\n// placeholder={this.props.Login.childRoleName}//{this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\n,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),value:this.state.selectedRecord?this.state.selectedRecord.nusercode?this.state.selectedRecord.nusercode:[]:[],options:this.props.Login.AvailableUsers?this.props.Login.AvailableUsers:[],optionId:\"id\",optionValue:\"Name\",isMandatory:true,isMulti:true,isDisabled:false,isSearchable:true,closeMenuOnSelect:false,isClearable:true,as:\"select\",onChange:function onChange(event){return _this2.onComboChange(event,'nusercode');}})))}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var _this3=this;ReactTooltip.rebuild();var _this$state2=this.state,selectedRecord=_this$state2.selectedRecord,dataState=_this$state2.dataState,userRoleControlRights=_this$state2.userRoleControlRights,controlMap=_this$state2.controlMap,ApprovalsubtypeList=_this$state2.ApprovalsubtypeList,data=_this$state2.data,dataResult=_this$state2.dataResult,RegistrationTypeList=_this$state2.RegistrationTypeList,RegistrationSubTypeList=_this$state2.RegistrationSubTypeList,templateVersionOptionList=_this$state2.templateVersionOptionList,userRoleList=_this$state2.userRoleList;var updateState=false;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){//this.setState({ selectedRecord: this.props.Login.selectedRecord });\nselectedRecord=this.props.Login.selectedRecord;updateState=true;}if(this.props.Login.userTree!==previousProps.Login.userTree){var filter=selectedRecord.filteredUser?true:false;if(this.props.Login.selectedTreeParent!==undefined){var status=true;this.props.Login.selectedTreeParent.suserimgftp!==null&&this.props.Login.files&&this.props.Login.files.includes(this.props.Login.selectedTreeParent.suserimgftp)?status=true:status=false;var element=this.props.Login.selectedTreeParent;data={id:this.props.Login.selectedTreeParent.nusermappingcode,label:/*#__PURE__*/React.createElement(\"div\",{style:{userSelect:'none'}},/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,status&&this.props.Login.settings&&this.props.Login.settings[5]&&element.suserimgftp&&element.suserimgftp!==\"\"?/*#__PURE__*/React.createElement(Image,{src:this.props.Login.settings[5]+element.suserimgftp,alt:\"avatar\",className:\"img-profile rounded-circle mr-2\"}):/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:\"#e7e6f5\",borderRadius:\"50%\",border:\"1px solid #cbc5f7\",color:\"#6554c0\",padding:\"3px\"}},element.username&&element.username.split(\" \").length>1?element.username.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+element.username.split(\" \")[1].substring(0,1).toUpperCase():element.username.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"user-name\"},element.username),/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"3px\"}},element.suserrolename))))),children:this.getRoottree(this.props.Login.userTree||[],this.props.Login.selectedTreeParent.nusermappingcode,false)};}else{var siteName=this.props.Login.masterData.selectedSite?this.props.Login.masterData.selectedSite.ssitename:\"\";data={id:0,label:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:\"#e7e6f5\",borderRadius:\"50%\",border:\"1px solid #cbc5f7\",color:\"#6554c0\",padding:\"3px\"}},siteName.split(\" \").length>1?siteName.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+siteName.split(\" \")[1].substring(0,1).toUpperCase():siteName.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"6px\"}},siteName))))),children:this.getRoottree(this.props.Login.userTree||[],-2,filter,selectedRecord.filteredUser,selectedRecord.filteredRole)};}updateState=true;}if(this.props.Login.dataState!==previousProps.Login.dataState){if(this.props.Login.dataState===undefined){// this.setState({ dataState: { '0': this.state.dataState['0'] } })\ndataState={'0':this.state.dataState['0']};updateState=true;}else{// this.setState({ dataState: this.props.Login.dataState ? this.props.Login.dataState : this.state.dataState['0'] });\ndataState=this.props.Login.dataState?_objectSpread({},this.props.Login.dataState):{'0':this.state.dataState['0']};updateState=true;}}if(this.props.Login.masterData!==previousProps.Login.masterData){updateState=true;var userMap=constructOptionList(this.props.Login.masterData.UserRole||[],\"nuserrolecode\",\"suserrolename\",undefined,undefined,true);userRoleList=userMap.get(\"OptionList\");var RegistrationTypeListMap=constructOptionList(this.props.Login.masterData.RegistrationType||[],\"nregtypecode\",\"sregtypename\",'nregtypecode','ascending',false);var RegistrationSubTypeListMap=constructOptionList(this.props.Login.masterData.RegistrationSubType||[],\"nregsubtypecode\",\"sregsubtypename\",'nregsubtypecode','ascending',false);var templateVersionOptionListMap=constructOptionList(this.props.Login.masterData.TreeVersion||[],\"ntreeversiontempcode\",\"sversiondescription\",'ntreeversiontempcode','decending',false);RegistrationTypeList=RegistrationTypeListMap.get(\"OptionList\");RegistrationSubTypeList=RegistrationSubTypeListMap.get(\"OptionList\");templateVersionOptionList=templateVersionOptionListMap.get(\"OptionList\");}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);var ApprovalsubtypeListMap=constructOptionList(this.props.Login.masterData.Approvalsubtype||[],\"napprovalsubtypecode\",\"ssubtypename\",'ntemplatecode','ascending',false);var _RegistrationTypeListMap=constructOptionList(this.props.Login.masterData.RegistrationType||[],\"nregtypecode\",\"sregtypename\",'nregtypecode','ascending',false);var _RegistrationSubTypeListMap=constructOptionList(this.props.Login.masterData.RegistrationSubType||[],\"nregsubtypecode\",\"sregsubtypename\",'nregsubtypecode','ascending',false);var _templateVersionOptionListMap=constructOptionList(this.props.Login.masterData.TreeVersion||[],\"ntreeversiontempcode\",\"sversiondescription\",'ntreeversiontempcode','decending',false);ApprovalsubtypeList=ApprovalsubtypeListMap.get(\"OptionList\");RegistrationTypeList=_RegistrationTypeListMap.get(\"OptionList\");RegistrationSubTypeList=_RegistrationSubTypeListMap.get(\"OptionList\");templateVersionOptionList=_templateVersionOptionListMap.get(\"OptionList\");//this.setState({userRoleControlRights, controlMap, ApprovalsubtypeList, RegistrationTypeList, RegistrationSubTypeList, templateVersionOptionList});\nupdateState=true;}if(updateState){var userRole=this.props.Login.masterData.UserRole?sortData(this.props.Login.masterData.UserRole,'ascending','nlevelno'):[];userRole.map(function(role){var roleUsers=_this3.props.Login.masterData[\"\".concat(role.nuserrolecode)]?sortData(_this3.props.Login.masterData[\"\".concat(role.nuserrolecode)],'descending','nusermappingcode'):[];dataResult[\"\".concat(role.nuserrolecode)]=process(roleUsers.map(function(item){return _objectSpread(_objectSpread({},item),{},{selected:item.nusermappingcode===_this3.props.Login.masterData[\"selectedUser_\".concat(role.nuserrolecode)].nusermappingcode});}),dataState[role.nuserrolecode]?dataState[role.nuserrolecode]:dataState['0']);return null;});this.setState({selectedRecord:selectedRecord,dataState:dataState,userRoleControlRights:userRoleControlRights,controlMap:controlMap,ApprovalsubtypeList:ApprovalsubtypeList,data:data,RegistrationTypeList:RegistrationTypeList,RegistrationSubTypeList:RegistrationSubTypeList,templateVersionOptionList:templateVersionOptionList,userRoleList:userRoleList});}}},{key:\"getRoottree\",value:function getRoottree(master,parent,filter,user,role){var _this4=this;var child=[];this.child=[];var userTree=this.props.Login.userTree?this.props.Login.userTree:[];var fiteredUserParentRole=[];var fiteredUserParentUser=[];var filteredUser=this.state.selectedRecord.filteredUser||user;var filteredRole=this.state.selectedRecord.filteredRole||role;if(filter){this.props.Login.userTree.map(function(y){if(filteredRole&&y.nchildrolecode===filteredRole.value&&y.nchildusercode===filteredUser.item.nchildusercode){fiteredUserParentRole.push(y.nparentrolecode);}if(y.nchildusercode===filteredUser.item.nchildusercode){fiteredUserParentUser.push(y.nparentusercode);}return null;});}userTree.forEach(function(element,index){var labelColor=['#e63109','#2fb47d','#eaa203','#6554c0'];var labelBGColor=['#fcd7cd','#e5f8f1','#fcf3dd','#e7e6f5'];var borderColor=['#e6310','#c6f6e4','#fde2a4','#cbc5f7'];if(element.nparusermappingcode===parent){var status=true;element.suserimgftp!==null&&_this4.props.Login.files&&_this4.props.Login.files.includes(element.suserimgftp)?status=true:status=false;if(filteredRole&&element.nchildrolecode===filteredRole.value){if(filteredUser&&element.nchildusercode===filteredUser.item.nchildusercode){child.push({id:element.nusermappingcode,label:/*#__PURE__*/React.createElement(\"div\",{style:{userSelect:'none'}},/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,status&&_this4.props.Login.settings&&_this4.props.Login.settings[5]&&element.suserimgftp&&element.suserimgftp!==\"\"?/*#__PURE__*/React.createElement(Image,{src:_this4.props.Login.settings[5]+element.suserimgftp,alt:\"avatar\",className:\"img-profile rounded-circle mr-2\"}):/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:labelBGColor[index%4],borderRadius:\"50%\",border:\"1px solid \".concat(borderColor[index%4]),color:labelColor[index%4],padding:\"3px\"}},element.username&&// element.username.split(\" \")[0].substring(0, 1).toUpperCase()\nelement.username.split(\" \").length>1?element.username.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+element.username.split(\" \")[1].substring(0,1).toUpperCase():element.username.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"user-name\"},element.username),/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"3px\"}},element.suserrolename))))),children:_this4.getRoottree(_this4.props.Login.userTree,element.nusermappingcode,filter,user,role)});}}else{child.push({id:element.nusermappingcode,label:/*#__PURE__*/React.createElement(\"div\",{style:{userSelect:'none'}},/*#__PURE__*/React.createElement(AtHeader,null,/*#__PURE__*/React.createElement(Media,null,status&&_this4.props.Login.settings&&_this4.props.Login.settings[5]&&element.suserimgftp&&element.suserimgftp!==\"\"?/*#__PURE__*/React.createElement(Image,{src:_this4.props.Login.settings[5]+element.suserimgftp,alt:\"avatar\",className:\"img-profile rounded-circle mr-2\"}):/*#__PURE__*/React.createElement(\"span\",{className:\"img-profile rounded-circle mr-2\",style:{background:labelBGColor[index%4],borderRadius:\"50%\",border:\"1px solid \".concat(borderColor[index%4]),color:labelColor[index%4],padding:\"3px\"}},element.username&&// element.username.split(\" \")[0].substring(0, 1).toUpperCase()\nelement.username.split(\" \").length>1?element.username.split(\" \")[0].substring(0,1).toUpperCase()+\"\"+element.username.split(\" \")[1].substring(0,1).toUpperCase():element.username.split(\" \")[0].substring(0,1).toUpperCase()),/*#__PURE__*/React.createElement(Media.Body,null,/*#__PURE__*/React.createElement(\"span\",{className:\"user-name\"},element.username),/*#__PURE__*/React.createElement(\"span\",{className:\"role\",style:{paddingTop:\"3px\"}},element.suserrolename))))),children:_this4.getRoottree(_this4.props.Login.userTree,element.nusermappingcode,filter,user,role)});}}});return child;}},{key:\"addDefaultSrc\",value:function addDefaultSrc(ev){ev.target.src=fileViewUrl()+\"/SharedFolder/Default-User-Image.png\";}// getchildtree(master, parent, child) {\n//     this.props.Login.userTree && this.props.Login.userTree.forEach(element => {\n//         if (element.nparusermappingcode === parent) {\n//             this.child.push(\n//                 {\n//                     id: element.nusermappingcode,\n//                     label:\n//                         <div className=\"d-flex justify-content-between\" style={{ userSelect: 'none' }}>\n//                             <Row>\n//                                 <Col md={12}>\n//                                     {element.suserimgftp === null ?\n//                                         <FontAwesomeIcon icon={faUserAlt}></FontAwesomeIcon> :\n//                                         <img\n//                                             src={fileViewUrl + \"/SharedFolder////\" + element.suserimgftp}\n//                                             alt={\"userimg\"}\n//                                             // onClick={() => window.open(signImgPath, '_blank')}\n//                                             title={element.suserimgname}\n//                                             style={{ borderRadius: \"50%\", width: \"30px\" }}\n//                                         />\n//                                     }\n//                                 </Col>\n//                                 <Col md={11}>\n//                                     {element.username} <br /> {element.suserrolename}\n//                                 </Col>\n//                             </Row>\n//                         </div>,\n//                     children: this.getchildtree(this.props.Login.userTree, element.nusermappingcode)\n//                 }\n//             )\n//         }\n//     })\n//     return child;\n// }\n}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.multilingualError&&props.Login.multilingualError!==\"\"){toast.warn(props.intl.formatMessage({id:props.Login.multilingualError}));props.Login.multilingualError=\"\";}if(props.Login.dataState===undefined){props.Login.dataState=undefined;}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return UserMapping;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,openUserMappingModal:openUserMappingModal,updateStore:updateStore,getUserMappingGraphView:getUserMappingGraphView,getCopyUserMapping:getCopyUserMapping,getUserMappingFilterChange:getUserMappingFilterChange,getUserMappingBySite:getUserMappingBySite,getChildUsers:getChildUsers,validateEsignCredential:validateEsignCredential,filterColumnData:filterColumnData,getCopyUserMappingSubType:getCopyUserMappingSubType,getUserMapping:getUserMapping})(injectIntl(UserMapping));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/organisation/usermapping/UserMapping.jsx"],"names":["React","connect","toast","Row","Col","Nav","Button","Image","Media","DEFAULT_RETURN","injectIntl","callService","crudMaster","getUserMappingFilterChange","getUserMappingBySite","getUserMappingGraphView","getChildUsers","openUserMappingModal","updateStore","validateEsignCredential","filterColumnData","getCopyUserMapping","getCopyUserMappingSubType","getUserMapping","getControlMap","sortData","showEsign","constructOptionList","UserMappingFilter","MediaHeader","ContentPanel","FontAwesomeIcon","faPlus","faSitemap","faTrashAlt","ListMaster","SlideOutModal","Esign","FormSelectSearch","SearchAdd","ConfirmDialog","Grid","GridColumn","GridColumnMenuFilter","process","ApprovalSubType","transactionStatus","ColumnMenu","UserTree","AtTableWrap","FontIconWrap","ReactTooltip","AtHeader","ConfirmMessage","fileViewUrl","loadMessages","LocalizationProvider","Affix","BreadcrumbComponent","mapStateToProps","state","Login","UserMapping","props","sidebarExpandCollapse","setState","sidebarview","handlePanAndZoom","a","b","scale","handlePanMove","dataStateChange","event","nuserrolecode","dataState","dataResult","masterData","acceptCopy","saveType","inputParam","copyId","controlMap","has","get","ncontrolcode","userRoleControlRights","userInfo","nformcode","updateInfo","typeName","data","loadEsign","screenData","operation","onSaveClick","formRef","addedUsers","inputData","usermapping","ntreeversiontempcode","templateVersionValue","value","napprovalsubtypecode","approvalSubTypeValue","nregtypecode","selectedRecord","nregsubtypecode","userinfo","nsitecode","selectedSite","methodUrl","classUrl","displayName","searchRef","childRole","skip","take","settings","parseInt","confirmMessage","confirm","intl","formatMessage","id","nusercode","length","map","user","push","nversioncode","napprovalconfigcode","approvalConfigCode","item","nparentrolecode","parentRole","nparentusercode","UserCode","nparentusersitecode","usersitecode","nchildrolecode","nchildusercode","nchildusersitecode","nusersitecode","nparusermappingcode","nusermappingcode","nlevel","nlevelno","nstatus","users","levelno","registrationTypeValue","registrationSubTypeValue","deleteUsers","deleteId","role","postParam","inputListName","selectedObject","primaryKeyField","searchFieldList","fetchUrl","fecthInputObject","unchangeList","openChildModal","screenName","closeModal","graphView","undefined","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","ApprovalsubtypeList","realApprovalSubTypeValue","realRegistrationTypeValue","realRegistrationSubTypeValue","realTemplateVersionValue","inputParamData","nFlag","ntemplatecode","warn","reloadData","current","realApprovalConfigCode","realTreeVersionTemplateValue","userroleTemplateValue","getApprovalConfigurationVersion","onComboChange","comboData","comboName","optCopyRegType","availableQB","onFilterComboChange","fieldName","oldState","Approvalsubtype","RegistrationType","RegistrationSubType","TreeVersion","RegistrationTypeList","RegistrationSubTypeList","templateVersionOptionList","onInputOnChange","target","type","name","checked","YES","NO","changeViewMode","viewMode","copyData","userSearchFilterChange","userList","roleUsers","userTree","x","find","y","userMap","filterTree","filteredRole","filteredUser","siteName","ssitename","background","borderRadius","border","color","padding","split","substring","toUpperCase","paddingTop","children","getRoottree","clearFilter","collapseAll","expanded","createRef","masterStatus","error","Map","userRoleList","field","columnMenu","headerClassName","isColumnActive","active","filter","extractedColumnList","addId","approvalSubTypes","sversiondescription","userRole","UserRole","filterParam","mandatoryFields","breadCrumbData","TESTRESULTAPPROVAL","searchedData","Site","site","parentFunction","index","fontWeight","suserrolename","indexOf","actionColWidth","slanguagetypecode","dataItem","minHeight","buttonCount","pageSizes","setting","previousNext","key","idsName","dataField","columnProps","row","childRoleName","optCopyRegSubType","hideFilters","AvailableUsers","previousProps","rebuild","updateState","selectedTreeParent","status","suserimgftp","files","includes","element","userSelect","username","RegistrationTypeListMap","RegistrationSubTypeListMap","templateVersionOptionListMap","Object","values","ApprovalsubtypeListMap","selected","master","parent","child","fiteredUserParentRole","fiteredUserParentUser","forEach","labelColor","labelBGColor","borderColor","ev","src","multilingualError","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify'\r\nimport { Row, Col, Nav, Button, Image, Media } from 'react-bootstrap'\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes'\r\nimport { injectIntl } from 'react-intl';\r\nimport {\r\n    callService, crudMaster, getUserMappingFilterChange, getUserMappingBySite, getUserMappingGraphView,\r\n    getChildUsers, openUserMappingModal, updateStore, validateEsignCredential, filterColumnData,\r\n    getCopyUserMapping, getCopyUserMappingSubType,getUserMapping\r\n} from '../../../actions';\r\nimport { getControlMap, sortData, showEsign, constructOptionList } from '../../../components/CommonScript'\r\nimport UserMappingFilter from './UserMappingFilter';\r\nimport { MediaHeader, ContentPanel } from '../../../components/App.styles';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faSitemap, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport ListMaster from '../../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../audittrail/Esign';\r\nimport FormSelectSearch from '../../../components/form-select-search/form-select-search.component';\r\nimport { SearchAdd } from '../../product/product.styled';\r\nimport ConfirmDialog from '../../../components/confirm-alert/confirm-alert.component';\r\nimport { Grid, GridColumn, GridColumnMenuFilter } from '@progress/kendo-react-grid';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { ApprovalSubType, transactionStatus } from '../../../components/Enumeration';\r\nimport ColumnMenu from '../../../components/data-grid/ColumnMenu';\r\nimport UserTree from './UserTree'\r\nimport { AtTableWrap, FontIconWrap } from '../../../components/data-grid/data-grid.styles';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport './UserMapping.css'\r\nimport { AtHeader } from '../../../components/header/header.styles';\r\nimport ConfirmMessage from '../../../components/confirm-alert/confirm-message.component';\r\nimport { fileViewUrl } from '../../../rsapi';\r\nimport { loadMessages, LocalizationProvider } from '@progress/kendo-react-intl';\r\n// import messages_en from '../../../assets/translations/en.json';\r\n// import messages_de from '../../../assets/translations/de.json';\r\nimport { Affix } from 'rsuite';\r\nimport BreadcrumbComponent from '../../../components/Breadcrumb.Component';\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n// const messages = {\r\n//     'en-US': messages_en,\r\n//     'ko-KR': messages_de\r\n// }\r\nclass UserMapping extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.formRef = React.createRef();\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n\r\n        this.state = {\r\n            masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [], dataState: { 0: dataState },\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            ApprovalsubtypeList: [],\r\n            RegistrationTypeList: [],\r\n            RegistrationSubTypeList: [],\r\n            templateVersionOptionList: [],\r\n            userRoleList: [],\r\n            userList: [],\r\n            data: [],\r\n            a: 0.5,\r\n            b: 0.5,\r\n            scale: 1,\r\n            expanded: false,\r\n            //dataResult:{}\r\n            sidebarview: false\r\n        }\r\n    }\r\n    sidebarExpandCollapse = () => {\r\n        this.setState({\r\n            sidebarview: true\r\n        })          \r\n    }\r\n\r\n    handlePanAndZoom = (a, b, scale) => {\r\n        scale = scale > 1 ? 1 : scale\r\n        this.setState({ a, b, scale });\r\n    }\r\n\r\n    handlePanMove = (a, b) => {\r\n        this.setState({ a, b });\r\n    }\r\n\r\n    dataStateChange = (event, nuserrolecode) => {\r\n        let dataState = { ...this.state.dataState, [nuserrolecode]: event.dataState };\r\n        let dataResult = this.state.dataResult;\r\n        dataResult[nuserrolecode]=process(this.props.Login.masterData[nuserrolecode],event.dataState)\r\n        this.props.Login.dataState = dataState;\r\n        this.setState({ dataState,dataResult });\r\n    }\r\n\r\n    acceptCopy = (saveType, inputParam, masterData) => {\r\n        const copyId = this.state.controlMap.has(\"CopyUserMapping\") && this.state.controlMap.get(\"CopyUserMapping\").ncontrolcode;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, copyId)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType,\r\n                    operation: this.props.Login.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let addedUsers = [];\r\n        let inputData = {};\r\n        if (this.props.Login.operation === 'copy') {\r\n            inputData = {\r\n                usermapping: {\r\n                    ntreeversiontempcode: this.templateVersionValue.value,\r\n                    napprovalsubtypecode: this.approvalSubTypeValue.value,\r\n                    nregtypecode: this.state.selectedRecord[\"regtype\"].value,\r\n                    nregsubtypecode: this.state.selectedRecord[\"regsubtype\"].value,\r\n                    userinfo: this.props.Login.userInfo,\r\n                    nsitecode: this.props.Login.masterData.selectedSite.nsitecode,\r\n                },\r\n                userinfo: this.props.Login.userInfo\r\n            }\r\n            const masterData = this.props.Login.masterData;\r\n            const inputParam = {\r\n                methodUrl: 'UserMapping',\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                displayName: this.props.Login.inputParam.displayName,\r\n                inputData: inputData, saveType, formRef,\r\n                operation: 'copy',\r\n                searchRef: this.searchRef,\r\n                dataState: { ...this.state.dataState, [this.props.Login.childRole]: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 } }\r\n\r\n            }\r\n            this.confirmMessage.confirm(this.props.intl.formatMessage({ id: \"IDS_CONFIRMATION\" }),\r\n                this.props.intl.formatMessage({ id: \"IDS_CONFIRMATION\" }) + \"!\",\r\n                this.props.intl.formatMessage({ id: \"IDS_COPYUSERMAPPINGALERT\" }) + \" ?\",\r\n                this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n                this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n                () => this.acceptCopy(saveType, inputParam, masterData));\r\n        }\r\n        if (this.state.selectedRecord.nusercode && this.state.selectedRecord.nusercode.length > 0) {\r\n            this.state.selectedRecord.nusercode.map(user => {\r\n                addedUsers.push({\r\n                    nversioncode: this.templateVersionValue.value,\r\n                    napprovalconfigcode: this.props.Login.masterData.approvalConfigCode || this.templateVersionValue.item.napprovalconfigcode || -1,\r\n                    nparentrolecode: this.props.Login.parentRole,\r\n                    nparentusercode: this.props.Login.parentRole === -2 ? -2 : this.props.Login.masterData[`selectedUser_${this.props.Login.parentRole}`].UserCode,\r\n                    nparentusersitecode: this.props.Login.parentRole === -2 ? -2 : this.props.Login.masterData[`selectedUser_${this.props.Login.parentRole}`].usersitecode,\r\n                    nchildrolecode: user.item.nuserrolecode,\r\n                    nchildusercode: user.item.UserCode,\r\n                    nchildusersitecode: user.item.nusersitecode,\r\n                    nparusermappingcode: this.props.Login.parentRole === -2 ? -2 : this.props.Login.masterData[`selectedUser_${this.props.Login.parentRole}`].nusermappingcode,\r\n                    nlevel: user.item.nlevelno,\r\n                    nsitecode: this.props.Login.masterData.selectedSite.nsitecode,\r\n                    nstatus: 1,\r\n                    })\r\n                return null;\r\n            })\r\n            const masterData = this.props.Login.masterData;\r\n            inputData = {\r\n                users: {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    usermapping: addedUsers,\r\n                    nparusermappingcode: this.props.Login.parentRole === -2 ? -2 : this.props.Login.masterData[`selectedUser_${this.props.Login.parentRole}`].nusermappingcode,\r\n                    nuserrolecode: this.props.Login.parentRole,\r\n                    nsitecode: this.props.Login.masterData.selectedSite.nsitecode,\r\n                    nversioncode: this.templateVersionValue.value,\r\n                    levelno: this.props.Login.nlevelno,\r\n                    nregtypecode:  this.props.Login.masterData.registrationTypeValue.value ?  this.props.Login.masterData.registrationTypeValue.value : -1,\r\n                    nregsubtypecode: this.props.Login.masterData.registrationSubTypeValue ? this.props.Login.masterData.registrationSubTypeValue.value : -1,\r\n                },\r\n                userinfo: this.props.Login.userInfo,\r\n\r\n            }\r\n            const inputParam = {\r\n                methodUrl: 'Users',\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                displayName: this.props.Login.inputParam.displayName,\r\n                inputData: inputData, saveType, formRef,\r\n                operation: 'create',\r\n                searchRef: this.searchRef,\r\n                dataState: { ...this.state.dataState, [this.props.Login.childRole]: { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 } }\r\n\r\n            }\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolcode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData }, saveType,\r\n                        operation: this.props.Login.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteUsers = (deleteId, nusermappingcode, nparusermappingcode, role) => {\r\n\r\n        const inputData = {\r\n            'users': {\r\n                nusermappingcode: nusermappingcode,\r\n                nparusermappingcode: nparusermappingcode,\r\n                nuserrolecode: role.nparentrolecode,\r\n                nsitecode: this.props.Login.masterData.selectedSite.nsitecode,\r\n                nversioncode: this.templateVersionValue.value,\r\n                levelno: role.nlevelno,\r\n                userinfo: this.props.Login.userInfo\r\n            }\r\n        }\r\n        inputData['userinfo'] = this.props.Login.userInfo\r\n        const inputParam = {\r\n            methodUrl: 'Users',\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData,\r\n            operation: \"delete\",\r\n            dataState: this.state.dataState,\r\n            postParam : {\r\n                inputListName: \"Site\",\r\n                selectedObject: \"selectedSite\",\r\n                primaryKeyField: \"nsitecode\",\r\n                searchFieldList: [\"ssitename\"],\r\n                fetchUrl: \"usermapping/getUserMappingBySite\",\r\n                fecthInputObject: { nversioncode: this.templateVersionValue ? this.templateVersionValue.value : -1, userinfo: this.props.Login.userInfo },\r\n                unchangeList: [\"TreeVersion\", \"templateVersionValue\",\r\n                 \"Approvalsubtype\", \"approvalSubTypeValue\", \"RegistrationType\", \"registrationTypeValue\", \r\n                 \"RegistrationSubType\", \"registrationSubTypeValue\",\r\n                 \"realApprovalSubTypeValue\",\"realRegistrationTypeValue\",\"realRegistrationSubTypeValue\",\"realTemplateVersionValue\"],\r\n                masterData: this.props.Login.masterData\r\n            }\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteId)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, operation: \"delete\",\r\n                    openChildModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName })\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let graphView = this.props.Login.graphView;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n               \r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = undefined;\r\n                selectedRecord['esigncomments'] = undefined;\r\n                selectedRecord['esignreason']=undefined;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            graphView = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, graphView }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    };\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.multilingualError && props.Login.multilingualError !== \"\") {\r\n            toast.warn(props.intl.formatMessage({ id: props.Login.multilingualError }))\r\n            props.Login.multilingualError = \"\";\r\n        }\r\n        if (props.Login.dataState === undefined) {\r\n            props.Login.dataState = undefined;\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n\r\n    columnProps(field, nuserrolecode) {\r\n        return {\r\n            field: field,\r\n            columnMenu: ColumnMenu,\r\n            headerClassName: this.isColumnActive(field, this.state.dataState, nuserrolecode) ? 'active' : ''\r\n        };\r\n    }\r\n\r\n    isColumnActive(field, dataState, nuserrolecode) {\r\n        return GridColumnMenuFilter.active(field, dataState[nuserrolecode] ? dataState[nuserrolecode].filter : dataState['0'].filter)\r\n    }\r\n\r\n    getUserMapping = () => {\r\n        if (this.state.ApprovalsubtypeList.length>0) {\r\n           // this.searchRef.current.value = \"\"\r\n\r\n            // let approvalSubTypeValue = this.approvalSubTypeValue ? this.approvalSubTypeValue : this.state.ApprovalsubtypeList.length > 0 ? \r\n            //                             this.state.ApprovalsubtypeList[0] : -1;\r\n         \r\n            let masterData = {\r\n                ...this.props.Login.masterData,\r\n                realApprovalSubTypeValue: this.props.Login.masterData.approvalSubTypeValue  ? this.props.Login.masterData.approvalSubTypeValue : this.props.Login.masterData.realApprovalSubTypeValue?this.props.Login.masterData.realApprovalSubTypeValue: -1,\r\n                //realApprovalSubTypeValue: this.props.Login.masterData.approvalSubTypeValue?this.props.Login.masterData.approvalSubTypeValue.value === 1 ? this.props.Login.masterData.approvalSubTypeValue :this.props.Login.masterData.realApprovalSubTypeValue?this.props.Login.masterData.realApprovalSubTypeValue:-1:this.props.Login.masterData.realApprovalSubTypeValue,\r\n                realRegistrationTypeValue: this.props.Login.masterData.registrationTypeValue ? this.props.Login.masterData.registrationTypeValue : -1,\r\n                realRegistrationSubTypeValue: this.props.Login.masterData.registrationSubTypeValue ? this.props.Login.masterData.registrationSubTypeValue : -1,\r\n                //realTemplateVersionValue: this.props.Login.masterData.templateVersionValue ? this.props.Login.masterData.templateVersionValue : -1,\r\n                realTemplateVersionValue: this.props.Login.masterData.templateVersionValue ? this.props.Login.masterData.templateVersionValue : this.props.Login.masterData.realTemplateVersionValue?this.props.Login.masterData.realTemplateVersionValue: -1,\r\n\r\n            }\r\n       \r\n            let inputParamData = { \r\n                nFlag:6,\r\n                // napprovalsubtypecode: this.props.Login.masterData.approvalSubTypeValue.value,\r\n                napprovalsubtypecode:this.approvalSubTypeValue.value?this.approvalSubTypeValue.value:-1,\r\n                nregtypecode:  this.props.Login.masterData.registrationTypeValue.value ?  this.props.Login.masterData.registrationTypeValue.value : -1,\r\n                nregsubtypecode: this.props.Login.masterData.registrationSubTypeValue ? this.props.Login.masterData.registrationSubTypeValue.value : -1,\r\n                //ntemplatecode: this.props.Login.masterData.approvalSubTypeValue.item.ntemplatecode,\r\n                ntemplatecode: this.approvalSubTypeValue.item.ntemplatecode,\r\n               // nversioncode:  this.props.Login.masterData.templateVersionValue ?  this.props.Login.masterData.templateVersionValue.value : -1,\r\n                nversioncode: this.templateVersionValue.value?this.templateVersionValue.value:-1,\r\n                userinfo: this.props.Login.userInfo, \r\n                masterData ,\r\n                searchRef: this.searchRef\r\n            }\r\n            \r\n            if(inputParamData.napprovalsubtypecode > 0 &&  inputParamData.nregtypecode > 0 && inputParamData.nregsubtypecode > 0 && inputParamData.nversioncode > 0)\r\n            {\r\n                this.props.getUserMapping(inputParamData);\r\n            }\r\n            else\r\n            {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_PLSSELECTALLVALUESINFILTER\" }))\r\n            }\r\n           \r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_APPROVALSUBTYPENOTAVAILABLE\" }))\r\n        }\r\n    }\r\n\r\n\r\n    reloadData = () => {\r\n        // const inputParam = {\r\n        //     inputData: { \"userinfo\": this.props.Login.userInfo },\r\n        //     classUrl: \"usermapping\",\r\n        //     methodUrl: \"UserMapping\",\r\n        //     displayName: \"IDS_USERMAPPING\",\r\n        //     userInfo: this.props.Login.userInfo\r\n        // };\r\n\r\n        // this.props.callService(inputParam);\r\n        \r\n            if (this.props.Login.masterData.approvalSubTypeValue) {\r\n                //ALPD-4803 done by Dhanushya RI,To check searchref key is present or not\r\n                if (this.searchRef && this.searchRef.current) {\r\n                    this.searchRef.current.value = \"\";\r\n                  }                \r\n                let masterData = {\r\n                    ...this.props.Login.masterData,\r\n                    realApprovalSubTypeValue: this.props.Login.masterData.approvalSubTypeValue ? this.props.Login.masterData.approvalSubTypeValue : -1,\r\n                    realRegistrationTypeValue: this.props.Login.masterData.registrationTypeValue ? this.props.Login.masterData.registrationTypeValue : -1,\r\n                    realRegistrationSubTypeValue: this.props.Login.masterData.registrationSubTypeValue ? this.props.Login.masterData.registrationSubTypeValue : -1,\r\n                    realApprovalConfigCode: this.props.Login.masterData.approvalConfigCode || -1,\r\n                    realTreeVersionTemplateValue: this.props.Login.masterData.userroleTemplateValue || -1,\r\n    \r\n                }\r\n                const inputData = {\r\n                    napprovalsubtypecode: this.props.Login.masterData.approvalSubTypeValue ?\r\n                        this.props.Login.masterData.approvalSubTypeValue.value : -1,\r\n                    napprovalconfigcode: this.props.Login.masterData.approvalConfigCode,\r\n                    ntreeversiontempcode: this.props.Login.masterData.userroleTemplateValue.value,\r\n                    userinfo: this.props.Login.userInfo\r\n                }\r\n                let inputParamData = { inputData, masterData }\r\n                this.props.getApprovalConfigurationVersion(inputParamData);\r\n            } else {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_APPROVALSUBTYPENOTAVAILABLE\" }))\r\n            }\r\n    }\r\n\r\n    render() {\r\n       // loadMessages(messages[this.props.Login.userInfo.slanguagetypecode], \"lang\");\r\n        const extractedColumnList = [\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"Name\", \"width\": \"35%\" },\r\n            { \"idsName\": \"IDS_LOGINID\", \"dataField\": \"LoginId\", \"width\": \"35%\" },\r\n            { \"idsName\": \"IDS_DEPARTMENT\", \"dataField\": \"sdeptname\", \"width\": \"10%\" },\r\n        ]\r\n\r\n\r\n        const addId = this.state.controlMap.has(\"AddUserMapping\") && this.state.controlMap.get(\"AddUserMapping\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteUserMapping\") && this.state.controlMap.get(\"DeleteUserMapping\").ncontrolcode;\r\n        const copyId = this.state.controlMap.has(\"CopyUserMapping\") && this.state.controlMap.get(\"CopyUserMapping\").ncontrolcode;\r\n\r\n        //  let approvalSubTypes = this.props.Login.masterData.Approvalsubtype ? sortData(this.props.Login.masterData.Approvalsubtype, 'ascending', 'ntemplatecode') : [];\r\n        let approvalSubTypes = this.state.ApprovalsubtypeList ? this.state.ApprovalsubtypeList : [];\r\n        this.approvalSubTypeValue = this.props.Login.masterData.approvalSubTypeValue ?\r\n            this.props.Login.masterData.approvalSubTypeValue :\r\n            approvalSubTypes.length > 0 ? approvalSubTypes[0]: {};\r\n\r\n        this.templateVersionValue = this.props.Login.masterData.templateVersionValue ?\r\n            this.props.Login.masterData.templateVersionValue : this.props.Login.masterData.TreeVersion ? this.props.Login.masterData.TreeVersion.length > 0 ?\r\n                {\r\n                    value: this.props.Login.masterData.TreeVersion[0].ntreeversiontempcode,\r\n                    label: this.props.Login.masterData.TreeVersion[0].sversiondescription,\r\n                    item: this.props.Login.masterData.TreeVersion[0]\r\n                } : {} : {};\r\n        const userRole = this.props.Login.masterData.UserRole ? sortData(this.props.Login.masterData.UserRole, 'ascending', 'nlevelno') : []\r\n        const filterParam = {\r\n            inputListName: \"Site\",\r\n            selectedObject: \"selectedSite\",\r\n            primaryKeyField: \"nsitecode\",\r\n            searchFieldList: [\"ssitename\"],\r\n            fetchUrl: \"usermapping/getUserMappingBySite\",\r\n            fecthInputObject: { nversioncode: this.templateVersionValue ? this.templateVersionValue.value : -1, userinfo: this.props.Login.userInfo },\r\n            unchangeList: [\"TreeVersion\", \"templateVersionValue\",\r\n             \"Approvalsubtype\", \"approvalSubTypeValue\", \"RegistrationType\", \"registrationTypeValue\", \r\n             \"RegistrationSubType\", \"registrationSubTypeValue\",\r\n             \"realApprovalSubTypeValue\",\"realRegistrationTypeValue\",\"realRegistrationSubTypeValue\",\"realTemplateVersionValue\"],\r\n            masterData: this.props.Login.masterData\r\n        };\r\n        let mandatoryFields = [\r\n            { \"idsName\": \"IDS_USERS\", \"dataField\": \"nusercode\", \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        ];\r\n        if (this.props.Login.operation === 'copy') {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_REGISTRATIONTYPE\", \"dataField\": \"regtype\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                { \"idsName\": \"IDS_REGISTRATIONSUBTYPE\", \"dataField\": \"regsubtype\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"}\r\n            ]\r\n        }\r\n\r\n         let breadCrumbData = []\r\n         if (this.props.Login.masterData.realApprovalSubTypeValue && this.props.Login.masterData.realApprovalSubTypeValue.value === ApprovalSubType.TESTRESULTAPPROVAL) {\r\n         breadCrumbData = [\r\n                {\r\n                    \"label\": \"IDS_APPROVALSUBTYPE\",\r\n                    \"value\": this.props.Login.masterData.realApprovalSubTypeValue ? this.props.Login.masterData.realApprovalSubTypeValue.label : \"NA\"\r\n                },\r\n                {\r\n                    \"label\": \"IDS_REGISTRATIONTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegistrationTypeValue ? this.props.Login.masterData.realRegistrationTypeValue.label : \"NA\"\r\n                }, \r\n                {\r\n                    \"label\": \"IDS_REGISTRATIONSUBTYPE\",\r\n                    \"value\": this.props.Login.masterData.realRegistrationSubTypeValue ? this.props.Login.masterData.realRegistrationSubTypeValue.label : \"NA\"\r\n                }, \r\n                {\r\n                    \"label\": \"IDS_USERROLETEMPLATE\",\r\n                    \"value\": this.props.Login.masterData.realTemplateVersionValue ? this.props.Login.masterData.realTemplateVersionValue.label : \"NA\"\r\n                }\r\n             ];\r\n        } \r\n        else\r\n        {\r\n            breadCrumbData = [  {\r\n                \"label\": \"IDS_APPROVALSUBTYPE\",\r\n                \"value\": this.props.Login.masterData.realApprovalSubTypeValue ? this.props.Login.masterData.realApprovalSubTypeValue.label : \"NA\"\r\n            },\r\n            \r\n            {\r\n                \"label\": \"IDS_USERROLETEMPLATE\",\r\n                \"value\": this.props.Login.masterData.realTemplateVersionValue ? this.props.Login.masterData.realTemplateVersionValue.label : \"NA\"\r\n            }\r\n            ]\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n                <Affix top={53}>\r\n                        <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n                </Affix>\r\n                    <Row noGutters={true}>\r\n                        <Col md={`${!this.props.sidebarview ? '4' : \"2\"}`}> \r\n                            <ListMaster\r\n                                //filterColumnData ={(filterValue)=>this.props.filterApprovalConfigColumnData(filterValue,this.props.Login.masterData,this.props.Login.userInfo,this.approvalSubTypeValue.value)}\r\n                                masterData={this.props.Login.masterData}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                screenName={this.props.intl.formatMessage({ id: \"IDS_USERMAPPING\" })}\r\n                                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Site}\r\n                                getMasterDetail={(site) => this.props.getUserMappingBySite(site, this.templateVersionValue.value, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                selectedMaster={this.props.Login.masterData.selectedSite}\r\n                                primaryKeyField=\"nsitecode\"\r\n                                mainField=\"ssitename\"\r\n                                //firstField=\"ssiteaddress\"\r\n                                userRoleControlRights={this.state.userRoleControlRights}\r\n                                addId={-1}\r\n                                hidePaging={true}\r\n                                reloadData={this.getUserMapping}\r\n                                searchRef={this.searchRef}\r\n                                filterParam={filterParam}\r\n                                filterColumnData={this.props.filterColumnData}\r\n                                copyId={copyId}\r\n                                showCopy={this.approvalSubTypeValue.value === ApprovalSubType.TESTRESULTAPPROVAL}\r\n                                copyData={this.copyData}\r\n                                showGraphView={true}\r\n                                hideSearch={false}\r\n                                getGraphView={() => this.props.getUserMappingGraphView(this.props.Login.masterData.selectedSite, this.templateVersionValue.value, this.props.Login.userInfo)}\r\n                                needAccordianFilter={false}\r\n                                showFilterIcon={true}\r\n                                onFilterSubmit={this.getUserMapping}\r\n                                filterComponent={[\r\n                                    {\r\n                                        \"IDS_FILTER\":\r\n                                            <UserMappingFilter\r\n                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                filterComboChange={this.onFilterComboChange}\r\n                                                templateVersionOptions={this.state.templateVersionOptionList}\r\n                                                templateVersionValue={this.templateVersionValue}\r\n                                                Approvalsubtype={this.state.ApprovalsubtypeList}\r\n                                                approvalSubTypeValue={this.approvalSubTypeValue}\r\n                                                RegistrationType={this.state.RegistrationTypeList}\r\n                                                registrationTypeValue={this.props.Login.masterData.registrationTypeValue}\r\n                                                RegistrationSubType={this.state.RegistrationSubTypeList}\r\n                                                registrationSubTypeValue={this.props.Login.masterData.registrationSubTypeValue}\r\n                                            />\r\n                                    }\r\n                                ]}\r\n                            />\r\n                        </Col>\r\n                        <Col md={`${!this.props.sidebarview ? '8' : \"10\"}`} className=\"position-relative\">\r\n                            <div className=\"sidebar-view-btn-block\">\r\n                                <div className=\"sidebar-view-btn \" onClick={this.props.parentFunction}>\r\n                                    {!this.props.sidebarview ?                    \r\n                                        <i class=\"fa fa-less-than\"></i> :\r\n                                        <i class=\"fa fa-greater-than\"></i> \r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Row>\r\n                                    {userRole.map((role, index) =>\r\n                                        <Col md={12}>\r\n                                            <SearchAdd className=\"d-flex justify-content-between\">\r\n                                                <MediaHeader>\r\n                                                    <h4 style={{ fontWeight: \"bold\" }}>{role.suserrolename}</h4>\r\n                                                </MediaHeader>\r\n                                                <Button id={`adduser_${role.nuserrolecode}`} className=\"btn btn-circle solid-blue\" role=\"button\"\r\n                                                    hidden={this.state.userRoleControlRights.indexOf(addId) === -1}\r\n                                                    onClick={() => this.props.openUserMappingModal(role, this.props.Login.masterData.selectedSite.nsitecode,\r\n                                                        this.props.Login.masterData[`selectedUser_${role.nlevelno === 1 ? role.nuserrolecode : role.nparentrolecode}`],\r\n                                                        this.templateVersionValue.value, this.props.Login.userInfo,\r\n                                                        this.props.Login.masterData,\r\n                                                        userRole.filter(x => x.nuserrolecode === role.nparentrolecode).length > 0 ?\r\n                                                            userRole.filter(x => x.nuserrolecode === role.nparentrolecode)[0].suserrolename : \"\"\r\n                                                    )}>\r\n                                                    <FontAwesomeIcon icon={faPlus} title={this.props.intl.formatMessage({ id: \"IDS_ADD\" })} />\r\n                                                </Button>\r\n                                            </SearchAdd>\r\n                                            <Row>\r\n                                                <Col md={12}>\r\n                                                    {/* <ReactTooltip place=\"bottom\" id=\"tooltip-grid-wrap\" globalEventOff='click' /> */}\r\n                                                    <AtTableWrap className=\"at-list-table\" actionColWidth={this.props.actionColWidth ? this.props.actionColWidth : \"150px\"} >\r\n                                                        {/* <Tooltip openDelay={100} position=\"bottom\" tooltipClassName=\"ad-tooltip\" anchorElement=\"element\" parentTitle={true}> */}\r\n                                                        <LocalizationProvider language={this.props.Login.userInfo.slanguagetypecode}>\r\n                                                            <Grid\r\n                                                                key={role.nuserrolecode}\r\n                                                                data={this.state.dataResult[`${role.nuserrolecode}`]}\r\n\r\n                                                                onRowClick={(user) => this.props.getChildUsers(user.dataItem, role, this.props.Login.masterData.selectedSite.nsitecode, this.templateVersionValue.value,\r\n                                                                    this.props.Login.userInfo, this.props.Login.masterData, this.state.dataState, userRole)}\r\n                                                                selectedField=\"selected\"\r\n                                                                style={{ minHeight: '20em' }}\r\n                                                                onDataStateChange={(event) => this.dataStateChange(event, role.nuserrolecode)}\r\n                                                                resizable={true}\r\n                                                                reorderable\r\n                                                                scrollable\r\n                                                                sortable\r\n                                                                pageable={{ buttonCount: 2, pageSizes: this.props.Login.settings && this.props.Login.settings[15].split(\",\").map(setting => parseInt(setting)), previousNext: false }}\r\n                                                                {...this.state.dataState[role.nuserrolecode] ? this.state.dataState[role.nuserrolecode] : this.state.dataState['0']}\r\n\r\n                                                            >\r\n\r\n                                                                {extractedColumnList.map((item, key) =>\r\n                                                                    <GridColumn key={key} title={this.props.intl.formatMessage({ id: item.idsName })}\r\n                                                                        field={item.dataField}\r\n                                                                        {...this.columnProps(item.dataField, role.nuserrolecode)}\r\n                                                                        cell={(row) => (\r\n                                                                            <td data-tip={row[\"dataItem\"][item.dataField]}\r\n                                                                           //  data-for=\"tooltip-grid-wrap\" \r\n                                                                             className={this.props.Login.masterData[`selectedUser_${role.nuserrolecode}`].nusermappingcode === row[\"dataItem\"]['nusermappingcode'] ? 'active' : ''}>\r\n                                                                                {row[\"dataItem\"][item.dataField]}\r\n                                                                            </td>)}\r\n                                                                    />\r\n                                                                )}\r\n                                                                <GridColumn locked headerClassName=\"text-center\" sort={false} title={this.props.intl.formatMessage({ id: 'IDS_ACTION' })}\r\n                                                                    cell={(row) => (\r\n                                                                        <td>\r\n                                                                            <Nav.Link className=\"action-icons-wrap text-center\">\r\n                                                                                <FontIconWrap className=\"d-font-icon\"\r\n                                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })} data-place=\"left\"\r\n                                                                                title={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}>\r\n                                                                                    <ConfirmDialog\r\n                                                                                        name=\"deleteMessage\"\r\n                                                                                        message={this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" })}\r\n                                                                                        doLabel={this.props.intl.formatMessage({ id: \"IDS_OK\" })}\r\n                                                                                        doNotLabel={this.props.intl.formatMessage({ id: \"IDS_CANCEL\" })}\r\n                                                                                        icon={faTrashAlt}\r\n                                                                                        // title={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                                                        hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                                        handleClickDelete={() => this.deleteUsers(deleteId, row['dataItem'].nusermappingcode, row['dataItem'].nparusermappingcode, role)}\r\n                                                                                    />\r\n                                                                                </FontIconWrap>\r\n                                                                                {userRole.length - 1 === index ? \"\" :\r\n                                                                                    <FontIconWrap className=\"d-font-icon\" \r\n                                                                                    onClick={() => this.props.getUserMappingGraphView(\r\n                                                                                        this.props.Login.masterData.selectedSite, this.templateVersionValue.value,\r\n                                                                                        this.props.Login.userInfo, row['dataItem'], role)}\r\n                                                                                    data-tip={this.props.intl.formatMessage({ id: \"IDS_GRAPH\" })} data-place=\"left\"\r\n                                                                                    title={this.props.intl.formatMessage({ id: \"IDS_GRAPH\" })}>\r\n                                                                                        <FontAwesomeIcon icon={faSitemap} className=\"fa-rotate-270\"\r\n                                                                                            // onClick={() => this.props.getUserMappingGraphView(\r\n                                                                                            //     this.props.Login.masterData.selectedSite, this.templateVersionValue.value,\r\n                                                                                            //     this.props.Login.userInfo, row['dataItem'], role)}\r\n                                                                                        // title={this.props.intl.formatMessage({ id: \"IDS_GRAPH\" })}\r\n                                                                                        />\r\n                                                                                    </FontIconWrap>\r\n                                                                                }\r\n                                                                            </Nav.Link>\r\n                                                                        </td>\r\n                                                                    )}\r\n                                                                />\r\n                                                            </Grid>\r\n                                                        </LocalizationProvider>\r\n                                                        {/* </Tooltip> */}\r\n                                                    </AtTableWrap>\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </Col>\r\n                                    )\r\n                                    }\r\n                                </Row>\r\n                            </ContentPanel>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n                {this.props.Login.openChildModal ?\r\n                    <SlideOutModal\r\n                        onSaveClick={this.onSaveClick}\r\n                        operation={this.props.Login.operation}\r\n                        screenName={this.props.Login.graphView ? \"IDS_USERMAPPING\" : this.props.Login.childRoleName || \"IDS_USERMAPPING\"}\r\n                        closeModal={this.closeModal}\r\n                        show={this.props.Login.openChildModal}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        graphView={this.props.Login.graphView}\r\n                        size={this.props.Login.graphView ? 'xl' : 'lg'}\r\n                        addComponent={\r\n                            this.props.Login.loadEsign ?\r\n                                <Esign\r\n                                    operation={this.props.Login.operation}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                />\r\n                                : this.props.Login.operation === 'copy' ?\r\n\r\n                                    <Row>\r\n                                        <Col md={12}>\r\n                                            {this.approvalSubTypeValue.value === ApprovalSubType.TESTRESULTAPPROVAL ?\r\n                                                <>\r\n                                                    {this.props.Login.optCopyRegType ?\r\n                                                        <FormSelectSearch\r\n                                                            formLabel={this.props.intl.formatMessage({ id: \"IDS_REGISTRATIONTYPE\" })}\r\n                                                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                                            name=\"regtype\"\r\n                                                            optionId=\"nregtypecode\"\r\n                                                            optionValue=\"sregtypename\"\r\n                                                            options={this.props.Login.optCopyRegType}\r\n                                                            value={this.state.selectedRecord ? this.state.selectedRecord[\"regtype\"] : this.registrationTypeValue}\r\n                                                            onChange={(event) => this.onComboChange(event, 'regtype')}\r\n                                                            isMandatory={false}\r\n                                                            isMulti={false}\r\n                                                            isSearchable={true}\r\n                                                            isDisabled={false}\r\n                                                        />\r\n                                                        : \"\"}\r\n                                                    {this.props.Login.optCopyRegSubType ?\r\n                                                        <FormSelectSearch\r\n                                                            formLabel={this.props.intl.formatMessage({ id: \"IDS_REGISTRATIONSUBTYPE\" })}\r\n                                                            placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                                            name=\"regsubtype\"\r\n                                                            optionId=\"nregsubtypecode\"\r\n                                                            optionValue=\"sregsubtypename\"\r\n                                                            options={this.props.Login.optCopyRegSubType}\r\n                                                            value={this.state.selectedRecord && this.state.selectedRecord[\"regsubtype\"]}\r\n                                                            isMandatory={false}\r\n                                                            isMulti={false}\r\n                                                            isSearchable={true}\r\n                                                            isDisabled={false}\r\n                                                            onChange={(event) => this.onComboChange(event, 'regsubtype')}\r\n\r\n                                                        />\r\n                                                        : \"\"}\r\n                                                </>\r\n                                                : \"\"}\r\n                                        </Col>\r\n                                    </Row>\r\n                                    : this.props.Login.graphView ?\r\n                                        <UserTree\r\n                                            userRoleList={this.state.userRoleList}\r\n                                            userList={this.state.userList}\r\n                                            data={this.state.data}\r\n                                            expanded={this.state.expanded}\r\n                                            collapseAll={this.collapseAll}\r\n                                            selectedRecord={this.state.selectedRecord}\r\n                                            clearFilter={this.clearFilter}\r\n                                            filterTree={this.filterTree}\r\n                                            userSearchFilterChange={this.userSearchFilterChange}\r\n                                            a={this.state.a}\r\n                                            b={this.state.b}\r\n                                            scale={this.state.scale}\r\n                                            handlePanAndZoom={this.handlePanAndZoom}\r\n                                            handlePanMove={this.handlePanMove}\r\n                                            hideFilters={this.props.Login.hideFilters}\r\n                                        />\r\n                                        :\r\n                                        <Row>\r\n                                            <Col md={12}>\r\n                                                <FormSelectSearch\r\n                                                    name={'users'}\r\n                                                    formLabel={this.props.Login.childRoleName}//{this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\r\n                                                    // placeholder={this.props.Login.childRoleName}//{this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\r\n                                                    placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                                    value={this.state.selectedRecord ? this.state.selectedRecord.nusercode ? this.state.selectedRecord.nusercode : [] : []}\r\n                                                    options={this.props.Login.AvailableUsers ? this.props.Login.AvailableUsers : []}\r\n                                                    optionId=\"id\"\r\n                                                    optionValue=\"Name\"\r\n                                                    isMandatory={true}\r\n                                                    isMulti={true}\r\n                                                    isDisabled={false}\r\n                                                    isSearchable={true}\r\n                                                    closeMenuOnSelect={false}\r\n                                                    isClearable={true}\r\n                                                    as={\"select\"}\r\n                                                    onChange={(event) => this.onComboChange(event, 'nusercode')}\r\n                                                />\r\n                                            </Col>\r\n                                        </Row>\r\n                        }\r\n                    /> : \"\"}\r\n            </>\r\n        )\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        ReactTooltip.rebuild();\r\n        let { selectedRecord, dataState, userRoleControlRights, controlMap, ApprovalsubtypeList, data, dataResult,\r\n            RegistrationTypeList, RegistrationSubTypeList, templateVersionOptionList, userRoleList } = this.state;\r\n        let updateState = false;\r\n\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            //this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n            selectedRecord = this.props.Login.selectedRecord;\r\n            updateState = true;\r\n        }\r\n        if (this.props.Login.userTree !== previousProps.Login.userTree) {\r\n            let filter = selectedRecord.filteredUser ? true : false\r\n            if (this.props.Login.selectedTreeParent !== undefined) {\r\n                let status = true;\r\n                this.props.Login.selectedTreeParent.suserimgftp !== null && this.props.Login.files && this.props.Login.files.includes(this.props.Login.selectedTreeParent.suserimgftp)\r\n                    ? status = true : status = false\r\n                let element = this.props.Login.selectedTreeParent\r\n                data = {\r\n                    id: this.props.Login.selectedTreeParent.nusermappingcode,\r\n                    label:\r\n                        <div style={{ userSelect: 'none' }}>\r\n                            <AtHeader>\r\n                                <Media>\r\n                                    {status && this.props.Login.settings && this.props.Login.settings[5] && element.suserimgftp && element.suserimgftp !== \"\" ?\r\n                                        <Image src={this.props.Login.settings[5] + element.suserimgftp} alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                                        : <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                            {\r\n                                                background: \"#e7e6f5\",\r\n                                                borderRadius: \"50%\",\r\n                                                border: \"1px solid #cbc5f7\",\r\n                                                color: \"#6554c0\",\r\n                                                padding: \"3px\"\r\n                                            }} >\r\n                                            {element.username && element.username.split(\" \").length > 1 ?\r\n                                                element.username.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                element.username.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                            :\r\n                                                element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                            }\r\n                                        </span>\r\n                                    }\r\n                                    <Media.Body>\r\n                                        <span className=\"user-name\">{element.username}</span>\r\n                                        <span className=\"role\" style={{ paddingTop: \"3px\" }}>{element.suserrolename}</span>\r\n                                    </Media.Body>\r\n                                </Media>\r\n                            </AtHeader>\r\n                        </div>,\r\n                    children: this.getRoottree(this.props.Login.userTree || [], this.props.Login.selectedTreeParent.nusermappingcode, false)\r\n                }\r\n\r\n            } else {\r\n                let siteName = this.props.Login.masterData.selectedSite ? this.props.Login.masterData.selectedSite.ssitename : \"\"\r\n                data = {\r\n                    id: 0,\r\n                    label:\r\n                        <div>\r\n                            <AtHeader>\r\n                                <Media>\r\n                                    <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                        {\r\n                                            background: \"#e7e6f5\",\r\n                                            borderRadius: \"50%\",\r\n                                            border: \"1px solid #cbc5f7\",\r\n                                            color: \"#6554c0\",\r\n                                            padding: \"3px\"\r\n                                        }} >\r\n                                        {\r\n                                            siteName.split(\" \").length > 1 ?\r\n                                                siteName.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                siteName.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                                :\r\n                                                siteName.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                        }\r\n                                    </span>\r\n                                    <Media.Body>\r\n\r\n                                        <span className=\"role\" style={{ paddingTop: \"6px\" }}>{siteName}</span>\r\n                                    </Media.Body>\r\n                                </Media>\r\n                            </AtHeader>\r\n                        </div>,\r\n                    children: this.getRoottree(this.props.Login.userTree || [], -2, filter, selectedRecord.filteredUser, selectedRecord.filteredRole)\r\n                }\r\n            }\r\n            updateState = true;\r\n        }\r\n        if (this.props.Login.dataState !== previousProps.Login.dataState) {\r\n            if (this.props.Login.dataState === undefined) {\r\n                // this.setState({ dataState: { '0': this.state.dataState['0'] } })\r\n                dataState = { '0': this.state.dataState['0'] }\r\n                updateState = true;\r\n            } else {\r\n                // this.setState({ dataState: this.props.Login.dataState ? this.props.Login.dataState : this.state.dataState['0'] });\r\n                dataState =  this.props.Login.dataState ? {...this.props.Login.dataState} : {'0':this.state.dataState['0'] }\r\n                updateState = true;\r\n            }\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            updateState = true;\r\n            const userMap = constructOptionList(this.props.Login.masterData.UserRole || [], \"nuserrolecode\", \"suserrolename\", undefined, undefined, true);\r\n            userRoleList = userMap.get(\"OptionList\");\r\n\r\n            const RegistrationTypeListMap = constructOptionList(this.props.Login.masterData.RegistrationType || [], \"nregtypecode\", \"sregtypename\", 'nregtypecode', 'ascending', false);\r\n            const RegistrationSubTypeListMap = constructOptionList(this.props.Login.masterData.RegistrationSubType || [], \"nregsubtypecode\", \"sregsubtypename\", 'nregsubtypecode', 'ascending', false);\r\n            const templateVersionOptionListMap = constructOptionList(this.props.Login.masterData.TreeVersion || [], \"ntreeversiontempcode\", \"sversiondescription\", 'ntreeversiontempcode', 'decending', false);\r\n\r\n            RegistrationTypeList = RegistrationTypeListMap.get(\"OptionList\");\r\n            RegistrationSubTypeList = RegistrationSubTypeListMap.get(\"OptionList\");\r\n            templateVersionOptionList = templateVersionOptionListMap.get(\"OptionList\");\r\n\r\n\r\n        }\r\n        if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n            userRoleControlRights = [];\r\n            if (this.props.Login.userRoleControlRights) {\r\n                this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                    userRoleControlRights.push(item.ncontrolcode))\r\n            }\r\n            controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n            const ApprovalsubtypeListMap = constructOptionList(this.props.Login.masterData.Approvalsubtype || [], \"napprovalsubtypecode\", \"ssubtypename\", 'ntemplatecode', 'ascending', false);\r\n            const RegistrationTypeListMap = constructOptionList(this.props.Login.masterData.RegistrationType || [], \"nregtypecode\", \"sregtypename\", 'nregtypecode', 'ascending', false);\r\n            const RegistrationSubTypeListMap = constructOptionList(this.props.Login.masterData.RegistrationSubType || [], \"nregsubtypecode\", \"sregsubtypename\", 'nregsubtypecode', 'ascending', false);\r\n            const templateVersionOptionListMap = constructOptionList(this.props.Login.masterData.TreeVersion || [], \"ntreeversiontempcode\", \"sversiondescription\", 'ntreeversiontempcode', 'decending', false);\r\n            ApprovalsubtypeList = ApprovalsubtypeListMap.get(\"OptionList\");\r\n            RegistrationTypeList = RegistrationTypeListMap.get(\"OptionList\");\r\n            RegistrationSubTypeList = RegistrationSubTypeListMap.get(\"OptionList\");\r\n            templateVersionOptionList = templateVersionOptionListMap.get(\"OptionList\");\r\n            //this.setState({userRoleControlRights, controlMap, ApprovalsubtypeList, RegistrationTypeList, RegistrationSubTypeList, templateVersionOptionList});\r\n            updateState = true;\r\n        }\r\n\r\n        if (updateState) {\r\n            const userRole = this.props.Login.masterData.UserRole ? sortData(this.props.Login.masterData.UserRole, 'ascending', 'nlevelno') : []\r\n            userRole.map(role =>\r\n                {\r\n                    let roleUsers = this.props.Login.masterData[`${role.nuserrolecode}`] ? sortData(this.props.Login.masterData[`${role.nuserrolecode}`],'descending','nusermappingcode'): []\r\n                    dataResult[`${role.nuserrolecode}`]=process(roleUsers.map(item => \r\n                            (\r\n                                { \r\n                                    ...item, \r\n                                    selected: item.nusermappingcode === this.props.Login.masterData[`selectedUser_${role.nuserrolecode}`].nusermappingcode \r\n                                }\r\n                            )\r\n                        )\r\n                    , dataState[role.nuserrolecode] ? dataState[role.nuserrolecode] : dataState['0'])\r\n                    return null;\r\n                })\r\n            this.setState({\r\n                selectedRecord, dataState, userRoleControlRights, controlMap, ApprovalsubtypeList, data,\r\n                RegistrationTypeList, RegistrationSubTypeList, templateVersionOptionList, userRoleList\r\n            });\r\n        }\r\n    }\r\n\r\n    onComboChange = (comboData, comboName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData && comboName === \"regtype\") {\r\n            selectedRecord[comboName] = comboData;\r\n            let nregsubtypecode = this.props.Login.masterData.registrationSubTypeValue.value\r\n            this.props.getCopyUserMappingSubType(comboData, nregsubtypecode, selectedRecord, this.props.Login.userInfo, this.props.Login.masterData, this.props.Login.optCopyRegType)\r\n        } else {\r\n            if (comboData) {\r\n                selectedRecord[comboName] = comboData;\r\n                this.setState({ selectedRecord });\r\n            } else {\r\n                selectedRecord[comboName] = []\r\n                this.setState({ selectedRecord, availableQB: [] });\r\n            }\r\n        }\r\n    }\r\n\r\n    onFilterComboChange = (comboData, fieldName) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n\r\n        let registrationTypeValue = this.props.Login.masterData.registrationTypeValue;\r\n        let registrationSubTypeValue = this.props.Login.masterData.registrationSubTypeValue;\r\n        let templateVersionValue = this.props.Login.masterData.templateVersionValue;\r\n\r\n        if (comboData) {\r\n\r\n            selectedRecord[fieldName] = comboData.value;\r\n            let inputParamData = {};\r\n            if (fieldName === 'napprovalsubtypecode') {\r\n\r\n                this.approvalSubTypeValue = comboData\r\n                inputParamData = {\r\n                    nFlag: 2,\r\n                    napprovalsubtypecode: comboData.value,\r\n                    ntemplatecode: comboData.item.ntemplatecode,\r\n                    userinfo: this.props.Login.userInfo\r\n                };\r\n\r\n            } else if (fieldName === 'nregtypecode') {\r\n\r\n                registrationTypeValue = comboData\r\n                inputParamData = {\r\n                    nFlag: 3,\r\n                    napprovalsubtypecode: this.approvalSubTypeValue.value,\r\n                    ntemplatecode: this.approvalSubTypeValue.item.ntemplatecode,\r\n                    nregtypecode: comboData.value,\r\n                    userinfo: this.props.Login.userInfo\r\n                }\r\n\r\n            } else if (fieldName === 'nregsubtypecode') {\r\n\r\n                registrationSubTypeValue = comboData\r\n                inputParamData = {\r\n                    nFlag: 4,\r\n                    napprovalsubtypecode: this.approvalSubTypeValue.value,\r\n                    nregtypecode: registrationTypeValue.value,\r\n                    nregsubtypecode: comboData.value,\r\n                    ntemplatecode: this.approvalSubTypeValue.item.ntemplatecode,\r\n                    userinfo: this.props.Login.userInfo\r\n                }\r\n            } else {\r\n\r\n                this.templateVersionValue = comboData\r\n                templateVersionValue = comboData\r\n                inputParamData = {\r\n                    nFlag: 5,\r\n                    napprovalsubtypecode: this.approvalSubTypeValue.value,\r\n                    nregtypecode: this.approvalSubTypeValue.value === 2 ? registrationTypeValue.value : -1,\r\n                    nregsubtypecode: this.approvalSubTypeValue.value === 2 ? registrationSubTypeValue.value : -1,\r\n                    ntemplatecode: this.approvalSubTypeValue.item.ntemplatecode,\r\n                    nversioncode: comboData.value,\r\n                    userinfo: this.props.Login.userInfo\r\n                }\r\n            }\r\n\r\n            const oldState = {\r\n                Approvalsubtype: this.props.Login.masterData.Approvalsubtype,\r\n                RegistrationType: this.props.Login.masterData.RegistrationType,\r\n                RegistrationSubType: this.props.Login.masterData.RegistrationSubType,\r\n                TreeVersion: this.props.Login.masterData.TreeVersion,\r\n                approvalSubTypeValue: this.approvalSubTypeValue,\r\n                registrationTypeValue,\r\n                registrationSubTypeValue,\r\n                templateVersionValue,\r\n                RegistrationTypeList: this.state.RegistrationTypeList,\r\n                RegistrationSubTypeList: this.state.RegistrationSubTypeList,\r\n                templateVersionOptionList: this.state.templateVersionOptionList\r\n            }\r\n            this.props.getUserMappingFilterChange(inputParamData, oldState, this.props.Login.masterData)\r\n\r\n        } else {\r\n            selectedRecord[fieldName] = \"\";\r\n            if (fieldName === 'napprovalsubtypecode') {\r\n\r\n                this.approvalSubTypeValue = []\r\n                registrationTypeValue = []\r\n                registrationSubTypeValue = []\r\n                templateVersionValue = []\r\n\r\n            } else if (fieldName === 'nregtypecode') {\r\n\r\n                registrationTypeValue = []\r\n                registrationSubTypeValue = []\r\n                templateVersionValue = []\r\n\r\n            } else if (fieldName === 'nregsubtypecode') {\r\n\r\n                registrationSubTypeValue = []\r\n                templateVersionValue = []\r\n\r\n            } else {\r\n                templateVersionValue = []\r\n                this.templateVersionValue = []\r\n            }\r\n            this.setState({ selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    changeViewMode = (event) => {\r\n        event.target.checked === true ? this.setState({ viewMode: \"Grid\" }) : this.setState({ viewMode: \"List\" })\r\n    }\r\n\r\n    copyData = () => {\r\n        let napprovalsubtypecode = this.approvalSubTypeValue.value\r\n        let nregsubtypecode = this.props.Login.masterData.registrationSubTypeValue.value;\r\n\r\n        this.props.getCopyUserMapping(napprovalsubtypecode, nregsubtypecode, this.props.Login.userInfo, this.props.Login.masterData)\r\n    }\r\n\r\n   \r\n\r\n    userSearchFilterChange = (comboData, comboName) => {\r\n        let { selectedRecord, userList } = this.state || [];\r\n        if (comboData) {\r\n            if (comboName === 'nuserrolecode') {\r\n                let roleUsers = []\r\n                this.props.Login.userTree.map(x => {\r\n                    if (x.nchildrolecode === comboData.value && !roleUsers.find(y => y.nchildusercode === x.nchildusercode)) {\r\n                        roleUsers.push(x)\r\n                    }\r\n                    return null\r\n                }\r\n                )\r\n                const userMap = constructOptionList(roleUsers, \"nusermappingcode\", \"username\", undefined, undefined, true);\r\n                userList = userMap.get(\"OptionList\");\r\n                selectedRecord[\"filteredRole\"] = comboData;\r\n                selectedRecord[\"filteredUser\"] = null\r\n            } else {\r\n                selectedRecord[\"filteredUser\"] = comboData\r\n            }\r\n        } else {\r\n            if (comboName === 'nuserrolecode') {\r\n                selectedRecord[\"filteredRole\"] = comboData;\r\n                selectedRecord[\"filteredUser\"] = null\r\n                userList = []\r\n            } else {\r\n                selectedRecord[\"filteredUser\"] = comboData\r\n            }\r\n        }\r\n        this.setState({ selectedRecord, userList })\r\n    }\r\n\r\n    getRoottree(master, parent, filter, user, role) {\r\n        let child = []\r\n        this.child = []\r\n        let userTree = this.props.Login.userTree ? this.props.Login.userTree : []\r\n        let fiteredUserParentRole = []\r\n        let fiteredUserParentUser = []\r\n        let filteredUser = this.state.selectedRecord.filteredUser || user\r\n        let filteredRole = this.state.selectedRecord.filteredRole || role\r\n        if (filter) {\r\n            this.props.Login.userTree.map(y => {\r\n                if (filteredRole && y.nchildrolecode === filteredRole.value &&\r\n                    y.nchildusercode === filteredUser.item.nchildusercode) {\r\n                    fiteredUserParentRole.push(y.nparentrolecode)\r\n                }\r\n                if (y.nchildusercode === filteredUser.item.nchildusercode) {\r\n                    fiteredUserParentUser.push(y.nparentusercode)\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        userTree.forEach((element, index) => {\r\n            const labelColor = ['#e63109', '#2fb47d', '#eaa203', '#6554c0'];\r\n            const labelBGColor = ['#fcd7cd', '#e5f8f1', '#fcf3dd', '#e7e6f5'];\r\n            const borderColor = ['#e6310', '#c6f6e4', '#fde2a4', '#cbc5f7'];\r\n\r\n            if (element.nparusermappingcode === parent) {\r\n                let status = true;\r\n                element.suserimgftp !== null && this.props.Login.files && this.props.Login.files.includes(element.suserimgftp) ? status = true : status = false\r\n                if (filteredRole && element.nchildrolecode === filteredRole.value) {\r\n                    if (filteredUser && element.nchildusercode === filteredUser.item.nchildusercode) {\r\n                        child.push(\r\n                            {\r\n                                id: element.nusermappingcode,\r\n                                label:\r\n                                    <div style={{ userSelect: 'none' }}>\r\n                                        <AtHeader>\r\n                                            <Media>\r\n                                                {status && this.props.Login.settings && this.props.Login.settings[5] && element.suserimgftp && element.suserimgftp !== \"\" ?\r\n                                                    <Image src={this.props.Login.settings[5] + element.suserimgftp} alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                                                    : <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                                        {\r\n                                                            background: labelBGColor[index % 4],\r\n                                                            borderRadius: \"50%\",\r\n                                                            border: `1px solid ${borderColor[index % 4]}`,\r\n                                                            color: labelColor[index % 4],\r\n                                                            padding: \"3px\"\r\n                                                        }} >\r\n                                                        {element.username &&\r\n                                                            // element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                            element.username.split(\" \").length > 1 ?\r\n                                                            element.username.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                            element.username.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                                            :\r\n                                                            element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                        }\r\n                                                    </span>\r\n                                                }\r\n                                                <Media.Body>\r\n                                                    <span className=\"user-name\">{element.username}</span>\r\n                                                    <span className=\"role\" style={{ paddingTop: \"3px\" }}>{element.suserrolename}</span>\r\n                                                </Media.Body>\r\n                                            </Media>\r\n                                        </AtHeader>\r\n                                    </div>,\r\n                                children: this.getRoottree(this.props.Login.userTree, element.nusermappingcode, filter, user, role)\r\n                            }\r\n                        )\r\n                    }\r\n                }\r\n                else {\r\n\r\n                    child.push(\r\n                        {\r\n                            id: element.nusermappingcode,\r\n                            label:\r\n                                <div style={{ userSelect: 'none' }}>\r\n                                    {/* <Row>\r\n                                        <Col className=\"p-1 pl-2\" md={3}>\r\n                                            {status ?\r\n                                                < Image\r\n                                                    src={fileViewUrl + \"/SharedFolder/\" + element.suserimgftp}\r\n                                                    alt={\"userimg\"}\r\n                                                    title={element.suserimgname}\r\n                                                    // onError={this.addDefaultSrc}\r\n                                                    style={{ maxWidth: \"50px\", maxHeight: \"50px\" }}\r\n                                                />\r\n                                                :\r\n                                                <span className={`mr-3 label-circle ${labelColor[index % 4]}`} style={\r\n                                                    {\r\n                                                        background: labelBGColor[index % 4],\r\n                                                        borderRadius: \"50%\",\r\n                                                        border: `1px solid ${borderColor[index % 4]}`,\r\n                                                        color: labelColor[index % 4],\r\n                                                        fontSize: \"23px\",\r\n                                                        fontWeight: \"300\",\r\n                                                        padding: \"3px\"\r\n                                                    }} >\r\n                                                    {element.username &&\r\n                                                        // element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                        element.username.split(\" \").length > 1 ?\r\n                                                        element.username.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                        element.username.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                                        :\r\n                                                        element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                    }\r\n                                                </span>\r\n\r\n                                            }\r\n                                        </Col>\r\n                                        <Col md={9}>\r\n                                            <span className=\"d-flex ml-3\">\r\n                                                {element.username}\r\n                                                <br />\r\n                                                {element.suserrolename}\r\n                                            </span>\r\n                                        </Col>\r\n                                    </Row> */}\r\n                                    <AtHeader>\r\n                                        <Media>\r\n                                            {status && this.props.Login.settings && this.props.Login.settings[5] && element.suserimgftp && element.suserimgftp !== \"\" ?\r\n                                                <Image src={this.props.Login.settings[5] + element.suserimgftp} alt=\"avatar\" className=\"img-profile rounded-circle mr-2\" />\r\n                                                : <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                                    {\r\n                                                        background: labelBGColor[index % 4],\r\n                                                        borderRadius: \"50%\",\r\n                                                        border: `1px solid ${borderColor[index % 4]}`,\r\n                                                        color: labelColor[index % 4],\r\n                                                        padding: \"3px\"\r\n                                                    }} >\r\n                                                    {element.username &&\r\n                                                        // element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                        element.username.split(\" \").length > 1 ?\r\n                                                        element.username.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                        element.username.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                                        :\r\n                                                        element.username.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                                    }\r\n                                                </span>\r\n                                            }\r\n                                            <Media.Body>\r\n                                                <span className=\"user-name\">{element.username}</span>\r\n                                                <span className=\"role\" style={{ paddingTop: \"3px\" }}>{element.suserrolename}</span>\r\n                                            </Media.Body>\r\n                                        </Media>\r\n                                    </AtHeader>\r\n                                </div>,\r\n                            children: this.getRoottree(this.props.Login.userTree, element.nusermappingcode, filter, user, role)\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        })\r\n        return child\r\n    }\r\n\r\n    addDefaultSrc(ev) {\r\n        ev.target.src = fileViewUrl() + \"/SharedFolder/Default-User-Image.png\"\r\n    }\r\n\r\n    // getchildtree(master, parent, child) {\r\n    //     this.props.Login.userTree && this.props.Login.userTree.forEach(element => {\r\n    //         if (element.nparusermappingcode === parent) {\r\n    //             this.child.push(\r\n    //                 {\r\n    //                     id: element.nusermappingcode,\r\n    //                     label:\r\n    //                         <div className=\"d-flex justify-content-between\" style={{ userSelect: 'none' }}>\r\n    //                             <Row>\r\n    //                                 <Col md={12}>\r\n    //                                     {element.suserimgftp === null ?\r\n    //                                         <FontAwesomeIcon icon={faUserAlt}></FontAwesomeIcon> :\r\n    //                                         <img\r\n    //                                             src={fileViewUrl + \"/SharedFolder////\" + element.suserimgftp}\r\n    //                                             alt={\"userimg\"}\r\n    //                                             // onClick={() => window.open(signImgPath, '_blank')}\r\n    //                                             title={element.suserimgname}\r\n    //                                             style={{ borderRadius: \"50%\", width: \"30px\" }}\r\n    //                                         />\r\n    //                                     }\r\n    //                                 </Col>\r\n    //                                 <Col md={11}>\r\n    //                                     {element.username} <br /> {element.suserrolename}\r\n    //                                 </Col>\r\n    //                             </Row>\r\n    //                         </div>,\r\n    //                     children: this.getchildtree(this.props.Login.userTree, element.nusermappingcode)\r\n    //                 }\r\n    //             )\r\n    //         }\r\n    //     })\r\n    //     return child;\r\n    // }\r\n\r\n    filterTree = () => {\r\n        if (this.state.selectedRecord.filteredRole) {\r\n            if (this.state.selectedRecord.filteredUser) {\r\n                let siteName = this.props.Login.masterData.selectedSite ? this.props.Login.masterData.selectedSite.ssitename : \"\"\r\n                let data = {\r\n                    id: 0,\r\n                    label:\r\n                        <div>\r\n                            <AtHeader>\r\n                                <Media>\r\n                                    <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                        {\r\n                                            background: \"#e7e6f5\",\r\n                                            borderRadius: \"50%\",\r\n                                            border: \"1px solid #cbc5f7\",\r\n                                            color: \"#6554c0\",\r\n                                            padding: \"3px\"\r\n                                        }} >\r\n                                        {\r\n                                            siteName.split(\" \").length > 1 ?\r\n                                                siteName.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                                siteName.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                                :\r\n                                                siteName.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                        }\r\n                                    </span>\r\n                                    <Media.Body>\r\n\r\n                                        <span className=\"role\" style={{ paddingTop: \"6px\" }}>{siteName}</span>\r\n                                    </Media.Body>\r\n                                </Media>\r\n                            </AtHeader>\r\n                        </div>,\r\n                    children: this.getRoottree(this.props.Login.userTree || [], -2, true)\r\n                }\r\n\r\n                this.setState({ data })\r\n            } else {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTAUSERTOSEARCH\" }))\r\n            }\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTAUSERROLETOSEARCH\" }))\r\n        }\r\n    }\r\n\r\n    clearFilter = () => {\r\n\r\n        let { selectedRecord, userList } = this.state\r\n        selectedRecord[\"filteredUser\"] = null\r\n        selectedRecord[\"filteredRole\"] = null\r\n        userList = []\r\n        let siteName = this.props.Login.masterData.selectedSite ? this.props.Login.masterData.selectedSite.ssitename : \"\"\r\n        let data = {\r\n            id: 0,\r\n            label:\r\n                <div>\r\n                    <AtHeader>\r\n                        <Media>\r\n                            <span className=\"img-profile rounded-circle mr-2\" style={\r\n                                {\r\n                                    background: \"#e7e6f5\",\r\n                                    borderRadius: \"50%\",\r\n                                    border: \"1px solid #cbc5f7\",\r\n                                    color: \"#6554c0\",\r\n                                    padding: \"3px\"\r\n                                }} >\r\n                                {\r\n                                    siteName.split(\" \").length > 1 ?\r\n                                        siteName.split(\" \")[0].substring(0, 1).toUpperCase() + \"\" +\r\n                                        siteName.split(\" \")[1].substring(0, 1).toUpperCase()\r\n                                        :\r\n                                        siteName.split(\" \")[0].substring(0, 1).toUpperCase()\r\n                                }\r\n                            </span>\r\n                            <Media.Body>\r\n                                <span className=\"role\" style={{ paddingTop: \"6px\" }}>{siteName}</span>\r\n                            </Media.Body>\r\n                        </Media>\r\n                    </AtHeader>\r\n                </div>,\r\n            children: this.getRoottree(this.props.Login.userTree || [], -2, false)\r\n        }\r\n        this.setState({ data, selectedRecord, userList })\r\n    }\r\n\r\n    collapseAll = () => {\r\n        this.setState({ expanded: !this.state.expanded })\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, openUserMappingModal, updateStore, getUserMappingGraphView, getCopyUserMapping,\r\n    getUserMappingFilterChange, getUserMappingBySite, getChildUsers, validateEsignCredential,\r\n    filterColumnData, getCopyUserMappingSubType,getUserMapping\r\n})(injectIntl(UserMapping));"]},"metadata":{},"sourceType":"module"}