{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from\"react-toastify\";import rsapi from\"../rsapi\";import{DEFAULT_RETURN}from\"./LoginTypes\";import{attachmentType,parameterType,SampleType,transactionStatus,MaterialType}from\"../components/Enumeration\";import{constructjsonOptionList,constructOptionList,rearrangeDateFormat,//formatInputDate,\nsortData,getComboLabelValue}from\"../components/CommonScript\";import Axios from\"axios\";import{intl}from\"../components/App\";import{initRequest}from\"./LoginAction\";export var sampleTypeOnChange=function sampleTypeOnChange(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));var url=\"/testgroup\";if(inputParam.classUrl){url=inputParam.classUrl;}rsapi.post(url+inputParam.methodUrl,inputParam.inputData).then(function(response){sortData(response.data);dispatch({type:DEFAULT_RETURN,payload:{tempFilterData:inputParam.inputData.tempFilterData,masterData:_objectSpread(_objectSpread({},masterData),response.data),loading:false}});}).catch(function(error){if(error.response.status===409||error.response.status===417){masterData[\"ExistingLinkTable\"]=[];dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});toast.warn(error.response.data);}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.error(error.message);}});};};export var filterTestGroup=function filterTestGroup(inputParam,masterData,searchRef){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"/testgroup/filterTestGroup\",inputParam.inputData).then(function(response){sortData(response.data);if(searchRef.current){searchRef.current.value=\"\";}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{//ALPD-5529--Vignesh R(06-03-2025)-->Test group screen -> Profile showing wrongly in specific scenario.\nfilterData:inputParam.inputData.filterData,selectedRecordCopy:response.data.AgaramTree,isrulesenginerequired:inputParam['inputData']['filterData']['nsampletypecode']['item']['nrulesenginerequired'],searchedData:undefined}),loading:false,testskip:0,historyDataState:_objectSpread(_objectSpread({},inputParam.historyDataState),{},{sort:undefined,filter:undefined})}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var createTree=function createTree(selectedRecord,userInfo,masterData,ncontrolCode){return function(dispatch){//ALPD-1466,1465\nvar isValid=false;if(selectedRecord&&selectedRecord.ntreeversiontempcode!==\"\"){// if (selectedRecord && selectedRecord.nsampletypecode.item.nportalrequired === transactionStatus.YES &&\n//     masterData.FocusKey === \"root\" && masterData && masterData.TreeTemplateManipulation.length > 0) {\n//     toast.warn(intl.formatMessage({\n//         id: \"IDS_MORETHANONEPROFILENOTALLOWEDCLINICALTYPE\"\n//     }));\n// } else \nif(selectedRecord.nsampletypecode.item.ncategorybasedflowrequired===transactionStatus.YES){isValid=true;}//ALPD-5320 Test Group - Flush Db- no record added click root or specification add button 500 error occurred.\nelse if(selectedRecord.nproductcatcode&&selectedRecord.nproductcatcode.item.ncategorybasedflow===transactionStatus.YES||selectedRecord.nproductcode){isValid=true;}else{toast.warn(intl.formatMessage({id:\"IDS_PRODUCTNOTAVAILABLE\"}));}}else{toast.warn(intl.formatMessage({id:\"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\"}));}if(isValid){var inputParam={sampletype:selectedRecord.nsampletypecode.item,ncategorycode:selectedRecord.nproductcatcode.value,ntreeversiontempcode:selectedRecord.ntreeversiontempcode.value,nprojectmastercode:selectedRecord.nprojectmastercode?selectedRecord.nprojectmastercode.value:-1,userinfo:userInfo,treetemplatemanipulation:masterData.selectedNode};dispatch(initRequest(true));rsapi.post(\"/testgroup/getTemplateMasterDetails\",_objectSpread({},inputParam)).then(function(response){var treetempTranstestGroup=response.data[\"TreetempTranstestGroup\"]||[];// const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\n//         return {\n//             \"idsName\": item.slabelname,\n//             \"dataField\": \"sleveldescription_\" + index,\n//             \"mandatory\": true\n//         }\n// });\n//  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\nvar mandatoryFields=[];treetempTranstestGroup.forEach(function(item,index){if(item.sleveldescription===null){mandatoryFields.push({\"idsName\":item.slabelname,\"dataField\":\"sleveldescription_\"+index,\"mandatory\":true});}});dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"create\",screenName:\"IDS_PROFILETREE\",TreetempTranstestGroup:treetempTranstestGroup,treeMandatoryFields:mandatoryFields,//selectedRecord,\nncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}};};export var editTree=function editTree(operation,selectedNode,userinfo,ncontrolCode,filterData,masterData){return function(dispatch){if(!selectedNode){return toast.warn(intl.formatMessage({id:\"IDS_SELECTPROFILENODETOEDIT\"}));}//console.log(\"edit Tree:\", selectedNode, masterData);\nvar treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===selectedNode[\"ntreeversiontempcode\"];});// if (treeVersionTemplateIndex !== -1){\nvar templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;//}\nif(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(selectedNode){dispatch(initRequest(true));rsapi.post(\"/testgroup/getTreeById\",{userinfo:userinfo,treetemplatemanipulation:selectedNode,ntreeversiontempcode:filterData.ntreeversiontempcode.value}).then(function(response){var treetempTranstestGroup=response.data;var treeMandatoryFields=treetempTranstestGroup&&[{\"idsName\":treetempTranstestGroup.slabelname,\"dataField\":\"sleveldescription\",\"mandatory\":true}];dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:operation,screenName:\"IDS_EDITTREE\",selectedRecord:_objectSpread({},treetempTranstestGroup),treeMandatoryFields:treeMandatoryFields,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTPROFILENODETOEDIT\"}));}}};};export var addSpecification=function addSpecification(operation,inputParam,ncontrolCode,masterDatas){return function(dispatch){//if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\nif(inputParam.selectedRecord&&inputParam.selectedRecord.ntreeversiontempcode!==\"\"){//ALPD-5320 Test Group - Flush Db- no record added click root or specification add button 500 error occurred.\nif(inputParam.selectedRecord.ntreeversiontempcode&&inputParam.selectedRecord.ntreeversiontempcode.item.ntransactionstatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(inputParam.selectedNode!=null&&inputParam.selectedNode.nnextchildcode===-1){if(masterDatas&&masterDatas.SelectedSpecification===null&&operation===\"copy\"){toast.warn(intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}else{var urlArray=[];if(operation===\"update\"){var testgroupspecification=inputParam.testgroupspecification[0];// let isValidOperation = false;\n// if (operation === \"update\"){\n//     if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\n//         testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\n//             isValidOperation = true;\n//     }\n//     else {\n//         toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\n//         return;\n//     }\n// }\n// else{\n//     isValidOperation = true;\n// }\nif(testgroupspecification.napprovalstatus===transactionStatus.CORRECTION||testgroupspecification.napprovalstatus===transactionStatus.DRAFT){urlArray=[rsapi.post(\"timezone/getTimeZone\")];urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\",{testgroupspecification:testgroupspecification,userinfo:inputParam.userinfo,ntreeversiontempcode:inputParam.selectedRecord.ntreeversiontempcode.value}));}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));return;}}else{urlArray=[rsapi.post(\"timezone/getTimeZone\")];urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\",{userinfo:inputParam.userInfo,ntreeversiontempcode:inputParam.selectedRecord.ntreeversiontempcode.value,nprojectmastercode:masterDatas.selectedNode.nprojectmastercode//currentdate: formatInputDate(new Date(), true)\n}));}Axios.all(urlArray).then(function(response){var selectedRecord={};var masterData=inputParam.masterData!==undefined?inputParam.masterData:masterDatas;if(operation===\"update\"){masterData=_objectSpread(_objectSpread(_objectSpread({},inputParam.masterData),response[1].data),{},{testgroupspecification:inputParam.testgroupspecification});selectedRecord=_objectSpread(_objectSpread({sproductname:inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow===transactionStatus.YES?\"\":inputParam.selectedRecord.nproductcode&&inputParam.selectedRecord.nproductcode.label,sproductcatname:inputParam.selectedRecord.nproductcatcode.label,ncategorybasedflow:inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow},response[1].data.SelectedSpecification),{},{//dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\ndexpirydate:rearrangeDateFormat(inputParam.userinfo,response[1].data.SelectedSpecification[\"sexpirydate\"]),ntzexpirydate:{\"label\":response[1].data.SelectedSpecification.stimezoneid,\"value\":response[1].data.SelectedSpecification.ntzexpirydate}});}else{selectedRecord={sproductname:inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow===transactionStatus.YES?\"\":inputParam.selectedRecord.nproductcode&&inputParam.selectedRecord.nproductcode.label,sproductcatname:inputParam.selectedRecord.nproductcatcode.label,sspecname:inputParam.selectedNode.sleveldescription,ncategorybasedflow:inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,dexpirydate:rearrangeDateFormat(inputParam.userInfo,response[1].data.ExpiryDate),selectedCopyProfileName:inputParam.selectedNode.sleveldescription,selectedCopyNodeManipulationCode:inputParam.selectedNode.ntemplatemanipulationcode,CopyFocusKey:masterData.FocusKey,CopyActiveKey:masterData.ActiveKey,scopyspecname:inputParam.selectedNode.sleveldescription,//ncomponentrequired: inputParam.selectedNode.nsampletypecode === SampleType.CLINICALTYPE ? transactionStatus.YES : transactionStatus.NO,\n// ncomponentrequired: transactionStatus.YES,\n// ncomponentrequired :inputParam.selectedRecord.nproductcatcode.item.nmaterialtypecode == MaterialType.IQCSTANDARDMATERIALTYPE ?transactionStatus.NO:transactionStatus.YES,\nncomponentrequired:inputParam.selectedRecord.nsampletypecode&&inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired?inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired:transactionStatus.YES,// nclinicalspec: inputParam.selectedNode.nsampletypecode===SampleType.CLINICALTYPE?transactionStatus.YES:transactionStatus.NO,\nntransactionstatus:transactionStatus.ACTIVE,ntzexpirydate:{\"label\":inputParam.userInfo.stimezoneid,\"value\":inputParam.userInfo.ntimezonecode}};// ALPD-4757, When copy spec slideout opens, isCopy becomes false due to get sample cat or sample based on main filter\nvar selectedRecordCopy={isCopy:false};masterData[\"selectedRecordCopy\"]=selectedRecordCopy;}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:operation,screenName:\"IDS_SPECIFICATION\",masterData:masterData,selectedRecord:selectedRecord,timeZoneList:constructOptionList(response[0].data||[],\"ntimezonecode\",\"stimezoneid\",false,false,true).get(\"OptionList\"),ncontrolCode:ncontrolCode}});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}}else{if(operation===\"copy\"){toast.warn(intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTLASTLEVELNODETOADDSPEC\"}));}}}}else{toast.warn(intl.formatMessage({id:\"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\"}));}};};export var addComponent=function addComponent(SelectedSpecification,userInfo,ncontrolCode,masterData,genericLabel){return function(dispatch){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{rsapi.post(\"/testgroup/getAvailableComponent\",{userinfo:userInfo,testgroupspecification:_objectSpread(_objectSpread({},SelectedSpecification),{},{nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"],nclinicaltyperequired:masterData.nsampletypecode.item.nclinicaltyperequired})}).then(function(response){var testGroupSpecSampleType=response.data[\"TestGroupSpecSampleType\"]||[];if(testGroupSpecSampleType.length>0){var testCategory=constructOptionList(response.data[\"TestCategory\"]||[],\"ntestcategorycode\",\"stestcategoryname\",'ntestcategorycode','ascending',false);var sampleTypeMap=constructOptionList(testGroupSpecSampleType,\"ncomponentcode\",\"scomponentname\",false,false,true);// const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"create\",screenName:genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode],testGroupInputData:{TestCategory:testCategory.get(\"OptionList\"),TestGroupSpecSampleType:sampleTypeMap.get(\"OptionList\"),TestGroupTest:response.data[\"TestGroupTest\"]||[]//TestGroupTestMap.get(\"OptionList\"),\n},selectedRecord:{ncomponentcode:sampleTypeMap.get(\"DefaultValue\"),ntestcategorycode:testCategory.get(\"DefaultValue\")?testCategory.get(\"DefaultValue\"):testCategory.get(\"OptionList\")[0]},ncontrolCode:ncontrolCode}});}else{toast.warn(genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode]+\" \"+intl.formatMessage({id:\"IDS_NOTAVAILABLE\"}));}}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}};};export var addTestGroupTest=function addTestGroupTest(selectedComponent,userInfo,ncontrolCode,selectedSpecification,filterData,masterData){return function(dispatch){if(masterData.selectedNode!==undefined&&masterData.selectedNode!==null){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(selectedSpecification){if(selectedSpecification.napprovalstatus===transactionStatus.DRAFT||selectedSpecification.napprovalstatus===transactionStatus.CORRECTION){var openTestModal=false;if(selectedSpecification.ncomponentrequired===transactionStatus.YES){if(selectedComponent==undefined){toast.warn(intl.formatMessage({id:\"IDS_NEEDCOMPONENTTOADDTEST\"}));}else{openTestModal=true;}}else{openTestModal=true;}if(openTestModal===true){rsapi.post(\"/testgroup/getAvailableTest\",{userinfo:userInfo,testgroupspecsampletype:selectedComponent,ntreeversiontempcode:filterData.ntreeversiontempcode.value,nprojectmastercode:masterData.selectedNode.nprojectmastercode,nclinicaltyperequired:filterData.nsampletypecode&&filterData.nsampletypecode.item.nclinicaltyperequired}).then(function(response){var testCategory;// = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\n// const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\nif(response.data[\"TestCategory\"].length>0){testCategory=constructOptionList(response.data[\"TestCategory\"],\"ntestcategorycode\",\"stestcategoryname\",\"ntestcategorycode\",\"ascending\",false);dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"create\",screenName:\"IDS_TEST\",testGroupInputData:{TestCategory:testCategory.get(\"OptionList\"),TestGroupTest:response.data[\"TestGroupTest\"]||[]//TestGroupTestMap.get(\"OptionList\"),\n},selectedRecord:{ntestcategorycode:{label:response.data[\"SelectedTestCategory\"].stestcategoryname,value:response.data[\"SelectedTestCategory\"].stestcategorycode,item:response.data[\"SelectedTestCategory\"]}//ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\n},ncontrolCode:ncontrolCode}});}else{toast.warn(intl.formatMessage({id:\"IDS_TESTCATEGORYNOTAVAILABLE\"}));}}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}}}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}};};export var editTestGroupTest=function editTestGroupTest(operation,selectedTest,userInfo,ncontrolCode,selectedSpecification,filterData,masterData){return function(dispatch){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(selectedSpecification.napprovalstatus===transactionStatus.DRAFT||selectedSpecification.napprovalstatus===transactionStatus.CORRECTION){var ntestcode=selectedTest.ntestcode;var urlArray=[rsapi.post(\"/testgroup/getActiveTestById\",{userinfo:userInfo,testgrouptest:selectedTest,ntreeversiontempcode:filterData.ntreeversiontempcode.value,nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"]?masterData[\"selectedNode\"][\"nprojectmastercode\"]:-1}),// rsapi.post(\"/source/getSource\", {\n//     userinfo: userInfo\n// }),\nrsapi.post(\"/testmaster/getSection\",{ntestcode:ntestcode,userinfo:userInfo}),rsapi.post(\"/testmaster/getMethod\",{ntestcode:ntestcode,userinfo:userInfo}),rsapi.post(\"/testmaster/getInstrumentCategory\",{ntestcode:ntestcode,userinfo:userInfo}),rsapi.post(\"/testmaster/getTestAttachment\",{ntestcode:ntestcode,userinfo:userInfo}),rsapi.post(\"/testmaster/getContainerType\",{ntestcode:ntestcode,userinfo:userInfo}),//ALPD-3418\nrsapi.post(\"/testmaster/getTestPackage\",{ntestcode:ntestcode,userinfo:userInfo})];Axios.all(urlArray).then(function(response){// const editObject = response[0].data.TestGroupTest;\n// const testFileItem = response[0].data.TestGroupTestFile;\n// const SelectedTest = response[0].data.TestGroupTest;\nvar editObject=response[0].data.SelectedTestGroupTest;var testFileItem=response[0].data.TestGroupTestFile;var SelectedTest=response[0].data.SelectedTest;//const TestGroupTest = response[0].data.TestGroupTest;\nvar selectedRecord=_objectSpread(_objectSpread({},editObject),{},{// nsourcecode: {\n//     \"label\": editObject.ssourcename,\n//     \"value\": editObject.nsourcecode\n// },\nnsectioncode:{\"label\":editObject.ssectionname,\"value\":editObject.nsectioncode},nmethodcode:{\"label\":editObject.smethodname,\"value\":editObject.nmethodcode},ninstrumentcatcode:{\"label\":editObject.sinstrumentcatname,\"value\":editObject.ninstrumentcatcode},ncontainertypecode:{\"label\":editObject.scontainertype,\"value\":editObject.ncontainertypecode},ntestpackagecode:{\"label\":editObject.stestpackagename,\"value\":editObject.ntestpackagecode}});if(testFileItem){selectedRecord[\"ntestfilecode\"]={\"label\":testFileItem.sfilename,\"value\":testFileItem.ntestgroupfilecode,item:testFileItem};selectedRecord[\"ntestgroupfilecode\"]=testFileItem.ntestgroupfilecode;}if(editObject.nmethodcode!==-1){selectedRecord[\"nmethodcode\"]={\"label\":editObject.smethodname,\"value\":editObject.nmethodcode};}else{selectedRecord[\"nmethodcode\"]=undefined;}if(editObject.ninstrumentcatcode!==-1){selectedRecord[\"ninstrumentcatcode\"]={\"label\":editObject.sinstrumentcatname,\"value\":editObject.ninstrumentcatcode};}else{selectedRecord[\"ninstrumentcatcode\"]=undefined;}if(editObject.ncontainertypecode!==-1){selectedRecord[\"ncontainertypecode\"]={\"label\":editObject.scontainertype,\"value\":editObject.ncontainertypecode};}else{selectedRecord[\"ncontainertypecode\"]=undefined;}//ALPD-3418\nif(editObject.ntestpackagecode!==-1){selectedRecord[\"ntestpackagecode\"]={\"label\":editObject.stestpackagename,\"value\":editObject.ntestpackagecode};}else{selectedRecord[\"ntestpackagecode\"]=undefined;}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response[0].data),{},{SelectedTest:SelectedTest//TestGroupTest : [TestGroupTest]\n}),openModal:true,operation:operation,screenName:\"IDS_EDITTESTGROUPTEST\",testGroupInputData:{// source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\nsection:constructOptionList(response[1].data||[],\"nsectioncode\",\"ssectionname\",false,false,true).get(\"OptionList\"),method:constructOptionList(response[2].data||[],\"nmethodcode\",\"smethodname\",false,false,true).get(\"OptionList\"),instrumentCategory:constructOptionList(response[3].data||[],\"ninstrumentcatcode\",\"sinstrumentcatname\",false,false,true).get(\"OptionList\"),containerType:constructOptionList(response[5].data||[],\"ncontainertypecode\",\"scontainertype\",false,false,true).get(\"OptionList\"),testFile:constructOptionList(response[4].data||[],\"ntestfilecode\",\"sfilename\",false,false,true).get(\"OptionList\"),testpackage:constructOptionList(response[6].data||[],\"ntestpackagecode\",\"stestpackagename\",false,false,true).get(\"OptionList\")},selectedRecord:selectedRecord,ncontrolCode:ncontrolCode}});}).catch(function(error){//console.log(\"errror:\", error);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}};};export var editTestGroupParameter=function editTestGroupParameter(operation,selectedParameter,userInfo,ncontrolCode,selectedSpecification,filterData,masterData){return function(dispatch){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(selectedSpecification.napprovalstatus===transactionStatus.DRAFT||selectedSpecification.napprovalstatus===transactionStatus.CORRECTION){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/testgroup/getActiveParameterById\",{userinfo:userInfo,testgrouptestparameter:_objectSpread(_objectSpread({},selectedParameter),{},{nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"]}),ntreeversiontempcode:filterData.ntreeversiontempcode.value}),rsapi.post(\"/parametertype/getParameterType\",{userinfo:userInfo}),rsapi.post(\"unit/getUnit\",{userinfo:userInfo}),rsapi.post(\"grade/getGrade\",{userinfo:userInfo}),rsapi.post(\"checklist/getApprovedChecklist\",{\"userinfo\":userInfo}),rsapi.post(\"testmaster/getResultAccuracy\",{userinfo:userInfo})];Axios.all(urlArray).then(function(response){var parameterObject=response[0].data.TestGroupTestParameter[0];var predefinedObject=response[0].data.TestGroupTestPredefinedParameter;var characterObject=response[0].data.TestGroupTestCharParameter;var numericObject=response[0].data.TestGroupTestNumericParameter&&response[0].data.TestGroupTestNumericParameter.length>0?response[0].data.TestGroupTestNumericParameter[0]:{};var selectedRecord=_objectSpread(_objectSpread({},parameterObject),{},{nunitcode:{\"label\":parameterObject.sunitname,\"value\":parameterObject.nunitcode},nresultaccuracycode:{\"label\":parameterObject.sresultaccuracyname,\"value\":parameterObject.nresultaccuracycode},nparametertypecode:{\"label\":parameterObject.sdisplaystatus,\"value\":parameterObject.nparametertypecode},parameterTypeCode:parameterObject.nparametertypecode,nchecklistversioncode:{\"label\":parameterObject.schecklistname,\"value\":parameterObject.nchecklistversioncode},schecklistversionname:parameterObject.schecklistversionname,ntestformulacode:parameterObject.ntestformulacode>0?{\"label\":parameterObject.sformulaname,\"value\":parameterObject.ntestformulacode,item:{sformulacalculationdetail:parameterObject.sformulaname,ntestformulacode:parameterObject.ntestformulacode,sformulacalculationcode:parameterObject.sformulacalculationcode}}:\"\"});if(selectedRecord[\"schecklistname\"]===\"NA\"){delete selectedRecord[\"nchecklistversioncode\"];}if(selectedRecord[\"schecklistversionname\"]===\"NA\"){delete selectedRecord[\"schecklistversionname\"];}if(selectedRecord[\"sunitname\"]===\"NA\"){delete selectedRecord[\"nunitcode\"];}if(selectedRecord[\"sresultaccuracyname\"]===\"NA\"){delete selectedRecord[\"nresultaccuracycode\"];}if(characterObject){selectedRecord[\"scharname\"]=characterObject.scharname;selectedRecord[\"ntestgrouptestcharcode\"]=characterObject.ntestgrouptestcharcode;}if(predefinedObject){selectedRecord[\"ntestgrouptestpredefcode\"]=predefinedObject.ntestgrouptestpredefcode;selectedRecord[\"spredefinedname\"]=predefinedObject.spredefinedname;selectedRecord[\"ndefaultstatus\"]=predefinedObject.ndefaultstatus;selectedRecord[\"ngradecode\"]={\"label\":predefinedObject.sdisplaystatus,\"value\":predefinedObject.ngradecode};}if(numericObject){selectedRecord[\"ntestgrouptestnumericcode\"]=numericObject.ntestgrouptestnumericcode;selectedRecord[\"sminlod\"]=numericObject.sminlod;selectedRecord[\"smaxlod\"]=numericObject.smaxlod;selectedRecord[\"sminb\"]=numericObject.sminb;selectedRecord[\"smina\"]=numericObject.smina;selectedRecord[\"smaxa\"]=numericObject.smaxa;selectedRecord[\"smaxb\"]=numericObject.smaxb;selectedRecord[\"sminloq\"]=numericObject.sminloq;selectedRecord[\"smaxloq\"]=numericObject.smaxloq;selectedRecord[\"sdisregard\"]=numericObject.sdisregard;selectedRecord[\"sresultvalue\"]=numericObject.sresultvalue;selectedRecord[\"ngradecode\"]={\"label\":numericObject.sgradename,\"value\":numericObject.ngradecode};}var gradeMap=constructOptionList(response[3].data||[],\"ngradecode\",\"sdisplaystatus\",false,false,true);var unitMap=constructOptionList(response[2].data||[],\"nunitcode\",\"sunitname\",false,false,true);var resultAccuracyMap=constructOptionList(response[5].data||[],\"nresultaccuracycode\",\"sresultaccuracyname\",false,false,true);var grade=gradeMap.get(\"OptionList\");var unit=unitMap.get(\"OptionList\");var resultaccuracy=resultAccuracyMap.get(\"OptionList\");var disabled=parameterObject.nparametertypecode===parameterType.NUMERIC?false:true;dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,operation:operation,screenName:\"IDS_PARAMETER\",testGroupInputData:{unit:unit,grade:grade,resultaccuracy:resultaccuracy,testFormula:constructOptionList(response[0].data.TestFormula||[],\"ntestformulacode\",\"sformulaname\",false,false,true).get(\"OptionList\"),parameterType:constructOptionList(response[1].data||[],\"nparametertypecode\",\"sdisplaystatus\",false,false,true).get(\"OptionList\"),checkListVersion:constructOptionList(response[4].data||[],\"nchecklistversioncode\",\"schecklistname\",false,false,true).get(\"OptionList\"),needRoundingDigit:disabled,needUnit:disabled},parameterData:{grade:grade,defaultUnit:unitMap.get(\"DefaultValue\")?unitMap.get(\"DefaultValue\"):\"\"},selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}};};// export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\n//     return dispatch => {\n//         const testgroupspecification = optionalData.testgroupspecification;\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n//             dispatch(initRequest(true));\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\n//             .then(response=>{\n//                 dispatch({\n//                     type: DEFAULT_RETURN, \n//                     payload:{\n//                         openChildModal: true,\n//                         operation: \"create\",\n//                         screenName: \"IDS_FORMULA\",\n//                         testGroupInputData: {testFormula: response.data},\n//                         selectedRecord: {},\n//                         ncontrolCode\n//                 }});\n//             })\n//             .catch(error=>{\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\n//                 if(error.response.status === 409 || error.response.status === 417) {\n//                     toast.warn(error.response.data);\n//                 } else {\n//                     toast.error(error.message)\n//                 }\n//             });\n//         } else {\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\n//         }\n//     }\n// }\nexport var getTestGroupParameter=function getTestGroupParameter(inputParam){return function(dispatch){rsapi.post(\"/testgroup/getTestGroupTestParameter\",_objectSpread({},inputParam)).then(function(response){sortData(response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),response.data)}});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var getComponentBySpecId=function getComponentBySpecId(inputParam,masterData,searchRef){return function(dispatch){var _rsapi$post;dispatch(initRequest(true));rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl,(_rsapi$post={},_defineProperty(_rsapi$post,inputParam.keyName,inputParam.selectedRecord.testgroupspecification[0]),_defineProperty(_rsapi$post,\"userinfo\",inputParam.userInfo),_rsapi$post)).then(function(response){sortData(response.data);if(searchRef.current){searchRef.current.value=\"\";}var historyDataState=_objectSpread(_objectSpread({},inputParam.historyDataState),{},{sort:undefined,filter:undefined});dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{searchedData:undefined}),historyDataState:historyDataState,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var getTestGroupDetails=function getTestGroupDetails(inputParam){return function(dispatch){//...inputParam, \ndispatch(initRequest(true));rsapi.post(\"/testgroup/getTestGroupTest\",{ntestgrouptestcode:parseInt(inputParam['ntestgrouptestcode']),userinfo:inputParam.userInfo})// rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n//     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n.then(function(response){sortData(response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),response.data),testskip:undefined,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var getTestGroupComponentDetails=function getTestGroupComponentDetails(inputParam,masterData,searchRef){return function(dispatch){//...inputParam, \ndispatch(initRequest(true));rsapi.post(\"/testgroup/getTestByComponentId\",{testgroupspecsampletype:inputParam['testgroupspecsampletype'],userinfo:inputParam.userInfo})// rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n//     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n.then(function(response){sortData(response.data);if(searchRef.current)searchRef.current.value=\"\";dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{searchedData:undefined}),testskip:0,testtake:5,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var getSpecification=function getSpecification(inputParam,masterData,searchRef){return function(dispatch){if(inputParam.selectedRecord!==null){rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl,_objectSpread(_objectSpread({},inputParam),{},_defineProperty({},inputParam.keyName,inputParam.selectedRecord))).then(function(response){sortData(response.data);if(searchRef.current)searchRef.current.value=\"\";dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),{},{ActiveKey:inputParam.activeKey,FocusKey:inputParam.focusKey,primaryKey:inputParam.primaryKey},response.data),{},{selectedNode:inputParam.selectedRecord,searchedData:undefined}),historyDataState:_objectSpread(_objectSpread({},inputParam.historyDataState),{},{sort:undefined,filter:undefined})}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),{},{selectedNode:inputParam.selectedRecord,TestGroupSpecification:[],SelectedSpecification:{},TestGroupTest:[],TestGroupTestParameter:[],TestGroupTestNumericParameter:[],TestGroupTestFormula:[],TestGroupTestPredefinedParameter:[],TestGroupTestClinicalSpec:[],TestGroupTestCharParameter:[],ActiveKey:inputParam.activeKey,FocusKey:inputParam.focusKey,SelectedTest:{},selectedParameter:{},TestGroupSpecFile:[],TestGroupSpecificationHistory:[],SelectedComponent:undefined,RulesEngine:[]})}});}};};export var changeTestCategory=function changeTestCategory(inputParam,testGroupInputData){return function(dispatch){rsapi.post(\"/testgroup/getTestMasterByCategory\",_objectSpread({},inputParam)).then(function(response){sortData(response.data);inputParam.selectedRecord.ntestcode=[];dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:inputParam.selectedRecord,testGroupInputData:_objectSpread(_objectSpread({},testGroupInputData),response.data)}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var getSpecificationDetails=function getSpecificationDetails(inputParam,masterData,searchRef){return function(dispatch){rsapi.post(\"/testgroup/get\"+inputParam.methodUrl,_objectSpread({},inputParam.inputData)).then(function(response){if(searchRef.current)searchRef.current.value=\"\";dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{searchedData:undefined}),screenName:inputParam.screenName}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var editSpecFile=function editSpecFile(inputParam){return function(dispatch){var masterData=inputParam.masterData;var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{if(inputParam.testgroupspecification.napprovalstatus===transactionStatus.DRAFT||inputParam.testgroupspecification.napprovalstatus===transactionStatus.CORRECTION){var urlArray=[rsapi.post(\"/linkmaster/getLinkMaster\",{userinfo:inputParam.userInfo}),rsapi.post(\"/testgroup/getActiveSpecFileById\",{userinfo:inputParam.userInfo,testgroupspecfile:inputParam.selectedRecord,ntreeversiontempcode:inputParam.filterData.ntreeversiontempcode.value})];Axios.all(urlArray).then(function(response){var linkmaster=response[0].data.LinkMaster;var defaultLink=linkmaster.filter(function(item){return item.ndefaultlink===transactionStatus.YES;});var editObject=response[1].data;var nlinkcode={};var link={};if(editObject.nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject.slinkname,\"value\":editObject.nlinkcode};link={slinkfilename:editObject.sfilename,slinkdescription:editObject.sdescription,nlinkdefaultstatus:editObject.ndefaultstatus,sfilesize:'',nfilesize:0,ndefaultstatus:4,sfilename:''};}else{nlinkcode=defaultLink.length>0?{\"label\":defaultLink[0].slinkname,\"value\":defaultLink[0].nlinkcode}:\"\";link={slinkfilename:'',slinkdescription:'',sdescription:editObject.sdescription,nlinkdefaultstatus:4,sfilesize:editObject.sfilesize,nfilesize:editObject.nfilesize,ndefaultstatus:editObject.ndefaultstatus,sfilename:editObject.sfilename};}var selectedRecord=_objectSpread(_objectSpread({},link),{},{nallotedspeccode:editObject.nallotedspeccode,nspecfilecode:editObject.nspecfilecode,stypename:editObject.stypename,nattachmenttypecode:editObject.nattachmenttypecode,nlinkcode:nlinkcode// disabled: true\n});dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"update\",screenName:\"IDS_SPECFILE\",editFiles:Object.values(editObject).length>0&&editObject.nattachmenttypecode===attachmentType.FTP?editObject:{},selectedRecord:selectedRecord,ncontrolCode:inputParam.ncontrolCode}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}};};export var addTestGroupCodedResult=function addTestGroupCodedResult(operation,paramdata,userInfo,ncontrolCode,optionalData,masterData){return function(dispatch){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{var testgroupspecification=optionalData.testgroupspecification;if(testgroupspecification.napprovalstatus===transactionStatus.DRAFT||testgroupspecification.napprovalstatus===transactionStatus.CORRECTION){dispatch(initRequest(true));var urlArray=[rsapi.post(\"grade/getGrade\",{\"userinfo\":userInfo})];if(operation===\"update\"){urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\",{testgrouptestpredefinedparameter:paramdata,\"userinfo\":userInfo,testgroupspecification:testgroupspecification}));urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterSubCodedById\",{testgrouptestpredefinedparameter:paramdata,\"userinfo\":userInfo,testgroupspecification:testgroupspecification}));}Axios.all(urlArray).then(function(response){var selectedRecord={};var selectedsubcodedresult=[];var selectsubcodedelete=[];var gradeMap=constructOptionList(response[0].data||[],\"ngradecode\",\"sdisplaystatus\",false,false,true);var grade=gradeMap.get(\"OptionList\");if(operation===\"update\"){var editCodedResult=response[1].data;selectedRecord={ntestgrouptestpredefcode:paramdata[\"ntestgrouptestpredefcode\"],ntestgrouptestparametercode:paramdata[\"ntestgrouptestparametercode\"],ngradecode:{\"label\":editCodedResult[\"sdisplaystatus\"],\"value\":editCodedResult[\"ngradecode\"]},spredefinedname:editCodedResult[\"spredefinedname\"],//sresultparacomment: editCodedResult[\"sresultparacomment\"],\nspredefinedsynonym:editCodedResult[\"spredefinedsynonym\"],spredefinedcomments:editCodedResult[\"spredefinedcomments\"],nneedresultentryalert:editCodedResult[\"nneedresultentryalert\"],nneedsubcodedresult:editCodedResult[\"nneedsubcodedresult\"],salertmessage:editCodedResult[\"salertmessage\"]};selectedsubcodedresult=response[2].data;}else{selectedRecord={ngradecode:gradeMap.get(\"DefaultValue\"),nneedresultentryalert:4,nneedsubcodedresult:4// {\n//     \"value\": grade[0].ngradecode,\n//     \"label\": grade[0][\"sdisplaystatus\"]\n// }\n};}dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,showSaveContinue:false,operation:operation,screenName:\"IDS_CODEDRESULT\",parameterData:{grade:grade,needCodedResult:false},selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false,selectedsubcodedresult:selectedsubcodedresult,selectsubcodedelete:selectsubcodedelete}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}};};export var subCodedResultView=function subCodedResultView(operation,paramdata,userInfo,ncontrolCode,optionalData,masterData){return function(dispatch){rsapi.post(\"testgroup/getActivePredefinedParameterSubCoded\",{testgrouptestpredefinedparameter:paramdata,\"userinfo\":userInfo}).then(function(response){var selectedsubcoderesult=[];dispatch({type:DEFAULT_RETURN,payload:{openModal:true,operation:\"View\",screenName:\"IDS_SUBCODERESULT\",selectedsubcoderesult:response.data,masterData:_objectSpread(_objectSpread({},masterData),{},{selectedsubcoderesult:response.data,searchedData:undefined})//screenName: inputParam.screenName\n}});}).catch(function(error){if(error.response.status===409||error.response.status===417){toast.warn(error.response.data);}else{toast.error(error.message);}});};};export var addTestGroupNumericTab=function addTestGroupNumericTab(operation,paramdata,userInfo,optionalData,masterData,ncontrolCode){return function(dispatch){var treeVersionTemplateIndex=masterData[\"TreeVersionTemplate\"].findIndex(function(x){return x[\"ntreeversiontempcode\"]===masterData.selectedNode[\"ntreeversiontempcode\"];});var templateVersionStatus=masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus;if(templateVersionStatus===transactionStatus.RETIRED){toast.warn(intl.formatMessage({id:\"IDS_SELECTEDTEMPLATEISRETIRED\"}));}else{var testgroupspecification=optionalData.testgroupspecification;if(testgroupspecification.napprovalstatus===transactionStatus.DRAFT||testgroupspecification.napprovalstatus===transactionStatus.CORRECTION){dispatch(initRequest(true));var urlArray=[rsapi.post(\"patient/getGender\",{\"userinfo\":userInfo}),rsapi.post(\"grade/getGrade\",{userinfo:userInfo}),rsapi.post(\"/period/getPeriodByControl\",{\"ncontrolcode\":ncontrolCode,\"userinfo\":userInfo})];if(operation===\"update\"){urlArray.push(rsapi.post(\"testgroup/getActiveClinicalSpecById\",{testgrouptestpredefinedparameter:paramdata,\"userinfo\":userInfo,testgroupspecification:testgroupspecification}));}Axios.all(urlArray).then(function(response){var selectedRecord={};var ntoageperiod=[];var nfromageperiod=[];var gradeMap=constructOptionList(response[0].data.genderList||[],\"ngendercode\",\"sgendername\",false,false,true);var gender=gradeMap.get(\"OptionList\");var gradeNewMap=constructOptionList(response[1].data||[],\"ngradecode\",\"sdisplaystatus\",false,false,true);var grade=gradeNewMap.get(\"OptionList\");var PeriodMap=constructOptionList(response[2].data||[],\"nperiodcode\",\"speriodname\",false,false,true);var period=PeriodMap.get(\"OptionList\");sortData(grade||[],\"ascending\",\"value\");if(operation===\"update\"){//ALPD-5054 added by Dhanushya RI,To get fromage period and toage period\nvar editCodedResult=response[3].data;nfromageperiod.push({\"value\":response[3].data[\"nfromageperiod\"],\"label\":response[3].data[\"sfromageperiod\"]});ntoageperiod.push({\"value\":response[3].data[\"ntoageperiod\"],\"label\":response[3].data[\"stoageperiod\"]});selectedRecord={ntestgrouptestclinicspeccode:paramdata[\"ntestgrouptestclinicspeccode\"],ntestgrouptestparametercode:paramdata[\"ntestgrouptestparametercode\"],nfromage:paramdata[\"nfromage\"],ntoage:paramdata[\"ntoage\"],ngradecode:getComboLabelValue(editCodedResult,response[1].data,\"ngradecode\",\"sgradename\"),ngendercode:{\"label\":editCodedResult[\"sgendername\"],\"value\":editCodedResult[\"ngendercode\"]},// ngradecode: {\n//     \"label\": editCodedResult[\"sgradename\"],\n//     \"value\": editCodedResult[\"ngradecode\"]\n// },\nnhigha:editCodedResult[\"shigha\"]==='null'?'':editCodedResult[\"shigha\"],nhighb:editCodedResult[\"shighb\"]==='null'?'':editCodedResult[\"shighb\"],nlowa:editCodedResult[\"slowa\"]==='null'?'':editCodedResult[\"slowa\"],nlowb:editCodedResult[\"slowb\"]==='null'?'':editCodedResult[\"slowb\"],sminlod:editCodedResult[\"sminlod\"]==='null'?'':editCodedResult[\"sminlod\"],smaxlod:editCodedResult[\"smaxlod\"]==='null'?'':editCodedResult[\"smaxlod\"],sminloq:editCodedResult[\"sminloq\"]==='null'?'':editCodedResult[\"sminloq\"],smaxloq:editCodedResult[\"smaxloq\"]==='null'?'':editCodedResult[\"smaxloq\"],sdisregard:editCodedResult[\"sdisregard\"]==='null'?'':editCodedResult[\"sdisregard\"],sresultvalue:editCodedResult[\"sresultvalue\"]==='null'?'':editCodedResult[\"sresultvalue\"]};//ALPD-5054 added by Dhanushya RI,To get fromage period and toage period\nselectedRecord[\"nfromageperiod\"]=nfromageperiod[0];selectedRecord[\"ntoageperiod\"]=ntoageperiod[0];}else{selectedRecord={ngendercode:gradeMap.get(\"DefaultValue\")// {\n//     \"value\": grade[0].ngradecode,\n//     \"label\": grade[0][\"sdisplaystatus\"]\n// }\n};}dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,showSaveContinue:false,operation:operation,screenName:\"IDS_CLINICALSPEC\",parameterData:{gender:gender,grade:grade,formAgePeriod:period,toAgePeriod:period,needCodedResult:false},selectedRecord:selectedRecord,ncontrolCode:ncontrolCode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}};};export var viewTestGroupCheckList=function viewTestGroupCheckList(inputParam,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"checklist/viewTemplate\",_objectSpread({},inputParam)).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{openTemplateModal:true,testGroupCheckList:{templateData:response.data},loading:false,selectedRecord:{}}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var reportSpecification=function reportSpecification(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"testgroup/specReportGenerate\",_objectSpread(_objectSpread({},inputParam),{},{ntreeversiontempcode:inputParam.filterData.ntreeversiontempcode.value})).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false,showConfirmAlert:false}});document.getElementById(\"download_data\").setAttribute(\"href\",response.data.filepath);document.getElementById(\"download_data\").click();}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var retireSpecification=function retireSpecification(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"testgroup/retireSpec\",_objectSpread({},inputParam)).then(function(response){// const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\nsortData(response.data);masterData=_objectSpread(_objectSpread({},masterData),response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var getDataForTestMaterial=function getDataForTestMaterial(screenName,operation,userInfo,ncontrolCode,selectedRecord,masterData,primaryKeyName){return function(dispatch){if(masterData.selectedNode!==undefined&&masterData.selectedNode!==null&&masterData.SelectedSpecification!==null){var testgroupspecification=masterData.SelectedSpecification;if(testgroupspecification.napprovalstatus===transactionStatus.DRAFT||testgroupspecification.napprovalstatus===transactionStatus.CORRECTION){var urlArray=[];var materialTypeUrl=rsapi.post(\"materialcategory/getMaterialType\",{\"userinfo\":userInfo});var validationUrl=rsapi.post(\"testgroup/validationForRetiredTemplate\",{\"userinfo\":userInfo,ntreeversiontempcode:masterData.selectedNode.ntreeversiontempcode});urlArray=[materialTypeUrl,validationUrl];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){console.log(ncontrolCode);if(masterData.SelectedTest&&masterData.SelectedTest!==undefined){if(response[1].data===\"Success\"){var materialTypeMap=constructOptionList(response[0].data||[],\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,false);var materialType=materialTypeMap.get(\"OptionList\");var materialTypedefault=materialTypeMap.get(\"DefaultValue\");selectedRecord[\"nmaterialtypecode\"]=materialTypedefault;if(selectedRecord[\"nmaterialtypecode\"]!==undefined){var _inputParam;var inputData=[];var inputParam=(_inputParam={operation:operation,selectedRecord:selectedRecord,materialType:materialType,inputData:{nmaterialtypecode:materialTypedefault.value}},_defineProperty(_inputParam,\"materialType\",materialType),_defineProperty(_inputParam,\"masterData\",masterData),_defineProperty(_inputParam,\"screenName\",screenName),_defineProperty(_inputParam,\"ncontrolCode\",ncontrolCode),_inputParam);dispatch(getMaterialCategoryBasedMaterialType(inputParam));}else{dispatch({type:DEFAULT_RETURN,payload:{materialType:materialType,materialList:undefined,materialCategoryList:undefined,isOpen:true,operation:operation,screenName:screenName,openChildModal:true,ncontrolCode:ncontrolCode,loading:false}});}}else{toast.warn(intl.formatMessage({id:response[1].data}));dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,loading:false}});}}else{toast.warn(intl.formatMessage({id:\"IDS_NEEDTOADDTEST\"}));dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTSPECIFICATION\"}));}};};export function getMaterialCategoryBasedMaterialType(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"material/getMaterialcombo\",{nmaterialtypecode:inputParam.inputData.nmaterialtypecode}).then(function(response){var selectedRecord={};selectedRecord=inputParam.selectedRecord;var materialCategoryMap=constructOptionList(response.data.MaterialCategoryMain||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,false);var materialCategoryList=materialCategoryMap.get(\"OptionList\");var materialCategorydefault=materialCategoryMap.get(\"DefaultValue\");selectedRecord['nmaterialcatcode']=materialCategorydefault;var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);if(response.data.MaterialCategoryMain.length===0){if(selectedRecord['nmaterialcatcode']){delete selectedRecord['nmaterialcatcode'];}if(selectedRecord['nmaterialcode']){delete selectedRecord['nmaterialcode'];}}var materialList=[];if(materialCategorydefault&&materialCategoryList.length!==0){materialList=materialList;inputParam=_objectSpread(_objectSpread({},inputParam),{},{responsecat:response,materialCategoryList:materialCategoryList,selectedRecord:selectedRecord,inputData:{nmaterialcatcode:materialCategorydefault.value,nmaterialtypecode:inputParam.inputData.nmaterialtypecode}});dispatch(getMaterialBasedMaterialCategory(inputParam));}else{dispatch({type:DEFAULT_RETURN,payload:{openChildModal:true,screenName:inputParam.screenName,masterData:masterData,loading:false,materialCategoryList:materialCategoryList,materialType:inputParam.materialType,materialList:materialList,selectedRecord:selectedRecord,operation:inputParam.operation,ncontrolCode:inputParam.ncontrolCode}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMaterialBasedMaterialCategory(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"testgroup/getAvailableMaterial\",{nmaterialtypecode:inputParam.inputData.nmaterialtypecode,//  nmaterialcatcode: inputParam.inputData.nmaterialcatcode !== undefined\n//     ? inputParam.inputData.nmaterialcatcode : inputParam.responsecat.data.MaterialCategoryMain[0].nmaterialcatcode,\nnmaterialcatcode:inputParam.inputData.nmaterialcatcode,ntestgrouptestcode:inputParam.masterData.SelectedTest.ntestgrouptestcode}).then(function(response){var selectedRecord=inputParam.selectedRecord;var materialMap=constructjsonOptionList(response.data.MaterialCombo||[],\"nmaterialcode\",\"Material Name\",undefined,undefined,false);var materialList=materialMap.get(\"OptionList\");if(response.data.MaterialCombo.length===0){delete selectedRecord['nmaterialcode'];}var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);if(inputParam.materialCategoryList){dispatch({type:DEFAULT_RETURN,payload:{materialCategoryList:inputParam.materialCategoryList,masterData:masterData,loading:false,materialList:materialList,openChildModal:true,screenName:inputParam.screenName,selectedRecord:inputParam.selectedRecord,materialType:inputParam.materialType,operation:inputParam.operation,ncontrolCode:inputParam.ncontrolCode}});}else{dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,materialList:materialList,openChildModal:true}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export var getTestGroupMaterial=function getTestGroupMaterial(inputParam){return function(dispatch){rsapi.post(\"/testgroup/getTestGroupTestMaterial\",_objectSpread({},inputParam)).then(function(response){sortData(response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),response.data)}});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};export var getDataForEditTestMaterial=function getDataForEditTestMaterial(screenName,operation,userInfo,ncontrolCode,selectedRecord,Data,primaryKeyName){return function(dispatch){var testgroupspecification=Data.SelectedSpecification;if(testgroupspecification.napprovalstatus===transactionStatus.DRAFT||testgroupspecification.napprovalstatus===transactionStatus.CORRECTION){var _rsapi$post2;var urlArray=[];var materialTypeUrl=rsapi.post(\"materialcategory/getMaterialType\",{\"userinfo\":userInfo});var materialCatUrl=rsapi.post(\"material/getMaterialcombo\",{nmaterialtypecode:Data.selectedMaterial.nmaterialtypecode});var materialUrl=rsapi.post(\"testgroup/getAvailableMaterial\",{nmaterialcatcode:Data.selectedMaterial.nmaterialcatcode,nmaterialtypecode:Data.selectedMaterial.nmaterialtypecode,ntestgrouptestcode:Data.SelectedTest.ntestgrouptestcode});var materialById=rsapi.post(\"testgroup/getActiveTestMaterialById\",(_rsapi$post2={},_defineProperty(_rsapi$post2,primaryKeyName,Data.selectedMaterial.ntestgrouptestmaterialcode),_defineProperty(_rsapi$post2,\"userinfo\",userInfo),_rsapi$post2));var validationUrl=rsapi.post(\"testgroup/validationForRetiredTemplate\",{\"userinfo\":userInfo,ntreeversiontempcode:Data.selectedNode.ntreeversiontempcode});urlArray=[materialTypeUrl,materialCatUrl,materialUrl,materialById,validationUrl];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){if(response[4].data===\"Success\"){var _selectedRecord={};var MaterialCategoryData=[];var MaterialTypeData=[];var MaterialData=[];var materialTypeMap=constructOptionList(response[0].data||[],\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,false);var materialType=materialTypeMap.get(\"OptionList\");var materialCategoryMap=constructOptionList(response[1].data.MaterialCategoryMain||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,false);var materialCategoryList=materialCategoryMap.get(\"OptionList\");var materialMap=constructjsonOptionList(response[2].data.MaterialCombo||[],\"nmaterialcode\",\"Material Name\",undefined,undefined,false);var materialList=materialMap.get(\"OptionList\");MaterialCategoryData.push({\"value\":response[3].data[\"nmaterialcatcode\"],\"label\":response[3].data[\"smaterialcatname\"]});MaterialTypeData.push({\"value\":response[3].data[\"nmaterialtypecode\"],\"label\":response[3].data[\"smaterialtypename\"]});MaterialData.push({\"value\":response[3].data[\"nmaterialcode\"],\"label\":response[3].data[\"smaterialname\"]});_selectedRecord=response[3].data;_selectedRecord[\"nmaterialcatcode\"]=MaterialCategoryData[0];_selectedRecord[\"nmaterialtypecode\"]=MaterialTypeData[0];_selectedRecord[\"nmaterialcode\"]=MaterialData[0];dispatch({type:DEFAULT_RETURN,payload:{materialType:materialType,materialList:materialList,materialCategoryList:materialCategoryList,selectedRecord:_selectedRecord,isOpen:true,operation:operation,screenName:screenName,openChildModal:true,ncontrolCode:ncontrolCode,loading:false}});}else{toast.warn(intl.formatMessage({id:response[4].data}));dispatch({type:DEFAULT_RETURN,payload:{operation:operation,screenName:screenName,ncontrolCode:ncontrolCode,loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));}};};//To get spec details for copy action --ALPD-4099 ,work done by Dhanushya R I\nexport var getSpecDetailsForCopy=function getSpecDetailsForCopy(data,key,isProduct,masterDatas,selectedRecord){return function(dispatch){dispatch(initRequest(true));//ALPD-4758 done by Dhanushya RI,to load sample category only for categorybasedflow yes\nrsapi.post(\"/testgroup/getSpecDetailsForCopy\",{nproductcode:isProduct==1?data.value:-1,nsampletypecode:masterDatas.selectedNode.nsampletypecode,//ALPD-5527--vignesh R-->Test Group screen -> Profile showing incorrectly for selected sample category.  \n//start\nnproductcatcode:data.item.nproductcatcode,//end\nnprojectmastercode:masterDatas.selectedNode.nprojectmastercode,ntreeversiontempcode:isProduct===1?masterDatas.selectedNode.nproductcode===data.value&&masterDatas.selectedNode.nproductcatcode===data.item.nproductcatcode?masterDatas.selectedNode.ntreeversiontempcode:-1:masterDatas.selectedNode.nproductcatcode===data.item.nproductcatcode?masterDatas.selectedNode.ntreeversiontempcode:-1}).then(function(response){sortData(response.data);//ALPD-4758 done by Dhanushya RI,to load sample category only for categorybasedflow yes\nvar ntreeversiontempcode=isProduct===1?masterDatas.selectedNode.nproductcode===data.value&&masterDatas.selectedNode.nproductcatcode===data.item.nproductcatcode?masterDatas.selectedNode.ntreeversiontempcode:-1:masterDatas.selectedNode.nproductcatcode===data.item.nproductcatcode?masterDatas.selectedNode.ntreeversiontempcode:-1;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{CopyFocusKey:response.data.FocusKey,CopyActiveKey:response.data.ActiveKey,//selectedCopyNodeManipulationCode: response.data.selectedNode.ntemplatemanipulationcode,\n//selectedCopyProfileName: response.data.selectedNode.sleveldescription,\n//scopyspecname: response.data.selectedNode.sleveldescription\n//ALPD-4265 Aravindh 11/06/2024 validate null in selectedNode\nselectedCopyNodeManipulationCode:response.data.selectedNode===null?\"\":response.data.selectedNode.ntemplatemanipulationcode,selectedCopyProfileName:response.data.selectedNode===null?\"\":response.data.selectedNode.sleveldescription,scopyspecname:response.data.selectedNode===null?\"\":response.data.selectedNode.sleveldescription});var selectedRecordCopy=_objectSpread(_objectSpread({nproductcode:data,nproductcatcode:data},response.data),{},{CopyFocusKey:response.data.FocusKey,CopyActiveKey:response.data.ActiveKey,isCopy:true});var CopyOpenNodes=response.data.OpenNodes;dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,masterData:_objectSpread(_objectSpread({},masterDatas),{},{selectedRecordCopy:selectedRecordCopy,CopyOpenNodes:CopyOpenNodes}),loading:false,testskip:0}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{masterData:masterDatas,loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/TestGroupAction.js"],"names":["toast","rsapi","DEFAULT_RETURN","attachmentType","parameterType","SampleType","transactionStatus","MaterialType","constructjsonOptionList","constructOptionList","rearrangeDateFormat","sortData","getComboLabelValue","Axios","intl","initRequest","sampleTypeOnChange","inputParam","masterData","dispatch","url","classUrl","post","methodUrl","inputData","then","response","data","type","payload","tempFilterData","loading","catch","error","status","warn","message","filterTestGroup","searchRef","current","value","filterData","selectedRecordCopy","AgaramTree","isrulesenginerequired","searchedData","undefined","testskip","historyDataState","sort","filter","createTree","selectedRecord","userInfo","ncontrolCode","isValid","ntreeversiontempcode","nsampletypecode","item","ncategorybasedflowrequired","YES","nproductcatcode","ncategorybasedflow","nproductcode","formatMessage","id","sampletype","ncategorycode","nprojectmastercode","userinfo","treetemplatemanipulation","selectedNode","treetempTranstestGroup","mandatoryFields","forEach","index","sleveldescription","push","slabelname","openModal","operation","screenName","TreetempTranstestGroup","treeMandatoryFields","editTree","treeVersionTemplateIndex","findIndex","x","templateVersionStatus","ntransactionstatus","RETIRED","addSpecification","masterDatas","nnextchildcode","SelectedSpecification","urlArray","testgroupspecification","napprovalstatus","CORRECTION","DRAFT","all","sproductname","label","sproductcatname","dexpirydate","ntzexpirydate","stimezoneid","sspecname","ExpiryDate","selectedCopyProfileName","selectedCopyNodeManipulationCode","ntemplatemanipulationcode","CopyFocusKey","FocusKey","CopyActiveKey","ActiveKey","scopyspecname","ncomponentrequired","ACTIVE","ntimezonecode","isCopy","timeZoneList","get","addComponent","genericLabel","nclinicaltyperequired","testGroupSpecSampleType","length","testCategory","sampleTypeMap","slanguagetypecode","testGroupInputData","TestCategory","TestGroupSpecSampleType","TestGroupTest","ncomponentcode","ntestcategorycode","addTestGroupTest","selectedComponent","selectedSpecification","openTestModal","testgroupspecsampletype","stestcategoryname","stestcategorycode","editTestGroupTest","selectedTest","ntestcode","testgrouptest","editObject","SelectedTestGroupTest","testFileItem","TestGroupTestFile","SelectedTest","nsectioncode","ssectionname","nmethodcode","smethodname","ninstrumentcatcode","sinstrumentcatname","ncontainertypecode","scontainertype","ntestpackagecode","stestpackagename","sfilename","ntestgroupfilecode","section","method","instrumentCategory","containerType","testFile","testpackage","editTestGroupParameter","selectedParameter","testgrouptestparameter","parameterObject","TestGroupTestParameter","predefinedObject","TestGroupTestPredefinedParameter","characterObject","TestGroupTestCharParameter","numericObject","TestGroupTestNumericParameter","nunitcode","sunitname","nresultaccuracycode","sresultaccuracyname","nparametertypecode","sdisplaystatus","parameterTypeCode","nchecklistversioncode","schecklistname","schecklistversionname","ntestformulacode","sformulaname","sformulacalculationdetail","sformulacalculationcode","scharname","ntestgrouptestcharcode","ntestgrouptestpredefcode","spredefinedname","ndefaultstatus","ngradecode","ntestgrouptestnumericcode","sminlod","smaxlod","sminb","smina","smaxa","smaxb","sminloq","smaxloq","sdisregard","sresultvalue","sgradename","gradeMap","unitMap","resultAccuracyMap","grade","unit","resultaccuracy","disabled","NUMERIC","openChildModal","testFormula","TestFormula","checkListVersion","needRoundingDigit","needUnit","parameterData","defaultUnit","getTestGroupParameter","getComponentBySpecId","keyName","getTestGroupDetails","ntestgrouptestcode","parseInt","getTestGroupComponentDetails","testtake","getSpecification","activeKey","focusKey","primaryKey","TestGroupSpecification","TestGroupTestFormula","TestGroupTestClinicalSpec","TestGroupSpecFile","TestGroupSpecificationHistory","SelectedComponent","RulesEngine","changeTestCategory","getSpecificationDetails","editSpecFile","testgroupspecfile","linkmaster","LinkMaster","defaultLink","ndefaultlink","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","slinkdescription","sdescription","nlinkdefaultstatus","sfilesize","nfilesize","nallotedspeccode","nspecfilecode","stypename","editFiles","Object","values","FTP","addTestGroupCodedResult","paramdata","optionalData","testgrouptestpredefinedparameter","selectedsubcodedresult","selectsubcodedelete","editCodedResult","ntestgrouptestparametercode","spredefinedsynonym","spredefinedcomments","nneedresultentryalert","nneedsubcodedresult","salertmessage","showSaveContinue","needCodedResult","subCodedResultView","selectedsubcoderesult","addTestGroupNumericTab","ntoageperiod","nfromageperiod","genderList","gender","gradeNewMap","PeriodMap","period","ntestgrouptestclinicspeccode","nfromage","ntoage","ngendercode","nhigha","nhighb","nlowa","nlowb","formAgePeriod","toAgePeriod","viewTestGroupCheckList","openTemplateModal","testGroupCheckList","templateData","reportSpecification","loadEsign","showConfirmAlert","document","getElementById","setAttribute","filepath","click","retireSpecification","getDataForTestMaterial","primaryKeyName","materialTypeUrl","validationUrl","console","log","materialTypeMap","materialType","materialTypedefault","nmaterialtypecode","getMaterialCategoryBasedMaterialType","materialList","materialCategoryList","isOpen","materialCategoryMap","MaterialCategoryMain","materialCategorydefault","responsecat","nmaterialcatcode","getMaterialBasedMaterialCategory","materialMap","MaterialCombo","getTestGroupMaterial","getDataForEditTestMaterial","Data","materialCatUrl","selectedMaterial","materialUrl","materialById","ntestgrouptestmaterialcode","MaterialCategoryData","MaterialTypeData","MaterialData","getSpecDetailsForCopy","key","isProduct","CopyOpenNodes","OpenNodes"],"mappings":"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","sourcesContent":["import {\r\n    toast\r\n} from \"react-toastify\";\r\nimport rsapi from \"../rsapi\";\r\nimport {\r\n    DEFAULT_RETURN\r\n} from \"./LoginTypes\";\r\nimport {\r\n    attachmentType,\r\n    parameterType,\r\n    SampleType,\r\n    transactionStatus,MaterialType\r\n} from \"../components/Enumeration\";\r\nimport {\r\n    constructjsonOptionList,\r\n    constructOptionList,\r\n    rearrangeDateFormat,\r\n    //formatInputDate,\r\n    sortData,getComboLabelValue\r\n} from \"../components/CommonScript\";\r\nimport Axios from \"axios\";\r\nimport {\r\n    intl\r\n} from \"../components/App\";\r\nimport {\r\n    initRequest\r\n} from \"./LoginAction\";\r\n\r\n\r\nexport const sampleTypeOnChange = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let url = \"/testgroup\";\r\n        if (inputParam.classUrl) {\r\n            url = inputParam.classUrl;\r\n        }\r\n        rsapi.post(url + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        tempFilterData: inputParam.inputData.tempFilterData,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    masterData[\"ExistingLinkTable\"] = [];\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const filterTestGroup = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/filterTestGroup\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                if (searchRef.current) {\r\n                    searchRef.current.value = \"\";\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n\t\t\t\t\t\t\t//ALPD-5529--Vignesh R(06-03-2025)-->Test group screen -> Profile showing wrongly in specific scenario.\r\n                            filterData: inputParam.inputData.filterData,\r\n                            selectedRecordCopy:response.data.AgaramTree,\r\n                            isrulesenginerequired:inputParam['inputData']['filterData']['nsampletypecode']['item']['nrulesenginerequired'],\r\n                            searchedData: undefined\r\n                        }, \r\n                        loading: false,\r\n                        testskip: 0,\r\n                        historyDataState: {\r\n                            ...inputParam.historyDataState,\r\n                            sort: undefined,\r\n                            filter: undefined\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const createTree = (selectedRecord, userInfo, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        //ALPD-1466,1465\r\n     let isValid =false;\r\n        if (selectedRecord && selectedRecord.ntreeversiontempcode !== \"\") {\r\n            // if (selectedRecord && selectedRecord.nsampletypecode.item.nportalrequired === transactionStatus.YES &&\r\n            //     masterData.FocusKey === \"root\" && masterData && masterData.TreeTemplateManipulation.length > 0) {\r\n            //     toast.warn(intl.formatMessage({\r\n            //         id: \"IDS_MORETHANONEPROFILENOTALLOWEDCLINICALTYPE\"\r\n            //     }));\r\n            // } else \r\n            if (selectedRecord.nsampletypecode.item.ncategorybasedflowrequired === transactionStatus.YES) {\r\n                isValid=true;\r\n            } \r\n            //ALPD-5320 Test Group - Flush Db- no record added click root or specification add button 500 error occurred.\r\n            else if ((selectedRecord.nproductcatcode && selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES) || (selectedRecord.nproductcode)) {\r\n                isValid=true;\r\n            } else {\r\n               \r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_PRODUCTNOTAVAILABLE\"\r\n                }));\r\n            }\r\n        }\r\n         else {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\" }));\r\n            }\r\n            if(isValid){\r\n                const inputParam = {\r\n                    sampletype: selectedRecord.nsampletypecode.item,\r\n                    ncategorycode: selectedRecord.nproductcatcode.value,\r\n                    ntreeversiontempcode: selectedRecord.ntreeversiontempcode.value,\r\n                    nprojectmastercode: selectedRecord.nprojectmastercode ? selectedRecord.nprojectmastercode.value : -1,\r\n                    userinfo: userInfo,\r\n                    treetemplatemanipulation: masterData.selectedNode\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/testgroup/getTemplateMasterDetails\", {\r\n                    ...inputParam\r\n                })\r\n                    .then(response => {\r\n                        const treetempTranstestGroup = response.data[\"TreetempTranstestGroup\"] || [];\r\n\r\n                        // const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\r\n                        //         return {\r\n                        //             \"idsName\": item.slabelname,\r\n                        //             \"dataField\": \"sleveldescription_\" + index,\r\n                        //             \"mandatory\": true\r\n                        //         }\r\n                        // });\r\n\r\n                        //  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\r\n                        const mandatoryFields = [];\r\n                        treetempTranstestGroup.forEach((item, index) => {\r\n                            if (item.sleveldescription === null) {\r\n                                mandatoryFields.push({\r\n                                    \"idsName\": item.slabelname,\r\n                                    \"dataField\": \"sleveldescription_\" + index,\r\n                                    \"mandatory\": true\r\n                                })\r\n                            }\r\n                        });\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"create\",\r\n                                screenName: \"IDS_PROFILETREE\",\r\n                                TreetempTranstestGroup: treetempTranstestGroup,\r\n                                treeMandatoryFields: mandatoryFields,\r\n                                //selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            }\r\n}\r\n}\r\n \r\nexport const editTree = (operation, selectedNode, userinfo, ncontrolCode, filterData, masterData) => {\r\n    return (dispatch) => {\r\n        if (!selectedNode) {\r\n            return toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTPROFILENODETOEDIT\"\r\n            }))\r\n        }\r\n        //console.log(\"edit Tree:\", selectedNode, masterData);\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === selectedNode[\"ntreeversiontempcode\"]);\r\n        // if (treeVersionTemplateIndex !== -1){\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        //}\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedNode) {\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"/testgroup/getTreeById\", {\r\n                    userinfo,\r\n                    treetemplatemanipulation: selectedNode,\r\n                    ntreeversiontempcode: filterData.ntreeversiontempcode.value\r\n                })\r\n                    .then(response => {\r\n                        const treetempTranstestGroup = response.data;\r\n                        const treeMandatoryFields = treetempTranstestGroup && [{\r\n                            \"idsName\": treetempTranstestGroup.slabelname,\r\n                            \"dataField\": \"sleveldescription\",\r\n                            \"mandatory\": true\r\n                        }];\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_EDITTREE\",\r\n                                selectedRecord: {\r\n                                    ...treetempTranstestGroup\r\n                                },\r\n                                treeMandatoryFields,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTPROFILENODETOEDIT\"\r\n                }))\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addSpecification = (operation, inputParam, ncontrolCode, masterDatas) => {\r\n    return (dispatch) => {\r\n        //if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\r\n        if (inputParam.selectedRecord && inputParam.selectedRecord.ntreeversiontempcode !== \"\") {\r\n            //ALPD-5320 Test Group - Flush Db- no record added click root or specification add button 500 error occurred.\r\n            if (inputParam.selectedRecord.ntreeversiontempcode && inputParam.selectedRecord.ntreeversiontempcode.item.ntransactionstatus === transactionStatus.RETIRED) {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n            }\r\n            else {\r\n                if (inputParam.selectedNode != null && inputParam.selectedNode.nnextchildcode === -1) {\r\n\r\n                    if (masterDatas && masterDatas.SelectedSpecification === null && operation === \"copy\") {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n                    }\r\n                    else {\r\n                        let urlArray = [];\r\n                        if (operation === \"update\") {\r\n                            const testgroupspecification = inputParam.testgroupspecification[0];\r\n                            // let isValidOperation = false;\r\n                            // if (operation === \"update\"){\r\n                            //     if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\r\n                            //         testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\r\n                            //             isValidOperation = true;\r\n                            //     }\r\n                            //     else {\r\n                            //         toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\r\n                            //         return;\r\n                            //     }\r\n                            // }\r\n                            // else{\r\n                            //     isValidOperation = true;\r\n                            // }\r\n                            if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\r\n                                testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\r\n                                urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n                                urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\", {\r\n                                    testgroupspecification,\r\n                                    userinfo: inputParam.userinfo,\r\n                                    ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value\r\n                                }));\r\n                            }\r\n                            else {\r\n                                toast.warn(intl.formatMessage({ id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\" }));\r\n                                return;\r\n                            }\r\n                        }\r\n                        else {\r\n                            urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n                            urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\", {\r\n                                userinfo: inputParam.userInfo,\r\n                                ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value,\r\n                                nprojectmastercode:masterDatas.selectedNode.nprojectmastercode\r\n                                //currentdate: formatInputDate(new Date(), true)\r\n                            }));\r\n                        }\r\n                        Axios.all(urlArray)\r\n                            .then(response => {\r\n                                let selectedRecord = {};\r\n                                let masterData = inputParam.masterData !== undefined ? inputParam.masterData : masterDatas;\r\n\r\n                                if (operation === \"update\") {\r\n                                    masterData = {\r\n                                        ...inputParam.masterData,\r\n                                        ...response[1].data,\r\n                                        testgroupspecification: inputParam.testgroupspecification\r\n                                    }\r\n                                    selectedRecord = {\r\n                                        sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\r\n                                        sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\r\n                                        ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\r\n                                        ...response[1].data.SelectedSpecification,\r\n                                        //dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\r\n                                        dexpirydate: rearrangeDateFormat(inputParam.userinfo, response[1].data.SelectedSpecification[\"sexpirydate\"]),\r\n                                        ntzexpirydate: {\r\n                                            \"label\": response[1].data.SelectedSpecification.stimezoneid,\r\n                                            \"value\": response[1].data.SelectedSpecification.ntzexpirydate\r\n                                        }\r\n                                    };\r\n                                } else {\r\n                                    selectedRecord = {\r\n                                        sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode && inputParam.selectedRecord.nproductcode.label,\r\n                                        sproductcatname: inputParam.selectedRecord.nproductcatcode.label,\r\n                                        sspecname: inputParam.selectedNode.sleveldescription,\r\n                                        ncategorybasedflow: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow,\r\n                                        dexpirydate: rearrangeDateFormat(inputParam.userInfo, response[1].data.ExpiryDate),\r\n                                        selectedCopyProfileName: inputParam.selectedNode.sleveldescription,\r\n                                        selectedCopyNodeManipulationCode: inputParam.selectedNode.ntemplatemanipulationcode,\r\n                                        CopyFocusKey: masterData.FocusKey,\r\n                                        CopyActiveKey: masterData.ActiveKey,\r\n                                        scopyspecname: inputParam.selectedNode.sleveldescription,\r\n                                        //ncomponentrequired: inputParam.selectedNode.nsampletypecode === SampleType.CLINICALTYPE ? transactionStatus.YES : transactionStatus.NO,\r\n                                       // ncomponentrequired: transactionStatus.YES,\r\n                                        // ncomponentrequired :inputParam.selectedRecord.nproductcatcode.item.nmaterialtypecode == MaterialType.IQCSTANDARDMATERIALTYPE ?transactionStatus.NO:transactionStatus.YES,\r\n                                        ncomponentrequired : inputParam.selectedRecord.nsampletypecode && inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired ? inputParam.selectedRecord.nsampletypecode.item.ncomponentrequired : transactionStatus.YES,\r\n                                        // nclinicalspec: inputParam.selectedNode.nsampletypecode===SampleType.CLINICALTYPE?transactionStatus.YES:transactionStatus.NO,\r\n                                        ntransactionstatus: transactionStatus.ACTIVE,\r\n                                        ntzexpirydate: {\r\n                                            \"label\": inputParam.userInfo.stimezoneid,\r\n                                            \"value\": inputParam.userInfo.ntimezonecode\r\n                                        }\r\n                                    };\r\n                                    // ALPD-4757, When copy spec slideout opens, isCopy becomes false due to get sample cat or sample based on main filter\r\n                                    const selectedRecordCopy = {isCopy : false}\r\n                                    masterData[\"selectedRecordCopy\"] = selectedRecordCopy;\r\n                                }\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        openModal: true,\r\n                                        operation: operation,\r\n                                        screenName: \"IDS_SPECIFICATION\",\r\n                                        masterData,\r\n                                        selectedRecord,\r\n                                        timeZoneList: constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", false, false, true).get(\"OptionList\"),\r\n                                        ncontrolCode\r\n                                    }\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                if (error.response.status === 500) {\r\n                                    toast.error(error.message);\r\n                                } else {\r\n                                    toast.warn(error.response.data);\r\n                                }\r\n                            })\r\n                    }\r\n                } else {\r\n                    if (operation === \"copy\") {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTSPECIFICATION\" }));\r\n                    }\r\n                    else {\r\n                        toast.warn(intl.formatMessage({ id: \"IDS_SELECTLASTLEVELNODETOADDSPEC\" }));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_STUDYPLANTEMPLATEISNOTAVAILABLE\" }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const addComponent = (SelectedSpecification, userInfo, ncontrolCode, masterData,genericLabel) => {\r\n    return (dispatch) => {\r\n\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            rsapi.post(\"/testgroup/getAvailableComponent\", {\r\n                userinfo: userInfo,\r\n                testgroupspecification: {...SelectedSpecification,nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"],\r\n                nclinicaltyperequired:masterData.nsampletypecode.item.nclinicaltyperequired}\r\n            })\r\n                .then(response => {\r\n                    const testGroupSpecSampleType = response.data[\"TestGroupSpecSampleType\"] || [];\r\n                    if (testGroupSpecSampleType.length > 0) {\r\n                        const testCategory = constructOptionList(response.data[\"TestCategory\"] || [], \"ntestcategorycode\", \"stestcategoryname\", 'ntestcategorycode', 'ascending', false);\r\n                        const sampleTypeMap = constructOptionList(testGroupSpecSampleType, \"ncomponentcode\", \"scomponentname\", false, false, true);\r\n                        // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"create\",\r\n                                screenName:genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode],\r\n                                testGroupInputData: {\r\n                                    TestCategory: testCategory.get(\"OptionList\"),\r\n                                    TestGroupSpecSampleType: sampleTypeMap.get(\"OptionList\"),\r\n                                    TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                                },\r\n                                selectedRecord: {\r\n                                    ncomponentcode: sampleTypeMap.get(\"DefaultValue\"),\r\n                                    ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                                },\r\n                                ncontrolCode\r\n                            }\r\n                        });\r\n                    } else {\r\n                        toast.warn(\r\n                             genericLabel[\"Component\"][\"jsondata\"][\"sdisplayname\"][userInfo.slanguagetypecode]+\" \"+intl.formatMessage({ id: \"IDS_NOTAVAILABLE\" })\r\n                        );\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport const addTestGroupTest = (selectedComponent, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        if (masterData.selectedNode !== undefined && masterData.selectedNode !== null) {\r\n            const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n                x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n            const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n            if (templateVersionStatus === transactionStatus.RETIRED) {\r\n                toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n            }\r\n            else {\r\n                if (selectedSpecification) {\r\n                    if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                        selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n\r\n                        let openTestModal = false;\r\n                        if (selectedSpecification.ncomponentrequired === transactionStatus.YES) {\r\n                            if (selectedComponent == undefined) {\r\n                                toast.warn(intl.formatMessage({\r\n                                    id: \"IDS_NEEDCOMPONENTTOADDTEST\"\r\n                                }));\r\n                            } else {\r\n                                openTestModal = true;\r\n                            }\r\n                        } else {\r\n                            openTestModal = true;\r\n                        }\r\n\r\n                        if (openTestModal === true) {\r\n                            rsapi.post(\"/testgroup/getAvailableTest\", {\r\n                                userinfo: userInfo,\r\n                                testgroupspecsampletype: selectedComponent,\r\n                                ntreeversiontempcode: filterData.ntreeversiontempcode.value,\r\n                                nprojectmastercode: masterData.selectedNode.nprojectmastercode,\r\n                                nclinicaltyperequired:filterData.nsampletypecode && filterData.nsampletypecode.item.nclinicaltyperequired\r\n                            })\r\n                                .then(response => {\r\n                                    let testCategory;\r\n                                    // = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\r\n                                    // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                                    if (response.data[\"TestCategory\"].length > 0) {\r\n                                        testCategory = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\r\n                                        dispatch({\r\n                                            type: DEFAULT_RETURN,\r\n                                            payload: {\r\n                                                openModal: true,\r\n                                                operation: \"create\",\r\n                                                screenName: \"IDS_TEST\",\r\n                                                testGroupInputData: {\r\n                                                    TestCategory: testCategory.get(\"OptionList\"),\r\n                                                    TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                                                },\r\n                                                selectedRecord: {\r\n                                                    ntestcategorycode: {\r\n                                                        label: response.data[\"SelectedTestCategory\"].stestcategoryname,\r\n                                                        value: response.data[\"SelectedTestCategory\"].stestcategorycode,\r\n                                                        item: response.data[\"SelectedTestCategory\"]\r\n                                                    }\r\n                                                    //ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                                                },\r\n                                                ncontrolCode\r\n                                            }\r\n                                        });\r\n                                    } else {\r\n                                        toast.warn(intl.formatMessage({\r\n                                            id: \"IDS_TESTCATEGORYNOTAVAILABLE\"\r\n                                        }))\r\n                                    }\r\n                                })\r\n                                .catch(error => {\r\n                                    if (error.response.status === 409 || error.response.status === 417) {\r\n                                        toast.warn(error.response.data);\r\n                                    } else {\r\n                                        toast.error(error.message);\r\n                                    }\r\n                                });\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                        }));\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_SELECTSPECIFICATION\"\r\n                    }));\r\n                }\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTSPECIFICATION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupTest = (operation, selectedTest, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                const ntestcode = selectedTest.ntestcode;\r\n                const urlArray = [\r\n                    rsapi.post(\"/testgroup/getActiveTestById\", {\r\n                        userinfo: userInfo,\r\n                        testgrouptest: selectedTest,\r\n                        ntreeversiontempcode: filterData.ntreeversiontempcode.value,\r\n                        nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"] ? masterData[\"selectedNode\"][\"nprojectmastercode\"]  :-1                  \r\n                    }),\r\n                    // rsapi.post(\"/source/getSource\", {\r\n                    //     userinfo: userInfo\r\n                    // }),\r\n                    rsapi.post(\"/testmaster/getSection\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getMethod\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getInstrumentCategory\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getTestAttachment\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/testmaster/getContainerType\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    }),\r\n\t\t\t//ALPD-3418\r\n                    rsapi.post(\"/testmaster/getTestPackage\", {\r\n                        ntestcode,\r\n                        userinfo: userInfo\r\n                    })\r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        // const editObject = response[0].data.TestGroupTest;\r\n                        // const testFileItem = response[0].data.TestGroupTestFile;\r\n                        // const SelectedTest = response[0].data.TestGroupTest;\r\n\r\n                        const editObject = response[0].data.SelectedTestGroupTest;\r\n                        const testFileItem = response[0].data.TestGroupTestFile;\r\n                        const SelectedTest = response[0].data.SelectedTest;\r\n                        //const TestGroupTest = response[0].data.TestGroupTest;\r\n\r\n                        const selectedRecord = {\r\n                            ...editObject,\r\n                            // nsourcecode: {\r\n                            //     \"label\": editObject.ssourcename,\r\n                            //     \"value\": editObject.nsourcecode\r\n                            // },\r\n                            nsectioncode: {\r\n                                \"label\": editObject.ssectionname,\r\n                                \"value\": editObject.nsectioncode\r\n                            },\r\n                            nmethodcode: {\r\n                                \"label\": editObject.smethodname,\r\n                                \"value\": editObject.nmethodcode\r\n                            },\r\n                            ninstrumentcatcode: {\r\n                                \"label\": editObject.sinstrumentcatname,\r\n                                \"value\": editObject.ninstrumentcatcode\r\n                            },\r\n                            ncontainertypecode: {\r\n                                \"label\": editObject.scontainertype,\r\n                                \"value\": editObject.ncontainertypecode\r\n                            },\r\n                            ntestpackagecode: {\r\n                                \"label\": editObject.stestpackagename,\r\n                                \"value\": editObject.ntestpackagecode\r\n                            }\r\n                        };\r\n                        if (testFileItem) {\r\n                            selectedRecord[\"ntestfilecode\"] = {\r\n                                \"label\": testFileItem.sfilename,\r\n                                \"value\": testFileItem.ntestgroupfilecode,\r\n                                item: testFileItem\r\n                            };\r\n                            selectedRecord[\"ntestgroupfilecode\"] = testFileItem.ntestgroupfilecode\r\n                        }\r\n                        if (editObject.nmethodcode !== -1) {\r\n                            selectedRecord[\"nmethodcode\"] = {\r\n                                \"label\": editObject.smethodname,\r\n                                \"value\": editObject.nmethodcode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"nmethodcode\"] = undefined;\r\n                        }\r\n                        if (editObject.ninstrumentcatcode !== -1) {\r\n                            selectedRecord[\"ninstrumentcatcode\"] = {\r\n                                \"label\": editObject.sinstrumentcatname,\r\n                                \"value\": editObject.ninstrumentcatcode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"ninstrumentcatcode\"] = undefined;\r\n                        }\r\n                        if (editObject.ncontainertypecode !== -1) {\r\n                            selectedRecord[\"ncontainertypecode\"] = {\r\n                                \"label\": editObject.scontainertype,\r\n                                \"value\": editObject.ncontainertypecode\r\n                            }\r\n                        } else {\r\n                            selectedRecord[\"ncontainertypecode\"] = undefined;\r\n                        }\r\n\t\t\t\t\t\t\t//ALPD-3418\r\n                        if (editObject.ntestpackagecode !== -1) {\r\n                            selectedRecord[\"ntestpackagecode\"]= {\r\n                                \"label\": editObject.stestpackagename,\r\n                                \"value\": editObject.ntestpackagecode\r\n                            }\r\n                        }\r\n                        else {\r\n                            selectedRecord[\"ntestpackagecode\"] = undefined;\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    ...response[0].data,\r\n                                    SelectedTest: SelectedTest,\r\n                                    //TestGroupTest : [TestGroupTest]\r\n                                },\r\n                                openModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_EDITTESTGROUPTEST\",\r\n                                testGroupInputData: {\r\n                                    // source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\r\n                                    section: constructOptionList(response[1].data || [], \"nsectioncode\", \"ssectionname\", false, false, true).get(\"OptionList\"),\r\n                                    method: constructOptionList(response[2].data || [], \"nmethodcode\", \"smethodname\", false, false, true).get(\"OptionList\"),\r\n                                    instrumentCategory: constructOptionList(response[3].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true).get(\"OptionList\"),\r\n                                    containerType: constructOptionList(response[5].data || [], \"ncontainertypecode\", \"scontainertype\", false, false, true).get(\"OptionList\"),\r\n                                    testFile: constructOptionList(response[4].data || [], \"ntestfilecode\", \"sfilename\", false, false, true).get(\"OptionList\"),\r\n                                    testpackage:constructOptionList(response[6].data || [], \"ntestpackagecode\", \"stestpackagename\", false, false, true).get(\"OptionList\")\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        //console.log(\"errror:\", error);\r\n                        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupParameter = (operation, selectedParameter, userInfo, ncontrolCode, selectedSpecification, filterData, masterData) => {\r\n    return dispatch => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"/testgroup/getActiveParameterById\", {\r\n                        userinfo: userInfo,\r\n                        testgrouptestparameter: {...selectedParameter,nprojectmastercode:masterData[\"selectedNode\"][\"nprojectmastercode\"]},\r\n                        ntreeversiontempcode: filterData.ntreeversiontempcode.value\r\n                    }),\r\n                    rsapi.post(\"/parametertype/getParameterType\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"unit/getUnit\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"checklist/getApprovedChecklist\", {\r\n                        \"userinfo\": userInfo\r\n                    }),\r\n                    rsapi.post(\"testmaster/getResultAccuracy\", {\r\n                        userinfo: userInfo\r\n                    })\r\n                  \r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        const parameterObject = response[0].data.TestGroupTestParameter[0];\r\n                        const predefinedObject = response[0].data.TestGroupTestPredefinedParameter;\r\n                        const characterObject = response[0].data.TestGroupTestCharParameter;\r\n                        const numericObject = response[0].data.TestGroupTestNumericParameter && response[0].data.TestGroupTestNumericParameter.length > 0 ? response[0].data.TestGroupTestNumericParameter[0] : {};\r\n                        const selectedRecord = {\r\n                            ...parameterObject,\r\n                            nunitcode: {\r\n                                \"label\": parameterObject.sunitname,\r\n                                \"value\": parameterObject.nunitcode\r\n                            },\r\n                            nresultaccuracycode: {\r\n                                \"label\": parameterObject.sresultaccuracyname,\r\n                                \"value\": parameterObject.nresultaccuracycode\r\n                            },\r\n                            nparametertypecode: {\r\n                                \"label\": parameterObject.sdisplaystatus,\r\n                                \"value\": parameterObject.nparametertypecode\r\n                            },\r\n                            parameterTypeCode: parameterObject.nparametertypecode,\r\n                            nchecklistversioncode: {\r\n                                \"label\": parameterObject.schecklistname,\r\n                                \"value\": parameterObject.nchecklistversioncode\r\n                            },\r\n                            schecklistversionname: parameterObject.schecklistversionname,\r\n                            ntestformulacode: parameterObject.ntestformulacode > 0 ? {\r\n                                \"label\": parameterObject.sformulaname,\r\n                                \"value\": parameterObject.ntestformulacode,\r\n                                item: {\r\n                                    sformulacalculationdetail: parameterObject.sformulaname,\r\n                                    ntestformulacode: parameterObject.ntestformulacode,\r\n                                    sformulacalculationcode: parameterObject.sformulacalculationcode\r\n                                }\r\n                            } : \"\"\r\n                        };\r\n                        if (selectedRecord[\"schecklistname\"] === \"NA\") {\r\n                            delete selectedRecord[\"nchecklistversioncode\"]\r\n                        }\r\n                        if (selectedRecord[\"schecklistversionname\"] === \"NA\") {\r\n                            delete selectedRecord[\"schecklistversionname\"]\r\n                        }\r\n                        if (selectedRecord[\"sunitname\"] === \"NA\") {\r\n                            delete selectedRecord[\"nunitcode\"]\r\n                        }\r\n                        if (selectedRecord[\"sresultaccuracyname\"] === \"NA\") {\r\n                            delete selectedRecord[\"nresultaccuracycode\"]\r\n                        }\r\n                        if (characterObject) {\r\n                            selectedRecord[\"scharname\"] = characterObject.scharname;\r\n                            selectedRecord[\"ntestgrouptestcharcode\"] = characterObject.ntestgrouptestcharcode;\r\n                        }\r\n                        if (predefinedObject) {\r\n                            selectedRecord[\"ntestgrouptestpredefcode\"] = predefinedObject.ntestgrouptestpredefcode;\r\n                            selectedRecord[\"spredefinedname\"] = predefinedObject.spredefinedname;\r\n                            selectedRecord[\"ndefaultstatus\"] = predefinedObject.ndefaultstatus;\r\n                            selectedRecord[\"ngradecode\"] = {\r\n                                \"label\": predefinedObject.sdisplaystatus,\r\n                                \"value\": predefinedObject.ngradecode\r\n                            };\r\n                        }\r\n                        if (numericObject) {\r\n                            selectedRecord[\"ntestgrouptestnumericcode\"] = numericObject.ntestgrouptestnumericcode;\r\n                            selectedRecord[\"sminlod\"] = numericObject.sminlod;\r\n                            selectedRecord[\"smaxlod\"] = numericObject.smaxlod;\r\n                            selectedRecord[\"sminb\"] = numericObject.sminb;\r\n                            selectedRecord[\"smina\"] = numericObject.smina;\r\n                            selectedRecord[\"smaxa\"] = numericObject.smaxa;\r\n                            selectedRecord[\"smaxb\"] = numericObject.smaxb;\r\n                            selectedRecord[\"sminloq\"] = numericObject.sminloq;\r\n                            selectedRecord[\"smaxloq\"] = numericObject.smaxloq;\r\n                            selectedRecord[\"sdisregard\"] = numericObject.sdisregard;\r\n                            selectedRecord[\"sresultvalue\"] = numericObject.sresultvalue;\r\n                            selectedRecord[\"ngradecode\"] = {\r\n                                \"label\": numericObject.sgradename,\r\n                                \"value\": numericObject.ngradecode\r\n                            };\r\n                        }\r\n                        const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                        const resultAccuracyMap = constructOptionList(response[5].data || [], \"nresultaccuracycode\", \"sresultaccuracyname\", false, false, true);\r\n                        const grade = gradeMap.get(\"OptionList\");\r\n                        const unit = unitMap.get(\"OptionList\");\r\n                        const resultaccuracy = resultAccuracyMap.get(\"OptionList\");\r\n                        const disabled = parameterObject.nparametertypecode === parameterType.NUMERIC ? false : true;\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                operation: operation,\r\n                                screenName: \"IDS_PARAMETER\",\r\n                                testGroupInputData: {\r\n                                    unit,\r\n                                    grade,\r\n                                    resultaccuracy,\r\n                                    testFormula: constructOptionList(response[0].data.TestFormula || [], \"ntestformulacode\", \"sformulaname\", false, false, true).get(\"OptionList\"),\r\n                                    parameterType: constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true).get(\"OptionList\"),\r\n                                    checkListVersion: constructOptionList(response[4].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true).get(\"OptionList\"),\r\n                                    needRoundingDigit: disabled,\r\n                                    needUnit: disabled\r\n                                },\r\n                                parameterData: {\r\n                                    grade,\r\n                                    defaultUnit: unitMap.get(\"DefaultValue\") ? unitMap.get(\"DefaultValue\") : \"\",\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\r\n//     return dispatch => {\r\n//         const testgroupspecification = optionalData.testgroupspecification;\r\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \r\n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n//             dispatch(initRequest(true));\r\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\r\n//             .then(response=>{\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN, \r\n//                     payload:{\r\n//                         openChildModal: true,\r\n//                         operation: \"create\",\r\n//                         screenName: \"IDS_FORMULA\",\r\n//                         testGroupInputData: {testFormula: response.data},\r\n//                         selectedRecord: {},\r\n//                         ncontrolCode\r\n//                 }});\r\n//             })\r\n//             .catch(error=>{\r\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\r\n//                 if(error.response.status === 409 || error.response.status === 417) {\r\n//                     toast.warn(error.response.data);\r\n//                 } else {\r\n//                     toast.error(error.message)\r\n//                 }\r\n//             });\r\n//         } else {\r\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport const getTestGroupParameter = (inputParam) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestGroupTestParameter\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getComponentBySpecId = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n            [inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0],\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                sortData(response.data);\r\n                if (searchRef.current) {\r\n                    searchRef.current.value = \"\";\r\n                }\r\n                const historyDataState = {\r\n                    ...inputParam.historyDataState,\r\n                    sort: undefined,\r\n                    filter: undefined\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        historyDataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupDetails = (inputParam) => {\r\n    return (dispatch) => { //...inputParam, \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/getTestGroupTest\", {\r\n            ntestgrouptestcode: parseInt(inputParam['ntestgrouptestcode']),\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                    sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        },\r\n                        testskip: undefined,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupComponentDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => { //...inputParam, \r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/getTestByComponentId\", {\r\n            testgroupspecsampletype: inputParam['testgroupspecsampletype'],\r\n            userinfo: inputParam.userInfo\r\n        })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                sortData(response.data);\r\n                if (searchRef.current)\r\n                    searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        testskip: 0,\r\n                        testtake: 5,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecification = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedRecord !== null) {\r\n            rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n                ...inputParam,\r\n                [inputParam.keyName]: inputParam.selectedRecord\r\n            })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    if (searchRef.current)\r\n                        searchRef.current.value = \"\";\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ActiveKey: inputParam.activeKey,\r\n                                FocusKey: inputParam.focusKey,\r\n                                primaryKey: inputParam.primaryKey,\r\n                                ...response.data,\r\n                                selectedNode: inputParam.selectedRecord,\r\n                                searchedData: undefined,\r\n\r\n                            },\r\n                            historyDataState: {\r\n                                ...inputParam.historyDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            },\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData: {\r\n                        ...masterData,\r\n                        selectedNode: inputParam.selectedRecord,\r\n                        TestGroupSpecification: [],\r\n                        SelectedSpecification: {},\r\n                        TestGroupTest: [],\r\n                        TestGroupTestParameter: [],\r\n                        TestGroupTestNumericParameter: [],\r\n                        TestGroupTestFormula: [],\r\n                        TestGroupTestPredefinedParameter: [],\r\n                        TestGroupTestClinicalSpec: [],\r\n                        TestGroupTestCharParameter: [],\r\n                        ActiveKey: inputParam.activeKey,\r\n                        FocusKey: inputParam.focusKey,\r\n                        SelectedTest: {},\r\n                        selectedParameter: {},\r\n                        TestGroupSpecFile: [],\r\n                        TestGroupSpecificationHistory: [],\r\n                        SelectedComponent: undefined,\r\n                        RulesEngine: []\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeTestCategory = (inputParam, testGroupInputData) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestMasterByCategory\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                inputParam.selectedRecord.ntestcode = [];\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord: inputParam.selectedRecord,\r\n                        testGroupInputData: {\r\n                            ...testGroupInputData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecificationDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/get\" + inputParam.methodUrl, {\r\n            ...inputParam.inputData\r\n        })\r\n            .then(response => {\r\n                if (searchRef.current)\r\n                    searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        screenName: inputParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const editSpecFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        const masterData = inputParam.masterData;\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            if (inputParam.testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                inputParam.testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n                    userinfo: inputParam.userInfo\r\n                }),\r\n                rsapi.post(\"/testgroup/getActiveSpecFileById\", {\r\n                    userinfo: inputParam.userInfo,\r\n                    testgroupspecfile: inputParam.selectedRecord,\r\n                    ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\r\n                })\r\n                ]\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        const linkmaster = response[0].data.LinkMaster;\r\n                        const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\r\n                        const editObject = response[1].data;\r\n                        let nlinkcode = {};\r\n                        let link = {};\r\n                        if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                            nlinkcode = {\r\n                                \"label\": editObject.slinkname,\r\n                                \"value\": editObject.nlinkcode\r\n                            }\r\n                            link = {\r\n                                slinkfilename: editObject.sfilename,\r\n                                slinkdescription: editObject.sdescription,\r\n                                nlinkdefaultstatus: editObject.ndefaultstatus,\r\n                                sfilesize: '',\r\n                                nfilesize: 0,\r\n                                ndefaultstatus: 4,\r\n                                sfilename: '',\r\n                            }\r\n\r\n                        } else {\r\n                            nlinkcode = defaultLink.length > 0 ? {\r\n                                \"label\": defaultLink[0].slinkname,\r\n                                \"value\": defaultLink[0].nlinkcode\r\n                            } : \"\"\r\n\r\n                            link = {\r\n                                slinkfilename: '',\r\n                                slinkdescription: '',\r\n                                sdescription: editObject.sdescription,\r\n                                nlinkdefaultstatus: 4,\r\n                                sfilesize: editObject.sfilesize,\r\n                                nfilesize: editObject.nfilesize,\r\n                                ndefaultstatus: editObject.ndefaultstatus,\r\n                                sfilename: editObject.sfilename,\r\n                            }\r\n                        }\r\n                        const selectedRecord = {\r\n                            // ...editObject,\r\n                            ...link,\r\n                            nallotedspeccode: editObject.nallotedspeccode,\r\n                            nspecfilecode: editObject.nspecfilecode,\r\n                            stypename: editObject.stypename,\r\n                            nattachmenttypecode: editObject.nattachmenttypecode,\r\n                            nlinkcode,\r\n                            // disabled: true\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                screenName: \"IDS_SPECFILE\",\r\n                                editFiles: Object.values(editObject).length > 0 && editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {},\r\n                                selectedRecord,\r\n                                ncontrolCode: inputParam.ncontrolCode\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        if (error.response.status === 409 || error.response.status === 417) {\r\n                            toast.warn(error.response.data);\r\n                        } else {\r\n                            toast.error(error.message)\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addTestGroupCodedResult = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\r\n    return (dispatch) => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            const testgroupspecification = optionalData.testgroupspecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        \"userinfo\": userInfo\r\n                    })\r\n                ];\r\n                if (operation === \"update\") {\r\n                    urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n\r\n                    urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterSubCodedById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n                }\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        let selectedsubcodedresult = [];\r\n                        let selectsubcodedelete = [];\r\n                        const gradeMap = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                        const grade = gradeMap.get(\"OptionList\");\r\n                        if (operation === \"update\") {\r\n                            const editCodedResult = response[1].data;\r\n                            selectedRecord = {\r\n                                ntestgrouptestpredefcode: paramdata[\"ntestgrouptestpredefcode\"],\r\n                                ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\r\n                                ngradecode: {\r\n                                    \"label\": editCodedResult[\"sdisplaystatus\"],\r\n                                    \"value\": editCodedResult[\"ngradecode\"]\r\n                                },\r\n                                spredefinedname: editCodedResult[\"spredefinedname\"],\r\n                                //sresultparacomment: editCodedResult[\"sresultparacomment\"],\r\n                                spredefinedsynonym: editCodedResult[\"spredefinedsynonym\"],\r\n                                spredefinedcomments: editCodedResult[\"spredefinedcomments\"],\r\n                                nneedresultentryalert: editCodedResult[\"nneedresultentryalert\"],\r\n                                nneedsubcodedresult: editCodedResult[\"nneedsubcodedresult\"],\r\n                                salertmessage: editCodedResult[\"salertmessage\"]\r\n                            }\r\n\r\n                            selectedsubcodedresult = response[2].data;\r\n                        } else {\r\n                            selectedRecord = {\r\n                                ngradecode: gradeMap.get(\"DefaultValue\"),\r\n                                nneedresultentryalert: 4,\r\n                                nneedsubcodedresult: 4\r\n                                // {\r\n                                //     \"value\": grade[0].ngradecode,\r\n                                //     \"label\": grade[0][\"sdisplaystatus\"]\r\n                                // }\r\n                            }\r\n\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                showSaveContinue: false,\r\n                                operation: operation,\r\n                                screenName: \"IDS_CODEDRESULT\",\r\n                                parameterData: {\r\n                                    grade,\r\n                                    needCodedResult: false\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false,\r\n                                selectedsubcodedresult,\r\n                                selectsubcodedelete\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const subCodedResultView = (operation, paramdata, userInfo, ncontrolCode, optionalData, masterData) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"testgroup/getActivePredefinedParameterSubCoded\", {\r\n            testgrouptestpredefinedparameter: paramdata,\r\n            \"userinfo\": userInfo\r\n        })\r\n            .then(response => {\r\n                let selectedsubcoderesult = [];\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n\r\n                    payload: {\r\n                        openModal: true,\r\n                        operation: \"View\",\r\n                        screenName: \"IDS_SUBCODERESULT\",\r\n                        selectedsubcoderesult: response.data,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            selectedsubcoderesult: response.data,\r\n                            searchedData: undefined,\r\n                        },\r\n                        //screenName: inputParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const addTestGroupNumericTab = (operation, paramdata, userInfo, optionalData, masterData, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        const treeVersionTemplateIndex = masterData[\"TreeVersionTemplate\"].findIndex(\r\n            x => x[\"ntreeversiontempcode\"] === masterData.selectedNode[\"ntreeversiontempcode\"]);\r\n\r\n        const templateVersionStatus = masterData[\"TreeVersionTemplate\"][treeVersionTemplateIndex].ntransactionstatus\r\n        if (templateVersionStatus === transactionStatus.RETIRED) {\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTEDTEMPLATEISRETIRED\" }));\r\n        }\r\n        else {\r\n            const testgroupspecification = optionalData.testgroupspecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                dispatch(initRequest(true));\r\n                const urlArray = [\r\n                    rsapi.post(\"patient/getGender\", {\r\n                        \"userinfo\": userInfo\r\n                    }),\r\n                    rsapi.post(\"grade/getGrade\", {\r\n                        userinfo: userInfo\r\n                    }),\r\n                    rsapi.post(\"/period/getPeriodByControl\", {\r\n                        \"ncontrolcode\": ncontrolCode,\r\n                        \"userinfo\": userInfo\r\n                    })\r\n                ];\r\n                if (operation === \"update\") {\r\n                    urlArray.push(rsapi.post(\"testgroup/getActiveClinicalSpecById\", {\r\n                        testgrouptestpredefinedparameter: paramdata,\r\n                        \"userinfo\": userInfo,\r\n                        testgroupspecification\r\n                    }));\r\n                }\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        let ntoageperiod=[];\r\n                        let nfromageperiod=[];\r\n        \r\n                        const gradeMap = constructOptionList(response[0].data.genderList || [], \"ngendercode\", \"sgendername\", false, false, true);\r\n                        const gender = gradeMap.get(\"OptionList\");                       \r\n                        const gradeNewMap = constructOptionList(response[1].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);                        \r\n                        const grade = gradeNewMap.get(\"OptionList\");\r\n                        const PeriodMap = constructOptionList(response[2].data || [], \"nperiodcode\", \"speriodname\", false, false, true);\r\n                        const period = PeriodMap.get(\"OptionList\");  \r\n                        sortData(grade || [], \"ascending\", \"value\")\r\n                        if (operation === \"update\") {\r\n        //ALPD-5054 added by Dhanushya RI,To get fromage period and toage period\r\n                            const editCodedResult = response[3].data;\r\n                            nfromageperiod.push({\r\n                                \"value\": response[3].data[\"nfromageperiod\"],\r\n                                \"label\": response[3].data[\"sfromageperiod\"]\r\n                            });\r\n                            ntoageperiod.push({\r\n                                \"value\": response[3].data[\"ntoageperiod\"],\r\n                                \"label\": response[3].data[\"stoageperiod\"]\r\n                            });  \r\n                           \r\n                            selectedRecord = {\r\n                                ntestgrouptestclinicspeccode: paramdata[\"ntestgrouptestclinicspeccode\"],\r\n                                ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\r\n                                nfromage: paramdata[\"nfromage\"],\r\n                                ntoage: paramdata[\"ntoage\"],\r\n                                ngradecode: getComboLabelValue(editCodedResult, response[1].data, \r\n                                    \"ngradecode\", \"sgradename\"),\r\n                                ngendercode: {\r\n                                    \"label\": editCodedResult[\"sgendername\"],\r\n                                    \"value\": editCodedResult[\"ngendercode\"]\r\n                                },\r\n                               \r\n                                // ngradecode: {\r\n                                //     \"label\": editCodedResult[\"sgradename\"],\r\n                                //     \"value\": editCodedResult[\"ngradecode\"]\r\n                                // },\r\n                                nhigha: editCodedResult[\"shigha\"]==='null'?'':editCodedResult[\"shigha\"],\r\n                                nhighb: editCodedResult[\"shighb\"]==='null'?'':editCodedResult[\"shighb\"],\r\n                                nlowa: editCodedResult[\"slowa\"]==='null'?'':editCodedResult[\"slowa\"],\r\n                                nlowb: editCodedResult[\"slowb\"]==='null'?'':editCodedResult[\"slowb\"],\r\n                                sminlod: editCodedResult[\"sminlod\"] ==='null'?'':editCodedResult[\"sminlod\"],\r\n                                smaxlod: editCodedResult[\"smaxlod\"] ==='null'?'':editCodedResult[\"smaxlod\"],\r\n                                sminloq: editCodedResult[\"sminloq\"] ==='null'?'':editCodedResult[\"sminloq\"],\r\n                                smaxloq: editCodedResult[\"smaxloq\"] ==='null'?'':editCodedResult[\"smaxloq\"],\r\n                                sdisregard: editCodedResult[\"sdisregard\"] ==='null'?'':editCodedResult[\"sdisregard\"],\r\n                                sresultvalue: editCodedResult[\"sresultvalue\"]==='null'?'':editCodedResult[\"sresultvalue\"]\r\n\r\n                            }\r\n        //ALPD-5054 added by Dhanushya RI,To get fromage period and toage period\r\n                            selectedRecord[\"nfromageperiod\"]=nfromageperiod[0];\r\n                            selectedRecord[\"ntoageperiod\"]=ntoageperiod[0];\r\n                        } else {\r\n                            selectedRecord = {\r\n                                ngendercode: gradeMap.get(\"DefaultValue\")\r\n                                // {\r\n                                //     \"value\": grade[0].ngradecode,\r\n                                //     \"label\": grade[0][\"sdisplaystatus\"]\r\n                                // }\r\n                            }\r\n                        }\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                openChildModal: true,\r\n                                showSaveContinue: false,\r\n                                operation: operation,\r\n                                screenName: \"IDS_CLINICALSPEC\",\r\n                                parameterData: {\r\n                                    gender,grade,formAgePeriod:period,toAgePeriod:period,\r\n                                    needCodedResult: false\r\n                                },\r\n                                selectedRecord,\r\n                                ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        });\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    });\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const viewTestGroupCheckList = (inputParam, userInfo) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"checklist/viewTemplate\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openTemplateModal: true,\r\n                        testGroupCheckList: {\r\n                            templateData: response.data\r\n                        },\r\n                        loading: false,\r\n                        selectedRecord: {}\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport const reportSpecification = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/specReportGenerate\", {\r\n            ...inputParam,\r\n            ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showConfirmAlert: false\r\n                    }\r\n                })\r\n                document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n                document.getElementById(\"download_data\").click();\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport const retireSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/retireSpec\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                // const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\r\n                sortData(response.data);\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const getDataForTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, masterData, primaryKeyName) => {\r\n    return function (dispatch) {\r\n        if (masterData.selectedNode !== undefined && masterData.selectedNode !== null && masterData.SelectedSpecification !== null) {\r\n            const testgroupspecification = masterData.SelectedSpecification;\r\n            if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                let urlArray = [];\r\n                const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", { \"userinfo\": userInfo });\r\n                const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", { \"userinfo\": userInfo, ntreeversiontempcode: masterData.selectedNode.ntreeversiontempcode});\r\n\r\n                urlArray = [materialTypeUrl, validationUrl];\r\n\r\n                dispatch(initRequest(true));\r\n                Axios.all(urlArray)\r\n                    .then(response => {\r\n                        console.log(ncontrolCode)\r\n                        if (masterData.SelectedTest && masterData.SelectedTest !== undefined) {\r\n\r\n                            if (response[1].data === \"Success\") {\r\n\r\n                                const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\",\r\n                                    \"smaterialtypename\", undefined, undefined, false);\r\n\r\n                                const materialType = materialTypeMap.get(\"OptionList\");\r\n                                const materialTypedefault = materialTypeMap.get(\"DefaultValue\");\r\n\r\n                                selectedRecord[\"nmaterialtypecode\"] = materialTypedefault;\r\n                                if (selectedRecord[\"nmaterialtypecode\"] !== undefined) {\r\n                                    let inputData = []\r\n                                    let inputParam = { operation: operation, selectedRecord: selectedRecord, materialType: materialType, inputData: { nmaterialtypecode: materialTypedefault.value }, materialType: materialType, masterData: masterData, screenName: screenName, ncontrolCode }\r\n                                    dispatch(getMaterialCategoryBasedMaterialType(inputParam));\r\n\r\n                                } else {\r\n                                    dispatch({\r\n                                        type: DEFAULT_RETURN,\r\n                                        payload: {\r\n                                            materialType: materialType,\r\n                                            materialList: undefined,\r\n                                            materialCategoryList: undefined,\r\n                                            isOpen: true,\r\n                                            operation: operation,\r\n                                            screenName: screenName,\r\n                                            openChildModal: true,\r\n                                            ncontrolCode: ncontrolCode,\r\n                                            loading: false,\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                toast.warn(intl.formatMessage({\r\n                                    id: response[1].data\r\n                                }));\r\n                                dispatch({\r\n                                    type: DEFAULT_RETURN,\r\n                                    payload: {\r\n                                        operation: operation,\r\n                                        screenName: screenName,\r\n                                        ncontrolCode: ncontrolCode,\r\n                                        loading: false\r\n                                    }\r\n                                });\r\n\r\n                            }\r\n                        }\r\n                        else {\r\n\r\n                            toast.warn(intl.formatMessage({\r\n                                id: \"IDS_NEEDTOADDTEST\"\r\n                            }));\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    operation: operation,\r\n                                    screenName: screenName,\r\n                                    ncontrolCode: ncontrolCode,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(intl.formatMessage({\r\n                                id: error.message\r\n                            }));\r\n                        } else {\r\n                            toast.warn(intl.formatMessage({\r\n                                id: error.response.data\r\n                            }));\r\n                        }\r\n                    })\r\n\r\n\r\n            }\r\n            else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTSPECIFICATION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\nexport function getMaterialCategoryBasedMaterialType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"material/getMaterialcombo\", { nmaterialtypecode: inputParam.inputData.nmaterialtypecode })\r\n            .then(response => {\r\n                let selectedRecord = {}\r\n                selectedRecord = inputParam.selectedRecord\r\n\r\n                const materialCategoryMap = constructOptionList(response.data.MaterialCategoryMain || [], \"nmaterialcatcode\",\r\n                    \"smaterialcatname\", undefined, undefined, false);\r\n\r\n                const materialCategoryList = materialCategoryMap.get(\"OptionList\");\r\n                const materialCategorydefault = materialCategoryMap.get(\"DefaultValue\");\r\n                selectedRecord['nmaterialcatcode'] = materialCategorydefault;\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                if (response.data.MaterialCategoryMain.length === 0) {\r\n                    if (selectedRecord['nmaterialcatcode']) {\r\n                        delete selectedRecord['nmaterialcatcode']\r\n\r\n                    }\r\n                    if (selectedRecord['nmaterialcode']) {\r\n                        delete selectedRecord['nmaterialcode']\r\n\r\n                    }\r\n                }\r\n                let materialList = []\r\n                if (materialCategorydefault && materialCategoryList.length !== 0) {\r\n                    materialList = materialList\r\n                    inputParam = {\r\n                        ...inputParam, responsecat: response, materialCategoryList: materialCategoryList, selectedRecord: selectedRecord,\r\n                        inputData: {\r\n                            nmaterialcatcode: materialCategorydefault.value,\r\n                            nmaterialtypecode: inputParam.inputData.nmaterialtypecode\r\n                        }\r\n                    }\r\n                    dispatch(getMaterialBasedMaterialCategory(inputParam));\r\n                }\r\n\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openChildModal: true,\r\n                            screenName: inputParam.screenName,\r\n                            masterData, loading: false,\r\n                            materialCategoryList: materialCategoryList,\r\n                            materialType: inputParam.materialType,\r\n                            materialList: materialList,\r\n                            selectedRecord: selectedRecord,\r\n                            operation: inputParam.operation,\r\n                            ncontrolCode: inputParam.ncontrolCode\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getMaterialBasedMaterialCategory(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"testgroup/getAvailableMaterial\", {\r\n            nmaterialtypecode: inputParam.inputData.nmaterialtypecode,\r\n            //  nmaterialcatcode: inputParam.inputData.nmaterialcatcode !== undefined\r\n            //     ? inputParam.inputData.nmaterialcatcode : inputParam.responsecat.data.MaterialCategoryMain[0].nmaterialcatcode,\r\n             nmaterialcatcode: inputParam.inputData.nmaterialcatcode,\r\n            ntestgrouptestcode: inputParam.masterData.SelectedTest.ntestgrouptestcode\r\n        })\r\n            .then(response => {\r\n\r\n                let selectedRecord = inputParam.selectedRecord;\r\n\r\n                const materialMap = constructjsonOptionList(response.data.MaterialCombo || [], \"nmaterialcode\",\r\n                    \"Material Name\", undefined, undefined, false);\r\n\r\n                const materialList = materialMap.get(\"OptionList\");\r\n\r\n                if (response.data.MaterialCombo.length === 0) {\r\n                    delete selectedRecord['nmaterialcode']\r\n                }\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                if (inputParam.materialCategoryList) {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            materialCategoryList: inputParam.materialCategoryList,\r\n                            masterData, loading: false,\r\n                            materialList: materialList,\r\n                            openChildModal: true,\r\n                            screenName: inputParam.screenName,\r\n                            selectedRecord: inputParam.selectedRecord,\r\n                            materialType: inputParam.materialType,\r\n                            operation: inputParam.operation,\r\n                            ncontrolCode: inputParam.ncontrolCode\r\n\r\n\r\n\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData, loading: false,\r\n                            materialList: materialList,\r\n                            openChildModal: true,\r\n\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const getTestGroupMaterial = (inputParam) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestGroupTestMaterial\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\nexport const getDataForEditTestMaterial = (screenName, operation, userInfo, ncontrolCode, selectedRecord, Data, primaryKeyName) => {\r\n    return function (dispatch) {\r\n\r\n        const testgroupspecification = Data.SelectedSpecification;\r\n        if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n\r\n\r\n            let urlArray = [];\r\n            const materialTypeUrl = rsapi.post(\"materialcategory/getMaterialType\", { \"userinfo\": userInfo });\r\n            const materialCatUrl = rsapi.post(\"material/getMaterialcombo\", { nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode });\r\n            const materialUrl = rsapi.post(\"testgroup/getAvailableMaterial\", {\r\n                nmaterialcatcode: Data.selectedMaterial.nmaterialcatcode, nmaterialtypecode: Data.selectedMaterial.nmaterialtypecode,\r\n                ntestgrouptestcode: Data.SelectedTest.ntestgrouptestcode\r\n            });\r\n            const materialById = rsapi.post(\"testgroup/getActiveTestMaterialById\", {\r\n                [primaryKeyName]: Data.selectedMaterial.ntestgrouptestmaterialcode, \"userinfo\": userInfo\r\n            });\r\n            const validationUrl = rsapi.post(\"testgroup/validationForRetiredTemplate\", { \"userinfo\": userInfo, ntreeversiontempcode: Data.selectedNode.ntreeversiontempcode });\r\n\r\n            urlArray = [materialTypeUrl, materialCatUrl, materialUrl, materialById, validationUrl];\r\n\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    if (response[4].data === \"Success\") {\r\n\r\n                        let selectedRecord = {};\r\n                        let MaterialCategoryData = [];\r\n                        let MaterialTypeData = [];\r\n                        let MaterialData = [];\r\n\r\n                        const materialTypeMap = constructOptionList(response[0].data || [], \"nmaterialtypecode\",\r\n                            \"smaterialtypename\", undefined, undefined, false);\r\n\r\n                        const materialType = materialTypeMap.get(\"OptionList\");\r\n\r\n                        const materialCategoryMap = constructOptionList(response[1].data.MaterialCategoryMain || [], \"nmaterialcatcode\",\r\n                            \"smaterialcatname\", undefined, undefined, false);\r\n\r\n                        const materialCategoryList = materialCategoryMap.get(\"OptionList\");\r\n                        const materialMap = constructjsonOptionList(response[2].data.MaterialCombo || [], \"nmaterialcode\",\r\n                            \"Material Name\", undefined, undefined, false);\r\n\r\n                        const materialList = materialMap.get(\"OptionList\");\r\n\r\n                        MaterialCategoryData.push({\r\n                            \"value\": response[3].data[\"nmaterialcatcode\"],\r\n                            \"label\": response[3].data[\"smaterialcatname\"]\r\n                        });\r\n                        MaterialTypeData.push({\r\n                            \"value\": response[3].data[\"nmaterialtypecode\"],\r\n                            \"label\": response[3].data[\"smaterialtypename\"]\r\n                        });\r\n                        MaterialData.push({\r\n                            \"value\": response[3].data[\"nmaterialcode\"],\r\n                            \"label\": response[3].data[\"smaterialname\"]\r\n                        });\r\n\r\n                        selectedRecord = response[3].data;\r\n                        selectedRecord[\"nmaterialcatcode\"] = MaterialCategoryData[0];\r\n                        selectedRecord[\"nmaterialtypecode\"] = MaterialTypeData[0];\r\n                        selectedRecord[\"nmaterialcode\"] = MaterialData[0];\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                materialType: materialType,\r\n                                materialList: materialList,\r\n                                materialCategoryList: materialCategoryList,\r\n                                selectedRecord: selectedRecord,\r\n                                isOpen: true,\r\n                                operation: operation,\r\n                                screenName: screenName,\r\n                                openChildModal: true,\r\n                                ncontrolCode: ncontrolCode,\r\n                                loading: false,\r\n                            }\r\n                        });\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: response[4].data\r\n                        }));\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                operation: operation,\r\n                                screenName: screenName,\r\n                                ncontrolCode: ncontrolCode,\r\n                                loading: false\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({\r\n                            id: error.message\r\n                        }));\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n\r\n\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                                 id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n//To get spec details for copy action --ALPD-4099 ,work done by Dhanushya R I\r\nexport const getSpecDetailsForCopy = (data, key,isProduct,masterDatas,selectedRecord) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        \r\n          //ALPD-4758 done by Dhanushya RI,to load sample category only for categorybasedflow yes\r\n        rsapi.post(\"/testgroup/getSpecDetailsForCopy\", {\r\n            nproductcode: isProduct==1?data.value:-1, nsampletypecode:masterDatas.selectedNode.nsampletypecode, \r\n            //ALPD-5527--vignesh R-->Test Group screen -> Profile showing incorrectly for selected sample category.  \r\n           //start\r\n            nproductcatcode:data.item.nproductcatcode,\r\n            //end\r\n            nprojectmastercode: masterDatas.selectedNode.nprojectmastercode, ntreeversiontempcode: isProduct === 1 ? masterDatas.selectedNode.nproductcode === data.value && masterDatas.selectedNode.nproductcatcode === data.item.nproductcatcode\r\n                ? masterDatas.selectedNode.ntreeversiontempcode: -1 : masterDatas.selectedNode.nproductcatcode === data.item.nproductcatcode ? masterDatas.selectedNode.ntreeversiontempcode:-1,\r\n        })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                //ALPD-4758 done by Dhanushya RI,to load sample category only for categorybasedflow yes\r\n                let ntreeversiontempcode =isProduct === 1 ? masterDatas.selectedNode.nproductcode === data.value && masterDatas.selectedNode.nproductcatcode === data.item.nproductcatcode\r\n                    ? masterDatas.selectedNode.ntreeversiontempcode : -1 : masterDatas.selectedNode.nproductcatcode === data.item.nproductcatcode ? masterDatas.selectedNode.ntreeversiontempcode : -1\r\n                \r\n                 selectedRecord = { ...selectedRecord,\r\n                    CopyFocusKey: response.data.FocusKey,\r\n                     CopyActiveKey: response.data.ActiveKey,\r\n                     //selectedCopyNodeManipulationCode: response.data.selectedNode.ntemplatemanipulationcode,\r\n                     //selectedCopyProfileName: response.data.selectedNode.sleveldescription,\r\n                    //scopyspecname: response.data.selectedNode.sleveldescription\r\n                    //ALPD-4265 Aravindh 11/06/2024 validate null in selectedNode\r\n                     selectedCopyNodeManipulationCode:response.data.selectedNode===null ? \"\":response.data.selectedNode.ntemplatemanipulationcode,\r\n                     selectedCopyProfileName: response.data.selectedNode===null ? \"\":response.data.selectedNode.sleveldescription,\r\n                     scopyspecname: response.data.selectedNode===null ? \"\":response.data.selectedNode.sleveldescription\r\n\r\n                };\r\n                \r\n                let selectedRecordCopy = {\r\n                    nproductcode: data, nproductcatcode: data, ...response.data ,\r\n                    CopyFocusKey: response.data.FocusKey,\r\n                    CopyActiveKey: response.data.ActiveKey,\r\n                    isCopy:true\r\n                };\r\n                let CopyOpenNodes = response.data.OpenNodes;\r\n                         \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        masterData: { ...masterDatas, selectedRecordCopy, CopyOpenNodes}, \r\n                        loading: false,\r\n                        testskip: 0,\r\n                        \r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData:masterDatas,\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}