{"ast":null,"code":"import { create_UUID, Lims_JSON_stringify } from \"../../../components/CommonScript\";\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\nexport function onSaveSampleAttachment(saveParam, selectedMaster) {\n  const formData = new FormData();\n  const selectedRecord = saveParam.selectedRecord;\n  const acceptedFiles = selectedRecord.sfilename;\n  const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n  let isFileEdited = transactionStatus.NO;\n  let fileArray = [];\n  let samindex = {\n    index: 0\n  };\n\n  if (nattachmenttypecode === attachmentType.FTP) {\n    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n      acceptedFiles.forEach((file, index) => {\n        const splittedFileName = file.name.split('.');\n        const fileExtension = file.name.split('.')[splittedFileName.length - 1]; // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n        //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\n\n        selectedMaster.forEach((sample, sampleindex) => {\n          const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\n          const uniquefilename = fileName + '.' + fileExtension;\n          const tempData = {};\n          tempData['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\n          tempData[\"npreregno\"] = sample.npreregno;\n          tempData['nformcode'] = saveParam.userInfo.nformcode;\n          tempData['nusercode'] = saveParam.userInfo.nusercode;\n          tempData['nuserrolecode'] = saveParam.userInfo.nuserrole;\n          tempData[\"nlinkcode\"] = transactionStatus.NA; // tempData[\"nfilesize\"] = file.size;\n\n          tempData['jsondata'] = {\n            // susername:saveParam.userInfo.susername,\n            susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            // suserrolename: saveParam.userInfo.suserrolename,\n            suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            ssystemfilename: uniquefilename,\n            sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n            nfilesize: file.size,\n            sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            slinkname: \"\",\n            sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n          };\n          tempData['nattachmenttypecode'] = nattachmenttypecode; // tempData[\"ssystemfilename\"] = uniquefilename;\n          // tempData[\"sfilename\"] = file.name.trim();\n          // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n          tempData['nstatus'] = transactionStatus.ACTIVE;\n          formData.append(\"uploadedFile\" + samindex[\"index\"], file);\n          formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\n          fileArray.push(tempData);\n          samindex[\"index\"] = samindex[\"index\"] + 1;\n        });\n      });\n      formData.append(\"filecount\", acceptedFiles.length * selectedMaster.length);\n      isFileEdited = transactionStatus.YES;\n    } else {\n      selectedMaster.forEach(sample => {\n        let sampleFile = {};\n        sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\n        sampleFile[\"npreregno\"] = sample.npreregno;\n        sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n        sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n        sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n        sampleFile[\"nlinkcode\"] = transactionStatus.NA; // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\n\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n        sampleFile['jsondata'] = {\n          // susername: saveParam.userInfo.susername,\n          susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          // suserrolename: saveParam.userInfo.suserrolename,\n          susername: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          ssystemfilename: selectedRecord.ssystemfilename,\n          sfilename: Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n          nfilesize: selectedRecord.nfilesize,\n          sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          slinkname: \"\",\n          sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n        };\n        sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n        sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false); // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\n        fileArray.push(sampleFile);\n      });\n    }\n  } else {\n    selectedMaster.forEach(sample => {\n      let sampleFile = {};\n      sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\n      sampleFile[\"npreregno\"] = sample.npreregno;\n      sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n      sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n      sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n      sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n      sampleFile['jsondata'] = {\n        // susername: saveParam.userInfo.susername,\n        susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        // suserrolename: saveParam.userInfo.suserrolename,\n        suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        ssystemfilename: \"\",\n        sfilename: Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n        nfilesize: 0,\n        slinkname: selectedRecord.nlinkcode.label,\n        sdescription: Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n      };\n      sampleFile['nattachmenttypecode'] = nattachmenttypecode; // sampleFile[\"ssystemfilename\"] = \"\";\n\n      sampleFile['nstatus'] = transactionStatus.ACTIVE;\n      fileArray.push(sampleFile);\n    });\n  }\n\n  formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\n  formData.append(\"isFileEdited\", isFileEdited);\n  formData.append(\"sampleattachment\", JSON.stringify(fileArray)); //ALPD-1728\n  //formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\n\n  formData.append(\"nattachmenttypecode\", nattachmenttypecode);\n  formData.append(\"npreregno\", saveParam.npreregno); //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\n\n  formData.append(\"userinfo\", JSON.stringify({ ...saveParam.userInfo,\n    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\n    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\n    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)\n  }));\n  const inputParam = {\n    // inputData: { userinfo: saveParam.userInfo },\n    inputData: {\n      // userinfo: saveParam.userInfo },\n      \"userinfo\": { ...saveParam.userInfo,\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)\n      }\n    },\n    formData: formData,\n    isFileupload: true,\n    operation: saveParam.operation,\n    classUrl: \"attachment\",\n    saveType: saveParam.saveType,\n    formRef: saveParam.formRef,\n    methodUrl: \"SampleAttachment\"\n  };\n  return inputParam;\n}\nexport function onSaveTestAttachment(saveParam, selectedMaster) {\n  const formData = new FormData();\n  const selectedRecord = saveParam.selectedRecord;\n  const acceptedFiles = selectedRecord.sfilename;\n  const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n  let isFileEdited = transactionStatus.NO;\n  let fileArray = [];\n  let testindex1 = {\n    index: 0\n  };\n\n  if (nattachmenttypecode === attachmentType.FTP) {\n    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n      if (saveParam.operation === 'create') {\n        acceptedFiles.forEach((file, index) => {\n          const splittedFileName = file.name.split('.');\n          const fileExtension = file.name.split('.')[splittedFileName.length - 1];\n          selectedMaster.forEach((test, testindex) => {\n            const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\n            const uniquefilename = fileName + '.' + fileExtension;\n            const tempData = {};\n            tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\n            tempData[\"ntransactiontestcode\"] = test.ntransactiontestcode;\n            tempData[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\n            tempData[\"npreregno\"] = test.npreregno;\n            tempData['nformcode'] = saveParam.userInfo.nformcode;\n            tempData['nusercode'] = saveParam.userInfo.nusercode;\n            tempData['nuserrolecode'] = saveParam.userInfo.nuserrole;\n            tempData[\"nlinkcode\"] = transactionStatus.NA;\n            tempData['nattachmenttypecode'] = nattachmenttypecode;\n            tempData['jsondata'] = {\n              stestsynonym: Lims_JSON_stringify(test.stestsynonym.trim(), false),\n              // susername: saveParam.userInfo.susername,\n              susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              // suserrolename: saveParam.userInfo.suserrolename,\n              suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              nfilesize: file.size,\n              ssystemfilename: uniquefilename,\n              sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n              slinkname: \"\",\n              sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO,\n              sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n            }; // tempData[\"nfilesize\"] = file.size; :\n            // tempData[\"ssystemfilename\"] = uniquefilename;\n            // tempData[\"sfilename\"] = file.name.trim();\n            // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n            tempData['nstatus'] = transactionStatus.ACTIVE;\n            formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\n            formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\n            fileArray.push(tempData);\n            testindex1[\"index\"] = testindex1[\"index\"] + 1;\n          });\n        });\n        formData.append(\"filecount\", acceptedFiles.length * selectedMaster.length);\n        isFileEdited = transactionStatus.YES;\n      } else {\n        acceptedFiles.forEach((file, index) => {\n          const splittedFileName = file.name.split('.');\n          const fileExtension = file.name.split('.')[splittedFileName.length - 1];\n          selectedMaster.forEach((test, testindex) => {\n            const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\n            const uniquefilename = fileName + '.' + fileExtension;\n            const tempData = {};\n            tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\n            tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\n            tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\n            tempData[\"npreregno\"] = selectedRecord.npreregno;\n            tempData['nformcode'] = saveParam.userInfo.nformcode;\n            tempData['nusercode'] = saveParam.userInfo.nusercode;\n            tempData['nuserrolecode'] = saveParam.userInfo.nuserrole;\n            tempData[\"nlinkcode\"] = transactionStatus.NA;\n            tempData['nattachmenttypecode'] = nattachmenttypecode;\n            tempData['jsondata'] = {\n              stestsynonym: Lims_JSON_stringify(selectedRecord.stestsynonym.trim(), false),\n              // susername: saveParam.userInfo.susername,\n              susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              // suserrolename: saveParam.userInfo.suserrolename,\n              suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              nfilesize: file.size,\n              ssystemfilename: uniquefilename,\n              sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n              slinkname: \"\",\n              sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n              nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO,\n              sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n            }; // tempData[\"nfilesize\"] = file.size;\n            // tempData[\"ssystemfilename\"] = uniquefilename;\n            // tempData[\"sfilename\"] = file.name.trim();\n            // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n            tempData['nstatus'] = transactionStatus.ACTIVE;\n            formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\n            formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\n            fileArray.push(tempData);\n            testindex1[\"index\"] = testindex1[\"index\"] + 1;\n          });\n        });\n        formData.append(\"filecount\", acceptedFiles.length * selectedMaster.length);\n        isFileEdited = transactionStatus.YES;\n      }\n    } else {\n      selectedMaster.forEach(test => {\n        let sampleFile = {};\n        sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\n        sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\n        sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\n        sampleFile[\"npreregno\"] = selectedRecord.npreregno;\n        sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n        sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n        sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n        sampleFile[\"nlinkcode\"] = transactionStatus.NA; // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\n\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n        sampleFile['jsondata'] = {\n          stestsynonym: Lims_JSON_stringify(selectedRecord.stestsynonym.trim(), false),\n          // susername: saveParam.userInfo.susername,\n          susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          // suserrolename: saveParam.userInfo.suserrolename,\n          suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          nfilesize: selectedRecord.size,\n          ssystemfilename: selectedRecord.ssystemfilename,\n          sfilename: Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n          slinkname: \"\",\n          sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          nneedreport: selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO,\n          sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n        }; // sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n        // sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n        // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\n        fileArray.push(sampleFile);\n      });\n    }\n  } else {\n    if (saveParam.operation === 'create') {\n      selectedMaster.forEach(test => {\n        let sampleFile = {};\n        sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\n        sampleFile[\"ntransactiontestcode\"] = test.ntransactiontestcode;\n        sampleFile[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\n        sampleFile[\"npreregno\"] = test.npreregno;\n        sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n        sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n        sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n        sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n        sampleFile[\"jsondata\"] = {\n          stestsynonym: Lims_JSON_stringify(test.stestsynonym.trim(), false),\n          // susername: saveParam.userInfo.susername,\n          susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          // suserrolename: saveParam.userInfo.suserrolename,\n          suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          ssystemfilename: \"\",\n          sfilename: Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n          nfilesize: 0,\n          slinkname: selectedRecord.nlinkcode.label,\n          sdescription: Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          nneedreport: transactionStatus.NO,\n          sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n        };\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\n        fileArray.push(sampleFile);\n      });\n    } else {\n      selectedMaster.forEach(test => {\n        let sampleFile = {};\n        sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\n        sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\n        sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\n        sampleFile[\"npreregno\"] = selectedRecord.npreregno;\n        sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n        sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n        sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n        sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n        sampleFile[\"jsondata\"] = {\n          stestsynonym: Lims_JSON_stringify(selectedRecord.stestsynonym.trim(), false),\n          // susername: saveParam.userInfo.susername,\n          susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          // suserrolename: saveParam.userInfo.suserrolename,\n          suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          ssystemfilename: \"\",\n          sfilename: Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n          nfilesize: 0,\n          slinkname: selectedRecord.nlinkcode.label,\n          sdescription: Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          nneedreport: transactionStatus.NO,\n          sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n        };\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\n        fileArray.push(sampleFile);\n      });\n    }\n  }\n\n  formData.append(\"isFileEdited\", isFileEdited);\n  formData.append(\"testattachment\", JSON.stringify(fileArray)); //ALPD-1728\n  // formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\n\n  formData.append(\"nattachmenttypecode\", nattachmenttypecode);\n  formData.append(\"ntransactiontestcode\", saveParam.ntransactiontestcode); // formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\n\n  const inputParam = {\n    inputData: {\n      \"userinfo\": { ...saveParam.userInfo,\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)\n      }\n    },\n    formData: formData,\n    isFileupload: true,\n    operation: saveParam.operation,\n    classUrl: \"attachment\",\n    saveType: saveParam.saveType,\n    formRef: saveParam.formRef,\n    methodUrl: \"TestAttachment\"\n  };\n  return inputParam;\n}\nexport function onSaveBatchAttachment(saveParam, selectedMaster) {\n  const formData = new FormData();\n  const selectedRecord = saveParam.selectedRecord;\n  const acceptedFiles = selectedRecord.sfilename;\n  const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n  let isFileEdited = transactionStatus.NO;\n  let fileArray = [];\n  let nreleasebatchcode = selectedMaster.nreleasebatchcode;\n\n  if (nattachmenttypecode === attachmentType.FTP) {\n    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n      acceptedFiles.forEach((file, index) => {\n        const splittedFileName = file.name.split('.');\n        const fileExtension = file.name.split('.')[splittedFileName.length - 1];\n        const fileName = selectedRecord.nbatchfilecode && selectedRecord.nbatchfilecode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\n        const uniquefilename = fileName + '.' + fileExtension; //selectedMaster.forEach(sample=>{\n\n        const tempData = {};\n        tempData['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\n        tempData[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\n        tempData[\"nlinkcode\"] = transactionStatus.NA;\n        tempData['nattachmenttypecode'] = nattachmenttypecode;\n        tempData[\"ssystemfilename\"] = uniquefilename;\n        tempData[\"sfilename\"] = Lims_JSON_stringify(file.name.trim(), false);\n        tempData[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n', '#r#') : \"\", false);\n        tempData['nstatus'] = transactionStatus.ACTIVE;\n        formData.append(\"uploadedFile\" + index, file);\n        formData.append(\"uniquefilename\" + index, uniquefilename);\n        fileArray.push(tempData); //nreleasebatchcode.push(selectedMaster.releasebatchcode)\n        //})\n      });\n      formData.append(\"filecount\", acceptedFiles.length);\n      isFileEdited = transactionStatus.YES;\n    } else {\n      // selectedMaster.forEach(sample=>{\n      let sampleFile = {};\n      sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\n      sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\n      sampleFile[\"nlinkcode\"] = transactionStatus.NA;\n      sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n      sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\n      sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.trim(), false);\n      sampleFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n', '#r#') : \"\", false);\n      sampleFile['nstatus'] = transactionStatus.ACTIVE; //npreregno.push(sample.npreregno)\n\n      fileArray.push(sampleFile); // })\n    }\n  } else {\n    //selectedMaster.forEach(sample=>{\n    let sampleFile = {};\n    sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\n    sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\n    sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n    sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n    sampleFile[\"ssystemfilename\"] = \"\";\n    sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename.trim(), false);\n    sampleFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\n    sampleFile['nstatus'] = transactionStatus.ACTIVE;\n    fileArray.push(sampleFile); //npreregno.push(sample.npreregno)\n    //})  \n  }\n\n  formData.append(\"isFileEdited\", isFileEdited);\n  formData.append(\"batchcreationfile\", JSON.stringify(fileArray)); //ALPD-1728\n  //formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\n\n  formData.append(\"nattachmenttypecode\", nattachmenttypecode);\n  formData.append(\"nreleasebatchcode\", nreleasebatchcode);\n  formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\n  const inputParam = {\n    inputData: {\n      userinfo: saveParam.userInfo\n    },\n    formData: formData,\n    isFileupload: true,\n    operation: saveParam.operation,\n    classUrl: \"attachment\",\n    saveType: saveParam.saveType,\n    formRef: saveParam.formRef,\n    methodUrl: \"BatchCreationFile\"\n  };\n  return inputParam;\n}\nexport function onSaveSubSampleAttachment(saveParam, selectedMaster) {\n  const formData = new FormData();\n  const selectedRecord = saveParam.selectedRecord;\n  const acceptedFiles = selectedRecord.sfilename;\n  const nattachmenttypecode = selectedRecord.nattachmenttypecode;\n  let isFileEdited = transactionStatus.NO;\n  let fileArray = [];\n  let samindex = {\n    index: 0\n  };\n\n  if (nattachmenttypecode === attachmentType.FTP) {\n    if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\n      acceptedFiles.forEach((file, index) => {\n        const splittedFileName = file.name.split('.');\n        const fileExtension = file.name.split('.')[splittedFileName.length - 1]; // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \n        //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\n\n        selectedMaster.forEach((sample, sampleindex) => {\n          const fileName = selectedRecord.nsampleattachmentcode && selectedRecord.nsampleattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID();\n          const uniquefilename = fileName + '.' + fileExtension;\n          const tempData = {};\n          tempData['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\n          tempData[\"npreregno\"] = sample.npreregno;\n          tempData[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\n          tempData['nformcode'] = saveParam.userInfo.nformcode;\n          tempData['nusercode'] = saveParam.userInfo.nusercode;\n          tempData['nuserrolecode'] = saveParam.userInfo.nuserrole;\n          tempData[\"nlinkcode\"] = transactionStatus.NA; // tempData[\"nfilesize\"] = file.size;\n\n          tempData['jsondata'] = {\n            // susername: saveParam.userInfo.susername,\n            susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            // suserrolename: saveParam.userInfo.suserrolename,\n            suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            ssystemfilename: uniquefilename,\n            sfilename: Lims_JSON_stringify(file.name.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n            nfilesize: file.size,\n            sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n            slinkname: \"\",\n            sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n          };\n          tempData['nattachmenttypecode'] = nattachmenttypecode; // tempData[\"ssystemfilename\"] = uniquefilename;\n          // tempData[\"sfilename\"] = file.name.trim();\n          // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n          tempData['nstatus'] = transactionStatus.ACTIVE;\n          formData.append(\"uploadedFile\" + samindex[\"index\"], file);\n          formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\n          fileArray.push(tempData);\n          samindex[\"index\"] = samindex[\"index\"] + 1;\n        });\n      });\n      formData.append(\"filecount\", acceptedFiles.length * selectedMaster.length);\n      isFileEdited = transactionStatus.YES;\n    } else {\n      selectedMaster.forEach(sample => {\n        let sampleFile = {};\n        sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\n        sampleFile[\"npreregno\"] = sample.npreregno;\n        sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\n        sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n        sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n        sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n        sampleFile[\"nlinkcode\"] = transactionStatus.NA; // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\n\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode;\n        sampleFile['jsondata'] = {\n          // susername: saveParam.userInfo.susername,\n          susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          // suserrolename: saveParam.userInfo.suserrolename,\n          suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          ssystemfilename: selectedRecord.ssystemfilename,\n          sfilename: Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n          nfilesize: selectedRecord.nfilesize,\n          sdescription: Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n          slinkname: \"\",\n          sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n        };\n        sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename; //sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\n        // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\n\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\n        fileArray.push(sampleFile);\n      });\n    }\n  } else {\n    selectedMaster.forEach(sample => {\n      let sampleFile = {};\n      sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\n      sampleFile[\"npreregno\"] = sample.npreregno;\n      sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\n      sampleFile['nformcode'] = saveParam.userInfo.nformcode;\n      sampleFile['nusercode'] = saveParam.userInfo.nusercode;\n      sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole;\n      sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\n      sampleFile['jsondata'] = {\n        // susername: saveParam.userInfo.susername,\n        susername: Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        // suserrolename: saveParam.userInfo.suserrolename,\n        suserrolename: Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        ssystemfilename: \"\",\n        sfilename: Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim(), false),\n        nfilesize: 0,\n        slinkname: selectedRecord.nlinkcode.label,\n        sdescription: Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false),\n        sheader: Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\', '\\\\\\\\\\\\\\\\').replaceAll('\\n', '\\\\\\\\n').replaceAll('\"', '\\\\\"').trim() : \"\", false)\n      };\n      sampleFile['nattachmenttypecode'] = nattachmenttypecode; // sampleFile[\"ssystemfilename\"] = \"\";\n\n      sampleFile['nstatus'] = transactionStatus.ACTIVE;\n      fileArray.push(sampleFile);\n    });\n  }\n\n  formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\n  formData.append(\"isFileEdited\", isFileEdited);\n  formData.append(\"subsampleattachment\", JSON.stringify(fileArray)); //ALPD-1728\n  //formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\n\n  formData.append(\"nattachmenttypecode\", nattachmenttypecode);\n  formData.append(\"npreregno\", saveParam.npreregno);\n  formData.append(\"ntransactionsamplecode\", saveParam.ntransactionsamplecode); //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\n\n  formData.append(\"userinfo\", JSON.stringify({ ...saveParam.userInfo,\n    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\n    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\n    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)\n  }));\n  const inputParam = {\n    inputData: {\n      // userinfo: saveParam.userInfo },\n      \"userinfo\": { ...saveParam.userInfo,\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)\n      }\n    },\n    formData: formData,\n    isFileupload: true,\n    operation: saveParam.operation,\n    classUrl: \"attachment\",\n    saveType: saveParam.saveType,\n    formRef: saveParam.formRef,\n    methodUrl: \"SubSampleAttachment\"\n  };\n  return inputParam;\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/attachmentscomments/attachments/AttachmentFunctions.js"],"names":["create_UUID","Lims_JSON_stringify","attachmentType","transactionStatus","onSaveSampleAttachment","saveParam","selectedMaster","formData","FormData","selectedRecord","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","fileArray","samindex","index","FTP","Array","isArray","length","forEach","file","splittedFileName","name","split","fileExtension","sample","sampleindex","fileName","nregattachmentcode","ssystemfilename","uniquefilename","tempData","npreregno","userInfo","nformcode","nusercode","nuserrole","NA","susername","replaceAll","trim","suserrolename","nfilesize","size","sdescription","slinkname","sheader","ACTIVE","append","push","YES","sampleFile","nlinkcode","value","slinkfilename","label","slinkdescription","ncontrolCode","JSON","stringify","sformname","smodulename","slanguagename","inputParam","inputData","isFileupload","operation","classUrl","saveType","formRef","methodUrl","onSaveTestAttachment","testindex1","test","testindex","ntestattachmentcode","ntransactiontestcode","ntransactionsamplecode","stestsynonym","nneedreport","onSaveBatchAttachment","nreleasebatchcode","nbatchfilecode","userinfo","onSaveSubSampleAttachment","nsampleattachmentcode"],"mappings":"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","sourcesContent":["import { create_UUID, Lims_JSON_stringify } from \"../../../components/CommonScript\";\r\nimport { attachmentType, transactionStatus } from \"../../../components/Enumeration\";\r\n\r\nexport function onSaveSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                       // susername:saveParam.userInfo.susername,\r\n                        susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                       // suserrolename: saveParam.userInfo.suserrolename,\r\n                        suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        slinkname: \"\",\r\n                        sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                   // susername: saveParam.userInfo.susername,\r\n                    susername : Lims_JSON_stringify( saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                   // suserrolename: saveParam.userInfo.suserrolename,\r\n                    susername : Lims_JSON_stringify( saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    slinkname: \"\",\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                sampleFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ;\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nregattachmentcode'] = selectedRecord.nregattachmentcode ? selectedRecord.nregattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n               // susername: saveParam.userInfo.susername,\r\n                susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n               // suserrolename: saveParam.userInfo.suserrolename,\r\n               suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false),\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify(  selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"sampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"sampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n                                                sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                                                smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                                                slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n    const inputParam = {\r\n       // inputData: { userinfo: saveParam.userInfo },\r\n       inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveTestAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let testindex1 = {\r\n        index: 0\r\n    };\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            if(saveParam.operation==='create'){\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = test.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                           // susername: saveParam.userInfo.susername,\r\n                            susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),            \r\n                           // suserrolename: saveParam.userInfo.suserrolename,\r\n                            suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",                         \r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO,\r\n                            sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size; :\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }else {\r\n                acceptedFiles.forEach((file, index) => {\r\n\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n    \r\n    \r\n                    selectedMaster.forEach((test, testindex) => {\r\n                        const fileName = selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                        const uniquefilename = fileName + '.' + fileExtension;\r\n                        const tempData = {};\r\n                        tempData['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                        tempData[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                        tempData[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                        tempData[\"npreregno\"] = selectedRecord.npreregno;\r\n                        tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                        tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                        tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                        tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                        tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                        tempData['jsondata'] = {\r\n                            stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                            // susername: saveParam.userInfo.susername,\r\n                            susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                             // suserrolename: saveParam.userInfo.suserrolename,\r\n                            suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                            nfilesize: file.size,\r\n                            ssystemfilename: uniquefilename,\r\n                            sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                            slinkname: \"\",\r\n                            sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                            nneedreport:selectedRecord.nneedreport ?  selectedRecord.nneedreport  : transactionStatus.NO   ,\r\n                            sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                        }\r\n                        // tempData[\"nfilesize\"] = file.size;\r\n                        // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                        // tempData[\"sfilename\"] = file.name.trim();\r\n                        // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                        tempData['nstatus'] = transactionStatus.ACTIVE;\r\n    \r\n    \r\n                        formData.append(\"uploadedFile\" + testindex1[\"index\"], file);\r\n                        formData.append(\"uniquefilename\" + testindex1[\"index\"], uniquefilename);\r\n                        fileArray.push(tempData);\r\n                        testindex1[\"index\"] = testindex1[\"index\"] + 1;\r\n                    })\r\n                });\r\n                formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n                isFileEdited = transactionStatus.YES;\r\n            }\r\n\r\n            \r\n        } else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    nfilesize: selectedRecord.size,\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                    slinkname: \"\",\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(): \"\",false),\r\n                    nneedreport:selectedRecord.nneedreport ? selectedRecord.nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                }\r\n                // sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                // sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        if(saveParam.operation==='create'){\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = test.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = test.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = test.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(test.stestsynonym.trim(),false),\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                        \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }else {\r\n            selectedMaster.forEach(test => {\r\n                let sampleFile = {};\r\n                sampleFile['ntestattachmentcode'] = selectedRecord.ntestattachmentcode ? selectedRecord.ntestattachmentcode : 0;\r\n                sampleFile[\"ntransactiontestcode\"] = selectedRecord.ntransactiontestcode;\r\n                sampleFile[\"ntransactionsamplecode\"] = selectedRecord.ntransactionsamplecode;\r\n                sampleFile[\"npreregno\"] = selectedRecord.npreregno;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n                sampleFile[\"jsondata\"] = {\r\n                    stestsynonym:Lims_JSON_stringify(selectedRecord.stestsynonym.trim(),false),\r\n                     // susername: saveParam.userInfo.susername,\r\n                     susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                     // suserrolename: saveParam.userInfo.suserrolename,\r\n                     suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: \"\",\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: 0,\r\n                    slinkname: selectedRecord.nlinkcode.label,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim():\"\",false),\r\n                    nneedreport : transactionStatus.NO,\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                };\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n\r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"testattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n   // formData.append(\"testattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"ntransactiontestcode\", saveParam.ntransactiontestcode);\r\n   // formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n\r\n    const inputParam = {\r\n        inputData: { \"userinfo\": {...saveParam.userInfo,\r\n            sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n            smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n            slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)} },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"TestAttachment\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveBatchAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let nreleasebatchcode = selectedMaster.nreleasebatchcode;\r\n\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                const fileName = selectedRecord.nbatchfilecode && selectedRecord.nbatchfilecode > 0 &&\r\n                    selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ?\r\n                    selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                const uniquefilename = fileName + '.' + fileExtension;\r\n\r\n                //selectedMaster.forEach(sample=>{\r\n\r\n                const tempData = {};\r\n                tempData['nbatchfilecode'] = selectedRecord.nbatchfilecode ?\r\n                    selectedRecord.nbatchfilecode : 0;\r\n                tempData[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n                tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                tempData['nattachmenttypecode'] = nattachmenttypecode;\r\n                tempData[\"ssystemfilename\"] = uniquefilename;\r\n                tempData[\"sfilename\"] =Lims_JSON_stringify(file.name.trim(),false)  ;\r\n                tempData[\"sdescription\"] =Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#'):\"\",false)  ;\r\n                tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n                formData.append(\"uploadedFile\" + index, file);\r\n                formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                fileArray.push(tempData);\r\n                //nreleasebatchcode.push(selectedMaster.releasebatchcode)\r\n                //})\r\n            });\r\n            formData.append(\"filecount\", acceptedFiles.length);\r\n            isFileEdited = transactionStatus.YES;\r\n        }\r\n        else {\r\n            // selectedMaster.forEach(sample=>{\r\n            let sampleFile = {};\r\n            sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n            sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n            sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n            sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.sfilename.trim(),false)  ;\r\n            sampleFile[\"sdescription\"] =Lims_JSON_stringify(  selectedRecord.sdescription ? selectedRecord.sdescription.trim().replaceAll('\\\\n','#r#') : \"\",false);\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n            //npreregno.push(sample.npreregno)\r\n            fileArray.push(sampleFile);\r\n            // })\r\n        }\r\n    } else {\r\n        //selectedMaster.forEach(sample=>{\r\n        let sampleFile = {};\r\n        sampleFile['nbatchfilecode'] = selectedRecord.nbatchfilecode ? selectedRecord.nbatchfilecode : 0;\r\n        sampleFile[\"nreleasebatchcode\"] = selectedMaster.nreleasebatchcode;\r\n        sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n        sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n        sampleFile[\"ssystemfilename\"] = \"\";\r\n        sampleFile[\"sfilename\"] =Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false)  ;\r\n        sampleFile[\"sdescription\"] =Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\",false)  ;\r\n        sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n        fileArray.push(sampleFile);\r\n        //npreregno.push(sample.npreregno)\r\n        //})  \r\n    }\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"batchcreationfile\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"batchcreationfile\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"nreleasebatchcode\", nreleasebatchcode);\r\n    formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    const inputParam = {\r\n        inputData: { userinfo: saveParam.userInfo },\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"BatchCreationFile\"\r\n    }\r\n    return inputParam;\r\n}\r\n\r\nexport function onSaveSubSampleAttachment(saveParam, selectedMaster) {\r\n\r\n    const formData = new FormData();\r\n    const selectedRecord = saveParam.selectedRecord;\r\n    const acceptedFiles = selectedRecord.sfilename;\r\n    const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n    let isFileEdited = transactionStatus.NO;\r\n    let fileArray = [];\r\n    let samindex = {\r\n        index: 0\r\n    };\r\n    if (nattachmenttypecode === attachmentType.FTP) {\r\n        if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n            acceptedFiles.forEach((file, index) => {\r\n\r\n                const splittedFileName = file.name.split('.');\r\n                const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                // const uniquefilename = nattachmenttypecode === attachmentType.FTP? selectedRecord.nregattachmentcode && selectedRecord.nregattachmentcode>0 \r\n                //         ? selectedRecord.ssystemfilename: create_UUID()+'.'+fileExtension: \"\";\r\n\r\n\r\n                selectedMaster.forEach((sample, sampleindex) => {\r\n                    const fileName = selectedRecord.nsampleattachmentcode && selectedRecord.nsampleattachmentcode > 0 && selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !== \"\" ? selectedRecord.ssystemfilename.split('.')[0] : create_UUID()\r\n                    const uniquefilename = fileName + '.' + fileExtension;\r\n                    const tempData = {};\r\n                    tempData['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                    tempData[\"npreregno\"] = sample.npreregno;\r\n                    tempData[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                    tempData['nformcode'] = saveParam.userInfo.nformcode\r\n                    tempData['nusercode'] = saveParam.userInfo.nusercode\r\n                    tempData['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    // tempData[\"nfilesize\"] = file.size;\r\n                    tempData['jsondata'] = {\r\n                        // susername: saveParam.userInfo.susername,\r\n                        susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                        // suserrolename: saveParam.userInfo.suserrolename,\r\n                        suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                        ssystemfilename: uniquefilename,\r\n                        sfilename:Lims_JSON_stringify(file.name.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                        nfilesize: file.size,\r\n                        sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false)  ,\r\n                        slinkname: \"\",\r\n                        sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    }\r\n                    tempData['nattachmenttypecode'] = nattachmenttypecode\r\n                    // tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    // tempData[\"sfilename\"] = file.name.trim();\r\n                    // tempData[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                    tempData['nstatus'] = transactionStatus.ACTIVE;\r\n\r\n\r\n\r\n                    formData.append(\"uploadedFile\" + samindex[\"index\"], file);\r\n                    formData.append(\"uniquefilename\" + samindex[\"index\"], uniquefilename);\r\n                    fileArray.push(tempData);\r\n                    samindex[\"index\"] = samindex[\"index\"] + 1;\r\n                })\r\n            });\r\n            formData.append(\"filecount\", (acceptedFiles.length * selectedMaster.length));\r\n\r\n            isFileEdited = transactionStatus.YES;\r\n        } else {\r\n            selectedMaster.forEach(sample => {\r\n                let sampleFile = {};\r\n                sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n                sampleFile[\"npreregno\"] = sample.npreregno;\r\n                sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n                sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n                sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n                sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n                sampleFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                // sampleFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n                sampleFile['jsondata'] = {\r\n                    // susername: saveParam.userInfo.susername,\r\n                    susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                    // suserrolename: saveParam.userInfo.suserrolename,\r\n                    suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                    ssystemfilename: selectedRecord.ssystemfilename,\r\n                    sfilename:Lims_JSON_stringify(selectedRecord.sfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false)  ,\r\n                    nfilesize: selectedRecord.nfilesize,\r\n                    sdescription:Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                    slinkname: \"\",\r\n                    sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n                }\r\n                sampleFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                //sampleFile[\"sfilename\"] = selectedRecord.sfilename.trim();\r\n                // sampleFile[\"sdescription\"] = selectedRecord.sdescription? selectedRecord.sdescription.trim(): \"\";\r\n                sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n                fileArray.push(sampleFile);\r\n            })\r\n        }\r\n    } else {\r\n        selectedMaster.forEach(sample => {\r\n            let sampleFile = {};\r\n            sampleFile['nsampleattachmentcode'] = selectedRecord.nsampleattachmentcode ? selectedRecord.nsampleattachmentcode : 0;\r\n            sampleFile[\"npreregno\"] = sample.npreregno;\r\n            sampleFile[\"ntransactionsamplecode\"] = sample.ntransactionsamplecode;\r\n            sampleFile['nformcode'] = saveParam.userInfo.nformcode\r\n            sampleFile['nusercode'] = saveParam.userInfo.nusercode\r\n            sampleFile['nuserrolecode'] = saveParam.userInfo.nuserrole\r\n            sampleFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            sampleFile['jsondata'] = {\r\n                // susername: saveParam.userInfo.susername,\r\n                susername:Lims_JSON_stringify(saveParam.userInfo.susername ? saveParam.userInfo.susername.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),                            \r\n                // suserrolename: saveParam.userInfo.suserrolename,\r\n                suserrolename:Lims_JSON_stringify(saveParam.userInfo.suserrolename ? saveParam.userInfo.suserrolename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                ssystemfilename: \"\",\r\n                sfilename:Lims_JSON_stringify( selectedRecord.slinkfilename.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim(),false) ,\r\n                nfilesize: 0,\r\n                slinkname: selectedRecord.nlinkcode.label,\r\n                sdescription:Lims_JSON_stringify( selectedRecord.slinkdescription ? selectedRecord.slinkdescription.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false),\r\n                sheader:Lims_JSON_stringify(selectedRecord.sheader ? selectedRecord.sheader.replaceAll('\\\\','\\\\\\\\\\\\\\\\').replaceAll('\\n','\\\\\\\\n').replaceAll('\"','\\\\\"').trim() : \"\",false) ,\r\n            }\r\n            sampleFile['nattachmenttypecode'] = nattachmenttypecode\r\n            // sampleFile[\"ssystemfilename\"] = \"\";\r\n            sampleFile['nstatus'] = transactionStatus.ACTIVE;\r\n            fileArray.push(sampleFile);\r\n        })\r\n    }\r\n    formData.append(\"ncontrolCode\", saveParam.ncontrolCode);\r\n    formData.append(\"isFileEdited\", isFileEdited);\r\n    formData.append(\"subsampleattachment\", JSON.stringify(fileArray));\r\n    //ALPD-1728\r\n    //formData.append(\"subsampleattachment\", JSON.stringify(fileArray[0]).replaceAll('\\\\n','#r#'));\r\n    formData.append(\"nattachmenttypecode\", nattachmenttypecode);\r\n    formData.append(\"npreregno\", saveParam.npreregno);\r\n    formData.append(\"ntransactionsamplecode\", saveParam.ntransactionsamplecode);\r\n    //formData.append(\"userinfo\", JSON.stringify(saveParam.userInfo));\r\n\r\n    formData.append(\"userinfo\", JSON.stringify({...saveParam.userInfo,\r\n        sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n        smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n        slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}));\r\n\r\n    const inputParam = {\r\n        inputData: {// userinfo: saveParam.userInfo },\r\n                    \"userinfo\": {...saveParam.userInfo,\r\n                    sformname: Lims_JSON_stringify(saveParam.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(saveParam.userInfo.smodulename),\r\n                    slanguagename: Lims_JSON_stringify(saveParam.userInfo.slanguagename)}},\r\n        formData: formData,\r\n        isFileupload: true,\r\n        operation: saveParam.operation,\r\n        classUrl: \"attachment\",\r\n        saveType: saveParam.saveType,\r\n        formRef: saveParam.formRef,\r\n        methodUrl: \"SubSampleAttachment\"\r\n    }\r\n    return inputParam;\r\n}"]},"metadata":{},"sourceType":"module"}