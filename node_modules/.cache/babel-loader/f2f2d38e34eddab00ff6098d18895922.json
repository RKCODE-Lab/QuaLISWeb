{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\testmanagement\\\\TestMasterPricing.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { injectIntl, FormattedMessage } from 'react-intl';\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCopy, faPencilAlt, faThumbsUp, faTrashAlt, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport DataGrid from '../../components/data-grid/data-grid.component';\nimport { callService, crudMaster, validateEsignCredential, updateStore, filterColumnData, getEditTestPriceVersionService, getTestPriceVersionDetail, getPricingAddTestService, getPricingEditService } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { showEsign, getControlMap } from '../../components/CommonScript';\nimport { process } from '@progress/kendo-data-query';\nimport { transactionStatus } from '../../components/Enumeration';\nimport ListMaster from '../../components/list-master/list-master.component';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\nimport AddType1Component from '../../components/type1component/AddType1Component'; //import AddUser from './AddUser';\n//import UserTabs from './UserTabs';\n\nimport Esign from '../audittrail/Esign';\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\nimport AddPricingTest from './AddPricingTest';\nimport EditTestPricing from './EditTestPricing';\nimport { isText } from 'domhandler';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass TestMasterPricing extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.sidebarExpandCollapse = () => {\n      this.setState({\n        sidebarview: true\n      });\n    };\n\n    this.openModal = inputParam => {\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          selectedRecord: {},\n          operation: inputParam.operation,\n          ncontrolCode: inputParam.ncontrolcode,\n          selectedId: null,\n          openModal: true,\n          screenName: this.props.intl.formatMessage({\n            id: 'IDS_TESTPRICEVERSION'\n          })\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data, event.dataState),\n        priceDataState: event.dataState\n      });\n    };\n\n    this.confirmDelete = deleteId => {\n      this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_DEFAULTCONFIRMMSG\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_OK\"\n      }), this.props.intl.formatMessage({\n        id: \"IDS_CANCEL\"\n      }), () => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion, \"delete\", deleteId));\n    };\n\n    this.deleteTestPrice = deleteParam => {\n      const postParam = {\n        inputListName: \"TestPriceVersion\",\n        selectedObject: \"SelectedTestPriceVersion\",\n        primaryKeyField: \"npriceversioncode\"\n      };\n      const inputParam = {\n        classUrl: \"testpricing\",\n        methodUrl: \"TestPrice\",\n        postParam,\n        //displayName: ,\n        inputData: {\n          \"testprice\": deleteParam.selectedRecord,\n          //.dataItem,\n          \"npriceversioncode\": this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\n          \"userinfo\": this.props.Login.userInfo //postParam \n\n        },\n        operation: \"delete\",\n        priceDataState: this.state.priceDataState,\n        selectedRecord: { ...this.state.selectedRecord\n        }\n      };\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: this.props.intl.formatMessage({\n              id: \"IDS_TESTPRICE\"\n            }),\n            operation: deleteParam.operation\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n      }\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n      let selectedId = this.props.Login.selectedId;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n          selectedRecord['esignreason'] = \"\";\n        }\n      } else {\n        openModal = false;\n        selectedRecord = {};\n        selectedId = null;\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          selectedId\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.onComboChange = (comboData, fieldName) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = comboData;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onNumericInputOnChange = (value, name) => {\n      const selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onInputOnChange = (event, primaryFieldKey) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === 'checkbox') {\n        if (event.target.name === \"ntransactionstatus\") selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;else selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else {\n        if (primaryFieldKey && event.target.name === \"ncost\") {\n          const index = selectedRecord.findIndex(item => item.ntestpricedetailcode === primaryFieldKey);\n\n          if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)) {\n            selectedRecord[index][\"ncost\"] = event.target.value;\n          }\n        } else {\n          selectedRecord[event.target.name] = event.target.value;\n        }\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      let versionData = [];\n      versionData[\"userinfo\"] = this.props.Login.userInfo;\n      let postParam = undefined;\n\n      if (this.props.Login.operation === \"update\") {\n        // edit\n        postParam = {\n          inputListName: \"TestPriceVersion\",\n          selectedObject: \"SelectedTestPriceVersion\",\n          primaryKeyField: \"npriceversioncode\"\n        };\n        versionData[\"testpriceversion\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));\n        versionData[\"sversionname\"] = this.state.selectedRecord[\"sversionname\"] || \"\";\n        versionData[\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] || \"\";\n      } else {\n        //add               \n        versionData[\"testpriceversion\"] = {\n          \"nsitecode\": this.props.Login.userInfo.nmastersitecode,\n          \"ntransactionstatus\": transactionStatus.DRAFT,\n          \"sversionname\": this.state.selectedRecord[\"sversionname\"] || \"\",\n          \"sdescription\": this.state.selectedRecord[\"sdescription\"] || \"\"\n        };\n\n        if (this.props.Login.operation === \"copy\") {\n          versionData[\"testpriceversion\"][\"npriceversioncode\"] = this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;\n        }\n      }\n\n      if (versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\n        if (versionData[\"testpriceversion\"]['esignpassword'] === '') {\n          delete versionData[\"testpriceversion\"]['esigncomments'];\n          delete versionData[\"testpriceversion\"]['esignpassword'];\n        }\n      }\n\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: \"TestPriceVersion\",\n        inputData: versionData,\n        operation: this.props.Login.operation,\n        saveType,\n        formRef,\n        postParam,\n        searchRef: this.searchRef,\n        isClearSearch: this.props.Login.isClearSearch,\n        selectedRecord: { ...this.state.selectedRecord\n        }\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.onSaveTestPrice = (saveType, formRef) => {\n      // console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\n      const testPriceData = {\n        \"userinfo\": this.props.Login.userInfo,\n        \"testpriceversion\": this.props.Login.masterData.SelectedTestPriceVersion,\n        \"npriceversioncode\": this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode\n      };\n      let postParam = undefined;\n      let priceDataState = undefined;\n      let selectedId = null;\n\n      if (this.props.Login.operation === \"update\") {\n        // edit\n        priceDataState = this.state.priceDataState;\n        selectedId = this.props.Login.selectedId;\n        postParam = {\n          inputListName: \"TestPriceVersion\",\n          selectedObject: \"SelectedTestPriceVersion\",\n          primaryKeyField: \"npriceversioncode\"\n        };\n        testPriceData[\"testpricelist\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));\n      } else {\n        //add               \n        let priceList = [];\n        this.state.selectedRecord[\"ntestcode\"] && this.state.selectedRecord[\"ntestcode\"].map(item => {\n          return priceList.push({\n            ntestcode: item.value\n          });\n        });\n        testPriceData[\"testpricelist\"] = priceList;\n      }\n\n      if (testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\n        if (testPriceData[\"testpriceversion\"]['esignpassword'] === '') {\n          delete testPriceData[\"testpriceversion\"]['esigncomments'];\n          delete testPriceData[\"testpriceversion\"]['esignpassword'];\n          delete testPriceData[\"testpriceversion\"][\"agree\"];\n        }\n      } //console.log(\"update data:\", testPriceData);\n\n\n      const inputParam = {\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: \"TestPrice\",\n        inputData: testPriceData,\n        operation: this.props.Login.operation,\n        saveType,\n        formRef,\n        postParam,\n        searchRef: this.searchRef,\n        isClearSearch: this.props.Login.isClearSearch,\n        selectedId,\n        priceDataState,\n        selectedRecord: { ...this.state.selectedRecord\n        }\n      };\n      const masterData = this.props.Login.masterData;\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData\n            },\n            saveType\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, masterData, \"openModal\");\n      }\n    };\n\n    this.deleteOrApproveTestPriceVersion = (methodUrl, SelectedTestPriceVersion, operation, ncontrolCode) => {\n      if (SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {\n        const postParam = {\n          inputListName: \"TestPriceVersion\",\n          selectedObject: \"SelectedTestPriceVersion\",\n          primaryKeyField: \"npriceversioncode\",\n          primaryKeyValue: SelectedTestPriceVersion.npriceversioncode,\n          fetchUrl: \"testpricing/getTestPriceVersion\",\n          fecthInputObject: {\n            userinfo: this.props.Login.userInfo\n          }\n        };\n        const inputParam = {\n          classUrl: this.props.Login.inputParam.classUrl,\n          methodUrl,\n          postParam,\n          inputData: {\n            \"userinfo\": this.props.Login.userInfo,\n            \"testpriceversion\": SelectedTestPriceVersion\n          },\n          operation,\n          isClearSearch: this.props.Login.isClearSearch,\n          selectedRecord: { ...this.state.selectedRecord\n          }\n        };\n        const masterData = this.props.Login.masterData;\n\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              loadEsign: true,\n              screenData: {\n                inputParam,\n                masterData\n              },\n              openModal: true,\n              screenName: \"IDS_TESTPRICEVERSION\",\n              operation\n            }\n          };\n          this.props.updateStore(updateInfo);\n        } else {\n          this.props.crudMaster(inputParam, masterData, \"openModal\");\n        }\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_SELECTDRAFTTESTPRICEVERSION\"\n        }));\n      }\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"],\n            nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\n            spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.reloadData = () => {\n      this.searchRef.current.value = \"\";\n      const inputParam = {\n        inputData: {\n          \"userinfo\": this.props.Login.userInfo\n        },\n        classUrl: \"testpricing\",\n        methodUrl: \"TestPriceVersion\",\n        displayName: \"IDS_TESTPRICEVERSION\",\n        userInfo: this.props.Login.userInfo,\n        isClearSearch: this.props.Login.isClearSearch\n      };\n      this.props.callService(inputParam);\n    };\n\n    const _priceDataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      masterStatus: \"\",\n      error: \"\",\n      selectedRecord: {},\n      operation: \"\",\n      SelectedTestPriceVersion: undefined,\n      screenName: undefined,\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      isClearSearch: false,\n      data: [],\n      dataResult: [],\n      priceDataState: _priceDataState,\n      sidebarview: false\n    };\n    this.searchRef = React.createRef(); // this.emailRef = React.createRef();\n\n    this.confirmMessage = new ConfirmMessage(); // this.versionFieldList = ['sversionname', 'sdescription'];\n\n    this.versionFieldList = [{\n      \"idsName\": \"IDS_VERSIONNAME\",\n      \"dataField\": \"sversionname\",\n      \"width\": \"200px\",\n      \"fieldLength\": \"100\",\n      \"mandatory\": true,\n      \"mandatoryLabel\": \"IDS_ENTER\",\n      \"controlType\": \"textbox\"\n    }, {\n      \"idsName\": \"IDS_DESCRIPTION\",\n      \"dataField\": \"sdescription\",\n      \"width\": \"200px\",\n      \"fieldLength\": \"255\",\n      \"mandatory\": false,\n      \"mandatoryLabel\": \"IDS_ENTER\",\n      \"controlType\": \"textarea\"\n    }];\n    this.extractedColumnList = [{\n      \"idsName\": \"IDS_TESTNAME\",\n      \"dataField\": \"stestname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_COST\",\n      \"dataField\": \"ncost\",\n      \"width\": \"200px\"\n    }];\n    this.mandatoryFields = [{\n      \"idsName\": \"IDS_VERSIONNAME\",\n      \"dataField\": \"sversionname\",\n      \"width\": \"200px\",\n      \"mandatory\": true,\n      \"mandatoryLabel\": \"IDS_ENTER\",\n      \"controlType\": \"textbox\"\n    }];\n    this.mandatoryTestFields = [{\n      \"idsName\": \"IDS_TEST\",\n      \"dataField\": \"ntestcode\",\n      \"width\": \"200px\",\n      \"mandatory\": true,\n      \"mandatoryLabel\": \"IDS_SELECT\",\n      \"controlType\": \"selectbox\"\n    }];\n    this.searchFieldList = [\"sversionname\", \"sversionno\", \"sdescription\", \"sversionstatus\"];\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    if (props.Login.selectedRecord === undefined) {\n      return {\n        selectedRecord: {}\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    let versionStatusCSS = \"outline-secondary\";\n    let activeIconCSS = \"fa fa-check\";\n\n    if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.APPROVED) {\n      versionStatusCSS = \"outline-success\";\n    } else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.RETIRED) {\n      versionStatusCSS = \"outline-danger\";\n      activeIconCSS = \"\";\n    } else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {\n      activeIconCSS = \"\";\n    }\n\n    const addId = this.state.controlMap.has(\"AddTestPriceVersion\") && this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;\n    const editId = this.state.controlMap.has(\"EditTestPriceVersion\") && this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;\n    const deleteId = this.state.controlMap.has(\"DeleteTestPriceVersion\") && this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode;\n    const approveId = this.state.controlMap.has(\"ApproveTestPriceVersion\") && this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode;\n    const copyId = this.state.controlMap.has(\"CopyTestPriceVersion\") && this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode;\n    const addPriceId = this.state.controlMap.has(\"AddTestPrice\") && this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;\n    const updatePriceId = this.state.controlMap.has(\"EditTestPrice\") && this.state.controlMap.get(\"EditTestPrice\").ncontrolcode; // const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\n\n    const filterParam = {\n      inputListName: \"TestPriceVersion\",\n      selectedObject: \"SelectedTestPriceVersion\",\n      primaryKeyField: \"npriceversioncode\",\n      fetchUrl: \"testpricing/getTestPriceVersion\",\n      fecthInputObject: {\n        userinfo: this.props.Login.userInfo\n      },\n      masterData: this.props.Login.masterData,\n      searchFieldList: this.searchFieldList\n    };\n    const addParam = {\n      screenName: \"IDS_TESTMASTERPRICING\",\n      operation: \"create\",\n      primaryKeyName: \"npriceversioncode\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolcode: addId\n    };\n    const editParam = {\n      screenName: this.props.intl.formatMessage({\n        id: 'IDS_TESTPRICEVERSION'\n      }),\n      operation: \"update\",\n      primaryKeyName: \"npriceversioncode\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolcode: editId,\n      inputListName: \"TestPriceVersion\",\n      selectedObject: \"SelectedTestPriceVersion\"\n    };\n    const copyParam = {\n      screenName: \"IDS_TESTMASTERPRICING\",\n      operation: \"copy\",\n      primaryKeyName: \"npriceversioncode\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolcode: copyId\n    };\n    const editTestPriceParam = {\n      screenName: \"IDS_PRICE\",\n      \"operation\": \"update\",\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      ncontrolCode: updatePriceId\n    }; //console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: `${!this.props.sidebarview ? '4' : \"2\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ListMaster, {\n      screenName: this.props.intl.formatMessage({\n        id: \"IDS_TESTMASTERPRICING\"\n      }),\n      masterData: this.props.Login.masterData,\n      userInfo: this.props.Login.userInfo,\n      masterList: this.props.Login.masterData.searchedData || this.props.Login.masterData.TestPriceVersion,\n      getMasterDetail: testPriceVersion => this.props.getTestPriceVersionDetail(testPriceVersion, this.props.Login.userInfo, this.props.Login.masterData),\n      selectedMaster: this.props.Login.masterData.SelectedTestPriceVersion,\n      primaryKeyField: \"npriceversioncode\",\n      mainField: \"sversionname\",\n      firstField: \"sversionno\",\n      secondField: \"sversionstatus\",\n      filterColumnData: this.props.filterColumnData,\n      filterParam: filterParam,\n      userRoleControlRights: this.state.userRoleControlRights,\n      addId: addId,\n      searchRef: this.searchRef,\n      reloadData: this.reloadData,\n      openModal: () => this.openModal(addParam),\n      isMultiSelecct: false,\n      hidePaging: false,\n      isClearSearch: this.props.Login.isClearSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: `${!this.props.sidebarview ? '8' : \"10\"}`,\n      className: \"position-relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-view-btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar-view-btn \",\n      onClick: this.props.parentFunction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 33\n      }\n    }, !this.props.sidebarview ? /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-less-than\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 41\n      }\n    }) : /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-greater-than\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 41\n      }\n    }))), /*#__PURE__*/React.createElement(ContentPanel, {\n      className: \"panel-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 33\n      }\n    }, this.props.Login.masterData.TestPriceVersion && this.props.Login.masterData.TestPriceVersion.length > 0 && this.props.Login.masterData.SelectedTestPriceVersion ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      className: \"product-title-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 49\n      }\n    }, this.props.Login.masterData.SelectedTestPriceVersion.sversionname), /*#__PURE__*/React.createElement(Card.Subtitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex product-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"product-title-sub flex-grow-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: `btn btn-outlined ${versionStatusCSS} btn-sm ml-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 61\n      }\n    }, activeIconCSS !== \"\" ? /*#__PURE__*/React.createElement(\"i\", {\n      class: activeIconCSS,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 89\n      }\n    }) : \"\", this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"editTestPriceVersion\",\n      hidden: this.state.userRoleControlRights.indexOf(editId) === -1,\n      className: \"btn btn-circle outline-grey mr-2\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_EDIT\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.props.getEditTestPriceVersionService(editParam),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 65\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"deleteTestPriceVersion\",\n      className: \"btn btn-circle outline-grey mr-2 action-icons-wrap\",\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_DELETE\"\n      }) // data-for=\"tooltip_list_wrap\"\n      ,\n      hidden: this.state.userRoleControlRights.indexOf(deleteId) === -1,\n      onClick: () => this.confirmDelete(deleteId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrashAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 65\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"approveTestPriceVersion\",\n      className: \"btn btn-circle outline-grey mr-2\",\n      hidden: this.state.userRoleControlRights.indexOf(approveId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_APPROVE\"\n      }) //data-for=\"tooltip_list_wrap\"\n      ,\n      onClick: () => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion, \"approve\", approveId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faThumbsUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 65\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"copyTestPriceVersion\",\n      className: \"btn btn-circle outline-grey mr-2\",\n      hidden: this.state.userRoleControlRights.indexOf(approveId) === -1,\n      \"data-tip\": this.props.intl.formatMessage({\n        id: \"IDS_COPY\"\n      }),\n      onClick: () => this.openModal(copyParam) // onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\n      //     \"copy\", approveId)}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faCopy,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 65\n      }\n    })))))), /*#__PURE__*/React.createElement(Card.Body, {\n      className: \"form-static-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_DESCRIPTION\",\n      message: \"Description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 72\n      }\n    })), /*#__PURE__*/React.createElement(ReadOnlyText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 61\n      }\n    }, this.props.Login.masterData.SelectedTestPriceVersion.sdescription)))), /*#__PURE__*/React.createElement(Card, {\n      className: \"at-tabs border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 51\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"addPrice\",\n      className: \"add-txt-btn\",\n      hidden: this.state.userRoleControlRights.indexOf(addPriceId) === -1,\n      onClick: () => this.props.getPricingAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addPriceId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 70\n      }\n    }), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_TEST\",\n      defaultMessage: \"Test\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 69\n      }\n    })), /*#__PURE__*/React.createElement(Nav.Link, {\n      name: \"updatePrice\",\n      className: \"add-txt-btn\",\n      hidden: this.state.userRoleControlRights.indexOf(updatePriceId) === -1,\n      onClick: () => this.props.getPricingEditService({ ...editTestPriceParam,\n        \"updateType\": \"All\",\n        priceDataState: undefined\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPencilAlt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 69\n      }\n    }), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"IDS_PRICE\",\n      defaultMessage: \"Price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 69\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      noGutters: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      primaryKeyField: \"ntestpricedetailcode\",\n      data: this.state.data,\n      dataResult: this.state.dataResult,\n      dataState: this.state.priceDataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.extractedColumnList,\n      controlMap: this.state.controlMap,\n      userRoleControlRights: this.state.userRoleControlRights,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      fetchRecord: this.props.getPricingEditService,\n      editParam: { ...editTestPriceParam,\n        \"updateType\": \"Single\",\n        priceDataState: this.state.priceDataState\n      },\n      deleteRecord: this.deleteTestPrice,\n      deleteParam: {\n        operation: \"delete\"\n      },\n      methodUrl: \"TestPrice\" // reloadData={this.reloadData}\n      ,\n      addRecord: () => this.openModal(addId),\n      pageable: true,\n      scrollable: 'scrollable' // gridHeight = {'600px'}\n      ,\n      isActionRequired: true,\n      isToolBarRequired: false,\n      selectedId: this.props.Login.selectedId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 65\n      }\n    })))))) : \"\"))))), this.props.Login.openModal ? /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      operation: this.props.Login.operation,\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.props.Login.screenName === \"IDS_TEST\" || this.props.Login.screenName === \"IDS_PRICE\" ? this.onSaveTestPrice : this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      mandatoryFields: this.props.Login.screenName === \"IDS_TEST\" || this.props.Login.screenName === \"IDS_PRICE\" ? this.props.Login.operation === \"update\" ? [] : this.mandatoryTestFields : this.mandatoryFields,\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 25\n        }\n      }) : this.props.Login.screenName === \"IDS_TEST\" || this.props.Login.screenName === \"IDS_PRICE\" ? this.props.Login.operation === \"update\" ? /*#__PURE__*/React.createElement(EditTestPricing, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        onFocus: this.handleFocus //testPriceList={this.props.Login.testPriceList || []}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(AddPricingTest, {\n        selectedRecord: this.state.selectedRecord || {},\n        onComboChange: this.onComboChange,\n        pricingTestList: this.props.Login.pricingTestList || [],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 34\n        }\n      }) : /*#__PURE__*/React.createElement(AddType1Component, {\n        selectedRecord: this.state.selectedRecord || {},\n        onInputOnChange: this.onInputOnChange,\n        extractedColumnList: this.versionFieldList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 31\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 17\n      }\n    }) : \"\");\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        this.setState({\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData.TestPrice,\n          dataResult: process(this.props.Login.masterData.TestPrice || [], this.state.priceDataState)\n        });\n      } else {\n        let {\n          priceDataState\n        } = this.state;\n\n        if (this.props.Login.priceDataState === undefined) {\n          priceDataState = {\n            skip: 0,\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n          };\n        }\n\n        this.setState({\n          data: this.props.Login.masterData.TestPrice,\n          selectedRecord: this.props.Login.selectedRecord,\n          dataResult: process(this.props.Login.masterData.TestPrice || [], priceDataState),\n          priceDataState\n        });\n      }\n    }\n  }\n\n  handleFocus(e) {\n    e.target.select();\n  }\n\n  componentWillUnmount() {\n    const updateInfo = {\n      typeName: DEFAULT_RETURN,\n      data: {\n        masterData: [],\n        inputParam: undefined,\n        operation: null,\n        modalName: undefined\n      }\n    };\n    this.props.updateStore(updateInfo);\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  validateEsignCredential,\n  getEditTestPriceVersionService,\n  updateStore,\n  filterColumnData,\n  getTestPriceVersionDetail,\n  getPricingAddTestService,\n  getPricingEditService\n})(injectIntl(TestMasterPricing));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/testmanagement/TestMasterPricing.jsx"],"names":["React","connect","toast","injectIntl","FormattedMessage","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faCopy","faPencilAlt","faThumbsUp","faTrashAlt","faPlus","DataGrid","callService","crudMaster","validateEsignCredential","updateStore","filterColumnData","getEditTestPriceVersionService","getTestPriceVersionDetail","getPricingAddTestService","getPricingEditService","DEFAULT_RETURN","showEsign","getControlMap","process","transactionStatus","ListMaster","SlideOutModal","ReadOnlyText","ContentPanel","AddType1Component","Esign","ConfirmMessage","AddPricingTest","EditTestPricing","isText","mapStateToProps","state","Login","TestMasterPricing","Component","constructor","props","sidebarExpandCollapse","setState","sidebarview","openModal","inputParam","updateInfo","typeName","data","selectedRecord","operation","ncontrolCode","ncontrolcode","selectedId","screenName","intl","formatMessage","id","dataStateChange","event","dataResult","dataState","priceDataState","confirmDelete","deleteId","confirmMessage","confirm","deleteOrApproveTestPriceVersion","masterData","SelectedTestPriceVersion","deleteTestPrice","deleteParam","postParam","inputListName","selectedObject","primaryKeyField","classUrl","methodUrl","inputData","npriceversioncode","userInfo","userRoleControlRights","nformcode","loadEsign","screenData","closeModal","onComboChange","comboData","fieldName","onNumericInputOnChange","value","name","onInputOnChange","primaryFieldKey","target","type","checked","ACTIVE","DEACTIVE","YES","NO","index","findIndex","item","ntestpricedetailcode","test","onSaveClick","saveType","formRef","versionData","undefined","JSON","parse","stringify","nmastersitecode","DRAFT","hasOwnProperty","searchRef","isClearSearch","onSaveTestPrice","testPriceData","priceList","map","push","ntestcode","ntransactionstatus","primaryKeyValue","fetchUrl","fecthInputObject","userinfo","warn","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","reloadData","current","displayName","skip","take","settings","parseInt","masterStatus","error","controlMap","Map","createRef","versionFieldList","extractedColumnList","mandatoryFields","mandatoryTestFields","searchFieldList","getDerivedStateFromProps","render","versionStatusCSS","activeIconCSS","APPROVED","RETIRED","addId","has","get","editId","approveId","copyId","addPriceId","updatePriceId","filterParam","addParam","primaryKeyName","editParam","copyParam","editTestPriceParam","searchedData","TestPriceVersion","testPriceVersion","parentFunction","length","sversionname","sversionstatus","indexOf","sdescription","handleFocus","pricingTestList","componentDidUpdate","previousProps","Object","values","TestPrice","e","select","componentWillUnmount","modalName"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl, FormattedMessage } from 'react-intl';\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCopy, faPencilAlt, faThumbsUp, faTrashAlt, faPlus} from '@fortawesome/free-solid-svg-icons';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport {\r\n    callService, crudMaster, validateEsignCredential, updateStore, filterColumnData,\r\n   getEditTestPriceVersionService, getTestPriceVersionDetail, getPricingAddTestService,\r\n   getPricingEditService} from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap } from '../../components/CommonScript';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\n\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport AddType1Component from '../../components/type1component/AddType1Component';\r\n//import AddUser from './AddUser';\r\n//import UserTabs from './UserTabs';\r\nimport Esign from '../audittrail/Esign';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport AddPricingTest from './AddPricingTest';\r\nimport EditTestPricing from './EditTestPricing';\r\nimport { isText } from 'domhandler';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass TestMasterPricing extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const priceDataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n\r\n            masterStatus: \"\",\r\n            error: \"\",\r\n            selectedRecord: {},\r\n            operation: \"\",\r\n            SelectedTestPriceVersion: undefined,\r\n            screenName: undefined,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            isClearSearch: false,\r\n            data: [], \r\n            dataResult: [],\r\n            priceDataState: priceDataState,\r\n            sidebarview: false\r\n\r\n        };\r\n        this.searchRef = React.createRef();\r\n       // this.emailRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n\r\n       // this.versionFieldList = ['sversionname', 'sdescription'];\r\n\r\n        this.versionFieldList = [\r\n            { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"fieldLength\":\"100\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" , \"fieldLength\":\"255\",\"mandatory\": false , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textarea\"},\r\n            ]\r\n        this.extractedColumnList = [\r\n                { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestname\", \"width\": \"200px\"},\r\n                { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"200px\" },\r\n               ]\r\n        this.mandatoryFields = [ { \"idsName\": \"IDS_VERSIONNAME\", \"dataField\": \"sversionname\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                                    ];\r\n        this.mandatoryTestFields = [ { \"idsName\": \"IDS_TEST\", \"dataField\": \"ntestcode\", \"width\": \"200px\",\"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                                ];\r\n        this.searchFieldList = [\"sversionname\", \"sversionno\", \"sdescription\", \"sversionstatus\"];\r\n    }\r\n    sidebarExpandCollapse = () => {\r\n        this.setState({\r\n            sidebarview: true\r\n        })          \r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n\r\n        let versionStatusCSS = \"outline-secondary\";\r\n        let activeIconCSS = \"fa fa-check\"\r\n        if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.APPROVED) {\r\n            versionStatusCSS = \"outline-success\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.RETIRED) {\r\n            versionStatusCSS = \"outline-danger\";\r\n            activeIconCSS = \"\";\r\n        }\r\n        else if (this.props.Login.masterData.SelectedTestPriceVersion && this.props.Login.masterData.SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {\r\n            activeIconCSS = \"\";\r\n        }\r\n\r\n        const addId = this.state.controlMap.has(\"AddTestPriceVersion\") && this.state.controlMap.get(\"AddTestPriceVersion\").ncontrolcode;\r\n        const editId = this.state.controlMap.has(\"EditTestPriceVersion\") && this.state.controlMap.get(\"EditTestPriceVersion\").ncontrolcode;\r\n        const deleteId = this.state.controlMap.has(\"DeleteTestPriceVersion\") && this.state.controlMap.get(\"DeleteTestPriceVersion\").ncontrolcode\r\n        const approveId = this.state.controlMap.has(\"ApproveTestPriceVersion\") && this.state.controlMap.get(\"ApproveTestPriceVersion\").ncontrolcode\r\n        const copyId = this.state.controlMap.has(\"CopyTestPriceVersion\") && this.state.controlMap.get(\"CopyTestPriceVersion\").ncontrolcode\r\n        const addPriceId = this.state.controlMap.has(\"AddTestPrice\") && this.state.controlMap.get(\"AddTestPrice\").ncontrolcode;\r\n        const updatePriceId = this.state.controlMap.has(\"EditTestPrice\") && this.state.controlMap.get(\"EditTestPrice\").ncontrolcode;\r\n       // const deletePriceId = this.state.controlMap.has(\"DeleteTestPrice\") && this.state.controlMap.get(\"DeleteTestPrice\").ncontrolcode;\r\n     \r\n     \r\n\r\n        const filterParam = {\r\n            inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\",\r\n            fetchUrl: \"testpricing/getTestPriceVersion\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData, searchFieldList: this.searchFieldList\r\n        };\r\n\r\n        const addParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"create\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: addId\r\n        }\r\n\r\n        const editParam = {\r\n            screenName:  this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'}), operation: \"update\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: editId, inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\"\r\n        };\r\n\r\n        const copyParam = {\r\n            screenName: \"IDS_TESTMASTERPRICING\", operation: \"copy\", primaryKeyName: \"npriceversioncode\",\r\n            masterData: this.props.Login.masterData, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: copyId\r\n        }\r\n\r\n        const editTestPriceParam = {screenName:\"IDS_PRICE\", \"operation\":\"update\", \r\n                                    masterData:this.props.Login.masterData, userInfo: this.props.Login.userInfo, \r\n                                    ncontrolCode:updatePriceId};\r\n\r\n        //console.log(\"props:\", this.props.Login.masterData.TestPriceVersion);\r\n        return (<>\r\n            {/* Start of get display*/}\r\n            <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n                <Row noGutters>\r\n                    <Col md={`${!this.props.sidebarview ? '4' : \"2\"}`}> \r\n                        {/* <Row noGutters>\r\n                            <Col md={12}> */}\r\n                            {/* <div className=\"list-fixed-wrap\"> */}\r\n                                <ListMaster\r\n                                    screenName={this.props.intl.formatMessage({ id: \"IDS_TESTMASTERPRICING\" })}\r\n                                    masterData={this.props.Login.masterData}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.TestPriceVersion}\r\n                                    getMasterDetail={(testPriceVersion) => this.props.getTestPriceVersionDetail(testPriceVersion, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                    selectedMaster={this.props.Login.masterData.SelectedTestPriceVersion}\r\n                                    primaryKeyField=\"npriceversioncode\"\r\n                                    mainField=\"sversionname\"\r\n                                    firstField=\"sversionno\"\r\n                                    secondField=\"sversionstatus\"\r\n                                    filterColumnData={this.props.filterColumnData}\r\n                                    filterParam={filterParam}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    addId={addId}\r\n                                    searchRef={this.searchRef}\r\n                                    reloadData={this.reloadData}\r\n                                    openModal={() => this.openModal(addParam)}\r\n                                    isMultiSelecct={false}\r\n                                    hidePaging={false}\r\n                                    isClearSearch={this.props.Login.isClearSearch}\r\n                                />\r\n                            {/* </div>\r\n                        </Col></Row> */}\r\n                    </Col>\r\n                    <Col md={`${!this.props.sidebarview ? '8' : \"10\"}`} className=\"position-relative\">\r\n                            <div className=\"sidebar-view-btn-block\">\r\n                                <div className=\"sidebar-view-btn \" onClick={this.props.parentFunction}>\r\n                                    {!this.props.sidebarview ?                    \r\n                                        <i class=\"fa fa-less-than\"></i> :\r\n                                        <i class=\"fa fa-greater-than\"></i> \r\n                                    }\r\n                                </div>\r\n                            </div> \r\n                        {/* <Row>\r\n                            <Col md={12}> */}\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.TestPriceVersion && this.props.Login.masterData.TestPriceVersion.length > 0 && this.props.Login.masterData.SelectedTestPriceVersion ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                {/* <ReactTooltip place=\"bottom\" globalEventOff='click' id=\"tooltip_list_wrap\" /> */}\r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.SelectedTestPriceVersion.sversionname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                                                                {activeIconCSS !== \"\" ? <i class={activeIconCSS}></i> : \"\"}\r\n                                                                {this.props.Login.masterData.SelectedTestPriceVersion.sversionstatus}\r\n                                                            \r\n                                                            </span>\r\n                                                        </h2>\r\n                                                        {/* <Tooltip position=\"bottom\" anchorElement=\"target\" openDelay={100} parentTitle={true}> */}\r\n                                                        <div className=\"d-inline\">\r\n                                                            <Nav.Link name=\"editTestPriceVersion\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.props.getEditTestPriceVersionService(editParam)}\r\n                                                            >\r\n                                                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                            </Nav.Link>\r\n\r\n                                                            <Nav.Link name=\"deleteTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                               // data-for=\"tooltip_list_wrap\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                onClick={() => this.confirmDelete(deleteId)}>\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                               \r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"approveTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_APPROVE\" })}\r\n                                                                //data-for=\"tooltip_list_wrap\"\r\n                                                                onClick={() => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                    \"approve\", approveId)}>\r\n                                                                <FontAwesomeIcon icon={faThumbsUp} />\r\n                                                            </Nav.Link>\r\n                                                            <Nav.Link name=\"copyTestPriceVersion\" className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                hidden={this.state.userRoleControlRights.indexOf(approveId) === -1}\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_COPY\" })}\r\n                                                                onClick={()=>this.openModal(copyParam)}\r\n                                                                // onClick={() => this.copyTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                                                //     \"copy\", approveId)}\r\n                                                                >\r\n                                                                <FontAwesomeIcon icon={faCopy} />\r\n                                                            </Nav.Link>\r\n                                                        </div>\r\n                                                        {/* </Tooltip> */}\r\n                                                    </div>\r\n\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body className=\"form-static-wrap\">\r\n                                                {/* <Card.Text> */}\r\n\r\n                                                <Row>\r\n                                                    <Col md={12}>\r\n                                                        <FormGroup>\r\n                                                            <FormLabel><FormattedMessage id=\"IDS_DESCRIPTION\" message=\"Description\" /></FormLabel>\r\n                                                            <ReadOnlyText>{this.props.Login.masterData.SelectedTestPriceVersion.sdescription}</ReadOnlyText>\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                  \r\n                                                </Row>\r\n                                                {/* <Row>\r\n                                                    <Col>\r\n                                                        <div className=\"horizontal-line\"></div>\r\n                                                    </Col>\r\n                                                </Row> */}\r\n                                                  <Card className=\"at-tabs border-0\">\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <div className=\"d-flex justify-content-end\">\r\n                                                                <Nav.Link name=\"addPrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(addPriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingAddTestService(\"IDS_TEST\", \"create\", this.props.Login.masterData, this.props.Login.userInfo, addPriceId)}\r\n                                                                        >\r\n                                                                     <FontAwesomeIcon icon={faPlus} /> { } \r\n                                                                    <FormattedMessage id='IDS_TEST' defaultMessage='Test' />\r\n                                                                </Nav.Link>\r\n                                                                <Nav.Link name=\"updatePrice\" className=\"add-txt-btn\" \r\n                                                                        hidden={this.state.userRoleControlRights.indexOf(updatePriceId) === -1}\r\n                                                                        onClick={()=>this.props.getPricingEditService({...editTestPriceParam, \"updateType\":\"All\", priceDataState:undefined})}\r\n                                                                        >\r\n                                                                    <FontAwesomeIcon icon={faPencilAlt} /> { }\r\n                                                                    <FormattedMessage id='IDS_PRICE' defaultMessage='Price' />\r\n                                                                </Nav.Link>\r\n                                                                </div>\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                        <Row noGutters>\r\n                                                            <Col md={12}>\r\n                                                                <DataGrid\r\n                                                                    primaryKeyField={\"ntestpricedetailcode\"}\r\n                                                                    data={this.state.data}\r\n                                                                    dataResult={this.state.dataResult}\r\n                                                                    dataState={this.state.priceDataState}\r\n                                                                    dataStateChange={this.dataStateChange}\r\n                                                                    extractedColumnList={this.extractedColumnList}\r\n                                                                    controlMap={this.state.controlMap}\r\n                                                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                                                    inputParam={this.props.Login.inputParam}\r\n                                                                    userInfo={this.props.Login.userInfo}\r\n                                                                    fetchRecord={this.props.getPricingEditService}\r\n                                                                    editParam={{...editTestPriceParam, \"updateType\":\"Single\", priceDataState:this.state.priceDataState}}\r\n                                                                    deleteRecord={this.deleteTestPrice}\r\n                                                                    deleteParam={{operation:\"delete\"}}\r\n                                                                    methodUrl={\"TestPrice\"}\r\n                                                                // reloadData={this.reloadData}\r\n                                                                    addRecord = {() => this.openModal(addId)}\r\n                                                                    pageable={true}\r\n                                                                    scrollable={'scrollable'}\r\n                                                                // gridHeight = {'600px'}\r\n                                                                    isActionRequired={true}\r\n                                                                    isToolBarRequired={false}\r\n                                                                    selectedId={this.props.Login.selectedId}\r\n                                                                />\r\n                                                            </Col>\r\n                                                        </Row>\r\n                                                </Card>\r\n                                                {/* </Card.Text> */}\r\n                                            \r\n                                            </Card.Body>\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col></Row>\r\n                    {/* </Col>\r\n                </Row> */}\r\n            </div>\r\n\r\n            {/* End of get display*/}\r\n\r\n            {/* Start of Modal Sideout for  Creation */}\r\n            {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n            {this.props.Login.openModal ?\r\n                <SlideOutModal show={this.props.Login.openModal}\r\n                    closeModal={this.closeModal}\r\n                    operation={this.props.Login.operation}\r\n                    inputParam={this.props.Login.inputParam}\r\n                    screenName={this.props.Login.screenName}\r\n                    onSaveClick={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                                this.props.Login.screenName === \"IDS_PRICE\")  ? this.onSaveTestPrice: this.onSaveClick}\r\n                    esign={this.props.Login.loadEsign}\r\n                    validateEsign={this.validateEsign}\r\n                    masterStatus={this.props.Login.masterStatus}\r\n                    updateStore={this.props.updateStore}\r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    mandatoryFields={(this.props.Login.screenName === \"IDS_TEST\" || \r\n                    this.props.Login.screenName === \"IDS_PRICE\")? \r\n                            this.props.Login.operation === \"update\" ? [] : this.mandatoryTestFields:\r\n                            this.mandatoryFields}\r\n                    addComponent={this.props.Login.loadEsign ?\r\n                        <Esign operation={this.props.Login.operation}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            inputParam={this.props.Login.inputParam}\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                        />\r\n                        : (this.props.Login.screenName === \"IDS_TEST\" || \r\n                        this.props.Login.screenName === \"IDS_PRICE\")  ? \r\n                            this.props.Login.operation === \"update\" ?\r\n                                <EditTestPricing\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onFocus={this.handleFocus}\r\n                                    //testPriceList={this.props.Login.testPriceList || []}\r\n                                    />\r\n                                :<AddPricingTest\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onComboChange={this.onComboChange}\r\n                                    pricingTestList={this.props.Login.pricingTestList || []}/>\r\n\r\n                            : <AddType1Component\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                extractedColumnList={this.versionFieldList}\r\n                            />\r\n                      \r\n                    }\r\n                /> : \"\"}\r\n            {/* End of Modal Sideout for User Creation */}\r\n        </>\r\n        );\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({ userRoleControlRights, controlMap,\r\n                    data: this.props.Login.masterData.TestPrice,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice || [], this.state.priceDataState), });\r\n            }\r\n            else {        \r\n                let {priceDataState} = this.state;\r\n                if(this.props.Login.priceDataState === undefined){\r\n                    priceDataState={skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                }         \r\n                this.setState({\r\n                    data: this.props.Login.masterData.TestPrice, selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(this.props.Login.masterData.TestPrice ||[],priceDataState),\r\n                    priceDataState\r\n                });\r\n            }  \r\n        }\r\n    }\r\n\r\n    handleFocus(e){\r\n        e.target.select();\r\n    }\r\n\r\n    openModal = (inputParam) => {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                selectedRecord: {}, operation: inputParam.operation, ncontrolCode:inputParam.ncontrolcode, selectedId:null,\r\n                openModal: true, screenName: this.props.intl.formatMessage({id:'IDS_TESTPRICEVERSION'})\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            priceDataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n    confirmDelete = (deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteOrApproveTestPriceVersion(\"TestPriceVersion\", this.props.Login.masterData.SelectedTestPriceVersion, \"delete\", deleteId));\r\n    }\r\n\r\n    deleteTestPrice = (deleteParam) =>{\r\n        const postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n\r\n        const inputParam = {\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPrice\",\r\n            postParam,\r\n            //displayName: ,\r\n            inputData: {\r\n                \"testprice\": deleteParam.selectedRecord,//.dataItem,\r\n                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode,\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                //postParam \r\n\r\n            },\r\n            operation:\"delete\",\r\n            priceDataState:this.state.priceDataState,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: \"IDS_TESTPRICE\" }),\r\n                    operation:deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n            selectedId = null;\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onNumericInputOnChange = (value, name) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event, primaryFieldKey) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n\r\n        }\r\n        else {   \r\n            if(primaryFieldKey && event.target.name === \"ncost\"){\r\n                const index = selectedRecord.findIndex(item=>item.ntestpricedetailcode === primaryFieldKey);\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(event.target.value)){\r\n                    selectedRecord[index][\"ncost\"] = event.target.value;\r\n                }\r\n            }\r\n            else{      \r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }           \r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let versionData = [];\r\n        versionData[\"userinfo\"] = this.props.Login.userInfo;\r\n\r\n        let postParam = undefined;\r\n\r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            versionData[\"testpriceversion\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));\r\n            versionData[\"sversionname\"]=this.state.selectedRecord[\"sversionname\"] || \"\";\r\n            versionData[\"sdescription\"]=this.state.selectedRecord[\"sdescription\"] || \"\";\r\n\r\n        }\r\n        else {\r\n            //add               \r\n            versionData[\"testpriceversion\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode,\r\n                                                 \"ntransactionstatus\": transactionStatus.DRAFT,\r\n                                                \"sversionname\":this.state.selectedRecord[\"sversionname\"] || \"\",\r\n                                                \"sdescription\":this.state.selectedRecord[\"sdescription\"] || \"\",\r\n                                            };\r\n\r\n            if(this.props.Login.operation === \"copy\"){\r\n                versionData[\"testpriceversion\"][\"npriceversioncode\"] = this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode;\r\n            }\r\n\r\n        }\r\n        if (versionData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (versionData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete versionData[\"testpriceversion\"]['esigncomments']\r\n                delete versionData[\"testpriceversion\"]['esignpassword']\r\n            }\r\n        }\r\n      \r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPriceVersion\",\r\n            inputData: versionData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n    onSaveTestPrice = (saveType, formRef) => {\r\n\r\n       // console.log(\"this.props.Login.selectedRecord:\", this.props.Login.selectedRecord);\r\n        const testPriceData = {\"userinfo\": this.props.Login.userInfo,\r\n                                \"testpriceversion\":this.props.Login.masterData.SelectedTestPriceVersion,\r\n                                \"npriceversioncode\":this.props.Login.masterData.SelectedTestPriceVersion.npriceversioncode};\r\n\r\n        let postParam = undefined;\r\n        let priceDataState = undefined;\r\n        let selectedId = null;\r\n        \r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            priceDataState = this.state.priceDataState;\r\n            selectedId = this.props.Login.selectedId; \r\n            postParam = { inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\", primaryKeyField: \"npriceversioncode\" };\r\n            testPriceData[\"testpricelist\"] = JSON.parse(JSON.stringify(this.props.Login.selectedRecord));           \r\n        }\r\n        else {\r\n            //add               \r\n                                               \r\n            let priceList = [];\r\n            this.state.selectedRecord[\"ntestcode\"] &&\r\n                this.state.selectedRecord[\"ntestcode\"].map(item => {\r\n                    return priceList.push({\r\n                       ntestcode: item.value                      \r\n                    })\r\n                })\r\n           \r\n            testPriceData[\"testpricelist\"] = priceList;                             \r\n\r\n        }\r\n        if (testPriceData[\"testpriceversion\"].hasOwnProperty('esignpassword')) {\r\n            if (testPriceData[\"testpriceversion\"]['esignpassword'] === '') {\r\n                delete testPriceData[\"testpriceversion\"]['esigncomments']\r\n                delete testPriceData[\"testpriceversion\"]['esignpassword']\r\n                delete testPriceData[\"testpriceversion\"][\"agree\"]\r\n            }\r\n        }\r\n       //console.log(\"update data:\", testPriceData);\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"TestPrice\",\r\n            inputData: testPriceData,\r\n            operation: this.props.Login.operation,\r\n            saveType, formRef, postParam, searchRef: this.searchRef,\r\n            isClearSearch: this.props.Login.isClearSearch,\r\n            selectedId, priceDataState,\r\n            selectedRecord: {...this.state.selectedRecord}\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {            \r\n            this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n    deleteOrApproveTestPriceVersion = (methodUrl, SelectedTestPriceVersion, operation, ncontrolCode) => {\r\n        if (SelectedTestPriceVersion.ntransactionstatus === transactionStatus.DRAFT) {         \r\n\r\n            const postParam = {\r\n                inputListName: \"TestPriceVersion\", selectedObject: \"SelectedTestPriceVersion\",\r\n                primaryKeyField: \"npriceversioncode\",\r\n                primaryKeyValue: SelectedTestPriceVersion.npriceversioncode,\r\n                fetchUrl: \"testpricing/getTestPriceVersion\",\r\n                fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            }\r\n\r\n            const inputParam = {\r\n                classUrl: this.props.Login.inputParam.classUrl,\r\n                methodUrl, postParam,\r\n                inputData: {\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"testpriceversion\": SelectedTestPriceVersion\r\n                },\r\n                operation,\r\n                isClearSearch: this.props.Login.isClearSearch,\r\n                selectedRecord: {...this.state.selectedRecord}\r\n            }\r\n\r\n            const masterData = this.props.Login.masterData;\r\n\r\n            if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData },\r\n                        openModal: true, screenName: \"IDS_TESTPRICEVERSION\", operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n            }\r\n        }    \r\n        else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTTESTPRICEVERSION\" }));\r\n        }\r\n    \r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: \"testpricing\",\r\n            methodUrl: \"TestPriceVersion\",\r\n            displayName: \"IDS_TESTPRICEVERSION\",\r\n            userInfo: this.props.Login.userInfo,\r\n            isClearSearch: this.props.Login.isClearSearch\r\n\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, validateEsignCredential,getEditTestPriceVersionService,\r\n    updateStore,filterColumnData, getTestPriceVersionDetail, getPricingAddTestService,\r\n    getPricingEditService\r\n})(injectIntl(TestMasterPricing));\r\n\r\n"]},"metadata":{},"sourceType":"module"}