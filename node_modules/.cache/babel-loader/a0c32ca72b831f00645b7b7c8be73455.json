{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{version}from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../../components/slide-out-modal/SlideOutModal';import{DEFAULT_RETURN}from'../../../actions/LoginTypes';import{constructOptionList,onDropAttachFileList,deleteAttachmentDropZone,showEsign,create_UUID,Lims_JSON_stringify}from'../../../components/CommonScript';import CustomTabs from'../../../components/custom-tabs/custom-tabs.component';import{connect}from'react-redux';import TrainingParticipantsTab from'./TrainingParticipantsTab';import TrainingDocTab from'./TrainingDocTab';import AddTrainingDocFile from'./AddTrainingDocFile';import AddTraineeDocFile from'./AddTraineeDocFile';import Esign from'../../audittrail/Esign';import{attachmentType,FORMULAFIELDTYPE,transactionStatus}from'../../../components/Enumeration';import AddParticipantsStatus from'../trainingcertificate/AddParticipantsStatus';import{addtraineedocfile,viewAttachment}from'../../../actions';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var TrainingUpdateChildTab=/*#__PURE__*/function(_React$Component){_inherits(TrainingUpdateChildTab,_React$Component);var _super=_createSuper(TrainingUpdateChildTab);function TrainingUpdateChildTab(props){var _this;_classCallCheck(this,TrainingUpdateChildTab);_this=_super.call(this,props);_this.TrainingDocumentDataStateChange=function(event){_this.setState({dataState:event.dataState});};_this.ParticipantsDataStateChange=function(event){_this.setState({dataStateParticipants:event.dataState});};_this.handleChange=function(value,valueParam,isSection){if(value!==null){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[valueParam]=value;_this.setState({selectedRecord:selectedRecord});}};_this.viewTraineeDocumentFile=function(filedata){var inputParam={inputData:{traineefile:filedata,userinfo:_this.props.userInfo},classUrl:\"trainingupdate\",operation:\"view\",methodUrl:\"AttachedTraineeFile\",screenName:\"IDS_TRAINEEDOCUMENT\"};_this.props.viewAttachment(inputParam);};_this.viewTrainingDocumentFile=function(filedata){var inputParam={inputData:{trainingfile:filedata,userinfo:_this.props.userInfo},classUrl:\"trainingupdate\",operation:\"view\",methodUrl:\"AttachedTrainingFile\",screenName:\"IDS_TRAININGDOCUMENT\"};_this.props.viewAttachment(inputParam);};_this.tabDetail=function(){var tabMap=new Map();tabMap.set(\"IDS_PARTICIPANTS\",/*#__PURE__*/React.createElement(TrainingParticipantsTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\" TrainieeDocuments\",updateStore:_this.props.updateStore,primaryKeyField:\"nparticipantcode\",masterData:_this.props.masterData,primaryList:\"Participants\",dataResult:process(_this.props.Login.masterData[(\"Participants\",\"TraineeDocuments\")]||[],_this.state.dataStateParticipants),dataState:_this.props.screenName===undefined||_this.props.screenName===\"Participants\"?_this.state.dataStateParticipants:{skip:0},dataStateChange:function dataStateChange(event){return _this.setState({dataStateParticipants:event.data});},columnList:_this.participantsColumnList,methodUrl:\"TrainingParticipants\",fetchParticipantsRecordByID:_this.fetchParticipantsRecordByID,deleteRecord:_this.deleteRecord,getAvailableData:_this.props.getAvailableData,addtraineedoc:_this.addtraineedoc,selectedRecord:_this.state.selectedRecord||{},getTrainingParticipantsAttended:_this.props.getTrainingParticipantsAttended,getTrainingParticipantsCompetent:_this.props.getTrainingParticipantsCompetent,getTrainingParticipantsCertified:_this.props.getTrainingParticipantsCertified,viewTraineeDocumentFile:_this.viewTraineeDocumentFile}));tabMap.set(\"IDS_TRAININGDOCUMENTS\",/*#__PURE__*/React.createElement(TrainingDocTab,{screenName:\"TrainingDocuments\",onInputOnChange:_this.onInputOnChange,controlMap:_this.props.controlMap,updateStore:_this.props.updateStore,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,TrainingDocument:_this.props.masterData.TrainingDocument||[],getAvailableData:_this.props.getAvailableData,settings:_this.props.settings,selectedRecord:_this.state.selectedRecord||{},viewTrainingDocumentFile:_this.viewTrainingDocumentFile}));return tabMap;};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?optional[0]:optional[1];}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.addtraineedoc=function(ncontrolcode){var openChildModal=_this.props.Login.openChildModal;var operation=\"create\";var screenName=_this.props.Login.screenName;screenName=\"IDS_TRAINEEDOCUMENTS\";openChildModal=true;var selectedRecord=_this.props.selectedRecord;var updateInfo={userInfo:_this.props.Login.userInfo,operation:operation,selectedRecord:selectedRecord,ncontrolcode:ncontrolcode,screenName:screenName};_this.props.addtraineedocfile(updateInfo);// const updateInfo = {\n//     typeName: DEFAULT_RETURN,\n//     data: {\n//         openModal: true,\n//         operation: \"create\",\n//         selectedRecord: {},\n//         ncontrolcode: ncontrolcode,\n//         screenName : \"IDS_TRAINEEDOCUMENTS\" \n//     }\n// }\n// this.props.updateStore(updateInfo);\n};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openChildModal=_this.props.Login.openChildModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||//this.props.Login.operation === \"certify\" ||\n//this.props.Login.operation === \"attend\" ||\n//this.props.Login.operation === \"competent\" ||\n_this.props.Login.operation===\"complete\"){loadEsign=false;// if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"complete\") {\nopenChildModal=false;selectedRecord={};//}                 \n}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onDropTrainingDoc=function(attachedFiles,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.onDropTrainieeDoc=function(attachedFiles,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"});};_this.deleteRecord=function(deleteParam){var _inputData;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var dataState=undefined;var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),classUrl:\"trainingupdate\",operation:deleteParam.operation,methodUrl:methodUrl,dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,operation:deleteParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.onSaveClick=function(saveType,formRef){var inputParam={};var defaultInput={};var isValidRequest=true;var openModal=\"openChildModal\";if(_this.props.screenName===\"IDS_TRAININGDOCUMENTS\"){inputParam=_this.onSaveTrainingDoc(saveType,formRef);}if(_this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"){inputParam=_this.onSaveTrainieeDoc(saveType,formRef);}if(_this.props.screenName===\"IDS_ATTENDPARTICIPANTSDETAILS\"){inputParam=_this.onSaveAttended(saveType,formRef);}if(_this.props.screenName===\"IDS_CERTIFYPARTICIPANTSDETAILS\"){inputParam=_this.onSaveCertified(saveType,formRef);}if(_this.props.screenName===\"IDS_COMPETENTPARTICIPANTSDETAILS\"){inputParam=_this.onSaveCompetent(saveType,formRef);}if(isValidRequest){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,openModal,defaultInput);}}};_this.onSaveAttended=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,// nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\nnparticipantcode:participants.item.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.NO,ncompetencystatus:transactionStatus.NO,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"attend\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveCertified=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,// nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\nnparticipantcode:participants.item.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.YES,ncompetencystatus:transactionStatus.NO,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"certify\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveCompetent=function(saveType,formRef){var inputData=[];var trainingupdate=[];var dataState=undefined;var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};inputData[\"userinfo\"]=_this.props.userInfo;_this.props.selectedRecord.nusercode&&_this.props.selectedRecord.nusercode.map(function(participants){trainingupdate.push({ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,// nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\nnparticipantcode:participants.item.nparticipantcode,ntransactionstatus:transactionStatus.ATTENDED,ncertifiedstatus:transactionStatus.YES,ncompetencystatus:transactionStatus.YES,nusercode:participants.item.nusercode,ntechniquecode:_this.props.masterData.selectedTechinque.ntechniquecode});});inputData[\"trainingupdate\"]=trainingupdate;var inputParam={classUrl:'trainingupdate',methodUrl:\"TrainingParticipants\",inputData:inputData,operation:\"competent\",saveType:saveType,formRef:formRef,dataState:dataState,postParam:postParam};return inputParam;};_this.onSaveTrainingDoc=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var trainingdocArray=[];var trainingdoc={ntrainingcode:_this.props.masterData.SelectedTrainingUpdate.ntrainingcode,ntrainingdoccode:selectedRecord.ntrainingdoccode?selectedRecord.ntrainingdoccode:0,nstatus:transactionStatus.ACTIVE};var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},trainingdoc);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntrainingdoccode&&selectedRecord.ntrainingdoccode>0&&selectedRecord.ssystemfilename!==\"\"&&selectedRecord.ssystemfilename!==undefined?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name.trim(),false);tempData[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\",false);tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"nattachmenttypecode\"]=1;// tempData[\"dcreateddate\"] = this.props.Login.userInfo;\nformData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);trainingdocArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{trainingdoc[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename,false);trainingdoc[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\",false);trainingdoc[\"ssystemfilename\"]=selectedRecord.ssystemfilename;trainingdoc[\"nlinkcode\"]=transactionStatus.NA;trainingdoc[\"nfilesize\"]=selectedRecord.nfilesize;//trainingdoc[\"dcreateddate\"] = this.props.Login.userInfo;\ntrainingdoc[\"nattachmenttypecode\"]=1;trainingdocArray.push(trainingdoc);}}else{trainingdoc[\"ssystemfilename\"]=\"\";trainingdoc[\"nattachmenttypecode\"]=2;trainingdoc[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.slinkfilename,false);trainingdoc[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\",false);trainingdoc[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;trainingdoc[\"nfilesize\"]=0;trainingdocArray.push(trainingdoc);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"trainingdoc\",JSON.stringify(trainingdocArray));var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.userInfo.smodulename),//ALPD-1708(while saving the file,audit trail is not captured respective language..)\nslanguagename:Lims_JSON_stringify(_this.props.Login.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"trainingupdate\",saveType:saveType,formRef:formRef,methodUrl:\"TrainingDoc\",postParam:postParam};return inputParam;};_this.onSaveTrainieeDoc=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var trainieedocArray=[];var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\"};var trainieedoc={nparticipantcode:_this.props.masterData.selectedParticipants.nparticipantcode,ntraineedoccode:selectedRecord.ntraineedoccode?selectedRecord.ntraineedoccode:0,nstatus:transactionStatus.ACTIVE,ntrainingcode:_this.props.masterData.selectedParticipants.ntrainingcode};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},trainieedoc);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntraineedoccode&&selectedRecord.ntraineedoccode>0&&selectedRecord.ssystemfilename!==\"\"&&selectedRecord.ssystemfilename!==undefined?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name,false);tempData[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\",false);tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"nattachmenttypecode\"]=1;// tempData[\"dcreateddate\"] = this.props.Login.userInfo;\nformData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);trainieedocArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{trainieedoc[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename,false);trainieedoc[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.sfiledesc?selectedRecord.sfiledesc.trim():\"\",false);trainieedoc[\"ssystemfilename\"]=selectedRecord.ssystemfilename;trainieedoc[\"nlinkcode\"]=transactionStatus.NA;trainieedoc[\"nfilesize\"]=selectedRecord.nfilesize;//  trainieedoc[\"dcreateddate\"] = this.props.Login.userInfo;\ntrainieedoc[\"nattachmenttypecode\"]=1;trainieedocArray.push(trainieedoc);}}else{trainieedoc[\"ssystemfilename\"]=\"\";trainieedoc[\"nattachmenttypecode\"]=2;trainieedoc[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.slinkfilename,false);trainieedoc[\"sfiledesc\"]=Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\",false);trainieedoc[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;trainieedoc[\"nfilesize\"]=0;trainieedocArray.push(trainieedoc);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"trainieedoc\",JSON.stringify(trainieedocArray));var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.userInfo.smodulename),//ALPD-1708(while saving the file,audit trail is not captured respective language..)\nslanguagename:Lims_JSON_stringify(_this.props.Login.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"trainingupdate\",saveType:saveType,formRef:formRef,methodUrl:\"TrainieeDoc\",postParam:postParam};return inputParam;};_this.fetchParticipantsRecordByID=function(operation,version,ncontrolCode){var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"trainingparticipants\"]={\"nusercode\":version.nusercode,\"nparticipantcode\":version.nparticipantcode,\"ntrainingcode\":version.ntrainingcode,\"ncertifiedstatus\":version.ncertifiedstatus,\"ncompetencystatus\":version.ncompetencystatus,\"ntransactionstatus\":version.ntransactionstatus};var postParam={inputListName:\"TechniqueList\",selectedObject:\"SelectedTrainingUpdate\",primaryKeyField:\"ntrainingcode\",primaryKeyValue:_this.props.Login.masterData.TechniqueList.ntrainingcode,fetchUrl:\"trainingupdate/getTraningUpdateByTechnique\",fecthInputObject:{userinfo:_this.props.Login.userInfo}};var inputParam={methodUrl:\"TrainingParticipants\",classUrl:_this.props.Login.inputParam.classUrl,inputData:inputData,postParam:postParam,operation:operation};var masterData=_this.props.Login.masterData;if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,operation:operation,screenName:'',id:'ParticipantsStatus'}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};var _dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};var dataStateParticipants={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'Trainingdoc-tab',dataState:_dataState,dataStateParticipants:dataStateParticipants,trainingDocument:[],participants:[]};_this.trainingDocumentFieldList=['ntrainingdoccode','nparticipantcode','ntrainingcode','sfilename','ntechniquecode','sfullname','nstatus','ntransactionstatus'];_this.trainingDocumentColumnList=[{\"idsName\":\"IDS_TRAININGDOCUMENTNAME\",\"dataField\":\"sfilename\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];_this.participantsColumnList=[{\"idsName\":\"IDS_PARTICIPANTSNAME\",\"dataField\":\"sfullname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];// this.validationTrainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\n_this.validationParticipantsColumnList=[{\"idsName\":\"IDS_PARTICIPANTS\",\"dataField\":\"sfullname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(TrainingUpdateChildTab,[{key:\"render\",value:function render(){// const mandatoryFields = [];\n// this.validationTrainingDocumentColumnList.forEach(item => item.mandatory === true ?\n//    mandatoryFields.push(item) : \"\"\n//  );\nvar mandatoryFields=[];if(this.props.screenName===\"IDS_TRAININGDOCUMENTS\"||this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields.push({\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else{mandatoryFields.push({\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"});}}else{mandatoryFields.push({mandatory:true,idsName:\"IDS_PARTICIPANTNAME\",dataField:\"nusercode\",mandatoryLabel:\"IDS_SELECT\",controlType:\"selectbox\"});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.Login.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openChildModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_TRAININGDOCUMENTS\"?/*#__PURE__*/React.createElement(AddTrainingDocFile,{selectedRecord:this.state.selectedRecord||{},onDrop:this.onDropTrainingDoc,onInputOnChange:this.onInputOnChange,deleteAttachment:this.deleteAttachment,formatMessage:this.props.intl.formatMessage,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,selectedId:this.props.Login.selectedId,maxSize:20,maxFiles:1,linkMaster:this.props.Login.linkMaster,onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_TRAINEEDOCUMENTS\"?/*#__PURE__*/React.createElement(AddTraineeDocFile,{selectedRecord:this.state.selectedRecord||{},onDrop:this.onDropTrainieeDoc,onInputOnChange:this.onInputOnChange,deleteAttachment:this.deleteAttachment,formatMessage:this.props.intl.formatMessage,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),operation:this.props.Login.operation,userLogged:this.props.Login.userLogged,inputParam:this.props.Login.inputParam,selectedId:this.props.Login.selectedId,linkMaster:this.props.Login.linkMaster,onComboChange:this.props.onComboChange}):/*#__PURE__*/React.createElement(AddParticipantsStatus,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.onInputOnChange,handleChange:this.handleChange,formatMessage:this.props.formatMessage,usersStatus:this.props.usersStatus||[],nusercode:this.props.nusercode||[],selectedTrainingParticipants:this.props.masterData.SelectedTrainingParticipants||{},extractedColumnList:this.extractedColumnList})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}var _this$state=this.state,_dataState2=_this$state.dataState,_dataStateParticipants=_this$state.dataStateParticipants;if(this.props.dataState===undefined){_dataState2={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};_dataStateParticipants={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5,filter:undefined,sort:undefined};}this.setState({isOpen:isOpen,activeTab:'Trainingdocument-tab',dataState:_dataState2,dataStateParticipants:_dataStateParticipants});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}var _this$state2=this.state,dataState=_this$state2.dataState,dataStateParticipants=_this$state2.dataStateParticipants;if(this.props.dataState!==previousProps.dataState&&this.props.dataState!==dataState){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};dataStateParticipants={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};this.setState({dataState:dataState,dataStateParticipants:dataStateParticipants});}if(this.props.trainingDocument!==previousProps.trainingDocument||this.props.participants!==previousProps.participants){var participants=constructOptionList(this.props.participants||[],\"nparticipantcode\",\"sfullname\",undefined,undefined,undefined);var participantsList=participants.get(\"OptionList\");this.setState({participants:participantsList});}}}]);return TrainingUpdateChildTab;}(React.Component);export default connect(mapStateToProps,{addtraineedocfile:addtraineedocfile,viewAttachment:viewAttachment})(injectIntl(TrainingUpdateChildTab));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/competencemanagement/trainingupdate/TrainingUpdateChildTab.jsx"],"names":["React","version","Row","Col","Card","injectIntl","process","SlideOutModal","DEFAULT_RETURN","constructOptionList","onDropAttachFileList","deleteAttachmentDropZone","showEsign","create_UUID","Lims_JSON_stringify","CustomTabs","connect","TrainingParticipantsTab","TrainingDocTab","AddTrainingDocFile","AddTraineeDocFile","Esign","attachmentType","FORMULAFIELDTYPE","transactionStatus","AddParticipantsStatus","addtraineedocfile","viewAttachment","mapStateToProps","state","Login","TrainingUpdateChildTab","props","TrainingDocumentDataStateChange","event","setState","dataState","ParticipantsDataStateChange","dataStateParticipants","handleChange","value","valueParam","isSection","selectedRecord","viewTraineeDocumentFile","filedata","inputParam","inputData","traineefile","userinfo","userInfo","classUrl","operation","methodUrl","screenName","viewTrainingDocumentFile","trainingfile","tabDetail","tabMap","Map","set","userRoleControlRights","controlMap","updateStore","masterData","undefined","skip","data","participantsColumnList","fetchParticipantsRecordByID","deleteRecord","getAvailableData","addtraineedoc","getTrainingParticipantsAttended","getTrainingParticipantsCompetent","getTrainingParticipantsCertified","onInputOnChange","TrainingDocument","settings","optional","target","type","name","checked","ncontrolcode","openChildModal","updateInfo","closeModal","loadEsign","typeName","selectedId","onDropTrainingDoc","attachedFiles","fieldName","actionType","onDropTrainieeDoc","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","screenData","validateEsignCredential","deleteAttachment","file","deleteParam","selected","toLowerCase","esignRights","nformcode","ncontrolCode","crudMaster","onSaveClick","saveType","formRef","defaultInput","isValidRequest","openModal","onSaveTrainingDoc","onSaveTrainieeDoc","onSaveAttended","onSaveCertified","onSaveCompetent","trainingupdate","postParam","inputListName","selectedObject","primaryKeyField","nusercode","map","participants","push","ntrainingcode","SelectedTrainingUpdate","nparticipantcode","item","ntransactionstatus","ATTENDED","ncertifiedstatus","NO","ncompetencystatus","ntechniquecode","selectedTechinque","YES","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","trainingdocArray","trainingdoc","ntrainingdoccode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","trim","sfiledesc","size","NA","append","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","sformname","smodulename","slanguagename","isFileupload","trainieedocArray","trainieedoc","selectedParticipants","ntraineedoccode","primaryKeyValue","TechniqueList","fetchUrl","fecthInputObject","id","onTabChange","tabProps","take","parseInt","isOpen","dataResult","activeTab","trainingDocument","trainingDocumentFieldList","trainingDocumentColumnList","validationParticipantsColumnList","mandatoryFields","LINK","mandatory","idsName","dataField","mandatoryLabel","controlType","masterStatus","intl","formatMessage","userLogged","linkMaster","onComboChange","usersStatus","SelectedTrainingParticipants","extractedColumnList","previousProps","errorCode","filter","sort","participantsList","get","Component"],"mappings":"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","sourcesContent":["import React, { version } from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../../components/slide-out-modal/SlideOutModal';\r\nimport { DEFAULT_RETURN } from '../../../actions/LoginTypes';\r\nimport { constructOptionList, onDropAttachFileList, deleteAttachmentDropZone, showEsign, create_UUID, Lims_JSON_stringify } from '../../../components/CommonScript';\r\nimport CustomTabs from '../../../components/custom-tabs/custom-tabs.component';\r\nimport { connect } from 'react-redux';\r\nimport TrainingParticipantsTab from './TrainingParticipantsTab';\r\nimport TrainingDocTab from './TrainingDocTab';\r\nimport AddTrainingDocFile from './AddTrainingDocFile';\r\nimport AddTraineeDocFile from './AddTraineeDocFile';\r\nimport Esign from '../../audittrail/Esign';\r\nimport { attachmentType, FORMULAFIELDTYPE, transactionStatus } from '../../../components/Enumeration';\r\nimport AddParticipantsStatus from '../trainingcertificate/AddParticipantsStatus';\r\nimport { addtraineedocfile, viewAttachment } from '../../../actions';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\nclass TrainingUpdateChildTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        const dataStateParticipants = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'Trainingdoc-tab',\r\n            dataState: dataState,\r\n            dataStateParticipants: dataStateParticipants, trainingDocument: [], participants: []\r\n        };\r\n        this.trainingDocumentFieldList = ['ntrainingdoccode', 'nparticipantcode', 'ntrainingcode', 'sfilename', 'ntechniquecode', 'sfullname',\r\n            'nstatus', 'ntransactionstatus'];\r\n        this.trainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        this.participantsColumnList = [{ \"idsName\": \"IDS_PARTICIPANTSNAME\", \"dataField\": \"sfullname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }];\r\n        // this.validationTrainingDocumentColumnList = [{ \"idsName\": \"IDS_TRAININGDOCUMENTNAME\", \"dataField\": \"sfilename\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        this.validationParticipantsColumnList = [{ \"idsName\": \"IDS_PARTICIPANTS\", \"dataField\": \"sfullname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n    }\r\n    TrainingDocumentDataStateChange = (event) => {\r\n        this.setState({\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n    ParticipantsDataStateChange = (event) => {\r\n        this.setState({\r\n            dataStateParticipants: event.dataState\r\n        });\r\n    }\r\n    handleChange = (value, valueParam, isSection) => {\r\n\r\n        if (value !== null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n\r\n            selectedRecord[valueParam] = value;\r\n\r\n            this.setState({ selectedRecord });\r\n\r\n\r\n        }\r\n    }\r\n\r\n    viewTraineeDocumentFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                traineefile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"trainingupdate\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedTraineeFile\",\r\n            screenName: \"IDS_TRAINEEDOCUMENT\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    viewTrainingDocumentFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                trainingfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"trainingupdate\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedTrainingFile\",\r\n            screenName: \"IDS_TRAININGDOCUMENT\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    render() {\r\n        // const mandatoryFields = [];\r\n        // this.validationTrainingDocumentColumnList.forEach(item => item.mandatory === true ?\r\n        //    mandatoryFields.push(item) : \"\"\r\n        //  );\r\n        let mandatoryFields = [];\r\n        if (this.props.screenName === \"IDS_TRAININGDOCUMENTS\" || this.props.screenName === \"IDS_TRAINEEDOCUMENTS\") {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandatoryFields.push(\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                );\r\n            } else {\r\n                mandatoryFields.push(\r\n                    { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }\r\n                );\r\n            }\r\n        }\r\n        else {\r\n            mandatoryFields.push(\r\n                {\r\n                    mandatory: true,\r\n                    idsName: \"IDS_PARTICIPANTNAME\",\r\n                    dataField: \"nusercode\",\r\n                    mandatoryLabel: \"IDS_SELECT\",\r\n                    controlType: \"selectbox\",\r\n                });\r\n        }\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.Login.openChildModal &&\r\n                    <SlideOutModal show={this.props.Login.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : this.props.screenName === \"IDS_TRAININGDOCUMENTS\" ?\r\n                                <AddTrainingDocFile\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onDrop={this.onDropTrainingDoc}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    deleteAttachment={this.deleteAttachment}\r\n                                    formatMessage={this.props.intl.formatMessage}\r\n                                    label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                    operation={this.props.Login.operation}\r\n                                    userLogged={this.props.Login.userLogged}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                    maxSize={20}\r\n                                    maxFiles={1}\r\n                                    linkMaster={this.props.Login.linkMaster}\r\n                                    onComboChange={this.props.onComboChange}\r\n                                />\r\n                                : this.props.screenName === \"IDS_TRAINEEDOCUMENTS\" ?\r\n                                    <AddTraineeDocFile\r\n                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                        onDrop={this.onDropTrainieeDoc}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        deleteAttachment={this.deleteAttachment}\r\n                                        formatMessage={this.props.intl.formatMessage}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                        operation={this.props.Login.operation}\r\n                                        userLogged={this.props.Login.userLogged}\r\n                                        inputParam={this.props.Login.inputParam}\r\n                                        selectedId={this.props.Login.selectedId}\r\n                                        linkMaster={this.props.Login.linkMaster}\r\n                                        onComboChange={this.props.onComboChange}\r\n                                    />\r\n                                    : <AddParticipantsStatus\r\n                                        selectedRecord={this.props.selectedRecord || {}}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        handleChange={this.handleChange}\r\n                                        formatMessage={this.props.formatMessage}\r\n                                        usersStatus={this.props.usersStatus || []}\r\n                                        nusercode={this.props.nusercode || []}\r\n                                        selectedTrainingParticipants={this.props.masterData.SelectedTrainingParticipants || {}}\r\n                                        extractedColumnList={this.extractedColumnList}\r\n                                    />\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n\r\n    tabDetail = () => {\r\n\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_PARTICIPANTS\", <TrainingParticipantsTab\r\n\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            screenName={\" TrainieeDocuments\"}\r\n            updateStore={this.props.updateStore}\r\n            primaryKeyField={\"nparticipantcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"Participants\"}\r\n            dataResult={process(this.props.Login.masterData[\"Participants\", \"TraineeDocuments\"] || [], this.state.dataStateParticipants)}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === \"Participants\") ? this.state.dataStateParticipants : { skip: 0 }}\r\n            dataStateChange={(event) => this.setState({ dataStateParticipants: event.data })}\r\n            columnList={this.participantsColumnList}\r\n            methodUrl={\"TrainingParticipants\"}\r\n            fetchParticipantsRecordByID={this.fetchParticipantsRecordByID}\r\n            deleteRecord={this.deleteRecord}\r\n            getAvailableData={this.props.getAvailableData}\r\n            addtraineedoc={this.addtraineedoc}\r\n            selectedRecord={this.state.selectedRecord || {}}\r\n            getTrainingParticipantsAttended={this.props.getTrainingParticipantsAttended}\r\n            getTrainingParticipantsCompetent={this.props.getTrainingParticipantsCompetent}\r\n            getTrainingParticipantsCertified={this.props.getTrainingParticipantsCertified}\r\n            viewTraineeDocumentFile={this.viewTraineeDocumentFile}\r\n\r\n        />)\r\n        tabMap.set(\"IDS_TRAININGDOCUMENTS\", <TrainingDocTab\r\n            screenName={\"TrainingDocuments\"}\r\n            onInputOnChange={this.onInputOnChange}\r\n            controlMap={this.props.controlMap}\r\n            updateStore={this.props.updateStore}\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            userInfo={this.props.userInfo}\r\n            inputParam={this.props.inputParam}\r\n            deleteRecord={this.deleteRecord}\r\n            TrainingDocument={this.props.masterData.TrainingDocument || []}\r\n            getAvailableData={this.props.getAvailableData}\r\n            settings={this.props.settings}\r\n            selectedRecord={this.state.selectedRecord || {}}\r\n            viewTrainingDocumentFile={this.viewTrainingDocumentFile}\r\n        />)\r\n\r\n        return tabMap;\r\n    }\r\n\r\n\r\n    onInputOnChange = (event, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n\r\n\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? optional[0] : optional[1];\r\n        } else if (event.target.type === 'radio') {\r\n            selectedRecord[event.target.name] = optional;\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n\r\n\r\n    }\r\n\r\n    addtraineedoc = (ncontrolcode) => {\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let operation = \"create\";\r\n        let screenName = this.props.Login.screenName;\r\n        screenName = \"IDS_TRAINEEDOCUMENTS\";\r\n        openChildModal = true;\r\n        const selectedRecord = this.props.selectedRecord;\r\n        const updateInfo = {\r\n            userInfo: this.props.Login.userInfo, operation, selectedRecord, ncontrolcode, screenName\r\n        };\r\n        this.props.addtraineedocfile(updateInfo);\r\n        // const updateInfo = {\r\n        //     typeName: DEFAULT_RETURN,\r\n        //     data: {\r\n        //         openModal: true,\r\n        //         operation: \"create\",\r\n        //         selectedRecord: {},\r\n        //         ncontrolcode: ncontrolcode,\r\n        //         screenName : \"IDS_TRAINEEDOCUMENTS\" \r\n\r\n        //     }\r\n        // }\r\n        // this.props.updateStore(updateInfo);\r\n    }\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\" ||\r\n                //this.props.Login.operation === \"certify\" ||\r\n                //this.props.Login.operation === \"attend\" ||\r\n                //this.props.Login.operation === \"competent\" ||\r\n                this.props.Login.operation === \"complete\") {\r\n                loadEsign = false;\r\n                // if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"complete\") {\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n                //}                 \r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\";\r\n                selectedRecord['esigncomments'] = \"\";\r\n                selectedRecord['esignreason'] = \"\";\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n    onDropTrainingDoc = (attachedFiles, fieldName) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n    onDropTrainieeDoc = (attachedFiles, fieldName) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\"\r\n        });\r\n    }\r\n\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const methodUrl = deleteParam.methodUrl;\r\n        const selected = deleteParam.selectedRecord;\r\n        let dataState = undefined;\r\n        const inputParam =\r\n        {\r\n            inputData: {\r\n\r\n                [methodUrl.toLowerCase()]: selected,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"trainingupdate\",\r\n            operation: deleteParam.operation,\r\n            methodUrl: methodUrl,\r\n            dataState\r\n        }\r\n\r\n        const masterData = this.props.masterData;\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, operation: deleteParam.operation, selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let inputParam = {};\r\n        let defaultInput = {};\r\n        let isValidRequest = true;\r\n        let openModal = \"openChildModal\";\r\n        if (this.props.screenName === \"IDS_TRAININGDOCUMENTS\") {\r\n            inputParam = this.onSaveTrainingDoc(saveType, formRef);\r\n\r\n        }\r\n        if (this.props.screenName === \"IDS_TRAINEEDOCUMENTS\") {\r\n            inputParam = this.onSaveTrainieeDoc(saveType, formRef);\r\n\r\n        }\r\n        if (this.props.screenName === \"IDS_ATTENDPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveAttended(saveType, formRef);\r\n        }\r\n        if (this.props.screenName === \"IDS_CERTIFYPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveCertified(saveType, formRef);\r\n        }\r\n        if (this.props.screenName === \"IDS_COMPETENTPARTICIPANTSDETAILS\") {\r\n            inputParam = this.onSaveCompetent(saveType, formRef);\r\n        }\r\n        if (isValidRequest) {\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, openModal, defaultInput);\r\n            }\r\n        }\r\n    }\r\n    onSaveAttended = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n            trainingupdate.push({\r\n                ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                // nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                nparticipantcode: participants.item.nparticipantcode,\r\n                ntransactionstatus: transactionStatus.ATTENDED,\r\n                ncertifiedstatus: transactionStatus.NO,\r\n                ncompetencystatus: transactionStatus.NO,\r\n                nusercode: participants.item.nusercode,\r\n                ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n            })\r\n\r\n        })\r\n        inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n        const inputParam = {\r\n            classUrl: 'trainingupdate',\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData,\r\n            operation: \"attend\", saveType, formRef, dataState,\r\n            postParam\r\n        }\r\n        return inputParam;\r\n\r\n    }\r\n    onSaveCertified = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n            trainingupdate.push({\r\n                ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                // nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                nparticipantcode: participants.item.nparticipantcode,\r\n                ntransactionstatus: transactionStatus.ATTENDED,\r\n                ncertifiedstatus: transactionStatus.YES,\r\n                ncompetencystatus: transactionStatus.NO,\r\n                nusercode: participants.item.nusercode,\r\n                ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n\r\n            })\r\n\r\n        })\r\n        inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n        const inputParam = {\r\n            classUrl: 'trainingupdate',\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData,\r\n            operation: \"certify\", saveType, formRef, dataState, postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n    onSaveCompetent = (saveType, formRef) => {\r\n        let inputData = [];\r\n        let trainingupdate = [];\r\n        let dataState = undefined;\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        this.props.selectedRecord.nusercode && this.props.selectedRecord.nusercode.map(participants => {\r\n            trainingupdate.push({\r\n                ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n                // nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n                nparticipantcode: participants.item.nparticipantcode,\r\n                ntransactionstatus: transactionStatus.ATTENDED,\r\n                ncertifiedstatus: transactionStatus.YES,\r\n                ncompetencystatus: transactionStatus.YES,\r\n                nusercode: participants.item.nusercode,\r\n                ntechniquecode: this.props.masterData.selectedTechinque.ntechniquecode\r\n\r\n            })\r\n\r\n        })\r\n        inputData[\"trainingupdate\"] = trainingupdate\r\n\r\n        const inputParam = {\r\n            classUrl: 'trainingupdate',\r\n            methodUrl: \"TrainingParticipants\",\r\n            inputData: inputData,\r\n            operation: \"competent\", saveType, formRef, dataState, postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n    onSaveTrainingDoc = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let trainingdocArray = [];\r\n        let trainingdoc = {\r\n            ntrainingcode: this.props.masterData.SelectedTrainingUpdate.ntrainingcode,\r\n            ntrainingdoccode: selectedRecord.ntrainingdoccode ? selectedRecord.ntrainingdoccode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n\r\n        };\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, trainingdoc);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntrainingdoccode && selectedRecord.ntrainingdoccode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" && selectedRecord.ssystemfilename !== undefined ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = Lims_JSON_stringify(file.name.trim(), false);\r\n                    tempData[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"nattachmenttypecode\"] = 1;\r\n                    // tempData[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    trainingdocArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                trainingdoc[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false);\r\n                trainingdoc[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                trainingdoc[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                trainingdoc[\"nlinkcode\"] = transactionStatus.NA;\r\n                trainingdoc[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                //trainingdoc[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                trainingdoc[\"nattachmenttypecode\"] = 1;\r\n                trainingdocArray.push(trainingdoc);\r\n            }\r\n        } else {\r\n            trainingdoc[\"ssystemfilename\"] = \"\";\r\n            trainingdoc[\"nattachmenttypecode\"] = 2;\r\n            trainingdoc[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename, false);\r\n            trainingdoc[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\r\n            trainingdoc[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            trainingdoc[\"nfilesize\"] = 0;\r\n            trainingdocArray.push(trainingdoc);\r\n        }\r\n\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"trainingdoc\", JSON.stringify(trainingdocArray));\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sformname: Lims_JSON_stringify(this.props.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(this.props.userInfo.smodulename),\r\n\r\n\t\t\t\t\t//ALPD-1708(while saving the file,audit trail is not captured respective language..)\r\n                    slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\r\n\r\n                }\r\n            },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"trainingupdate\",\r\n            saveType, formRef, methodUrl: \"TrainingDoc\",\r\n            postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveTrainieeDoc = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let trainieedocArray = [];\r\n        let postParam = { inputListName: \"TechniqueList\", selectedObject: \"SelectedTrainingUpdate\", primaryKeyField: \"ntrainingcode\" };\r\n        let trainieedoc = {\r\n            nparticipantcode: this.props.masterData.selectedParticipants.nparticipantcode,\r\n            ntraineedoccode: selectedRecord.ntraineedoccode ? selectedRecord.ntraineedoccode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            ntrainingcode: this.props.masterData.selectedParticipants.ntrainingcode\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, trainieedoc);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntraineedoccode && selectedRecord.ntraineedoccode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" && selectedRecord.ssystemfilename !== undefined ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = Lims_JSON_stringify(file.name, false);\r\n                    tempData[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"nattachmenttypecode\"] = 1;\r\n                    // tempData[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    trainieedocArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                trainieedoc[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false);\r\n                trainieedoc[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.sfiledesc ? selectedRecord.sfiledesc.trim() : \"\", false);\r\n                trainieedoc[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                trainieedoc[\"nlinkcode\"] = transactionStatus.NA;\r\n                trainieedoc[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                //  trainieedoc[\"dcreateddate\"] = this.props.Login.userInfo;\r\n                trainieedoc[\"nattachmenttypecode\"] = 1;\r\n                trainieedocArray.push(trainieedoc);\r\n            }\r\n        } else {\r\n            trainieedoc[\"ssystemfilename\"] = \"\";\r\n            trainieedoc[\"nattachmenttypecode\"] = 2;\r\n            trainieedoc[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename, false);\r\n            trainieedoc[\"sfiledesc\"] = Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\", false);\r\n            trainieedoc[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            trainieedoc[\"nfilesize\"] = 0;\r\n            trainieedocArray.push(trainieedoc);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"trainieedoc\", JSON.stringify(trainieedocArray));\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sformname: Lims_JSON_stringify(this.props.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(this.props.userInfo.smodulename),\r\n\t\t\t\t\t//ALPD-1708(while saving the file,audit trail is not captured respective language..)\r\n                    slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\r\n                }\r\n            },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"trainingupdate\",\r\n            saveType, formRef, methodUrl: \"TrainieeDoc\",\r\n            postParam\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    // fetchParticipantsRecordByID = (operation,version,ncontrolCode) => {\r\n\r\n    //     let inputData = [];\r\n    //     inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n    //     inputData[\"trainingparticipants\"] = {\r\n    //         \"nusercode\": version.nusercode,\r\n    //         \"nparticipantcode\": version.nparticipantcode,\r\n    //         \"ntrainingcode\": version.ntrainingcode,\r\n    //         \"ncertifiedstatus\" : version.ncertifiedstatus,\r\n    //         \"ncompetencystatus\" : version.ncompetencystatus,\r\n    //         \"ntransactionstatus\" : version.ntransactionstatus\r\n\r\n    //     }\r\n    //     const postParam = {\r\n    //         inputListName: \"TechniqueList\", \r\n    //         selectedObject: \"SelectedTrainingUpdate\",\r\n    //         primaryKeyField: \"ntrainingcode\",\r\n    //         primaryKeyValue: this.props.Login.masterData.TechniqueList.ntrainingcode,\r\n    //         fetchUrl: \"trainingupdate/getTraningUpdateByTechnique\",\r\n    //         fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n    //     }\r\n    //     const inputParam = {\r\n    //         methodUrl: \"TrainingParticipants\",\r\n    //         classUrl: this.props.Login.inputParam.classUrl,\r\n    //         inputData: inputData, postParam,\r\n    //         operation\r\n    //     }\r\n    //     const masterData = this.props.Login.masterData;\r\n\r\n    //     if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n    //         const updateInfo = {\r\n    //             typeName: DEFAULT_RETURN,\r\n    //             data: {\r\n    //                 loadEsign: true, \r\n    //                 screenData: { inputParam, masterData }, \r\n    //                 openModal: true, \r\n    //                 operation, \r\n    //                 screenName: '', \r\n    //                 id: 'ParticipantsStatus'\r\n    //             }\r\n    //         }\r\n    //         this.props.updateStore(updateInfo);\r\n    //     }\r\n    //     else {\r\n    //         this.props.crudMaster(inputParam, masterData, \"openModal\");\r\n    //     }\r\n    // }\r\n\r\n    fetchParticipantsRecordByID = (operation, version, ncontrolCode) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"trainingparticipants\"] = {\r\n            \"nusercode\": version.nusercode,\r\n            \"nparticipantcode\": version.nparticipantcode,\r\n            \"ntrainingcode\": version.ntrainingcode,\r\n            \"ncertifiedstatus\": version.ncertifiedstatus,\r\n            \"ncompetencystatus\": version.ncompetencystatus,\r\n            \"ntransactionstatus\": version.ntransactionstatus\r\n\r\n        }\r\n        const postParam = {\r\n            inputListName: \"TechniqueList\",\r\n            selectedObject: \"SelectedTrainingUpdate\",\r\n            primaryKeyField: \"ntrainingcode\",\r\n            primaryKeyValue: this.props.Login.masterData.TechniqueList.ntrainingcode,\r\n            fetchUrl: \"trainingupdate/getTraningUpdateByTechnique\",\r\n            fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n        }\r\n        const inputParam = {\r\n            methodUrl: \"TrainingParticipants\",\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            inputData: inputData, postParam,\r\n            operation\r\n        }\r\n        const masterData = this.props.Login.masterData;\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true,\r\n                    screenData: { inputParam, masterData },\r\n                    openChildModal: true,\r\n                    operation,\r\n                    screenName: '',\r\n                    id: 'ParticipantsStatus'\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n        }\r\n    }\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            let { dataState, dataStateParticipants } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5, filter: undefined, sort: undefined }\r\n                dataStateParticipants = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5, filter: undefined, sort: undefined }\r\n            }\r\n            this.setState({ isOpen, activeTab: 'Trainingdocument-tab', dataState, dataStateParticipants });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n        let { dataState, dataStateParticipants } = this.state;\r\n        if (this.props.dataState !== previousProps.dataState && this.props.dataState !== dataState) {\r\n            dataState = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            dataStateParticipants = { skip: 0, take: this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            this.setState({ dataState, dataStateParticipants });\r\n        }\r\n\r\n\r\n        if (this.props.trainingDocument !== previousProps.trainingDocument || this.props.participants !== previousProps.participants) {\r\n\r\n\r\n            const participants = constructOptionList(this.props.participants || [], \"nparticipantcode\",\r\n                \"sfullname\", undefined, undefined, undefined);\r\n            const participantsList = participants.get(\"OptionList\");\r\n\r\n            this.setState({\r\n                participants: participantsList\r\n            });\r\n        }\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, { addtraineedocfile, viewAttachment })(injectIntl(TrainingUpdateChildTab));\r\n\r\n"]},"metadata":{},"sourceType":"module"}