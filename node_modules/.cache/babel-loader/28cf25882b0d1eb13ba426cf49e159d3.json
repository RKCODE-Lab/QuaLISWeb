{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{sortData}from'../components/CommonScript';import{DEFAULT_RETURN}from'./LoginTypes';import{initRequest}from'./LoginAction';import{intl}from'../components/App';export function getEmailConfigDetail(emailconfig,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"emailconfig/getEmailConfig\",{nemailconfigcode:emailconfig.nemailconfigcode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function openEmailConfigModal(screenName,operation,userinfo,ncontrolcode){return function(dispatch){if(operation===\"create\"||operation===\"update\"){var emailConfig=rsapi.post(\"/emailconfig/getEmailConfigDetails\",{\"userinfo\":userinfo});var urlArray=[];var AvailableUsers=[];if(operation===\"create\"){urlArray=[emailConfig];}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};selectedRecord[\"nemailconfigcode\"]=0;AvailableUsers=response[0].data.Users;dispatch({type:DEFAULT_RETURN,payload:{EmailHost:response[0].data.EmailHost||[],EmailTemplate:response[0].data.EmailTemplate||[],EmailScreen:response[0].data.EmailScreen||[],//ActionType: response[0].data.ActionType|| [],\nusers:response[0].data.users||[],FormName:response[0].data.FormName||[],FormControls:response[0].data.FormControls||[],AvailableUsers:AvailableUsers,// dataSource:response[0].data.dataSource||[],\noperation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolcode:ncontrolcode,loading:false}});}).catch(function(error){dispatch(initRequest(false));if(error.response.status===500){toast.error(error.message);}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}};}export function fetchEmailConfigById(editParam){return function(dispatch){var _rsapi$post;var URL1=rsapi.post('emailconfig/getActiveEmailConfigById',(_rsapi$post={},_defineProperty(_rsapi$post,editParam.primaryKeyField,editParam.SelectedEmailConfig.nemailconfigcode),_defineProperty(_rsapi$post,\"userinfo\",editParam.userInfo),_rsapi$post));dispatch(initRequest(true));Axios.all([URL1]).then(function(response){var selectedRecord={};var selectedId=editParam.primaryKeyValue;selectedRecord=response[0].data.EmailConfig;selectedRecord['nemailtemplatecode']={value:response[0].data.EmailConfig.nemailtemplatecode,label:response[0].data.EmailConfig.stemplatename};selectedRecord['nemailscreencode']={value:response[0].data.EmailConfig.nemailscreencode,label:response[0].data.EmailConfig.sscreenname,item:{nemailscreencode:response[0].data.EmailConfig.nemailscreencode,sscreenname:response[0].data.EmailConfig.sscreenname,nformcode:response[0].data.EmailConfig.nformcode,sformname:response[0].data.EmailConfig.sformname}};//selectedRecord['nactiontype']={value:response[0].data.EmailConfig.nactiontype,label:response[0].data.EmailConfig.stransdisplaystatus}\nselectedRecord['nemailhostcode']={value:response[0].data.EmailConfig.nemailhostcode,label:response[0].data.EmailConfig.shostname};// selectedRecord['nuserrolecode']={value:response[0].data.EmailConfig.nuserrole,label:response[0].data.EmailConfig.suserrolename}\nselectedRecord['nenableemail']=response[0].data.EmailConfig.nenableemail;selectedRecord['nformcode']={value:response[0].data.EmailConfig.nformcode,label:response[0].data.EmailConfig.sformname};selectedRecord['ncontrolcode']={value:response[0].data.EmailConfig.ncontrolcode,label:response[0].data.EmailConfig.scontrolids};if(response[0].data.EmailConfig.nemailuserquerycode!==-1){selectedRecord['nemailuserquerycode']={value:response[0].data.EmailConfig.nemailuserquerycode,label:response[0].data.EmailConfig.sdisplayname};}dispatch({type:DEFAULT_RETURN,payload:{EmailHost:response[0].data.EmailHost||[],EmailTemplate:response[0].data.EmailTemplate||[],EmailScreen:response[0].data.EmailScreen||[],ActionType:response[0].data.ActionType||[],FormName:response[0].data.FormName||[],FormControls:response[0].data.FormControls||[],EmailUserQuery:response[0].data.EmailUserQuery||[],selectedRecord:selectedRecord,operation:editParam.operation,openModal:true,screenName:editParam.screenName,ncontrolcode:editParam.ncontrolCode,loading:false,selectedId:selectedId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getUserEmailConfig(screenName,operation,primaryKey,SelectedEmailConfig,masterData,userinfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"emailconfig/getUserEmailConfig\",{nemailconfigcode:SelectedEmailConfig.nemailconfigcode,userinfo:userinfo}).then(function(response){var selectedRecord={};dispatch({type:DEFAULT_RETURN,payload:{users:response.data.users||[],// dataSource:response[0].data.dataSource||[],\noperation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolcode:ncontrolcode,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getFormControls(selectedRecord,userInfo){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"emailconfig/getEmailConfigControl\",{nformcode:selectedRecord.nemailscreencode.item.nformcode,userinfo:userInfo}).then(function(response){selectedRecord['ncontrolcode']=undefined;selectedRecord['nemailuserquerycode']=undefined;dispatch({type:DEFAULT_RETURN,payload:{FormControls:response.data.FormControls||[],EmailUserQuery:response.data.EmailUserQuery||[],// dataSource:response[0].data.dataSource||[],\n//operation,\n//screenName,\nselectedRecord:selectedRecord,//openModal: true,\n//ncontrolcode, \nloading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/EmailConfigAction.js"],"names":["rsapi","Axios","toast","sortData","DEFAULT_RETURN","initRequest","intl","getEmailConfigDetail","emailconfig","userInfo","masterData","dispatch","post","nemailconfigcode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","openEmailConfigModal","screenName","ncontrolcode","emailConfig","urlArray","AvailableUsers","all","selectedRecord","Users","EmailHost","EmailTemplate","EmailScreen","users","FormName","FormControls","openModal","formatMessage","id","fetchEmailConfigById","editParam","URL1","primaryKeyField","SelectedEmailConfig","selectedId","primaryKeyValue","EmailConfig","value","nemailtemplatecode","label","stemplatename","nemailscreencode","sscreenname","item","nformcode","sformname","nemailhostcode","shostname","nenableemail","scontrolids","nemailuserquerycode","sdisplayname","ActionType","EmailUserQuery","ncontrolCode","getUserEmailConfig","primaryKey","getFormControls"],"mappings":"qXAAA,MAAOA,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACIC,KADJ,KAEO,gBAFP,CAGA,OACKC,QADL,KAEO,4BAFP,CAGA,OACIC,cADJ,KAEO,cAFP,CAGA,OAASC,WAAT,KAA4B,eAA5B,CACA,OAASC,IAAT,KAAqB,mBAArB,CAGA,MAAO,SAASC,CAAAA,oBAAT,CAA+BC,WAA/B,CAA4CC,QAA5C,CAAsDC,UAAtD,CAAkE,CACrE,MAAO,UAAUC,QAAV,CAAoB,CAC3BA,QAAQ,CAACN,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOL,CAAAA,KAAK,CAACY,IAAN,CAAW,4BAAX,CAAyC,CAACC,gBAAgB,CAACL,WAAW,CAACK,gBAA9B,CAAgDC,QAAQ,CAACL,QAAzD,CAAzC,EACPM,IADO,CACF,SAAAC,QAAQ,CAAE,CACXN,UAAU,gCAAOA,UAAP,EAAsBM,QAAQ,CAACC,IAA/B,CAAV,CACAd,QAAQ,CAACO,UAAD,CAAR,CACAC,QAAQ,CAAC,CAACO,IAAI,CAAEd,cAAP,CAAuBe,OAAO,CAAC,CAACT,UAAU,CAAVA,UAAD,CAAaU,SAAS,CAAC,IAAvB,CAA6BC,SAAS,CAACC,SAAvC,CACnCC,OAAO,CAAC,KAD2B,CAA/B,CAAD,CAAR,CAEJ,CANO,EAOPC,KAPO,CAOD,SAAAC,KAAK,CAAE,CACTd,QAAQ,CAAC,CAACO,IAAI,CAAEd,cAAP,CAAuBe,OAAO,CAAE,CAACI,OAAO,CAAC,KAAT,CAAhC,CAAD,CAAR,CACD,GAAIE,KAAK,CAACT,QAAN,CAAeU,MAAf,GAA0B,GAA9B,CAAkC,CAC9BxB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAGI,CACAzB,KAAK,CAAC0B,IAAN,CAAWH,KAAK,CAACT,QAAN,CAAeC,IAA1B,EACH,CAEJ,CAhBO,CAAP,CAiBH,CAnBG,CAmBF,CAGF,MAAO,SAASY,CAAAA,oBAAT,CAA8BC,UAA9B,CAA0CV,SAA1C,CAAoDN,QAApD,CAA8DiB,YAA9D,CAA4E,CAC/E,MAAO,UAAUpB,QAAV,CAAoB,CACvB,GAAIS,SAAS,GAAK,QAAd,EAA0BA,SAAS,GAAK,QAA5C,CAAsD,CAClD,GAAMY,CAAAA,WAAW,CAAGhC,KAAK,CAACY,IAAN,CAAW,oCAAX,CAAiD,CACjE,WAAYE,QADqD,CAAjD,CAApB,CAGA,GAAImB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,cAAc,CAAG,EAArB,CACA,GAAId,SAAS,GAAK,QAAlB,CAA4B,CAExBa,QAAQ,CAAG,CAACD,WAAD,CAAX,CACH,CACDrB,QAAQ,CAACN,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAJ,KAAK,CAACkC,GAAN,CAAUF,QAAV,EACKlB,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIoB,CAAAA,cAAc,CAAG,EAArB,CACAA,cAAc,CAAC,kBAAD,CAAd,CAAqC,CAArC,CACAF,cAAc,CAAGlB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBoB,KAAlC,CAEA1B,QAAQ,CAAC,CACLO,IAAI,CAAEd,cADD,CAELe,OAAO,CAAE,CACLmB,SAAS,CAAEtB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqB,SAAjB,EAA8B,EADpC,CAELC,aAAa,CAAEvB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBsB,aAAjB,EAAiC,EAF3C,CAGLC,WAAW,CAAExB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBuB,WAAjB,EAA+B,EAHvC,CAIL;AACAC,KAAK,CAAEzB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBwB,KAAjB,EAAyB,EAL3B,CAMLC,QAAQ,CAAC1B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiByB,QAAjB,EAA4B,EANhC,CAOLC,YAAY,CAAC3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB0B,YAAjB,EAAgC,EAPxC,CAQLT,cAAc,CAAdA,cARK,CASN;AACCd,SAAS,CAATA,SAVK,CAWLU,UAAU,CAAVA,UAXK,CAYLM,cAAc,CAAdA,cAZK,CAaLQ,SAAS,CAAE,IAbN,CAcLb,YAAY,CAAZA,YAdK,CAcSR,OAAO,CAAE,KAdlB,CAFJ,CAAD,CAAR,CAmBH,CAzBL,EA0BKC,KA1BL,CA0BW,SAAAC,KAAK,CAAI,CACZd,QAAQ,CAACN,WAAW,CAAC,KAAD,CAAZ,CAAR,CACA,GAAIoB,KAAK,CAACT,QAAN,CAAeU,MAAf,GAA0B,GAA9B,CAAmC,CAC/BxB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAEO,CACHzB,KAAK,CAAC0B,IAAN,CAAWtB,IAAI,CAACuC,aAAL,CAAmB,CAC1BC,EAAE,CAAErB,KAAK,CAACT,QAAN,CAAeC,IADO,CAAnB,CAAX,EAGH,CACJ,CAnCL,EAoCH,CACJ,CAjDD,CAkDH,CAED,MAAO,SAAS8B,CAAAA,oBAAT,CAA8BC,SAA9B,CAAyC,CAC5C,MAAO,UAAUrC,QAAV,CAAoB,iBACvB,GAAMsC,CAAAA,IAAI,CAAGjD,KAAK,CAACY,IAAN,CAAW,sCAAX,6CAAsDoC,SAAS,CAACE,eAAhE,CAAkFF,SAAS,CAACG,mBAAV,CAA8BtC,gBAAhH,8BACT,UADS,CACGmC,SAAS,CAACvC,QADb,eAAb,CAEAE,QAAQ,CAACN,WAAW,CAAC,IAAD,CAAZ,CAAR,CACAJ,KAAK,CAACkC,GAAN,CAAU,CAACc,IAAD,CAAV,EACKlC,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,GAAIoB,CAAAA,cAAc,CAAG,EAArB,CACA,GAAIgB,CAAAA,UAAU,CAAGJ,SAAS,CAACK,eAA3B,CACAjB,cAAc,CAAGpB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAlC,CACAlB,cAAc,CAAC,oBAAD,CAAd,CAAqC,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BE,kBAApC,CACAC,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BI,aADnC,CAArC,CAEAtB,cAAc,CAAC,kBAAD,CAAd,CAAmC,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BK,gBAApC,CACCF,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BM,WADpC,CAECC,IAAI,CAAC,CAACF,gBAAgB,CAAC3C,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BK,gBAA/C,CACCC,WAAW,CAAC5C,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BM,WAD1C,CAECE,SAAS,CAAC9C,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BQ,SAFxC,CAGCC,SAAS,CAAC/C,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BS,SAHxC,CAFN,CAAnC,CAOA;AACA3B,cAAc,CAAC,gBAAD,CAAd,CAAiC,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BU,cAApC,CAAmDP,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BW,SAAtF,CAAjC,CACD;AACC7B,cAAc,CAAC,cAAD,CAAd,CAA+BpB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BY,YAA5D,CACA9B,cAAc,CAAC,WAAD,CAAd,CAA4B,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BQ,SAApC,CAA8CL,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BS,SAAjF,CAA5B,CACA3B,cAAc,CAAC,cAAD,CAAd,CAA+B,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6BvB,YAApC,CAAiD0B,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6Ba,WAApF,CAA/B,CACA,GAAInD,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6Bc,mBAA7B,GAAqD,CAAC,CAA1D,CAA4D,CACxDhC,cAAc,CAAC,qBAAD,CAAd,CAAsC,CAACmB,KAAK,CAACvC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6Bc,mBAApC,CAAwDX,KAAK,CAACzC,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqC,WAAjB,CAA6Be,YAA3F,CAAtC,CACH,CAED1D,QAAQ,CAAC,CACLO,IAAI,CAAEd,cADD,CACiBe,OAAO,CAAE,CAC3BmB,SAAS,CAAEtB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqB,SAAjB,EAA8B,EADd,CAE3BC,aAAa,CAAEvB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBsB,aAAjB,EAAiC,EAFrB,CAG3BC,WAAW,CAAExB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBuB,WAAjB,EAA+B,EAHjB,CAI3B8B,UAAU,CAAEtD,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBqD,UAAjB,EAA8B,EAJf,CAK3B5B,QAAQ,CAAC1B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiByB,QAAjB,EAA4B,EALV,CAM3BC,YAAY,CAAC3B,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB0B,YAAjB,EAAgC,EANlB,CAO3B4B,cAAc,CAACvD,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBsD,cAAjB,EAAkC,EAPtB,CAQ3BnC,cAAc,CAAdA,cAR2B,CAS3BhB,SAAS,CAAE4B,SAAS,CAAC5B,SATM,CAU3BwB,SAAS,CAAE,IAVgB,CAW3Bd,UAAU,CAAEkB,SAAS,CAAClB,UAXK,CAY3BC,YAAY,CAAEiB,SAAS,CAACwB,YAZG,CAa3BjD,OAAO,CAAE,KAbkB,CAaX6B,UAAU,CAAVA,UAbW,CAD1B,CAAD,CAAR,CAkBH,CA1CL,EA2CK5B,KA3CL,CA2CW,SAAAC,KAAK,CAAI,CACZd,QAAQ,CAAC,CAAEO,IAAI,CAAEd,cAAR,CAAwBe,OAAO,CAAE,CAAEI,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACT,QAAN,CAAeU,MAAf,GAA0B,GAA9B,CAAmC,CAC/BxB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAGK,CACDzB,KAAK,CAAC0B,IAAN,CAAWH,KAAK,CAACT,QAAN,CAAeC,IAA1B,EACH,CACJ,CAnDL,EAoDH,CAxDD,CAyDH,CAGD,MAAO,SAASwD,CAAAA,kBAAT,CAA6B3C,UAA7B,CAAyCV,SAAzC,CAAoDsD,UAApD,CAAgEvB,mBAAhE,CAAoFzC,UAApF,CAAgGI,QAAhG,CAA0GiB,YAA1G,CAAwH,CAC3H,MAAO,UAAUpB,QAAV,CAAoB,CAC3BA,QAAQ,CAACN,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOL,CAAAA,KAAK,CAACY,IAAN,CAAW,gCAAX,CACyB,CAACC,gBAAgB,CAACsC,mBAAmB,CAACtC,gBAAtC,CACAC,QAAQ,CAACA,QADT,CADzB,EAGNC,IAHM,CAGD,SAAAC,QAAQ,CAAE,CACZ,GAAIoB,CAAAA,cAAc,CAAG,EAArB,CACYzB,QAAQ,CAAC,CACLO,IAAI,CAAEd,cADD,CAELe,OAAO,CAAE,CACLsB,KAAK,CAAEzB,QAAQ,CAACC,IAAT,CAAcwB,KAAd,EAAsB,EADxB,CAEN;AACCrB,SAAS,CAATA,SAHK,CAILU,UAAU,CAAVA,UAJK,CAKLM,cAAc,CAAdA,cALK,CAMLQ,SAAS,CAAE,IANN,CAOLb,YAAY,CAAZA,YAPK,CAOSR,OAAO,CAAE,KAPlB,CAFJ,CAAD,CAAR,CAWX,CAhBE,EAiBFC,KAjBE,CAiBI,SAAAC,KAAK,CAAE,CACVd,QAAQ,CAAC,CAACO,IAAI,CAAEd,cAAP,CAAuBe,OAAO,CAAE,CAACI,OAAO,CAAC,KAAT,CAAhC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACT,QAAN,CAAeU,MAAf,GAA0B,GAA9B,CAAkC,CAC9BxB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAGI,CACAzB,KAAK,CAAC0B,IAAN,CAAWH,KAAK,CAACT,QAAN,CAAeC,IAA1B,EACH,CACJ,CAzBE,CAAP,CA0BC,CA5BD,CA6BH,CACD,MAAO,SAAS0D,CAAAA,eAAT,CAA0BvC,cAA1B,CAAyC3B,QAAzC,CAAmD,CACtD,MAAO,UAAUE,QAAV,CAAoB,CAC3BA,QAAQ,CAACN,WAAW,CAAC,IAAD,CAAZ,CAAR,CACA,MAAOL,CAAAA,KAAK,CAACY,IAAN,CAAW,mCAAX,CACP,CAACkD,SAAS,CAAC1B,cAAc,CAACuB,gBAAf,CAAgCE,IAAhC,CAAqCC,SAAhD,CAA0DhD,QAAQ,CAACL,QAAnE,CADO,EAENM,IAFM,CAED,SAAAC,QAAQ,CAAE,CACZoB,cAAc,CAAC,cAAD,CAAd,CAAiCd,SAAjC,CACAc,cAAc,CAAC,qBAAD,CAAd,CAAwCd,SAAxC,CACAX,QAAQ,CAAC,CACGO,IAAI,CAAEd,cADT,CAEGe,OAAO,CAAE,CACLwB,YAAY,CAAE3B,QAAQ,CAACC,IAAT,CAAc0B,YAAd,EAA6B,EADtC,CAEL4B,cAAc,CAAEvD,QAAQ,CAACC,IAAT,CAAcsD,cAAd,EAA+B,EAF1C,CAGL;AACA;AACA;AACAnC,cAAc,CAAdA,cANK,CAOL;AACA;AACAb,OAAO,CAAE,KATJ,CAFZ,CAAD,CAAR,CAaC,CAlBE,EAmBFC,KAnBE,CAmBI,SAAAC,KAAK,CAAE,CACVd,QAAQ,CAAC,CAACO,IAAI,CAAEd,cAAP,CAAuBe,OAAO,CAAE,CAACI,OAAO,CAAC,KAAT,CAAhC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACT,QAAN,CAAeU,MAAf,GAA0B,GAA9B,CAAkC,CAC9BxB,KAAK,CAACuB,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAGI,CACAzB,KAAK,CAAC0B,IAAN,CAAWH,KAAK,CAACT,QAAN,CAAeC,IAA1B,EACH,CACJ,CA3BE,CAAP,CA4BC,CA9BD,CA+BH","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n     sortData\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\n\r\n\r\nexport function getEmailConfigDetail (emailconfig, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"emailconfig/getEmailConfig\", {nemailconfigcode:emailconfig.nemailconfigcode, userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}}\r\n\r\n\r\nexport function openEmailConfigModal(screenName, operation,userinfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        if (operation === \"create\" || operation === \"update\") {\r\n            const emailConfig = rsapi.post(\"/emailconfig/getEmailConfigDetails\", {\r\n                \"userinfo\": userinfo\r\n            });\r\n            let urlArray = [];\r\n            let AvailableUsers = [];\r\n            if (operation === \"create\") {\r\n\r\n                urlArray = [emailConfig];\r\n            }\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = {};\r\n                    selectedRecord[\"nemailconfigcode\"] = 0;\r\n                    AvailableUsers = response[0].data.Users;\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            EmailHost: response[0].data.EmailHost || [],\r\n                            EmailTemplate: response[0].data.EmailTemplate|| [],\r\n                            EmailScreen: response[0].data.EmailScreen|| [],\r\n                            //ActionType: response[0].data.ActionType|| [],\r\n                            users: response[0].data.users|| [],\r\n                            FormName:response[0].data.FormName|| [],\r\n                            FormControls:response[0].data.FormControls|| [],\r\n                            AvailableUsers,\r\n                           // dataSource:response[0].data.dataSource||[],\r\n                            operation,\r\n                            screenName,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolcode, loading: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch(initRequest(false));\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(intl.formatMessage({\r\n                            id: error.response.data\r\n                        }));\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport function fetchEmailConfigById(editParam) {\r\n    return function (dispatch) {\r\n        const URL1 = rsapi.post('emailconfig/getActiveEmailConfigById', { [editParam.primaryKeyField]: editParam.SelectedEmailConfig.nemailconfigcode, \r\n            \"userinfo\": editParam.userInfo })\r\n        dispatch(initRequest(true));\r\n        Axios.all([URL1])\r\n            .then(response => {\r\n                let selectedRecord = {}\r\n                let selectedId = editParam.primaryKeyValue;\r\n                selectedRecord = response[0].data.EmailConfig\r\n                selectedRecord['nemailtemplatecode']={value:response[0].data.EmailConfig.nemailtemplatecode,\r\n                                                     label:response[0].data.EmailConfig.stemplatename}\r\n                selectedRecord['nemailscreencode']={value:response[0].data.EmailConfig.nemailscreencode,\r\n                                                    label:response[0].data.EmailConfig.sscreenname, \r\n                                                    item:{nemailscreencode:response[0].data.EmailConfig.nemailscreencode,\r\n                                                          sscreenname:response[0].data.EmailConfig.sscreenname,\r\n                                                          nformcode:response[0].data.EmailConfig.nformcode,\r\n                                                          sformname:response[0].data.EmailConfig.sformname}\r\n                                                }\r\n                //selectedRecord['nactiontype']={value:response[0].data.EmailConfig.nactiontype,label:response[0].data.EmailConfig.stransdisplaystatus}\r\n                selectedRecord['nemailhostcode']={value:response[0].data.EmailConfig.nemailhostcode,label:response[0].data.EmailConfig.shostname}\r\n               // selectedRecord['nuserrolecode']={value:response[0].data.EmailConfig.nuserrole,label:response[0].data.EmailConfig.suserrolename}\r\n                selectedRecord['nenableemail']=response[0].data.EmailConfig.nenableemail\r\n                selectedRecord['nformcode']={value:response[0].data.EmailConfig.nformcode,label:response[0].data.EmailConfig.sformname}\r\n                selectedRecord['ncontrolcode']={value:response[0].data.EmailConfig.ncontrolcode,label:response[0].data.EmailConfig.scontrolids}\r\n                if (response[0].data.EmailConfig.nemailuserquerycode !== -1){\r\n                    selectedRecord['nemailuserquerycode']={value:response[0].data.EmailConfig.nemailuserquerycode,label:response[0].data.EmailConfig.sdisplayname}\r\n                }\r\n               \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        EmailHost: response[0].data.EmailHost || [],\r\n                        EmailTemplate: response[0].data.EmailTemplate|| [],\r\n                        EmailScreen: response[0].data.EmailScreen|| [],\r\n                        ActionType: response[0].data.ActionType|| [],\r\n                        FormName:response[0].data.FormName|| [],\r\n                        FormControls:response[0].data.FormControls|| [],\r\n                        EmailUserQuery:response[0].data.EmailUserQuery|| [],\r\n                        selectedRecord,\r\n                        operation: editParam.operation,\r\n                        openModal: true,\r\n                        screenName: editParam.screenName,\r\n                        ncontrolcode: editParam.ncontrolCode,\r\n                        loading: false, selectedId\r\n                    }\r\n                });\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getUserEmailConfig (screenName, operation, primaryKey, SelectedEmailConfig,masterData, userinfo, ncontrolcode) {            \r\n    return function (dispatch) {  \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"emailconfig/getUserEmailConfig\", \r\n                                    {nemailconfigcode:SelectedEmailConfig.nemailconfigcode,\r\n                                    userinfo:userinfo})\r\n    .then(response=>{ \r\n        let selectedRecord = {};\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            users: response.data.users|| [],\r\n                           // dataSource:response[0].data.dataSource||[],\r\n                            operation,\r\n                            screenName,\r\n                            selectedRecord,\r\n                            openModal: true,\r\n                            ncontrolcode, loading: false\r\n                    }});\r\n        })\r\n        .catch(error=>{\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(error.message);\r\n            } \r\n            else{               \r\n                toast.warn(error.response.data);\r\n            }  \r\n        })        \r\n    }\r\n}\r\nexport function getFormControls (selectedRecord,userInfo) {            \r\n    return function (dispatch) {  \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"emailconfig/getEmailConfigControl\",\r\n    {nformcode:selectedRecord.nemailscreencode.item.nformcode,userinfo:userInfo})\r\n    .then(response=>{\r\n        selectedRecord['ncontrolcode'] = undefined;\r\n        selectedRecord['nemailuserquerycode'] = undefined;\r\n        dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        FormControls: response.data.FormControls|| [],\r\n                        EmailUserQuery: response.data.EmailUserQuery|| [],\r\n                        // dataSource:response[0].data.dataSource||[],\r\n                        //operation,\r\n                        //screenName,\r\n                        selectedRecord,\r\n                        //openModal: true,\r\n                        //ncontrolcode, \r\n                        loading: false\r\n                }});\r\n        })\r\n        .catch(error=>{\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(error.message);\r\n            } \r\n            else{               \r\n                toast.warn(error.response.data);\r\n            }  \r\n        })        \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}