{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{process}from'@progress/kendo-data-query';import{callService,crudMaster,updateStore,getProductComboService,validateEsignCredential,filterColumnData,getProductDetail,addProductFile,viewAttachment}from'../../actions';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{toast}from'react-toastify';import{injectIntl,FormattedMessage}from'react-intl';import'react-perfect-scrollbar/dist/css/styles.css';import AddProduct from'./AddProduct';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{getControlMap,showEsign,validateEmail,validatePhoneNumber,onDropAttachFileList,deleteAttachmentDropZone,create_UUID,Lims_JSON_stringify}from'../../components/CommonScript';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import Esign from'../audittrail/Esign';import{transactionStatus,attachmentType}from'../../components/Enumeration';import{ListWrapper}from'../../components/client-group.styles';import DataGrid from'../../components/data-grid/data-grid.component';import'./product.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPencilAlt,faTrashAlt,faPlus}from'@fortawesome/free-solid-svg-icons';import ListMaster from'../../components/list-master/list-master.component';import{ReadOnlyText,ContentPanel}from'../../components/App.styles';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import ProductFileTab from'./ProductFileTab';import AddProductFile from'./AddProductFile';var Product=/*#__PURE__*/function(_Component){_inherits(Product,_Component);var _super=_createSuper(Product);function Product(props){var _this;_classCallCheck(this,Product);_this=_super.call(this,props);_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var openChildModal=_this.props.Login.openChildModal;var selectedRecord=_this.props.Login.selectedRecord;var selectedId=_this.props.Login.selectedId;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openModal=false;openChildModal=false;selectedRecord={};selectedId=null;}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:selectedId}};_this.props.updateStore(updateInfo);};_this.onDropProductFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type===\"radio\"){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;_this.setState({selectedRecord:selectedRecord});};_this.confirmDelete=function(deleteParam,deleteId){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteRecord(deleteParam,deleteId);});};_this.deleteRecord=function(deleteParam,ncontrolCode){var _inputData;var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Product\",//this.props.Login.inputParam.methodUrl,\ndisplayName:_this.props.Login.inputParam.displayName,inputData:(_inputData={},_defineProperty(_inputData,\"product\",_this.props.Login.masterData.SelectedProduct),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_defineProperty(_inputData,\"genericlabel\",_this.props.Login.genericLabel),_inputData),operation:deleteParam.operation,dataState:_this.state.dataState,postParam:{inputListName:\"Product\",selectedObject:\"SelectedProduct\",primaryKeyField:\"nproductcode\",primaryKeyValue:_this.props.Login.masterData.SelectedProduct.nproductcode,fetchUrl:\"product/getProduct\",fecthInputObject:{userinfo:_this.props.Login.userInfo}}};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode?deleteParam.ncontrolCode:ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode],operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.tabDetail=function(){var tabMap=new Map();tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(ProductFileTab,{controlMap:_this.state.controlMap,userRoleControlRights:_this.state.userRoleControlRights,userInfo:_this.props.Login.userInfo,genericLabel:_this.props.Login.genericLabel,inputParam:_this.props.Login.inputParam,deleteRecord:_this.deleteFileRecord,productFile:_this.props.Login.masterData.productFile||[],getAvailableData:_this.props.getAvailableData,addProductFile:_this.props.addProductFile,viewProductFile:_this.viewProductFile,defaultRecord:_this.defaultRecord,screenName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode].concat(\" \"+_this.props.intl.formatMessage({id:\"IDS_FILE\"})),settings:_this.props.Login.settings}));return tabMap;};_this.viewProductFile=function(filedata){var inputParam={inputData:{productfile:filedata,userinfo:_this.props.Login.userInfo,genericlabel:_this.props.Login.genericLabel},classUrl:\"product\",operation:\"view\",methodUrl:\"AttachedProductFile\",screenName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode].concat(\" \"+_this.props.intl.formatMessage({id:\"IDS_FILE\"}))};_this.props.viewAttachment(inputParam);};_this.deleteFileRecord=function(productparam){var _inputData2;var inputParam={};//if (this.props.Login.screenName === 'Product File') {\ninputParam={classUrl:\"product\",methodUrl:productparam.methodUrl,inputData:(_inputData2={},_defineProperty(_inputData2,productparam.methodUrl.toLowerCase(),productparam.selectedRecord),_defineProperty(_inputData2,\"userinfo\",_this.props.Login.userInfo),_defineProperty(_inputData2,\"genericlabel\",_this.props.Login.genericLabel),_inputData2),operation:productparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,productparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openChildModal:true,screenName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode].concat(\" \"+_this.props.intl.formatMessage({id:\"IDS_FILE\"})),operation:productparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openChildModal\");}//}\n};_this.reloadData=function(){_this.searchRef.current.value=\"\";var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,//4778 janakumar labrl name not passed in the reload\ndisplayName:_this.props.Login.displayName,//this.props.Login.inputParam.displayName,\nuserInfo:_this.props.Login.userInfo};_this.props.callService(inputParam);};_this.onSaveProductFile=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var productFileArray=[];var productFile={nproductcode:_this.props.Login.masterData.SelectedProduct.nproductcode,nproductfilecode:selectedRecord.nproductfilecode?selectedRecord.nproductfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode,ndefaultstatus:selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]?selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]:4};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},productFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?selectedRecord.ssystemfilename.split('.'):create_UUID();var filesystemfileext=selectedRecord.ssystemfilename&&selectedRecord.ssystemfilename!==undefined?file.name.split('.')[ssystemfilename.length-1]:fileExtension;var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.nproductfilecode&&selectedRecord.nproductfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name.trim(),false);tempData[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\",false);tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);productFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{productFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename,false);productFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\",false);productFile[\"nlinkcode\"]=transactionStatus.NA;productFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;productFile[\"nfilesize\"]=selectedRecord.nfilesize;productFileArray.push(productFile);}}else{productFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false);productFile[\"sdescription\"]=Lims_JSON_stringify(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\",false);productFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;productFile[\"ssystemfilename\"]=\"\";productFile[\"nfilesize\"]=0;productFileArray.push(productFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"productfile\",JSON.stringify(productFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nformData.append(\"genericlabel\",JSON.stringify(_this.props.Login.genericLabel));var selectedId=null;var postParam=undefined;if(_this.props.Login.operation===\"update\"){// edit\npostParam={inputListName:\"Product\",selectedObject:\"SelectedProduct\",primaryKeyField:\"nproductcode\"};selectedId=selectedRecord[\"nproductfilecode\"];}var clearSelectedRecordField=[{\"controlType\":\"textarea\",\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_CATEGORYBASEDFLOW\", \"dataField\": \"ncategorybasedflow\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":3 },\n{\"controlType\":\"checkbox\",\"idsName\":\"IDS_DEFAULTSTATUS\",\"dataField\":\"ndefaultstatus\",\"width\":\"150px\",\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4}];var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.Login.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.Login.userInfo.smodulename),//ALPD-1628(while file saving,audit trail is not captured respective language)\nslanguagename:Lims_JSON_stringify(_this.props.Login.userInfo.slanguagename)})},displayName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode],formData:formData,isFileupload:true,operation:_this.props.Login.operation,classUrl:\"product\",saveType:saveType,formRef:formRef,methodUrl:\"ProductFile\",postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openChildModal\",\"\",\"\",clearSelectedRecordField);}};_this.onSaveClick=function(saveType,formRef){//add / edit            \nvar inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"genericlabel\"]=_this.props.Login.genericLabel;var dataState=undefined;var selectedId=null;var postParam=undefined;if(_this.props.Login.operation===\"update\"){postParam={inputListName:\"Product\",selectedObject:\"SelectedProduct\",primaryKeyField:\"nproductcode\",primaryKeyValue:_this.props.Login.selectedRecord.nproductcode,fetchUrl:\"product/getActiveProductById\",fecthInputObject:{userinfo:_this.props.Login.userInfo},masterData:_this.props.Login.masterData};// edit\ndataState=_this.state.dataState;// inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = JSON.parse(JSON.stringify(this.state.selectedRecord));\ninputData[\"product\"]=JSON.parse(JSON.stringify(_this.state.selectedRecord));selectedId=_this.props.Login.selectedRecord.nproductcode;}else{//add               \n//inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\ninputData[\"product\"]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};}if(inputData[\"product\"].hasOwnProperty('esignpassword')){if(inputData[\"product\"]['esignpassword']===''){delete inputData[\"product\"]['esigncomments'];delete inputData[\"product\"]['esignpassword'];}}inputData[\"product\"][\"ndefaultstatus\"]=_this.state.selectedRecord[\"ndefaultstatus\"]?_this.state.selectedRecord[\"ndefaultstatus\"]:transactionStatus.NO;inputData[\"product\"][\"nproductcatcode\"]=_this.state.selectedRecord[\"nproductcatcode\"]?_this.state.selectedRecord[\"nproductcatcode\"].value:\"\";inputData[\"product\"][\"sproductname\"]=_this.state.selectedRecord[\"sproductname\"]?_this.state.selectedRecord[\"sproductname\"]:\"\";inputData[\"product\"][\"sdescription\"]=_this.state.selectedRecord[\"sdescription\"]?_this.state.selectedRecord[\"sdescription\"]:\"\";var clearSelectedRecordField=[{\"controlType\":\"textbox\",\"idsName\":\"IDS_PRODUCTNAME\",\"dataField\":\"sproductname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},{\"controlType\":\"textarea\",\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\",\"mandatoryLabel\":\"IDS_ENTER\",\"isClearField\":true},//{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_CATEGORYBASEDFLOW\", \"dataField\": \"ncategorybasedflow\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":3 },\n{\"controlType\":\"checkbox\",\"idsName\":\"IDS_DEFAULTSTATUS\",\"dataField\":\"ndefaultstatus\",\"width\":\"150px\",\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4}];var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:\"Product\",//this.props.Login.inputParam.methodUrl,\ndisplayName:_this.props.Login.inputParam.displayName,inputData:inputData,selectedId:selectedId,dataState:dataState,operation:_this.props.Login.operation,saveType:saveType,postParam:postParam,formRef:formRef,searchRef:_this.searchRef,selectedRecord:_objectSpread({},_this.state.selectedRecord)};var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode],operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\",\"\",\"\",clearSelectedRecordField);}};_this.validateEsign=function(){var modalName=_this.props.Login.screenName===_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode].concat(\" \"+_this.props.intl.formatMessage({id:\"IDS_FILE\"}))?\"openChildModal\":\"openModal\";var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,modalName);};_this.formRef=React.createRef();var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:_dataState,userRoleControlRights:[],controlMap:new Map()};_this.searchRef=React.createRef();_this.confirmMessage=new ConfirmMessage();_this.extractedColumnList=[{\"idsName\":_this.props.Login.genericLabel?_this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode]:\"IDS_PRODUCTCATEGORY\",\"dataField\":\"sproductcatname\",\"width\":\"200px\"},{\"idsName\":_this.props.Login.genericLabel?_this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][_this.props.Login.userInfo.slanguagetypecode]:\"IDS_PRODUCT\",\"dataField\":\"sproductname\",\"width\":\"200px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\"},{\"idsName\":\"IDS_DISPLAYSTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"200px\"}];_this.productFileFTP=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];_this.productFileLink=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];_this.searchFieldList=[\"sproductcatname\",\"sproductname\",\"sdescription\",\"sdisplaystatus\"];return _this;}// dataStateChange = (event) => {\n//     this.setState({\n//         dataResult: process(this.state.data, event.dataState),\n//         dataState: event.dataState\n//     });\n// }\n_createClass(Product,[{key:\"render\",value:function render(){var _this2=this;var addId=this.props.Login.inputParam&&this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var editId=this.props.Login.inputParam&&this.state.controlMap.has(\"Edit\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Edit\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var deleteId=this.props.Login.inputParam&&this.state.controlMap.has(\"Delete\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Delete\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var addParam={screenName:this.props.Login.genericLabel?this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]:\"IDS_PRODUCT\",primaryeyField:\"nproductcode\",primaryKeyValue:undefined,operation:\"create\",inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolCode:addId};// const editParam = {\n//     screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), operation: \"update\",\n//     primaryKeyField: \"nproductcode\", inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo, ncontrolCode: editId\n// };\nvar editParam={screenName:this.props.Login.inputParam&&this.props.Login.inputParam.displayName&&this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],operation:\"update\",primaryKeyName:\"nproductcode\",masterData:this.props.Login.masterData,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolcode:editId,inputListName:\"Product\",selectedObject:\"SelectedProduct\"};var deleteParam={operation:\"delete\"};var filterParam={inputListName:\"Product\",selectedObject:\"SelectedProduct\",primaryKeyField:\"nproductcode\",fetchUrl:\"product/getProduct\",fecthInputObject:{userinfo:this.props.Login.userInfo},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var mandatoryFileFields=[];if(this.props.Login.screenName===(this.props.Login.genericLabel?this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"})):\"IDS_PRODUCTFILE\")){if(this.state.selectedRecord.nattachmenttypecode===attachmentType.FTP){this.productFileFTP.forEach(function(item){return item.mandatory===true?mandatoryFileFields.push(item):\"\";});}else{this.productFileLink.forEach(function(item){return item.mandatory===true?mandatoryFileFields.push(item):\"\";});}}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ListMaster// screenName={this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPE\" })}\n,{screenName:this.props.Login.genericLabel?this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode]:\"IDS_PRODUCT\",masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.Product,getMasterDetail:function getMasterDetail(product){return _this2.props.getProductDetail(product,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:this.props.Login.masterData.SelectedProduct,primaryKeyField:\"nproductcode\",mainField:\"sproductname\",firstField:\"sproductcatname\",secondField:\"sdisplaystatus\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,addId:addId,searchRef:this.searchRef,reloadData:this.reloadData,openModal:function openModal(){return _this2.props.getProductComboService(addParam);},isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch})),/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},this.props.Login.masterData.Product&&this.props.Login.masterData.Product.length>0&&this.props.Login.masterData.SelectedProduct?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.Login.masterData.SelectedProduct.sproductname),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"editProduct\",hidden:this.state.userRoleControlRights.indexOf(editId)===-1,className:\"btn btn-circle outline-grey mr-2\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_EDIT\"}),onClick:function onClick(){return _this2.props.getProductComboService(editParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})),/*#__PURE__*/React.createElement(Nav.Link,{name:\"deleteProduct\",className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DELETE\"}),hidden:this.state.userRoleControlRights.indexOf(deleteId)===-1,onClick:function onClick(){return _this2.confirmDelete(deleteParam,deleteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrashAlt})))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_DESCRIPTION\",message:\"Description\"})),/*#__PURE__*/React.createElement(ReadOnlyText,null,this.props.Login.masterData.SelectedProduct.sdescription)))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))))):\"\"))))),this.props.Login.openModal||this.props.Login.openChildModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.screenName===this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"}))?// show ={this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) ?\nthis.props.Login.openChildModal:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam//ATE234 janakumar ALPD-5546All Master screen -> Copy & File remove the save&continue\n,showSaveContinue:this.props.Login.screenName===\"Sample Type File\"?false:true,screenName:this.props.Login.screenName,onSaveClick:this.props.Login.screenName===this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"}))?this.onSaveProductFile:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.props.Login.screenName===this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"}))?mandatoryFileFields:[{\"idsName\":this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],\"dataField\":\"nproductcatcode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],\"dataField\":\"sproductname\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}],addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.Login.openChildModal&&this.props.Login.screenName===this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"}))?/*#__PURE__*/React.createElement(AddProductFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropProductFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType,onComboChange:this.onComboChange,linkMaster:this.props.Login.linkMaster,editFiles:this.props.editFiles,maxSize:20// maxFiles={this.props.operation === \"update\" ? 1 : 3}\n// multiple={this.props.operation === \"update\" ? false : true}\n,maxFiles:1,multiple:false// label={this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPEFILE\" })}\n,label:this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id:\"IDS_FILE\"})),name:\"productfilename\"}):/*#__PURE__*/React.createElement(AddProduct,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,productCategoryList:this.props.Login.productCategoryList||[],operation:this.props.Login.operation,genericLabel:this.props.Login.genericLabel,userInfo:this.props.Login.userInfo,inputParam:this.props.Login.inputParam})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData//dataResult: process(this.props.Login.masterData, this.state.dataState),\n});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData,selectedRecord:this.props.Login.selectedRecord//dataResult: process(this.props.Login.masterData, dataState), dataState\n});}}else if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var updateInfo={typeName:DEFAULT_RETURN,data:{masterData:[],inputParam:undefined,operation:null,modalName:undefined}};this.props.updateStore(updateInfo);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return Product;}(Component);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,getProductComboService:getProductComboService,updateStore:updateStore,validateEsignCredential:validateEsignCredential,filterColumnData:filterColumnData,getProductDetail:getProductDetail,addProductFile:addProductFile,viewAttachment:viewAttachment})(injectIntl(Product));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/product/Product.jsx"],"names":["React","Component","connect","process","callService","crudMaster","updateStore","getProductComboService","validateEsignCredential","filterColumnData","getProductDetail","addProductFile","viewAttachment","Row","Col","Card","Nav","FormGroup","FormLabel","toast","injectIntl","FormattedMessage","AddProduct","SlideOutModal","getControlMap","showEsign","validateEmail","validatePhoneNumber","onDropAttachFileList","deleteAttachmentDropZone","create_UUID","Lims_JSON_stringify","DEFAULT_RETURN","Esign","transactionStatus","attachmentType","ListWrapper","DataGrid","FontAwesomeIcon","faPencilAlt","faTrashAlt","faPlus","ListMaster","ReadOnlyText","ContentPanel","ConfirmMessage","CustomTabs","ProductFileTab","AddProductFile","Product","props","closeModal","loadEsign","Login","openModal","openChildModal","selectedRecord","selectedId","operation","updateInfo","typeName","data","onDropProductFile","attachedFiles","fieldName","maxSize","state","setState","actionType","deleteAttachment","event","file","onInputOnChange","optional","target","type","name","checked","YES","NO","value","onComboChange","comboData","confirmDelete","deleteParam","deleteId","confirmMessage","confirm","intl","formatMessage","id","deleteRecord","ncontrolCode","inputParam","classUrl","methodUrl","displayName","inputData","masterData","SelectedProduct","userInfo","genericLabel","dataState","postParam","inputListName","selectedObject","primaryKeyField","primaryKeyValue","nproductcode","fetchUrl","fecthInputObject","userinfo","userRoleControlRights","nformcode","screenData","screenName","slanguagetypecode","onTabChange","tabProps","tabDetail","tabMap","Map","set","controlMap","deleteFileRecord","productFile","getAvailableData","viewProductFile","defaultRecord","concat","settings","filedata","productfile","genericlabel","productparam","toLowerCase","reloadData","searchRef","current","onSaveProductFile","saveType","formRef","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","productFileArray","nproductfilecode","nstatus","ACTIVE","ndefaultstatus","LINK","formData","FormData","FTP","Array","isArray","length","forEach","index","tempData","Object","assign","splittedFileName","split","fileExtension","ssystemfilename","undefined","filesystemfileext","uniquefilename","trim","sdescription","NA","size","append","push","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","clearSelectedRecordField","sformname","smodulename","slanguagename","isFileupload","onSaveClick","parse","nmastersitecode","hasOwnProperty","esignNeeded","validateEsign","modalName","sreason","nreasoncode","spredefinedreason","label","password","createRef","skip","take","parseInt","masterStatus","error","dataResult","extractedColumnList","productFileFTP","productFileLink","searchFieldList","addId","has","get","ncontrolcode","editId","addParam","primaryeyField","editParam","primaryKeyName","filterParam","mandatoryFileFields","item","mandatory","searchedData","product","isClearSearch","sproductname","indexOf","onDropAccepted","linkMaster","editFiles","productCategoryList","previousProps","values","map","warn","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport {\r\n    callService, crudMaster, updateStore, getProductComboService, validateEsignCredential, filterColumnData,getProductDetail,addProductFile,viewAttachment\r\n} from '../../actions'\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl,FormattedMessage } from 'react-intl';\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\nimport AddProduct from './AddProduct';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { getControlMap,showEsign, validateEmail, validatePhoneNumber, onDropAttachFileList, deleteAttachmentDropZone, create_UUID,Lims_JSON_stringify } from '../../components/CommonScript';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport Esign from '../audittrail/Esign';\r\nimport { transactionStatus ,attachmentType} from '../../components/Enumeration';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport './product.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPencilAlt, faTrashAlt, faPlus} from '@fortawesome/free-solid-svg-icons';\r\nimport ListMaster from '../../components/list-master/list-master.component';\r\nimport { ReadOnlyText, ContentPanel } from '../../components/App.styles';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport ProductFileTab from './ProductFileTab';\r\nimport AddProductFile from './AddProductFile';\r\n\r\nclass Product extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map()\r\n        };\r\n        this.searchRef = React.createRef();\r\n        this.confirmMessage = new ConfirmMessage();\r\n        this.extractedColumnList = [\r\n            { \"idsName\": this.props.Login.genericLabel ? this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] : \"IDS_PRODUCTCATEGORY\" , \"dataField\": \"sproductcatname\", \"width\": \"200px\" },\r\n            { \"idsName\": this.props.Login.genericLabel ? this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] : \"IDS_PRODUCT\" , \"dataField\": \"sproductname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"200px\" }\r\n        ];\r\n        this.productFileFTP = [\r\n            { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\"}\r\n        ];\r\n\r\n        this.productFileLink = [\r\n            { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n            { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        ];\r\n        this.searchFieldList = [\"sproductcatname\",\"sproductname\", \"sdescription\",\"sdisplaystatus\"];\r\n    }\r\n\r\n    // dataStateChange = (event) => {\r\n    //     this.setState({\r\n    //         dataResult: process(this.state.data, event.dataState),\r\n    //         dataState: event.dataState\r\n    //     });\r\n    // }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let openChildModal = this.props.Login.openChildModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        let selectedId = this.props.Login.selectedId;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                openChildModal=false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            openChildModal=false;\r\n            selectedRecord = {};\r\n            selectedId=null\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal,openChildModal, loadEsign, selectedRecord, selectedId }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const addId = this.props.Login.inputParam && this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n\r\n        const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Edit\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n\r\n        const deleteId = this.props.Login.inputParam && this.state.controlMap.has(\"Delete\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Delete\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n\r\n        const addParam = {\r\n            screenName: this.props.Login.genericLabel ? this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] : \"IDS_PRODUCT\" , primaryeyField: \"nproductcode\", primaryKeyValue: undefined,\r\n            operation: \"create\", inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo, ncontrolCode: addId\r\n        };\r\n\r\n        // const editParam = {\r\n        //     screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), operation: \"update\",\r\n        //     primaryKeyField: \"nproductcode\", inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo, ncontrolCode: editId\r\n        // };\r\n        const editParam = {\r\n            screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode], operation: \"update\", primaryKeyName: \"nproductcode\",\r\n            masterData: this.props.Login.masterData,inputParam: this.props.Login.inputParam, userInfo: this.props.Login.userInfo,\r\n            ncontrolcode: editId, inputListName: \"Product\", selectedObject: \"SelectedProduct\"\r\n        };\r\n\r\n        const deleteParam = { operation: \"delete\" };\r\n\r\n        const filterParam = {\r\n            inputListName: \"Product\", selectedObject: \"SelectedProduct\", primaryKeyField: \"nproductcode\",\r\n            fetchUrl: \"product/getProduct\", fecthInputObject: { userinfo: this.props.Login.userInfo },\r\n            masterData: this.props.Login.masterData, searchFieldList: this.searchFieldList\r\n        };\r\n\r\n        const mandatoryFileFields = [];\r\n        if (this.props.Login.screenName === (this.props.Login.genericLabel ? this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) : \"IDS_PRODUCTFILE\" )){\r\n            if(this.state.selectedRecord.nattachmenttypecode === attachmentType.FTP){\r\n                this.productFileFTP.forEach(item => item.mandatory === true ?\r\n                    mandatoryFileFields.push(item) : \"\"\r\n                );\r\n            }\r\n            else {\r\n                this.productFileLink.forEach(item => item.mandatory === true ?\r\n                    mandatoryFileFields.push(item) : \"\"\r\n                );\r\n            }\r\n\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {/* <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">\r\n\r\n                            {this.state.data ?\r\n                                <DataGrid\r\n                                    primaryKeyField={\"nproductcode\"}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    fetchRecord={this.props.getProductComboService}\r\n                                    editParam={editParam}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    deleteParam={deleteParam}\r\n                                    reloadData={this.reloadData}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    pageable={true}\r\n                                    scrollable={'scrollable'}\r\n                                    gridHeight={'600px'}\r\n                                    isActionRequired={true}\r\n                                    isToolBarRequired={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                    addRecord={() => this.props.getProductComboService(addParam)}\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row> */}\r\n                <div className=\"client-listing-wrap mtop-4 mtop-fixed-breadcrumb\">\r\n                <Row noGutters>\r\n                    <Col md={4}>\r\n                        {/* <Row noGutters>\r\n                            <Col md={12}> */}\r\n                            {/* <div className=\"list-fixed-wrap\"> */}\r\n                                <ListMaster\r\n                                    // screenName={this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPE\" })}\r\n                                    screenName= {this.props.Login.genericLabel ? this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode] : \"IDS_PRODUCT\" }\r\n                                    masterData={this.props.Login.masterData}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.Product}\r\n                                    getMasterDetail={(product) => this.props.getProductDetail(product, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                                    selectedMaster={this.props.Login.masterData.SelectedProduct}\r\n                                    primaryKeyField=\"nproductcode\"\r\n                                    mainField=\"sproductname\"\r\n                                    firstField=\"sproductcatname\"\r\n                                    secondField=\"sdisplaystatus\"\r\n                                    filterColumnData={this.props.filterColumnData}\r\n                                    filterParam={filterParam}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    addId={addId}\r\n                                    searchRef={this.searchRef}\r\n                                    reloadData={this.reloadData}\r\n                                    openModal={() => this.props.getProductComboService(addParam)}\r\n                                    isMultiSelecct={false}\r\n                                    hidePaging={false}\r\n                                    isClearSearch={this.props.Login.isClearSearch}\r\n                                />\r\n                            {/* </div>\r\n                        </Col></Row> */}\r\n                    </Col>\r\n                    <Col md={8}>\r\n                        {/* <Row>\r\n                            <Col md={12}> */}\r\n                            <ContentPanel className=\"panel-main-content\">\r\n                                <Card className=\"border-0\">\r\n                                    {this.props.Login.masterData.Product && this.props.Login.masterData.Product.length > 0 && this.props.Login.masterData.SelectedProduct ?\r\n                                        <>\r\n                                            <Card.Header>\r\n                                                \r\n                                                <Card.Title className=\"product-title-main\">\r\n                                                    {this.props.Login.masterData.SelectedProduct.sproductname}\r\n                                                </Card.Title>\r\n                                                <Card.Subtitle>\r\n                                                    <div className=\"d-flex product-category\">\r\n                                                        <h2 className=\"product-title-sub flex-grow-1\">\r\n\r\n                                                            \r\n                                                        </h2>\r\n                                                        \r\n                                                        <div className=\"d-inline\">\r\n                                                            <Nav.Link name=\"editProduct\" hidden={this.state.userRoleControlRights.indexOf(editId) === -1}\r\n                                                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_EDIT\" })}\r\n                                                                \r\n                                                                onClick={() => this.props.getProductComboService(editParam)}\r\n                                                            >\r\n                                                                <FontAwesomeIcon icon={faPencilAlt} />\r\n                                                            </Nav.Link>\r\n\r\n                                                            <Nav.Link name=\"deleteProduct\" className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DELETE\" })}\r\n                                                              \r\n                                                                hidden={this.state.userRoleControlRights.indexOf(deleteId) === -1}\r\n                                                                onClick={() => this.confirmDelete(deleteParam,deleteId)}>\r\n                                                                <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                               \r\n                                                            </Nav.Link>\r\n                                                            \r\n                                                            \r\n                                                        </div>\r\n                                                        \r\n                                                    </div>\r\n\r\n                                                </Card.Subtitle>\r\n                                            </Card.Header>\r\n                                            <Card.Body className=\"form-static-wrap\">\r\n                                                \r\n\r\n                                                <Row>\r\n                                                    <Col md={12}>\r\n                                                        <FormGroup>\r\n                                                            <FormLabel><FormattedMessage id=\"IDS_DESCRIPTION\" message=\"Description\" /></FormLabel>\r\n                                                            <ReadOnlyText>{this.props.Login.masterData.SelectedProduct.sdescription}</ReadOnlyText>\r\n                                                        </FormGroup>\r\n                                                    </Col>\r\n                                                  \r\n                                                </Row>\r\n                                                \r\n                                                <Row className=\"no-gutters\">\r\n                                                <Col md={12}>\r\n                                                    <Card className=\"at-tabs\">\r\n                                                        <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                                                    </Card>\r\n                                                </Col>\r\n                                            </Row>\r\n                                                \r\n                                            \r\n                                            </Card.Body>\r\n                                        </>\r\n                                        : \"\"\r\n                                    }\r\n                                </Card>\r\n                            </ContentPanel>\r\n                        </Col></Row>\r\n                    {/* </Col>\r\n                </Row> */}\r\n            </div>\r\n                {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n                {this.props.Login.openModal || this.props.Login.openChildModal ?\r\n                    <SlideOutModal\r\n                        show={this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) ?\r\n                        // show ={this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) ?\r\n                        this.props.Login.openChildModal:\r\n                        this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        //ATE234 janakumar ALPD-5546All Master screen -> Copy & File remove the save&continue\r\n                        showSaveContinue={ this.props.Login.screenName===\"Sample Type File\"?false:true}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"}))  ? this.onSaveProductFile: this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) ? \r\n                        mandatoryFileFields:\r\n                        [\r\n                            { \"idsName\": this.props.Login.genericLabel[\"ProductCategory\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\": \"nproductcatcode\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                            { \"idsName\": this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\": \"sproductname\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" }]}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : this.props.Login.openChildModal&&\r\n                            this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"}))  ? \r\n                                \r\n                            <AddProductFile\r\n                            selectedRecord={this.state.selectedRecord || {}}\r\n                            onInputOnChange={this.onInputOnChange}\r\n                            onDrop={this.onDropProductFile}\r\n                            onDropAccepted={this.onDropAccepted}\r\n                            deleteAttachment={this.deleteAttachment}\r\n                            actionType={this.state.actionType}\r\n                            onComboChange={this.onComboChange}\r\n                            linkMaster={this.props.Login.linkMaster}\r\n                            editFiles={this.props.editFiles}\r\n                            maxSize={20}\r\n                            // maxFiles={this.props.operation === \"update\" ? 1 : 3}\r\n                            // multiple={this.props.operation === \"update\" ? false : true}\r\n                            maxFiles={1}\r\n                            multiple={false}\r\n                            // label={this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPEFILE\" })}\r\n                            \r\n                            label={this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({ id: \"IDS_FILE\"}))}\r\n                            name=\"productfilename\"\r\n                        />\r\n                                    \r\n    \r\n                                : <AddProduct\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                productCategoryList={this.props.Login.productCategoryList || []}\r\n                                operation={this.props.Login.operation}\r\n                                genericLabel={this.props.Login.genericLabel}\r\n                                userInfo={this.props.Login.userInfo}\r\n                                inputParam={this.props.Login.inputParam}\r\n                            />}\r\n                    />\r\n                    : \"\"}\r\n            </>\r\n        );\r\n    }\r\n\r\n    onDropProductFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize);\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData,\r\n                    //dataResult: process(this.props.Login.masterData, this.state.dataState),\r\n                });\r\n            }\r\n            else {\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n                this.setState({\r\n                    data: this.props.Login.masterData, selectedRecord: this.props.Login.selectedRecord,\r\n                    //dataResult: process(this.props.Login.masterData, dataState), dataState\r\n                });\r\n            }\r\n        }\r\n        else if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n    }\r\n\r\n    onInputOnChange = (event,optional) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else if (event.target.type === \"radio\"){\r\n            selectedRecord[event.target.name] = optional;\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n    confirmDelete = (deleteParam,deleteId) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteRecord(deleteParam, deleteId));\r\n    }\r\n    deleteRecord = (deleteParam, ncontrolCode) => {\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"Product\",//this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: {\r\n                //[this.props.Login.inputParam.methodUrl.toLowerCase()]: this.props.Login.masterData.SelectedProduct,\r\n                [\"product\"]: this.props.Login.masterData.SelectedProduct,\r\n                \"userinfo\": this.props.Login.userInfo,\r\n                \"genericlabel\" :this.props.Login.genericLabel\r\n\r\n            },\r\n            operation: deleteParam.operation,\r\n            dataState: this.state.dataState,\r\n            postParam: { inputListName: \"Product\", selectedObject: \"SelectedProduct\", primaryKeyField: \"nproductcode\",\r\n            primaryKeyValue:this.props.Login.masterData.SelectedProduct.nproductcode,\r\n            fetchUrl: \"product/getProduct\", fecthInputObject: { userinfo: this.props.Login.userInfo } }\r\n        }\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode ? deleteParam.ncontrolCode : ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName:this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],\r\n                    operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    tabDetail = () => {\r\n      \r\n        const tabMap = new Map();\r\n\r\n       tabMap.set(\"IDS_FILE\",\r\n        <ProductFileTab\r\n            controlMap={this.state.controlMap}\r\n            userRoleControlRights={this.state.userRoleControlRights}\r\n            userInfo={this.props.Login.userInfo}\r\n            genericLabel ={this.props.Login.genericLabel}\r\n            inputParam={this.props.Login.inputParam}\r\n            deleteRecord={this.deleteFileRecord}\r\n            productFile={this.props.Login.masterData.productFile || []}\r\n            getAvailableData={this.props.getAvailableData}\r\n            addProductFile={this.props.addProductFile}\r\n            viewProductFile={this.viewProductFile}\r\n            defaultRecord={this.defaultRecord}\r\n            screenName={this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"}))}\r\n            settings={this.props.Login.settings}\r\n        />);\r\n        return tabMap;\r\n    }\r\n\r\n    viewProductFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                productfile: filedata,\r\n                userinfo: this.props.Login.userInfo,\r\n                genericlabel:this.props.Login.genericLabel\r\n            },\r\n            classUrl: \"product\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedProductFile\",\r\n            screenName: this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"}))\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    deleteFileRecord = (productparam) => {\r\n       \r\n        let inputParam = {};\r\n        //if (this.props.Login.screenName === 'Product File') {\r\n            inputParam = {\r\n                classUrl: \"product\",\r\n                methodUrl: productparam.methodUrl,\r\n                inputData: {\r\n                    [productparam.methodUrl.toLowerCase()]: productparam.selectedRecord,\r\n                    \"userinfo\": this.props.Login.userInfo,\r\n                    \"genericlabel\" : this.props.Login.genericLabel,\r\n\r\n                },\r\n                operation: productparam.operation,\r\n                //dataState: this.state.dataState,\r\n                //dataStateMaterial: this.state.dataStateMaterial\r\n                dataState: this.state.dataState\r\n            }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, productparam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openChildModal: true, screenName: this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) , operation: productparam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\");\r\n        }\r\n    //}\r\n}\r\n\r\n    reloadData = () => {\r\n        this.searchRef.current.value = \"\";\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl, //4778 janakumar labrl name not passed in the reload\r\n            displayName: this.props.Login.displayName,//this.props.Login.inputParam.displayName,\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n    onSaveProductFile=(saveType, formRef) =>{\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let productFileArray = [];\r\n        let productFile = {\r\n            nproductcode: this.props.Login.masterData.SelectedProduct.nproductcode,\r\n            nproductfilecode: selectedRecord.nproductfilecode ? selectedRecord.nproductfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n            ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, productFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !==undefined ? selectedRecord.ssystemfilename.split('.') :  create_UUID();\r\n                    const filesystemfileext = selectedRecord.ssystemfilename && selectedRecord.ssystemfilename !==undefined  ? file.name.split('.')[ssystemfilename.length - 1] : fileExtension;\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nproductfilecode && selectedRecord.nproductfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext:  create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] =Lims_JSON_stringify(file.name.trim(),false);\r\n                    tempData[\"sdescription\"] =Lims_JSON_stringify( selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\",false);\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    productFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                productFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename,false);\r\n                productFile[\"sdescription\"] = Lims_JSON_stringify(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\",false);\r\n                productFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                productFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                productFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                productFileArray.push(productFile);\r\n            }\r\n        } else {\r\n            productFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.slinkfilename.trim(),false);\r\n            productFile[\"sdescription\"] =Lims_JSON_stringify(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\",false);\r\n            productFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            productFile[\"ssystemfilename\"] = \"\";\r\n            productFile[\"nfilesize\"] = 0;\r\n            productFileArray.push(productFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"productfile\", JSON.stringify(productFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n        formData.append(\"genericlabel\",JSON.stringify(this.props.Login.genericLabel));\r\n\r\n\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.Login.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"Product\", selectedObject: \"SelectedProduct\", primaryKeyField: \"nproductcode\" };\r\n            selectedId = selectedRecord[\"nproductfilecode\"];\r\n        }\r\n        let clearSelectedRecordField = [\r\n            \r\n            { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_CATEGORYBASEDFLOW\", \"dataField\": \"ncategorybasedflow\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":3 },\r\n            { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 }\r\n        ]\r\n        const inputParam = {\r\n           inputData: { \"userinfo\": {...this.props.Login.userInfo,\r\n            sformname: Lims_JSON_stringify(this.props.Login.userInfo.sformname),\r\n            smodulename: Lims_JSON_stringify(this.props.Login.userInfo.smodulename),\r\n            //ALPD-1628(while file saving,audit trail is not captured respective language)\r\n            slanguagename: Lims_JSON_stringify(this.props.Login.userInfo.slanguagename)\r\n        }},\r\n            displayName:this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.Login.operation,\r\n            classUrl: \"product\",\r\n            saveType, formRef, methodUrl: \"ProductFile\", postParam,\r\n            selectedRecord:{...this.state.selectedRecord}\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData }, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openChildModal\",\"\",\"\",clearSelectedRecordField);\r\n        }\r\n        \r\n    }\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        //add / edit            \r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"genericlabel\"] =this.props.Login.genericLabel;\r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.Login.operation === \"update\") {\r\n            postParam = { inputListName: \"Product\", selectedObject: \"SelectedProduct\", primaryKeyField: \"nproductcode\",\r\n        primaryKeyValue: this.props.Login.selectedRecord.nproductcode,\r\n         fetchUrl: \"product/getActiveProductById\", fecthInputObject: {userinfo: this.props.Login.userInfo },\r\n         masterData: this.props.Login.masterData \r\n      }\r\n            // edit\r\n            dataState = this.state.dataState;\r\n           // inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = JSON.parse(JSON.stringify(this.state.selectedRecord));\r\n           inputData[\"product\"] = JSON.parse(JSON.stringify(this.state.selectedRecord));\r\n            selectedId = this.props.Login.selectedRecord.nproductcode;\r\n        } else {\r\n            //add               \r\n            //inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n            inputData[\"product\"] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n        }\r\n        if (inputData[\"product\"].hasOwnProperty('esignpassword')) {\r\n            if (inputData[\"product\"]['esignpassword'] === '') {\r\n                delete inputData[\"product\"]['esigncomments']\r\n                delete inputData[\"product\"]['esignpassword']\r\n            }\r\n        }\r\n\r\n        inputData[\"product\"][\"ndefaultstatus\"] = this.state.selectedRecord[\"ndefaultstatus\"] ? this.state.selectedRecord[\"ndefaultstatus\"] : transactionStatus.NO;\r\n        inputData[\"product\"][\"nproductcatcode\"] = this.state.selectedRecord[\"nproductcatcode\"] ? this.state.selectedRecord[\"nproductcatcode\"].value : \"\";\r\n        inputData[\"product\"][\"sproductname\"] = this.state.selectedRecord[\"sproductname\"] ? this.state.selectedRecord[\"sproductname\"] : \"\";\r\n        inputData[\"product\"][\"sdescription\"] = this.state.selectedRecord[\"sdescription\"] ? this.state.selectedRecord[\"sdescription\"] : \"\";\r\n        let clearSelectedRecordField = [\r\n            { \"controlType\": \"textbox\", \"idsName\":\"IDS_PRODUCTNAME\", \"dataField\": \"sproductname\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            { \"controlType\": \"textarea\", \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\", \"mandatoryLabel\": \"IDS_ENTER\",\"isClearField\":true },\r\n            //{ \"controlType\": \"checkbox\", \"idsName\": \"IDS_CATEGORYBASEDFLOW\", \"dataField\": \"ncategorybasedflow\", \"width\": \"200px\", \"controlName\": \"ncategorybasedflow\",\"isClearField\":true,\"preSetValue\":3 },\r\n            { \"controlType\": \"checkbox\", \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"150px\",\"controlName\": \"ndefaultstatus\", \"mandatoryLabel\": \"IDS_SELECT\",\"isClearField\":true,\"preSetValue\":4 }\r\n        ]\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: \"Product\",//this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData, selectedId, dataState,\r\n            operation: this.props.Login.operation, saveType,postParam, formRef, searchRef: this.searchRef,\r\n            selectedRecord:{...this.state.selectedRecord}\r\n        }\r\n\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode],\r\n                    operation: this.props.Login.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\",\"\",\"\",clearSelectedRecordField);\r\n        }\r\n\r\n    }\r\n    validateEsign = () => {\r\n        let modalName = this.props.Login.screenName === this.props.Login.genericLabel[\"Product\"][\"jsondata\"][\"sdisplayname\"][this.props.Login.userInfo.slanguagetypecode].concat(\" \"+this.props.intl.formatMessage({id : \"IDS_FILE\"})) ? \"openChildModal\" : \"openModal\";\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, modalName);\r\n    }\r\n    componentWillUnmount() {\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {\r\n                masterData: [], inputParam: undefined, operation: null, modalName: undefined\r\n            }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, getProductComboService,\r\n    updateStore, validateEsignCredential, filterColumnData,getProductDetail,addProductFile,viewAttachment\r\n})(injectIntl(Product));"]},"metadata":{},"sourceType":"module"}