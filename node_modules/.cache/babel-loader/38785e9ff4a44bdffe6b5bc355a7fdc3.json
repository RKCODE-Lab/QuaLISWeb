{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{injectIntl}from'react-intl';import{Row,Col}from'react-bootstrap';import{toast}from'react-toastify';import{process}from'@progress/kendo-data-query';import DynamicDataGrid from'../../components/data-grid/data-grid.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import Esign from'../../pages/audittrail/Esign';import{callService,crudMaster,updateStore,validateEsignCredential,getEditDynamicMasterCombo,//fetchRecord,\ngetDynamicMasterCombo,getChildValues}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,getControlMap,deleteAttachmentDropZone,getSameRecordFromTwoArrays,onDropAttachFileList,convertDateTimetoString,validateEmail,formatDate,sortData}from'../../components/CommonScript';import{ListWrapper}from'../../components/client-group.styles';import DynamicSlideout from'../dynamicpreregdesign/DynamicSlideout.jsx';import{transactionStatus}from'../../components/Enumeration';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var DynamicMaster=/*#__PURE__*/function(_React$Component){_inherits(DynamicMaster,_React$Component);var _super=_createSuper(DynamicMaster);function DynamicMaster(props){var _this;_classCallCheck(this,DynamicMaster);_this=_super.call(this,props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data||[],event.dataState),dataState:event.dataState});};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.openModal=function(){var addId=_this.props.Login.inputParam&&_this.state.controlMap.has(\"Add\")&&_this.state.controlMap.get(\"Add\").ncontrolcode;_this.props.getDynamicMasterCombo(_this.props.Login.masterData,_this.props.Login.userInfo,addId,_this.state.designData,_this.state.selectedRecord,_this.state.childColumnList,_this.state.comboComponents,_this.state.withoutCombocomponent,false,true,new Map(),true,\"create\",_this.props.Login.displayName);};_this.fetchRecord=function(fetchRecordParam){_this.props.getEditDynamicMasterCombo(fetchRecordParam,_this.state.designData,_this.state.selectedRecord,_this.state.childColumnList,_this.state.comboComponents,_this.state.withoutCombocomponent);};_this.onNumericBlur=function(value,control){var selectedRecord=_this.state.selectedRecord;if(selectedRecord[control.label]){if(control.max){if(!(selectedRecord[control.label]<parseFloat(control.max))){selectedRecord[control.label]=control.precision?parseFloat(control.max):parseInt(control.max);}}if(control.min){if(!(selectedRecord[control.label]>parseFloat(control.min))){selectedRecord[control.label]=control.precision?parseFloat(control.min):parseInt(control.min);}}}_this.setState({selectedRecord:selectedRecord});};_this.comboChild=function(data,columnList,childColumnList,slice){var retunObj={};// if (data.findIndex(x => x.label === columnList.label) !== -1) {\nif(!childColumnList.hasOwnProperty(columnList.label)){if(childColumnList[columnList.label]===undefined){if(columnList.hasOwnProperty(\"child\")){var childList=[];columnList.child.map(function(childData){var index=data.findIndex(function(x){return x.label===childData.label;});if(index!==-1){childList.push(data[index]);if(slice){data=[].concat(_toConsumableArray(data.slice(0,index)),_toConsumableArray(data.slice(index+1)));}}});childColumnList[columnList.label]=childList;if(childList.length>0){childList.map(function(y){if(y.hasOwnProperty(\"child\")){var val=_this.comboChild(data,y,childColumnList,slice);retunObj[\"data\"]=val.data;retunObj[\"childColumnList\"]=val.childColumnList;}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}});}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}}else{retunObj[\"data\"]=data;retunObj[\"childColumnList\"]=childColumnList;}return retunObj;};_this.onComboChange=function(comboData,control,customName){var comboName=customName||control.label;var selectedRecord=_this.state.selectedRecord||{};if(comboData){comboData[\"item\"]=_objectSpread(_objectSpread({},comboData[\"item\"]),{},{\"pkey\":control.valuemember,\"nquerybuildertablecode\":control.nquerybuildertablecode,\"source\":control.source});selectedRecord[comboName]=comboData;}else{selectedRecord[comboName]=[];}if(control.child&&control.child.length>0){var childComboList=getSameRecordFromTwoArrays(_this.state.comboComponents,control.child,\"label\");var childColumnList={};childComboList.map(function(columnList){var val=_this.comboChild(_this.state.comboComponents,columnList,childColumnList,false);childColumnList=val.childColumnList;});var parentList=getSameRecordFromTwoArrays(_this.state.withoutCombocomponent,control.child,\"label\");var inputParem={child:control.child,source:control.source,primarykeyField:control.valuemember,value:comboData.value,item:comboData.item};_this.props.getChildValues(inputParem,_this.props.Login.userInfo,selectedRecord,_this.props.Login.comboData,childComboList,childColumnList,_this.state.withoutCombocomponent,[].concat(_toConsumableArray(childComboList),_toConsumableArray(parentList)));}else{var updateInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);}};_this.onNumericInputChange=function(value,name){var selectedRecord=_this.state.selectedRecord;selectedRecord[name]=value;_this.setState({selectedRecord:selectedRecord});};_this.handleDateChange=function(dateValue,dateName){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onDrop=function(value,type,oldVlaue){var design=_this.state.design;var columns=design[0].children;var designData=_this.props.Login.ReactInputFields;value=JSON.parse(value.fields);value=_objectSpread(_objectSpread({},value),{},{type:\"component\"});var designDataIndex=designData.findIndex(function(item){return item.label===value.label;});var firstIndex=columns[0]?columns[0].children.findIndex(function(item){return item.label===value.label;}):-1;var secondIndex=columns[1]?columns[1].children.findIndex(function(item){return item.label===value.label;}):-1;if(designDataIndex>=0)designData.splice(designDataIndex,1);if(firstIndex>=0){if(type!==1){columns[0].children.splice(firstIndex,1);// columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\n}else{if(oldVlaue){oldVlaue=JSON.parse(oldVlaue);var from=columns[0].children.findIndex(function(item){return item.label===value.label;});var to=columns[0].children.findIndex(function(item){return item.label===oldVlaue.label;});columns[0].children.splice(to,0,columns[0].children.splice(from,1)[0]);}}}else if(type===1){if(columns[0]){columns[0].children.push(value);}else{columns[0]={id:\"1\",type:\"column\",children:[]};columns[0].children.push(value);}}if(secondIndex>=0){if(type!==2){columns[1].splice(secondIndex,1);}else{if(oldVlaue){oldVlaue=JSON.parse(oldVlaue);var _from=columns[1].children.findIndex(function(item){return item.label===value.label;});var _to=columns[1].children.findIndex(function(item){return item.label===oldVlaue.label;});columns[1].children.splice(_to,0,columns[1].children.splice(_from,1)[0]);}}}else if(type===2){if(columns[1]){columns[1].children.push(value);}else{columns[1]={id:\"2\",type:\"column\",children:[]};columns[1].children.push(value);}}// design.push(columns)\n_this.setState({designData:designData,design:design});};_this.onDropFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onInputOnChange=function(event,value){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='toggle'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='numeric'){if(/\\D/.test(event.target.value))selectedRecord[event.target.name]=event.target.value;}else if(event.target.type==='checkbox'){selectedRecord[event.target.name]=value;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=value;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.deleteRecord=function(deleteParam){var _inputData;var inputParam={classUrl:\"dynamicmaster\",methodUrl:\"DynamicMaster\",displayName:_this.props.Login.displayName,inputData:(_inputData={},_defineProperty(_inputData,\"dynamicmaster\",{\"ndynamicmastercode\":deleteParam.selectedRecord.ndynamicmastercode}),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:\"delete\",dataState:_this.state.dataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.displayName,operation:\"delete\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.reloadData=function(){var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,userInfo:_this.props.Login.userInfo,displayName:_this.props.Login.inputParam.displayName};_this.props.callService(inputParam);};_this.onSaveClick=function(saveType,formRef){//add / edit  \nvar inputData=[];var dataState=undefined;inputData[\"userinfo\"]=_this.props.Login.userInfo;inputData[\"masterdateconstraints\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;inputData[\"masterdatefields\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;inputData[\"mastercombinationunique\"]=_this.props.Login.masterData.DynamicMasterDesign.screendesign.mastercombinationunique;var selectedId=null;var operation=\"\";var selectedRecord=_this.state.selectedRecord;if(_this.props.Login.operation===\"update\"){// edit\ndataState=_this.state.dataState;inputData[\"dynamicmaster\"]={ndynamicmastercode:_this.state.selectedRecord[\"ndynamicmastercode\"]};//this.state.selectedRecord;\ninputData[\"dynamicmaster\"][\"jsondata\"]={};inputData[\"dynamicmaster\"][\"jsonuidata\"]={};selectedId=_this.props.Login.selectedId;operation=\"update\";}else{//add                          \ninputData[\"dynamicmaster\"]={//\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \nnformcode:_this.props.Login.userInfo.nformcode,ndesigntemplatemappingcode:_this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode,jsondata:{},jsonuidata:{}};operation=\"create\";}var dateList=[];var defaulttimezone=_this.props.Login.defaulttimezone;var userInfo=_this.props.Login.userInfo;_this.props.Login.masterData.DynamicMasterDesign&&_this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedRecord[componentrow.label]?{value:selectedRecord[componentrow.label].value,label:selectedRecord[componentrow.label].label,pkey:selectedRecord[componentrow.label].item.pkey,nquerybuildertablecode:selectedRecord[componentrow.label].item.nquerybuildertablecode,source:selectedRecord[componentrow.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=selectedRecord[componentrow.label]?selectedRecord[componentrow.label].label:\"\";}else if(componentrow.inputtype===\"date\"){if(componentrow.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=formatDate(selectedRecord[componentrow.label],false);inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=componentrow.loadcurrentdate?formatDate(selectedRecord[componentrow.label]||new Date(),false):selectedRecord[componentrow.label]?formatDate(selectedRecord[componentrow.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];//convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n}if(componentrow.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)]=selectedRecord[\"tz\".concat(componentrow.label)]?{value:selectedRecord[\"tz\".concat(componentrow.label)].value,label:selectedRecord[\"tz\".concat(componentrow.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(componentrow.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(componentrow.label)];}dateList.push(componentrow.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]=selectedRecord[componentrow.label]?selectedRecord[componentrow.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label]=inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];// inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\n}return inputData[\"dynamicmaster\"];});}else{if(component.inputtype===\"combo\"){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedRecord[component.label]?{value:selectedRecord[component.label].value,label:selectedRecord[component.label].label,pkey:selectedRecord[component.label].item.pkey,nquerybuildertablecode:selectedRecord[component.label].item.nquerybuildertablecode,source:selectedRecord[component.label].item.source}:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;//selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\n}else if(component.inputtype===\"date\"){if(component.mandatory){inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=formatDate(selectedRecord[component.label],false);// convertDateTimetoString(selectedRecord[component.label] ?\n// selectedRecord[component.label] : new Date(), userInfo);\ninputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo);\n}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=component.loadcurrentdate?//convertDateTimetoString(selectedRecord[component.label] ?                                      \n//    selectedRecord[component.label] : new Date(), userInfo) :\nformatDate(selectedRecord[component.label]||new Date(),false):selectedRecord[component.label]?// convertDateTimetoString(selectedRecord[component.label] ?\n//   selectedRecord[component.label] : new Date(), userInfo) : \"\";\nformatDate(selectedRecord[component.label],false):\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];//convertDateTimetoString(selectedRecord[component.label], userInfo)\n}if(component.timezone){inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)]=selectedRecord[\"tz\".concat(component.label)]?{value:selectedRecord[\"tz\".concat(component.label)].value,label:selectedRecord[\"tz\".concat(component.label)].label}:defaulttimezone?defaulttimezone:-1;inputData[\"dynamicmaster\"][\"jsonuidata\"][\"tz\".concat(component.label)]=inputData[\"dynamicmaster\"][\"jsondata\"][\"tz\".concat(component.label)];}dateList.push(component.label);}else{inputData[\"dynamicmaster\"][\"jsondata\"][component.label]=selectedRecord[component.label]?selectedRecord[component.label]:\"\";inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label]=inputData[\"dynamicmaster\"][\"jsondata\"][component.label];}}return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});return inputData[\"dynamicmaster\"];});inputData[\"dynamicmaster\"][\"jsonstring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);inputData[\"dynamicmaster\"][\"jsonuistring\"]=JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);inputData[\"masterdatelist\"]=dateList;var inputParam={classUrl:\"dynamicmaster\",methodUrl:\"DynamicMaster\",displayName:_this.props.Login.displayName,inputData:inputData,operation:operation,saveType:saveType,formRef:formRef,selectedId:selectedId,dataState:dataState};var esignNeeded=showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode);if(esignNeeded){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.Login.displayName,operation:\"create\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.formRef=React.createRef();_this.extractedColumnList=[];_this.detailedColumnList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{},dataResult:[],dataState:_dataState,userRoleControlRights:[],controlMap:new Map(),comboComponents:[],withoutCombocomponent:[]};return _this;}_createClass(DynamicMaster,[{key:\"render\",value:function render(){var primaryKeyField=\"ndynamicmastercode\";var editId=this.props.Login.inputParam&&this.state.controlMap.has(\"Edit\")&&this.state.controlMap.get(\"Edit\").ncontrolcode;var editParam={screenName:this.props.Login.inputParam&&this.props.Login.inputParam.displayName&&this.props.intl.formatMessage({id:this.props.Login.inputParam.displayName}),operation:\"update\",primaryKeyField:primaryKeyField,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,ncontrolCode:editId};var deleteParam={operation:\"delete\"};// const mandatoryFields=[];\n// this.extractedColumnList.forEach(item=>item.mandatory === true ? \n//     mandatoryFields.push(item) :\"\"\n// );   \nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},this.state.data?/*#__PURE__*/React.createElement(DynamicDataGrid,{primaryKeyField:primaryKeyField,data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,detailedFieldList:this.detailedColumnList,expandField:this.detailedColumnList.length>0?\"expanded\":false,methodUrl:\"\",controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.fetchRecord,editParam:editParam,deleteRecord:this.deleteRecord,deleteParam:deleteParam,reloadData:this.reloadData,addRecord:this.openModal,pageable:true,scrollable:'scrollable',gridHeight:'600px',isActionRequired:true,isToolBarRequired:true,selectedId:this.props.Login.selectedId}):\"\"))),this.props.Login.openModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation?this.props.Login.operation:\"create\",inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:this.state.mandatoryFields||[],addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(DynamicSlideout,{selectedRecord:this.props.Login.selectedRecord,templateData:this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.slideoutdesign,handleChange:this.handleChange,handleDateChange:this.handleDateChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,comboData:this.props.Login.comboData,onComboChange:this.onComboChange,onDropFile:this.onDropFile,deleteAttachment:this.deleteAttachment,onNumericBlur:this.onNumericBlur,userInfo:this.props.Login.userInfo,timeZoneList:this.props.Login.timeZoneList,defaultTimeZone:this.props.Login.defaultTimeZone,Login:this.props.Login})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var _this2=this;if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.extractedColumnList=[];this.detailedColumnList=[];if(this.props.Login.masterData&&this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.screendesign){this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(function(row){// console.log(\"data:\", row);\n_this2.extractedColumnList.push({\"idsName\":row[\"1\"][_this2.props.Login.userInfo.slanguagetypecode],\"dataField\":row[\"2\"]});});this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(function(row){_this2.detailedColumnList.push({\"idsName\":row[\"1\"][_this2.props.Login.userInfo.slanguagetypecode],\"dataField\":row[\"2\"]});});}var data=[];var withoutCombocomponent=[];var mandatoryFields=[];var Layout=this.props.Login.masterData.DynamicMasterDesign&&this.props.Login.masterData.DynamicMasterDesign.slideoutdesign||[];Layout.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){data.push(componentrow);}else{withoutCombocomponent.push(componentrow);}if(componentrow.mandatory===true){if(componentrow.inputtype===\"email\"){mandatoryFields.push({\"mandatory\":true,\"idsName\":componentrow.label,\"dataField\":componentrow.label,\"alertPreFix\":_this2.props.intl.formatMessage({id:\"IDS_VALID\"}),\"validateFunction\":validateEmail,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}else{mandatoryFields.push({\"mandatory\":true,\"idsName\":componentrow.label,\"dataField\":componentrow.label,\"mandatoryLabel\":componentrow.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":componentrow.inputtype===\"combo\"?\"selectbox\":\"textbox\"});}}});}else{component.inputtype===\"combo\"?data.push(component):withoutCombocomponent.push(component);if(component.mandatory===true){if(component.inputtype===\"email\"){mandatoryFields.push({\"mandatory\":true,\"idsName\":component.label,\"dataField\":component.label,\"alertPreFix\":_this2.props.intl.formatMessage({id:\"IDS_VALID\"}),\"validateFunction\":validateEmail,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"});}else{mandatoryFields.push({\"mandatory\":true,\"idsName\":component.label,\"dataField\":component.label,\"mandatoryLabel\":component.inputtype===\"combo\"?\"IDS_SELECT\":\"IDS_ENTER\",\"controlType\":component.inputtype===\"combo\"?\"selectbox\":\"textbox\"});}}}});});});var comboComponents=data;var childColumnList={};data.map(function(columnList){var val=_this2.comboChild(data,columnList,childColumnList,true);data=val.data;childColumnList=val.childColumnList;});var masterData=this.props.Login.masterData.DynamicMasterData?sortData(this.props.Login.masterData.DynamicMasterData,\"descending\",\"ndynamicmastercode\"):[];this.setState({withoutCombocomponent:withoutCombocomponent,comboComponents:comboComponents,childColumnList:childColumnList,designData:data,mandatoryFields:mandatoryFields,userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData.DynamicMasterData||[],dataResult:process(masterData||[],this.state.dataState)});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}var _masterData=this.props.Login.masterData.DynamicMasterData?sortData(this.props.Login.masterData.DynamicMasterData,\"descending\",\"ndynamicmastercode\"):[];this.setState({data:this.props.Login.masterData.DynamicMasterData||[],selectedRecord:this.props.Login.selectedRecord,dataResult:process(_masterData||[],dataState),dataState:dataState//, comboComponents, withoutCombocomponent\n});}}if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}return null;}}]);return DynamicMaster;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,updateStore:updateStore,validateEsignCredential:validateEsignCredential,getChildValues:getChildValues,getEditDynamicMasterCombo:getEditDynamicMasterCombo,//fetchRecord,\ngetDynamicMasterCombo:getDynamicMasterCombo})(injectIntl(DynamicMaster));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/dynamicmaster/DynamicMaster.jsx"],"names":["React","connect","injectIntl","Row","Col","toast","process","DynamicDataGrid","SlideOutModal","Esign","callService","crudMaster","updateStore","validateEsignCredential","getEditDynamicMasterCombo","getDynamicMasterCombo","getChildValues","DEFAULT_RETURN","showEsign","getControlMap","deleteAttachmentDropZone","getSameRecordFromTwoArrays","onDropAttachFileList","convertDateTimetoString","validateEmail","formatDate","sortData","ListWrapper","DynamicSlideout","transactionStatus","mapStateToProps","state","Login","DynamicMaster","props","dataStateChange","event","setState","dataResult","data","dataState","closeModal","loadEsign","openModal","selectedRecord","operation","updateInfo","typeName","selectedId","addId","inputParam","controlMap","has","get","ncontrolcode","masterData","userInfo","designData","childColumnList","comboComponents","withoutCombocomponent","Map","displayName","fetchRecord","fetchRecordParam","onNumericBlur","value","control","label","max","parseFloat","precision","parseInt","min","comboChild","columnList","slice","retunObj","hasOwnProperty","undefined","childList","child","map","childData","index","findIndex","x","push","length","y","val","onComboChange","comboData","customName","comboName","valuemember","nquerybuildertablecode","source","childComboList","parentList","inputParem","primarykeyField","item","onNumericInputChange","name","handleDateChange","dateValue","dateName","onDrop","type","oldVlaue","design","columns","children","ReactInputFields","JSON","parse","fields","designDataIndex","firstIndex","secondIndex","splice","from","to","id","onDropFile","attachedFiles","fieldName","maxSize","actionType","deleteAttachment","file","onInputOnChange","target","checked","YES","NO","test","deleteRecord","deleteParam","classUrl","methodUrl","inputData","ndynamicmastercode","userRoleControlRights","nformcode","ncontrolCode","screenData","screenName","reloadData","onSaveClick","saveType","formRef","DynamicMasterDesign","screendesign","masterdateconstraints","masterdatefields","mastercombinationunique","ndesigntemplatemappingcode","jsondata","jsonuidata","dateList","defaulttimezone","slideoutdesign","row","column","component","componentrow","inputtype","pkey","mandatory","loadcurrentdate","Date","timezone","stringify","esignNeeded","validateEsign","sreason","nreasoncode","spredefinedreason","password","createRef","extractedColumnList","detailedColumnList","skip","take","settings","masterStatus","error","primaryKeyField","editId","editParam","intl","formatMessage","mandatoryFields","handleChange","timeZoneList","defaultTimeZone","previousProps","Object","values","griditem","slanguagetypecode","gridmoreitem","Layout","DynamicMasterData","warn","Component"],"mappings":"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","sourcesContent":["import React  from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col} from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport DynamicDataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../pages/audittrail/Esign';\r\nimport { callService, crudMaster, updateStore, validateEsignCredential, \r\n    getEditDynamicMasterCombo,\r\n    //fetchRecord,\r\n    getDynamicMasterCombo, getChildValues } from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap, deleteAttachmentDropZone, \r\n    getSameRecordFromTwoArrays, onDropAttachFileList,convertDateTimetoString,\r\n    validateEmail, formatDate, sortData} from '../../components/CommonScript';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DynamicSlideout from '../dynamicpreregdesign/DynamicSlideout.jsx';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass DynamicMaster extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n        this.detailedColumnList= [];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            comboComponents: [],\r\n            withoutCombocomponent: []\r\n        };\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data ||[], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId:null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }         \r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        \r\n        let primaryKeyField = \"ndynamicmastercode\";\r\n\r\n        const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\")\r\n               && this.state.controlMap.get(\"Edit\").ncontrolcode;\r\n    \r\n        const editParam = {screenName:this.props.Login.inputParam && this.props.Login.inputParam.displayName \r\n                            && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), operation:\"update\",  primaryKeyField, \r\n            inputParam:this.props.Login.inputParam,   userInfo:this.props.Login.userInfo,  ncontrolCode:editId};\r\n\r\n        const deleteParam ={operation:\"delete\"};\r\n\r\n        // const mandatoryFields=[];\r\n        // this.extractedColumnList.forEach(item=>item.mandatory === true ? \r\n        //     mandatoryFields.push(item) :\"\"\r\n        // );   \r\n        \r\n        return (<>\r\n                <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">                           \r\n                            {this.state.data ?\r\n                                <DynamicDataGrid\r\n                                    primaryKeyField={primaryKeyField}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    detailedFieldList={this.detailedColumnList}\r\n                                    expandField={ this.detailedColumnList.length > 0 ? \"expanded\":false}\r\n                                    methodUrl={\"\"}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    fetchRecord={this.fetchRecord}\r\n                                    editParam={editParam}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    deleteParam={deleteParam}\r\n                                    reloadData={this.reloadData}\r\n                                    addRecord = {this.openModal}\r\n                                    pageable={true}\r\n                                    scrollable={'scrollable'}\r\n                                    gridHeight = {'600px'}\r\n                                    isActionRequired={true}\r\n                                    isToolBarRequired={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row>\r\n \r\n                {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n                {this.props.Login.openModal ? \r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation ? this.props.Login.operation : \"create\"}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.state.mandatoryFields || []}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                                <DynamicSlideout\r\n                                    selectedRecord={this.props.Login.selectedRecord}\r\n                                    templateData={this.props.Login.masterData.DynamicMasterDesign &&\r\n                                        this.props.Login.masterData.DynamicMasterDesign.slideoutdesign}\r\n                                    handleChange={this.handleChange}\r\n                                    handleDateChange={this.handleDateChange}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onNumericInputChange={this.onNumericInputChange}\r\n                                    comboData={this.props.Login.comboData}\r\n                                    onComboChange={this.onComboChange}\r\n                                    onDropFile={this.onDropFile}\r\n                                    deleteAttachment={this.deleteAttachment}\r\n                                    onNumericBlur={this.onNumericBlur}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    timeZoneList={this.props.Login.timeZoneList}\r\n                                    defaultTimeZone={this.props.Login.defaultTimeZone}\r\n                                    Login={this.props.Login}\r\n                                />\r\n                            }\r\n                          \r\n                    /> :\"\"}\r\n            </>\r\n        );\r\n    }\r\n\r\n    openModal = () => {       \r\n     \r\n        const addId =  this.props.Login.inputParam && this.state.controlMap.has(\"Add\")\r\n                             && this.state.controlMap.get(\"Add\").ncontrolcode;\r\n     \r\n        this.props.getDynamicMasterCombo(this.props.Login.masterData, this.props.Login.userInfo, addId,\r\n                                            this.state.designData, this.state.selectedRecord, this.state.childColumnList, \r\n                                            this.state.comboComponents, this.state.withoutCombocomponent, \r\n                                            false, true, new Map(), true, \"create\", this.props.Login.displayName);\r\n    }\r\n\r\n    fetchRecord = (fetchRecordParam) => {     \r\n\r\n            this.props.getEditDynamicMasterCombo(fetchRecordParam,\r\n                    this.state.designData, this.state.selectedRecord, this.state.childColumnList,\r\n                    this.state.comboComponents, this.state.withoutCombocomponent) \r\n\r\n    }\r\n\r\n    \r\n    onNumericBlur= (value, control) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        if (selectedRecord[control.label]) {\r\n            if (control.max) {\r\n                if (!(selectedRecord[control.label] < parseFloat(control.max))) {\r\n                    selectedRecord[control.label] = control.precision ? parseFloat(control.max) : parseInt(control.max)\r\n                }\r\n            }\r\n            if (control.min) {\r\n                if (!(selectedRecord[control.label] > parseFloat(control.min))) {\r\n                    selectedRecord[control.label] = control.precision ? parseFloat(control.min) : parseInt(control.min)\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    comboChild = (data, columnList, childColumnList, slice) => {\r\n        let retunObj = {}\r\n        // if (data.findIndex(x => x.label === columnList.label) !== -1) {\r\n        if (!childColumnList.hasOwnProperty(columnList.label)) {\r\n            if (childColumnList[columnList.label] === undefined) {\r\n                if (columnList.hasOwnProperty(\"child\")) {\r\n                    let childList = []\r\n                    columnList.child.map(childData => {\r\n                        const index = data.findIndex(x => x.label === childData.label)\r\n                        if (index !== -1) {\r\n                            childList.push(data[index])\r\n                            if (slice) {\r\n                                data = [...data.slice(0, index), ...data.slice(index + 1)]\r\n                            }\r\n                        }\r\n                    })\r\n                    childColumnList[columnList.label] = childList;\r\n                    if (childList.length > 0) {\r\n                        childList.map(y => {\r\n                            if (y.hasOwnProperty(\"child\")) {\r\n                                const val = this.comboChild(data, y, childColumnList, slice)\r\n                                retunObj[\"data\"] = val.data;\r\n                                retunObj[\"childColumnList\"] = val.childColumnList;\r\n                            } else {\r\n                                retunObj[\"data\"] = data;\r\n                                retunObj[\"childColumnList\"] = childColumnList;\r\n                            }\r\n                        })\r\n                    } else {\r\n                        retunObj[\"data\"] = data;\r\n                        retunObj[\"childColumnList\"] = childColumnList;\r\n                    }\r\n                } else {\r\n                    retunObj[\"data\"] = data;\r\n                    retunObj[\"childColumnList\"] = childColumnList;\r\n                }\r\n            } else {\r\n                retunObj[\"data\"] = data;\r\n                retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n            }\r\n        } else {\r\n            retunObj[\"data\"] = data;\r\n            retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n        }\r\n        return retunObj;\r\n    }\r\n\r\n    onComboChange = (comboData, control, customName) => {\r\n\r\n        let comboName = customName || control.label;\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData) {\r\n            comboData[\"item\"] = {...comboData[\"item\"], \"pkey\":control.valuemember, \"nquerybuildertablecode\":control.nquerybuildertablecode,\r\n                                \"source\": control.source};\r\n            selectedRecord[comboName] = comboData;\r\n        } else {\r\n            selectedRecord[comboName] = [];\r\n        }\r\n        if (control.child && control.child.length > 0) {\r\n            const childComboList = getSameRecordFromTwoArrays(this.state.comboComponents, control.child, \"label\")\r\n            let childColumnList = {};\r\n            childComboList.map(columnList => {\r\n                const val = this.comboChild(this.state.comboComponents, columnList, childColumnList, false);\r\n                childColumnList = val.childColumnList\r\n            })\r\n\r\n            const parentList = getSameRecordFromTwoArrays(this.state.withoutCombocomponent, control.child, \"label\")\r\n\r\n            const inputParem = {\r\n                child: control.child,\r\n                source: control.source,\r\n                primarykeyField: control.valuemember,\r\n                value: comboData.value,\r\n                item: comboData.item\r\n            }\r\n            this.props.getChildValues(inputParem,\r\n                this.props.Login.userInfo, selectedRecord, this.props.Login.comboData,\r\n                childComboList, childColumnList, this.state.withoutCombocomponent, [...childComboList, ...parentList])\r\n        } else {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { selectedRecord }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n    \r\n    onNumericInputChange = (value, name) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    handleDateChange = (dateValue, dateName) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onDrop = (value, type, oldVlaue) => {\r\n        const design = this.state.design;\r\n        let columns = design[0].children;\r\n        let designData = this.props.Login.ReactInputFields;\r\n        value = JSON.parse(value.fields);\r\n        value = { ...value, type: \"component\" }\r\n        let designDataIndex = designData.findIndex(item => item.label === value.label);\r\n        let firstIndex = columns[0] ? columns[0].children.findIndex(item => item.label === value.label) : -1;\r\n        let secondIndex = columns[1] ? columns[1].children.findIndex(item => item.label === value.label) : -1;\r\n\r\n        if (designDataIndex >= 0)\r\n            designData.splice(designDataIndex, 1);\r\n        if (firstIndex >= 0) {\r\n            if (type !== 1) {\r\n                columns[0].children.splice(firstIndex, 1);\r\n                // columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[0].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[0].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[0].children.splice(to, 0, columns[0].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n\r\n        } else if (type === 1) {\r\n            if (columns[0]) {\r\n                columns[0].children.push(value);\r\n            } else {\r\n                columns[0] = {\r\n                    id: \"1\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n\r\n                columns[0].children.push(value);\r\n            }\r\n        }\r\n        if (secondIndex >= 0) {\r\n            if (type !== 2) {\r\n                columns[1].splice(secondIndex, 1);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[1].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[1].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[1].children.splice(to, 0, columns[1].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n        } else if (type === 2) {\r\n            if (columns[1]) {\r\n                columns[1].children.push(value);\r\n            } else {\r\n                columns[1] = {\r\n                    id: \"2\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n                columns[1].children.push(value);\r\n            }\r\n        }\r\n\r\n        // design.push(columns)\r\n        this.setState({ designData, design })\r\n    }\r\n\r\n    onDropFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {       \r\n   \r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n              \r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.extractedColumnList = [];    \r\n                this.detailedColumnList = [];            \r\n                              \r\n                if (this.props.Login.masterData && this.props.Login.masterData.DynamicMasterDesign &&\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign)\r\n                {\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(row => {\r\n                       // console.log(\"data:\", row);\r\n                        this.extractedColumnList.push({\"idsName\":row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\":row[\"2\"]}) ;                     \r\n                    })\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(row => {\r\n                        this.detailedColumnList.push({\"idsName\":row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\":row[\"2\"]}) ;                     \r\n                    })\r\n                }\r\n\r\n                let data = [];\r\n                const withoutCombocomponent = [];\r\n                const mandatoryFields = [];\r\n                const Layout = (this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign ) || [];\r\n                Layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"children\") ){\r\n                                component.children.map(componentrow => {\r\n                                    if (componentrow.inputtype === \"combo\") {\r\n                                        data.push(componentrow)\r\n                                    } else {\r\n                                        withoutCombocomponent.push(componentrow)\r\n                                    }\r\n                                    if (componentrow.mandatory === true){\r\n                                        if (componentrow.inputtype === \"email\") {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true, \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                                \"validateFunction\": validateEmail,\r\n                                                \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                                \"controlType\": \"textbox\"\r\n                                            })\r\n                                        } \r\n                                        else {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true,\r\n                                                \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"mandatoryLabel\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                                \"controlType\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"selectbox\" : \"textbox\"\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                            else\r\n                            {\r\n                                component.inputtype === \"combo\" ? \r\n                                    data.push(component) \r\n                                : withoutCombocomponent.push(component)\r\n\r\n                                if (component.mandatory === true){\r\n                                    if (component.inputtype === \"email\") {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true, \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                            \"validateFunction\": validateEmail,\r\n                                            \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                            \"controlType\": \"textbox\"\r\n                                        })\r\n                                    } \r\n                                    else {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true,\r\n                                            \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"mandatoryLabel\": component.inputtype === \"combo\" ?\r\n                                                \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                            \"controlType\": component.inputtype === \"combo\" ?\r\n                                                \"selectbox\" : \"textbox\"\r\n                                        })\r\n                                    }\r\n                                }\r\n                            }   \r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data;\r\n                let childColumnList = {};\r\n                data.map(columnList => {\r\n                    const val = this.comboChild(data, columnList, childColumnList, true);\r\n                    data = val.data;\r\n                    childColumnList = val.childColumnList\r\n                })\r\n\r\n                const masterData =  this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\",\"ndynamicmastercode\") : [];\r\n\r\n               this.setState({ withoutCombocomponent, comboComponents, childColumnList,designData : data,mandatoryFields,\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData.DynamicMasterData || [],\r\n                    dataResult: process(masterData || [], this.state.dataState),\r\n                });\r\n            }\r\n            else {        \r\n                let {dataState}=this.state;\r\n                if(this.props.Login.dataState === undefined){\r\n                    dataState={skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                }  \r\n            \r\n                const masterData =  this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\",\"ndynamicmastercode\") : [];\r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData.DynamicMasterData || [], selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(masterData ||[],dataState),\r\n                    dataState//, comboComponents, withoutCombocomponent\r\n                });               \r\n            }  \r\n        }     \r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });          \r\n        }        \r\n    }\r\n\r\n    onInputOnChange = (event, value) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n      \r\n        if (event.target.type === 'toggle') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        } else if (event.target.type === 'numeric') {\r\n            if (/\\D/.test(event.target.value))\r\n                selectedRecord[event.target.name] = event.target.value;\r\n        } else if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = value;\r\n        } else if (event.target.type === 'radio') {\r\n            selectedRecord[event.target.name] = value\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    //deleteRecord = (selectedRecord, operation, ncontrolCode) => {\r\n    deleteRecord = (deleteParam) =>{\r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: {\r\n                [\"dynamicmaster\"]: {\"ndynamicmastercode\":deleteParam.selectedRecord.ndynamicmastercode},//.dataItem,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation:\"delete\",\r\n            dataState:this.state.dataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation:\"delete\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            userInfo: this.props.Login.userInfo,\r\n            displayName: this.props.Login.inputParam.displayName\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        //add / edit  \r\n\r\n        let inputData = [];\r\n        let dataState =undefined;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"masterdateconstraints\"] =  this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;\r\n        inputData[\"masterdatefields\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;\r\n        inputData[\"mastercombinationunique\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.mastercombinationunique;\r\n        let selectedId = null;\r\n        let operation = \"\";\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.Login.operation === \"update\") {    // edit\r\n            dataState=this.state.dataState\r\n            inputData[\"dynamicmaster\"] = {ndynamicmastercode:this.state.selectedRecord[\"ndynamicmastercode\"]};//this.state.selectedRecord;\r\n            inputData[\"dynamicmaster\"][\"jsondata\"] = {}; \r\n            inputData[\"dynamicmaster\"][\"jsonuidata\"] = {}; \r\n            selectedId = this.props.Login.selectedId; \r\n            operation = \"update\";\r\n        }\r\n        else {\r\n            //add                          \r\n            inputData[\"dynamicmaster\"] = { //\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \r\n                                            nformcode:this.props.Login.userInfo.nformcode, \r\n                                            ndesigntemplatemappingcode:this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode, \r\n                                            jsondata:{}, jsonuidata:{} };\r\n\r\n           operation = \"create\";\r\n           \r\n        }\r\n\r\n        const dateList = [];\r\n        const defaulttimezone = this.props.Login.defaulttimezone;\r\n        const userInfo = this.props.Login.userInfo;\r\n\r\n        this.props.Login.masterData.DynamicMasterDesign &&\r\n            this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(row => {\r\n                row.children.map(column => {\r\n                    column.children.map(component => {\r\n                        if (component.hasOwnProperty(\"children\")) {\r\n                          \r\n                            component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\") {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        { value: selectedRecord[componentrow.label].value,\r\n                                          label: selectedRecord[componentrow.label].label,\r\n                                          pkey: selectedRecord[componentrow.label].item.pkey,\r\n                                          nquerybuildertablecode: selectedRecord[componentrow.label].item.nquerybuildertablecode,\r\n                                          source: selectedRecord[componentrow.label].item.source  } : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = selectedRecord[componentrow.label] ? selectedRecord[componentrow.label].label : \"\"\r\n                                    \r\n                                }\r\n                                else if (componentrow.inputtype === \"date\") {\r\n                                    if (componentrow.mandatory) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = formatDate(selectedRecord[componentrow.label], false)\r\n                                        \r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        //inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    } \r\n                                    else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = componentrow.loadcurrentdate ?\r\n                                             formatDate(selectedRecord[componentrow.label] || new Date(), false):\r\n                                            selectedRecord[componentrow.label] ? formatDate(selectedRecord[componentrow.label], false)\r\n                                            : \"\";\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] =  inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];\r\n                                        //convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    }\r\n                                    if (componentrow.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\r\n                                            { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\r\n                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                            inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${componentrow.label}`] =  inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`]\r\n                                    }\r\n                                    dateList.push(componentrow.label)\r\n                                }\r\n\r\n                                else {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        selectedRecord[componentrow.label] : \"\"\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        // inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n\r\n                                }\r\n                                return inputData[\"dynamicmaster\"];\r\n                            })\r\n                         }\r\n                        else {\r\n                            if (component.inputtype === \"combo\") {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    { value: selectedRecord[component.label].value, \r\n                                      label: selectedRecord[component.label].label,\r\n                                      pkey: selectedRecord[component.label].item.pkey,\r\n                                      nquerybuildertablecode: selectedRecord[component.label].item.nquerybuildertablecode,\r\n                                      source: selectedRecord[component.label].item.source  } : -1\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;\r\n                                    //selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\r\n                            }\r\n                            else if (component.inputtype === \"date\") {\r\n                                if (component.mandatory) {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = formatDate(selectedRecord[component.label] , false);\r\n                                        // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                        // selectedRecord[component.label] : new Date(), userInfo);\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] =  inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                    //convertDateTimetoString(selectedRecord[component.label], userInfo);\r\n                                       \r\n                                } else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = component.loadcurrentdate ?\r\n                                                                //convertDateTimetoString(selectedRecord[component.label] ?                                      \r\n                                                                //    selectedRecord[component.label] : new Date(), userInfo) :\r\n                                                                formatDate(selectedRecord[component.label] || new Date(), false) :\r\n                                                                selectedRecord[component.label] ? \r\n                                                            // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                                                //   selectedRecord[component.label] : new Date(), userInfo) : \"\";\r\n                                                                    formatDate(selectedRecord[component.label] , false) :\"\";\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                        //convertDateTimetoString(selectedRecord[component.label], userInfo)\r\n                                      \r\n                                }\r\n                                if (component.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`] = selectedRecord[`tz${component.label}`] ?\r\n                                                            { value: selectedRecord[`tz${component.label}`].value, label: selectedRecord[`tz${component.label}`].label } :\r\n                                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${component.label}`] =  inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`]\r\n                                }\r\n                                dateList.push(component.label)\r\n                            }\r\n                            else {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    selectedRecord[component.label] : \"\"\r\n\r\n                                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                            }\r\n                        }\r\n                        return inputData[\"dynamicmaster\"];\r\n                    }\r\n                    )\r\n                    return inputData[\"dynamicmaster\"];\r\n                })\r\n                return inputData[\"dynamicmaster\"];\r\n            })\r\n\r\n\r\n        inputData[\"dynamicmaster\"][\"jsonstring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);\r\n        inputData[\"dynamicmaster\"][\"jsonuistring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);\r\n        inputData[\"masterdatelist\"] = dateList;       \r\n        \r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: inputData, operation:operation,\r\n            saveType, formRef,  selectedId,dataState\r\n\r\n        }\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation: \"create\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n}\r\nexport default connect(mapStateToProps, { callService, crudMaster, updateStore, validateEsignCredential, \r\n    getChildValues, getEditDynamicMasterCombo,//fetchRecord,\r\n    getDynamicMasterCombo})(injectIntl(DynamicMaster));\r\n"]},"metadata":{},"sourceType":"module"}