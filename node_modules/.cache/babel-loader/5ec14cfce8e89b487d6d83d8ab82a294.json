{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{Route,Switch}from\"react-router-dom\";import IdleTimer from'react-idle-timer';import IdleTimeOutModal from'../confirm-alert/IdleTimeOutModal';import Sidebar from'../sidebar/sidebar.component';import Header from'../header/header.component';import routes from'../../routes';import{navPage,updateStore,callService}from'../../actions';import rsapi from'../../rsapi';import{toast}from'react-toastify';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import{IDLE_LOGOUT}from'../../actions/LoginTypes';import{injectIntl}from'react-intl';// import { updateStore } from '../../actions/LoginAction';\nimport ScrollToTop from'../../actions/ScrollToTop';import SearchBar from'../searchbarcomponent/SearchBar';import{formatInputDate}from'../CommonScript';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var Layout=/*#__PURE__*/function(_React$Component){_inherits(Layout,_React$Component);var _super=_createSuper(Layout);function Layout(props){var _this;_classCallCheck(this,Layout);_this=_super.call(this,props);_this._onAction=function(e){};_this._onActive=function(e){};_this._onIdle=function(e){if(_this.state.showIdleModal!==true){var uRL=\"\";var inputData=[];uRL='login/insertAuditAction';inputData={userinfo:_this.props.Login.userInfo,// scomments: `UserName:${this.props.Login.userInfo.susername}, \n// LoginID:${this.props.Login.userInfo.sloginid}`,\nscomments:\"User Name:\".concat(_this.props.Login.userInfo.susername,\"; User Role:\").concat(_this.props.Login.userInfo.suserrolename,\"; Login ID:\").concat(_this.props.Login.userInfo.sloginid),sauditaction:\"IDS_IDLETIMELOCK\"};rsapi.post(uRL,inputData).then(function(response){_this.setState({showIdleModal:true,sessionExpired:Date.now()+60000});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}};_this.handleLogin=function(event){if(event){if(_this.password.current!==null&&_this.password.current.elements[0].value===\"\"){toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERPASSWORD\"}));return;}else{var uRL=\"\";var inputData=[];uRL='login/idleTimeAuditAction';inputData={userinfo:_this.props.Login.userInfo,//password: this.state.password,\npassword:_this.password.current.elements[0].value,flag:true,nFlag:1};rsapi.post(uRL,inputData).then(function(response){if(response.data['PassFlag']===_this.props.intl.formatMessage({id:\"IDS_SUCCESS\"})){_this.password.current.elements[0].value=\"\";_this.setState({showIdleModal:false,openModal:false});}else{toast.info(response.data['PassFlag']);}}).catch(function(error){if(error.response.status===500){toast.warn(error.message);}else{toast.warn(error.response.data);}});}}};_this.enterKeyLogin=function(event){if(event.keyCode===13){_this.handleLogin(event);event.preventDefault();}};_this.handleLogout=function(event){if(event){var uRL=\"\";var inputData=[];uRL='login/idleTimeAuditAction';inputData={userinfo:_this.props.Login.userInfo,//password: this.state.password,\n//password: this.password.current.elements[0].value,\nflag:false,nFlag:2};rsapi.post(uRL,inputData).then(function(response){var updateInfo={typeName:IDLE_LOGOUT,data:{masterData:[],inputParam:undefined,idleneed:false}};_this.props.updateStore(updateInfo);//this.password.current.elements[0].value = \"\"\n//this.setState({ showIdleModal: false })\n_this.props.navPage(\"login\");}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}};_this.renderer=function(event){// event.preventDefault();\nvar minutes=event.minutes,seconds=event.seconds,completed=event.completed;if(completed){// Render a completed state\nvar uRL=\"\";var inputData=[];uRL='login/insertAuditAction';inputData={userinfo:_this.props.Login.userInfo,// scomments: `UserName:${this.props.Login.userInfo.susername}, \n// LoginID:${this.props.Login.userInfo.sloginid}`,\nscomments:\"User Name:\".concat(_this.props.Login.userInfo.susername,\"; User Role:\").concat(_this.props.Login.userInfo.suserrolename,\"; Login ID:\").concat(_this.props.Login.userInfo.sloginid),sauditaction:\"IDS_SESSIONEXPIRED\",nFlag:2};rsapi.post(uRL,inputData).then(function(response){var updateInfo={typeName:IDLE_LOGOUT,data:{masterData:[],inputParam:undefined,idleneed:false}};//this.props.navPage(\"login\");\n_this.props.updateStore(updateInfo);}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{// Render a countdown\nconsole.log(\"minutes\"+minutes+\"seconds\"+seconds);return/*#__PURE__*/React.createElement(\"span\",{style:{'margin-left':'0.3rem',color:'red'}},minutes,\" minutes \",seconds,\" seconds..!\");}return null;};_this.onInputChangeSearch=function(event){var defaultSearch=[];_this.props.Login.menuDesign.map(function(menuItem,index){menuItem.lstmodule&&menuItem.lstmodule.map(function(moduleItem,moduleIndex){moduleItem.lstforms&&moduleItem.lstforms.map(function(formItem,formIndex){//   console.log(formItem.sdisplayname.toLowerCase(),event.target.value,formItem.sdisplayname.toLowerCase().includes(event.target.value))\nif(formItem.sdisplayname.toLowerCase().includes(event.target.value.toLowerCase())){defaultSearch.push(_objectSpread(_objectSpread({},formItem),{},{smodulename:moduleItem.sdisplayname}));}});});});_this.setState({defaultSearch:defaultSearch,searchText:event.target.value.toLowerCase(),menuClick:false});};_this.onClickBackToMenu=function(e){e.preventDefault();e.stopPropagation();_this.setState({defaultSearch:[],menuClick:false,nmenucode:undefined});};_this.onClickSearchMenu=function(menu,inputRef){var defaultSearch=[];_this.props.Login.menuDesign.map(function(menuItem,index){if(menu.nmenucode===menuItem.nmenucode){menuItem.lstmodule&&menuItem.lstmodule.map(function(moduleItem,moduleIndex){moduleItem.lstforms&&moduleItem.lstforms.map(function(formItem,formIndex){//   console.log(formItem.sdisplayname.toLowerCase(),event.target.value,formItem.sdisplayname.toLowerCase().includes(event.target.value))\n//  if (formItem.sdisplayname.toLowerCase().includes(event.target.value.toLowerCase())) {\ndefaultSearch.push(_objectSpread(_objectSpread({},formItem),{},{smodulename:moduleItem.sdisplayname}));//   }\n});});}});_this.setState({defaultSearch:defaultSearch,menuClick:true,nmenucode:menu.nmenucode});};_this.getDetail=function(classUrl,methodUrl,formCode,displayName,moduleCode,formname,nmenucode,smodulename){if(_this.props.Login.userInfo.nformcode!==formCode){var userInfo=_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{\"nformcode\":formCode,\"nmodulecode\":moduleCode,\"sformname\":formname.sdisplayname,smodulename:smodulename});var inputParam={inputData:{\"userinfo\":userInfo,currentdate:formatInputDate(new Date(),true)},classUrl:classUrl,methodUrl:methodUrl,displayName:displayName,key:\"MenuId_\"+nmenucode};_this.props.callService(inputParam);}};_this.onClickButton=function(forms){var history=_this.props.history;history.push('/'+forms.sclassname);if(_this.inputRef.current)_this.inputRef.current.value=\"\";_this.setState({defaultSearch:[],searchText:\"\",menuClick:false,showSearch:false,fullView:false});_this.getDetail(forms.sclassname.toLowerCase(),forms.surl,forms.nformcode,forms.sdisplayname,forms.nmodulecode,forms,forms.nmenucode,forms.smodulename);};_this.menuHide=function(){_this.setState({fullView:false});};_this.layOutGetHome=function(updateInfo,form){var history=_this.props.history;history.push('/home');if(_this.inputRef.current)_this.inputRef.current.value=\"\";_this.setState({defaultSearch:[],searchText:\"\",menuClick:false,fullView:true});_this.props.updateStore(updateInfo);//  this.props.layOutGetHome(updateInfo)\n};_this.layOutGetHomeCancel=function(){var history=_this.props.history;var _this$state=_this.state,menuClick=_this$state.menuClick,defaultSearch=_this$state.defaultSearch,searchText=_this$state.searchText;if(_this.inputRef.current&&_this.inputRef.current.value!==\"\"){if(_this.props.history.location.pathname==='/home'){history.push('/home');}_this.inputRef.current.value=\"\";menuClick=false;defaultSearch=[];searchText=\"\";}else{if(menuClick){menuClick=true;}if(_this.inputRef.current){_this.inputRef.current.value=\"\";}}_this.setState({defaultSearch:defaultSearch,searchText:searchText,showSearch:false,menuClick:menuClick});//this.props.updateStore(updateInfo);\n//  this.props.layOutGetHome(updateInfo)\n};_this.menuFullview=function(){var fullView=_this.state.fullView;_this.setState({fullView:!_this.state.fullView});};_this.toggleSearch=function(){_this.setState({showSearch:!_this.state.showSearch});};_this.state={timeout:_this.props.Login.idleTimeout,showIdleModal:false,userLoggedIn:false,isTimedOut:false,password:\"\",sessionExpired:_this.props.Login.sessionExpired,defaultSearch:[],searchText:'',menuClick:false,showSearch:false,fullView:true};_this.inputRef=React.createRef();_this.idleTimer=null;//this.selectInputOnChange = this.selectInputOnChange.bind(this)\n_this.password=React.createRef();return _this;}_createClass(Layout,[{key:\"render\",value:// selectInputOnChange = (event) => {\n//     let password = \"\"\n//     if (event !== null) {\n//         password = event.target.value\n//     }\n//     this.setState({ password: password })\n// }\nfunction render(){var _this2=this;this.confirmMessage=new ConfirmMessage();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"app-wrapper\"},/*#__PURE__*/React.createElement(IdleTimer,{ref:function ref(_ref){_this2.idleTimer=_ref;},element:document,onActive:this._onActive,onAction:this._onAction,onIdle:this._onIdle,debounce:250,timeout:this.state.timeout}),this.props.Login.idleneed?/*#__PURE__*/React.createElement(IdleTimeOutModal,{showIdleModal:this.state.showIdleModal,handleLogin:this.handleLogin,handleLogout:this.handleLogout,UserInfo:this.props.Login.userInfo,passwordref:this.password//selectInputOnChange={this.selectInputOnChange}\n,idealTime:this.props.Login.idleTimeout,Login:this.props.Login,sessionExpired:this.state.sessionExpired,enterKeyLogin:this.enterKeyLogin,renderer:this.renderer}):\"\",/*#__PURE__*/React.createElement(Sidebar,{history:this.props,layOutGetHome:this.layOutGetHome,inputRef:this.inputRef,fullView:this.state.fullView,menuHide:this.menuHide,menuFullview:this.menuFullview}),/*#__PURE__*/React.createElement(\"div\",{id:\"content-wrapper\",className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(\"div\",{id:\"content\"},/*#__PURE__*/React.createElement(Header,{history:this.props,layOutGetHomeCancel:this.layOutGetHomeCancel,fullView:this.state.fullView,visible:this.state.visible,menuFullview:this.menuFullview,toggleSearch:this.toggleSearch,showSearch:this.state.showSearch,searchBar:/*#__PURE__*/React.createElement(SearchBar,{options:this.state.defaultSearch,optionDisplayMember:'sdisplayname',onClickButton:this.onClickButton,onInputChange:this.onInputChangeSearch,pathname:this.props.history.location.pathname,inputRef:this.inputRef})}),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid px-0\"},/*#__PURE__*/React.createElement(ScrollToTop,null,/*#__PURE__*/React.createElement(Switch,null,routes.map(function(route,index){return route.component?/*#__PURE__*/React.createElement(Route,{key:index,path:route.path,exact:route.exact,name:route.name,render:function render(props){return/*#__PURE__*/React.createElement(route.component,Object.assign({onClickSearchMenu:_this2.onClickSearchMenu,onClickSearchForm:_this2.onClickButton,menuClick:_this2.state.menuClick,onClickBackToMenu:_this2.onClickBackToMenu,searchText:_this2.state.searchText,defaultSearch:_this2.state.defaultSearch},props));}}):null;}))))))));}}]);return Layout;}(React.Component);export default connect(mapStateToProps,{navPage:navPage,updateStore:updateStore,callService:callService})(injectIntl(Layout));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/layout/layout.component.jsx"],"names":["React","connect","Route","Switch","IdleTimer","IdleTimeOutModal","Sidebar","Header","routes","navPage","updateStore","callService","rsapi","toast","ConfirmMessage","IDLE_LOGOUT","injectIntl","ScrollToTop","SearchBar","formatInputDate","mapStateToProps","state","Login","Layout","props","_onAction","e","_onActive","_onIdle","showIdleModal","uRL","inputData","userinfo","userInfo","scomments","susername","suserrolename","sloginid","sauditaction","post","then","response","setState","sessionExpired","Date","now","catch","error","status","message","warn","data","handleLogin","event","password","current","elements","value","info","intl","formatMessage","id","flag","nFlag","openModal","enterKeyLogin","keyCode","preventDefault","handleLogout","updateInfo","typeName","masterData","inputParam","undefined","idleneed","renderer","minutes","seconds","completed","console","log","color","onInputChangeSearch","defaultSearch","menuDesign","map","menuItem","index","lstmodule","moduleItem","moduleIndex","lstforms","formItem","formIndex","sdisplayname","toLowerCase","includes","target","push","smodulename","searchText","menuClick","onClickBackToMenu","stopPropagation","nmenucode","onClickSearchMenu","menu","inputRef","getDetail","classUrl","methodUrl","formCode","displayName","moduleCode","formname","nformcode","currentdate","key","onClickButton","forms","history","sclassname","showSearch","fullView","surl","nmodulecode","menuHide","layOutGetHome","form","layOutGetHomeCancel","location","pathname","menuFullview","toggleSearch","timeout","idleTimeout","userLoggedIn","isTimedOut","createRef","idleTimer","confirmMessage","ref","document","visible","route","component","path","exact","name","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport IdleTimer from 'react-idle-timer';\r\nimport PropTypes from 'prop-types';\r\nimport IdleTimeOutModal from '../confirm-alert/IdleTimeOutModal';\r\nimport Sidebar from '../sidebar/sidebar.component';\r\nimport Header from '../header/header.component';\r\nimport routes from '../../routes';\r\nimport { navPage, updateStore, callService } from '../../actions'\r\nimport rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport { IDLE_LOGOUT } from '../../actions/LoginTypes';\r\nimport { injectIntl } from 'react-intl';\r\n// import { updateStore } from '../../actions/LoginAction';\r\nimport ScrollToTop from '../../actions/ScrollToTop';\r\nimport SearchBar from '../searchbarcomponent/SearchBar';\r\nimport { formatInputDate } from '../CommonScript';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        Login: state.Login\r\n    }\r\n}\r\n\r\nclass Layout extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timeout: this.props.Login.idleTimeout,\r\n            showIdleModal: false,\r\n            userLoggedIn: false,\r\n            isTimedOut: false,\r\n            password: \"\",\r\n            sessionExpired: this.props.Login.sessionExpired,\r\n            defaultSearch: [],\r\n            searchText: '',\r\n            menuClick: false,\r\n            showSearch: false,\r\n            fullView:true,\r\n        }\r\n        this.inputRef=React.createRef();\r\n        this.idleTimer = null\r\n        //this.selectInputOnChange = this.selectInputOnChange.bind(this)\r\n        this.password = React.createRef();\r\n    }\r\n\r\n    _onAction = (e) => {\r\n\r\n    }\r\n\r\n    _onActive = (e) => {\r\n\r\n    }\r\n\r\n    _onIdle = (e) => {\r\n        if (this.state.showIdleModal !== true) {\r\n            let uRL = \"\";\r\n            let inputData = [];\r\n            uRL = 'login/insertAuditAction';\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                // scomments: `UserName:${this.props.Login.userInfo.susername}, \r\n                // LoginID:${this.props.Login.userInfo.sloginid}`,\r\n                scomments: `User Name:${this.props.Login.userInfo.susername}; User Role:${this.props.Login.userInfo.suserrolename}; Login ID:${this.props.Login.userInfo.sloginid}`,\r\n                sauditaction: \"IDS_IDLETIMELOCK\"\r\n            }\r\n            rsapi.post(uRL, inputData)\r\n                .then(response => {\r\n                    this.setState({ showIdleModal: true, sessionExpired: Date.now() + 60000 });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n    handleLogin = (event) => {\r\n        if (event) {\r\n            if (this.password.current !== null && this.password.current.elements[0].value === \"\") {\r\n                toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERPASSWORD\" }));\r\n                return;\r\n            }\r\n            else {\r\n                let uRL = \"\";\r\n                let inputData = [];\r\n                uRL = 'login/idleTimeAuditAction';\r\n                inputData = {\r\n                    userinfo: this.props.Login.userInfo,\r\n                    //password: this.state.password,\r\n                    password: this.password.current.elements[0].value,\r\n                    flag: true, nFlag: 1\r\n                }\r\n\r\n                rsapi.post(uRL, inputData)\r\n                    .then(response => {\r\n                        if (response.data['PassFlag'] === this.props.intl.formatMessage({ id: \"IDS_SUCCESS\" })) {\r\n                            this.password.current.elements[0].value = \"\"\r\n                            this.setState({ showIdleModal: false, openModal: false })\r\n                        }\r\n                        else {\r\n                            toast.info(response.data['PassFlag']);\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        if (error.response.status === 500) {\r\n                            toast.warn(error.message);\r\n                        }\r\n                        else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    enterKeyLogin = (event) => {\r\n        if (event.keyCode === 13) {\r\n            this.handleLogin(event);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n\r\n    handleLogout = (event) => {\r\n        if (event) {\r\n            let uRL = \"\";\r\n            let inputData = [];\r\n            uRL = 'login/idleTimeAuditAction';\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                //password: this.state.password,\r\n                //password: this.password.current.elements[0].value,\r\n                flag: false, nFlag: 2\r\n            }\r\n\r\n            rsapi.post(uRL, inputData)\r\n                .then(response => {\r\n\r\n                    const updateInfo = {\r\n                        typeName: IDLE_LOGOUT,\r\n                        data: {\r\n                            masterData: [], inputParam: undefined, idleneed: false\r\n                        }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n\r\n                    //this.password.current.elements[0].value = \"\"\r\n                    //this.setState({ showIdleModal: false })\r\n                    this.props.navPage(\"login\");\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    renderer = (event) => {\r\n        // event.preventDefault();\r\n        const { minutes, seconds, completed } = event;\r\n        if (completed) {\r\n            // Render a completed state\r\n            let uRL = \"\";\r\n            let inputData = [];\r\n            uRL = 'login/insertAuditAction';\r\n            inputData = {\r\n                userinfo: this.props.Login.userInfo,\r\n                // scomments: `UserName:${this.props.Login.userInfo.susername}, \r\n                // LoginID:${this.props.Login.userInfo.sloginid}`,\r\n                scomments: `User Name:${this.props.Login.userInfo.susername}; User Role:${this.props.Login.userInfo.suserrolename}; Login ID:${this.props.Login.userInfo.sloginid}`,\r\n                sauditaction: \"IDS_SESSIONEXPIRED\", nFlag: 2\r\n            }\r\n\r\n            rsapi.post(uRL, inputData)\r\n                .then(response => {\r\n\r\n                    const updateInfo = {\r\n                        typeName: IDLE_LOGOUT,\r\n                        data: {\r\n                            masterData: [], inputParam: undefined, idleneed: false\r\n                        }\r\n                    }\r\n                    //this.props.navPage(\"login\");\r\n                    this.props.updateStore(updateInfo);\r\n\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            // Render a countdown\r\n            console.log(\"minutes\" + minutes + \"seconds\" + seconds)\r\n            return <span style={{ 'margin-left': '0.3rem', color: 'red' }}>{minutes} minutes {seconds} seconds..!</span>;\r\n\r\n        }\r\n        return null;\r\n    };\r\n\r\n    onInputChangeSearch = (event) => {\r\n        let defaultSearch = []\r\n        this.props.Login.menuDesign.map((menuItem, index) => {\r\n            menuItem.lstmodule && menuItem.lstmodule.map((moduleItem, moduleIndex) => {\r\n                moduleItem.lstforms && moduleItem.lstforms.map((formItem, formIndex) => {\r\n\r\n                    //   console.log(formItem.sdisplayname.toLowerCase(),event.target.value,formItem.sdisplayname.toLowerCase().includes(event.target.value))\r\n                    if (formItem.sdisplayname.toLowerCase().includes(event.target.value.toLowerCase())) {\r\n                        defaultSearch.push({...formItem,smodulename:moduleItem.sdisplayname})\r\n                    }\r\n                })\r\n            })\r\n        })\r\n        this.setState({ defaultSearch, searchText: event.target.value.toLowerCase(), menuClick: false })\r\n    }\r\n    onClickBackToMenu = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation()\r\n        this.setState({\r\n            defaultSearch: [],\r\n            menuClick: false, nmenucode: undefined\r\n        })\r\n    }\r\n\r\n    onClickSearchMenu = (menu,inputRef) => {\r\n        let defaultSearch = []\r\n        this.props.Login.menuDesign.map((menuItem, index) => {\r\n            if (menu.nmenucode === menuItem.nmenucode) {\r\n                menuItem.lstmodule && menuItem.lstmodule.map((moduleItem, moduleIndex) => {\r\n                    moduleItem.lstforms && moduleItem.lstforms.map((formItem, formIndex) => {\r\n                        //   console.log(formItem.sdisplayname.toLowerCase(),event.target.value,formItem.sdisplayname.toLowerCase().includes(event.target.value))\r\n                        //  if (formItem.sdisplayname.toLowerCase().includes(event.target.value.toLowerCase())) {\r\n                        defaultSearch.push({...formItem,smodulename:moduleItem.sdisplayname})\r\n                        //   }\r\n                    })\r\n                })\r\n            }\r\n        })\r\n        this.setState({\r\n            defaultSearch,\r\n            menuClick: true, nmenucode: menu.nmenucode\r\n        })\r\n    }\r\n\r\n    getDetail = (classUrl, methodUrl, formCode, displayName, moduleCode, formname,nmenucode,smodulename) => {\r\n\r\n        if (this.props.Login.userInfo.nformcode !== formCode) {\r\n            const userInfo = {\r\n                ...this.props.Login.userInfo, \"nformcode\": formCode,\r\n                \"nmodulecode\": moduleCode, \"sformname\": formname.sdisplayname,smodulename:smodulename\r\n            }\r\n            const inputParam = {\r\n                inputData: { \"userinfo\": userInfo, currentdate: formatInputDate(new Date(), true) },\r\n                classUrl, methodUrl, displayName,key:\"MenuId_\"+nmenucode\r\n            };\r\n\r\n            this.props.callService(inputParam);\r\n        }\r\n    }\r\n\r\n    onClickButton = (forms) => {\r\n        const { history } = this.props;\r\n        history.push('/' + forms.sclassname);\r\n       if(this.inputRef.current) \r\n       this.inputRef.current.value=\"\"\r\n        this.setState({ defaultSearch: [], searchText: \"\", menuClick: false,showSearch:false, fullView:false})\r\n        this.getDetail(forms.sclassname.toLowerCase(), forms.surl,\r\n            forms.nformcode, forms.sdisplayname, forms.nmodulecode, forms, forms.nmenucode,forms.smodulename)\r\n    }\r\n    menuHide= () => {    \r\n     this.setState({ fullView:false})\r\n    }\r\n    layOutGetHome = (updateInfo,form) => {\r\n        const { history } = this.props;\r\n        history.push('/home');\r\n        if(this.inputRef.current) \r\n        this.inputRef.current.value=\"\"\r\n        this.setState({ defaultSearch: [], searchText: \"\", menuClick: false, fullView:true})\r\n        this.props.updateStore(updateInfo);\r\n        //  this.props.layOutGetHome(updateInfo)\r\n    }\r\n    layOutGetHomeCancel = () => {\r\n        const { history } = this.props;       \r\n        let {menuClick,defaultSearch,searchText}=this.state\r\n        \r\n        if(this.inputRef.current&& this.inputRef.current.value!==\"\"){\r\n            if ( this.props.history.location.pathname ==='/home') {           \r\n                history.push('/home');\r\n             }\r\n             this.inputRef.current.value=\"\"\r\n             menuClick=false\r\n             defaultSearch=[]\r\n             searchText=\"\"\r\n        }  else{\r\n            if(menuClick){\r\n                menuClick=true\r\n            }\r\n            \r\n            if(this.inputRef.current){\r\n                this.inputRef.current.value=\"\"\r\n            }\r\n         \r\n        }\r\n        this.setState({ defaultSearch, searchText,showSearch:false, menuClick})\r\n        //this.props.updateStore(updateInfo);\r\n        //  this.props.layOutGetHome(updateInfo)\r\n    }\r\n    menuFullview = () => {\r\n        let { fullView } = this.state;      \r\n        this.setState({fullView: !this.state.fullView})   \r\n    }\r\n    toggleSearch = () => {      \r\n        this.setState({\r\n            showSearch: !this.state.showSearch\r\n        })\r\n    }\r\n    \r\n\r\n    // selectInputOnChange = (event) => {\r\n    //     let password = \"\"\r\n    //     if (event !== null) {\r\n    //         password = event.target.value\r\n    //     }\r\n    //     this.setState({ password: password })\r\n    // }\r\n\r\n    render() {\r\n        this.confirmMessage = new ConfirmMessage();\r\n        return (\r\n            <>\r\n                <div id=\"app-wrapper\">\r\n                    <IdleTimer\r\n                        ref={ref => { this.idleTimer = ref }}\r\n                        element={document}\r\n                        onActive={this._onActive}\r\n                        onAction={this._onAction}\r\n                        onIdle={this._onIdle}\r\n                        debounce={250}\r\n                        timeout={this.state.timeout} />\r\n                    {this.props.Login.idleneed ?\r\n                        <IdleTimeOutModal\r\n                            showIdleModal={this.state.showIdleModal}\r\n                            handleLogin={this.handleLogin}\r\n                            handleLogout={this.handleLogout}\r\n                            UserInfo={this.props.Login.userInfo}\r\n                            passwordref={this.password}\r\n                            //selectInputOnChange={this.selectInputOnChange}\r\n                            idealTime={this.props.Login.idleTimeout}\r\n                            Login={this.props.Login}\r\n                            sessionExpired={this.state.sessionExpired}\r\n                            enterKeyLogin={this.enterKeyLogin}\r\n                            renderer={this.renderer} />\r\n                        : \"\"}\r\n                   \r\n                        <Sidebar history={this.props} layOutGetHome={this.layOutGetHome}  inputRef={ this.inputRef} fullView={this.state.fullView} menuHide={this.menuHide} menuFullview={this.menuFullview}  />\r\n                    \r\n                   \r\n                    <div id=\"content-wrapper\" className=\"d-flex flex-column\">\r\n                        <div id=\"content\">\r\n                            <Header history={this.props} layOutGetHomeCancel={this.layOutGetHomeCancel} fullView={this.state.fullView} visible={this.state.visible} menuFullview={this.menuFullview} toggleSearch={this.toggleSearch} showSearch={this.state.showSearch} searchBar={\r\n                                <SearchBar options={this.state.defaultSearch}\r\n                                    optionDisplayMember={'sdisplayname'}\r\n                                    onClickButton={this.onClickButton}\r\n                                    onInputChange={this.onInputChangeSearch}\r\n                                    pathname={this.props.history.location.pathname}\r\n                                    inputRef={this.inputRef}\r\n\r\n                                />} />\r\n                            <div className=\"container-fluid px-0\">\r\n                                <ScrollToTop>\r\n                                    <Switch>\r\n                                        {routes.map((route, index) => {\r\n                                            return route.component ? (\r\n                                                <Route\r\n                                                    key={index}\r\n                                                    path={route.path}\r\n                                                    exact={route.exact}\r\n                                                    name={route.name}\r\n                                                    render={props => (\r\n                                                        <route.component\r\n                                                            onClickSearchMenu={this.onClickSearchMenu}\r\n                                                            onClickSearchForm={this.onClickButton}\r\n                                                            menuClick={this.state.menuClick}\r\n                                                            onClickBackToMenu={this.onClickBackToMenu}\r\n                                                            searchText={this.state.searchText} defaultSearch={this.state.defaultSearch} {...props} />\r\n                                                    )} />\r\n                                            ) : (null);\r\n                                        })}\r\n                                    </Switch>\r\n                                </ScrollToTop>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nLayout.propTypes = {\r\n    match: PropTypes.any.isRequired,\r\n    history: PropTypes.func.isRequired\r\n}\r\n\r\nexport default connect(mapStateToProps, { navPage, updateStore, callService })(injectIntl(Layout));"]},"metadata":{},"sourceType":"module"}