{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Card}from\"react-bootstrap\";import{connect}from\"react-redux\";import{toast}from\"react-toastify\";import{injectIntl}from\"react-intl\";import{callService,crudMaster,validateEsignCredential,updateStore,changeSampleTypeFilter,filterColumnData,viewAttachment,addProjectMaster,getProjectView,getProjectmasterAddMemberService,addProjectMasterFile,getuserComboServices}from\"../../actions\";import ListMaster from\"../../components/list-master/list-master.component\";import{transactionStatus}from\"../../components/Enumeration\";import{DEFAULT_RETURN}from\"../../actions/LoginTypes\";import{getControlMap,constructOptionList}from\"../../components/CommonScript\";import{ContentPanel}from\"../../components/App.styles\";import{process}from\"@progress/kendo-data-query\";import ConfirmMessage from\"../../components/confirm-alert/confirm-message.component\";import BreadcrumbComponent from\"../../components/Breadcrumb.Component\";import{Affix}from\"rsuite\";import{intl}from\"../../components/App\";import ProjectViewFilter from\"../../pages/project/ProjectViewFilter\";import DataGrid from'../../components/data-grid/data-grid.component';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var ProjectView=/*#__PURE__*/function(_Component){_inherits(ProjectView,_Component);var _super=_createSuper(ProjectView);function ProjectView(props){var _this;_classCallCheck(this,ProjectView);_this=_super.call(this,props);_this.sidebarExpandCollapse=function(){_this.setState({sidebarview:true});};_this.handleDateChange=function(dateName,dateValue){var selectedRecord=_this.state.selectedRecord;selectedRecord[dateName]=dateValue;_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type===\"checkbox\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.handleExpandChange=function(){var childListMap=new Map();var keylst=_this.props.Login.masterData.ChildProjectView.map(function(key){return key.npreregno;});keylst.map(function(key,i){var ChildProjectView=_this.props.Login.masterData.ChildProjectView;ChildProjectView=ChildProjectView.filter(function(x){return x['npreregno']===key;});childListMap.set(parseInt(key),ChildProjectView);});_this.setState({childListMap:childListMap});};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 2:var selectedRecordfilter=_this.state.selectedRecordfilter||{};selectedRecordfilter[fieldName]=comboData;_this.setState({selectedRecordfilter:selectedRecordfilter});break;case 3:selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});break;default:break;}};_this.onInputOnChange=function(event,optional){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;// else if (event.target.name === \"nlockmode\")\n//     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\nelse selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.ConfirmDelete=function(selectedProjectView,operation,deleteId,screenName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.DeleteProjectMaster(screenName,selectedProjectView,operation,deleteId);});};_this.reloadData=function(){_this.searchRef.current.value=\"\";// if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\n// if ( this.props.Login.masterData.SelectedSampleType !== undefined) {\nif(_this.state.selectedRecordfilter!==undefined){if(_this.state.selectedRecordfilter.nsampletypecodevalue!==undefined&&_this.state.selectedRecordfilter.nprojecttypecodevalue!==\"\"){if(Object.values(_this.props.Login.masterData.SelectedSampleType).length&&_this.props.Login.masterData.SelectedSampleType!==undefined){var inputParam={inputData:{nsampletypecode:_this.state.selectedRecordfilter.nsampletypecodevalue.value,nprojecttypecode:_this.state.selectedRecordfilter.nprojecttypecodevalue.value,userinfo:_this.props.Login.userInfo,// nfilterSampleType: this.state.nfilterSampleType,\nnfilterSampleType:_this.state.selectedRecordfilter.nsampletypecodevalue},// classUrl: \"projectview\",\nmethodUrl:\"ProjectViewBySampleType\"};_this.props.changeSampleTypeFilter(inputParam,_this.props.Login.masterData.filterSampleType);}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PROJECTTYPENOTAVAILABLE\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SAMPLETYPENOTAVAILABLE\"}));}};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.state.selectedRecord;//    let selectedRecord = this.state.selectedRecord;\nif(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"||_this.props.Login.operation===\"approve\"||_this.props.Login.operation===\"retire\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';selectedRecord['esignreason']='';}}else{openModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.openFilter=function(){var showFilter=!_this.props.Login.showFilter;var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:showFilter}};_this.props.updateStore(updateInfo);};_this.closeFilter=function(){var updateInfo={typeName:DEFAULT_RETURN,data:{showFilter:false}};_this.props.updateStore(updateInfo);};_this.onFilterSubmit=function(){_this.searchRef.current.value=\"\";// if (this.state.nfilterSampleType.value) {\n// if (this.state.selectedRecord.nsampletypecodevalue.value) {\n//if ((this.state.selectedRecord).length>0) {\n// if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\nif(_this.state.selectedRecordfilter!==undefined){if(_this.state.selectedRecordfilter.nsampletypecodevalue!==undefined&&_this.state.selectedRecordfilter.nprojecttypecodevalue!==\"\"){var inputParam={inputData:{nsampletypecode:_this.state.selectedRecordfilter.nsampletypecodevalue.value,nprojecttypecode:_this.state.selectedRecordfilter.nprojecttypecodevalue.value,userinfo:_this.props.Login.userInfo,// nfilterSampleType: this.state.nfilterSampleType,\nnfilterSampleType:_this.state.selectedRecordfilter.nsampletypecodevalue},// classUrl: \"projectview\",\nmethodUrl:\"ProjectViewBySampleType\"};_this.props.changeSampleTypeFilter(inputParam,_this.props.Login.masterData.filterSampleType);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_PROJECTTYPENOTAVAILABLE\"}));}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SAMPLETYPENOTAVAILABLE\"}));}};var dataState={skip:0,take:10};_this.state={selectedRecord:{},error:\"\",userRoleControlRights:[],selectedProjectView:undefined,controlMap:new Map(),Instrument:[],dataState:dataState,dataResult:[],data:[],childListMap:[],sidebarview:false};_this.searchRef=React.createRef();_this.searchFieldList=[\"sprojectcode\",\"sprojecttitle\",\"ncost\",\"sprojecttypename\",\"sversionstatus\"];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(ProjectView,[{key:\"render\",value:function render(){var _this2=this;var versionStatusCSS=\"outline-secondary\";var activeIconCSS=\"fa fa-check\";if(this.props.Login.masterData.SelectedProjectView&&this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.APPROVED){versionStatusCSS=\"outline-success\";}else if(this.props.Login.masterData.SelectedProjectView&&(this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.RETIRED||this.props.Login.masterData.SelectedProjectView.ntransactionstatus===transactionStatus.CLOSED)){versionStatusCSS=\"outline-danger\";activeIconCSS=\"\";}if(this.props.Login.openModal){this.mandatoryFields=this.findMandatoryFields(this.props.Login.screenName,this.state.selectedRecord,this.props.Login.operation);}//console.log(\"master main\", this.props.Login.masterData);\n// let mandatoryFields = [];\nvar userInfo=this.props.Login.userInfo;var SelectedProjectView=this.props.Login.masterData.SelectedProjectView;var selectedMaster=this.props.Login.masterData.SelectedProjectView;var selectedProjectView=this.props.Login.masterData.SelectedProjectView;this.extractedColumnList=[{\"idsName\":\"IDS_ARNO\",\"dataField\":\"sarno\",\"width\":\"100px\"},{\"idsName\":\"IDS_REGISTRATIONTYPE\",\"dataField\":\"sregtypename\",\"width\":\"200px\"},{\"idsName\":\"IDS_REGISTRATIONSUBTYPE\",\"dataField\":\"sregsubtypename\",\"width\":\"250px\"}];var filterParam={inputListName:\"ProjectView\",selectedObject:\"SelectedProjectView\",primaryKeyField:\"nprojectmastercode\",fetchUrl:\"projectview/getActiveProjectViewById\",fecthInputObject:{userinfo:this.props.Login.userInfo,nsampletypecode:this.props.Login.masterData.SelectedSampleType&&this.props.Login.masterData.SelectedSampleType.nsampletypecode},masterData:this.props.Login.masterData,searchFieldList:this.searchFieldList};var breadCrumbData=this.state.filterData||[];return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\"},breadCrumbData.length>0?/*#__PURE__*/React.createElement(Affix,{top:53},/*#__PURE__*/React.createElement(BreadcrumbComponent,{breadCrumbItem:breadCrumbData})):\"\",/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'4':\"2\")},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this2.setState({sidebarview:!_this2.state.sidebarview});},className:\"sidebar-view-btn\"},!this.state.sidebarview?/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-less-than\"}):/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-greater-than\"})),/*#__PURE__*/React.createElement(ListMaster,{screenName:this.props.intl.formatMessage({id:\"IDS_PROJECTVIEW\"}),masterData:this.props.Login.masterData,userInfo:this.props.Login.userInfo,masterList:this.props.Login.masterData.searchedData||this.props.Login.masterData.ProjectView,getMasterDetail:function getMasterDetail(ProjectViewdata){return _this2.props.getProjectView(ProjectViewdata,_this2.props.Login.userInfo,_this2.props.Login.masterData);},selectedMaster:selectedProjectView,primaryKeyField:\"nprojectmastercode\",mainField:\"sprojecttitle\",firstField:\"sprojectcode\",secondField:\"sprojecttypename\",filterColumnData:this.props.filterColumnData,filterParam:filterParam,userRoleControlRights:this.state.userRoleControlRights,searchRef:this.searchRef,reloadData:this.reloadData,isMultiSelecct:false,hidePaging:false,isClearSearch:this.props.Login.isClearSearch,openFilter:this.openFilter,closeFilter:this.closeFilter,onFilterSubmit:this.onFilterSubmit,showFilterIcon:true,showFilter:this.props.Login.showFilter,filterComponent:[{\"IDS_PROJECTVIEWFILTER\":/*#__PURE__*/React.createElement(ProjectViewFilter,{filterSampleType:this.state.ProjectViewFilterList||[],nfilterSampleType:this.props.Login.masterData.SelectedSampleType||{},filterProjectType:this.state.ProjectTypeFilterList||[],nfilterProjectType:this.props.Login.masterData.SelectedProjectType||{},onComboChange:this.onComboChange,selectedRecord:this.state.selectedRecordfilter||{}// selectedRecord1={this.state.selectedRecordfilter1 || {}}\n})}]})),/*#__PURE__*/React.createElement(Col,{md:\"\".concat(!this.state.sidebarview?'8':\"10\")},selectedProjectView?/*#__PURE__*/React.createElement(ContentPanel,{className:\"panel-main-content\"},/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Header,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"product-title-main\"},this.props.intl.formatMessage({id:\"IDS_TOTALCOST\"})+\" : \"+selectedProjectView.ncost),/*#__PURE__*/React.createElement(Card.Subtitle,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex product-category\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"product-title-sub flex-grow-1\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-outlined \".concat(versionStatusCSS,\" btn-sm ml-3\")},selectedProjectView.sversionstatus))))),/*#__PURE__*/React.createElement(Card.Body,{className:\"form-static-wrap\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{expandField:\"expanded\",handleExpandChange:this.handleExpandChange,dataResult:this.props.Login.masterData.ParentProjectView&&process(this.props.Login.masterData.ParentProjectView||[],this.state.dataState?this.state.dataState:{skip:0,take:10})// dataResult={this.state.dataResult}\n,dataState:this.state.dataState?this.state.dataState:{skip:0,take:10}// dataState={this.state.dataState}\n,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,pageable:true,scrollable:'scrollable',hideColumnFilter:false,selectedId:0,hasChild:true,childMappingField:'npreregno',childColumnList:[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"250px\"},{\"idsName\":\"IDS_COST\",\"dataField\":\"ncost\",\"width\":\"100px\"},{\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\",\"width\":\"250px\"}],childList:this.state.childListMap,gridHeight:'355px',isActionRequired:false//  actionColWidth={'250px'}   \n//  gridWidth={'800px'}\n})))))):\"\"))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var updateState=false;var _this$state=this.state,selectedRecord=_this$state.selectedRecord,selectedRecordfilter=_this$state.selectedRecordfilter,userRoleControlRights=_this$state.userRoleControlRights,controlMap=_this$state.controlMap,filterData=_this$state.filterData,nfilterSampleType=_this$state.nfilterSampleType,filterSampleType=_this$state.filterSampleType,nfilterProjectType=_this$state.nfilterProjectType,selectedRecordfilter1=_this$state.selectedRecordfilter1;if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){selectedRecord=this.props.Login.selectedRecord;updateState=true;this.setState({selectedRecord:selectedRecord,selectedRecordfilter:selectedRecordfilter});}if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({controlMap:controlMap,userRoleControlRights:userRoleControlRights});//   updateState = true;\n}var nsampletypecode=this.state.nfilterSampleType||{};var nprojecttypecode=this.state.nfilterProjectType||{};if(this.props.Login.masterData!==previousProps.Login.masterData){nfilterSampleType=this.state.nfilterSampleType||{};var _filterSampleType=constructOptionList(this.props.Login.masterData.filterSampleType||[],\"nsampletypecode\",\"ssampletypename\",undefined,undefined,undefined);var ProjectViewFilterList=_filterSampleType.get(\"OptionList\");nsampletypecode=ProjectViewFilterList[0];selectedRecordfilter={nsampletypecodevalue:nsampletypecode};selectedRecord={nsampletypecodevalue:nsampletypecode};////\nnfilterProjectType=this.state.nfilterProjectType||{};var filterProjectType=constructOptionList(this.props.Login.masterData.filterProjectType||[],\"nprojecttypecode\",\"sprojecttypename\",undefined,undefined,undefined);var ProjectTypeFilterList=filterProjectType.get(\"OptionList\");nprojecttypecode=ProjectTypeFilterList[0];selectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter),{},{nprojecttypecodevalue:nprojecttypecode});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nprojecttypecodevalue:nprojecttypecode});this.setState({ProjectViewFilterList:ProjectViewFilterList,ProjectTypeFilterList:ProjectTypeFilterList,selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord,data:this.props.Login.masterData.ParentProjectView,dataResult:process(this.props.Login.masterData.ParentProjectView||[],this.state.dataState)});////\nif(this.props.Login.masterData.SelectedSampleType&&this.props.Login.masterData.SelectedSampleType!==previousProps.Login.masterData.SelectedSampleType){nfilterSampleType={label:this.props.Login.masterData.SelectedSampleType.ssampletypename,value:this.props.Login.masterData.SelectedSampleType.nsampletypecode,item:this.props.Login.masterData.SelectedSampleType};}if(this.props.Login.masterData.SelectedProjectType&&this.props.Login.masterData.SelectedProjectType!==previousProps.Login.masterData.SelectedProjectType){nfilterProjectType={label:this.props.Login.masterData.SelectedProjectType.sprojecttypename,value:this.props.Login.masterData.SelectedProjectType.nprojecttypecode,item:this.props.Login.masterData.SelectedProjectType};}//  selectedRecordfilter = {nsampletypecodevalue:nfilterSampleType}\nfilterData=this.generateBreadCrumData();updateState=true;this.setState({filterData:filterData,selectedRecordfilter:selectedRecordfilter});}if(this.props.Login.masterData.SelectedSampleType!==previousProps.Login.masterData.SelectedSampleType){var nsampletypecodevalue=this.props.Login.masterData.SelectedSampleType?{label:this.props.Login.masterData.SelectedSampleType.ssampletypename,value:this.props.Login.masterData.SelectedSampleType.nsampletypecode,item:this.props.Login.masterData.SelectedSampleType}:\"\";//  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\nselectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter1),{},{nsampletypecodevalue:nsampletypecodevalue});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nsampletypecodevalue:nsampletypecode});// nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\nthis.setState({selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord});}////\nif(this.props.Login.masterData.SelectedProjectType!==previousProps.Login.masterData.SelectedProjectType){var nprojecttypecodevalue=this.props.Login.masterData.SelectedProjectType?{label:this.props.Login.masterData.SelectedProjectType.sprojecttypename,value:this.props.Login.masterData.SelectedProjectType.nprojecttypecode,item:this.props.Login.masterData.SelectedProjectType}:\"\";//  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\nselectedRecordfilter=_objectSpread(_objectSpread({},selectedRecordfilter),{},{nprojecttypecodevalue:nprojecttypecodevalue});selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{nprojecttypecodevalue:nprojecttypecode});// nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\nthis.setState({selectedRecordfilter:selectedRecordfilter,selectedRecord:selectedRecord});}// if (this.props.Login.masterData.nfilterSampleType !== previousProps.Login.masterData.nfilterSampleType) {\n// }\n}},{key:\"generateBreadCrumData\",value:function generateBreadCrumData(){var breadCrumbData=[];if(this.props.Login.masterData&&this.props.Login.masterData.SelectedSampleType){breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.SelectedSampleType?this.props.Login.masterData.SelectedSampleType.ssampletypename:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.SelectedProjectType?this.props.Login.masterData.SelectedProjectType.sprojecttypename:\"NA\"});}else if(this.props.Login.masterData&&this.props.Login.masterData.SelectedProjectView){/*    breadCrumbData.push({\r\n            label: \"IDS_SAMPLETYPE\",\r\n            value: this.state.selectedRecord.nsampletypecode\r\n              ? this.state.selectedRecord.nsampletypecode.label\r\n              : \"NA\",\r\n          }); */breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.SelectedProjectView?this.props.Login.masterData.SelectedProjectView.ssampletypename:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.SelectedProjectView?this.props.Login.masterData.SelectedProjectView.ssampletypename:\"NA\"});}else{/*       breadCrumbData.push({\r\n             label: \"IDS_SAMPLETYPE\",\r\n             value:  this.state.selectedRecord.nsampletypecodevalue\r\n               ? this.state.selectedRecord.nsampletypecodevalue.label\r\n               : \"NA\",\r\n           }); */breadCrumbData.push({label:\"IDS_SAMPLETYPE\",value:this.props.Login.masterData.nfilterSampleType?this.props.Login.masterData.nfilterSampleType.label:\"NA\"},{label:\"IDS_PROJECTTYPE\",value:this.props.Login.masterData.nfilterSampleType?this.props.Login.masterData.nfilterSampleType.label:\"NA\"});}return breadCrumbData;}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"){if(props.Login.errorCode===417||props.Login.errorCode===409){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return ProjectView;}(Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,filterColumnData:filterColumnData,updateStore:updateStore,validateEsignCredential:validateEsignCredential,changeSampleTypeFilter:changeSampleTypeFilter,viewAttachment:viewAttachment,addProjectMaster:addProjectMaster,getProjectView:getProjectView,getProjectmasterAddMemberService:getProjectmasterAddMemberService,addProjectMasterFile:addProjectMasterFile,getuserComboServices:getuserComboServices})(injectIntl(ProjectView));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/project/ProjectView.jsx"],"names":["React","Component","Row","Col","Card","connect","toast","injectIntl","callService","crudMaster","validateEsignCredential","updateStore","changeSampleTypeFilter","filterColumnData","viewAttachment","addProjectMaster","getProjectView","getProjectmasterAddMemberService","addProjectMasterFile","getuserComboServices","ListMaster","transactionStatus","DEFAULT_RETURN","getControlMap","constructOptionList","ContentPanel","process","ConfirmMessage","BreadcrumbComponent","Affix","intl","ProjectViewFilter","DataGrid","mapStateToProps","state","Login","ProjectView","props","sidebarExpandCollapse","setState","sidebarview","handleDateChange","dateName","dateValue","selectedRecord","onInputOnChange","event","optional","target","type","name","checked","value","handleExpandChange","childListMap","Map","keylst","masterData","ChildProjectView","map","key","npreregno","i","filter","x","set","parseInt","onComboChange","comboData","fieldName","caseNo","selectedRecordfilter","ACTIVE","DEACTIVE","YES","NO","onTabChange","tabProps","screenName","updateInfo","typeName","data","dataStateChange","dataResult","dataState","ConfirmDelete","selectedProjectView","operation","deleteId","confirmMessage","confirm","formatMessage","id","DeleteProjectMaster","reloadData","searchRef","current","undefined","nsampletypecodevalue","nprojecttypecodevalue","Object","values","SelectedSampleType","length","inputParam","inputData","nsampletypecode","nprojecttypecode","userinfo","userInfo","nfilterSampleType","methodUrl","filterSampleType","warn","closeModal","loadEsign","openModal","openFilter","showFilter","closeFilter","onFilterSubmit","skip","take","error","userRoleControlRights","controlMap","Instrument","createRef","searchFieldList","versionStatusCSS","activeIconCSS","SelectedProjectView","ntransactionstatus","APPROVED","RETIRED","CLOSED","mandatoryFields","findMandatoryFields","selectedMaster","extractedColumnList","filterParam","inputListName","selectedObject","primaryKeyField","fetchUrl","fecthInputObject","breadCrumbData","filterData","searchedData","ProjectViewdata","isClearSearch","ProjectViewFilterList","ProjectTypeFilterList","SelectedProjectType","ncost","sversionstatus","ParentProjectView","previousProps","updateState","nfilterProjectType","selectedRecordfilter1","nformcode","item","push","ncontrolcode","get","filterProjectType","label","ssampletypename","sprojecttypename","generateBreadCrumData","masterStatus","errorCode"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Row, Col, Card } from \"react-bootstrap\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport {\r\n  callService, crudMaster, validateEsignCredential, updateStore, changeSampleTypeFilter, filterColumnData,\r\n  viewAttachment, addProjectMaster, getProjectView, getProjectmasterAddMemberService, addProjectMasterFile, getuserComboServices\r\n} from \"../../actions\";\r\n\r\nimport ListMaster from \"../../components/list-master/list-master.component\";\r\nimport { transactionStatus } from \"../../components/Enumeration\";\r\nimport { DEFAULT_RETURN } from \"../../actions/LoginTypes\";\r\n\r\nimport { getControlMap, constructOptionList }\r\n  from \"../../components/CommonScript\"\r\nimport { ContentPanel } from \"../../components/App.styles\";\r\nimport { process } from \"@progress/kendo-data-query\";\r\nimport ConfirmMessage from \"../../components/confirm-alert/confirm-message.component\";\r\nimport BreadcrumbComponent from \"../../components/Breadcrumb.Component\";\r\nimport { Affix } from \"rsuite\";\r\nimport { intl } from \"../../components/App\";\r\nimport ProjectViewFilter from \"../../pages/project/ProjectViewFilter\";\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { Login: state.Login };\r\n};\r\n\r\nclass ProjectView extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const dataState = { skip: 0, take: 10 };\r\n    this.state = {\r\n      selectedRecord: {},\r\n      error: \"\",\r\n      userRoleControlRights: [],\r\n      selectedProjectView: undefined,\r\n      controlMap: new Map(),\r\n      Instrument: [],\r\n      dataState: dataState,\r\n      dataResult: [], data: [],\r\n      childListMap: [],\r\n      sidebarview: false\r\n    };\r\n    this.searchRef = React.createRef();\r\n    this.searchFieldList = [\"sprojectcode\", \"sprojecttitle\", \"ncost\", \"sprojecttypename\", \"sversionstatus\"]\r\n    this.confirmMessage = new ConfirmMessage();\r\n  }\r\n  sidebarExpandCollapse = () => {\r\n      this.setState({\r\n          sidebarview: true\r\n      })          \r\n  }\r\n\r\n  handleDateChange = (dateName, dateValue) => {\r\n    const { selectedRecord } = this.state;\r\n    selectedRecord[dateName] = dateValue;\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === \"checkbox\") {\r\n      selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n    } else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    } else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  };\r\n\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.Login.masterStatus !== \"\") {\r\n      if (props.Login.errorCode === 417 || props.Login.errorCode === 409) {\r\n        toast.warn(props.Login.masterStatus);\r\n        props.Login.masterStatus = \"\";\r\n      }\r\n    }\r\n    if (props.Login.error !== state.error) {\r\n      toast.error(props.Login.error);\r\n      props.Login.error = \"\";\r\n    }\r\n    if (props.Login.selectedRecord === undefined) {\r\n      return { selectedRecord: {} };\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n\r\n    let versionStatusCSS = \"outline-secondary\";\r\n    let activeIconCSS = \"fa fa-check\"\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedProjectView && this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.APPROVED) {\r\n      versionStatusCSS = \"outline-success\";\r\n    }\r\n    else if (this.props.Login.masterData.SelectedProjectView && ((this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.RETIRED) || (this.props.Login.masterData.SelectedProjectView.ntransactionstatus === transactionStatus.CLOSED))) {\r\n      versionStatusCSS = \"outline-danger\";\r\n      activeIconCSS = \"\";\r\n    }\r\n\r\n\r\n    if (this.props.Login.openModal) {\r\n      this.mandatoryFields = this.findMandatoryFields(this.props.Login.screenName, this.state.selectedRecord, this.props.Login.operation)\r\n    }\r\n\r\n    //console.log(\"master main\", this.props.Login.masterData);\r\n    // let mandatoryFields = [];\r\n    const { userInfo } = this.props.Login;\r\n\r\n\r\n\r\n    const { SelectedProjectView } = this.props.Login.masterData;\r\n    const selectedMaster = this.props.Login.masterData.SelectedProjectView;\r\n    const selectedProjectView = this.props.Login.masterData.SelectedProjectView;\r\n\r\n    this.extractedColumnList = [\r\n      { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"100px\" },\r\n      { \"idsName\": \"IDS_REGISTRATIONTYPE\", \"dataField\": \"sregtypename\", \"width\": \"200px\" },\r\n      { \"idsName\": \"IDS_REGISTRATIONSUBTYPE\", \"dataField\": \"sregsubtypename\", \"width\": \"250px\" },\r\n    ]\r\n\r\n    const filterParam = {\r\n      inputListName: \"ProjectView\",\r\n      selectedObject: \"SelectedProjectView\",\r\n      primaryKeyField: \"nprojectmastercode\",\r\n      fetchUrl: \"projectview/getActiveProjectViewById\",\r\n      fecthInputObject: { userinfo: this.props.Login.userInfo, nsampletypecode: this.props.Login.masterData.SelectedSampleType && this.props.Login.masterData.SelectedSampleType.nsampletypecode },\r\n      masterData: this.props.Login.masterData,\r\n      searchFieldList: this.searchFieldList,\r\n\r\n\r\n    };\r\n    const breadCrumbData = this.state.filterData || [];\r\n    return (\r\n      <>\r\n        <div className=\"client-listing-wrap mtop-fixed-breadcrumb fixed_breadcrumd\">\r\n          {breadCrumbData.length > 0 ? (\r\n            <Affix top={53}>\r\n              <BreadcrumbComponent breadCrumbItem={breadCrumbData} />\r\n            </Affix>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row noGutters={true}>\r\n            <Col md={`${!this.state.sidebarview ? '4' : \"2\"}`}>\r\n                <span onClick= {()=>this.setState({sidebarview:!this.state.sidebarview})} className='sidebar-view-btn'>\r\n                    {!this.state.sidebarview ?\r\n                        <i class=\"fa fa-less-than\"></i> :\r\n                        <i class=\"fa fa-greater-than\"></i> \r\n                    }\r\n                </span>\r\n              <ListMaster\r\n                screenName={this.props.intl.formatMessage({ id: \"IDS_PROJECTVIEW\" })}\r\n                masterData={this.props.Login.masterData}\r\n                userInfo={this.props.Login.userInfo}\r\n                masterList={this.props.Login.masterData.searchedData || this.props.Login.masterData.ProjectView}\r\n                getMasterDetail={(ProjectViewdata) => this.props.getProjectView(ProjectViewdata, this.props.Login.userInfo, this.props.Login.masterData)}\r\n                selectedMaster={selectedProjectView}\r\n                primaryKeyField=\"nprojectmastercode\"\r\n                mainField=\"sprojecttitle\"\r\n                firstField=\"sprojectcode\"\r\n                secondField=\"sprojecttypename\"\r\n                filterColumnData={this.props.filterColumnData}\r\n                filterParam={filterParam}\r\n                userRoleControlRights={this.state.userRoleControlRights}\r\n                searchRef={this.searchRef}\r\n                reloadData={this.reloadData}\r\n                isMultiSelecct={false}\r\n                hidePaging={false}\r\n                isClearSearch={this.props.Login.isClearSearch}\r\n\r\n                openFilter={this.openFilter}\r\n                closeFilter={this.closeFilter}\r\n                onFilterSubmit={this.onFilterSubmit}\r\n                showFilterIcon={true}\r\n                showFilter={this.props.Login.showFilter}\r\n                filterComponent={[\r\n                  {\r\n                    \"IDS_PROJECTVIEWFILTER\":\r\n                      <ProjectViewFilter\r\n                        filterSampleType={this.state.ProjectViewFilterList || []}\r\n                        nfilterSampleType={this.props.Login.masterData.SelectedSampleType || {}}\r\n\r\n                        filterProjectType={this.state.ProjectTypeFilterList || []}\r\n                        nfilterProjectType={this.props.Login.masterData.SelectedProjectType || {}}\r\n\r\n                        onComboChange={this.onComboChange}\r\n                        selectedRecord={this.state.selectedRecordfilter || {}}\r\n                      // selectedRecord1={this.state.selectedRecordfilter1 || {}}\r\n                      />\r\n                  }\r\n                ]}\r\n\r\n              />\r\n            </Col>\r\n            <Col md={`${!this.state.sidebarview ? '8' : \"10\"}`}>\r\n              {selectedProjectView ?\r\n                <ContentPanel className=\"panel-main-content\">\r\n                  <Card className=\"border-0\">\r\n                    <Card.Header>\r\n                      <Card.Title className=\"product-title-main\">\r\n                        {this.props.intl.formatMessage({ id: \"IDS_TOTALCOST\" }) + \" : \" + selectedProjectView.ncost}\r\n                      </Card.Title>\r\n                      <Card.Subtitle>\r\n                        <div className=\"d-flex product-category\">\r\n                          <h2 className=\"product-title-sub flex-grow-1\">\r\n                            <span className={`btn btn-outlined ${versionStatusCSS} btn-sm ml-3`}>\r\n                              {/* <i class={activeIconCSS}></i> */}\r\n                              {selectedProjectView.sversionstatus}\r\n                            </span>\r\n                          </h2>\r\n                        </div>\r\n                      </Card.Subtitle>\r\n                    </Card.Header>\r\n                    <Card.Body className=\"form-static-wrap\">\r\n\r\n                      {/* <Col md={12}>\r\n                        <div className=\"horizontal-line\"></div>\r\n                      </Col> */}\r\n                      <Row noGutters>\r\n                        <Col md={12}>\r\n                          <DataGrid\r\n                            expandField=\"expanded\"\r\n                            handleExpandChange={this.handleExpandChange}\r\n                            dataResult={this.props.Login.masterData.ParentProjectView && process(\r\n                              this.props.Login.masterData.ParentProjectView || [],\r\n                              this.state.dataState ? this.state.dataState : { skip: 0, take: 10 }\r\n                            )}\r\n                            // dataResult={this.state.dataResult}\r\n                            dataState={this.state.dataState\r\n                              ? this.state.dataState : { skip: 0, take: 10 }}\r\n                            // dataState={this.state.dataState}\r\n                            dataStateChange={this.dataStateChange}\r\n                            extractedColumnList={this.extractedColumnList}\r\n                            controlMap={this.state.controlMap}\r\n                            userRoleControlRights={this.state.userRoleControlRights}\r\n                            pageable={true}\r\n                            scrollable={'scrollable'}\r\n                            hideColumnFilter={false}\r\n                            selectedId={0}\r\n                            hasChild={true}\r\n                            childMappingField={'npreregno'}\r\n                            childColumnList={[\r\n\r\n                              { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"250px\" },\r\n                              { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"100px\" },\r\n                              { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"250px\" },\r\n\r\n                            ]}\r\n                            childList={this.state.childListMap}\r\n                            gridHeight={'355px'}\r\n                            isActionRequired={false}\r\n                          //  actionColWidth={'250px'}   \r\n                          //  gridWidth={'800px'}\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </ContentPanel>\r\n                : \"\"\r\n              }\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n        </div>\r\n\r\n      </>\r\n    );\r\n  }\r\n\r\n  handleExpandChange = () => {\r\n\r\n    let childListMap = new Map();\r\n    let keylst = this.props.Login.masterData.ChildProjectView.map(key => key.npreregno);\r\n\r\n    keylst.map((key, i) => {\r\n      let ChildProjectView = this.props.Login.masterData.ChildProjectView;\r\n\r\n      ChildProjectView = ChildProjectView.filter(x => x['npreregno'] === key);\r\n      childListMap.set(parseInt(key), ChildProjectView);\r\n    })\r\n    this.setState({ childListMap })\r\n\r\n  };\r\n\r\n  onComboChange = (comboData, fieldName, caseNo) => {\r\n\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    switch (caseNo) {\r\n\r\n      case 2:\r\n        const selectedRecordfilter = this.state.selectedRecordfilter || {};\r\n        selectedRecordfilter[fieldName] = comboData;\r\n        this.setState({ selectedRecordfilter });\r\n        break;\r\n\r\n      case 3:\r\n\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n\r\n  onInputOnChange = (event, optional) => {\r\n    const selectedRecord = this.state.selectedRecord || {};\r\n    if (event.target.type === 'checkbox') {\r\n      if (event.target.name === \"ntransactionstatus\")\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n      // else if (event.target.name === \"nlockmode\")\r\n      //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n      else\r\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n    }\r\n    else if (event.target.type === 'radio') {\r\n      selectedRecord[event.target.name] = optional;\r\n    }\r\n    else {\r\n      selectedRecord[event.target.name] = event.target.value;\r\n    }\r\n    this.setState({ selectedRecord });\r\n  }\r\n\r\n\r\n\r\n\r\n  onTabChange = (tabProps) => {\r\n    const screenName = tabProps.screenName;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { screenName },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n\r\n\r\n  dataStateChange = (event) => {\r\n    this.setState({\r\n      dataResult: process(this.state.data, event.dataState),\r\n      dataState: event.dataState\r\n    });\r\n  }\r\n\r\n\r\n  ConfirmDelete = (selectedProjectView, operation, deleteId, screenName) => {\r\n    this.confirmMessage.confirm(\r\n      \"deleteMessage\",\r\n      this.props.intl.formatMessage({ id: \"IDS_DELETE\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_OK\" }),\r\n      this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n      () =>\r\n        this.DeleteProjectMaster(\r\n          screenName,\r\n          selectedProjectView,\r\n          operation,\r\n          deleteId\r\n\r\n        )\r\n    );\r\n  };\r\n\r\n\r\n\r\n  reloadData = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    // if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\r\n    // if ( this.props.Login.masterData.SelectedSampleType !== undefined) {\r\n    if (this.state.selectedRecordfilter !== undefined) {\r\n      if (this.state.selectedRecordfilter.nsampletypecodevalue !== undefined && this.state.selectedRecordfilter.nprojecttypecodevalue !== \"\") {\r\n        if (Object.values(this.props.Login.masterData.SelectedSampleType).length && this.props.Login.masterData.SelectedSampleType !== undefined) {\r\n          let inputParam = {\r\n            inputData: {\r\n              nsampletypecode: this.state.selectedRecordfilter.nsampletypecodevalue.value,\r\n              nprojecttypecode: this.state.selectedRecordfilter.nprojecttypecodevalue.value,\r\n              userinfo: this.props.Login.userInfo,\r\n              // nfilterSampleType: this.state.nfilterSampleType,\r\n              nfilterSampleType: this.state.selectedRecordfilter.nsampletypecodevalue,\r\n            },\r\n            // classUrl: \"projectview\",\r\n            methodUrl: \"ProjectViewBySampleType\",\r\n          };\r\n          this.props.changeSampleTypeFilter(\r\n            inputParam,\r\n            this.props.Login.masterData.filterSampleType\r\n          );\r\n        }\r\n      } else {\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPENOTAVAILABLE\", }));\r\n      }\r\n    } else {\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPENOTAVAILABLE\", }));\r\n    }\r\n  };\r\n\r\n\r\n\r\n  closeModal = () => {\r\n    let loadEsign = this.props.Login.loadEsign;\r\n    let openModal = this.props.Login.openModal;\r\n    let selectedRecord = this.state.selectedRecord;\r\n    //    let selectedRecord = this.state.selectedRecord;\r\n    if (this.props.Login.loadEsign) {\r\n      if (this.props.Login.operation === \"delete\" || this.props.Login.operation === \"approve\" || this.props.Login.operation === \"retire\") {\r\n        loadEsign = false;\r\n        openModal = false;\r\n        selectedRecord = {};\r\n      }\r\n      else {\r\n        loadEsign = false;\r\n        selectedRecord['esignpassword'] = '';\r\n        selectedRecord['esigncomments'] = '';\r\n        selectedRecord['esignreason'] = '';\r\n      }\r\n    }\r\n    else {\r\n      openModal = false;\r\n      selectedRecord = {};\r\n    }\r\n\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { openModal, loadEsign, selectedRecord }\r\n    }\r\n    this.props.updateStore(updateInfo);\r\n\r\n  }\r\n\r\n  componentDidUpdate(previousProps) {\r\n    let updateState = false;\r\n    let {\r\n      selectedRecord,\r\n      selectedRecordfilter,\r\n      userRoleControlRights,\r\n      controlMap,\r\n      filterData,\r\n      nfilterSampleType,\r\n      filterSampleType,\r\n      nfilterProjectType,\r\n      selectedRecordfilter1,\r\n\r\n\r\n    } = this.state;\r\n\r\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n      selectedRecord = this.props.Login.selectedRecord;\r\n      updateState = true;\r\n      this.setState({ selectedRecord, selectedRecordfilter });\r\n    }\r\n    if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n      userRoleControlRights = [];\r\n      if (this.props.Login.userRoleControlRights) {\r\n        this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode\r\n        ] &&\r\n          Object.values(\r\n            this.props.Login.userRoleControlRights[\r\n            this.props.Login.userInfo.nformcode\r\n            ]\r\n          ).map((item) => userRoleControlRights.push(item.ncontrolcode));\r\n      }\r\n      controlMap = getControlMap(\r\n        this.props.Login.userRoleControlRights,\r\n        this.props.Login.userInfo.nformcode\r\n      );\r\n      this.setState({ controlMap, userRoleControlRights });\r\n      //   updateState = true;\r\n    }\r\n\r\n    let nsampletypecode = this.state.nfilterSampleType || {};\r\n    let nprojecttypecode = this.state.nfilterProjectType || {};\r\n\r\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n\r\n      nfilterSampleType = this.state.nfilterSampleType || {};\r\n\r\n      const filterSampleType = constructOptionList(this.props.Login.masterData.filterSampleType || [], \"nsampletypecode\",\r\n        \"ssampletypename\", undefined, undefined, undefined);\r\n\r\n      let ProjectViewFilterList = filterSampleType.get(\"OptionList\");\r\n      nsampletypecode = ProjectViewFilterList[0];\r\n      selectedRecordfilter = { nsampletypecodevalue: nsampletypecode }\r\n      selectedRecord = { nsampletypecodevalue: nsampletypecode }\r\n\r\n      ////\r\n\r\n      nfilterProjectType = this.state.nfilterProjectType || {};\r\n\r\n      const filterProjectType = constructOptionList(this.props.Login.masterData.filterProjectType || [], \"nprojecttypecode\",\r\n        \"sprojecttypename\", undefined, undefined, undefined);\r\n\r\n      let ProjectTypeFilterList = filterProjectType.get(\"OptionList\");\r\n      nprojecttypecode = ProjectTypeFilterList[0];\r\n      selectedRecordfilter = { ...selectedRecordfilter, nprojecttypecodevalue: nprojecttypecode }\r\n      selectedRecord = { ...selectedRecord, nprojecttypecodevalue: nprojecttypecode }\r\n\r\n      this.setState({\r\n        ProjectViewFilterList, ProjectTypeFilterList,\r\n        selectedRecordfilter, selectedRecord, data: this.props.Login.masterData.ParentProjectView,\r\n        dataResult: process(this.props.Login.masterData.ParentProjectView || [], this.state.dataState)\r\n      });\r\n\r\n      ////\r\n\r\n      if (this.props.Login.masterData.SelectedSampleType && this.props.Login.masterData.SelectedSampleType !== previousProps.Login.masterData.SelectedSampleType) {\r\n        nfilterSampleType = {\r\n          label: this.props.Login.masterData.SelectedSampleType.ssampletypename,\r\n          value: this.props.Login.masterData.SelectedSampleType.nsampletypecode,\r\n          item: this.props.Login.masterData.SelectedSampleType,\r\n        };\r\n      }\r\n\r\n      if (this.props.Login.masterData.SelectedProjectType && this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\r\n        nfilterProjectType = {\r\n          label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\r\n          value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\r\n          item: this.props.Login.masterData.SelectedProjectType,\r\n        };\r\n      }\r\n      //  selectedRecordfilter = {nsampletypecodevalue:nfilterSampleType}\r\n      filterData = this.generateBreadCrumData();\r\n      updateState = true;\r\n      this.setState({ filterData, selectedRecordfilter });\r\n    }\r\n\r\n\r\n    if (this.props.Login.masterData.SelectedSampleType !== previousProps.Login.masterData.SelectedSampleType) {\r\n\r\n      let nsampletypecodevalue = this.props.Login.masterData.SelectedSampleType ?\r\n        {\r\n          label: this.props.Login.masterData.SelectedSampleType.ssampletypename,\r\n          value: this.props.Login.masterData.SelectedSampleType.nsampletypecode,\r\n          item: this.props.Login.masterData.SelectedSampleType\r\n        } : \"\"\r\n      //  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\r\n      selectedRecordfilter = { ...selectedRecordfilter1, nsampletypecodevalue }\r\n      selectedRecord = { ...selectedRecord, nsampletypecodevalue: nsampletypecode }\r\n      // nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\r\n      this.setState({\r\n        selectedRecordfilter, selectedRecord\r\n\r\n      });\r\n\r\n    }\r\n    ////\r\n    if (this.props.Login.masterData.SelectedProjectType !== previousProps.Login.masterData.SelectedProjectType) {\r\n\r\n      let nprojecttypecodevalue = this.props.Login.masterData.SelectedProjectType ?\r\n        {\r\n          label: this.props.Login.masterData.SelectedProjectType.sprojecttypename,\r\n          value: this.props.Login.masterData.SelectedProjectType.nprojecttypecode,\r\n          item: this.props.Login.masterData.SelectedProjectType\r\n        } : \"\"\r\n      //  nsampletypecode=ProjectViewFilterList[ProjectViewFilterList.length-1];\r\n      selectedRecordfilter = { ...selectedRecordfilter, nprojecttypecodevalue }\r\n      selectedRecord = { ...selectedRecord, nprojecttypecodevalue: nprojecttypecode }\r\n      // nfilterSampleType = this.props.Login.masterData.nfilterSampleType;\r\n      this.setState({\r\n        selectedRecordfilter, selectedRecord\r\n\r\n      });\r\n\r\n    }\r\n    // if (this.props.Login.masterData.nfilterSampleType !== previousProps.Login.masterData.nfilterSampleType) {\r\n\r\n    // }\r\n\r\n  }\r\n  generateBreadCrumData() {\r\n    const breadCrumbData = [];\r\n    if (this.props.Login.masterData && this.props.Login.masterData.SelectedSampleType) {\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.SelectedSampleType\r\n          ? this.props.Login.masterData.SelectedSampleType.ssampletypename\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.SelectedProjectType\r\n            ? this.props.Login.masterData.SelectedProjectType.sprojecttypename\r\n            : \"NA\",\r\n        });\r\n\r\n    } else if (this.props.Login.masterData && this.props.Login.masterData.SelectedProjectView) {\r\n\r\n      /*    breadCrumbData.push({\r\n            label: \"IDS_SAMPLETYPE\",\r\n            value: this.state.selectedRecord.nsampletypecode\r\n              ? this.state.selectedRecord.nsampletypecode.label\r\n              : \"NA\",\r\n          }); */\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.SelectedProjectView\r\n          ? this.props.Login.masterData.SelectedProjectView.ssampletypename\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.SelectedProjectView\r\n            ? this.props.Login.masterData.SelectedProjectView.ssampletypename\r\n            : \"NA\",\r\n        });\r\n\r\n    } else {\r\n\r\n      /*       breadCrumbData.push({\r\n             label: \"IDS_SAMPLETYPE\",\r\n             value:  this.state.selectedRecord.nsampletypecodevalue\r\n               ? this.state.selectedRecord.nsampletypecodevalue.label\r\n               : \"NA\",\r\n           }); */\r\n\r\n      breadCrumbData.push({\r\n        label: \"IDS_SAMPLETYPE\",\r\n        value: this.props.Login.masterData.nfilterSampleType\r\n          ? this.props.Login.masterData.nfilterSampleType.label\r\n          : \"NA\",\r\n      },\r\n        {\r\n          label: \"IDS_PROJECTTYPE\",\r\n          value: this.props.Login.masterData.nfilterSampleType\r\n            ? this.props.Login.masterData.nfilterSampleType.label\r\n            : \"NA\",\r\n        });\r\n\r\n    }\r\n    return breadCrumbData;\r\n  }\r\n\r\n  openFilter = () => {\r\n    let showFilter = !this.props.Login.showFilter;\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  closeFilter = () => {\r\n    const updateInfo = {\r\n      typeName: DEFAULT_RETURN,\r\n      data: { showFilter: false },\r\n    };\r\n    this.props.updateStore(updateInfo);\r\n  };\r\n\r\n  onFilterSubmit = () => {\r\n    this.searchRef.current.value = \"\";\r\n\r\n    // if (this.state.nfilterSampleType.value) {\r\n    // if (this.state.selectedRecord.nsampletypecodevalue.value) {\r\n    //if ((this.state.selectedRecord).length>0) {\r\n\r\n    // if (Object.values(this.state.selectedRecordfilter.nsampletypecodevalue).length && this.state.selectedRecordfilter.nsampletypecodevalue !== undefined) {\r\n\r\n    if (this.state.selectedRecordfilter !== undefined) {\r\n      if (this.state.selectedRecordfilter.nsampletypecodevalue !== undefined && this.state.selectedRecordfilter.nprojecttypecodevalue !== \"\") {\r\n        let inputParam = {\r\n          inputData: {\r\n            nsampletypecode: this.state.selectedRecordfilter.nsampletypecodevalue.value,\r\n            nprojecttypecode: this.state.selectedRecordfilter.nprojecttypecodevalue.value,\r\n            userinfo: this.props.Login.userInfo,\r\n            // nfilterSampleType: this.state.nfilterSampleType,\r\n            nfilterSampleType: this.state.selectedRecordfilter.nsampletypecodevalue,\r\n          },\r\n          // classUrl: \"projectview\",\r\n          methodUrl: \"ProjectViewBySampleType\",\r\n        };\r\n        this.props.changeSampleTypeFilter(\r\n          inputParam,\r\n          this.props.Login.masterData.filterSampleType\r\n        );\r\n      } else {\r\n\r\n        toast.warn(this.props.intl.formatMessage({ id: \"IDS_PROJECTTYPENOTAVAILABLE\", }));\r\n\r\n      }\r\n    } else {\r\n\r\n      toast.warn(this.props.intl.formatMessage({ id: \"IDS_SAMPLETYPENOTAVAILABLE\", }));\r\n\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n  callService,\r\n  crudMaster,\r\n  filterColumnData,\r\n  updateStore,\r\n  validateEsignCredential,\r\n  changeSampleTypeFilter,\r\n  viewAttachment, addProjectMaster, getProjectView, getProjectmasterAddMemberService, addProjectMasterFile, getuserComboServices\r\n})(injectIntl(ProjectView));\r\n"]},"metadata":{},"sourceType":"module"}