{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{FormattedMessage,injectIntl}from'react-intl';import{Button,Row,Col}from'react-bootstrap';import DataGridWithSelection from'../../components/data-grid/DataGridWithSelection';import{faSave}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{MediaHeader}from'../product/product.styled';import{toast}from'react-toastify';import{process}from\"@progress/kendo-data-query\";//ALPD-5137--Vignesh R(28-01-2025)---Function component convert to Class component\nvar AddSample=/*#__PURE__*/function(_Component){_inherits(AddSample,_Component);var _super=_createSuper(AddSample);function AddSample(props){var _this;_classCallCheck(this,AddSample);_this=_super.call(this,props);_this.headerSelectionChange=function(event){var checked=event.syntheticEvent.target.checked;var eventData=event.target.props.data.hasOwnProperty('data')?event.target.props.data.data||[]:event.target.props.data||[];var samples=//event.target.props.data \n_this.state.samples||[];var addedSamplesList=_this.state.addedSamplesList||[];if(checked){var _this$setState;var data=samples.map(function(item){var matchingData=eventData.find(function(dataItem){return dataItem.ntransactiontestcode===item.ntransactiontestcode;});if(matchingData){var existingIndex=addedSamplesList.findIndex(function(x){return x.ntransactiontestcode===item.ntransactiontestcode;});if(existingIndex===-1){var newItem=_objectSpread(_objectSpread({},item),{},{selected:true// ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\n// jsondata: { samplelist: item },\n// jsonuidata: { samplelist: item },\n});addedSamplesList.push(newItem);}// ALPD-5523 - commented by Gowtham in 10/03/2025 - Run batch creation -->In the sample grid filter, samples are repeated.\n// else {\n//         const oldItem = { ...addedSamplesList[existingIndex], selected: true };\n//         const newItem = {\n//                 ...oldItem,\n//                 selected: true,\n//                 jsondata: { samplelist: oldItem },\n//                 jsonuidata: { samplelist: oldItem },\n//         };\n//         addedSamplesList.push(newItem);\n// }\nreturn _objectSpread(_objectSpread({},item),{},{selected:true});}else{return _objectSpread(_objectSpread({},item),{},{selected:item.selected?true:false});}});_this.setState((_this$setState={samples:data,addedSamplesList:addedSamplesList,addComponentDataListCopy:_this.valiateCopy(_this.state.addedSamplesListSortedList||[],data||[],addedSamplesList||[]),addSelectAll:_this.valiateCheckAll(process(data||[],_this.state.dataState))},_defineProperty(_this$setState,\"addSelectAll\",checked),_defineProperty(_this$setState,\"deleteSelectAll\",false),_this$setState));}else{var _this$setState2;var _addedSamplesList=_this.state.addedSamplesList||[];var deletedListdData=_this.state.deletedList||[];var _data=samples.map(function(x){var matchedItem=eventData.find(function(item){return x.ntransactiontestcode===item.ntransactiontestcode;});if(matchedItem){_addedSamplesList=_addedSamplesList.filter(function(item1){return item1.npreregno!==matchedItem.npreregno;});deletedListdData=deletedListdData.filter(function(item1){return item1.npreregno!==matchedItem.npreregno;});matchedItem.selected=false;return matchedItem;}return x;});_this.setState((_this$setState2={samples:_data,addedSamplesList:_addedSamplesList,deletedList:deletedListdData,addSelectAll:_this.valiateCheckAll(_addedSamplesList),deleteSelectAll:_this.valiateCheckAll(_addedSamplesList)},_defineProperty(_this$setState2,\"addSelectAll\",checked),_defineProperty(_this$setState2,\"deleteSelectAll\",false),_defineProperty(_this$setState2,\"addComponentDataListCopy\",_this.valiateCopy(_this.state.addedSamplesListSortedList||[],_data||[],_addedSamplesList||[])),_this$setState2));}};_this.addSaveDataGrid=function(){var filterdata1=_this.state.dataState?process(_this.state.addComponentDataListCopy||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{take:_this.state.samples.length})).data:[];var sortListedData1=filterdata1.filter(function(x){return _this.state.addedSamplesList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});});var exists=_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined?sortListedData1.length>0?true:false:true;var sortListedDataList=_this.state.addedSamplesList&&_this.state.addedSamplesList.filter(function(addedItem){return process(_this.state.samples||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});})||[];if(sortListedDataList&&sortListedDataList.length>0&&exists){var addedSamplesListSortedList=[];var updatedList=[];var ListedData=[];var sortListedData=[];var updatedDataList=[];if(_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined){var filterdata=process(_this.state.addComponentDataListCopy||_this.state.samples||[],_this.state.dataState).data||[];sortListedData=filterdata.filter(function(x){return _this.state.addedSamplesList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});});updatedDataList=_this.state.addedSamplesList.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedList=process(_this.state.addComponentDataListCopy||_this.state.samples||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{skip:0,take:_this.state.samples.length})).data.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedDataList.map(function(x){if(x.selected){ListedData.push(x);}});}else{ListedData=_this.state.addedSamplesList.filter(function(addedItem){return!process(_this.state.samples||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});})||[];sortListedData=_this.state.addedSamplesList.filter(function(addedItem){return process(_this.state.samples||[],_this.state.dataState).data.some(function(item){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});updatedList=_this.state.samples.filter(function(item){return!sortListedData.some(function(addedItem){return addedItem.ntransactiontestcode===item.ntransactiontestcode;});});}if(_this.state.addedSamplesListSortedList.length>0){_this.state.addedSamplesListSortedList.map(function(item){var newItem=JSON.parse(JSON.stringify(item));newItem[\"jsondata\"]={};newItem[\"jsonuidata\"]={};newItem[\"selected\"]=false;newItem[\"jsondata\"]['samplelist']=_objectSpread(_objectSpread({},item),{},{selected:false});newItem[\"jsonuidata\"]['samplelist']=_objectSpread(_objectSpread({},item),{},{selected:false});addedSamplesListSortedList.push(newItem);});}sortListedData.map(function(item){var newItem=JSON.parse(JSON.stringify(item));newItem[\"jsondata\"]={};newItem[\"jsonuidata\"]={};newItem[\"selected\"]=false;newItem[\"jsondata\"]['samplelist']=_objectSpread(_objectSpread({},item),{},{selected:false});newItem[\"jsonuidata\"]['samplelist']=_objectSpread(_objectSpread({},item),{},{selected:false});addedSamplesListSortedList.push(newItem);});_this.props.childDataChange(addedSamplesListSortedList);_this.setState({samples:updatedList||[],addSelectAll:_this.valiateCheckAll(_this.state.dataState&&_this.state.dataState.filter!==null&&_this.state.dataState.filter!==undefined?process(updatedList||[],_objectSpread(_objectSpread({},_this.state.dataState),{},{skip:0,take:updatedList.length})).data||[]:updatedList),addedSamplesListSortedList:addedSamplesListSortedList,addedSamplesList:ListedData,addComponentDataListCopy:_this.valiateCopy(addedSamplesListSortedList||[],updatedList||[],ListedData||[]),dataState:_this.dataStateValidation()});}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELCETONESAMPLE\"}));}};_this.handleClickDelete=function(row){var updatedAddList=[];if(row){var ntransactiontestcode=row&&row.dataItem&&row.dataItem.ntransactiontestcode;var updatedList=_this.state.addedSamplesListSortedList&&_this.state.addedSamplesListSortedList.filter(function(item){return item.ntransactiontestcode!==ntransactiontestcode;});var exists=_this.state.samples&&_this.state.samples.some(function(item){return item.ntransactiontestcode===ntransactiontestcode;});if(!exists){updatedAddList=_this.state.samples&&_this.state.samples.map(function(item){return item;});// ALPD-5535 - delete json by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\nrow.dataItem&&row.dataItem.jsondata&&delete row.dataItem.jsondata;row.dataItem&&row.dataItem.jsonuidata&&delete row.dataItem.jsonuidata;updatedAddList.push(_objectSpread(_objectSpread({},row.dataItem),{},{selected:false}));}_this.props.childDataChange(updatedList);_this.setState({samples:updatedAddList,addedSamplesListSortedList:updatedList,addComponentDataListCopy:_this.valiateCopy(updatedList||[],updatedAddList||[]),addSelectAll:_this.valiateCheckAll(updatedAddList)});}};_this.selectionChange=function(event){var addedSamplesList=_this.state.addedSamplesList||[];var samples=_this.state.samples.map(function(item){if(item.ntransactiontestcode===event.dataItem.ntransactiontestcode){item.selected=!event.dataItem.selected;if(item.selected){var newItem=JSON.parse(JSON.stringify(item));// ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\n// newItem[\"jsondata\"] = {}\n// newItem[\"jsonuidata\"] = {}\ndelete newItem['selected'];newItem.selected=true;// newItem[\"jsondata\"]['samplelist'] = item\n// newItem[\"jsonuidata\"]['samplelist'] = item\naddedSamplesList.push(newItem);}else{addedSamplesList=addedSamplesList.filter(function(item1){return item1.ntransactiontestcode!==item.ntransactiontestcode;});}}return item;});_this.setState({addSelectAll:_this.valiateCheckAll(process(samples||[],_this.state.dataState).data),samples:samples,addedSamplesList:addedSamplesList,deleteSelectAll:_this.valiateCheckAll(addedSamplesList),addComponentDataListCopy:_this.valiateCopy(_this.state.addedSamplesListSortedList||[],samples||[],addedSamplesList||[])});};_this.dataStateChangeBatchSample=function(event){var updatedList=[];if(event.dataState&&event.dataState.filter===null){var addComponentDataListCopy=_this.state.addComponentDataListCopy||_this.state.samples||[];addComponentDataListCopy.forEach(function(x){var exists=_this.state.addedSamplesListSortedList.some(function(item){return item.ntransactiontestcode===x.ntransactiontestcode;});if(!exists){updatedList.push(x);}});}else{updatedList=_this.state.samples||[];}_this.setState({dataResult:process(_this.state.samples||[],event.dataState),dataState:event.dataState,samples:updatedList,addSelectAll:event.dataState&&event.dataState.filter===null?_this.valiateCheckAll(updatedList):_this.valiateCheckAll(process(updatedList||[],event.dataState).data)});};var dataState={skip:0,take:10};_this.state={addedSamplesListSortedList:[],dataState:dataState};_this.formRef=React.createRef();return _this;}_createClass(AddSample,[{key:\"render\",value:function render(){var _this2=this;var extractedColumnList=[];//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\nvar count=(this.state.addedSamplesListSortedList||[]).length;if(this.props.nneedsubsample){extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\"},{\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\"});}else{extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\",\"width\":\"155px\"});}extractedColumnList.push({\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\":\"155px\"},{\"idsName\":\"IDS_SAMPLENAME\",\"dataField\":\"ssamplename\",\"width\":\"155px\"},{\"idsName\":\"IDS_REGDATE\",\"dataField\":\"dregdate\",\"width\":\"200px\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,\"                               \",/*#__PURE__*/React.createElement(Col,{className:\"d-flex justify-content-end p-2\",md:12},/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this2.addSaveDataGrid();}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ADD\",defaultMessage:\"Add\"}))),/*#__PURE__*/React.createElement(Row,{style:{marginTop:'10px'}},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGridWithSelection,{primaryKeyField:\"nbatchsamplecode\",data:this.state.samples||[]//dataState={this.state.dataState}\n//dataResult={this.state.dataResult}\n,selectAll:this.state.addSelectAll,userInfo:this.props.userInfo,title:this.props.intl.formatMessage({id:\"IDS_SELECTTODELETE\"}),headerSelectionChange:this.headerSelectionChange,selectionChange:this.selectionChange,dataStateChange:this.dataStateChangeBatchSample,extractedColumnList:extractedColumnList,dataState:this.state.dataState?this.state.dataState:{skip:0,take:10},dataResult:this.state.dataResult?this.state.dataResult:process(this.state.samples||[],this.state.dataState?this.state.dataState:{skip:0,take:10}),scrollable:'scrollable',pageable:true})))),/*#__PURE__*/React.createElement(Row,{style:{marginTop:'10px'}},/*#__PURE__*/React.createElement(Col,{md:'12'},/*#__PURE__*/React.createElement(MediaHeader,{className:\"mb-3\"},/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"black\"}},this.props.intl.formatMessage({id:\"IDS_SELECTEDSAMPLES\"})+\" : \"),/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"blue\"}},count))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(DataGridWithSelection,{primaryKeyField:\"nbatchsamplecode\",userInfo:this.props.userInfo,data:this.state.addedSamplesListSortedList||[],title:this.props.intl.formatMessage({id:\"IDS_SELECTTODELETE\"}),extractedColumnList:extractedColumnList,hideColumnFilter:true,isHidemulipleselect:true,isActionRequired:true,handleClickDelete:this.handleClickDelete}))));}//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\n},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps,previousState){if(this.props.samples!==previousProps.samples){this.setState({samples:this.props.samples||[]});}if(this.state.samples!==previousState.samples){this.setState({dataResult:process(this.state.samples||[],this.state.dataState)});}}//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\n},{key:\"valiateCopy\",value://ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\nfunction valiateCopy(sortedList,samples,addedSamplesList){var addedSamplesLists=addedSamplesList||this.state.addedSamplesList||[];var listData=this.props.samples||[];var copyingList=listData.filter(function(item1){return!sortedList.some(function(item2){return item1.ntransactiontestcode===item2.ntransactiontestcode;});})||[];var copyingListData=copyingList.map(function(item){var existsInAddComponentDataList=addedSamplesLists.some(function(item1){return item1.ntransactiontestcode===item.ntransactiontestcode;});if(existsInAddComponentDataList){return _objectSpread(_objectSpread({},item),{},{selected:true});}else{return _objectSpread(_objectSpread({},item),{},{selected:false});}});return copyingListData;}//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\n},{key:\"dataStateValidation\",value:function dataStateValidation(){var dataState=_objectSpread({},this.state.dataState);var count=0;this.state.dataResult.data.map(function(x){if(x.selected){count++;}});if(this.state.dataResult.data){if(parseInt(this.state.dataResult.total)===parseInt(count)+parseInt(this.state.dataState.skip)){var skipcount=this.state.dataState.skip>0?this.state.dataState.skip-this.state.dataState.take:this.state.dataState.skip;dataState=_objectSpread(_objectSpread({},dataState),{},{skip:skipcount,take:this.state.dataState.take});}}return dataState;}//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\n},{key:\"valiateCheckAll\",value:function valiateCheckAll(data){var selectAll=true;if(data&&data.length>0){data.forEach(function(dataItem){if(dataItem.selected){if(dataItem.selected===false){selectAll=false;}}else{selectAll=false;}});}else{selectAll=false;}return selectAll;}//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\n}]);return AddSample;}(Component);export default injectIntl(AddSample);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/batchruncreation/AddSample.js"],"names":["React","Component","FormattedMessage","injectIntl","Button","Row","Col","DataGridWithSelection","faSave","FontAwesomeIcon","MediaHeader","toast","process","AddSample","props","headerSelectionChange","event","checked","syntheticEvent","target","eventData","data","hasOwnProperty","samples","state","addedSamplesList","map","item","matchingData","find","dataItem","ntransactiontestcode","existingIndex","findIndex","x","newItem","selected","push","setState","addComponentDataListCopy","valiateCopy","addedSamplesListSortedList","addSelectAll","valiateCheckAll","dataState","deletedListdData","deletedList","matchedItem","filter","item1","npreregno","deleteSelectAll","addSaveDataGrid","filterdata1","take","length","sortListedData1","some","exists","undefined","sortListedDataList","addedItem","updatedList","ListedData","sortListedData","updatedDataList","filterdata","skip","JSON","parse","stringify","childDataChange","dataStateValidation","warn","intl","formatMessage","id","handleClickDelete","row","updatedAddList","jsondata","jsonuidata","selectionChange","dataStateChangeBatchSample","forEach","dataResult","formRef","createRef","extractedColumnList","count","nneedsubsample","marginTop","userInfo","fontWeight","color","previousProps","previousState","sortedList","addedSamplesLists","listData","copyingList","item2","copyingListData","existsInAddComponentDataList","parseInt","total","skipcount","selectAll"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport {Button,Row, Col} from 'react-bootstrap';\r\nimport DataGridWithSelection from '../../components/data-grid/DataGridWithSelection';\r\nimport {faSave } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { MediaHeader } from '../product/product.styled';\r\nimport { toast } from 'react-toastify';\r\nimport { process } from \"@progress/kendo-data-query\";\r\n\r\n   //ALPD-5137--Vignesh R(28-01-2025)---Function component convert to Class component\r\n   class AddSample extends Component {\r\n        \r\n        constructor(props) {\r\n\r\n                super(props);\r\n                const dataState = { skip: 0, take: 10 };\r\n                this.state = {\r\n                        addedSamplesListSortedList: [], dataState\r\n                };\r\n                this.formRef = React.createRef();\r\n        }\r\n        render() {\r\n        const extractedColumnList = [];\r\n        //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n        let count = (this.state.addedSamplesListSortedList || []).length;\r\n        if (this.props.nneedsubsample){\r\n                extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\"},\r\n                        {\"idsName\":\"IDS_SAMPLEARNO\",\"dataField\":\"ssamplearno\" } \r\n                );            \r\n        }\r\n            else{\r\n                extractedColumnList.push({\"idsName\":\"IDS_ARNUMBER\",\"dataField\":\"sarno\", \"width\": \"155px\"});\r\n            }\r\n            extractedColumnList .push(      \r\n                {\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestname\",\"width\": \"155px\"},\r\n                {\"idsName\":\"IDS_SAMPLENAME\",\"dataField\":\"ssamplename\", \"width\": \"155px\"},\r\n                {\"idsName\":\"IDS_REGDATE\",\"dataField\":\"dregdate\",\"width\": \"200px\" },\r\n             );\r\n       return (<>\r\n       { /*ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid*/}\r\n       <Row>                               <Col className=\"d-flex justify-content-end p-2\" md={12}>\r\n                                <Button className=\"btn-user btn-primary-blue\"\r\n                                onClick={() => this.addSaveDataGrid()}\r\n                                >\r\n                                <FontAwesomeIcon icon={faSave} /> { }\r\n                                <FormattedMessage id='IDS_ADD' defaultMessage='Add' />\r\n                                </Button>\r\n                        </Col>\r\n        <Row style={{marginTop:'10px'}}>\r\n                <Col>                     \r\n                        <DataGridWithSelection                               \r\n                                  primaryKeyField={\"nbatchsamplecode\"}                            \r\n                                  data={this.state.samples ||[]} \r\n                                  //dataState={this.state.dataState}\r\n                                  //dataResult={this.state.dataResult}\r\n                                  selectAll={this.state.addSelectAll}\r\n                                  userInfo={this.props.userInfo}\r\n                                  title={this.props.intl.formatMessage({ id: \"IDS_SELECTTODELETE\" })}\r\n                                  headerSelectionChange={this.headerSelectionChange}\r\n                                  selectionChange={this.selectionChange}\r\n                                  dataStateChange={this.dataStateChangeBatchSample}\r\n                                  extractedColumnList={extractedColumnList}\r\n                                  dataState={this.state.dataState ? this.state.dataState : { skip: 0, take: 10 }}\r\n                                  dataResult={this.state.dataResult ? this.state.dataResult :\r\n                                  process(this.state.samples || [], this.state.dataState\r\n                                   ? this.state.dataState : { skip: 0, take: 10 })}   \r\n                                   scrollable={'scrollable'}\r\n                                   pageable={true}                           \r\n                        /> \r\n                </Col>\r\n        </Row>\r\n        </Row>\r\n \r\n                        <Row style={{marginTop:'10px'}}>\r\n\r\n\r\n                        {/*ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid*/}\r\n                        <Col md={'12'}>\r\n                                        <MediaHeader className='mb-3'>\r\n                                                <span style={{ fontWeight: \"bold\", color: \"black\" }}>\r\n                                                        {this.props.intl.formatMessage({ id: \"IDS_SELECTEDSAMPLES\" }) + \" : \"}\r\n                                                </span>\r\n                                                <span style={{ fontWeight: \"bold\", color: \"blue\" }}>\r\n                                                        {count}\r\n                                                </span>\r\n                                        </MediaHeader>\r\n                                </Col>\r\n                                <Col>\r\n                                        <DataGridWithSelection\r\n                                                 primaryKeyField={\"nbatchsamplecode\"}\r\n                                                 userInfo={this.props.userInfo}\r\n                                                 data={this.state.addedSamplesListSortedList || []}\r\n                                                 title={this.props.intl.formatMessage({ id: \"IDS_SELECTTODELETE\" })}\r\n                                                 extractedColumnList={extractedColumnList}                                                \r\n                                             \r\n                                                 hideColumnFilter={true}\r\n                                                 isHidemulipleselect={true}\r\n                                                 isActionRequired={true}\r\n                                                 handleClickDelete={this.handleClickDelete}\r\n                                        />\r\n                                </Col>\r\n                {/* <Col md={6}>\r\n                        <span className=\"add-txt-btn\">\r\n                                <FormattedMessage id=\"IDS_ADDEDCOMPONENTS\" defaultMessage=\"Added Components\"/>\r\n                                 : {props.addedComponentList && props.addedComponentList.length}\r\n                        </span>\r\n                </Col> */}\r\n\r\n                {/* <Col md={12} className=\"d-flex justify-content-end\">\r\n                     \r\n                        <Button variant=\"outline-danger\" onClick={() => props.onDeleteSelectedComponent()} >\r\n                                <FormattedMessage id='IDS_REMOVECOMPONENTS' defaultMessage='Remove Components' />\r\n                        </Button> */}\r\n                        {/* <Nav.Link name=\"addrole\" className=\"add-txt-btn\" onClick={() => props.onDeleteSelectedComponent()}>\r\n                                <FormattedMessage id='IDS_DELETECOMPONENTS' defaultMessage='Delete Components' />\r\n                        </Nav.Link> */}\r\n                {/* </Col> */}\r\n        </Row>\r\n        {/* <Row style={{marginTop:'10px'}}> \r\n                 <Col>      \r\n                        <DataGridWithSelection\r\n                                primaryKeyField={\"npreregno\"}                               \r\n                                data={props.samples }\r\n                                // componentPopupSkip={props.componentPopupSkip}\r\n                                // componentPopupTake={props.componentPopupTake}\r\n                                // componentPageSizes={props.componentPageSizes}\r\n                                selectAll={props.deleteSelectAll}\r\n                                title={props.intl.formatMessage({id:\"IDS_SELECTTODELETE\"})}\r\n                                headerSelectionChange={props.addedHeaderSelectionChange}\r\n                                selectionChange={props.addedSelectionChange}\r\n                                extractedColumnList={[  {idsName:\"IDS_ARNO\", dataField:\"sarno\"},\r\n                                                        {idsName:\"IDS_COMPONENTNAME\", dataField:\"scomponentname\"},\r\n                                                        {idsName:\"IDS_BATCHLOTNO\", dataField:\"smanuflotno\"},\r\n                                                        {idsName:\"IDS_SPECNAME\", dataField:\"sspecname\"}]}\r\n                              \r\n                        /> \r\n                </Col>\r\n        </Row> */}\r\n        </>\r\n       )\r\n   }\r\n     //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n componentDidUpdate(previousProps,previousState) {\r\n        if (this.props.samples !== previousProps.samples) {\r\n                this.setState({ samples: this.props.samples || [] });\r\n        }\r\n        if(this.state.samples!==previousState.samples){\r\n                this.setState({ dataResult: process(this.state.samples || [], this.state.dataState) });\r\n        }\r\n}\r\n\r\n            //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\nheaderSelectionChange = (event) => {\r\n                const checked = event.syntheticEvent.target.checked;\r\n                const eventData = event.target.props.data.hasOwnProperty('data') ? event.target.props.data.data || [] : event.target.props.data || [];\r\n                let samples = //event.target.props.data \r\n                        this.state.samples || [];\r\n                let addedSamplesList = this.state.addedSamplesList || [];\r\n                if (checked) {\r\n                        const data = samples.map(item => {\r\n                                const matchingData = eventData.find(dataItem => dataItem.ntransactiontestcode === item.ntransactiontestcode);\r\n                                if (matchingData) {\r\n                                        const existingIndex = addedSamplesList.findIndex(\r\n                                                x => x.ntransactiontestcode === item.ntransactiontestcode\r\n                                        );\r\n\r\n                                        if (existingIndex === -1) {\r\n                                                const newItem = {\r\n                                                        ...item,\r\n                                                        selected: true,\r\n                                                        // ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                                        // jsondata: { samplelist: item },\r\n                                                        // jsonuidata: { samplelist: item },\r\n                                                };\r\n                                                addedSamplesList.push(newItem);\r\n                                        } \r\n                                        // ALPD-5523 - commented by Gowtham in 10/03/2025 - Run batch creation -->In the sample grid filter, samples are repeated.\r\n                                        // else {\r\n                                        //         const oldItem = { ...addedSamplesList[existingIndex], selected: true };\r\n                                        //         const newItem = {\r\n                                        //                 ...oldItem,\r\n                                        //                 selected: true,\r\n                                        //                 jsondata: { samplelist: oldItem },\r\n                                        //                 jsonuidata: { samplelist: oldItem },\r\n                                        //         };\r\n                                        //         addedSamplesList.push(newItem);\r\n                                        // }\r\n\r\n                                        return { ...item, selected: true };\r\n                                } else {\r\n                                        return { ...item, selected: item.selected ? true : false };\r\n                                }\r\n                        });\r\n                        this.setState({\r\n                                samples: data, addedSamplesList,\r\n                                addComponentDataListCopy: this.valiateCopy(this.state.addedSamplesListSortedList || [], data || [], addedSamplesList || []),\r\n                                addSelectAll: this.valiateCheckAll(process(data || [], this.state.dataState)),\r\n                                addSelectAll: checked, deleteSelectAll: false\r\n                        });\r\n                } else {\r\n                        let addedSamplesList = this.state.addedSamplesList || [];\r\n                        let deletedListdData = this.state.deletedList || [];\r\n                        const data = samples.map(x => {\r\n                                const matchedItem = eventData.find(item => x.ntransactiontestcode === item.ntransactiontestcode);\r\n                                if (matchedItem) {\r\n                                        addedSamplesList = addedSamplesList.filter(item1 => item1.npreregno !== matchedItem.npreregno);\r\n                                        deletedListdData = deletedListdData.filter(item1 => item1.npreregno !== matchedItem.npreregno);\r\n                                        matchedItem.selected = false;\r\n                                        return matchedItem;\r\n                                }\r\n                                return x;\r\n                        });\r\n\r\n                        this.setState({\r\n                                samples: data, addedSamplesList: addedSamplesList, deletedList: deletedListdData,\r\n                                addSelectAll: this.valiateCheckAll(addedSamplesList),\r\n                                deleteSelectAll: this.valiateCheckAll(addedSamplesList),\r\n                                addSelectAll: checked, deleteSelectAll: false,\r\n                                addComponentDataListCopy: this.valiateCopy(this.state.addedSamplesListSortedList || [], data || [], addedSamplesList || []),\r\n                        });\r\n                }\r\n        }\r\n\r\n    //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n  addSaveDataGrid = () => {\r\n                let filterdata1 = this.state.dataState ? process(this.state.addComponentDataListCopy || [], { ...this.state.dataState, take: this.state.samples.length }).data : [];\r\n                let sortListedData1 = filterdata1.filter(x =>\r\n                        this.state.addedSamplesList.some(item => item.ntransactiontestcode === x.ntransactiontestcode)\r\n                );\r\n                let exists = this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined ?\r\n                        sortListedData1.length > 0 ? true : false : true;\r\n                let sortListedDataList = this.state.addedSamplesList && this.state.addedSamplesList.filter(\r\n                        (addedItem) => process(this.state.samples || [], this.state.dataState).data.some(\r\n                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                        )\r\n                ) || [];\r\n                if (sortListedDataList && sortListedDataList.length > 0 && exists) {\r\n                        let addedSamplesListSortedList = [];\r\n                        let updatedList = [];\r\n                        let ListedData = [];\r\n                        let sortListedData = [];\r\n                        let updatedDataList = [];\r\n                        if (this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined) {\r\n                                let filterdata = process(this.state.addComponentDataListCopy || this.state.samples || [],\r\n                                        this.state.dataState ).data || [];\r\n                                sortListedData = filterdata.filter(x =>\r\n                                        this.state.addedSamplesList.some(item => item.ntransactiontestcode === x.ntransactiontestcode)\r\n                                );\r\n                                updatedDataList = this.state.addedSamplesList.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedList = process(this.state.addComponentDataListCopy || this.state.samples || [],{ ...this.state.dataState,skip:0, take: this.state.samples.length } ).data.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedDataList.map(x => { if (x.selected) { ListedData.push(x) } });\r\n\r\n                        } else {\r\n\r\n                                ListedData = this.state.addedSamplesList.filter(\r\n                                        (addedItem) => !process(this.state.samples || [], this.state.dataState).data.some(\r\n                                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                ) || [];\r\n\r\n                                sortListedData = this.state.addedSamplesList.filter(\r\n                                        (addedItem) => process(this.state.samples || [], this.state.dataState).data.some(\r\n                                                (item) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                                updatedList = this.state.samples.filter(\r\n                                        (item) => !sortListedData.some(\r\n                                                (addedItem) => addedItem.ntransactiontestcode === item.ntransactiontestcode\r\n                                        )\r\n                                );\r\n                        }\r\n                        if (this.state.addedSamplesListSortedList.length > 0) {\r\n                                this.state.addedSamplesListSortedList.map(item => {\r\n                                        const newItem = JSON.parse(JSON.stringify(item));\r\n                                        newItem[\"jsondata\"] = {}\r\n                                        newItem[\"jsonuidata\"] = {}\r\n                                        newItem[\"selected\"]=false;\r\n                                        newItem[\"jsondata\"]['samplelist'] =  {...item,selected:false}\r\n                                        newItem[\"jsonuidata\"]['samplelist'] =  {...item,selected:false}\r\n                                        addedSamplesListSortedList.push(newItem)\r\n                                })\r\n                        }\r\n                        sortListedData.map(item => {\r\n                                const newItem = JSON.parse(JSON.stringify(item));\r\n                                newItem[\"jsondata\"] = {}\r\n                                newItem[\"jsonuidata\"] = {}\r\n                                newItem[\"selected\"]=false;\r\n                                newItem[\"jsondata\"]['samplelist'] =  {...item,selected:false}\r\n                                newItem[\"jsonuidata\"]['samplelist'] =  {...item,selected:false}\r\n                                addedSamplesListSortedList.push(newItem)\r\n                        })\r\n                        this.props.childDataChange(addedSamplesListSortedList);\r\n                        this.setState({\r\n                                samples:updatedList||[],\r\n                                addSelectAll: this.valiateCheckAll(this.state.dataState && this.state.dataState.filter !== null && this.state.dataState.filter !== undefined\r\n                                        ? process(updatedList || [],\r\n                                                { ...this.state.dataState,skip:0, take: updatedList.length }).data || [] : updatedList)\r\n                                , addedSamplesListSortedList: addedSamplesListSortedList\r\n                                , addedSamplesList: ListedData,\r\n                                addComponentDataListCopy: this.valiateCopy(addedSamplesListSortedList || [], updatedList || [], ListedData || []),\r\n                                dataState: this.dataStateValidation()\r\n                        })\r\n                } else {\r\n                        toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELCETONESAMPLE\" }));\r\n                }\r\n        }\r\n\r\n                        //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n        valiateCopy(sortedList, samples, addedSamplesList) {\r\n                let addedSamplesLists = addedSamplesList || this.state.addedSamplesList || [];\r\n                let listData = this.props.samples || [];\r\n                let copyingList = listData.filter(item1 =>\r\n                        !sortedList.some(item2 => item1.ntransactiontestcode === item2.ntransactiontestcode)\r\n                ) || [];\r\n                let copyingListData = copyingList.map(item => {\r\n                        const existsInAddComponentDataList = addedSamplesLists.some(\r\n                                item1 => item1.ntransactiontestcode === item.ntransactiontestcode\r\n                        );\r\n                        if (existsInAddComponentDataList) {\r\n                                return { ...item, selected: true };\r\n                        } else {\r\n                                return { ...item, selected: false };\r\n                        }\r\n                });\r\n                return copyingListData;\r\n        }\r\n\r\n\r\n                         //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n          handleClickDelete = (row) => {\r\n                let updatedAddList = [];\r\n                if (row) {\r\n                        const ntransactiontestcode = row && row.dataItem && row.dataItem.ntransactiontestcode;\r\n                        const updatedList = this.state.addedSamplesListSortedList && this.state.addedSamplesListSortedList.filter(\r\n                                (item) => item.ntransactiontestcode !== ntransactiontestcode\r\n                        );\r\n                        const exists = this.state.samples && this.state.samples.some(\r\n                                (item) => item.ntransactiontestcode === ntransactiontestcode\r\n                        );\r\n                        if (!exists) {\r\n                                updatedAddList = this.state.samples && this.state.samples.map(item => {\r\n                                        return item\r\n                                })\r\n                                // ALPD-5535 - delete json by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                row.dataItem && row.dataItem.jsondata && delete row.dataItem.jsondata;\r\n                                row.dataItem && row.dataItem.jsonuidata && delete row.dataItem.jsonuidata;\r\n                                updatedAddList.push({ ...row.dataItem, selected: false });\r\n                        }\r\n                        this.props.childDataChange(updatedList);\r\n                        this.setState({\r\n                                samples: updatedAddList, addedSamplesListSortedList: updatedList,\r\n                                addComponentDataListCopy: this.valiateCopy(updatedList || [], updatedAddList || []),\r\n                                addSelectAll: this.valiateCheckAll(updatedAddList)\r\n                        })\r\n                }\r\n        }\r\n\r\n          dataStateValidation() {\r\n                let dataState = { ...this.state.dataState };\r\n                let count=0;\r\n                this.state.dataResult.data.map(x=>{if(x.selected){count++}});\r\n                if (this.state.dataResult.data) {\r\n                        if (parseInt(this.state.dataResult.total) ===  (parseInt(count)+parseInt(this.state.dataState.skip))) {\r\n                                let skipcount = this.state.dataState.skip > 0 ? (this.state.dataState.skip - this.state.dataState.take) :\r\n                                        this.state.dataState.skip\r\n                                dataState = { ...dataState,skip: skipcount, take: this.state.dataState.take }\r\n                        }\r\n                }\r\n               return dataState;\r\n        }\r\n\r\n//ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\nselectionChange = (event) => {\r\n                let addedSamplesList = this.state.addedSamplesList || [];\r\n                const samples = this.state.samples.map(item => {\r\n                        if (item.ntransactiontestcode === event.dataItem.ntransactiontestcode) {\r\n                                item.selected = !event.dataItem.selected;\r\n                                if (item.selected) {\r\n                                        const newItem = JSON.parse(JSON.stringify(item));\r\n                                        // ALPD-5535 - commented by Gowtham in 12/03/2025 - Run Batch Creation --> While Add/Remove Samples multiple times --> Application crash.\r\n                                        // newItem[\"jsondata\"] = {}\r\n                                        // newItem[\"jsonuidata\"] = {}\r\n                                        delete newItem['selected']\r\n                                        newItem.selected = true;\r\n                                        // newItem[\"jsondata\"]['samplelist'] = item\r\n                                        // newItem[\"jsonuidata\"]['samplelist'] = item\r\n                                        addedSamplesList.push(newItem);\r\n                                }\r\n                                else {\r\n                                        addedSamplesList = addedSamplesList.filter(item1 => item1.ntransactiontestcode !== item.ntransactiontestcode)\r\n                                }\r\n                        }\r\n                        return item;\r\n                });\r\n                this.setState({\r\n                        addSelectAll: this.valiateCheckAll(process(samples || [], this.state.dataState).data),\r\n                        samples, addedSamplesList,\r\n                        deleteSelectAll: this.valiateCheckAll(addedSamplesList),\r\n                        addComponentDataListCopy: this.valiateCopy(this.state.addedSamplesListSortedList || [], samples || [], addedSamplesList || [])\r\n                });\r\n        }\r\n\r\nvaliateCheckAll(data) {\r\n                let selectAll = true;\r\n                if (data && data.length > 0) {\r\n                        data.forEach(dataItem => {\r\n                                if (dataItem.selected) {\r\n                                        if (dataItem.selected === false) {\r\n                                                selectAll = false;\r\n                                        }\r\n                                } else {\r\n                                        selectAll = false;\r\n                                }\r\n                        })\r\n                } else {\r\n                        selectAll = false;\r\n                }\r\n                return selectAll;\r\n        }\r\n                //ALPD-5137--Vignesh R(28-01-2025)---Including filter in Data selection Kendo Grid\r\n        dataStateChangeBatchSample = (event) => {\r\n               let updatedList = [];\r\n               if (event.dataState && event.dataState.filter === null) {\r\n                       let addComponentDataListCopy = this.state.addComponentDataListCopy || this.state.samples || [];\r\n                       addComponentDataListCopy.forEach(x => {\r\n                               const exists = this.state.addedSamplesListSortedList.some(\r\n                                       item => item.ntransactiontestcode === x.ntransactiontestcode\r\n                               );\r\n                               if (!exists) {\r\n                                       updatedList.push(x);\r\n                               }\r\n                       });\r\n               } else {\r\n                       updatedList = this.state.samples || []\r\n               }\r\n               this.setState({\r\n                       dataResult: process(this.state.samples || [], event.dataState),\r\n                       dataState: event.dataState, samples: updatedList, addSelectAll: event.dataState && event.dataState.filter === null ?\r\n                               this.valiateCheckAll(updatedList) :\r\n                               this.valiateCheckAll(process(updatedList || [], event.dataState).data)\r\n               });\r\n       }\r\n}\r\n   export default injectIntl(AddSample);\r\n"]},"metadata":{},"sourceType":"module"}