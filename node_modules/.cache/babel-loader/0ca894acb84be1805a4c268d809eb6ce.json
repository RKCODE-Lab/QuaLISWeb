{"ast":null,"code":"import _slicedToArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Button,Modal}from\"react-bootstrap\";import React,{useEffect,useRef,useState}from\"react\";import{FormattedMessage,injectIntl}from\"react-intl\";import{toast}from'react-toastify';import{intl}from'../../components/App';import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faPaperclip,faSave}from\"@fortawesome/free-solid-svg-icons\";import{faWindowClose}from\"@fortawesome/free-regular-svg-icons\";var AddorUpdateProfileImage=function AddorUpdateProfileImage(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),uploadedImage=_useState2[0],setUploadedImage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),imageRef=_useState4[0],setImageRef=_useState4[1];var hiddenFileInput=useRef(null);var imageFormat=['image/gif','image/jpeg','image/png'];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isBase64Image=_useState6[0],setIsBase64Image=_useState6[1];var imageSource=props.srcImage;var imageStyle={border:\"0.5px solid #538cc6\",borderRadius:\"100%\",width:props.width,height:props.height};useEffect(function(){if(uploadedImage!==''&&uploadedImage!==undefined){setImageRef(URL.createObjectURL(uploadedImage));}},[uploadedImage]);useEffect(function(){if(imageSource!==\"\"&&imageSource!==null&&imageSource!==undefined){if(imageSource.includes('data:image')){setIsBase64Image(true);}}},[imageSource]);var handleImageAsFile=function handleImageAsFile(e){if(e.target.files&&e.target.files.length===1){if(e.target.files[0].size/1024<=500){setUploadedImage(e.target.files[0]);}else{toast.error(intl.formatMessage({id:\"IDS_UPLOADIMAGE_SIZE_ALERT\"}));}}};var handleHiddenInputClick=function handleHiddenInputClick(){hiddenFileInput.current.click();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{show:props.isOpen,onHide:function onHide(){return props.onhandleClosedDialog();},size:\"md\",centered:true,backdrop:\"static\",keyboard:false},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true,className:\"border-0\"}),/*#__PURE__*/React.createElement(Modal.Body,null,!imageRef?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"uploadImage\",style:{display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer'},onClick:handleHiddenInputClick},/*#__PURE__*/React.createElement(\"div\",null,!isBase64Image&&/*#__PURE__*/React.createElement(\"img\",{src:props.srcImage,alt:\"\",style:imageStyle}),isBase64Image&&/*#__PURE__*/React.createElement(\"img\",{src:props.srcImage,alt:\"\",className:\"rounded-circle\",style:imageStyle}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:imageFormat,style:{display:'none'},ref:hiddenFileInput,onChange:function onChange(e){return handleImageAsFile(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"previewImage\",style:{display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer'},onClick:handleHiddenInputClick},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:imageRef,alt:\"\",onLoad:function onLoad(event){return props.onUploadingImage(event,uploadedImage);},id:\"previewImage\",style:imageStyle}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:imageFormat,style:{display:'none'},ref:hiddenFileInput,onChange:function onChange(e){return handleImageAsFile(e);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(\"div\",{className:\"px-3 pt-3\",style:{alignItems:'center',justifyContent:'center',textAlign:'justify'}},props.children),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'right'},className:\"mt-4\"},/*#__PURE__*/React.createElement(Button,{variant:\"\",className:\"btn-user btn-cancel\",onClick:function onClick(){return props.onhandleClosedDialog();}},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CANCEL\"})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",className:\"btn-user btn-primary-blue\",onClick:handleHiddenInputClick},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CHOOSEFILE\"})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",className:\"btn-user btn-primary-blue \".concat(!imageRef?'btn-secondary':''),disabled:!imageRef?\"true\":\"\",onClick:function onClick(){return props.onSubmitDialog();}},\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVE\"}))))));};export default injectIntl(AddorUpdateProfileImage);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/credentialmanagement/AddorUpdateProfileImage.jsx"],"names":["Button","Modal","React","useEffect","useRef","useState","FormattedMessage","injectIntl","toast","intl","FontAwesomeIcon","faPaperclip","faSave","faWindowClose","AddorUpdateProfileImage","props","uploadedImage","setUploadedImage","imageRef","setImageRef","hiddenFileInput","imageFormat","isBase64Image","setIsBase64Image","imageSource","srcImage","imageStyle","border","borderRadius","width","height","undefined","URL","createObjectURL","includes","handleImageAsFile","e","target","files","length","size","error","formatMessage","id","handleHiddenInputClick","current","click","isOpen","onhandleClosedDialog","display","alignItems","justifyContent","cursor","event","onUploadingImage","textAlign","children","onSubmitDialog"],"mappings":"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","sourcesContent":["import { Button,Modal } from \"react-bootstrap\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport { FormattedMessage, injectIntl } from \"react-intl\"\r\nimport { toast } from 'react-toastify';\r\nimport {intl} from '../../components/App'\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {faPaperclip, faSave} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faWindowClose } from \"@fortawesome/free-regular-svg-icons\";\r\n\r\nconst AddorUpdateProfileImage =(props)=>{\r\n\r\n    const[uploadedImage,setUploadedImage]=useState();\r\n    const[imageRef,setImageRef]=useState();\r\n    const hiddenFileInput = useRef(null);\r\n    const imageFormat=['image/gif','image/jpeg', 'image/png']\r\n    const [isBase64Image,setIsBase64Image]=useState(false);\r\n\r\n    let imageSource = props.srcImage;\r\n\r\n  const imageStyle={\r\n    border:\"0.5px solid #538cc6\",\r\n    borderRadius:\"100%\",\r\n    width:props.width,\r\n    height:props.height\r\n  }\r\n    \r\n    useEffect(()=>{\r\n        if(uploadedImage!=='' && uploadedImage!==undefined){\r\n            setImageRef(URL.createObjectURL(uploadedImage))\r\n        }\r\n    },[uploadedImage])\r\n\r\n    useEffect( () => {\r\n              if(imageSource!==\"\" && imageSource!==null && imageSource!==undefined){\r\n                if(imageSource.includes('data:image')){\r\n                  setIsBase64Image(true)\r\n                }               \r\n              }\r\n    },[imageSource])\r\n\r\n   const handleImageAsFile=(e)=>{    \r\n          if(e.target.files && e.target.files.length===1){         \r\n            if(e.target.files[0].size/1024 <= 500){ \r\n                      setUploadedImage(e.target.files[0])\r\n                      }\r\n            else{\r\n              toast.error(intl.formatMessage({id:\"IDS_UPLOADIMAGE_SIZE_ALERT\"}))\r\n            }\r\n        }\r\n   };\r\n\r\n   const handleHiddenInputClick=()=>{\r\n    hiddenFileInput.current.click();\r\n   }\r\n    return( \r\n        <>\r\n          <Modal show={props.isOpen} onHide={()=>props.onhandleClosedDialog()} size=\"md\" centered backdrop=\"static\" keyboard={false}>\r\n            <Modal.Header closeButton className=\"border-0\">\r\n              {/* <Modal.Title><FormattedMessage id={props.dialogTitle}/></Modal.Title> */}\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n            {!imageRef ?\r\n               (\r\n                 <>\r\n                    <div id='uploadImage' style={{display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer'}} onClick={handleHiddenInputClick}>    \r\n                              <div>\r\n                                 {!isBase64Image &&<img src={props.srcImage} alt=\"\" style={imageStyle}/>}\r\n                                {isBase64Image && <img src={props.srcImage} alt=\"\" className=\"rounded-circle\" style={imageStyle}/> }\r\n                                <br/>\r\n                              </div>\r\n                            <input type=\"file\" accept={imageFormat} style={{display:'none'}} ref={hiddenFileInput} onChange={e=>handleImageAsFile(e)}/>\r\n                            <br/>\r\n                            <br/>                      \r\n                      </div>               \r\n                 </>\r\n                 ):(\r\n                        <>\r\n                            <div id='previewImage' style={{display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer'}} onClick={handleHiddenInputClick}>     \r\n                                    <div>\r\n                                    <img src={imageRef} alt='' onLoad={(event)=>props.onUploadingImage(event,uploadedImage)} id=\"previewImage\" style={imageStyle}/>\r\n                                          <br/>\r\n                                    </div>\r\n                                    <input type=\"file\" accept={imageFormat} style={{display:'none'}} ref={hiddenFileInput} onChange={e=>handleImageAsFile(e)}/>\r\n                                    <br/>\r\n                                    <br/>                   \r\n                            </div>                          \r\n                         </>\r\n                         )}\r\n                         <div className=\"px-3 pt-3\" style={{alignItems:'center',justifyContent:'center',textAlign:'justify'}}>{props.children}</div>\r\n                         \r\n            <div style={{display:'flex',alignItems:'center',justifyContent:'right'}} className=\"mt-4\"> \r\n              <Button variant=\"\" className=\"btn-user btn-cancel\"  onClick={()=>props.onhandleClosedDialog()}><FormattedMessage id=\"IDS_CANCEL\"/></Button>\r\n              <Button variant=\"primary\" className=\"btn-user btn-primary-blue\" onClick={handleHiddenInputClick}>\r\n                <FormattedMessage id=\"IDS_CHOOSEFILE\"/>\r\n              </Button>\r\n              <Button variant=\"primary\" className={`btn-user btn-primary-blue ${!imageRef ? 'btn-secondary' : ''}`} disabled={!imageRef ? \"true\" : \"\"} onClick={()=>props.onSubmitDialog()}> <FormattedMessage id=\"IDS_SAVE\"/></Button>\r\n              {/* {imageRef && <Button variant=\"primary\" className={`btn-user btn-primary-blue ${imageRef ? 'dasdsd' : ''}`} onClick={()=>props.onSubmitDialog()}> <FormattedMessage id=\"IDS_SAVE\"/></Button>} */}\r\n              \r\n              </div>\r\n            </Modal.Body>\r\n          </Modal>    \r\n          </>\r\n      )\r\n}\r\nexport default injectIntl(AddorUpdateProfileImage)"]},"metadata":{},"sourceType":"module"}