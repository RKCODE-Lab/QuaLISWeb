{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport { constructjsonOptionList, constructOptionList, getComboLabelValue } from '../components/CommonScript';\nimport { toast } from 'react-toastify';\nimport Axios from 'axios';\nimport { initRequest } from './LoginAction';\nimport { intl } from '../components/App'; //export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \n\nexport function getMaterialTypeComboService(methodParam) {\n  return function (dispatch) {\n    const methodTypeService = rsapi.post(\"materialcategory/getMaterialType\", {\n      userinfo: methodParam.userInfo\n    });\n    let urlArray = [];\n    let selectedId = null;\n\n    if (methodParam.operation === \"create\") {\n      urlArray = [methodTypeService];\n    } else {\n      const url = methodParam.inputParam.classUrl + \"/getActive\" + methodParam.inputParam.methodUrl + \"ById\"; //\"method/getActiveMethodById\"      \n\n      const methodById = rsapi.post(url, {\n        [methodParam.primaryKeyField]: methodParam.primaryKeyValue,\n        \"userinfo\": methodParam.userInfo\n      });\n      urlArray = [methodTypeService, methodById];\n      selectedId = methodParam.primaryKeyValue;\n    }\n\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(response => {\n      let selectedRecord = {};\n      const materialCatgeoryList = constructjsonOptionList(response[0].data, \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined, undefined, undefined, true, methodParam.userInfo.slanguagetypecode); // const materialCatgeoryList = constructOptionList(response[0].data  ||[], \"nmaterialtypecode\",\n      // \"smaterialtypename\" , undefined, undefined, undefined);\n\n      const materialCatgeoryList1 = materialCatgeoryList.get(\"OptionList\");\n      const materialCatgeorydefault = materialCatgeoryList.get(\"DefaultValue\");\n\n      if (methodParam.operation === \"update\") {\n        selectedRecord = response[1].data;\n        selectedRecord[\"nmaterialtypecode\"] = getComboLabelValue(selectedRecord, response[0].data, \"nmaterialtypecode\", \"smaterialtypename\", 'jsondata', methodParam.userInfo.slanguagetypecode);\n      } else {\n        selectedRecord[\"nmaterialtypecode\"] = materialCatgeorydefault;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          materialCatgeoryList: materialCatgeoryList1 || [],\n          operation: methodParam.operation,\n          screenName: methodParam.screenName,\n          selectedRecord,\n          openModal: true,\n          ncontrolCode: methodParam.ncontrolCode,\n          loading: false,\n          selectedId,\n          needSectionwisedisabled: selectedRecord.needSectionwisedisabled\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/actions/MaterialCategoryAction.js"],"names":["rsapi","DEFAULT_RETURN","constructjsonOptionList","constructOptionList","getComboLabelValue","toast","Axios","initRequest","intl","getMaterialTypeComboService","methodParam","dispatch","methodTypeService","post","userinfo","userInfo","urlArray","selectedId","operation","url","inputParam","classUrl","methodUrl","methodById","primaryKeyField","primaryKeyValue","all","then","response","selectedRecord","materialCatgeoryList","data","undefined","slanguagetypecode","materialCatgeoryList1","get","materialCatgeorydefault","type","payload","screenName","openModal","ncontrolCode","loading","needSectionwisedisabled","catch","error","status","formatMessage","id","message","warn"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {DEFAULT_RETURN} from './LoginTypes';\r\nimport {constructjsonOptionList, constructOptionList, getComboLabelValue} from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\n\r\n//export function getMethodComboService (screenName, primaryKeyName, primaryKeyValue, operation, inputParam , userInfo, ncontrolCode) {            \r\n    export function getMaterialTypeComboService (methodParam) {            \r\n    return function (dispatch) {   \r\n    const methodTypeService = rsapi.post(\"materialcategory/getMaterialType\", \r\n                                    {userinfo:methodParam.userInfo});\r\n    let urlArray = [];\r\n    let selectedId = null;\r\n    if (methodParam.operation === \"create\"){\r\n        urlArray = [methodTypeService];\r\n    }\r\n    else{           \r\n        const url = methodParam.inputParam.classUrl+ \"/getActive\" + methodParam.inputParam.methodUrl + \"ById\";   //\"method/getActiveMethodById\"      \r\n        const methodById =  rsapi.post(url, { [methodParam.primaryKeyField] :methodParam.primaryKeyValue, \"userinfo\": methodParam.userInfo} );\r\n        urlArray = [methodTypeService, methodById];\r\n        selectedId = methodParam.primaryKeyValue;\r\n    }\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response=>{                  \r\n            \r\n            let selectedRecord =  {};\r\n          \r\n            const materialCatgeoryList = constructjsonOptionList(response[0].data,\r\n                \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined,\r\n                undefined, undefined,\r\n                undefined, true, methodParam.userInfo.slanguagetypecode)\r\n\r\n            // const materialCatgeoryList = constructOptionList(response[0].data  ||[], \"nmaterialtypecode\",\r\n            // \"smaterialtypename\" , undefined, undefined, undefined);\r\n        const  materialCatgeoryList1  = materialCatgeoryList.get(\"OptionList\");\r\n        const  materialCatgeorydefault  = materialCatgeoryList.get(\"DefaultValue\");\r\n\r\n          \r\n        if (methodParam.operation === \"update\"){\r\n            selectedRecord = response[1].data;\r\n            selectedRecord[\"nmaterialtypecode\"] = getComboLabelValue(selectedRecord, response[0].data, \r\n                \"nmaterialtypecode\", \"smaterialtypename\",'jsondata',methodParam.userInfo.slanguagetypecode); \r\n                            \r\n        }else{\r\n            selectedRecord[\"nmaterialtypecode\"] = materialCatgeorydefault; \r\n        }\r\n           \r\n            dispatch({type: DEFAULT_RETURN, payload:{materialCatgeoryList:materialCatgeoryList1|| [],                               \r\n                        operation:methodParam.operation, screenName:methodParam.screenName, selectedRecord, \r\n                        openModal : true,\r\n                        ncontrolCode:methodParam.ncontrolCode,\r\n                        loading:false,selectedId,\r\n                        needSectionwisedisabled:selectedRecord.needSectionwisedisabled\r\n                    }});\r\n        })\r\n        .catch(error=>{\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(intl.formatMessage({id: error.message}));\r\n            } \r\n            else{               \r\n                toast.warn(intl.formatMessage({id: error.response.data}));\r\n            }  \r\n        })        \r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}