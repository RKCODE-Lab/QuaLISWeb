{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';//FormattedMessage,\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import QuotationDetailTab from'./QuotationDetailTab';import QuotationHistoryTab from'./QuotationHistoryTab';import QuotationVATCalculationTab from'./QuotationVATCalculationTab';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import AddQuotationTest from\"./AddQuotationTest\";import EditQuotationTestPricing from\"./EditQuotationTestPricing\";import AddGrossQuotation from\"./AddGrossQuotation\";var QuotationTab=/*#__PURE__*/function(_React$Component){_inherits(QuotationTab,_React$Component);var _super=_createSuper(QuotationTab);function QuotationTab(props){var _this;_classCallCheck(this,QuotationTab);_this=_super.call(this,props);_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.tabDetail=function(){var addQuotationTestId=_this.props.controlMap.has(\"AddQuotationTest\")&&_this.props.controlMap.get(\"AddQuotationTest\").ncontrolcode;var updateQuotationTestId=_this.props.controlMap.has(\"EditQuotationTest\")&&_this.props.controlMap.get(\"EditQuotationTest\").ncontrolcode;var grossQuotationeId=_this.props.controlMap.has(\"CalculatePricing\")&&_this.props.controlMap.get(\"CalculatePricing\").ncontrolcode;// const projectmasterAddParam = {\n//     screenName: \"IDS_MEMBERS\", operation: \"create\", primaryKeyField: \"nprojectmembercode\",\n//     masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addteammembersId\n// };\n// const projectmasterDeleteParam = {\n//     //    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \n//     screenName: \"IDS_MEMBERS\", operation: \"delete\", primaryKeyField: \"nprojectmembercode\",\n//     masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: deleteteammembersId\n// };\nvar tabMap=new Map();tabMap.set(\"IDS_DETAILS\",/*#__PURE__*/React.createElement(QuotationDetailTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addTitleIDS:\"IDS_DETAILS\",addTitleDefaultMsg:'Details',primaryKeyField:\"nquotationtestcode\",masterData:_this.props.masterData,primaryList:\"Details\",dataResult:_this.props.dataResult,dataState:_this.props.dataState,dataStateChange:_this.props.dataStateChange,columnList:_this.quotationdetailColumnList,deleteRecord:_this.props.deleteRecord// deleteParam={projectmasterDeleteParam} --\n,addQuotationTestId:addQuotationTestId,updateQuotationTestId:updateQuotationTestId,editTestPriceParam:_this.props.editParam,data:_this.props.data// getQuotationPricingEditService={this.props.fetchRecord}\n,selectedId:_this.props.selectedId,getQuotationAddTestService:_this.props.getQuotationAddTestService,getQuotationPricingEditService:_this.props.getQuotationPricingEditService}));tabMap.set(\"IDS_ESTIMATION\",/*#__PURE__*/React.createElement(QuotationVATCalculationTab,{userInfo:_this.props.userInfo,addTitleIDS:\"IDS_ESTIMATION\",addTitleDefaultMsg:'Estimation',primaryKeyField:\"nquotationtestcode\",primaryList:\"Estimation\",grossQuotationeId:grossQuotationeId,selectedQuotation:_this.props.selectedQuotation,userRoleControlRights:_this.props.userRoleControlRights,GrossQuotation:_this.props.GrossQuotation}));tabMap.set(\"IDS_HISTORY\",/*#__PURE__*/React.createElement(QuotationHistoryTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam// screenName=\"IDS_FILE\"\n,QuotationHistorydata:_this.props.QuotationHistorydata,QuotationHistorydataResult:_this.props.QuotationHistorydataResult,dataState:_this.props.dataState,historydataStateChange:_this.props.historydataStateChange}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;//    let selectedRecord = this.state.selectedRecord;\nif(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';selectedRecord['esignreason']='';}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.props.selectedRecord[\"esigncomments\"],nreasoncode:_this.props.selectedRecord[\"esignreason\"]&&_this.props.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.props.selectedRecord[\"esignreason\"]&&_this.props.selectedRecord[\"esignreason\"].label}),password:_this.props.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'Quotation-tab',dataState:dataState};_this.quotationdetailColumnList=[{\"idsName\":\"IDS_TESTNAME\",\"dataField\":\"stestsynonym\",\"width\":\"200px\"},{\"idsName\":\"IDS_METHODNAME\",\"dataField\":\"smethodname\",\"width\":\"200px\"},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"stestplatform\",\"width\":\"200px\"},{\"idsName\":\"IDS_DISCOUNTBAND\",\"dataField\":\"sdiscountbandname\",\"width\":\"200px\"},{\"idsName\":\"IDS_COST\",\"dataField\":\"ncost\",\"width\":\"100px\"},{\"idsName\":\"IDS_NUMBEROFSAMPLES\",\"dataField\":\"nnoofsamples\",\"width\":\"150px\"},{\"idsName\":\"IDS_TOTALAMOUNT\",\"dataField\":\"ntotalamount\",\"width\":\"200px\"},{\"idsName\":\"IDS_NOTES\",\"dataField\":\"snotes\",\"width\":\"200px\"}];return _this;}_createClass(QuotationTab,[{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName,selectedRecord,operation){var mandatoryFields=[];if(screenName===\"IDS_TEST\"){mandatoryFields=[{\"idsName\":\"IDS_TEST\",\"dataField\":\"ntestcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return mandatoryFields;}else{return[];}}},{key:\"render\",value:function render(){// let mandatoryFields = [];\nif(this.props.screenName==='IDS_TEST'){this.mandatoryFields=this.findMandatoryFields(this.props.screenName,this.props.selectedRecord,this.props.operation);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,size:this.props.modalScreenSize===true?\"xl\":\"lg\",operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.props.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.props.selectedRecord||{}//   mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\n,mandatoryFields:this.mandatoryFields||[],addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.props.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.props.selectedRecord||{}}):this.props.screenName===\"IDS_TEST\"?/*#__PURE__*/React.createElement(AddQuotationTest,{QuotationTestList:this.props.QuotationTestList,selectedRecord:this.props.selectedRecord||{},onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_PRICE\"?/*#__PURE__*/React.createElement(EditQuotationTestPricing,{onnetAmountEvent:this.props.onnetAmountEvent,selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.props.onInputOnChange,onNumericInputChange:this.props.onNumericInputChange,DiscountBand:this.props.DiscountBand,onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_CALCULATEPRICING\"?/*#__PURE__*/React.createElement(AddGrossQuotation,{DiscountBand:this.props.DiscountBand,VATBand:this.props.VATBand,selectedRecord:this.props.selectedRecord||{}//  QuotationTest={this.props.Login.QuotationTest}\n,onComboChange:this.props.onComboChange,onInputOnChange:this.onInputOnChange//      DiscountAmount={this.state.selectedRecord.DiscountAmount === undefined ? 0.00 :this.state.selectedRecord.DiscountAmount }\n,DiscountAmount:this.props.selectedRecord.DiscountAmount!==undefined?this.props.selectedRecord.DiscountAmount:this.props.QuotationGrossAmount[0].ndiscountamount//        VatAmount={this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount}\n,VatAmount:this.props.selectedRecord.VatAmount!==undefined?this.props.selectedRecord.VatAmount:this.props.QuotationGrossAmount[0].nvatamount,QuotationGrossAmount:this.props.QuotationGrossAmount===undefined?0.00:this.props.QuotationGrossAmount,TotalNetAmount:this.props.selectedRecord.TotalNetAmount!==undefined?this.props.selectedRecord.TotalNetAmount:this.props.QuotationGrossAmount[0].ntotalgrossamount}):\"\"}));}}]);return QuotationTab;}(React.Component);export default injectIntl(QuotationTab);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/quotation/QuotationTab.jsx"],"names":["React","Row","Col","Card","injectIntl","SlideOutModal","Esign","DEFAULT_RETURN","QuotationDetailTab","QuotationHistoryTab","QuotationVATCalculationTab","CustomTabs","AddQuotationTest","EditQuotationTestPricing","AddGrossQuotation","QuotationTab","props","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","tabDetail","addQuotationTestId","controlMap","has","get","ncontrolcode","updateQuotationTestId","grossQuotationeId","tabMap","Map","set","userRoleControlRights","inputParam","userInfo","masterData","dataResult","dataState","dataStateChange","quotationdetailColumnList","deleteRecord","editParam","selectedId","getQuotationAddTestService","getQuotationPricingEditService","selectedQuotation","GrossQuotation","QuotationHistorydata","QuotationHistorydataResult","historydataStateChange","closeModal","loadEsign","openChildModal","selectedRecord","operation","validateEsign","inputData","sreason","nreasoncode","value","spredefinedreason","label","password","screenData","validateEsignCredential","skip","take","settings","parseInt","state","isOpen","activeTab","mandatoryFields","findMandatoryFields","modalScreenSize","onSaveClick","onInputOnChange","QuotationTestList","onComboChange","onnetAmountEvent","onNumericInputChange","DiscountBand","VATBand","DiscountAmount","undefined","QuotationGrossAmount","ndiscountamount","VatAmount","nvatamount","TotalNetAmount","ntotalgrossamount","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';  //FormattedMessage,\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport QuotationDetailTab from './QuotationDetailTab';\r\nimport QuotationHistoryTab from './QuotationHistoryTab';\r\nimport QuotationVATCalculationTab from './QuotationVATCalculationTab';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport AddQuotationTest from \"./AddQuotationTest\";\r\nimport EditQuotationTestPricing from \"./EditQuotationTestPricing\";\r\nimport AddGrossQuotation from \"./AddGrossQuotation\";\r\n\r\nclass QuotationTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'Quotation-tab',\r\n            dataState: dataState\r\n\r\n        };\r\n\r\n        this.quotationdetailColumnList = [\r\n\r\n            { \"idsName\": \"IDS_TESTNAME\", \"dataField\": \"stestsynonym\", \"width\": \"200px\" }, \r\n            { \"idsName\": \"IDS_METHODNAME\", \"dataField\": \"smethodname\", \"width\": \"200px\" }, \r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"stestplatform\", \"width\": \"200px\" }, \r\n            { \"idsName\": \"IDS_DISCOUNTBAND\", \"dataField\": \"sdiscountbandname\", \"width\": \"200px\" }, \r\n            { \"idsName\": \"IDS_COST\", \"dataField\": \"ncost\", \"width\": \"100px\" },\r\n            { \"idsName\": \"IDS_NUMBEROFSAMPLES\", \"dataField\": \"nnoofsamples\", \"width\": \"150px\" },\r\n            { \"idsName\": \"IDS_TOTALAMOUNT\", \"dataField\": \"ntotalamount\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_NOTES\", \"dataField\": \"snotes\", \"width\": \"200px\" }\r\n\r\n        ]\r\n\r\n    }\r\n\r\n\r\n    findMandatoryFields(screenName, selectedRecord, operation) {\r\n\r\n        let mandatoryFields = [];\r\n        if (screenName === \"IDS_TEST\") {\r\n\r\n          mandatoryFields = [{ \"idsName\": \"IDS_TEST\", \"dataField\": \"ntestcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n            \r\n          return mandatoryFields;\r\n        }else {\r\n            return [];\r\n          }\r\n      \r\n      }\r\n\r\n    render() {\r\n\r\n        // let mandatoryFields = [];\r\n\r\n        if (this.props.screenName === 'IDS_TEST') {\r\n\r\n            this.mandatoryFields = this.findMandatoryFields(this.props.screenName, this.props.selectedRecord, this.props.operation)\r\n\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        size={this.props.modalScreenSize===true ? \"xl\" : \"lg\" }\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.props.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.props.selectedRecord || {}}\r\n                   //   mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\r\n                        mandatoryFields={this.mandatoryFields || []}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.props.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.props.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"IDS_TEST\" ?\r\n\r\n                            <AddQuotationTest\r\n\r\n                            QuotationTestList={this.props.QuotationTestList}\r\n                            selectedRecord={this.props.selectedRecord || {}}\r\n                            onComboChange={this.props.onComboChange}\r\n           \r\n                            />  :\r\n                            this.props.screenName === \"IDS_PRICE\" ?\r\n\r\n                            <EditQuotationTestPricing\r\n\r\n                             onnetAmountEvent={this.props.onnetAmountEvent}\r\n                             selectedRecord={this.props.selectedRecord || {}}\r\n                             onInputOnChange={this.props.onInputOnChange}\r\n                             onNumericInputChange={this.props.onNumericInputChange}\r\n                             DiscountBand={this.props.DiscountBand}\r\n                             onComboChange={this.props.onComboChange}\r\n\r\n                            /> :  this.props.screenName === \"IDS_CALCULATEPRICING\" ?\r\n\r\n                            <AddGrossQuotation\r\n            \r\n                              DiscountBand={this.props.DiscountBand}\r\n                              VATBand={this.props.VATBand} \r\n                              selectedRecord={this.props.selectedRecord || {}}\r\n                          //  QuotationTest={this.props.Login.QuotationTest}\r\n                              onComboChange={this.props.onComboChange}\r\n                              onInputOnChange={this.onInputOnChange}\r\n                      //      DiscountAmount={this.state.selectedRecord.DiscountAmount === undefined ? 0.00 :this.state.selectedRecord.DiscountAmount }\r\n                              DiscountAmount={this.props.selectedRecord.DiscountAmount !== undefined ? this.props.selectedRecord.DiscountAmount:this.props.QuotationGrossAmount[0].ndiscountamount}\r\n                    //        VatAmount={this.state.selectedRecord.VatAmount === undefined ? 0.00 : this.state.selectedRecord.VatAmount}\r\n                              VatAmount={this.props.selectedRecord.VatAmount !== undefined ? this.props.selectedRecord.VatAmount:this.props.QuotationGrossAmount[0].nvatamount}\r\n                              QuotationGrossAmount={this.props.QuotationGrossAmount === undefined ? 0.00 : this.props.QuotationGrossAmount} \r\n                              TotalNetAmount={this.props.selectedRecord.TotalNetAmount !== undefined ? this.props.selectedRecord.TotalNetAmount:this.props.QuotationGrossAmount[0].ntotalgrossamount}\r\n                            /> : \"\"\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n\r\n    tabDetail = () => {\r\n\r\n      const addQuotationTestId = this.props.controlMap.has(\"AddQuotationTest\") && this.props.controlMap.get(\"AddQuotationTest\").ncontrolcode;\r\n      const updateQuotationTestId = this.props.controlMap.has(\"EditQuotationTest\") && this.props.controlMap.get(\"EditQuotationTest\").ncontrolcode;\r\n      const grossQuotationeId = this.props.controlMap.has(\"CalculatePricing\") && this.props.controlMap.get(\"CalculatePricing\").ncontrolcode;\r\n\r\n        // const projectmasterAddParam = {\r\n        //     screenName: \"IDS_MEMBERS\", operation: \"create\", primaryKeyField: \"nprojectmembercode\",\r\n        //     masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addteammembersId\r\n        // };\r\n\r\n        // const projectmasterDeleteParam = {\r\n\r\n        //     //    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \r\n\r\n        //     screenName: \"IDS_MEMBERS\", operation: \"delete\", primaryKeyField: \"nprojectmembercode\",\r\n        //     masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: deleteteammembersId\r\n        // };\r\n\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_DETAILS\", <QuotationDetailTab\r\n\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addTitleIDS={\"IDS_DETAILS\"}\r\n            addTitleDefaultMsg={'Details'}\r\n            primaryKeyField={\"nquotationtestcode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"Details\"}\r\n            dataResult={this.props.dataResult}\r\n            dataState={this.props.dataState}\r\n            dataStateChange={this.props.dataStateChange}\r\n            columnList={this.quotationdetailColumnList}\r\n            deleteRecord={this.props.deleteRecord}\r\n            // deleteParam={projectmasterDeleteParam} --\r\n            addQuotationTestId={addQuotationTestId}\r\n            updateQuotationTestId={updateQuotationTestId}\r\n            editTestPriceParam={this.props.editParam}\r\n            data={this.props.data}\r\n            // getQuotationPricingEditService={this.props.fetchRecord}\r\n            selectedId={this.props.selectedId}\r\n            getQuotationAddTestService={this.props.getQuotationAddTestService}\r\n            getQuotationPricingEditService={this.props.getQuotationPricingEditService}\r\n           \r\n\r\n        />)\r\n\r\n        tabMap.set(\"IDS_ESTIMATION\", <QuotationVATCalculationTab\r\n\r\n            userInfo={this.props.userInfo}\r\n            addTitleIDS={\"IDS_ESTIMATION\"}\r\n            addTitleDefaultMsg={'Estimation'}\r\n            primaryKeyField={\"nquotationtestcode\"}\r\n            primaryList={\"Estimation\"}     \r\n            grossQuotationeId={grossQuotationeId}\r\n            selectedQuotation={this.props.selectedQuotation}\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            GrossQuotation={this.props.GrossQuotation}\r\n           \r\n\r\n        />)\r\n\r\n        tabMap.set(\"IDS_HISTORY\", <QuotationHistoryTab\r\n\r\n        controlMap={this.props.controlMap}\r\n        userRoleControlRights={this.props.userRoleControlRights}\r\n        userInfo={this.props.userInfo}\r\n        inputParam={this.props.inputParam}\r\n        // screenName=\"IDS_FILE\"\r\n        QuotationHistorydata={this.props.QuotationHistorydata}\r\n        QuotationHistorydataResult={this.props.QuotationHistorydataResult}\r\n        dataState={this.props.dataState}\r\n        historydataStateChange={this.props.historydataStateChange}\r\n\r\n    />);\r\n  \r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        //    let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = '';\r\n                selectedRecord['esigncomments'] = '';\r\n                selectedRecord['esignreason'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.props.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.props.selectedRecord[\"esignreason\"] && this.props.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.props.selectedRecord[\"esignreason\"] && this.props.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.props.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\n\r\nexport default injectIntl(QuotationTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}