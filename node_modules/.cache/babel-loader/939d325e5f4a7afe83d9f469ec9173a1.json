{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import Axios from'axios';import{toast}from'react-toastify';import{getComboLabelValue,constructOptionList}from'../components/CommonScript';import{DEFAULT_RETURN}from'./LoginTypes';import{initRequest}from'./LoginAction';import{sortData}from'../components/CommonScript';import{transactionStatus,attachmentType}from'../components/Enumeration';export function getProductDetail(product,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"product/getProduct\",{nproductcode:product.nproductcode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,operation:null,modalName:undefined,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getProductComboService(productParam){return function(dispatch){var productCategoryService=rsapi.post(\"/productcategory/getProductCategory\",{userinfo:productParam.userInfo});var urlArray=[];var selectedId=null;if(productParam.operation===\"create\"){urlArray=[productCategoryService];}else{var _rsapi$post;var url=productParam.inputParam.classUrl+\"/getActiveProductById\";// productParam.inputParam.methodUrl \"product/getActiveproductById\"      \n//const productById =  rsapi.post(url, { [productParam.primaryKeyField] :productParam.primaryKeyValue, \"userinfo\": productParam.userInfo} );\nvar productById=rsapi.post(url,(_rsapi$post={},_defineProperty(_rsapi$post,productParam.primaryKeyName,productParam.masterData.SelectedProduct[productParam.primaryKeyName]),_defineProperty(_rsapi$post,\"userinfo\",productParam.userInfo),_rsapi$post));urlArray=[productCategoryService,productById];selectedId=productParam.primaryKeyValue;}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={};var productCatMap=constructOptionList(response[0].data||[],\"nproductcatcode\",\"sproductcatname\",undefined,undefined,true);var productCategoryList=productCatMap.get(\"OptionList\");if(productParam.operation===\"update\"){selectedRecord=response[1].data;selectedRecord[\"nproductcatcode\"]=getComboLabelValue(selectedRecord,response[0].data,\"nproductcatcode\",\"sproductcatname\");}else{var productCatdefault=productCatMap.get(\"DefaultValue\");selectedRecord[\"nproductcatcode\"]=productCatdefault;}dispatch({type:DEFAULT_RETURN,payload:{productCategoryList:productCategoryList,//:response[0].data || [],                               \noperation:productParam.operation,screenName:productParam.screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:productParam.ncontrolcode,loading:false,selectedId:selectedId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export var addProductFile=function addProductFile(inputParam){return function(dispatch){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/linkmaster/getLinkMaster\",{userinfo:inputParam.userInfo})];if(inputParam.operation===\"update\"){urlArray.push(rsapi.post(\"/product/editProductFile\",{userinfo:inputParam.userInfo,genericlabel:inputParam.genericLabel,productfile:inputParam.selectedRecord}));}Axios.all(urlArray).then(function(response){var _payload;var linkMap=constructOptionList(response[0].data.LinkMaster,\"nlinkcode\",\"slinkname\",false,false,true);var linkmaster=linkMap.get(\"OptionList\");var selectedRecord={};var defaultLink=linkmaster.filter(function(items){return items.item.ndefaultlink===transactionStatus.YES;});var disabled=false;var editObject={};if(inputParam.operation===\"update\"){editObject=response[1].data;var nlinkcode={};var link={};if(editObject.nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject.slinkname,\"value\":editObject.nlinkcode};link={slinkfilename:editObject.sfilename,slinkdescription:editObject.sdescription,nlinkdefaultstatus:editObject.ndefaultstatus,sfilesize:'',nfilesize:0,ndefaultstatus:4,sfilename:''};}else{nlinkcode=defaultLink.length>0?defaultLink[0]:\"\";//{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\nlink={slinkfilename:'',slinkdescription:'',nlinkdefaultstatus:4,sfilesize:editObject.sfilesize,nfilesize:editObject.nfilesize,ndefaultstatus:editObject.ndefaultstatus,sfilename:editObject.sfilename};}selectedRecord=_objectSpread(_objectSpread({},link),{},{nproductfilecode:editObject.nproductfilecode,nattachmenttypecode:editObject.nattachmenttypecode,sdescription:editObject.sdescription,nlinkcode:nlinkcode// disabled: true\n});}else{selectedRecord={nattachmenttypecode:response[0].data.AttachmentType.length>0?response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,nlinkcode:defaultLink.length>0?defaultLink[0]:\"\",//{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\ndisabled:disabled};}dispatch({type:DEFAULT_RETURN,payload:(_payload={},_defineProperty(_payload,inputParam.modalName,true),_defineProperty(_payload,\"operation\",inputParam.operation),_defineProperty(_payload,\"screenName\",inputParam.screenName),_defineProperty(_payload,\"ncontrolCode\",inputParam.ncontrolCode),_defineProperty(_payload,\"selectedRecord\",selectedRecord),_defineProperty(_payload,\"loading\",false),_defineProperty(_payload,\"linkMaster\",linkmaster),_defineProperty(_payload,\"showSaveContinue\",false),_defineProperty(_payload,\"editFiles\",editObject.nattachmenttypecode===attachmentType.FTP?editObject:{}),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};};","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/actions/ProductAction.js"],"names":["rsapi","Axios","toast","getComboLabelValue","constructOptionList","DEFAULT_RETURN","initRequest","sortData","transactionStatus","attachmentType","getProductDetail","product","userInfo","masterData","dispatch","post","nproductcode","userinfo","then","response","data","type","payload","operation","modalName","undefined","loading","catch","error","status","message","warn","getProductComboService","productParam","productCategoryService","urlArray","selectedId","url","inputParam","classUrl","productById","primaryKeyName","SelectedProduct","primaryKeyValue","all","selectedRecord","productCatMap","productCategoryList","get","productCatdefault","screenName","openModal","ncontrolCode","ncontrolcode","addProductFile","push","genericlabel","genericLabel","productfile","linkMap","LinkMaster","linkmaster","defaultLink","filter","items","item","ndefaultlink","YES","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","sfilename","slinkdescription","sdescription","nlinkdefaultstatus","ndefaultstatus","sfilesize","nfilesize","length","nproductfilecode","AttachmentType","FTP"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport Axios from 'axios';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    getComboLabelValue,\r\n    constructOptionList\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport { initRequest } from './LoginAction';\r\nimport { sortData} from '../components/CommonScript';\r\nimport { transactionStatus, attachmentType } from '../components/Enumeration';\r\n\r\n\r\n\r\nexport function getProductDetail (product, userInfo, masterData) {\r\n    return function (dispatch) {   \r\n    dispatch(initRequest(true));\r\n    return rsapi.post(\"product/getProduct\", {nproductcode:product.nproductcode, \r\n                                                          userinfo:userInfo})\r\n   .then(response=>{     \r\n        masterData = {...masterData, ...response.data};       \r\n        sortData(masterData);\r\n        dispatch({type: DEFAULT_RETURN, payload:{masterData, operation:null, modalName:undefined, \r\n             loading:false}});   \r\n   })\r\n   .catch(error=>{\r\n        dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n       if (error.response.status === 500){\r\n           toast.error(error.message);\r\n       } \r\n       else{               \r\n           toast.warn(error.response.data);\r\n       }  \r\n  \r\n   })\r\n}}\r\n\r\nexport function getProductComboService (productParam) {            \r\n    return function (dispatch) {   \r\n    const productCategoryService = rsapi.post(\"/productcategory/getProductCategory\", \r\n                                    {userinfo:productParam.userInfo});\r\n    let urlArray = [];\r\n    let selectedId = null;\r\n    if (productParam.operation === \"create\"){\r\n        urlArray = [productCategoryService];\r\n    }\r\n    else{           \r\n        const url = productParam.inputParam.classUrl+ \"/getActiveProductById\";   // productParam.inputParam.methodUrl \"product/getActiveproductById\"      \r\n        //const productById =  rsapi.post(url, { [productParam.primaryKeyField] :productParam.primaryKeyValue, \"userinfo\": productParam.userInfo} );\r\n        const productById =  rsapi.post(url, { [productParam.primaryKeyName] :productParam.masterData.SelectedProduct[productParam.primaryKeyName], \"userinfo\": productParam.userInfo} );\r\n        \r\n        urlArray = [productCategoryService, productById];\r\n        selectedId = productParam.primaryKeyValue;\r\n    }\r\n    dispatch(initRequest(true));\r\n    Axios.all(urlArray)\r\n        .then(response=>{                  \r\n            \r\n            let selectedRecord =  {};\r\n\r\n            const productCatMap = constructOptionList(response[0].data || [], \"nproductcatcode\",\r\n                                \"sproductcatname\", undefined, undefined, true);\r\n            const productCategoryList = productCatMap.get(\"OptionList\");\r\n           \r\n           \r\n            \r\n            if (productParam.operation === \"update\"){\r\n                selectedRecord = response[1].data;\r\n                selectedRecord[\"nproductcatcode\"] = getComboLabelValue(selectedRecord, response[0].data, \r\n                    \"nproductcatcode\", \"sproductcatname\");                   \r\n            }\r\n           else\r\n           {\r\n \t\t\tconst  productCatdefault  = productCatMap.get(\"DefaultValue\");\r\n            selectedRecord[\"nproductcatcode\"] = productCatdefault; \r\n           }\r\n            dispatch({type: DEFAULT_RETURN, payload:{productCategoryList,//:response[0].data || [],                               \r\n                        operation:productParam.operation, screenName:productParam.screenName, selectedRecord, \r\n                        openModal : true,\r\n                        ncontrolCode:productParam.ncontrolcode,\r\n                        loading:false,selectedId\r\n                    }});\r\n        })\r\n        .catch(error=>{\r\n            dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n            if (error.response.status === 500){\r\n                toast.error(error.message);\r\n            } \r\n            else{               \r\n                toast.warn(error.response.data);\r\n            }  \r\n        })        \r\n    }\r\n}\r\n\r\nexport const addProductFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n            userinfo: inputParam.userInfo\r\n        })];\r\n        if (inputParam.operation === \"update\") {\r\n            urlArray.push(rsapi.post(\"/product/editProductFile\", {\r\n                userinfo: inputParam.userInfo,\r\n                genericlabel:inputParam.genericLabel,\r\n                productfile: inputParam.selectedRecord\r\n            }))\r\n        }\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const linkMap = constructOptionList(response[0].data.LinkMaster, \"nlinkcode\", \"slinkname\", false, false, true);\r\n                const linkmaster = linkMap.get(\"OptionList\");\r\n                let selectedRecord = {};\r\n                const defaultLink = linkmaster.filter(items => items.item.ndefaultlink === transactionStatus.YES);\r\n                let disabled = false;\r\n                let editObject = {};\r\n                if (inputParam.operation === \"update\") {\r\n                    editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n\r\n                        link = {\r\n                            slinkfilename: editObject.sfilename,\r\n                            slinkdescription: editObject.sdescription,\r\n                            nlinkdefaultstatus: editObject.ndefaultstatus,\r\n                            sfilesize: '',\r\n                            nfilesize: 0,\r\n                            ndefaultstatus: 4,\r\n                            sfilename: '',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? defaultLink[0] : \"\" //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\"\r\n                        link = {\r\n                            slinkfilename: '',\r\n                            slinkdescription: '',\r\n                            nlinkdefaultstatus: 4,\r\n                            sfilesize: editObject.sfilesize,\r\n                            nfilesize: editObject.nfilesize,\r\n                            ndefaultstatus: editObject.ndefaultstatus,\r\n                            sfilename: editObject.sfilename,\r\n                        }\r\n                    }\r\n\r\n                    selectedRecord = {\r\n                        ...link,\r\n                        nproductfilecode: editObject.nproductfilecode,\r\n                        nattachmenttypecode: editObject.nattachmenttypecode,\r\n                        sdescription:editObject.sdescription,\r\n                        nlinkcode,\r\n\r\n                        // disabled: true\r\n                    };\r\n                } else {\r\n                    selectedRecord = {\r\n                        nattachmenttypecode: response[0].data.AttachmentType.length > 0 ?\r\n                            response[0].data.AttachmentType[0].nattachmenttypecode : attachmentType.FTP,\r\n                        nlinkcode: defaultLink.length > 0 ? defaultLink[0] : \"\", //{\"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode}:\"\",\r\n                        disabled\r\n                    };\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        [inputParam.modalName]: true,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolCode,\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        linkMaster: linkmaster,\r\n                        showSaveContinue: false,\r\n                        editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}