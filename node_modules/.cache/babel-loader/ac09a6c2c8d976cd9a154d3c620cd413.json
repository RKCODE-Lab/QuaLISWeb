{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card,Nav,FormGroup,FormLabel}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import{MediaLabel}from'../../components/add-client.styles';import{FormattedMessage,injectIntl}from'react-intl';import{process}from'@progress/kendo-data-query';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{toast}from'react-toastify';import AddMAHContact from'./AddMAHContact';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,validateEmail,validatePhoneNumber}from'../../components/CommonScript';import DataGrid from'../../components/data-grid/data-grid.component';import{transactionStatus}from'../../components/Enumeration';//import ReactTooltip from 'react-tooltip';\nvar MAHContact=/*#__PURE__*/function(_React$Component){_inherits(MAHContact,_React$Component);var _super=_createSuper(MAHContact);function MAHContact(_props){var _this;_classCallCheck(this,MAHContact);_this=_super.call(this,_props);_this.mahDataStateChange=function(event){_this.setState({dataResult:process(_this.props.masterData[\"MAHContact\"],event.dataState),dataState:event.dataState});};_this.expandChange=function(event){var isExpanded=event.dataItem.expanded===undefined?event.dataItem.aggregates:event.dataItem.expanded;event.dataItem.expanded=!isExpanded;_this.setState(_objectSpread({},_this.props));};_this.detailBand=function(props){var Dataitem=props.dataItem;var OptionalFieldList=[{datafield:\"sphoneno\",Column:\"Phone No\"},{datafield:\"smobileno\",Column:\"Mobile No\"},{datafield:\"sfaxno\",Column:\"Fax No\"}];return/*#__PURE__*/React.createElement(Row,null,OptionalFieldList.map(function(fields){return/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:fields.Column,message:fields.Column})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},Dataitem[fields.datafield])));}));};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.getTabContent=function(event){_this.setState({activeTab:event.currentTarget.name});};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;;if(fieldName===\"ndeputyusersitecode\"){_this.state.deputyUserList.map(function(item){if(item.nusersitecode===comboData.value){selectedRecord[\"sdeputyname\"]=item.sfirstname+\" \"+item.slastname;}return null;});}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;// else if (event.target.name === \"nlockmode\")\n//     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\nelse selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{// if (event.target.name === \"sphoneno\" || event.target.name === \"smobileno\" || event.target.name === \"sfaxno\") {\n//     event.target.value = validatePhoneNumber(event.target.value);\n//     if (event.target.value !== \"\") {\n//         selectedRecord[event.target.name] = event.target.value;\n//     }\n// }\n// else {\n//     selectedRecord[event.target.name] = event.target.value;\n// }\nif(event.target.name===\"sphoneno\"||event.target.name===\"smobileno\"||event.target.name===\"sfaxno\"){if(event.target.value!==\"\"){event.target.value=validatePhoneNumber(event.target.value);selectedRecord[event.target.name]=event.target.value!==\"\"?event.target.value:selectedRecord[event.target.name];}else{selectedRecord[event.target.name]=event.target.value;}}else{selectedRecord[event.target.name]=event.target.value;}}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){if(_this.state.selectedRecord['semail']?validateEmail(_this.state.selectedRecord['semail']):true){//add / edit  \nvar inputParam={};if(_this.props.screenName===\"MAH Contact\"){inputParam=_this.saveMAHContact(saveType,formRef);}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_ENTERVALIDEMAIL\"}));}};_this.deleteRecord=function(deleteparam){if(deleteparam.selectedRecord.expanded!==undefined){delete deleteparam.selectedRecord.expanded;}if(_this.props.masterData.SelectedMAHolder.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:_this.props.masterData.SelectedMAHolder.stranstatus}));}else{var _inputData;var inputParam={classUrl:\"marketauthorisationholdercontact\",methodUrl:deleteparam.methodUrl,inputData:(_inputData={},_defineProperty(_inputData,deleteparam.methodUrl.toLowerCase(),deleteparam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),operation:deleteparam.operation,dataState:_this.state.dataState};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteparam.screenName,operation:deleteparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.detailedFieldList=[{dataField:\"sphoneno\",idsName:\"IDS_PHONENO\",columnSize:\"4\"},{dataField:\"smobileno\",idsName:\"IDS_MOBILENO\",columnSize:\"4\"},{dataField:\"sfaxno\",idsName:\"IDS_FAXNO\",columnSize:\"4\"}//{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\n//{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\n];var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'MAHContact-tab',dataState:dataState};_this.holderFieldList=['nmahcode','smahcontactname','sphoneno','smobileno','sfaxno','semail','ndefaultstatus'];//'nmahcode',\n_this.mahContactColumnList=[{\"idsName\":\"IDS_MAHCONTACTNAME\",\"dataField\":\"smahcontactname\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_EMAIL\",\"dataField\":\"semail\",\"width\":\"200px\",\"mandatory\":true,\"alertPreFix\":_this.props.intl.formatMessage({id:\"IDS_VALID\"}),\"validateFunction\":validateEmail,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_DEFAULT\",\"dataField\":\"sdisplaystatus\",\"width\":\"150px\",\"isIdsField\":true,\"controlName\":\"ndefaultstatus\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];return _this;}_createClass(MAHContact,[{key:\"render\",value:function render(){var _this2=this;var addMAHContactId=this.props.controlMap.has(\"AddMAHContact\")&&this.props.controlMap.get(\"AddMAHContact\").ncontrolcode;var editMAHContactId=this.props.controlMap.has(\"EditMAHContact\")&&this.props.controlMap.get(\"EditMAHContact\").ncontrolcode;var deleteMAHContactId=this.props.controlMap.has(\"DeleteMAHContact\")&&this.props.controlMap.get(\"DeleteMAHContact\").ncontrolcode;var mahAddParam={screenName:\"MAH Contact\",operation:\"create\",primaryKeyField:\"nmahcontactcode\",masterData:this.props.masterData,userInfo:this.props.userInfo,ncontrolCode:addMAHContactId};var mahEditParam={screenName:\"MAH Contact\",operation:\"update\",primaryKeyField:\"nmahcontactcode\",masterData:this.props.masterData,userInfo:this.props.userInfo,ncontrolCode:editMAHContactId};var mahDeleteParam={screenName:\"MAHolder\",methodUrl:\"MarketAuthorisationHolderContact\",operation:\"delete\",ncontrolCode:deleteMAHContactId};var mandatoryFields=[];this.mahContactColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card//className=\"at-tabs border-0\"\n,null,/*#__PURE__*/React.createElement(Card.Header,{className:\"add-txt-btn\"},/*#__PURE__*/React.createElement(\"strong\",null,\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_MAHCONTACT\",defaultMessage:\"MAH Contact\"}))),/*#__PURE__*/React.createElement(Card.Body,{style:{paddingTop:'unset'}},/*#__PURE__*/React.createElement(Row,{className:\"no-gutters text-right border-bottom pt-2 pb-2\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addMAHContactId)===-1// data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDMAHCONTACT\" })}\n,onClick:function onClick(){return _this2.props.getMAHContactComboDataService(mahAddParam);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_MAHCONTACT\",defaultMessage:\"MAHContact\"}))))),/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nmahcontactcode\",expandField:\"expanded\",detailedFieldList:this.detailedFieldList,data:this.props.masterData[\"MAHContact\"],dataResult:process(this.props.masterData[\"MAHContact\"],this.state.dataState),dataState:this.state.dataState,dataStateChange:this.mahDataStateChange,extractedColumnList:this.mahContactColumnList,controlMap:this.props.controlMap,userRoleControlRights:this.props.userRoleControlRights,inputParam:this.props.inputParam,userInfo:this.props.userInfo,methodUrl:\"MAHContact\"// methodUrl=\"MarketAuthorisationHolderContact\"\n,fetchRecord:this.props.getMAHContactComboDataService,editParam:mahEditParam,deleteRecord:this.deleteRecord,deleteParam:mahDeleteParam,pageable:true,scrollable:\"scrollable\"//gridHeight={\"600px\"}\n//isComponent={false}\n,isActionRequired:true,isToolBarRequired:false,selectedId:this.props.selectedId,hasDynamicColSize:true}))))))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,formatMessage:this.props.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddMAHContact,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,formatMessage:this.props.formatMessage,selectedMAHolder:this.props.masterData.SelectedMAHolder||{}})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var dataState=this.state.dataState;if(this.props.dataState===undefined){dataState={skip:0,take:this.props.settings?parseInt(this.props.settings[14]):5};}var isOpen=false;if(this.props.errorCode!==undefined&&(this.state.operation===\"create\"||this.state.operation===\"update\")){isOpen=true;}this.setState({isOpen:isOpen,activeTab:'MAHContact-tab',dataState:dataState});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}// getMAHContactComboDataService(screenName, operation, primaryKeyName, primaryKeyValue) {\n//     if (this.props.masterData.SelectedMAHolder.ntransactionstatus !== transactionStatus.RETIRED) {\n//         const contactData = {\n//             \"nmahcontactcode\": primaryKeyValue, nmahcode: this.props.masterData.SelectedMAHolder.nmahcode, //nmastersitecode: maHolder.nsitecode,\n//             \"userinfo\": this.props.userInfo\n//         };\n//         const contactService = rsapi.post(\"marketauthorisationholdercontact/getMarketAuthorisationHolderContact\", contactData);\n//         let urlArray = [];\n//         if (operation === \"create\") {\n//             urlArray = [contactService];\n//         }\n//         else {\n//             const contactById = rsapi.post(\"marketauthorisationholdercontact/getActiveMarketAuthorisationHolderContactById\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": this.props.userInfo });\n//             urlArray = [contactService, contactById];\n//         }\n//         Axios.all(urlArray)\n//             .then(response => {\n//                 let selectedRecord = undefined;\n//                 if (operation === \"update\") {\n//                     selectedRecord = response[1].data;\n//                     selectedRecord[\"nmahcontactcode\"] = response[1].data[\"nmahcontactcode\"];\n//                 }\n//                 this.setState({\n//                     isOpen: true,\n//                     operation, screenName,\n//                     selectedRecord\n//                 });\n//             })\n//             .catch(error => {\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 }\n//                 else {\n//                     toast.warn(this.props.formatMessage({ id: error.response.data }));\n//                 }\n//             })\n//     }\n//     else {\n//         toast.warn(this.props.formatMessage({ id: this.props.masterData.SelectedUser.sactivestatus }));\n//     }\n// }\n},{key:\"saveMAHContact\",value:function saveMAHContact(saveType,formRef){var _this3=this;var inputData=[];var dataState=undefined;inputData[\"userinfo\"]=this.props.userInfo;inputData[\"marketauthorisationholder\"]=this.props.masterData.SelectedMAHolder;inputData[\"marketauthorisationholdercontact\"]={};var selectedId=null;if(this.props.operation===\"update\"){// edit\ninputData[\"marketauthorisationholdercontact\"]=this.state.selectedRecord;selectedId=this.state.selectedRecord.nmahcontactcode;dataState=this.state.dataState;}this.holderFieldList.map(function(item){return inputData[\"marketauthorisationholdercontact\"][item]=_this3.state.selectedRecord[item];});inputData[\"marketauthorisationholdercontact\"][\"nmahcode\"]=this.props.masterData.SelectedMAHolder.nmahcode;//this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\nvar inputParam={classUrl:\"marketauthorisationholdercontact\",methodUrl:\"MarketAuthorisationHolderContact\",inputData:inputData,selectedId:selectedId,operation:this.props.operation,saveType:saveType,formRef:formRef,dataState:dataState};return inputParam;}}]);return MAHContact;}(React.Component);export default injectIntl(MAHContact);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/pages/contactmaster/MAHContact.jsx"],"names":["React","Row","Col","Card","Nav","FormGroup","FormLabel","FontAwesomeIcon","faPlus","MediaLabel","FormattedMessage","injectIntl","process","SlideOutModal","toast","AddMAHContact","Esign","DEFAULT_RETURN","showEsign","validateEmail","validatePhoneNumber","DataGrid","transactionStatus","MAHContact","props","mahDataStateChange","event","setState","dataResult","masterData","dataState","expandChange","isExpanded","dataItem","expanded","undefined","aggregates","detailBand","Dataitem","OptionalFieldList","datafield","Column","map","fields","closeModal","loadEsign","openChildModal","selectedRecord","operation","updateInfo","typeName","data","selectedId","updateStore","getTabContent","activeTab","currentTarget","name","onComboChange","comboData","fieldName","state","deputyUserList","item","nusersitecode","value","sfirstname","slastname","onInputOnChange","target","type","checked","ACTIVE","DEACTIVE","YES","NO","onSaveClick","saveType","formRef","inputParam","screenName","saveMAHContact","esignRights","userInfo","nformcode","ncontrolCode","screenData","crudMaster","warn","intl","formatMessage","id","deleteRecord","deleteparam","SelectedMAHolder","ntransactionstatus","RETIRED","stranstatus","classUrl","methodUrl","inputData","toLowerCase","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","detailedFieldList","dataField","idsName","columnSize","skip","take","settings","parseInt","isOpen","holderFieldList","mahContactColumnList","addMAHContactId","controlMap","has","get","ncontrolcode","editMAHContactId","deleteMAHContactId","mahAddParam","primaryKeyField","mahEditParam","mahDeleteParam","mandatoryFields","forEach","mandatory","push","paddingTop","userRoleControlRights","indexOf","getMAHContactComboDataService","previousProps","errorCode","nmahcontactcode","nmahcode","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card, Nav, FormGroup, FormLabel } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { MediaLabel } from '../../components/add-client.styles';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport AddMAHContact from './AddMAHContact';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, validateEmail, validatePhoneNumber } from '../../components/CommonScript';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\n//import ReactTooltip from 'react-tooltip';\r\n\r\nclass MAHContact extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take : this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'MAHContact-tab',\r\n            dataState: dataState\r\n        };\r\n        this.holderFieldList = ['nmahcode', 'smahcontactname', 'sphoneno', 'smobileno',\r\n            'sfaxno', 'semail', 'ndefaultstatus'];//'nmahcode',\r\n        this.mahContactColumnList =\r\n                     [{ \"idsName\": \"IDS_MAHCONTACTNAME\", \"dataField\": \"smahcontactname\", \"width\": \"200px\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                      { \"idsName\": \"IDS_EMAIL\", \"dataField\": \"semail\", \"width\": \"200px\", \"mandatory\": true, \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }), \"validateFunction\": validateEmail , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                      { \"idsName\": \"IDS_DEFAULT\", \"dataField\": \"sdisplaystatus\", \"width\": \"150px\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"}\r\n                       ];\r\n    }\r\n\r\n    mahDataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.props.masterData[\"MAHContact\"], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const addMAHContactId = this.props.controlMap.has(\"AddMAHContact\") && this.props.controlMap.get(\"AddMAHContact\").ncontrolcode\r\n        const editMAHContactId = this.props.controlMap.has(\"EditMAHContact\") && this.props.controlMap.get(\"EditMAHContact\").ncontrolcode;\r\n        const deleteMAHContactId = this.props.controlMap.has(\"DeleteMAHContact\") && this.props.controlMap.get(\"DeleteMAHContact\").ncontrolcode\r\n\r\n\r\n        const mahAddParam = {\r\n            screenName: \"MAH Contact\", operation: \"create\", primaryKeyField: \"nmahcontactcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addMAHContactId\r\n        };\r\n\r\n        const mahEditParam = {\r\n            screenName: \"MAH Contact\", operation: \"update\", primaryKeyField: \"nmahcontactcode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: editMAHContactId\r\n        };\r\n\r\n        const mahDeleteParam = { screenName: \"MAHolder\", methodUrl: \"MarketAuthorisationHolderContact\", operation: \"delete\", ncontrolCode: deleteMAHContactId };\r\n        const mandatoryFields = [];\r\n        this.mahContactColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card //className=\"at-tabs border-0\"\r\n                        >\r\n                            <Card.Header className=\"add-txt-btn\">\r\n                                <strong> <FormattedMessage id=\"IDS_MAHCONTACT\" defaultMessage=\"MAH Contact\" /></strong>\r\n                            </Card.Header>\r\n                            <Card.Body style={{ paddingTop: 'unset' }}>\r\n                                <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" >\r\n                                    <Col md={12}>\r\n                                        <div className=\"d-flex justify-content-end\">\r\n                                            {/* <ReactTooltip place=\"bottom\" globalEventOff='click' /> */}\r\n                                            <Nav.Link className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addMAHContactId) === -1}\r\n                                                // data-tip={this.props.intl.formatMessage({ id: \"IDS_ADDMAHCONTACT\" })}\r\n                                                onClick={() => this.props.getMAHContactComboDataService(mahAddParam)}>\r\n                                                <FontAwesomeIcon icon={faPlus} /> { }\r\n                                                <FormattedMessage id='IDS_MAHCONTACT' defaultMessage='MAHContact' />\r\n                                            </Nav.Link>\r\n                                        </div>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"no-gutters\">\r\n                                    <Col md={12}>\r\n                                        <DataGrid\r\n                                            primaryKeyField={\"nmahcontactcode\"}\r\n                                            expandField=\"expanded\"\r\n                                            detailedFieldList={this.detailedFieldList}\r\n                                            data={this.props.masterData[\"MAHContact\"]}\r\n                                            dataResult={process(this.props.masterData[\"MAHContact\"], this.state.dataState)}\r\n                                            dataState={this.state.dataState}\r\n                                            dataStateChange={this.mahDataStateChange}\r\n                                            extractedColumnList={this.mahContactColumnList}\r\n                                            controlMap={this.props.controlMap}\r\n                                            userRoleControlRights={this.props.userRoleControlRights}\r\n                                            inputParam={this.props.inputParam}\r\n                                            userInfo={this.props.userInfo}\r\n                                            methodUrl=\"MAHContact\"\r\n                                            // methodUrl=\"MarketAuthorisationHolderContact\"\r\n                                            fetchRecord={this.props.getMAHContactComboDataService}\r\n                                            editParam={mahEditParam}\r\n                                            deleteRecord={this.deleteRecord}\r\n                                            deleteParam={mahDeleteParam}\r\n                                            pageable={true}\r\n                                            scrollable={\"scrollable\"}\r\n                                            //gridHeight={\"600px\"}\r\n                                            //isComponent={false}\r\n                                            isActionRequired={true}\r\n                                            isToolBarRequired={false}\r\n                                            selectedId={this.props.selectedId}\r\n                                            hasDynamicColSize={true}\r\n                                        />\r\n\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                            {/* <Card className=\"at-tabs\">\r\n                            <Tab.Container defaultActiveKey={this.state.activeTab}>\r\n                                <Card.Header className=\"d-flex tab-card-header\">\r\n                                    <Nav className=\"nav nav-tabs card-header-tabs flex-grow-1\" as=\"ul\">\r\n                                        <Nav.Item as='li'>\r\n                                            <Nav.Link eventKey=\"MAHContact-tab\">\r\n                                                <FormattedMessage id=\"IDS_MAHCONTACT\" defaultMessage=\"MAH Contact\" />\r\n                                            </Nav.Link>\r\n\r\n                                        </Nav.Item>\r\n\r\n                                    </Nav>\r\n                                </Card.Header>\r\n                                <Tab.Content>\r\n                                    <Tab.Pane className=\"fade p-0 \" eventKey=\"MAHContact-tab\">\r\n                                        <Row className=\"no-gutters text-right border-bottom pt-2 pb-2\" >\r\n\r\n                                            <Col md={12}>\r\n\r\n                                                <Nav.Link className=\"add-txt-btn\" hidden={this.props.userRoleControlRights.indexOf(addMAHContactId) === -1}\r\n                                                    onClick={() => this.props.getMAHContactComboDataService(mahAddParam)}>\r\n                                                    <FontAwesomeIcon icon={faPlus} /> {}\r\n                                                    <FormattedMessage id='IDS_ADDMAHCONTACT' defaultMessage='Add MAHContact' />\r\n                                                </Nav.Link>\r\n                                            </Col>\r\n                                        </Row>\r\n                                        <Row className=\"no-gutters\">\r\n                                            <Col md={12}>\r\n                                                <DataGrid\r\n                                                    primaryKeyField={\"nmahcontactcode\"}\r\n                                                    expandField=\"expanded\"\r\n                                                    detailedFieldList={this.detailedFieldList}\r\n                                                    data={this.props.masterData[\"MAHContact\"]}\r\n                                                    dataResult={process(this.props.masterData[\"MAHContact\"], this.state.dataState)}\r\n                                                    dataState={this.state.dataState}\r\n                                                    dataStateChange={this.mahDataStateChange}\r\n                                                    extractedColumnList={this.mahContactColumnList}\r\n                                                    controlMap={this.props.controlMap}\r\n                                                    userRoleControlRights={this.props.userRoleControlRights}\r\n                                                    inputParam={this.props.inputParam}\r\n                                                    userInfo={this.props.userInfo}\r\n                                                    methodUrl=\"MarketAuthorisationHolderContact\"\r\n                                                    fetchRecord={this.props.getMAHContactComboDataService}\r\n                                                    editParam={mahEditParam}\r\n                                                    deleteRecord={this.deleteRecord}\r\n                                                    deleteParam={mahDeleteParam}\r\n                                                    pageable={false}\r\n                                                    scrollable={\"auto\"}\r\n                                                    isComponent={false}\r\n                                                    isActionRequired={true}\r\n                                                    isToolBarRequired={false}\r\n                                                    selectedId={this.props.selectedId}\r\n                                                />\r\n\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Tab.Pane>\r\n\r\n                                </Tab.Content>\r\n                            </Tab.Container> */}\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                formatMessage={this.props.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                            <AddMAHContact selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                formatMessage={this.props.formatMessage}\r\n\r\n                                selectedMAHolder={this.props.masterData.SelectedMAHolder || {}}\r\n                            />\r\n\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n    expandChange = (event) => {\r\n        const isExpanded =\r\n            event.dataItem.expanded === undefined ?\r\n                event.dataItem.aggregates : event.dataItem.expanded;\r\n        event.dataItem.expanded = !isExpanded;\r\n        this.setState({ ...this.props });\r\n    }\r\n    detailBand = (props) => {\r\n\r\n        const Dataitem = props.dataItem\r\n        const OptionalFieldList = [\r\n            { datafield: \"sphoneno\", Column: \"Phone No\" },\r\n            { datafield: \"smobileno\", Column: \"Mobile No\" },\r\n            { datafield: \"sfaxno\", Column: \"Fax No\" },\r\n\r\n        ];\r\n        return (<Row>\r\n            {OptionalFieldList.map((fields) => {\r\n                return (\r\n                    <Col md='6'>\r\n                        <FormGroup>\r\n                            <FormLabel><FormattedMessage id={fields.Column} message={fields.Column} /></FormLabel>\r\n                            <MediaLabel className=\"readonly-text font-weight-normal\">{Dataitem[fields.datafield]}</MediaLabel>\r\n                        </FormGroup>\r\n                    </Col>\r\n                )\r\n            })\r\n            }\r\n        </Row>)\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord, selectedId: null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    getTabContent = (event) => {\r\n        this.setState({ activeTab: event.currentTarget.name });\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;;\r\n\r\n        if (fieldName === \"ndeputyusersitecode\") {\r\n            this.state.deputyUserList.map(item => {\r\n                if (item.nusersitecode === comboData.value) {\r\n                    selectedRecord[\"sdeputyname\"] = item.sfirstname + \" \" + item.slastname\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        this.setState({ selectedRecord });\r\n\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            // else if (event.target.name === \"nlockmode\")\r\n            //     selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n            else\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else {\r\n            // if (event.target.name === \"sphoneno\" || event.target.name === \"smobileno\" || event.target.name === \"sfaxno\") {\r\n            //     event.target.value = validatePhoneNumber(event.target.value);\r\n            //     if (event.target.value !== \"\") {\r\n            //         selectedRecord[event.target.name] = event.target.value;\r\n            //     }\r\n            // }\r\n            // else {\r\n            //     selectedRecord[event.target.name] = event.target.value;\r\n            // }\r\n            if (event.target.name === \"sphoneno\" || event.target.name === \"smobileno\" || event.target.name === \"sfaxno\") {\r\n                if (event.target.value !== \"\") {\r\n                    event.target.value = validatePhoneNumber(event.target.value);\r\n                    selectedRecord[event.target.name] = event.target.value !== \"\" ? event.target.value : selectedRecord[event.target.name];\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value\r\n                }\r\n            }\r\n            else {\r\n                selectedRecord[event.target.name] = event.target.value;\r\n            }\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n\r\n            let { dataState } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                dataState = { skip: 0, take : this.props.settings ? parseInt(this.props.settings[14]) : 5 }\r\n            }\r\n\r\n            let isOpen = false;\r\n            if (this.props.errorCode !== undefined && (this.state.operation === \"create\" || this.state.operation === \"update\")) {\r\n                isOpen = true;\r\n            }\r\n            this.setState({ isOpen, activeTab: 'MAHContact-tab', dataState });\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n\r\n    }\r\n\r\n    // getMAHContactComboDataService(screenName, operation, primaryKeyName, primaryKeyValue) {\r\n    //     if (this.props.masterData.SelectedMAHolder.ntransactionstatus !== transactionStatus.RETIRED) {\r\n\r\n    //         const contactData = {\r\n    //             \"nmahcontactcode\": primaryKeyValue, nmahcode: this.props.masterData.SelectedMAHolder.nmahcode, //nmastersitecode: maHolder.nsitecode,\r\n    //             \"userinfo\": this.props.userInfo\r\n\r\n    //         };\r\n    //         const contactService = rsapi.post(\"marketauthorisationholdercontact/getMarketAuthorisationHolderContact\", contactData);\r\n\r\n    //         let urlArray = [];\r\n    //         if (operation === \"create\") {\r\n    //             urlArray = [contactService];\r\n    //         }\r\n    //         else {\r\n    //             const contactById = rsapi.post(\"marketauthorisationholdercontact/getActiveMarketAuthorisationHolderContactById\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": this.props.userInfo });\r\n    //             urlArray = [contactService, contactById];\r\n    //         }\r\n\r\n    //         Axios.all(urlArray)\r\n    //             .then(response => {\r\n\r\n\r\n    //                 let selectedRecord = undefined;\r\n    //                 if (operation === \"update\") {\r\n    //                     selectedRecord = response[1].data;\r\n\r\n\r\n    //                     selectedRecord[\"nmahcontactcode\"] = response[1].data[\"nmahcontactcode\"];\r\n    //                 }\r\n    //                 this.setState({\r\n\r\n    //                     isOpen: true,\r\n    //                     operation, screenName,\r\n    //                     selectedRecord\r\n    //                 });\r\n    //             })\r\n    //             .catch(error => {\r\n    //                 if (error.response.status === 500) {\r\n    //                     toast.error(error.message);\r\n    //                 }\r\n    //                 else {\r\n    //                     toast.warn(this.props.formatMessage({ id: error.response.data }));\r\n    //                 }\r\n    //             })\r\n    //     }\r\n    //     else {\r\n    //         toast.warn(this.props.formatMessage({ id: this.props.masterData.SelectedUser.sactivestatus }));\r\n    //     }\r\n    // }\r\n\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        if (this.state.selectedRecord['semail'] ? validateEmail(this.state.selectedRecord['semail']) : true) {\r\n            //add / edit  \r\n            let inputParam = {};\r\n\r\n            if (this.props.screenName === \"MAH Contact\") {\r\n                inputParam = this.saveMAHContact(saveType, formRef);\r\n            }\r\n\r\n\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_ENTERVALIDEMAIL\" }));\r\n        }\r\n    }\r\n\r\n    saveMAHContact(saveType, formRef) {\r\n        let inputData = [];\r\n        let dataState = undefined;\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"marketauthorisationholder\"] = this.props.masterData.SelectedMAHolder;\r\n        inputData[\"marketauthorisationholdercontact\"] = {};\r\n        let selectedId = null;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            inputData[\"marketauthorisationholdercontact\"] = this.state.selectedRecord;\r\n            selectedId = this.state.selectedRecord.nmahcontactcode;\r\n            dataState = this.state.dataState;\r\n        }\r\n\r\n\r\n\r\n        this.holderFieldList.map(item => {\r\n            return inputData[\"marketauthorisationholdercontact\"][item] = this.state.selectedRecord[item]\r\n        });\r\n        inputData[\"marketauthorisationholdercontact\"][\"nmahcode\"] = this.props.masterData.SelectedMAHolder.nmahcode; //this.state.selectedRecord[\"nmahcode\"] ? this.state.selectedRecord[\"nmahcode\"].value : \"\";\r\n\r\n        const inputParam = {\r\n            classUrl: \"marketauthorisationholdercontact\",\r\n            methodUrl: \"MarketAuthorisationHolderContact\",\r\n            inputData: inputData, selectedId,\r\n            operation: this.props.operation, saveType, formRef, dataState\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n    deleteRecord = (deleteparam) => {\r\n        if (deleteparam.selectedRecord.expanded !== undefined) {\r\n            delete deleteparam.selectedRecord.expanded\r\n        }\r\n        if (this.props.masterData.SelectedMAHolder.ntransactionstatus === transactionStatus.RETIRED) {\r\n            toast.warn(this.props.intl.formatMessage({ id: this.props.masterData.SelectedMAHolder.stranstatus }));\r\n        }\r\n        else {\r\n            const inputParam = {\r\n                classUrl: \"marketauthorisationholdercontact\",\r\n                methodUrl: deleteparam.methodUrl,\r\n                inputData: {\r\n                    [deleteparam.methodUrl.toLowerCase()]: deleteparam.selectedRecord,\r\n                    \"userinfo\": this.props.userInfo\r\n\r\n                },\r\n                operation: deleteparam.operation,\r\n                dataState: this.state.dataState\r\n            }\r\n\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: deleteparam.screenName, operation: deleteparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n               \r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n\r\n    detailedFieldList = [\r\n        { dataField: \"sphoneno\", idsName: \"IDS_PHONENO\" , columnSize:\"4\"},\r\n        { dataField: \"smobileno\", idsName: \"IDS_MOBILENO\" , columnSize:\"4\"},\r\n        { dataField: \"sfaxno\", idsName: \"IDS_FAXNO\", columnSize:\"4\" },\r\n        //{ dataField: \"sdisplaystatus\", idsName: \"IDS_DISPLAYSTATUS\" },\r\n        //{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\r\n\r\n    ];\r\n}\r\n\r\nexport default injectIntl(MAHContact);"]},"metadata":{},"sourceType":"module"}