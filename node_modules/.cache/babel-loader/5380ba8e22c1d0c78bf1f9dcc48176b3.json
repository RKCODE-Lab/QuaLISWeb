{"ast":null,"code":"import rsapi from '../rsapi';\nimport { DEFAULT_RETURN } from './LoginTypes';\nimport Axios from 'axios'; //import {constructOptionList} from '../components/CommonScript';\n\nimport { initRequest } from './LoginAction';\nimport { toast } from 'react-toastify';\nimport { intl } from '../components/App';\nexport function fetchRecordComponent(fetchRecordParam) {\n  return function (dispatch) {\n    let urlArray = [];\n    let selectedId = null;\n\n    if (fetchRecordParam.operation === \"update\") {\n      const component = rsapi.post(fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\", {\n        [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue,\n        \"userinfo\": fetchRecordParam.userInfo\n      });\n      urlArray = [component];\n      selectedId = fetchRecordParam.primaryKeyValue;\n    } else {\n      urlArray = [];\n    }\n\n    dispatch(initRequest(true));\n    Axios.all(urlArray).then(Axios.spread((...response) => {\n      let selectedRecord = {};\n\n      if (fetchRecordParam.operation === \"update\") {\n        selectedRecord = response[0].data;\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: fetchRecordParam.operation === \"update\" ? selectedRecord : selectedRecord,\n          operation: fetchRecordParam.operation,\n          screenName: fetchRecordParam.screenName,\n          openModal: true,\n          ncontrolCode: fetchRecordParam.ncontrolCode,\n          loading: false,\n          selectedId\n        }\n      });\n    })).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      }); //console.log(\"Error In Component : \", error);\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/ComponentAction.js"],"names":["rsapi","DEFAULT_RETURN","Axios","initRequest","toast","intl","fetchRecordComponent","fetchRecordParam","dispatch","urlArray","selectedId","operation","component","post","inputParam","classUrl","methodUrl","primaryKeyField","primaryKeyValue","userInfo","all","then","spread","response","selectedRecord","data","type","payload","screenName","openModal","ncontrolCode","loading","catch","error","status","formatMessage","id","message","warn"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,UAAlB;AACA,SAASC,cAAT,QAA+B,cAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,IAAT,QAAqB,mBAArB;AAEA,OAAO,SAASC,oBAAT,CAA8BC,gBAA9B,EAAgD;AACnD,SAAO,UAAUC,QAAV,EAAoB;AACvB,QAAIC,QAAQ,GAAG,EAAf;AAEA,QAAIC,UAAU,GAAG,IAAjB;;AACA,QAAIH,gBAAgB,CAACI,SAAjB,KAA+B,QAAnC,EAA6C;AACzC,YAAMC,SAAS,GAAGZ,KAAK,CAACa,IAAN,CAAWN,gBAAgB,CAACO,UAAjB,CAA4BC,QAA5B,GAAuC,YAAvC,GAAsDR,gBAAgB,CAACO,UAAjB,CAA4BE,SAAlF,GAA8F,MAAzG,EAAiH;AAAE,SAACT,gBAAgB,CAACU,eAAlB,GAAoCV,gBAAgB,CAACW,eAAvD;AAAwE,oBAAYX,gBAAgB,CAACY;AAArG,OAAjH,CAAlB;AAEAV,MAAAA,QAAQ,GAAG,CAAEG,SAAF,CAAX;AACAF,MAAAA,UAAU,GAAGH,gBAAgB,CAACW,eAA9B;AACH,KALD,MAMK;AACDT,MAAAA,QAAQ,GAAG,EAAX;AACH;;AACDD,IAAAA,QAAQ,CAACL,WAAW,CAAC,IAAD,CAAZ,CAAR;AACAD,IAAAA,KAAK,CAACkB,GAAN,CAAUX,QAAV,EACKY,IADL,CACUnB,KAAK,CAACoB,MAAN,CAAa,CAAC,GAAGC,QAAJ,KAAiB;AAEhC,UAAIC,cAAc,GAAG,EAArB;;AAEA,UAAIjB,gBAAgB,CAACI,SAAjB,KAA+B,QAAnC,EAA6C;AACzCa,QAAAA,cAAc,GAAGD,QAAQ,CAAC,CAAD,CAAR,CAAYE,IAA7B;AACH;;AACDjB,MAAAA,QAAQ,CAAC;AACLkB,QAAAA,IAAI,EAAEzB,cADD;AAEL0B,QAAAA,OAAO,EAAE;AACLH,UAAAA,cAAc,EAAEjB,gBAAgB,CAACI,SAAjB,KAA+B,QAA/B,GAA0Ca,cAA1C,GAA2DA,cADtE;AAELb,UAAAA,SAAS,EAAEJ,gBAAgB,CAACI,SAFvB;AAGLiB,UAAAA,UAAU,EAAErB,gBAAgB,CAACqB,UAHxB;AAILC,UAAAA,SAAS,EAAE,IAJN;AAIYC,UAAAA,YAAY,EAAEvB,gBAAgB,CAACuB,YAJ3C;AAKLC,UAAAA,OAAO,EAAE,KALJ;AAKWrB,UAAAA;AALX;AAFJ,OAAD,CAAR;AAUH,KAjBK,CADV,EAoBKsB,KApBL,CAoBWC,KAAK,IAAI;AACZzB,MAAAA,QAAQ,CAAC;AAAEkB,QAAAA,IAAI,EAAEzB,cAAR;AAAwB0B,QAAAA,OAAO,EAAE;AAAEI,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR,CADY,CAEZ;;AACA,UAAIE,KAAK,CAACV,QAAN,CAAeW,MAAf,KAA0B,GAA9B,EAAmC;AAC/B9B,QAAAA,KAAK,CAAC6B,KAAN,CAAY5B,IAAI,CAAC8B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAEH,KAAK,CAACI;AAAZ,SAAnB,CAAZ;AACH,OAFD,MAGK;AACDjC,QAAAA,KAAK,CAACkC,IAAN,CAAWjC,IAAI,CAAC8B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAEH,KAAK,CAACV,QAAN,CAAeE;AAArB,SAAnB,CAAX;AACH;AACJ,KA7BL;AA+BH,GA7CD;AA8CH","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport Axios from 'axios';\r\n//import {constructOptionList} from '../components/CommonScript';\r\nimport { initRequest } from './LoginAction';\r\nimport { toast } from 'react-toastify';\r\nimport { intl } from '../components/App';\r\n\r\nexport function fetchRecordComponent(fetchRecordParam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n\r\n        let selectedId = null;\r\n        if (fetchRecordParam.operation === \"update\") {\r\n            const component = rsapi.post(fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\", { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo });\r\n\r\n            urlArray = [ component];\r\n            selectedId = fetchRecordParam.primaryKeyValue;\r\n        }\r\n        else {\r\n            urlArray = [];\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(Axios.spread((...response) => {\r\n\r\n                let selectedRecord = {};\r\n\r\n                if (fetchRecordParam.operation === \"update\") {\r\n                    selectedRecord = response[0].data;\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord: fetchRecordParam.operation === \"update\" ? selectedRecord : selectedRecord,\r\n                        operation: fetchRecordParam.operation,\r\n                        screenName: fetchRecordParam.screenName,\r\n                        openModal: true, ncontrolCode: fetchRecordParam.ncontrolCode,\r\n                        loading: false, selectedId\r\n                    }\r\n                });\r\n            }))\r\n\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                //console.log(\"Error In Component : \", error);\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n            })\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}