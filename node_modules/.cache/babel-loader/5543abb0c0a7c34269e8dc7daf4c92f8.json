{"ast":null,"code":"import { toast } from 'react-toastify';\nimport rsapi from '../rsapi';\nimport { initRequest, updateStore } from './LoginAction';\nimport { DEFAULT_RETURN, REQUEST_FAILURE } from './LoginTypes';\nimport { sortData, searchData, searchJsonData, replaceUpdatedObject, constructOptionList, rearrangeDateFormat, Lims_JSON_stringify } from '../components/CommonScript';\nimport { intl } from '../components/App';\nimport { selectedDashBoardView } from './DashBoardTypeAction';\nimport Axios from \"axios\";\nimport { REPORTTYPE, designComponents, transactionStatus } from '../components/Enumeration';\nimport ConfirmMessage from '../components/confirm-alert/confirm-message.component';\nimport { viewReportDetailWithParametersReports } from './ReportDesignerAction'; // import { getValidComponent } from '../components/droparea/helpers';\n//import { Engine } from 'json-rules-engine';\n//import employee from '../rules/Employee-Salary.json';\n\nexport const callService = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    return rsapi.post(inputParam.classUrl + \"/get\" + inputParam.methodUrl, inputParam.inputData).then(response => {\n      // console.log(\"res:\", response);\n      ///Start of Rule Engine code///////////////////////\n      // const decisions1 = [\n      //   {\n      //       \"conditions\": {\n      //           \"all\": [\n      //               {\n      //                   \"fact\": \"Designation\",\n      //                   \"operator\": \"equal\",\n      //                   \"value\": \"Manager\"\n      //               },\n      //               {\n      //                   \"fact\": \"Experience\",\n      //                   \"operator\": \"greaterThan\",\n      //                   \"value\": 10\n      //               }\n      //           ]\n      //       },\n      //       \"event\": {\n      //           \"type\": \"RS.1500000\",\n      //           \"params\": {message: 'Your Salary is 1500000/annum!'}\n      //       }\n      //   }\n      // ];\n      // console.log(\"decisions:\",decisions1);  \n      // const inputs1 = {Designation: 'Manager', Experience: 9 };\n      // const engine = new Engine(employee.decisions);   \n      // engine.run(inputs1)\n      // .then(results => {       \n      //   console.log(\"Rule output:\", results.events);\n      //   if ( results.events.length > 0){\n      //     const events = results.events;\n      //     events.map(event => console.log(\"Message:\",event.params.message)); \n      //     rsapi.post(\"section/getSection\" , inputParam.inputData)\n      //     .then(response => {\n      //       console.log(\"data:\", response);\n      //       let data = response.data;\n      //       sortData(data);\n      //       const updateInfo = {\n      //         typeName: DEFAULT_RETURN,\n      //         data: { masterData: [], organisation: undefined, }\n      //       }\n      //       dispatch(updateStore(updateInfo))\n      //       dispatch({\n      //         type: DEFAULT_RETURN,\n      //         payload: {\n      //           masterData: data,\n      //           activeTestTab: data.activeTestTab,\n      //           activeTestKey: data.activeTestKey,\n      //           activeBCTab: data.activeBCTab,\n      //           inputParam: inputParam,\n      //           masterStatus: \"\",\n      //           userInfo: inputParam.inputData.userinfo,\n      //           loading: false, selectedId: null, selectedRecord: {},\n      //           dataState: undefined,\n      //           organisation: {\n      //             selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\n      //             primaryKeyValue: data.AddedChildPrimaryKey\n      //           },\n      //           displayName: inputParam.displayName,\n      //           reportFilePath: undefined\n      //         }\n      //       })\n      //     })\n      //     .catch(error => {\n      //       if (error.response === undefined && error === \"Network Error\") {\n      //         dispatch({\n      //           type: REQUEST_FAILURE,\n      //           payload: {\n      //             error: \"Network Error\",\n      //             loading: false,\n      //           }\n      //         });\n      //       } else if (error.response.status === 417) {\n      //         toast.warning(error.response.data);\n      //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\n      //       } else {\n      //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\n      //       }\n      //     })\n      //   }\n      //   else{\n      //     console.log(\"Message:\",\"Rules Failed\");\n      //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\n      //   }         \n      // })\n      ///End of Rule Engine code///////////////////////\n      ////uncomment below for Orginial Source start////////////////////\n      if (response.data[\"Success\"]) {\n        toast.warn(response.data.Success);\n      }\n\n      let data = response.data;\n      sortData(data);\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          masterData: [],\n          organisation: undefined\n        }\n      };\n      dispatch(updateStore(updateInfo));\n\n      if (response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\") {\n        toast.warning(intl.formatMessage({\n          id: \"IDS_USERNOTINRESULTENTRYFLOW\"\n        }));\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openExcelModal: false,\n          masterData: data,\n          activeTestTab: data.activeTestTab,\n          activeTestKey: data.activeTestKey,\n          activeBCTab: data.activeBCTab,\n          inputParam: inputParam,\n          masterStatus: \"\",\n          userInfo: inputParam.inputData.userinfo,\n          loading: false,\n          selectedId: null,\n          selectedRecord: {},\n          dataState: undefined,\n          organisation: {\n            selectedNode: data.SelectedNode,\n            selectedNodeName: data.SelectedNodeName,\n            primaryKeyValue: data.AddedChildPrimaryKey\n          },\n          displayName: inputParam.displayName,\n          reportFilePath: undefined,\n          skip: 0,\n          take: undefined,\n          testskip: 0,\n          //testtake: 5,\n          testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10 //  key:inputParam.key!==undefined?inputParam.key:\"\"\n\n        }\n      }); ///Uncomment till above for original source\n    }).catch(error => {\n      //console.log(\"error:\", error);\n      if (error.response === undefined && error === \"Network Error\") {\n        dispatch({\n          type: REQUEST_FAILURE,\n          payload: {\n            error: \"Network Error\",\n            loading: false\n          }\n        });\n      } else if (error.response !== undefined && error.response.status === 417) {\n        toast.warning(error.response.data);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            displayName: inputParam.displayName,\n            userInfo: inputParam.inputData.userinfo\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            displayName: inputParam.displayName,\n            userInfo: inputParam.inputData.userinfo\n          }\n        });\n      }\n    });\n  };\n}; //Start- Add /Edit/Delete Master Data\n\nexport function crudMaster(inputParam, masterData, modalName, defaultInput, ConfirmMessage, clearSelectedRecordField) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload && inputParam.isFileupload !== 'undefined') {\n      const formData = inputParam.formData;\n      formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\n    } else {\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData\n      });\n    }\n\n    return requestUrl.then(response => {\n      if (response.status === 202) {\n        //HttpStatus:Accepted\n        //Use this block when u need to display any success message\n        let selectedRecordObj = {};\n\n        if (inputParam.selectedRecord) {\n          selectedRecordObj = {\n            selectedRecord: inputParam.selectedRecord\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loadEsign: false,\n            [modalName]: false,\n            //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\n            //isFilterDetail is mainly use in the transaction save filter in all screen.\n            isFilterDetail: false,\n            loading: false,\n            ...selectedRecordObj\n          }\n        });\n        toast.success(response.data);\n      } else if (response.status === 208) {\n        //HttpStatus:Accepted\n        //208-Already Reported\n        let selectedRecordObj = {};\n\n        if (inputParam.selectedRecord) {\n          selectedRecordObj = {\n            selectedRecord: inputParam.selectedRecord\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loadEsign: false,\n            [modalName]: false,\n            loading: false,\n            ...selectedRecordObj\n          }\n        });\n        toast.warn(response.data);\n      } else {\n        const retrievedData = sortData(response.data);\n\n        if (masterData === undefined || Array.isArray(retrievedData)) {\n          masterData = retrievedData;\n        } else {\n          if (!response.data.flag) {\n            masterData = { ...masterData,\n              ...retrievedData\n            };\n          } else {\n            masterData = { ...masterData\n            };\n          }\n\n          if (modalName === \"openModal\" && inputParam.operation !== \"delete\" && inputParam.operation !== \"prepare\" && inputParam.operation !== \"create\" && inputParam.operation !== \"copy\") {\n            if (inputParam.postParam) {\n              if (masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]) {\n                const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n                masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\n              } else {\n                const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField]);\n                masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject][0];\n              }\n            }\n          } else if (modalName === \"openModal\" && inputParam.operation === \"create\") {\n            if (inputParam.postParam && inputParam.postParam.isSingleGet) {\n              masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]); //masterData[inputParam.postParam.selectedObject] = response.data;\n\n              sortData(masterData);\n            }\n          } else if (modalName === \"openChildModal\" && inputParam.operation === \"create\") {\n            //searchedData\n            if (inputParam.postParam && inputParam.postParam.isSingleGet) {\n              const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n              masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\n\n              if (masterData[\"searchedData\"] !== undefined) {\n                const foundIndex = masterData[\"searchedData\"].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n                masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\n              }\n\n              sortData(masterData);\n            }\n          } else if (modalName === \"openModal\" && inputParam.operation === \"copy\") {\n            if (inputParam.postParam && inputParam.postParam.isSingleGet) {\n              masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\n              masterData = { ...masterData,\n                ...response.data\n              };\n              sortData(masterData);\n            }\n          } else if (modalName === \"openModal\" && (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\")) {\n            if (inputParam.postParam && inputParam.postParam.isSingleGet) {\n              if (inputParam.postParam.task === \"cancel\") {\n                const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n                masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\n              } else {\n                const list = masterData[inputParam.postParam.inputListName].filter(item => item[inputParam.postParam.primaryKeyField] !== inputParam.postParam.primaryKeyValue);\n                masterData[inputParam.postParam.inputListName] = list; // const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\n                //   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\n                // );\n                // masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \n              }\n\n              response.data.masterData = { ...masterData,\n                ...response.data\n              };\n              sortData(masterData);\n            }\n          }\n        } // (masterData);\n        //let openModal = false;\n\n\n        let openModal = masterData.flag && masterData.flag === 'true' ? true : false; // let openChildModal= false;\n\n        let selectedRecord = {};\n        let activeSampleTab = inputParam.activeSampleTab ? {\n          activeSampleTab: inputParam.activeSampleTab\n        } : '';\n        let activeTestKey = inputParam.activeTestKey ? {\n          activeTestKey: inputParam.activeTestKey\n        } : '';\n        let showSample = inputParam.showSample ? inputParam.showSample : '';\n        let respObject = {\n          masterData,\n          inputParam,\n          modalName,\n          //   openChildModal,\n          //modalName:undefined,\n          //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\n          //isFilterDetail is mainly use in the transaction save filter in all screen.\n          isFilterDetail: false,\n          [modalName]: openModal,\n          operation: inputParam.operation,\n          masterStatus: \"\",\n          errorCode: undefined,\n          loadEsign: false,\n          showEsign: false,\n          selectedRecord,\n          loading: false,\n          dataState: inputParam.dataState,\n          selectedId: inputParam.selectedId,\n          ...activeSampleTab,\n          ...activeTestKey,\n          showSample,\n          design: [],\n          //organisation: undefined\n          organisation: inputParam.nextNode ? {\n            selectedNode: inputParam.nextNode,\n            selectedNodeName: masterData.SelectedNodeName,\n            primaryKeyValue: masterData.AddedChildPrimaryKey\n          } : undefined,\n          showConfirmAlert: inputParam.showConfirmAlert,\n          loadPoolSource: inputParam.loadPoolSource,\n          skip: inputParam.skip || undefined,\n          take: inputParam.take || undefined,\n          openPortal: false\n        };\n\n        if (inputParam.operation === \"create\" || inputParam.operation === \"copy\") {\n          if (inputParam.saveType === 2) {\n            openModal = true; //ALPD-5063 added by Dhanushya RI,Enable save and continue option in Type3 component based screen\n\n            Object.keys(inputParam.selectedRecord).map(item => {\n              clearSelectedRecordField.map(data => {\n                if (data.controlType === \"checkbox\" ? item === data.controlName || item === data.dataField : item === data.dataField) {\n                  selectedRecord = inputParam.selectedRecord;\n                  selectedRecord[item] = data.preSetValue ? data.preSetValue : \"\";\n                } //Added by sonia on 04th Mar 2025 for  jira id:ALPD-5504\n                else {\n                  selectedRecord = inputParam.selectedRecord;\n                }\n              });\n            }); // selectedRecord = defaultInput;\n          }\n\n          respObject = { ...respObject,\n            [modalName]: openModal,\n            selectedRecord\n          };\n        }\n\n        if ((modalName === \"openModal\" || modalName === \"openChildModal\") && Object.keys(masterData).indexOf(\"searchedData\") !== -1 && masterData[\"searchedData\"] !== undefined) {\n          dispatch(postCRUDOrganiseSearch(inputParam.postParam, respObject));\n        } else {\n          //ALPD-5540--Added by vignesh R(07-03-2025)--Supplier-->When click the logout button, blank page occurs in specific scenario\n          if (inputParam.saveType === 2) {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                [modalName]: openModal\n              }\n            });\n          } else {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                [modalName]: undefined\n              }\n            });\n          }\n        }\n      }\n    }).catch(response => {\n      console.log(\"error:\", response);\n\n      if (response.response.status === 500) {\n        dispatch({\n          type: REQUEST_FAILURE,\n          payload: {\n            error: response.message,\n            loading: false // openPortal:this.props.Login.openPortal,\n            //openModal:inputParam.openPortal?false:true\n\n          }\n        });\n      } else if (response.response.status === 409 && response.response.data.flag) {\n        dispatch({\n          type: REQUEST_FAILURE,\n          payload: {\n            loading: false\n          }\n        });\n        let inputData = { ...inputParam.inputData,\n          DeleteExistingRecord: true\n        };\n        ConfirmMessage.confirm(\"deleteMessage\", intl.formatMessage({\n          id: \"IDS_INFOMATION\"\n        }), intl.formatMessage({\n          id: \"IDS_REMOVEEXISTINGCONFIGUARTION\"\n        }), intl.formatMessage({\n          id: \"IDS_OK\"\n        }), intl.formatMessage({\n          id: \"IDS_CANCEL\"\n        }), () => dispatch(crudMaster(inputParam = { ...inputParam,\n          inputData\n        }, masterData, modalName, defaultInput, ConfirmMessage)));\n      } else {\n        let obj = {};\n\n        if (inputParam.openPortal === true) {\n          obj = {\n            openModal: false\n          };\n        }\n\n        let selectedRecordObj = {};\n\n        if (inputParam.selectedRecord) {\n          selectedRecordObj = {\n            selectedRecord: inputParam.selectedRecord\n          };\n        }\n\n        if (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\" || inputParam.operation === \"receive\" || inputParam.operation === 'approve' || inputParam.operation === 'Approve' || inputParam.operation === \"correction\" || inputParam.operation === \"complete\" || inputParam.operation === \"dynamic\" || inputParam.operation === \"setDefault\" || inputParam.operation === \"reset\" || inputParam.operation === \"retire\" || inputParam.operation === \"xml\" || inputParam.operation === 'blackList' || inputParam.operation === 'attendance' || inputParam.operation === 'certified' || inputParam.operation === 'competent' || inputParam.operation === \"invite\" || inputParam.operation === \"cancel\" || inputParam.operation === \"cancel\" || inputParam.operation === \"conduct\" || inputParam.operation === \"attend\" || inputParam.operation === \"certify\" || inputParam.operation === \"Competent\" || inputParam.operation === \"Create\" || inputParam.operation === \"check\") {\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterStatus: response.response.data,\n              errorCode: response.response.status,\n              loadEsign: false,\n              [modalName]: false,\n              loading: false,\n              openPortal: false,\n              ...selectedRecordObj\n            }\n          });\n        } else {\n          // console.log('dispatch',obj)\n          if (inputParam.selectedRecord) {\n            selectedRecordObj = {\n              selectedRecord: inputParam.selectedRecord\n            };\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterStatus: response.response.data,\n              errorCode: response.response.status,\n              loadEsign: false,\n              loading: false,\n              ...obj,\n              ...selectedRecordObj\n            }\n          });\n        }\n      }\n    });\n  };\n}\nexport const validateEsignCredential = (inputParam, modalName, confirmMessage) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n\n    if (inputParam && inputParam.inputData && inputParam.inputData.userinfo) {\n      inputParam.inputData[\"userinfo\"] = { ...inputParam.inputData.userinfo,\n        sformname: Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),\n        smodulename: Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename)\n      };\n    }\n\n    return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData).then(response => {\n      if (response.data === \"Success\") {\n        const methodUrl = inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];\n        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\n\n        if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\n          delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\n\n          if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\n            delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\n            delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\n            delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\n          } // ALPD-2437 added for Type3 Component. Use selected record to clear esign values\n\n\n          if (inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]) {\n            delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];\n            delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];\n            delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];\n            delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];\n          }\n        } //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage))\n\n\n        if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] && inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"sync\") {\n          dispatch(syncAction(inputParam[\"screenData\"][\"inputParam\"]));\n        } else {\n          //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName))\n          //ALPD-5444 Test Group - Copy the spec in test group and do save continue loading issue occurs.\n          dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName, '', confirmMessage, inputParam[\"screenData\"][\"clearSelectedRecordField\"]));\n        }\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport const fetchRecord = fetchRecordParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\n    rsapi.post(url, {\n      [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue,\n      \"userinfo\": fetchRecordParam.userInfo\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: response.data,\n          screenName: fetchRecordParam.screenName,\n          operation: fetchRecordParam.operation,\n          openModal: true,\n          ncontrolCode: fetchRecordParam.ncontrolCode,\n          loading: false,\n          selectedId: fetchRecordParam.primaryKeyValue\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n};\nexport function filterColumnData(filterValue, filterParam, filterOperator) {\n  return function (dispatch) {\n    let masterData = filterParam.masterData;\n    let primaryKeyValue = 0;\n    let searchedData = undefined;\n\n    if (filterValue === \"\") {\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\n        // if(filterParam.isjsondata)\n        // {\n        //    primaryKeyValue = masterData[filterParam.inputListName][0][\"jsondata\"][filterParam.primaryKeyField]\n        //  }\n        //else\n        // {\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField]; // }\n      }\n    } else {\n      if (filterParam.isjsondata) {\n        searchedData = searchJsonData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [], filterOperator);\n      } else {\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [], filterOperator);\n      }\n\n      if (searchedData.length > 0) {\n        //  if(filterParam.isjsondata)\n        // {\n        //  primaryKeyValue = searchedData[0][\"jsondata\"][filterParam.primaryKeyField];\n        //  }\n        // else{\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField]; //  }\n      }\n    }\n\n    if (primaryKeyValue !== 0) {\n      dispatch(initRequest(true));\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject,\n        [filterParam.primaryKeyField]: primaryKeyValue\n      }).then(response => {\n        masterData[\"searchedData\"] = searchedData;\n        masterData = { ...masterData,\n          ...response.data\n        };\n\n        if (filterParam.inputListName === \"DashBoardView\") {\n          dispatch(selectedDashBoardView(response, masterData));\n        } else {\n          if (filterParam.sortField) {\n            sortData(masterData, filterParam.sortOrder, filterParam.sortField);\n          } else {\n            sortData(masterData);\n          }\n\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: {\n              masterData,\n              loading: false,\n              skip: 0,\n              take: 10,\n              selectedId: null\n            }\n          });\n        }\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    } else {\n      masterData[filterParam.selectedObject] = undefined;\n      masterData[\"searchedData\"] = [];\n      Object.keys(masterData).forEach(item => {\n        if (item !== filterParam.inputListName && item !== filterParam.selectedObject && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) === -1) masterData[item] = [];\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          operation: null,\n          modalName: undefined,\n          loading: false\n        }\n      });\n    }\n  };\n}\nexport function postCRUDOrganiseSearch(postParam, respObject) {\n  return function (dispatch) {\n    let masterData = respObject.masterData;\n\n    if (respObject.inputParam.operation === \"create\" || respObject.inputParam.operation === \"copy\") {\n      if (respObject.modalName === \"openModal\") {\n        if (respObject.inputParam.isChild === undefined) {\n          respObject.inputParam.searchRef.current.value = \"\";\n          masterData[\"searchedData\"] = undefined;\n        }\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...respObject,\n          masterData,\n          modalName: undefined\n        }\n      });\n    } else if (respObject.inputParam.operation === \"delete\" || respObject.inputParam.operation === \"prepare\") {\n      if (masterData[\"searchedData\"] !== undefined && respObject.modalName === \"openModal\") {\n        let temp = masterData[\"searchedData\"];\n        let primaryKeyValue = respObject.masterData[\"searchedData\"][0][postParam.primaryKeyField];\n\n        if (respObject.inputParam.isChild === undefined) {\n          temp = masterData[\"searchedData\"].filter(item => Array.isArray(postParam.primaryKeyValue) ? !postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]) : item[postParam.primaryKeyField] !== postParam.primaryKeyValue);\n          primaryKeyValue = temp.length > 0 ? temp[0][postParam.primaryKeyField] : 0;\n        } else {\n          primaryKeyValue = masterData[postParam.selectedObject][postParam.primaryKeyField];\n        }\n\n        masterData[\"searchedData\"] = temp;\n        respObject = { ...respObject,\n          modalName: undefined\n        };\n\n        if (masterData[\"searchedData\"].length > 0) {\n          primaryKeyValue = masterData[\"searchedData\"][0][postParam.primaryKeyField];\n          return rsapi.post(postParam.fetchUrl, { ...postParam.fecthInputObject,\n            [postParam.primaryKeyField]: primaryKeyValue\n          }).then(response => {\n            masterData = { ...masterData,\n              ...response.data\n            };\n            sortData(masterData);\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject,\n                masterData\n              }\n            });\n          }).catch(error => {\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: { ...respObject\n              }\n            });\n\n            if (error.response.status === 500) {\n              toast.error(intl.formatMessage({\n                id: error.message\n              }));\n            } else {\n              toast.warn(intl.formatMessage({\n                id: error.response.data\n              }));\n            }\n          });\n        } else {\n          masterData[postParam.selectedObject] = undefined;\n          masterData[\"searchedData\"] = [];\n          Object.keys(masterData).forEach(item => {\n            if (item !== postParam.inputListName && item !== postParam.selectedObject && postParam.unchangeList && postParam.unchangeList.indexOf(item) === -1) masterData[item] = masterData && Array.isArray(masterData[item]) ? [] : undefined;\n          });\n          dispatch({\n            type: DEFAULT_RETURN,\n            payload: { ...respObject,\n              masterData\n            }\n          });\n        }\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: { ...respObject,\n            masterData,\n            modalName: undefined\n          }\n        });\n      }\n    } else if (respObject.inputParam.filtercombochange) {\n      respObject = { ...respObject,\n        modalName: undefined\n      };\n\n      if (masterData[\"searchedData\"] !== undefined) {\n        masterData[\"searchedData\"] = undefined;\n        respObject.inputParam.searchRef.current.value = \"\";\n      }\n\n      let Map = {};\n\n      if (postParam.selectedComboName !== undefined) {\n        Map = {\n          [postParam.selectedComboName]: {\n            [postParam.selectedComboId]: postParam.selectedCombo\n          }\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...respObject,\n          masterData,\n          ...Map\n        }\n      });\n    } else {\n      respObject = { ...respObject,\n        modalName: undefined\n      };\n\n      if (masterData[\"searchedData\"] !== undefined) {\n        if (masterData[postParam.selectedObject][postParam.primaryKeyField]) {\n          const foundIndex = masterData[\"searchedData\"].findIndex(x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][postParam.primaryKeyField]);\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject];\n        } else {\n          const foundIndex = masterData[\"searchedData\"].findIndex(x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][0][postParam.primaryKeyField]);\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject][0];\n        }\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: { ...respObject,\n          masterData\n        }\n      });\n    }\n  };\n}\nexport const viewAttachment = inputParam => {\n  return dispatch => {\n    let inputData = { ...inputParam.inputData\n    };\n\n    if (inputData['selectedRecord']) {\n      delete inputData['selectedRecord']['expanded'];\n    }\n\n    dispatch(initRequest(true));\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputData).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      let value = \"\";\n\n      if (response.data[\"AttachFile\"]) {\n        document.getElementById(\"download_data\").setAttribute(\"href\", response.data.FilePath);\n        document.getElementById(\"download_data\").click();\n      } else if (response.data[\"AttachLink\"]) {\n        value = response.data[\"AttachLink\"];\n        var win = window.open(value, '_blank');\n\n        if (win) {\n          win.focus();\n        } else {\n          intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\n        }\n      } else {\n        if (response.data[\"rtn\"]) {\n          toast.warn(intl.formatMessage({\n            id: response.data.rtn\n          }));\n        }\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport function filterTransactionList(filterValue, filterParam, filteredListName, param) {\n  return function (dispatch) {\n    let masterData = filterParam.masterData;\n    filteredListName = filteredListName || \"searchedData\";\n    let primaryKeyValue = 0;\n    let searchedData = undefined;\n    let selectedData = [];\n    filterParam.childRefs && filterParam.childRefs.map(childref => {\n      if (childref.ref !== undefined && childref.ref.current !== null) {\n        childref.ref.current.value = \"\";\n        masterData[childref.childFilteredListName] = undefined;\n      }\n\n      return null;\n    });\n\n    if (filterValue === \"\") {\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\n        selectedData.push(masterData[filterParam.inputListName][0]);\n      }\n    } else {\n      if (masterData[filterParam.inputListName]) {\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || []);\n      } else {\n        searchedData = [];\n      }\n\n      if (searchedData.length > 0) {\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\n        selectedData.push(searchedData[0]);\n      }\n    }\n\n    if (primaryKeyValue !== 0 && !filterParam.isService) {\n      primaryKeyValue = filterParam.isSingleSelect ? primaryKeyValue : String(primaryKeyValue);\n      dispatch(initRequest(true));\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject,\n        [filterParam.primaryKeyField]: primaryKeyValue\n      }).then(response => {\n        const dataState = {\n          skip: 0,\n          take: 10\n        };\n        masterData[filteredListName] = searchedData;\n        masterData[filterParam.selectedObject] = selectedData; // ALPD-4130 for Addition Filter Config Data Clear ATE-241\n\n        if (filterParam.primaryKeyField && filterParam.primaryKeyField === \"npreregno\") {\n          masterData[\"kendoFilterList\"] = undefined;\n        }\n\n        masterData = { ...masterData,\n          ...response.data\n        };\n\n        if (filterParam.isSortable) {\n          sortData(masterData[filterParam.sortList], 'descending', filterParam.sortValue);\n        }\n\n        if (filterParam.isMultiSort) {\n          filterParam.multiSortData.forEach(item => {\n            sortData(masterData[item.list], 'descending', item.pkey);\n          });\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false,\n            // skip: 0, take: 10, testskip: 0, testtake: 10,dataState \n            skip: filterParam.skip,\n            take: filterParam.take,\n            sampleskip: filterParam.sampleskip,\n            sampletake: filterParam.sampletake,\n            subsampleskip: filterParam.subsampleskip,\n            subsampletake: filterParam.subsampletake,\n            testskip: filterParam.testskip,\n            testtake: filterParam.testtake,\n            dataState // filterColumnActive:true,\n\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(intl.formatMessage({\n            id: error.message\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: error.response.data\n          }));\n        }\n      });\n    } else {\n      masterData[filterParam.selectedObject] = !filterParam.isService ? undefined : searchedData;\n      masterData[filteredListName] = !filterParam.isService ? [] : searchedData;\n      filterParam.changeList && filterParam.changeList.map(name => masterData[name] = []);\n      param && param.map(item => masterData[item] = []); // Object.keys(masterData).forEach(item=> {\n      //   if (item !== filterParam.inputListName && item !== filterParam.selectedObject \n      //     && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) ===-1)\n      //       masterData[item] = [];\n      //   })   \n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          operation: null,\n          modalName: undefined,\n          // |ilterColumnActive:true,\n          loading: false\n        }\n      });\n    }\n  };\n}\nexport function postCRUDOrganiseTransSearch(postParamList, respObject) {\n  return function (dispatch) {\n    let masterData = respObject.masterData;\n    postParamList && Array.isArray(postParamList) && postParamList.map((postParam, index) => {\n      if (postParam.clearFilter === 'yes') {\n        if (postParam.searchRef.current) {\n          postParam.searchRef.current.value = \"\";\n        }\n\n        masterData[postParam.filteredListName] = undefined;\n        postParam.childRefs && postParam.childRefs.map(childref => {\n          if (childref.ref !== undefined && childref.ref.current !== null) {\n            childref.ref.current.value = \"\";\n            masterData[childref.childFilteredListName] = undefined;\n          }\n\n          return null;\n        });\n      }\n\n      if (Object.keys(masterData).indexOf(postParam.filteredListName) !== -1 && masterData[postParam.filteredListName] !== undefined) {\n        if (postParam.clearFilter === 'check') {\n          if (masterData[postParam.filteredListName] !== undefined) {\n            const temp = masterData[postParam.filteredListName].filter(item => !Array.isArray(postParam.primaryKeyValue) ? postParam.primaryKeyValue : postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]));\n            masterData[postParam.filteredListName] = temp;\n\n            if (masterData[postParam.filteredListName].length > 0) {\n              return rsapi.post(postParam.fetchUrl, { ...postParam.fecthInputObject.fecthInputObject,\n                [postParam.primaryKeyField]: String(respObject.masterData[postParam.filteredListName][0][postParam.primaryKeyField])\n              }).then(response => {\n                masterData = { ...masterData,\n                  ...response.data\n                };\n              });\n            }\n          }\n        } else {\n          if (masterData[postParam.filteredListName] !== undefined) {\n            masterData[postParam.filteredListName] = replaceUpdatedObject(masterData[postParam.updatedListname], masterData[postParam.filteredListName], postParam.primaryKeyField);\n          }\n        }\n      }\n\n      return null;\n    }); //sortData(masterData);\n\n    dispatch({\n      type: DEFAULT_RETURN,\n      payload: { ...respObject,\n        masterData\n      }\n    });\n  };\n}\nexport function showUnderDevelopment() {\n  return function (dispatch) {\n    toast.info(intl.formatMessage({\n      id: \"IDS_UNDERDEVELOPMENT\"\n    }));\n  };\n} //Fetch record when clicking add button in Type3Component\n// export function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList,IntegrationSettings) {\n//   return function (dispatch) {\n//     dispatch(initRequest(true));\n//     let urlArray = [];\n//     extractedColumnList.map(item=>{\n//       if(item.elnget){\n//         //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//         urlArray.push(rsapi.post(IntegrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//       }\n//       else{\n//         urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { userinfo: userInfo }))\n//       }\n//     }\n//       )\n//           Axios.all(urlArray)\n//               .then(response => {\n//                 let ComboFieldData = [];\n//                 let dataList = [];\n//                     extractedColumnList.map((item, index)=> {\n//                       if(item.ndesigncomponentcode == designComponents.COMBOBOX){\n//                         ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\n//                                 item.dataField, undefined, undefined, undefined);\n//                            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\n//                       }\n//     extractedColumnList.map(item =>\n//       urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\n//     )\n//     Axios.all(urlArray)\n//       .then(response => {\n//         let ComboFieldData = [];\n//         let dataList = [];\n//         extractedColumnList.map((item, index) => {\n//           if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\n//             ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\n//               item.dataField, undefined, undefined, undefined);\n//             dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\n//           }\n//         });\n//         dispatch({\n//           type: DEFAULT_RETURN,\n//           payload: {\n//             dataList,\n//             operation,\n//             screenName: inputParam.displayName,\n//             openModal: true,\n//             ncontrolCode, loading: false\n//           }\n//         })\n//       })\n//       .catch(error => {\n//         dispatch(initRequest(false));\n//         if (error.response.status === 500) {\n//           toast.error(error.message);\n//         } else {\n//           toast.warn(intl.formatMessage({\n//             id: error.response.data\n//           }));\n//         }\n//       })\n//   }\n// }\n//Fetch record when clicking add button in Type3Component\n\nexport function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList, IntegrationSettings) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    extractedColumnList.map(item => {\n      if (item.ndesigncomponentcode !== designComponents.CHECKBOX) {\n        if (item.elnget) {\n          //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n          urlArray.push(rsapi.post(IntegrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}));\n        } else {\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {\n            userinfo: userInfo\n          }));\n        }\n      }\n    });\n    Axios.all(urlArray).then(response => {\n      let ComboFieldData = [];\n      let dataList = [];\n      let selectedRecord = {};\n      extractedColumnList.map((item, index) => {\n        if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\n          ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField, item.dataField, undefined, undefined, undefined);\n          dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\n        } else if (item.ndesigncomponentcode === designComponents.CHECKBOX && item.defaultvalue) {\n          selectedRecord[item.controlName] = transactionStatus.YES;\n        }\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          dataList,\n          operation,\n          screenName: inputParam.displayName,\n          openModal: true,\n          ncontrolCode,\n          loading: false,\n          selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch(initRequest(false));\n\n      if (error.response !== undefined && error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else if (error.response === undefined) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n} //Fetch record when clicking edit button in Type3Component\n\nexport const fetchRecordCombo = fetchRecordParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\n    urlArray.push(rsapi.post(url, {\n      [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue,\n      \"userinfo\": fetchRecordParam.userInfo\n    }));\n    fetchRecordParam.extractedColumnList.map(item => {\n      if (item.elnget) {\n        urlArray.push(rsapi.post(fetchRecordParam.integrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}));\n      } else if (item.classUrl && item.methodUrl) {\n        if (item.parentPrimaryField && item.parentPrimaryField !== null) {\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {\n            [item.foreignDataField]: fetchRecordParam.editRow[item.foreignDataField],\n            [item.parentPrimaryField]: fetchRecordParam.editRow[item.parentPrimaryField] || undefined,\n            \"userinfo\": fetchRecordParam.userInfo\n          }));\n        } else {\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {\n            [item.foreignDataField]: fetchRecordParam.editRow[item.foreignDataField],\n            \"userinfo\": fetchRecordParam.userInfo\n          }));\n        } // urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {[item.parentPrimaryField]: fetchRecordParam.editRow.nprojecttypecode , \"userinfo\": fetchRecordParam.userInfo}))\n\n      }\n    });\n    Axios.all(urlArray).then(response => {\n      let ComboFieldData = [];\n      let dataList = [];\n      let selectedRecordData = { ...response[0].data\n      };\n      let responseData = [...response];\n      let extractedColumnData = [];\n      responseData.splice(0, 1);\n      fetchRecordParam.extractedColumnList.map(item => {\n        if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\n          extractedColumnData.push(item);\n\n          if (!item.hideNARecord || selectedRecordData[item.tableDataField] !== -1) {\n            selectedRecordData[item.dataField] = {\n              value: selectedRecordData[item.foreignDataField],\n              label: selectedRecordData[item.dataField]\n            };\n          }\n        } else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\n          selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\n        }\n      });\n      extractedColumnData.map((field, index) => {\n        responseData.map((item, indexValue) => {\n          if (index === indexValue) {\n            if (field.classUrl === 'limselnusermapping' && field.methodUrl === 'getLimsUsers' || field.classUrl === 'limselnsitemapping' && field.methodUrl === 'getLimsSite') {\n              responseData[index].data.push(response[0].data);\n            }\n\n            ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField, field.dataField, undefined, undefined, undefined);\n            dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\n          }\n        });\n      });\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: selectedRecordData,\n          screenName: fetchRecordParam.screenName,\n          operation: fetchRecordParam.operation,\n          openModal: true,\n          ncontrolCode: fetchRecordParam.ncontrolCode,\n          loading: false,\n          selectedId: fetchRecordParam.primaryKeyValue,\n          dataList\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response !== undefined && error.response.status === 500) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else if (error.response === undefined) {\n        toast.error(intl.formatMessage({\n          id: error.message\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}; //Fetch record when clicking edit button in Type3Component\n// export const fetchRecordCombo = (fetchRecordParam) => {\n//   return (dispatch) => {\n//     dispatch(initRequest(true));\n//     let urlArray = [];\n//     const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\n//     urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\n//     fetchRecordParam.extractedColumnList.map(item => {\n//       if(item.classUrl && item.methodUrl){\n//         if(item.elnget){\n//           urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\n//         }\n//         else{\n//           urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\n//         }\n//         //urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\n//       if (item.classUrl && item.methodUrl) {\n//         urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { \"userinfo\": fetchRecordParam.userInfo }))\n//       }\n//     });\n//     Axios.all(urlArray)\n//       .then(response => {\n//       fetchRecordParam.extractedColumnList.map((item) => {\n//         if(item.ndesigncomponentcode === designComponents.COMBOBOX){\n//           extractedColumnData.push(item);\n//           selectedRecordData[item.dataField] = {\n//             value:selectedRecordData[item.foreignDataField],\n//             label:selectedRecordData[item.dataField]\n//           }                      \n//         }\n//         else if(item.ndesigncomponentcode === designComponents.DATEPICKER){\n//           selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\n//         }\n//       })\n//       extractedColumnData.map((field, index) => {\n//         responseData.map((item, indexValue) => {\n//           if(index === indexValue){\n//             if(field.classUrl==='limselnusermapping'&&field.methodUrl==='getLimsUsers'){\n//             responseData[index].data.push(response[0].data);}\n//             ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\n//               field.dataField, undefined, undefined, undefined);\n//          dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\n//         let ComboFieldData = [];\n//         let dataList = [];\n//         let selectedRecordData = { ...response[0].data };\n//         let responseData = [...response];\n//         let extractedColumnData = [];\n//         responseData.splice(0, 1);\n//         fetchRecordParam.extractedColumnList.map((item) => {\n//           if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\n//             extractedColumnData.push(item);\n//             selectedRecordData[item.dataField] = {\n//               value: selectedRecordData[item.foreignDataField],\n//               label: selectedRecordData[item.dataField]\n//             }\n//           }\n//           else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\n//             selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\n//           }\n//         })\n//         extractedColumnData.map((field, index) => {\n//           responseData.map((item, indexValue) => {\n//             if (index === indexValue) {\n//               ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\n//                 field.dataField, undefined, undefined, undefined);\n//               dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\n//             }\n//           })\n//         });\n//         dispatch({\n//           type: DEFAULT_RETURN,\n//           payload: {\n//             selectedRecord: selectedRecordData,\n//             screenName: fetchRecordParam.screenName,\n//             operation: fetchRecordParam.operation,\n//             openModal: true,\n//             ncontrolCode: fetchRecordParam.ncontrolCode,\n//             loading: false,\n//             selectedId: fetchRecordParam.primaryKeyValue,\n//             dataList\n//           }\n//         });\n//       })\n//       .catch(error => {\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\n//         if (error.response.status === 500) {\n//           toast.error(intl.formatMessage({ id: error.message }));\n//         } else {\n//           toast.warn(intl.formatMessage({ id: error.response.data }));\n//         }\n//       })\n//   }\n// }\n\nexport function onServiceLoad(userInfo, inputParam, ncontrolCode, comboColumnField, primarykeyvalue, inputData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    comboColumnField.map(item => {\n      urlArray.push(rsapi.post(item.classUrl + \"/\" + item.onChangeUrl, {\n        userinfo: userInfo,\n        [item.tableDataField]: primarykeyvalue[item.tableDataField],\n        \"parentPrimaryField\": inputData.selectedRecord[item.parentPrimaryField]\n      }));\n    } //dependentParentPrimaryField into parentPrimaryField\n    );\n    Axios.all(urlArray).then(response => {\n      let ComboFieldData = [];\n      let dataList = [];\n      let selectedRecord = { ...inputData.selectedRecord\n      };\n      comboColumnField.map((item, index) => {\n        if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\n          ComboFieldData = constructOptionList(item.childObjectValue === null ? response[index].data || [] : response[index].data[item.childObjectValue], item.childPrimaryField, item.childdataField, undefined, undefined, undefined);\n          dataList[item.childdataField] = ComboFieldData.get(\"OptionList\");\n          selectedRecord[item.childdataField] = undefined;\n        }\n      });\n      dataList = { ...inputData.dataList,\n        ...dataList\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          dataList,\n          //  operation,\n          screenName: inputParam.displayName,\n          openModal: true,\n          ncontrolCode,\n          loading: false,\n          selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch(initRequest(false));\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function dynamicFileDownload(filedata) {\n  return dispatch => {\n    if (filedata.viewName === 'InfoView') {\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\n        const inputParam = {\n          inputData: {\n            viewFile: {\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_Sample']],\n              npreregno: filedata.npreregno,\n              sarno: filedata.sarno,\n              sfilename: filedata[filedata.field[2]]\n            },\n            userinfo: filedata.userInfo\n          },\n          classUrl: \"registration\",\n          operation: \"view\",\n          methodUrl: \"RegistrationFile\" //screenName: filedata.displayName\n\n        };\n        dispatch(viewAttachment(inputParam));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_FILENOTUPLOADED\"\n        }));\n      }\n    } else if (filedata.viewName === 'subSample') {\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_subSample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\n        const inputParam = {\n          inputData: {\n            viewFile: {\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_subSample']],\n              npreregno: filedata.npreregno,\n              ntransactionsamplecode: filedata.ntransactionsamplecode,\n              ssamplearno: filedata.ssamplearno,\n              sfilename: filedata[filedata.field[2]],\n              sarno: filedata.sarno\n            },\n            userinfo: filedata.userInfo\n          },\n          classUrl: \"registration\",\n          operation: \"view\",\n          methodUrl: \"RegistrationSubSampleFile\" //screenName: filedata.displayName\n\n        };\n        dispatch(viewAttachment(inputParam));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_FILENOTUPLOADED\"\n        }));\n      }\n    } else {\n      let isFileupload;\n\n      if (filedata && filedata[filedata['dataField'] + ['_ssystemfilename']] !== undefined && filedata[filedata['dataField']] !== \"\") {\n        isFileupload = true;\n      }\n\n      if (filedata && filedata[filedata.dataField + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.dataField] !== \"\") {\n        isFileupload = true;\n      }\n\n      if (isFileupload) {\n        const inputParam = {\n          inputData: {\n            viewFile: filedata.screenName === 'SampleRegistration' ? {\n              ssystemfilename: filedata[filedata.dataField + ['_ssystemfilename_Sample']],\n              npreregno: filedata.npreregno,\n              sarno: filedata.sarno,\n              sfilename: filedata[filedata.dataField]\n            } : {\n              ssystemfilename: filedata[filedata['dataField'] + ['_ssystemfilename']],\n              ndynamicmastercode: filedata.ndynamicmastercode,\n              ndesigntemplatemappingcode: filedata.ndesigntemplatemappingcode,\n              sfieldname: filedata.dataField,\n              sfilename: filedata[filedata.dataField]\n            },\n            userinfo: filedata.userInfo\n          },\n          classUrl: filedata.classUrl,\n          operation: \"view\",\n          methodUrl: filedata.methodUrl //screenName: filedata.displayName\n\n        };\n        dispatch(viewAttachment(inputParam));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_FILENOTUPLOADED\"\n        }));\n      }\n    }\n  };\n}\nexport function modalSave(inputParam, masterData) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputParam.inputData).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n\n      if (inputParam.postParam) {\n        const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n        masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\n\n        if (masterData[\"searchedData\"] !== undefined) {\n          const foundIndex = masterData[\"searchedData\"].findIndex(x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]);\n          masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\n        } // sortData(masterData);\n\n      }\n\n      masterData = sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          //ALPD-4519-Vignesh R(06-08-2024)\n          loadEsign: false,\n          loading: false,\n          masterData,\n          modalShow: inputParam.modalShow,\n          openModal: false,\n          modalTitle: undefined,\n          operation: inputParam.operation\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loadEsign: false,\n          loading: false,\n          modalShow: true,\n          openModal: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function openBarcodeModal(selectedMaster, ncontrolCode, userinfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let urlArray = [];\n    const getPrinter = rsapi.post(\"barcode/getPrinter\", userinfo);\n    const getControlBasedBarcode = rsapi.post(\"barcodeconfiguration/checkConfiguration\", {\n      selectedMaster,\n      ncontrolCode,\n      userinfo,\n      Multiselect: Array.isArray(selectedMaster)\n    });\n    urlArray = [getPrinter, getControlBasedBarcode];\n    Axios.all(urlArray).then(response => {\n      const printer = constructOptionList(response[0].data || [], \"sprintername\", \"sprintername\", undefined, undefined, true).get(\"OptionList\");\n      const barcode = constructOptionList(response[1].data.Barcode || [], \"sbarcodename\", \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\n      const selectedRecord = {};\n      if (printer.length > 0) selectedRecord['sprintername'] = printer[0];\n      if (barcode.length > 0) selectedRecord['nbarcode'] = barcode[0];\n      selectedRecord['nbarcodeprint'] = 1;\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openModal: true,\n          operation: \"barcode\",\n          BarcodeList: barcode,\n          Printer: printer,\n          loading: false,\n          ncontrolcode: ncontrolCode,\n          nbarcodeprint: response[1].data.nbarcodeprint,\n          barcodeSelectedRecord: selectedMaster,\n          selectedRecord: selectedRecord\n        }\n      });\n    }).catch(error => {\n      dispatch(initRequest(false));\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport function barcodeGeneration(selectedMaster, ncontrolCode, userinfo, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let list = [];\n\n    if (Array.isArray(selectedMaster)) {\n      list = selectedMaster;\n    } else {\n      list.push(selectedMaster);\n    }\n\n    rsapi.post(\"barcodeconfiguration/barcodeGeneration\", {\n      selectedMaster: list,\n      ncontrolCode,\n      userinfo,\n      nbarcode: selectedRecord.nbarcode.item.nbarcode,\n      sprintername: selectedRecord.sprintername.value,\n      nbarcodeprintcount: selectedRecord.nbarcodeprintcount ? selectedRecord.nbarcodeprintcount : 1\n    }).then(response => {\n      toast.info(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openModal: false,\n          operation: \"barcode\",\n          loading: false,\n          selectedRecord: {},\n          barcodeSelectedRecord: undefined\n        }\n      });\n    }).catch(error => {\n      dispatch(initRequest(false));\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(intl.formatMessage({\n          id: error.response.data\n        }));\n      }\n    });\n  };\n}\nexport const syncAction = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    return rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputParam.inputData).then(response => {\n      let data = response.data;\n      sortData(data);\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          masterData: [],\n          operation: inputParam.operation,\n          organisation: undefined\n        }\n      };\n      dispatch(updateStore(updateInfo));\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: data,\n          operation: inputParam.operation,\n          activeTestTab: data.activeTestTab,\n          activeTestKey: data.activeTestKey,\n          activeBCTab: data.activeBCTab,\n          inputParam: inputParam,\n          masterStatus: \"\",\n          userInfo: inputParam.inputData.userinfo,\n          loading: false,\n          openModal: false,\n          selectedId: null,\n          selectedRecord: {},\n          dataState: undefined,\n          organisation: {\n            selectedNode: data.SelectedNode,\n            selectedNodeName: data.SelectedNodeName,\n            primaryKeyValue: data.AddedChildPrimaryKey\n          },\n          displayName: inputParam.displayName,\n          reportFilePath: undefined,\n          skip: 0,\n          take: undefined,\n          testskip: 0,\n          testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          openModal: false,\n          loadEsign: false\n        }\n      });\n\n      if (error.response.status === 503) {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SYNCUNABLEOATTEMPT\"\n        }));\n      } else if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}; //export const generateControlBasedReport = (inputParam) => {\n\nexport const generateControlBasedReport = (ncontrolCode, selectedRecord, Login, primaryKeyField, primaryKeyValue) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    const inputParam = {\n      primaryKeyField: primaryKeyField,\n      nformcode: Login.userInfo.nformcode,\n      sreportlink: Login.reportSettings[15],\n      smrttemplatelink: Login.reportSettings[16],\n      ncontrolcode: ncontrolCode,\n      userinfo: Login.userInfo,\n      selectedRecord: selectedRecord,\n      ntranscode: selectedRecord.ntransactionstatus,\n      primaryKeyValue: primaryKeyValue,\n      nreporttypecode: REPORTTYPE.CONTROLBASED\n    };\n    rsapi.post(\"controlbasedreport/controlBasedReport\", { ...inputParam\n    }).then(response => {\n      if (response.data.SelectedViewReportMaster && response.data.SelectedViewReportMaster.sreportformatdetail === 'viewer') {\n        viewReportDetailWithParametersReports(response.data, inputParam);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false,\n            showConfirmAlert: false\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            loadEsign: false,\n            openModal: false,\n            showConfirmAlert: false\n          }\n        });\n        document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\n        document.getElementById(\"download_data\").click();\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const dynamicExportTemplate = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    return rsapi.post(\"exportimport/exportTemplate\", inputParam).then(response => {\n      let value = \"\";\n\n      if (response.data.rtn === \"Success\") {\n        value = response.data[\"exportFileViewUrl\"];\n        const win = window.open(value);\n\n        if (win) {\n          win.focus();\n        } else {\n          toast.warn(intl.formatMessage(\"IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE\"));\n        }\n      } else {\n        if (response.data.rtn) {\n          toast.warn(intl.formatMessage({\n            id: response.data.rtn\n          }));\n        }\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          loadEsign: false,\n          openModal: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport function dynamicImportTemplate(inputParam, masterData, modalName, defaultInput, ConfirmMessage) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let requestUrl = '';\n\n    if (inputParam.isFileupload && inputParam.isFileupload !== 'undefined') {\n      const formData = inputParam.formData;\n      formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\n    } else {\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData\n      });\n    }\n\n    return requestUrl.then(response => {\n      if (response.data.rtn === \"Success\") {\n        let inputParams = {\n          classUrl: response.data.classUrl,\n          methodUrl: response.data.methodUrl,\n          inputData: {\n            'userinfo': inputParam.inputData.userinfo\n          },\n          displayName: inputParam.displayName\n        }; // dispatch(callService(inputParams))\n\n        let data = response.data.ResponseBody;\n        sortData(data);\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            masterData: [],\n            organisation: undefined\n          }\n        };\n        dispatch(updateStore(updateInfo));\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openExcelModal: false,\n            masterData: data,\n            activeTestTab: data.activeTestTab,\n            activeTestKey: data.activeTestKey,\n            activeBCTab: data.activeBCTab,\n            inputParam: inputParams,\n            masterStatus: \"\",\n            userInfo: inputParam.inputData.userinfo,\n            loading: false,\n            selectedId: null,\n            selectedRecord: {},\n            dataState: undefined,\n            organisation: {\n              selectedNode: data.SelectedNode,\n              selectedNodeName: data.SelectedNodeName,\n              primaryKeyValue: data.AddedChildPrimaryKey\n            },\n            displayName: inputParams.displayName,\n            reportFilePath: undefined,\n            skip: 0,\n            take: undefined,\n            testskip: 0,\n            //testtake: 5,\n            testtake: inputParams.inputData.settings ? inputParams.inputData.settings[12] : 10 //  key:inputParam.key!==undefined?inputParam.key:\"\"\n\n          }\n        });\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          loadEsign: false,\n          openExcelModal: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\n;","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/ServiceAction.js"],"names":["toast","rsapi","initRequest","updateStore","DEFAULT_RETURN","REQUEST_FAILURE","sortData","searchData","searchJsonData","replaceUpdatedObject","constructOptionList","rearrangeDateFormat","Lims_JSON_stringify","intl","selectedDashBoardView","Axios","REPORTTYPE","designComponents","transactionStatus","ConfirmMessage","viewReportDetailWithParametersReports","callService","inputParam","dispatch","post","classUrl","methodUrl","inputData","then","response","data","warn","Success","updateInfo","typeName","masterData","organisation","undefined","rtn","warning","formatMessage","id","type","payload","openExcelModal","activeTestTab","activeTestKey","activeBCTab","masterStatus","userInfo","userinfo","loading","selectedId","selectedRecord","dataState","selectedNode","SelectedNode","selectedNodeName","SelectedNodeName","primaryKeyValue","AddedChildPrimaryKey","displayName","reportFilePath","skip","take","testskip","testtake","settings","catch","error","status","crudMaster","modalName","defaultInput","clearSelectedRecordField","requestUrl","isFileupload","formData","append","JSON","stringify","operation","selectedRecordObj","loadEsign","isFilterDetail","success","retrievedData","Array","isArray","flag","postParam","selectedObject","primaryKeyField","foundIndex","inputListName","findIndex","x","isSingleGet","push","task","list","filter","item","openModal","activeSampleTab","showSample","respObject","errorCode","showEsign","design","nextNode","showConfirmAlert","loadPoolSource","openPortal","saveType","Object","keys","map","controlType","controlName","dataField","preSetValue","indexOf","postCRUDOrganiseSearch","console","log","message","DeleteExistingRecord","confirm","obj","validateEsignCredential","confirmMessage","sformname","smodulename","toLowerCase","syncAction","fetchRecord","fetchRecordParam","url","screenName","ncontrolCode","filterColumnData","filterValue","filterParam","filterOperator","searchedData","length","isjsondata","searchFieldList","fetchUrl","fecthInputObject","sortField","sortOrder","forEach","unchangeList","isChild","searchRef","current","value","temp","includes","filtercombochange","Map","selectedComboName","selectedComboId","selectedCombo","viewAttachment","document","getElementById","setAttribute","FilePath","click","win","window","open","focus","filterTransactionList","filteredListName","param","selectedData","childRefs","childref","ref","childFilteredListName","isService","isSingleSelect","String","isSortable","sortList","sortValue","isMultiSort","multiSortData","pkey","sampleskip","sampletake","subsampleskip","subsampletake","changeList","name","postCRUDOrganiseTransSearch","postParamList","index","clearFilter","updatedListname","showUnderDevelopment","info","onComboLoad","extractedColumnList","IntegrationSettings","urlArray","ndesigncomponentcode","CHECKBOX","elnget","slinkname","all","ComboFieldData","dataList","COMBOBOX","objectValue","foreignDataField","get","defaultvalue","YES","fetchRecordCombo","integrationSettings","parentPrimaryField","editRow","selectedRecordData","responseData","extractedColumnData","splice","hideNARecord","tableDataField","label","DATEPICKER","field","indexValue","onServiceLoad","comboColumnField","primarykeyvalue","onChangeUrl","childObjectValue","childPrimaryField","childdataField","dynamicFileDownload","filedata","viewName","viewFile","ssystemfilename","npreregno","sarno","sfilename","ntransactionsamplecode","ssamplearno","ndynamicmastercode","ndesigntemplatemappingcode","sfieldname","modalSave","modalShow","modalTitle","openBarcodeModal","selectedMaster","getPrinter","getControlBasedBarcode","Multiselect","printer","barcode","Barcode","BarcodeList","Printer","ncontrolcode","nbarcodeprint","barcodeSelectedRecord","barcodeGeneration","nbarcode","sprintername","nbarcodeprintcount","generateControlBasedReport","Login","nformcode","sreportlink","reportSettings","smrttemplatelink","ntranscode","ntransactionstatus","nreporttypecode","CONTROLBASED","SelectedViewReportMaster","sreportformatdetail","filepath","dynamicExportTemplate","dynamicImportTemplate","inputParams","ResponseBody"],"mappings":"AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,eAAzC;AACA,SAASC,cAAT,EAAyBC,eAAzB,QAAgD,cAAhD;AACA,SAASC,QAAT,EAAmBC,UAAnB,EAA+BC,cAA/B,EAA+CC,oBAA/C,EAAqEC,mBAArE,EAA0FC,mBAA1F,EAA+GC,mBAA/G,QAA0I,4BAA1I;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,qBAAT,QAAsC,uBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,gBAArB,EAAuCC,iBAAvC,QAAgE,2BAAhE;AACA,OAAOC,cAAP,MAA2B,uDAA3B;AACA,SAASC,qCAAT,QAAsD,wBAAtD,C,CAEA;AACA;AACA;;AAEA,OAAO,MAAMC,WAAW,GAAIC,UAAD,IAAgB;AACzC,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,WAAOD,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,MAAtB,GAA+BH,UAAU,CAACI,SAArD,EAAgEJ,UAAU,CAACK,SAA3E,EACJC,IADI,CACCC,QAAQ,IAAI;AAEhB;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,UAAIA,QAAQ,CAACC,IAAT,CAAc,SAAd,CAAJ,EAA8B;AAC5B9B,QAAAA,KAAK,CAAC+B,IAAN,CAAWF,QAAQ,CAACC,IAAT,CAAcE,OAAzB;AACD;;AAED,UAAIF,IAAI,GAAGD,QAAQ,CAACC,IAApB;AACAxB,MAAAA,QAAQ,CAACwB,IAAD,CAAR;AAEA,YAAMG,UAAU,GAAG;AACjBC,QAAAA,QAAQ,EAAE9B,cADO;AAEjB0B,QAAAA,IAAI,EAAE;AAAEK,UAAAA,UAAU,EAAE,EAAd;AAAkBC,UAAAA,YAAY,EAAEC;AAAhC;AAFW,OAAnB;AAIAd,MAAAA,QAAQ,CAACpB,WAAW,CAAC8B,UAAD,CAAZ,CAAR;;AAEA,UAAIJ,QAAQ,CAACC,IAAT,CAAcQ,GAAd,IAAqB,8BAAzB,EAAyD;AACvDtC,QAAAA,KAAK,CAACuC,OAAN,CAAc1B,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAAd;AACD;;AAEDlB,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPC,UAAAA,cAAc,EAAE,KADT;AAEPT,UAAAA,UAAU,EAAEL,IAFL;AAGPe,UAAAA,aAAa,EAAEf,IAAI,CAACe,aAHb;AAIPC,UAAAA,aAAa,EAAEhB,IAAI,CAACgB,aAJb;AAKPC,UAAAA,WAAW,EAAEjB,IAAI,CAACiB,WALX;AAMPzB,UAAAA,UAAU,EAAEA,UANL;AAOP0B,UAAAA,YAAY,EAAE,EAPP;AAQPC,UAAAA,QAAQ,EAAE3B,UAAU,CAACK,SAAX,CAAqBuB,QARxB;AASPC,UAAAA,OAAO,EAAE,KATF;AASSC,UAAAA,UAAU,EAAE,IATrB;AAS2BC,UAAAA,cAAc,EAAE,EAT3C;AAUPC,UAAAA,SAAS,EAAEjB,SAVJ;AAWPD,UAAAA,YAAY,EAAE;AACZmB,YAAAA,YAAY,EAAEzB,IAAI,CAAC0B,YADP;AACqBC,YAAAA,gBAAgB,EAAE3B,IAAI,CAAC4B,gBAD5C;AAEZC,YAAAA,eAAe,EAAE7B,IAAI,CAAC8B;AAFV,WAXP;AAePC,UAAAA,WAAW,EAAEvC,UAAU,CAACuC,WAfjB;AAgBPC,UAAAA,cAAc,EAAEzB,SAhBT;AAiBP0B,UAAAA,IAAI,EAAE,CAjBC;AAiBEC,UAAAA,IAAI,EAAE3B,SAjBR;AAkBP4B,UAAAA,QAAQ,EAAE,CAlBH;AAmBP;AACAC,UAAAA,QAAQ,EAAE5C,UAAU,CAACK,SAAX,CAAqBwC,QAArB,GAAgC7C,UAAU,CAACK,SAAX,CAAqBwC,QAArB,CAA8B,EAA9B,CAAhC,GAAoE,EApBvE,CAqBP;;AArBO;AAFF,OAAD,CAAR,CAtHgB,CAiJhB;AACD,KAnJI,EAoJJC,KApJI,CAoJEC,KAAK,IAAI;AACd;AACA,UAAIA,KAAK,CAACxC,QAAN,KAAmBQ,SAAnB,IAAgCgC,KAAK,KAAK,eAA9C,EAA+D;AAC7D9C,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAErC,eADC;AAEPsC,UAAAA,OAAO,EAAE;AACP0B,YAAAA,KAAK,EAAE,eADA;AAEPlB,YAAAA,OAAO,EAAE;AAFF;AAFF,SAAD,CAAR;AAOD,OARD,MAQO,IAAIkB,KAAK,CAACxC,QAAN,KAAmBQ,SAAnB,IAAgCgC,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9D,EAAmE;AACxEtE,QAAAA,KAAK,CAACuC,OAAN,CAAc8B,KAAK,CAACxC,QAAN,CAAeC,IAA7B;AACAP,QAAAA,QAAQ,CAAC;AAAEmB,UAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,UAAAA,OAAO,EAAE;AAAEQ,YAAAA,OAAO,EAAE,KAAX;AAAkBU,YAAAA,WAAW,EAAEvC,UAAU,CAACuC,WAA1C;AAAuDZ,YAAAA,QAAQ,EAAE3B,UAAU,CAACK,SAAX,CAAqBuB;AAAtF;AAAjC,SAAD,CAAR;AACD,OAHM,MAGA;AACL3B,QAAAA,QAAQ,CAAC;AAAEmB,UAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,UAAAA,OAAO,EAAE;AAAEQ,YAAAA,OAAO,EAAE,KAAX;AAAkBU,YAAAA,WAAW,EAAEvC,UAAU,CAACuC,WAA1C;AAAuDZ,YAAAA,QAAQ,EAAE3B,UAAU,CAACK,SAAX,CAAqBuB;AAAtF;AAAjC,SAAD,CAAR;AACD;AACF,KApKI,CAAP;AAsKD,GAxKD;AAyKD,CA1KM,C,CA4KP;;AACA,OAAO,SAASqB,UAAT,CAAoBjD,UAApB,EAAgCa,UAAhC,EAA4CqC,SAA5C,EAAuDC,YAAvD,EAAoEtD,cAApE,EAAmFuD,wBAAnF,EAA6G;AAElH,SAAO,UAAUnD,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAIyE,UAAU,GAAG,EAAjB;;AACA,QAAIrD,UAAU,CAACsD,YAAX,IAA2BtD,UAAU,CAACsD,YAAX,KAA0B,WAAzD,EAAsE;AACpE,YAAMC,QAAQ,GAAGvD,UAAU,CAACuD,QAA5B;AACAA,MAAAA,QAAQ,CAACC,MAAT,CAAgB,UAAhB,EAA4BC,IAAI,CAACC,SAAL,CAAe1D,UAAU,CAACK,SAAX,CAAqBuB,QAApC,CAA5B;AACAyB,MAAAA,UAAU,GAAG1E,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoFmD,QAApF,CAAb;AACD,KAJD,MAIO;AACLF,MAAAA,UAAU,GAAG1E,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoF,EAAE,GAAGJ,UAAU,CAACK;AAAhB,OAApF,CAAb;AACD;;AACD,WAAOgD,UAAU,CACd/C,IADI,CACCC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACyC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;AACA;AACA,YAAIY,iBAAiB,GAAG,EAAxB;;AACA,YAAI5D,UAAU,CAAC+B,cAAf,EAA+B;AAC7B6B,UAAAA,iBAAiB,GAAG;AAAE7B,YAAAA,cAAc,EAAE/B,UAAU,CAAC+B;AAA7B,WAApB;AACD;;AAED9B,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AACeuC,UAAAA,OAAO,EAAE;AAC7BwC,YAAAA,SAAS,EAAE,KADkB;AAE7B,aAACX,SAAD,GAAa,KAFgB;AAG/B;AACA;AACEY,YAAAA,cAAc,EAAC,KALc;AAM7BjC,YAAAA,OAAO,EAAE,KANoB;AAO7B,eAAG+B;AAP0B;AADxB,SAAD,CAAR;AAWAlF,QAAAA,KAAK,CAACqF,OAAN,CAAcxD,QAAQ,CAACC,IAAvB;AACD,OApBD,MAqBK,IAAID,QAAQ,CAACyC,MAAT,KAAoB,GAAxB,EAA6B;AAChC;AACA;AACA,YAAIY,iBAAiB,GAAG,EAAxB;;AACA,YAAI5D,UAAU,CAAC+B,cAAf,EAA+B;AAC7B6B,UAAAA,iBAAiB,GAAG;AAAE7B,YAAAA,cAAc,EAAE/B,UAAU,CAAC+B;AAA7B,WAApB;AACD;;AACD9B,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AACeuC,UAAAA,OAAO,EAAE;AAC7BwC,YAAAA,SAAS,EAAE,KADkB;AAE7B,aAACX,SAAD,GAAa,KAFgB;AAG7BrB,YAAAA,OAAO,EAAE,KAHoB;AAI7B,eAAG+B;AAJ0B;AADxB,SAAD,CAAR;AASAlF,QAAAA,KAAK,CAAC+B,IAAN,CAAWF,QAAQ,CAACC,IAApB;AACD,OAjBI,MAkBA;AACH,cAAMwD,aAAa,GAAGhF,QAAQ,CAACuB,QAAQ,CAACC,IAAV,CAA9B;;AACA,YAAIK,UAAU,KAAKE,SAAf,IAA4BkD,KAAK,CAACC,OAAN,CAAcF,aAAd,CAAhC,EAA8D;AAC5DnD,UAAAA,UAAU,GAAGmD,aAAb;AACD,SAFD,MAGK;AACJ,cAAG,CAACzD,QAAQ,CAACC,IAAT,CAAc2D,IAAlB,EACA;AACCtD,YAAAA,UAAU,GAAG,EACb,GAAGA,UADU;AAEb,iBAAGmD;AAFU,aAAb;AAIH,WANE,MAME;AACDnD,YAAAA,UAAU,GAAG,EACX,GAAGA;AADQ,aAAb;AAGD;;AAGC,cAAIqC,SAAS,KAAK,WAAd,IAA6BlD,UAAU,CAAC2D,SAAX,KAAyB,QAAtD,IAAkE3D,UAAU,CAAC2D,SAAX,KAAyB,SAA3F,IACC3D,UAAU,CAAC2D,SAAX,KAAyB,QAD1B,IACsC3D,UAAU,CAAC2D,SAAX,KAAyB,MADnE,EAC2E;AAEzE,gBAAI3D,UAAU,CAACoE,SAAf,EAA0B;AACxB,kBAAIvD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CAAJ,EAA2F;AACzF,sBAAMC,UAAU,GAAG1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CADhC,CAAnB;AAGAzD,gBAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,IAA6D1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAvE;AACD,eALD,MAKO;AACL,sBAAME,UAAU,GAAG1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgD,CAAhD,EAAmDrE,UAAU,CAACoE,SAAX,CAAqBE,eAAxE,CADhC,CAAnB;AAGAzD,gBAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,IAA6D1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgD,CAAhD,CAA7D;AACD;AACF;AACF,WAhBD,MAiBK,IAAInB,SAAS,KAAK,WAAd,IAA6BlD,UAAU,CAAC2D,SAAX,KAAyB,QAA1D,EAAoE;AACvE,gBAAI3D,UAAU,CAACoE,SAAX,IAAwBpE,UAAU,CAACoE,SAAX,CAAqBO,WAAjD,EAA8D;AAC5D9D,cAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CI,IAA/C,CAAoDrE,QAAQ,CAACC,IAAT,CAAcR,UAAU,CAACoE,SAAX,CAAqBC,cAAnC,CAApD,EAD4D,CAE5D;;AACArF,cAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACD;AACF,WANI,MAOA,IAAIqC,SAAS,KAAK,gBAAd,IAAkClD,UAAU,CAAC2D,SAAX,KAAyB,QAA/D,EAAyE;AAAC;AAC7E,gBAAI3D,UAAU,CAACoE,SAAX,IAAwBpE,UAAU,CAACoE,SAAX,CAAqBO,WAAjD,EAA8D;AAC5D,oBAAMJ,UAAU,GAAG1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CADhC,CAAnB;AAGAzD,cAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,IAA6D1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAvE;;AAEA,kBAAIxD,UAAU,CAAC,cAAD,CAAV,KAA+BE,SAAnC,EAA8C;AAC5C,sBAAMwD,UAAU,GAAG1D,UAAU,CAAC,cAAD,CAAV,CAA2B4D,SAA3B,CACjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CADhC,CAAnB;AAGAzD,gBAAAA,UAAU,CAAC,cAAD,CAAV,CAA2B0D,UAA3B,IAAyC1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAnD;AAED;;AACDrF,cAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACD;AACF,WAhBI,MAiBA,IAAIqC,SAAS,KAAK,WAAd,IAA6BlD,UAAU,CAAC2D,SAAX,KAAyB,MAA1D,EAAkE;AACrE,gBAAI3D,UAAU,CAACoE,SAAX,IAAwBpE,UAAU,CAACoE,SAAX,CAAqBO,WAAjD,EAA8D;AAC5D9D,cAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CI,IAA/C,CAAoDrE,QAAQ,CAACC,IAAT,CAAcR,UAAU,CAACoE,SAAX,CAAqBC,cAAnC,CAApD;AACAxD,cAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,mBAAGN,QAAQ,CAACC;AAA7B,eAAb;AACAxB,cAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACD;AACF,WANI,MAOA,IAAIqC,SAAS,KAAK,WAAd,KAA8BlD,UAAU,CAAC2D,SAAX,KAAyB,QAAzB,IAAqC3D,UAAU,CAAC2D,SAAX,KAAyB,SAA5F,CAAJ,EAA4G;AAC/G,gBAAI3D,UAAU,CAACoE,SAAX,IAAwBpE,UAAU,CAACoE,SAAX,CAAqBO,WAAjD,EAA8D;AAC5D,kBAAI3E,UAAU,CAACoE,SAAX,CAAqBS,IAArB,KAA8B,QAAlC,EAA4C;AAC1C,sBAAMN,UAAU,GAAG1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CACjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CADhC,CAAnB;AAGAzD,gBAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,IAA6D1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAvE;AACD,eALD,MAMK;AACH,sBAAMS,IAAI,GAAGjE,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CACVO,MADU,CACHC,IAAI,IAAIA,IAAI,CAAChF,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAJ,KAA+CtE,UAAU,CAACoE,SAAX,CAAqB/B,eADzE,CAAb;AAEAxB,gBAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,GAAiDM,IAAjD,CAHG,CAKH;AACA;AACA;AACA;AAED;;AACDvE,cAAAA,QAAQ,CAACC,IAAT,CACAK,UADA,GACa,EAAE,GAAGA,UAAL;AAAiB,mBAAGN,QAAQ,CAACC;AAA7B,eADb;AAEAxB,cAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACD;AACF;AACF,SA3FE,CA4FH;AAEA;;;AACA,YAAIoE,SAAS,GAAGpE,UAAU,CAACsD,IAAX,IAAmBtD,UAAU,CAACsD,IAAX,KAAkB,MAArC,GAA+C,IAA/C,GAAqD,KAArE,CA/FG,CAgGH;;AAEA,YAAIpC,cAAc,GAAG,EAArB;AACA,YAAImD,eAAe,GAAGlF,UAAU,CAACkF,eAAX,GAA6B;AAAEA,UAAAA,eAAe,EAAElF,UAAU,CAACkF;AAA9B,SAA7B,GAA+E,EAArG;AACA,YAAI1D,aAAa,GAAGxB,UAAU,CAACwB,aAAX,GAA2B;AAAEA,UAAAA,aAAa,EAAExB,UAAU,CAACwB;AAA5B,SAA3B,GAAyE,EAA7F;AACA,YAAI2D,UAAU,GAAGnF,UAAU,CAACmF,UAAX,GAAwBnF,UAAU,CAACmF,UAAnC,GAAgD,EAAjE;AACA,YAAIC,UAAU,GAAG;AACfvE,UAAAA,UADe;AAEfb,UAAAA,UAFe;AAGfkD,UAAAA,SAHe;AAIf;AACA;AACA;AACA;AACAY,UAAAA,cAAc,EAAC,KARA;AASf,WAACZ,SAAD,GAAa+B,SATE;AAUftB,UAAAA,SAAS,EAAE3D,UAAU,CAAC2D,SAVP;AAWfjC,UAAAA,YAAY,EAAE,EAXC;AAYf2D,UAAAA,SAAS,EAAEtE,SAZI;AAaf8C,UAAAA,SAAS,EAAE,KAbI;AAcfyB,UAAAA,SAAS,EAAE,KAdI;AAefvD,UAAAA,cAfe;AAgBfF,UAAAA,OAAO,EAAE,KAhBM;AAiBfG,UAAAA,SAAS,EAAEhC,UAAU,CAACgC,SAjBP;AAkBfF,UAAAA,UAAU,EAAE9B,UAAU,CAAC8B,UAlBR;AAmBf,aAAGoD,eAnBY;AAoBf,aAAG1D,aApBY;AAqBf2D,UAAAA,UArBe;AAsBfI,UAAAA,MAAM,EAAE,EAtBO;AAwBf;AACAzE,UAAAA,YAAY,EAAEd,UAAU,CAACwF,QAAX,GAAsB;AAClCvD,YAAAA,YAAY,EAAEjC,UAAU,CAACwF,QADS;AAElCrD,YAAAA,gBAAgB,EAAEtB,UAAU,CAACuB,gBAFK;AAGlCC,YAAAA,eAAe,EAAExB,UAAU,CAACyB;AAHM,WAAtB,GAKVvB,SA9BW;AA+Bf0E,UAAAA,gBAAgB,EAAEzF,UAAU,CAACyF,gBA/Bd;AAgCfC,UAAAA,cAAc,EAAE1F,UAAU,CAAC0F,cAhCZ;AAiCfjD,UAAAA,IAAI,EAAEzC,UAAU,CAACyC,IAAX,IAAmB1B,SAjCV;AAkCf2B,UAAAA,IAAI,EAAE1C,UAAU,CAAC0C,IAAX,IAAmB3B,SAlCV;AAmCf4E,UAAAA,UAAU,EAAE;AAnCG,SAAjB;;AAsCA,YAAI3F,UAAU,CAAC2D,SAAX,KAAyB,QAAzB,IAAqC3D,UAAU,CAAC2D,SAAX,KAAyB,MAAlE,EAA0E;AACxE,cAAI3D,UAAU,CAAC4F,QAAX,KAAwB,CAA5B,EAA+B;AAC7BX,YAAAA,SAAS,GAAG,IAAZ,CAD6B,CAE7B;;AACAY,YAAAA,MAAM,CAACC,IAAP,CAAY9F,UAAU,CAAC+B,cAAvB,EAAuCgE,GAAvC,CAA2Cf,IAAI,IAAE;AAC/C5B,cAAAA,wBAAwB,CAAC2C,GAAzB,CAA6BvF,IAAI,IAAE;AAC/B,oBAAGA,IAAI,CAACwF,WAAL,KAAqB,UAArB,GAAmChB,IAAI,KAAGxE,IAAI,CAACyF,WAAZ,IAA2BjB,IAAI,KAAGxE,IAAI,CAAC0F,SAA1E,GAAsFlB,IAAI,KAAGxE,IAAI,CAAC0F,SAArG,EAA+G;AAC7GnE,kBAAAA,cAAc,GAAE/B,UAAU,CAAC+B,cAA3B;AACAA,kBAAAA,cAAc,CAACiD,IAAD,CAAd,GAAqBxE,IAAI,CAAC2F,WAAL,GAAmB3F,IAAI,CAAC2F,WAAxB,GAAoC,EAAzD;AACD,iBAHD,CAIA;AAJA,qBAKK;AACDpE,kBAAAA,cAAc,GAAE/B,UAAU,CAAC+B,cAA3B;AACH;AACJ,eATD;AAUD,aAXD,EAH6B,CAe9B;AAEA;;AACDqD,UAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,aAAClC,SAAD,GAAa+B,SAA9B;AAAyClD,YAAAA;AAAzC,WAAb;AACD;;AACD,YAAI,CAACmB,SAAS,KAAK,WAAd,IAA6BA,SAAS,KAAK,gBAA5C,KAAiE2C,MAAM,CAACC,IAAP,CAAYjF,UAAZ,EAAwBuF,OAAxB,CAAgC,cAAhC,MAAoD,CAAC,CAAtH,IACCvF,UAAU,CAAC,cAAD,CAAV,KAA+BE,SADpC,EAC+C;AAC7Cd,UAAAA,QAAQ,CAACoG,sBAAsB,CAACrG,UAAU,CAACoE,SAAZ,EAAuBgB,UAAvB,CAAvB,CAAR;AACD,SAHD,MAIK;AACH;AACA,cAAIpF,UAAU,CAAC4F,QAAX,KAAwB,CAA5B,EAA+B;AAC7B3F,YAAAA,QAAQ,CAAC;AAAEmB,cAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,cAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiB,iBAAClC,SAAD,GAAa+B;AAA9B;AAAjC,aAAD,CAAR;AAED,WAHD,MAII;AACJhF,YAAAA,QAAQ,CAAC;AAAEmB,cAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,cAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiB,iBAAClC,SAAD,GAAanC;AAA9B;AAAjC,aAAD,CAAR;AAEC;AACF;AACF;AACF,KA1NI,EA2NJ+B,KA3NI,CA2NEvC,QAAQ,IAAI;AACjB+F,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBhG,QAAtB;;AACA,UAAIA,QAAQ,CAACA,QAAT,CAAkByC,MAAlB,KAA6B,GAAjC,EAAsC;AACpC/C,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAErC,eADC;AAEPsC,UAAAA,OAAO,EAAE;AACP0B,YAAAA,KAAK,EAAExC,QAAQ,CAACiG,OADT;AAEP3E,YAAAA,OAAO,EAAE,KAFF,CAGP;AACA;;AAJO;AAFF,SAAD,CAAR;AASD,OAVD,MAWK,IAAItB,QAAQ,CAACA,QAAT,CAAkByC,MAAlB,KAA6B,GAA7B,IAAoCzC,QAAQ,CAACA,QAAT,CAAkBC,IAAlB,CAAuB2D,IAA/D,EAAqE;AACxElE,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAErC,eADC;AAEPsC,UAAAA,OAAO,EAAE;AACPQ,YAAAA,OAAO,EAAE;AADF;AAFF,SAAD,CAAR;AAMA,YAAIxB,SAAS,GAAC,EAAC,GAAGL,UAAU,CAACK,SAAf;AAAyBoG,UAAAA,oBAAoB,EAAC;AAA9C,SAAd;AACA5G,QAAAA,cAAc,CAAC6G,OAAf,CACE,eADF,EAEEnH,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAFF,EAGE5B,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAHF,EAIE5B,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAJF,EAKE5B,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CALF,EAME,MACAlB,QAAQ,CAACgD,UAAU,CAACjD,UAAU,GAAC,EAAC,GAAGA,UAAJ;AAAeK,UAAAA;AAAf,SAAZ,EAAuCQ,UAAvC,EAAmDqC,SAAnD,EAA8DC,YAA9D,EAA2EtD,cAA3E,CAAX,CAPV;AASH,OAjBM,MAkBA;AAEH,YAAI8G,GAAG,GAAG,EAAV;;AACA,YAAI3G,UAAU,CAAC2F,UAAX,KAA0B,IAA9B,EAAoC;AAClCgB,UAAAA,GAAG,GAAG;AAAE1B,YAAAA,SAAS,EAAE;AAAb,WAAN;AACD;;AACD,YAAIrB,iBAAiB,GAAG,EAAxB;;AACA,YAAI5D,UAAU,CAAC+B,cAAf,EAA+B;AAC7B6B,UAAAA,iBAAiB,GAAG;AAAE7B,YAAAA,cAAc,EAAE/B,UAAU,CAAC+B;AAA7B,WAApB;AACD;;AAED,YAAI/B,UAAU,CAAC2D,SAAX,KAAyB,QAAzB,IAAqC3D,UAAU,CAAC2D,SAAX,KAAyB,SAA9D,IAA2E3D,UAAU,CAAC2D,SAAX,KAAyB,SAApG,IACF3D,UAAU,CAAC2D,SAAX,KAAyB,SADvB,IACoC3D,UAAU,CAAC2D,SAAX,KAAyB,SAD7D,IAC0E3D,UAAU,CAAC2D,SAAX,KAAyB,YADnG,IAEC3D,UAAU,CAAC2D,SAAX,KAAyB,UAF1B,IAEwC3D,UAAU,CAAC2D,SAAX,KAAyB,SAFjE,IAGC3D,UAAU,CAAC2D,SAAX,KAAyB,YAH1B,IAG0C3D,UAAU,CAAC2D,SAAX,KAAyB,OAHnE,IAG8E3D,UAAU,CAAC2D,SAAX,KAAyB,QAHvG,IAIC3D,UAAU,CAAC2D,SAAX,KAAyB,KAJ1B,IAImC3D,UAAU,CAAC2D,SAAX,KAAyB,WAJ5D,IAI2E3D,UAAU,CAAC2D,SAAX,KAAyB,YAJpG,IAKC3D,UAAU,CAAC2D,SAAX,KAAyB,WAL1B,IAKyC3D,UAAU,CAAC2D,SAAX,KAAyB,WALlE,IAKiF3D,UAAU,CAAC2D,SAAX,KAAyB,QAL1G,IAMC3D,UAAU,CAAC2D,SAAX,KAAyB,QAN1B,IAMsC3D,UAAU,CAAC2D,SAAX,KAAyB,QAN/D,IAM2E3D,UAAU,CAAC2D,SAAX,KAAyB,SANpG,IAOC3D,UAAU,CAAC2D,SAAX,KAAyB,QAP1B,IAOsC3D,UAAU,CAAC2D,SAAX,KAAyB,SAP/D,IAO4E3D,UAAU,CAAC2D,SAAX,KAAyB,WAPrG,IAQC3D,UAAU,CAAC2D,SAAX,KAAyB,QAR1B,IAQsC3D,UAAU,CAAC2D,SAAX,KAAyB,OARnE,EAQ4E;AAC1E1D,UAAAA,QAAQ,CAAC;AACPmB,YAAAA,IAAI,EAAEtC,cADC;AAEPuC,YAAAA,OAAO,EAAE;AACPK,cAAAA,YAAY,EAAEnB,QAAQ,CAACA,QAAT,CAAkBC,IADzB;AAEP6E,cAAAA,SAAS,EAAE9E,QAAQ,CAACA,QAAT,CAAkByC,MAFtB;AAGPa,cAAAA,SAAS,EAAE,KAHJ;AAIP,eAACX,SAAD,GAAa,KAJN;AAKPrB,cAAAA,OAAO,EAAE,KALF;AAMP8D,cAAAA,UAAU,EAAE,KANL;AAOP,iBAAG/B;AAPI;AAFF,WAAD,CAAR;AAYD,SArBD,MAqBO;AACL;AACA,cAAI5D,UAAU,CAAC+B,cAAf,EAA+B;AAC7B6B,YAAAA,iBAAiB,GAAG;AAAE7B,cAAAA,cAAc,EAAE/B,UAAU,CAAC+B;AAA7B,aAApB;AACD;;AACD9B,UAAAA,QAAQ,CAAC;AACPmB,YAAAA,IAAI,EAAEtC,cADC;AAEPuC,YAAAA,OAAO,EAAE;AACPK,cAAAA,YAAY,EAAEnB,QAAQ,CAACA,QAAT,CAAkBC,IADzB;AAEP6E,cAAAA,SAAS,EAAE9E,QAAQ,CAACA,QAAT,CAAkByC,MAFtB;AAGPa,cAAAA,SAAS,EAAE,KAHJ;AAGWhC,cAAAA,OAAO,EAAE,KAHpB;AAIP,iBAAG8E,GAJI;AAKP,iBAAG/C;AALI;AAFF,WAAD,CAAR;AAYD;AAEF;AACF,KA9SI,CAAP;AA+SD,GAzTD;AA0TD;AACD,OAAO,MAAMgD,uBAAuB,GAAG,CAAC5G,UAAD,EAAakD,SAAb,EAAuB2D,cAAvB,KAA0C;AAC/E,SAAQ5G,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;;AACA,QAAIoB,UAAU,IAAIA,UAAU,CAACK,SAAzB,IAAsCL,UAAU,CAACK,SAAX,CAAqBuB,QAA/D,EAAyE;AACvE5B,MAAAA,UAAU,CAACK,SAAX,CAAqB,UAArB,IAAmC,EACjC,GAAGL,UAAU,CAACK,SAAX,CAAqBuB,QADS;AAEjCkF,QAAAA,SAAS,EAAExH,mBAAmB,CAACU,UAAU,CAACK,SAAX,CAAqBuB,QAArB,CAA8BkF,SAA/B,CAFG;AAGjCC,QAAAA,WAAW,EAAEzH,mBAAmB,CAACU,UAAU,CAACK,SAAX,CAAqBuB,QAArB,CAA8BmF,WAA/B;AAHC,OAAnC;AAKD;;AACD,WAAOpI,KAAK,CAACuB,IAAN,CAAW,+BAAX,EAA4CF,UAAU,CAACK,SAAvD,EACJC,IADI,CACCC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,IAAT,KAAkB,SAAtB,EAAiC;AAE/B,cAAMJ,SAAS,GAAGJ,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,CAAlB;AACAA,QAAAA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoD,UAApD,IAAkEA,UAAU,CAACK,SAAX,CAAqBuB,QAAvF;;AAEA,YAAI5B,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,CAAJ,EAAkF;AAEhF,iBAAOhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,EAA6E,aAA7E,CAAP;;AAEA,cAAIhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,CAAJ,EAAkF;AAChF,mBAAOhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,EAA6E,eAA7E,CAAP;AACA,mBAAOhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,EAA6E,eAA7E,CAAP;AACA,mBAAOhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,EAAoDI,SAAS,CAAC4G,WAAV,EAApD,EAA6E,OAA7E,CAAP;AAGD,WAV+E,CAYhF;;;AACA,cAAIhH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,CAAJ,EAA8D;AAE5D,mBAAOA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,aAAzD,CAAP;AACA,mBAAOA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,eAAzD,CAAP;AACA,mBAAOA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,eAAzD,CAAP;AACA,mBAAOA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,gBAAvC,EAAyD,OAAzD,CAAP;AACD;AACF,SAzB8B,CA0B/B;;;AAEA,YAAGA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,KAAqDA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,EAAuC,WAAvC,MAAwD,MAAhH,EAAuH;AACvHC,UAAAA,QAAQ,CAACgH,UAAU,CAACjH,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,CAAD,CAAX,CAAR;AAEC,SAHD,MAGK;AACH;AACA;AACAC,UAAAA,QAAQ,CAACgD,UAAU,CAACjD,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,CAAD,EAAyCA,UAAU,CAAC,YAAD,CAAV,CAAyB,YAAzB,CAAzC,EAAiFkD,SAAjF,EAA2F,EAA3F,EAA8F2D,cAA9F,EAA6G7G,UAAU,CAAC,YAAD,CAAV,CAAyB,0BAAzB,CAA7G,CAAX,CAAR;AAED;AACF;AACF,KAxCI,EAyCJ8C,KAzCI,CAyCEC,KAAK,IAAI;AACd9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFD,MAEO;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,SAAnB,CAAX;AACD;AACF,KAhDI,CAAP;AAiDD,GA1DD;AA2DD,CA5DM;AA8DP,OAAO,MAAM0G,WAAW,GAAIC,gBAAD,IAAsB;AAC/C,SAAQlH,QAAD,IAAc;AAEnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,UAAMwI,GAAG,GAAGD,gBAAgB,CAACnH,UAAjB,CAA4BG,QAA5B,GAAuC,YAAvC,GAAsDgH,gBAAgB,CAACnH,UAAjB,CAA4BI,SAAlF,GAA8F,MAA1G;AACAzB,IAAAA,KAAK,CAACuB,IAAN,CAAWkH,GAAX,EAAgB;AACd,OAACD,gBAAgB,CAAC7C,eAAlB,GAAoC6C,gBAAgB,CAAC9E,eADvC;AACwD,kBAAY8E,gBAAgB,CAACxF;AADrF,KAAhB,EAGGrB,IAHH,CAGQC,QAAQ,IAAI;AAChBN,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPU,UAAAA,cAAc,EAAExB,QAAQ,CAACC,IADlB;AAEP6G,UAAAA,UAAU,EAAEF,gBAAgB,CAACE,UAFtB;AAGP1D,UAAAA,SAAS,EAAEwD,gBAAgB,CAACxD,SAHrB;AAIPsB,UAAAA,SAAS,EAAE,IAJJ;AAKPqC,UAAAA,YAAY,EAAEH,gBAAgB,CAACG,YALxB;AAMPzF,UAAAA,OAAO,EAAE,KANF;AAOPC,UAAAA,UAAU,EAAEqF,gBAAgB,CAAC9E;AAPtB;AAFF,OAAD,CAAR;AAYD,KAhBH,EAiBGS,KAjBH,CAiBSC,KAAK,IAAI;AACd9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFD,MAEO;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,SAAnB,CAAX;AACD;AACF,KAxBH;AAyBD,GA7BD;AA8BD,CA/BM;AAiCP,OAAO,SAAS+G,gBAAT,CAA0BC,WAA1B,EAAuCC,WAAvC,EAAmDC,cAAnD,EAAmE;AACxE,SAAO,UAAUzH,QAAV,EAAoB;AAEzB,QAAIY,UAAU,GAAG4G,WAAW,CAAC5G,UAA7B;AAEA,QAAIwB,eAAe,GAAG,CAAtB;AACA,QAAIsF,YAAY,GAAG5G,SAAnB;;AACA,QAAIyG,WAAW,KAAK,EAApB,EAAwB;AACtB,UAAI3G,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,IAAyC3D,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,CAAsCoD,MAAtC,GAA+C,CAA5F,EAA+F;AAC7F;AACA;AACA;AAEA;AACA;AACA;AACAvF,QAAAA,eAAe,GAAGxB,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,CAAsC,CAAtC,EAAyCiD,WAAW,CAACnD,eAArD,CAAlB,CAR6F,CAS7F;AACD;AACF,KAZD,MAaK;AACH,UAAImD,WAAW,CAACI,UAAhB,EAA4B;AAC1BF,QAAAA,YAAY,GAAGzI,cAAc,CAACsI,WAAD,EAAc3G,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAxB,EAAqDiD,WAAW,CAACK,eAAZ,IAA+B,EAApF,EAAuFJ,cAAvF,CAA7B;AACD,OAFD,MAGK;AACHC,QAAAA,YAAY,GAAG1I,UAAU,CAACuI,WAAD,EAAc3G,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAxB,EAAqDiD,WAAW,CAACK,eAAZ,IAA+B,EAApF,EAAuFJ,cAAvF,CAAzB;AAED;;AACD,UAAIC,YAAY,CAACC,MAAb,GAAsB,CAA1B,EAA6B;AAC3B;AACA;AACA;AACA;AACA;AACAvF,QAAAA,eAAe,GAAGsF,YAAY,CAAC,CAAD,CAAZ,CAAgBF,WAAW,CAACnD,eAA5B,CAAlB,CAN2B,CAO3B;AACD;AACF;;AAED,QAAIjC,eAAe,KAAK,CAAxB,EAA2B;AACzBpC,MAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,aAAOD,KAAK,CAACuB,IAAN,CAAWuH,WAAW,CAACM,QAAvB,EAAiC,EAAE,GAAGN,WAAW,CAACO,gBAAjB;AAAmC,SAACP,WAAW,CAACnD,eAAb,GAA+BjC;AAAlE,OAAjC,EACJ/B,IADI,CACCC,QAAQ,IAAI;AAChBM,QAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B8G,YAA7B;AACA9G,QAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,aAAGN,QAAQ,CAACC;AAA7B,SAAb;;AAEA,YAAIiH,WAAW,CAACjD,aAAZ,KAA8B,eAAlC,EAAmD;AACjDvE,UAAAA,QAAQ,CAACT,qBAAqB,CAACe,QAAD,EAAWM,UAAX,CAAtB,CAAR;AACD,SAFD,MAGK;AACH,cAAI4G,WAAW,CAACQ,SAAhB,EAA2B;AACzBjJ,YAAAA,QAAQ,CAAC6B,UAAD,EAAa4G,WAAW,CAACS,SAAzB,EAAoCT,WAAW,CAACQ,SAAhD,CAAR;AACD,WAFD,MAGK;AACHjJ,YAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACD;;AACDZ,UAAAA,QAAQ,CAAC;AAAEmB,YAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,YAAAA,OAAO,EAAE;AAAER,cAAAA,UAAF;AAAcgB,cAAAA,OAAO,EAAE,KAAvB;AAA8BY,cAAAA,IAAI,EAAE,CAApC;AAAuCC,cAAAA,IAAI,EAAE,EAA7C;AAAiDZ,cAAAA,UAAU,EAAE;AAA7D;AAAjC,WAAD,CAAR;AACD;AACF,OAjBI,EAkBJgB,KAlBI,CAkBEC,KAAK,IAAI;AACd9C,QAAAA,QAAQ,CAAC;AAAEmB,UAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,UAAAA,OAAO,EAAE;AAAEQ,YAAAA,OAAO,EAAE;AAAX;AAAjC,SAAD,CAAR;;AACA,YAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,UAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,WAAnB,CAAZ;AACD,SAFD,MAGK;AACH9H,UAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,WAAnB,CAAX;AACD;AACF,OA1BI,CAAP;AA2BD,KA7BD,MA8BK;AACHK,MAAAA,UAAU,CAAC4G,WAAW,CAACpD,cAAb,CAAV,GAAyCtD,SAAzC;AACAF,MAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B,EAA7B;AACAgF,MAAAA,MAAM,CAACC,IAAP,CAAYjF,UAAZ,EAAwBsH,OAAxB,CAAgCnD,IAAI,IAAI;AACtC,YAAIA,IAAI,KAAKyC,WAAW,CAACjD,aAArB,IAAsCQ,IAAI,KAAKyC,WAAW,CAACpD,cAA3D,IACCoD,WAAW,CAACW,YADb,IAC6BX,WAAW,CAACW,YAAZ,CAAyBhC,OAAzB,CAAiCpB,IAAjC,MAA2C,CAAC,CAD7E,EAEEnE,UAAU,CAACmE,IAAD,CAAV,GAAmB,EAAnB;AACH,OAJD;AAKA/E,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AACeuC,QAAAA,OAAO,EAAE;AAC7BR,UAAAA,UAD6B;AACjB8C,UAAAA,SAAS,EAAE,IADM;AACAT,UAAAA,SAAS,EAAEnC,SADX;AAE7Bc,UAAAA,OAAO,EAAE;AAFoB;AADxB,OAAD,CAAR;AAMD;AACF,GAnFD;AAoFD;AAED,OAAO,SAASwE,sBAAT,CAAgCjC,SAAhC,EAA2CgB,UAA3C,EAAuD;AAC5D,SAAO,UAAUnF,QAAV,EAAoB;AAEzB,QAAIY,UAAU,GAAGuE,UAAU,CAACvE,UAA5B;;AAEA,QAAIuE,UAAU,CAACpF,UAAX,CAAsB2D,SAAtB,KAAoC,QAApC,IAAgDyB,UAAU,CAACpF,UAAX,CAAsB2D,SAAtB,KAAoC,MAAxF,EAAgG;AAC9F,UAAIyB,UAAU,CAAClC,SAAX,KAAyB,WAA7B,EAA0C;AACxC,YAAIkC,UAAU,CAACpF,UAAX,CAAsBqI,OAAtB,KAAkCtH,SAAtC,EAAiD;AAC/CqE,UAAAA,UAAU,CAACpF,UAAX,CAAsBsI,SAAtB,CAAgCC,OAAhC,CAAwCC,KAAxC,GAAgD,EAAhD;AACA3H,UAAAA,UAAU,CAAC,cAAD,CAAV,GAA6BE,SAA7B;AACD;AACF;;AACDd,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,UAAAA,UAAjB;AAA6BqC,UAAAA,SAAS,EAAEnC;AAAxC;AAAjC,OAAD,CAAR;AACD,KARD,MASK,IAAIqE,UAAU,CAACpF,UAAX,CAAsB2D,SAAtB,KAAoC,QAApC,IAAgDyB,UAAU,CAACpF,UAAX,CAAsB2D,SAAtB,KAAoC,SAAxF,EAAmG;AAEtG,UAAI9C,UAAU,CAAC,cAAD,CAAV,KAA+BE,SAA/B,IAA4CqE,UAAU,CAAClC,SAAX,KAAyB,WAAzE,EAAsF;AACpF,YAAIuF,IAAI,GAAG5H,UAAU,CAAC,cAAD,CAArB;AACA,YAAIwB,eAAe,GAAG+C,UAAU,CAACvE,UAAX,CAAsB,cAAtB,EAAsC,CAAtC,EAAyCuD,SAAS,CAACE,eAAnD,CAAtB;;AACA,YAAIc,UAAU,CAACpF,UAAX,CAAsBqI,OAAtB,KAAkCtH,SAAtC,EAAiD;AAE/C0H,UAAAA,IAAI,GAAG5H,UAAU,CAAC,cAAD,CAAV,CAA2BkE,MAA3B,CAAkCC,IAAI,IAAIf,KAAK,CAACC,OAAN,CAAcE,SAAS,CAAC/B,eAAxB,IAC/C,CAAC+B,SAAS,CAAC/B,eAAV,CAA0BqG,QAA1B,CAAmC1D,IAAI,CAACZ,SAAS,CAACE,eAAX,CAAvC,CAD8C,GAE7CU,IAAI,CAACZ,SAAS,CAACE,eAAX,CAAJ,KAAoCF,SAAS,CAAC/B,eAF3C,CAAP;AAGAA,UAAAA,eAAe,GAAGoG,IAAI,CAACb,MAAL,GAAc,CAAd,GAAkBa,IAAI,CAAC,CAAD,CAAJ,CAAQrE,SAAS,CAACE,eAAlB,CAAlB,GAAuD,CAAzE;AACD,SAND,MAOK;AACHjC,UAAAA,eAAe,GAAGxB,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,CAAqCD,SAAS,CAACE,eAA/C,CAAlB;AACD;;AACDzD,QAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B4H,IAA7B;AACArD,QAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiBlC,UAAAA,SAAS,EAAEnC;AAA5B,SAAb;;AACA,YAAIF,UAAU,CAAC,cAAD,CAAV,CAA2B+G,MAA3B,GAAoC,CAAxC,EAA2C;AACzCvF,UAAAA,eAAe,GAAGxB,UAAU,CAAC,cAAD,CAAV,CAA2B,CAA3B,EAA8BuD,SAAS,CAACE,eAAxC,CAAlB;AAEA,iBAAO3F,KAAK,CAACuB,IAAN,CAAWkE,SAAS,CAAC2D,QAArB,EAA+B,EACpC,GAAG3D,SAAS,CAAC4D,gBADuB;AACL,aAAC5D,SAAS,CAACE,eAAX,GAA6BjC;AADxB,WAA/B,EAGJ/B,IAHI,CAGCC,QAAQ,IAAI;AAChBM,YAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,iBAAGN,QAAQ,CAACC;AAA7B,aAAb;AACAxB,YAAAA,QAAQ,CAAC6B,UAAD,CAAR;AACAZ,YAAAA,QAAQ,CAAC;AAAEmB,cAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,cAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,gBAAAA;AAAjB;AAAjC,aAAD,CAAR;AACD,WAPI,EAQJiC,KARI,CAQEC,KAAK,IAAI;AACd9C,YAAAA,QAAQ,CAAC;AAAEmB,cAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,cAAAA,OAAO,EAAE,EAAE,GAAG+D;AAAL;AAAjC,aAAD,CAAR;;AACA,gBAAIrC,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,cAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,gBAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,eAAnB,CAAZ;AACD,aAFD,MAGK;AACH9H,cAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,gBAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,eAAnB,CAAX;AACD;AACF,WAhBI,CAAP;AAiBD,SApBD,MAqBK;AACHK,UAAAA,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,GAAuCtD,SAAvC;AACAF,UAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B,EAA7B;AACAgF,UAAAA,MAAM,CAACC,IAAP,CAAYjF,UAAZ,EAAwBsH,OAAxB,CAAgCnD,IAAI,IAAI;AACtC,gBAAIA,IAAI,KAAKZ,SAAS,CAACI,aAAnB,IAAoCQ,IAAI,KAAKZ,SAAS,CAACC,cAAvD,IACCD,SAAS,CAACgE,YADX,IAC2BhE,SAAS,CAACgE,YAAV,CAAuBhC,OAAvB,CAA+BpB,IAA/B,MAAyC,CAAC,CADzE,EAEEnE,UAAU,CAACmE,IAAD,CAAV,GAAmBnE,UAAU,IAAIoD,KAAK,CAACC,OAAN,CAAcrD,UAAU,CAACmE,IAAD,CAAxB,CAAd,GAA8C,EAA9C,GAAiDjE,SAApE;AACH,WAJD;AAMAd,UAAAA,QAAQ,CAAC;AAAEmB,YAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,YAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,cAAAA;AAAjB;AAAjC,WAAD,CAAR;AACD;AACF,OA/CD,MAgDK;AACHZ,QAAAA,QAAQ,CAAC;AAAEmB,UAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,UAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,YAAAA,UAAjB;AAA6BqC,YAAAA,SAAS,EAAEnC;AAAxC;AAAjC,SAAD,CAAR;AACD;AACF,KArDI,MAsDA,IAAIqE,UAAU,CAACpF,UAAX,CAAsB2I,iBAA1B,EAA6C;AAEhDvD,MAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiBlC,QAAAA,SAAS,EAAEnC;AAA5B,OAAb;;AACA,UAAIF,UAAU,CAAC,cAAD,CAAV,KAA+BE,SAAnC,EAA8C;AAC5CF,QAAAA,UAAU,CAAC,cAAD,CAAV,GAA6BE,SAA7B;AACAqE,QAAAA,UAAU,CAACpF,UAAX,CAAsBsI,SAAtB,CAAgCC,OAAhC,CAAwCC,KAAxC,GAAgD,EAAhD;AACD;;AAED,UAAII,GAAG,GAAG,EAAV;;AACA,UAAIxE,SAAS,CAACyE,iBAAV,KAAgC9H,SAApC,EAA+C;AAC7C6H,QAAAA,GAAG,GAAG;AAAE,WAACxE,SAAS,CAACyE,iBAAX,GAA+B;AAAE,aAACzE,SAAS,CAAC0E,eAAX,GAA6B1E,SAAS,CAAC2E;AAAzC;AAAjC,SAAN;AACD;;AAED9I,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AACeuC,QAAAA,OAAO,EAAE,EAC7B,GAAG+D,UAD0B;AACdvE,UAAAA,UADc;AACF,aAAG+H;AADD;AADxB,OAAD,CAAR;AAKD,KAlBI,MAmBA;AACHxD,MAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiBlC,QAAAA,SAAS,EAAEnC;AAA5B,OAAb;;AACA,UAAIF,UAAU,CAAC,cAAD,CAAV,KAA+BE,SAAnC,EAA8C;AAC5C,YAAIF,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,CAAqCD,SAAS,CAACE,eAA/C,CAAJ,EAAqE;AAEnE,gBAAMC,UAAU,GAAG1D,UAAU,CAAC,cAAD,CAAV,CAA2B4D,SAA3B,CACjBC,CAAC,IAAIA,CAAC,CAACN,SAAS,CAACE,eAAX,CAAD,KAAiCzD,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,CAAqCD,SAAS,CAACE,eAA/C,CADrB,CAAnB;AAGAzD,UAAAA,UAAU,CAAC,cAAD,CAAV,CAA2B0D,UAA3B,IAAyC1D,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAnD;AACD,SAND,MAMO;AACL,gBAAME,UAAU,GAAG1D,UAAU,CAAC,cAAD,CAAV,CAA2B4D,SAA3B,CACjBC,CAAC,IAAIA,CAAC,CAACN,SAAS,CAACE,eAAX,CAAD,KAAiCzD,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,CAAqC,CAArC,EAAwCD,SAAS,CAACE,eAAlD,CADrB,CAAnB;AAGAzD,UAAAA,UAAU,CAAC,cAAD,CAAV,CAA2B0D,UAA3B,IAAyC1D,UAAU,CAACuD,SAAS,CAACC,cAAX,CAAV,CAAqC,CAArC,CAAzC;AACD;AACF;;AACDpE,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,UAAAA;AAAjB;AAAjC,OAAD,CAAR;AACD;AAEF,GAzGD;AA0GD;AAED,OAAO,MAAMmI,cAAc,GAAIhJ,UAAD,IAAgB;AAC5C,SAAQC,QAAD,IAAc;AACnB,QAAII,SAAS,GAAG,EAAE,GAAGL,UAAU,CAACK;AAAhB,KAAhB;;AACA,QAAIA,SAAS,CAAC,gBAAD,CAAb,EAAiC;AAC/B,aAAOA,SAAS,CAAC,gBAAD,CAAT,CAA4B,UAA5B,CAAP;AACD;;AACDJ,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACAD,IAAAA,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoFC,SAApF,EACGC,IADH,CACQC,QAAQ,IAAI;AAChBN,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;AACA,UAAI2G,KAAK,GAAG,EAAZ;;AACA,UAAIjI,QAAQ,CAACC,IAAT,CAAc,YAAd,CAAJ,EAAiC;AAC/ByI,QAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,YAAzC,CAAsD,MAAtD,EAA8D5I,QAAQ,CAACC,IAAT,CAAc4I,QAA5E;AACAH,QAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCG,KAAzC;AACD,OAHD,MAGO,IAAI9I,QAAQ,CAACC,IAAT,CAAc,YAAd,CAAJ,EAAiC;AACtCgI,QAAAA,KAAK,GAAGjI,QAAQ,CAACC,IAAT,CAAc,YAAd,CAAR;AACA,YAAI8I,GAAG,GAAGC,MAAM,CAACC,IAAP,CAAYhB,KAAZ,EAAmB,QAAnB,CAAV;;AACA,YAAIc,GAAJ,EAAS;AACPA,UAAAA,GAAG,CAACG,KAAJ;AACD,SAFD,MAEO;AACLlK,UAAAA,IAAI,CAACkB,IAAL,CAAU,qCAAV;AACD;AACF,OARM,MASF;AACH,YAAIF,QAAQ,CAACC,IAAT,CAAc,KAAd,CAAJ,EAA0B;AACxB9B,UAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAEZ,QAAQ,CAACC,IAAT,CAAcQ;AAApB,WAAnB,CAAX;AACD;AAEF;AACF,KAtBH,EAuBG8B,KAvBH,CAuBSC,KAAK,IAAI;AACd9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACD,OAFD,MAEO;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACD;AACF,KA9BH;AA+BD,GArCD;AAsCD,CAvCM;AAyCP,OAAO,SAASkJ,qBAAT,CAA+BlC,WAA/B,EAA4CC,WAA5C,EAAyDkC,gBAAzD,EAA0EC,KAA1E,EAAiF;AACtF,SAAO,UAAU3J,QAAV,EAAoB;AACzB,QAAIY,UAAU,GAAG4G,WAAW,CAAC5G,UAA7B;AACA8I,IAAAA,gBAAgB,GAAGA,gBAAgB,IAAI,cAAvC;AACA,QAAItH,eAAe,GAAG,CAAtB;AACA,QAAIsF,YAAY,GAAG5G,SAAnB;AACA,QAAI8I,YAAY,GAAG,EAAnB;AACApC,IAAAA,WAAW,CAACqC,SAAZ,IAAyBrC,WAAW,CAACqC,SAAZ,CAAsB/D,GAAtB,CAA0BgE,QAAQ,IAAI;AAC7D,UAAIA,QAAQ,CAACC,GAAT,KAAiBjJ,SAAjB,IAA8BgJ,QAAQ,CAACC,GAAT,CAAazB,OAAb,KAAyB,IAA3D,EAAiE;AAC/DwB,QAAAA,QAAQ,CAACC,GAAT,CAAazB,OAAb,CAAqBC,KAArB,GAA6B,EAA7B;AACA3H,QAAAA,UAAU,CAACkJ,QAAQ,CAACE,qBAAV,CAAV,GAA6ClJ,SAA7C;AACD;;AACD,aAAO,IAAP;AACD,KANwB,CAAzB;;AAOA,QAAIyG,WAAW,KAAK,EAApB,EAAwB;AACtB,UAAI3G,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,IAAyC3D,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,CAAsCoD,MAAtC,GAA+C,CAA5F,EAA+F;AAC7FvF,QAAAA,eAAe,GAAGxB,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,CAAsC,CAAtC,EAAyCiD,WAAW,CAACnD,eAArD,CAAlB;AACAuF,QAAAA,YAAY,CAACjF,IAAb,CAAkB/D,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAV,CAAsC,CAAtC,CAAlB;AACD;AACF,KALD,MAMK;AACH,UAAI3D,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAd,EAA2C;AACzCmD,QAAAA,YAAY,GAAG1I,UAAU,CAACuI,WAAD,EAAc3G,UAAU,CAAC4G,WAAW,CAACjD,aAAb,CAAxB,EAAqDiD,WAAW,CAACK,eAAZ,IAA+B,EAApF,CAAzB;AACD,OAFD,MAEO;AACLH,QAAAA,YAAY,GAAG,EAAf;AACD;;AAED,UAAIA,YAAY,CAACC,MAAb,GAAsB,CAA1B,EAA6B;AAC3BvF,QAAAA,eAAe,GAAGsF,YAAY,CAAC,CAAD,CAAZ,CAAgBF,WAAW,CAACnD,eAA5B,CAAlB;AACAuF,QAAAA,YAAY,CAACjF,IAAb,CAAkB+C,YAAY,CAAC,CAAD,CAA9B;AACD;AACF;;AAED,QAAItF,eAAe,KAAK,CAApB,IAAyB,CAACoF,WAAW,CAACyC,SAA1C,EAAqD;AACnD7H,MAAAA,eAAe,GAAGoF,WAAW,CAAC0C,cAAZ,GAA6B9H,eAA7B,GAA+C+H,MAAM,CAAC/H,eAAD,CAAvE;AACApC,MAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,aAAOD,KAAK,CAACuB,IAAN,CAAWuH,WAAW,CAACM,QAAvB,EAAiC,EAAE,GAAGN,WAAW,CAACO,gBAAjB;AAAmC,SAACP,WAAW,CAACnD,eAAb,GAA+BjC;AAAlE,OAAjC,EACJ/B,IADI,CACCC,QAAQ,IAAI;AAChB,cAAMyB,SAAS,GAAG;AAChBS,UAAAA,IAAI,EAAE,CADU;AAEhBC,UAAAA,IAAI,EAAE;AAFU,SAAlB;AAIA7B,QAAAA,UAAU,CAAC8I,gBAAD,CAAV,GAA+BhC,YAA/B;AACA9G,QAAAA,UAAU,CAAC4G,WAAW,CAACpD,cAAb,CAAV,GAAyCwF,YAAzC,CANgB,CAQhB;;AACA,YAAGpC,WAAW,CAACnD,eAAZ,IAA+BmD,WAAW,CAACnD,eAAZ,KAAgC,WAAlE,EAA8E;AAC9EzD,UAAAA,UAAU,CAAC,iBAAD,CAAV,GAA+BE,SAA/B;AACC;;AACDF,QAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,aAAGN,QAAQ,CAACC;AAA7B,SAAb;;AACA,YAAIiH,WAAW,CAAC4C,UAAhB,EAA4B;AAC1BrL,UAAAA,QAAQ,CAAC6B,UAAU,CAAC4G,WAAW,CAAC6C,QAAb,CAAX,EAAmC,YAAnC,EAAiD7C,WAAW,CAAC8C,SAA7D,CAAR;AACD;;AACD,YAAI9C,WAAW,CAAC+C,WAAhB,EAA6B;AAC3B/C,UAAAA,WAAW,CAACgD,aAAZ,CAA0BtC,OAA1B,CAAkCnD,IAAI,IAAI;AACxChG,YAAAA,QAAQ,CAAC6B,UAAU,CAACmE,IAAI,CAACF,IAAN,CAAX,EAAwB,YAAxB,EAAsCE,IAAI,CAAC0F,IAA3C,CAAR;AACD,WAFD;AAGD;;AACDzK,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AACeuC,UAAAA,OAAO,EAAE;AAC7BR,YAAAA,UAD6B;AACjBgB,YAAAA,OAAO,EAAE,KADQ;AAE7B;AACAY,YAAAA,IAAI,EAAEgF,WAAW,CAAChF,IAHW;AAGLC,YAAAA,IAAI,EAAE+E,WAAW,CAAC/E,IAHb;AAI7BiI,YAAAA,UAAU,EAAGlD,WAAW,CAACkD,UAJI;AAK7BC,YAAAA,UAAU,EAAGnD,WAAW,CAACmD,UALI;AAM7BC,YAAAA,aAAa,EAAEpD,WAAW,CAACoD,aANE;AAMaC,YAAAA,aAAa,EAAErD,WAAW,CAACqD,aANxC;AAO7BnI,YAAAA,QAAQ,EAAE8E,WAAW,CAAC9E,QAPO;AAOGC,YAAAA,QAAQ,EAAE6E,WAAW,CAAC7E,QAPzB;AAQ7BZ,YAAAA,SAR6B,CAS7B;;AAT6B;AADxB,SAAD,CAAR;AAaD,OAnCI,EAoCJc,KApCI,CAoCEC,KAAK,IAAI;AACd9C,QAAAA,QAAQ,CAAC;AAAEmB,UAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,UAAAA,OAAO,EAAE;AAAEQ,YAAAA,OAAO,EAAE;AAAX;AAAjC,SAAD,CAAR;;AACA,YAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,UAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,WAAnB,CAAZ;AACD,SAFD,MAGK;AACH9H,UAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,WAAnB,CAAX;AACD;AACF,OA5CI,CAAP;AA6CD,KAhDD,MAiDK;AACHK,MAAAA,UAAU,CAAC4G,WAAW,CAACpD,cAAb,CAAV,GAA0C,CAACoD,WAAW,CAACyC,SAAb,GAAwBnJ,SAAxB,GAAkC4G,YAA5E;AACA9G,MAAAA,UAAU,CAAC8I,gBAAD,CAAV,GAAgC,CAAClC,WAAW,CAACyC,SAAb,GAAuB,EAAvB,GAA0BvC,YAA1D;AAEAF,MAAAA,WAAW,CAACsD,UAAZ,IAA0BtD,WAAW,CAACsD,UAAZ,CAAuBhF,GAAvB,CAA2BiF,IAAI,IAAInK,UAAU,CAACmK,IAAD,CAAV,GAAmB,EAAtD,CAA1B;AACApB,MAAAA,KAAK,IAAIA,KAAK,CAAC7D,GAAN,CAAUf,IAAI,IAAEnE,UAAU,CAACmE,IAAD,CAAV,GAAiB,EAAjC,CAAT,CALG,CAMH;AACA;AACA;AACA;AACA;;AACA/E,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AACeuC,QAAAA,OAAO,EAAE;AAC7BR,UAAAA,UAD6B;AACjB8C,UAAAA,SAAS,EAAE,IADM;AACAT,UAAAA,SAAS,EAAEnC,SADX;AAE7B;AACAc,UAAAA,OAAO,EAAE;AAHoB;AADxB,OAAD,CAAR;AAOD;AACF,GApGD;AAsGD;AAED,OAAO,SAASoJ,2BAAT,CAAqCC,aAArC,EAAoD9F,UAApD,EAAgE;AACrE,SAAO,UAAUnF,QAAV,EAAoB;AACzB,QAAIY,UAAU,GAAGuE,UAAU,CAACvE,UAA5B;AACAqK,IAAAA,aAAa,IAAIjH,KAAK,CAACC,OAAN,CAAcgH,aAAd,CAAjB,IAAiDA,aAAa,CAACnF,GAAd,CAAkB,CAAC3B,SAAD,EAAY+G,KAAZ,KAAsB;AACvF,UAAI/G,SAAS,CAACgH,WAAV,KAA0B,KAA9B,EAAqC;AAEnC,YAAIhH,SAAS,CAACkE,SAAV,CAAoBC,OAAxB,EAAiC;AAC/BnE,UAAAA,SAAS,CAACkE,SAAV,CAAoBC,OAApB,CAA4BC,KAA5B,GAAoC,EAApC;AACD;;AACD3H,QAAAA,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,GAAyC5I,SAAzC;AACAqD,QAAAA,SAAS,CAAC0F,SAAV,IAAuB1F,SAAS,CAAC0F,SAAV,CAAoB/D,GAApB,CAAwBgE,QAAQ,IAAI;AACzD,cAAIA,QAAQ,CAACC,GAAT,KAAiBjJ,SAAjB,IAA8BgJ,QAAQ,CAACC,GAAT,CAAazB,OAAb,KAAyB,IAA3D,EAAiE;AAC/DwB,YAAAA,QAAQ,CAACC,GAAT,CAAazB,OAAb,CAAqBC,KAArB,GAA6B,EAA7B;AACA3H,YAAAA,UAAU,CAACkJ,QAAQ,CAACE,qBAAV,CAAV,GAA6ClJ,SAA7C;AACD;;AACD,iBAAO,IAAP;AACD,SANsB,CAAvB;AAQD;;AACD,UAAI8E,MAAM,CAACC,IAAP,CAAYjF,UAAZ,EAAwBuF,OAAxB,CAAgChC,SAAS,CAACuF,gBAA1C,MAAgE,CAAC,CAAjE,IAAsE9I,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,KAA2C5I,SAArH,EAAgI;AAE9H,YAAIqD,SAAS,CAACgH,WAAV,KAA0B,OAA9B,EAAuC;AACrC,cAAIvK,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,KAA2C5I,SAA/C,EAA0D;AACxD,kBAAM0H,IAAI,GAAG5H,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,CAAuC5E,MAAvC,CAA8CC,IAAI,IAAI,CAACf,KAAK,CAACC,OAAN,CAAcE,SAAS,CAAC/B,eAAxB,CAAD,GAA4C+B,SAAS,CAAC/B,eAAtD,GAAwE+B,SAAS,CAAC/B,eAAV,CAA0BqG,QAA1B,CAAmC1D,IAAI,CAACZ,SAAS,CAACE,eAAX,CAAvC,CAA9H,CAAb;AACAzD,YAAAA,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,GAAyClB,IAAzC;;AAEA,gBAAI5H,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,CAAuC/B,MAAvC,GAAgD,CAApD,EAAuD;AACrD,qBAAOjJ,KAAK,CAACuB,IAAN,CAAWkE,SAAS,CAAC2D,QAArB,EAA+B,EAAE,GAAG3D,SAAS,CAAC4D,gBAAV,CAA2BA,gBAAhC;AAAkD,iBAAC5D,SAAS,CAACE,eAAX,GAA6B8F,MAAM,CAAChF,UAAU,CAACvE,UAAX,CAAsBuD,SAAS,CAACuF,gBAAhC,EAAkD,CAAlD,EAAqDvF,SAAS,CAACE,eAA/D,CAAD;AAArF,eAA/B,EACJhE,IADI,CACCC,QAAQ,IAAI;AAChBM,gBAAAA,UAAU,GAAG,EAAE,GAAGA,UAAL;AAAiB,qBAAGN,QAAQ,CAACC;AAA7B,iBAAb;AACD,eAHI,CAAP;AAID;AACF;AACF,SAZD,MAaK;AACH,cAAIK,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,KAA2C5I,SAA/C,EAA0D;AACxDF,YAAAA,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAV,GAAyCxK,oBAAoB,CAAC0B,UAAU,CAACuD,SAAS,CAACiH,eAAX,CAAX,EAAwCxK,UAAU,CAACuD,SAAS,CAACuF,gBAAX,CAAlD,EAAgFvF,SAAS,CAACE,eAA1F,CAA7D;AACD;AACF;AACF;;AACD,aAAO,IAAP;AACD,KAtCgD,CAAjD,CAFyB,CAyCzB;;AACArE,IAAAA,QAAQ,CAAC;AAAEmB,MAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,MAAAA,OAAO,EAAE,EAAE,GAAG+D,UAAL;AAAiBvE,QAAAA;AAAjB;AAAjC,KAAD,CAAR;AACD,GA3CD;AA4CD;AAED,OAAO,SAASyK,oBAAT,GAAgC;AACrC,SAAO,UAAUrL,QAAV,EAAoB;AACzBvB,IAAAA,KAAK,CAAC6M,IAAN,CAAWhM,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,MAAAA,EAAE,EAAE;AAAN,KAAnB,CAAX;AACD,GAFD;AAGD,C,CAED;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAEA,OAAO,SAASqK,WAAT,CAAqB7H,SAArB,EAAgChC,QAAhC,EAA0C3B,UAA1C,EAAsDsH,YAAtD,EAAoEmE,mBAApE,EAAyFC,mBAAzF,EAA8G;AACnH,SAAO,UAAUzL,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAI+M,QAAQ,GAAG,EAAf;AACAF,IAAAA,mBAAmB,CAAC1F,GAApB,CAAwBf,IAAI,IAAI;AAC9B,UAAGA,IAAI,CAAC4G,oBAAL,KAA8BjM,gBAAgB,CAACkM,QAAlD,EAA2D;AAC3D,YAAI7G,IAAI,CAAC8G,MAAT,EAAiB;AACf;AACAH,UAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAWwL,mBAAmB,CAAC,CAAD,CAAnB,CAAuBK,SAAvB,GAAmC,GAAnC,GAAyC/G,IAAI,CAAC7E,QAA9C,GAAyD,GAAzD,GAA+D6E,IAAI,CAAC5E,SAA/E,EAA0F,EAA1F,CAAd;AACD,SAHD,MAIK;AACDuL,UAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAW8E,IAAI,CAAC7E,QAAL,GAAgB,GAAhB,GAAsB6E,IAAI,CAAC5E,SAAtC,EAAiD;AAAEwB,YAAAA,QAAQ,EAAED;AAAZ,WAAjD,CAAd;AACH;AAEF;AACA,KAXD;AAaAlC,IAAAA,KAAK,CAACuM,GAAN,CAAUL,QAAV,EACGrL,IADH,CACQC,QAAQ,IAAI;AAChB,UAAI0L,cAAc,GAAG,EAArB;AACA,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAInK,cAAc,GAAC,EAAnB;AACA0J,MAAAA,mBAAmB,CAAC1F,GAApB,CAAwB,CAACf,IAAD,EAAOmG,KAAP,KAAiB;AACvC,YAAInG,IAAI,CAAC4G,oBAAL,IAA6BjM,gBAAgB,CAACwM,QAAlD,EAA4D;AAC1DF,UAAAA,cAAc,GAAG7M,mBAAmB,CAAC4F,IAAI,CAACoH,WAAL,KAAqB,IAArB,GAA4B7L,QAAQ,CAAC4K,KAAD,CAAR,CAAgB3K,IAAhB,IAAwB,EAApD,GAAyDD,QAAQ,CAAC4K,KAAD,CAAR,CAAgB3K,IAAhB,CAAqBwE,IAAI,CAACoH,WAA1B,CAA1D,EAAkGpH,IAAI,CAACqH,gBAAvG,EAClCrH,IAAI,CAACkB,SAD6B,EAClBnF,SADkB,EACPA,SADO,EACIA,SADJ,CAApC;AAEAmL,UAAAA,QAAQ,CAAClH,IAAI,CAACkB,SAAN,CAAR,GAA2B+F,cAAc,CAACK,GAAf,CAAmB,YAAnB,CAA3B;AACD,SAJD,MAIM,IAAGtH,IAAI,CAAC4G,oBAAL,KAA8BjM,gBAAgB,CAACkM,QAA/C,IAA4D7G,IAAI,CAACuH,YAApE,EAAiF;AACrFxK,UAAAA,cAAc,CAACiD,IAAI,CAACiB,WAAN,CAAd,GAAkCrG,iBAAiB,CAAC4M,GAApD;AAED;AACF,OATD;AAUAvM,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACP6K,UAAAA,QADO;AAEPvI,UAAAA,SAFO;AAGP0D,UAAAA,UAAU,EAAErH,UAAU,CAACuC,WAHhB;AAIP0C,UAAAA,SAAS,EAAE,IAJJ;AAKPqC,UAAAA,YALO;AAKOzF,UAAAA,OAAO,EAAE,KALhB;AAKsBE,UAAAA;AALtB;AAFF,OAAD,CAAR;AAUD,KAzBH,EA2BGe,KA3BH,CA2BSC,KAAK,IAAI;AAEd9C,MAAAA,QAAQ,CAACrB,WAAW,CAAC,KAAD,CAAZ,CAAR;;AAEA,UAAImE,KAAK,CAACxC,QAAN,KAAmBQ,SAAnB,IAAgCgC,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9D,EAAmE;AACjEtE,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFD,MAEO,IAAIzD,KAAK,CAACxC,QAAN,KAAmBQ,SAAvB,EAAkC;AACvCrC,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFM,MAEA;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAC5BC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AADS,SAAnB,CAAX;AAID;AAEF,KA1CH;AA4CD,GA5DD;AA8DD,C,CAED;;AACA,OAAO,MAAMiM,gBAAgB,GAAItF,gBAAD,IAAsB;AACpD,SAAQlH,QAAD,IAAc;AAEnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAI+M,QAAQ,GAAG,EAAf;AACA,UAAMvE,GAAG,GAAGD,gBAAgB,CAACnH,UAAjB,CAA4BG,QAA5B,GAAuC,YAAvC,GAAsDgH,gBAAgB,CAACnH,UAAjB,CAA4BI,SAAlF,GAA8F,MAA1G;AACAuL,IAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAWkH,GAAX,EAAgB;AAAE,OAACD,gBAAgB,CAAC7C,eAAlB,GAAoC6C,gBAAgB,CAAC9E,eAAvD;AAAwE,kBAAY8E,gBAAgB,CAACxF;AAArG,KAAhB,CAAd;AACAwF,IAAAA,gBAAgB,CAACsE,mBAAjB,CAAqC1F,GAArC,CAAyCf,IAAI,IAAI;AAE/C,UAAIA,IAAI,CAAC8G,MAAT,EAAiB;AACfH,QAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAWiH,gBAAgB,CAACuF,mBAAjB,CAAqC,CAArC,EAAwCX,SAAxC,GAAoD,GAApD,GAA0D/G,IAAI,CAAC7E,QAA/D,GAA0E,GAA1E,GAAgF6E,IAAI,CAAC5E,SAAhG,EAA2G,EAA3G,CAAd;AACD,OAFD,MAGK,IAAI4E,IAAI,CAAC7E,QAAL,IAAiB6E,IAAI,CAAC5E,SAA1B,EAAqC;AAExC,YAAI4E,IAAI,CAAC2H,kBAAL,IAA2B3H,IAAI,CAAC2H,kBAAL,KAA4B,IAA3D,EAAiE;AAC/DhB,UAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAW8E,IAAI,CAAC7E,QAAL,GAAgB,GAAhB,GAAsB6E,IAAI,CAAC5E,SAAtC,EACZ;AACE,aAAC4E,IAAI,CAACqH,gBAAN,GAAyBlF,gBAAgB,CAACyF,OAAjB,CAAyB5H,IAAI,CAACqH,gBAA9B,CAD3B;AAEE,aAACrH,IAAI,CAAC2H,kBAAN,GAA2BxF,gBAAgB,CAACyF,OAAjB,CAAyB5H,IAAI,CAAC2H,kBAA9B,KAAqD5L,SAFlF;AAGE,wBAAYoG,gBAAgB,CAACxF;AAH/B,WADY,CAAd;AAMD,SAPD,MAQK;AACHgK,UAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAW8E,IAAI,CAAC7E,QAAL,GAAgB,GAAhB,GAAsB6E,IAAI,CAAC5E,SAAtC,EAAiD;AAC7D,aAAC4E,IAAI,CAACqH,gBAAN,GACElF,gBAAgB,CAACyF,OAAjB,CAAyB5H,IAAI,CAACqH,gBAA9B,CAF2D;AAEV,wBAAYlF,gBAAgB,CAACxF;AAFnB,WAAjD,CAAd;AAID,SAfuC,CAiBxC;;AACD;AACF,KAxBD;AA0BAlC,IAAAA,KAAK,CAACuM,GAAN,CAAUL,QAAV,EACGrL,IADH,CACQC,QAAQ,IAAI;AAEhB,UAAI0L,cAAc,GAAG,EAArB;AACA,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIW,kBAAkB,GAAG,EAAE,GAAGtM,QAAQ,CAAC,CAAD,CAAR,CAAYC;AAAjB,OAAzB;AACA,UAAIsM,YAAY,GAAG,CAAC,GAAGvM,QAAJ,CAAnB;AACA,UAAIwM,mBAAmB,GAAG,EAA1B;AACAD,MAAAA,YAAY,CAACE,MAAb,CAAoB,CAApB,EAAuB,CAAvB;AAEA7F,MAAAA,gBAAgB,CAACsE,mBAAjB,CAAqC1F,GAArC,CAA0Cf,IAAD,IAAU;AACjD,YAAIA,IAAI,CAAC4G,oBAAL,KAA8BjM,gBAAgB,CAACwM,QAAnD,EAA6D;AAC3DY,UAAAA,mBAAmB,CAACnI,IAApB,CAAyBI,IAAzB;;AACA,cAAI,CAACA,IAAI,CAACiI,YAAN,IAAsBJ,kBAAkB,CAAC7H,IAAI,CAACkI,cAAN,CAAlB,KAA0C,CAAC,CAArE,EAAwE;AACtEL,YAAAA,kBAAkB,CAAC7H,IAAI,CAACkB,SAAN,CAAlB,GAAqC;AACnCsC,cAAAA,KAAK,EAAEqE,kBAAkB,CAAC7H,IAAI,CAACqH,gBAAN,CADU;AAEnCc,cAAAA,KAAK,EAAEN,kBAAkB,CAAC7H,IAAI,CAACkB,SAAN;AAFU,aAArC;AAID;AACF,SARD,MASK,IAAIlB,IAAI,CAAC4G,oBAAL,KAA8BjM,gBAAgB,CAACyN,UAAnD,EAA+D;AAClEP,UAAAA,kBAAkB,CAAC7H,IAAI,CAACkB,SAAN,CAAlB,GAAqC7G,mBAAmB,CAAC8H,gBAAgB,CAACxF,QAAlB,EAA4BkL,kBAAkB,CAAC7H,IAAI,CAACkB,SAAN,CAA9C,CAAxD;AACD;AACF,OAbD;AAeA6G,MAAAA,mBAAmB,CAAChH,GAApB,CAAwB,CAACsH,KAAD,EAAQlC,KAAR,KAAkB;AACxC2B,QAAAA,YAAY,CAAC/G,GAAb,CAAiB,CAACf,IAAD,EAAOsI,UAAP,KAAsB;AACrC,cAAInC,KAAK,KAAKmC,UAAd,EAA0B;AACxB,gBAAKD,KAAK,CAAClN,QAAN,KAAmB,oBAAnB,IAA2CkN,KAAK,CAACjN,SAAN,KAAoB,cAAhE,IAAoFiN,KAAK,CAAClN,QAAN,KAAmB,oBAAnB,IAA2CkN,KAAK,CAACjN,SAAN,KAAoB,aAAvJ,EAAuK;AACrK0M,cAAAA,YAAY,CAAC3B,KAAD,CAAZ,CAAoB3K,IAApB,CAAyBoE,IAAzB,CAA8BrE,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAA1C;AACD;;AACDyL,YAAAA,cAAc,GAAG7M,mBAAmB,CAACiO,KAAK,CAACjB,WAAN,KAAsB,IAAtB,GAA6BU,YAAY,CAAC3B,KAAD,CAAZ,CAAoB3K,IAApB,IAA4B,EAAzD,GAA8DsM,YAAY,CAAC3B,KAAD,CAAZ,CAAoB3K,IAApB,CAAyB6M,KAAK,CAACjB,WAA/B,CAA/D,EAA4GiB,KAAK,CAAChB,gBAAlH,EAClCgB,KAAK,CAACnH,SAD4B,EACjBnF,SADiB,EACNA,SADM,EACKA,SADL,CAApC;AAEAmL,YAAAA,QAAQ,CAACmB,KAAK,CAACnH,SAAP,CAAR,GAA4B+F,cAAc,CAACK,GAAf,CAAmB,YAAnB,CAA5B;AACD;AACF,SATD;AAUD,OAXD;AAaArM,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPU,UAAAA,cAAc,EAAE8K,kBADT;AAEPxF,UAAAA,UAAU,EAAEF,gBAAgB,CAACE,UAFtB;AAGP1D,UAAAA,SAAS,EAAEwD,gBAAgB,CAACxD,SAHrB;AAIPsB,UAAAA,SAAS,EAAE,IAJJ;AAKPqC,UAAAA,YAAY,EAAEH,gBAAgB,CAACG,YALxB;AAMPzF,UAAAA,OAAO,EAAE,KANF;AAOPC,UAAAA,UAAU,EAAEqF,gBAAgB,CAAC9E,eAPtB;AAQP6J,UAAAA;AARO;AAFF,OAAD,CAAR;AAaD,KAnDH,EAoDGpJ,KApDH,CAoDSC,KAAK,IAAI;AACd9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,KAAmBQ,SAAnB,IAAgCgC,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9D,EAAmE;AACjEtE,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFD,MAEO,IAAIzD,KAAK,CAACxC,QAAN,KAAmBQ,SAAvB,EAAkC;AACvCrC,QAAAA,KAAK,CAACqE,KAAN,CAAYxD,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACyD;AAAZ,SAAnB,CAAZ;AACD,OAFM,MAEA;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAArB,SAAnB,CAAX;AACD;AACF,KA7DH;AA8DD,GA9FD;AA+FD,CAhGM,C,CAqGP;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAAS+M,aAAT,CAAuB5L,QAAvB,EAAiC3B,UAAjC,EAA6CsH,YAA7C,EAA2DkG,gBAA3D,EAA6EC,eAA7E,EAA8FpN,SAA9F,EAAyG;AAC9G,SAAO,UAAUJ,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAI+M,QAAQ,GAAG,EAAf;AAGA6B,IAAAA,gBAAgB,CAACzH,GAAjB,CAAqBf,IAAI,IAAI;AACzB2G,MAAAA,QAAQ,CAAC/G,IAAT,CAAcjG,KAAK,CAACuB,IAAN,CAAW8E,IAAI,CAAC7E,QAAL,GAAgB,GAAhB,GAAsB6E,IAAI,CAAC0I,WAAtC,EAAmD;AAC/D9L,QAAAA,QAAQ,EAAED,QADqD;AAE/D,SAACqD,IAAI,CAACkI,cAAN,GAAuBO,eAAe,CAACzI,IAAI,CAACkI,cAAN,CAFyB;AAEF,8BAAsB7M,SAAS,CAAC0B,cAAV,CAAyBiD,IAAI,CAAC2H,kBAA9B;AAFpB,OAAnD,CAAd;AAIH,KALD,CAKG;AALH;AAQAlN,IAAAA,KAAK,CAACuM,GAAN,CAAUL,QAAV,EACGrL,IADH,CACQC,QAAQ,IAAI;AAEhB,UAAI0L,cAAc,GAAG,EAArB;AACA,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAInK,cAAc,GAAG,EAAE,GAAG1B,SAAS,CAAC0B;AAAf,OAArB;AACAyL,MAAAA,gBAAgB,CAACzH,GAAjB,CAAqB,CAACf,IAAD,EAAOmG,KAAP,KAAiB;AACpC,YAAInG,IAAI,CAAC4G,oBAAL,IAA6BjM,gBAAgB,CAACwM,QAAlD,EAA4D;AAC1DF,UAAAA,cAAc,GAAG7M,mBAAmB,CAAC4F,IAAI,CAAC2I,gBAAL,KAA0B,IAA1B,GAAiCpN,QAAQ,CAAC4K,KAAD,CAAR,CAAgB3K,IAAhB,IAAwB,EAAzD,GAA8DD,QAAQ,CAAC4K,KAAD,CAAR,CAAgB3K,IAAhB,CAAqBwE,IAAI,CAAC2I,gBAA1B,CAA/D,EAA4G3I,IAAI,CAAC4I,iBAAjH,EAClC5I,IAAI,CAAC6I,cAD6B,EACb9M,SADa,EACFA,SADE,EACSA,SADT,CAApC;AAEAmL,UAAAA,QAAQ,CAAClH,IAAI,CAAC6I,cAAN,CAAR,GAAgC5B,cAAc,CAACK,GAAf,CAAmB,YAAnB,CAAhC;AACAvK,UAAAA,cAAc,CAACiD,IAAI,CAAC6I,cAAN,CAAd,GAAsC9M,SAAtC;AAED;AACF,OARD;AAUAmL,MAAAA,QAAQ,GAAG,EAAE,GAAG7L,SAAS,CAAC6L,QAAf;AAAyB,WAAGA;AAA5B,OAAX;AAEAjM,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACP6K,UAAAA,QADO;AAEP;AACA7E,UAAAA,UAAU,EAAErH,UAAU,CAACuC,WAHhB;AAIP0C,UAAAA,SAAS,EAAE,IAJJ;AAKPqC,UAAAA,YALO;AAKOzF,UAAAA,OAAO,EAAE,KALhB;AAMPE,UAAAA;AANO;AAFF,OAAD,CAAR;AAWD,KA7BH,EA+BGe,KA/BH,CA+BSC,KAAK,IAAI;AAEd9C,MAAAA,QAAQ,CAACrB,WAAW,CAAC,KAAD,CAAZ,CAAR;;AAEA,UAAImE,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AAEjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AAED,OAJD,MAIO;AAEL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAE5BC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAFS,SAAnB,CAAX;AAMD;AAEF,KAjDH;AAmDD,GAhED;AAkED;AAED,OAAO,SAASsN,mBAAT,CAA6BC,QAA7B,EAAuC;AAC5C,SAAQ9N,QAAD,IAAc;AACnB,QAAI8N,QAAQ,CAACC,QAAT,KAAsB,UAA1B,EAAsC;AACpC,UAAID,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,IAAoB,CAAC,yBAAD,CAArB,CAAR,KAA8DtM,SAA1E,IAAuFgN,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,CAAD,CAAR,KAAgC,EAA3H,EAA+H;AAC7H,cAAMrN,UAAU,GAAG;AACjBK,UAAAA,SAAS,EAAE;AACT4N,YAAAA,QAAQ,EAAE;AACRC,cAAAA,eAAe,EAAEH,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,IAAoB,CAAC,yBAAD,CAArB,CADjB;AAERc,cAAAA,SAAS,EAAEJ,QAAQ,CAACI,SAFZ;AAGRC,cAAAA,KAAK,EAAEL,QAAQ,CAACK,KAHR;AAIRC,cAAAA,SAAS,EAAEN,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,CAAD;AAJX,aADD;AAOTzL,YAAAA,QAAQ,EAAEmM,QAAQ,CAACpM;AAPV,WADM;AAUjBxB,UAAAA,QAAQ,EAAE,cAVO;AAWjBwD,UAAAA,SAAS,EAAE,MAXM;AAYjBvD,UAAAA,SAAS,EAAE,kBAZM,CAajB;;AAbiB,SAAnB;AAeAH,QAAAA,QAAQ,CAAC+I,cAAc,CAAChJ,UAAD,CAAf,CAAR;AACD,OAjBD,MAiBO;AACLtB,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAAX;AACD;AACF,KArBD,MAqBO,IAAI4M,QAAQ,CAACC,QAAT,KAAsB,WAA1B,EAAuC;AAC5C,UAAID,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,IAAoB,CAAC,4BAAD,CAArB,CAAR,KAAiEtM,SAA7E,IAA0FgN,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,CAAD,CAAR,KAAgC,EAA9H,EAAkI;AAChI,cAAMrN,UAAU,GAAG;AACjBK,UAAAA,SAAS,EAAE;AACT4N,YAAAA,QAAQ,EAAE;AACRC,cAAAA,eAAe,EAAEH,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,IAAoB,CAAC,4BAAD,CAArB,CADjB;AAERc,cAAAA,SAAS,EAAEJ,QAAQ,CAACI,SAFZ;AAGRG,cAAAA,sBAAsB,EAAEP,QAAQ,CAACO,sBAHzB;AAIRC,cAAAA,WAAW,EAAER,QAAQ,CAACQ,WAJd;AAKRF,cAAAA,SAAS,EAAEN,QAAQ,CAACA,QAAQ,CAACV,KAAT,CAAe,CAAf,CAAD,CALX;AAMRe,cAAAA,KAAK,EAAEL,QAAQ,CAACK;AANR,aADD;AASTxM,YAAAA,QAAQ,EAAEmM,QAAQ,CAACpM;AATV,WADM;AAYjBxB,UAAAA,QAAQ,EAAE,cAZO;AAajBwD,UAAAA,SAAS,EAAE,MAbM;AAcjBvD,UAAAA,SAAS,EAAE,2BAdM,CAejB;;AAfiB,SAAnB;AAiBAH,QAAAA,QAAQ,CAAC+I,cAAc,CAAChJ,UAAD,CAAf,CAAR;AACD,OAnBD,MAmBO;AACLtB,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAAX;AACD;AACF,KAvBM,MAuBA;AACL,UAAImC,YAAJ;;AACA,UAAIyK,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAAC,WAAD,CAAR,GAAwB,CAAC,kBAAD,CAAzB,CAAR,KAA2DhN,SAAvE,IAAoFgN,QAAQ,CAACA,QAAQ,CAAC,WAAD,CAAT,CAAR,KAAoC,EAA5H,EAAgI;AAC9HzK,QAAAA,YAAY,GAAG,IAAf;AACD;;AACD,UAAIyK,QAAQ,IAAIA,QAAQ,CAACA,QAAQ,CAAC7H,SAAT,GAAqB,CAAC,yBAAD,CAAtB,CAAR,KAA+DnF,SAA3E,IAAwFgN,QAAQ,CAACA,QAAQ,CAAC7H,SAAV,CAAR,KAAiC,EAA7H,EAAiI;AAC/H5C,QAAAA,YAAY,GAAG,IAAf;AACD;;AACD,UAAIA,YAAJ,EAAkB;AAChB,cAAMtD,UAAU,GAAG;AACjBK,UAAAA,SAAS,EAAE;AACT4N,YAAAA,QAAQ,EAAEF,QAAQ,CAAC1G,UAAT,KAAwB,oBAAxB,GACR;AACE6G,cAAAA,eAAe,EAAEH,QAAQ,CAACA,QAAQ,CAAC7H,SAAT,GAAqB,CAAC,yBAAD,CAAtB,CAD3B;AAEEiI,cAAAA,SAAS,EAAEJ,QAAQ,CAACI,SAFtB;AAGEC,cAAAA,KAAK,EAAEL,QAAQ,CAACK,KAHlB;AAIEC,cAAAA,SAAS,EAAEN,QAAQ,CAACA,QAAQ,CAAC7H,SAAV;AAJrB,aADQ,GAOR;AACEgI,cAAAA,eAAe,EAAEH,QAAQ,CAACA,QAAQ,CAAC,WAAD,CAAR,GAAwB,CAAC,kBAAD,CAAzB,CAD3B;AAEES,cAAAA,kBAAkB,EAAET,QAAQ,CAACS,kBAF/B;AAGEC,cAAAA,0BAA0B,EAAEV,QAAQ,CAACU,0BAHvC;AAIEC,cAAAA,UAAU,EAAEX,QAAQ,CAAC7H,SAJvB;AAKEmI,cAAAA,SAAS,EAAEN,QAAQ,CAACA,QAAQ,CAAC7H,SAAV;AALrB,aARO;AAeTtE,YAAAA,QAAQ,EAAEmM,QAAQ,CAACpM;AAfV,WADM;AAkBjBxB,UAAAA,QAAQ,EAAE4N,QAAQ,CAAC5N,QAlBF;AAmBjBwD,UAAAA,SAAS,EAAE,MAnBM;AAoBjBvD,UAAAA,SAAS,EAAE2N,QAAQ,CAAC3N,SApBH,CAqBjB;;AArBiB,SAAnB;AAuBAH,QAAAA,QAAQ,CAAC+I,cAAc,CAAChJ,UAAD,CAAf,CAAR;AACD,OAzBD,MAyBO;AACLtB,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAnB,CAAX;AACD;AACF;AACF,GAlFD;AAoFD;AAED,OAAO,SAASwN,SAAT,CAAmB3O,UAAnB,EAA+Ba,UAA/B,EAA2C;AAEhD,SAAO,UAAUZ,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACAD,IAAAA,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoFJ,UAAU,CAACK,SAA/F,EAA0GC,IAA1G,CAA+GC,QAAQ,IAAI;AAEzHM,MAAAA,UAAU,GAAG,EACX,GAAGA,UADQ;AAEX,WAAGN,QAAQ,CAACC;AAFD,OAAb;;AAIA,UAAIR,UAAU,CAACoE,SAAf,EAA0B;AAExB,cAAMG,UAAU,GAAG1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CC,SAA/C,CAEjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CAFhC,CAAnB;AAMAzD,QAAAA,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBI,aAAtB,CAAV,CAA+CD,UAA/C,IAA6D1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAvE;;AAEA,YAAIxD,UAAU,CAAC,cAAD,CAAV,KAA+BE,SAAnC,EAA8C;AAE5C,gBAAMwD,UAAU,GAAG1D,UAAU,CAAC,cAAD,CAAV,CAA2B4D,SAA3B,CAEjBC,CAAC,IAAIA,CAAC,CAAC1E,UAAU,CAACoE,SAAX,CAAqBE,eAAtB,CAAD,KAA4CzD,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAV,CAAgDrE,UAAU,CAACoE,SAAX,CAAqBE,eAArE,CAFhC,CAAnB;AAKAzD,UAAAA,UAAU,CAAC,cAAD,CAAV,CAA2B0D,UAA3B,IAAyC1D,UAAU,CAACb,UAAU,CAACoE,SAAX,CAAqBC,cAAtB,CAAnD;AACD,SAlBuB,CAmBxB;;AACD;;AACDxD,MAAAA,UAAU,GAAG7B,QAAQ,CAAC6B,UAAD,CAArB;AACAZ,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AACeuC,QAAAA,OAAO,EAAE;AACrC;AACQwC,UAAAA,SAAS,EAAE,KAFkB;AAG7BhC,UAAAA,OAAO,EAAE,KAHoB;AAI7BhB,UAAAA,UAJ6B;AAK7B+N,UAAAA,SAAS,EAAE5O,UAAU,CAAC4O,SALO;AAM7B3J,UAAAA,SAAS,EAAE,KANkB;AAO7B4J,UAAAA,UAAU,EAAE9N,SAPiB;AAQ7B4C,UAAAA,SAAS,EAAE3D,UAAU,CAAC2D;AARO;AADxB,OAAD,CAAR;AAaD,KAzCD,EA0CGb,KA1CH,CA0CSC,KAAK,IAAI;AAEd9C,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPwC,UAAAA,SAAS,EAAE,KADJ;AAEPhC,UAAAA,OAAO,EAAE,KAFF;AAGP+M,UAAAA,SAAS,EAAE,IAHJ;AAIP3J,UAAAA,SAAS,EAAE;AAJJ;AAFF,OAAD,CAAR;;AAUA,UAAIlC,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACD,OAFD,MAGK;AACH9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACD;AACF,KA5DH;AA6DD,GA/DD;AAiED;AAED,OAAO,SAASsO,gBAAT,CAA0BC,cAA1B,EAA0CzH,YAA1C,EAAwD1F,QAAxD,EAAkE;AACvE,SAAO,UAAU3B,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AAGA,QAAI+M,QAAQ,GAAG,EAAf;AACA,UAAMqD,UAAU,GAAGrQ,KAAK,CAACuB,IAAN,CAAW,oBAAX,EAAiC0B,QAAjC,CAAnB;AACA,UAAMqN,sBAAsB,GAAGtQ,KAAK,CAACuB,IAAN,CAAW,yCAAX,EAAsD;AAAE6O,MAAAA,cAAF;AAAkBzH,MAAAA,YAAlB;AAAgC1F,MAAAA,QAAhC;AAA0CsN,MAAAA,WAAW,EAACjL,KAAK,CAACC,OAAN,CAAc6K,cAAd;AAAtD,KAAtD,CAA/B;AACApD,IAAAA,QAAQ,GAAG,CAACqD,UAAD,EAAaC,sBAAb,CAAX;AACAxP,IAAAA,KAAK,CAACuM,GAAN,CAAUL,QAAV,EAAoBrL,IAApB,CAAyBC,QAAQ,IAAI;AAEnC,YAAM4O,OAAO,GAAG/P,mBAAmB,CAACmB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,IAAoB,EAArB,EAAyB,cAAzB,EACjC,cADiC,EACjBO,SADiB,EACNA,SADM,EACK,IADL,CAAnB,CAC8BuL,GAD9B,CACkC,YADlC,CAAhB;AAGA,YAAM8C,OAAO,GAAGhQ,mBAAmB,CAACmB,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiB6O,OAAjB,IAA4B,EAA7B,EAAiC,cAAjC,EACjC,cADiC,EACjBtO,SADiB,EACNA,SADM,EACK,IADL,CAAnB,CAC8BuL,GAD9B,CACkC,YADlC,CAAhB;AAGC,YAAMvK,cAAc,GAAC,EAArB;AAEA,UAAGoN,OAAO,CAACvH,MAAR,GAAe,CAAlB,EACA7F,cAAc,CAAC,cAAD,CAAd,GAA+BoN,OAAO,CAAC,CAAD,CAAtC;AAEC,UAAGC,OAAO,CAACxH,MAAR,GAAe,CAAlB,EAAoB7F,cAAc,CAAC,UAAD,CAAd,GAA2BqN,OAAO,CAAC,CAAD,CAAlC;AACpBrN,MAAAA,cAAc,CAAC,eAAD,CAAd,GAAgC,CAAhC;AAGF9B,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACP4D,UAAAA,SAAS,EAAE,IADJ;AAEPtB,UAAAA,SAAS,EAAE,SAFJ;AAGP2L,UAAAA,WAAW,EAAEF,OAHN;AAIPG,UAAAA,OAAO,EAAEJ,OAJF;AAKPtN,UAAAA,OAAO,EAAE,KALF;AAMP2N,UAAAA,YAAY,EAAElI,YANP;AAOPmI,UAAAA,aAAa,EAAElP,QAAQ,CAAC,CAAD,CAAR,CAAYC,IAAZ,CAAiBiP,aAPzB;AAQPC,UAAAA,qBAAqB,EAAEX,cARhB;AASPhN,UAAAA,cAAc,EAACA;AATR;AAFF,OAAD,CAAR;AAcD,KA/BD,EAiCGe,KAjCH,CAiCSC,KAAK,IAAI;AAEd9C,MAAAA,QAAQ,CAACrB,WAAW,CAAC,KAAD,CAAZ,CAAR;;AAEA,UAAImE,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AAEjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AAED,OAJD,MAIO;AAEL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAE5BC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAFS,SAAnB,CAAX;AAMD;AAEF,KAnDH;AAqDD,GA7DD;AA+DD;AAGD,OAAO,SAASmP,iBAAT,CAA2BZ,cAA3B,EAA2CzH,YAA3C,EAAyD1F,QAAzD,EAAmEG,cAAnE,EAAmF;AACxF,SAAO,UAAU9B,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAIkG,IAAI,GAAG,EAAX;;AACA,QAAIb,KAAK,CAACC,OAAN,CAAc6K,cAAd,CAAJ,EAAmC;AACjCjK,MAAAA,IAAI,GAAGiK,cAAP;AACD,KAFD,MAEO;AACLjK,MAAAA,IAAI,CAACF,IAAL,CAAUmK,cAAV;AACD;;AACDpQ,IAAAA,KAAK,CAACuB,IAAN,CAAW,wCAAX,EAAqD;AACnD6O,MAAAA,cAAc,EAAEjK,IADmC;AAC7BwC,MAAAA,YAD6B;AAEnD1F,MAAAA,QAFmD;AAEzCgO,MAAAA,QAAQ,EAAE7N,cAAc,CAAC6N,QAAf,CAAwB5K,IAAxB,CAA6B4K,QAFE;AAEQC,MAAAA,YAAY,EAAE9N,cAAc,CAAC8N,YAAf,CAA4BrH,KAFlD;AAGnDsH,MAAAA,kBAAkB,EAAE/N,cAAc,CAAC+N,kBAAf,GAAoC/N,cAAc,CAAC+N,kBAAnD,GAAwE;AAHzC,KAArD,EAKGxP,IALH,CAKQC,QAAQ,IAAI;AAChB7B,MAAAA,KAAK,CAAC6M,IAAN,CAAWhL,QAAQ,CAACC,IAApB;AAEAP,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACP4D,UAAAA,SAAS,EAAE,KADJ;AAEPtB,UAAAA,SAAS,EAAE,SAFJ;AAGP9B,UAAAA,OAAO,EAAE,KAHF;AAIPE,UAAAA,cAAc,EAAE,EAJT;AAKP2N,UAAAA,qBAAqB,EAAE3O;AALhB;AAFF,OAAD,CAAR;AAUD,KAlBH,EAoBG+B,KApBH,CAoBSC,KAAK,IAAI;AAEd9C,MAAAA,QAAQ,CAACrB,WAAW,CAAC,KAAD,CAAZ,CAAR;;AAEA,UAAImE,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AAEjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AAED,OAJD,MAIO;AAEL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAE5BC,UAAAA,EAAE,EAAE4B,KAAK,CAACxC,QAAN,CAAeC;AAFS,SAAnB,CAAX;AAMD;AAEF,KAtCH;AAwCD,GAhDD;AAkDD;AAED,OAAO,MAAMyG,UAAU,GAAIjH,UAAD,IAAgB;AACxC,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,WAAOD,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA0BH,UAAU,CAAC2D,SAArC,GAAgD3D,UAAU,CAACI,SAAtE,EAAiFJ,UAAU,CAACK,SAA5F,EACJC,IADI,CACCC,QAAQ,IAAI;AAEhB,UAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;AACAxB,MAAAA,QAAQ,CAACwB,IAAD,CAAR;AAEA,YAAMG,UAAU,GAAG;AACjBC,QAAAA,QAAQ,EAAE9B,cADO;AAEjB0B,QAAAA,IAAI,EAAE;AAAEK,UAAAA,UAAU,EAAE,EAAd;AAAiB8C,UAAAA,SAAS,EAAC3D,UAAU,CAAC2D,SAAtC;AAAiD7C,UAAAA,YAAY,EAAEC;AAA/D;AAFW,OAAnB;AAIAd,MAAAA,QAAQ,CAACpB,WAAW,CAAC8B,UAAD,CAAZ,CAAR;AAIAV,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPR,UAAAA,UAAU,EAAEL,IADL;AAEPmD,UAAAA,SAAS,EAAC3D,UAAU,CAAC2D,SAFd;AAGPpC,UAAAA,aAAa,EAAEf,IAAI,CAACe,aAHb;AAIPC,UAAAA,aAAa,EAAEhB,IAAI,CAACgB,aAJb;AAKPC,UAAAA,WAAW,EAAEjB,IAAI,CAACiB,WALX;AAMPzB,UAAAA,UAAU,EAAEA,UANL;AAOP0B,UAAAA,YAAY,EAAE,EAPP;AAQPC,UAAAA,QAAQ,EAAE3B,UAAU,CAACK,SAAX,CAAqBuB,QARxB;AASPC,UAAAA,OAAO,EAAE,KATF;AAUPoD,UAAAA,SAAS,EAAE,KAVJ;AAWPnD,UAAAA,UAAU,EAAE,IAXL;AAYPC,UAAAA,cAAc,EAAE,EAZT;AAaPC,UAAAA,SAAS,EAAEjB,SAbJ;AAcPD,UAAAA,YAAY,EAAE;AACZmB,YAAAA,YAAY,EAAEzB,IAAI,CAAC0B,YADP;AACqBC,YAAAA,gBAAgB,EAAE3B,IAAI,CAAC4B,gBAD5C;AAEZC,YAAAA,eAAe,EAAE7B,IAAI,CAAC8B;AAFV,WAdP;AAkBPC,UAAAA,WAAW,EAAEvC,UAAU,CAACuC,WAlBjB;AAmBPC,UAAAA,cAAc,EAAEzB,SAnBT;AAoBP0B,UAAAA,IAAI,EAAE,CApBC;AAoBEC,UAAAA,IAAI,EAAE3B,SApBR;AAqBP4B,UAAAA,QAAQ,EAAE,CArBH;AAsBPC,UAAAA,QAAQ,EAAE5C,UAAU,CAACK,SAAX,CAAqBwC,QAArB,GAAgC7C,UAAU,CAACK,SAAX,CAAqBwC,QAArB,CAA8B,EAA9B,CAAhC,GAAoE;AAtBvE;AAFF,OAAD,CAAR;AA4BD,KA1CI,EA2CJC,KA3CI,CA2CEC,KAAK,IAAI;AACd9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE,KAAX;AAAiBoD,UAAAA,SAAS,EAAC,KAA3B;AAAiCpB,UAAAA,SAAS,EAAC;AAA3C;AAAjC,OAAD,CAAR;;AACA,UAAId,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAACC,UAAAA,EAAE,EAAC;AAAJ,SAAnB,CAAX;AACD,OAFD,MAEM,IAAG4B,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA7B,EAAiC;AACrCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACD,OAFK,MAEA;AACJ9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACD;AAEF,KArDI,CAAP;AAuDD,GAzDD;AA0DD,CA3DM,C,CA8DP;;AACE,OAAO,MAAMuP,0BAA0B,GAAG,CAACzI,YAAD,EAAevF,cAAf,EAA+BiO,KAA/B,EAAsC1L,eAAtC,EAAuDjC,eAAvD,KAA2E;AACnH,SAAQpC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,UAAMoB,UAAU,GAAG;AACjBsE,MAAAA,eAAe,EAAEA,eADA;AAEjB2L,MAAAA,SAAS,EAAED,KAAK,CAACrO,QAAN,CAAesO,SAFT;AAGjBC,MAAAA,WAAW,EAAEF,KAAK,CAACG,cAAN,CAAqB,EAArB,CAHI;AAIjBC,MAAAA,gBAAgB,EAAEJ,KAAK,CAACG,cAAN,CAAqB,EAArB,CAJD;AAKjBX,MAAAA,YAAY,EAAElI,YALG;AAMjB1F,MAAAA,QAAQ,EAAEoO,KAAK,CAACrO,QANC;AAOjBI,MAAAA,cAAc,EAAEA,cAPC;AAQjBsO,MAAAA,UAAU,EAAEtO,cAAc,CAACuO,kBARV;AASjBjO,MAAAA,eAAe,EAAEA,eATA;AAUjBkO,MAAAA,eAAe,EAAC7Q,UAAU,CAAC8Q;AAVV,KAAnB;AAYA7R,IAAAA,KAAK,CAACuB,IAAN,CAAW,uCAAX,EAAoD,EAElD,GAAGF;AAF+C,KAApD,EAIGM,IAJH,CAIQC,QAAQ,IAAI;AAEhB,UAAIA,QAAQ,CAACC,IAAT,CAAciQ,wBAAd,IAA0ClQ,QAAQ,CAACC,IAAT,CAAciQ,wBAAd,CAAuCC,mBAAvC,KAA+D,QAA7G,EAAuH;AAErH5Q,QAAAA,qCAAqC,CAACS,QAAQ,CAACC,IAAV,EAAgBR,UAAhB,CAArC;AACAC,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AAEPuC,UAAAA,OAAO,EAAE;AACPQ,YAAAA,OAAO,EAAE,KADF;AAEPgC,YAAAA,SAAS,EAAE,KAFJ;AAGPoB,YAAAA,SAAS,EAAE,KAHJ;AAIPQ,YAAAA,gBAAgB,EAAE;AAJX;AAFF,SAAD,CAAR;AASD,OAZD,MAYO;AACLxF,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AAEPuC,UAAAA,OAAO,EAAE;AACPQ,YAAAA,OAAO,EAAE,KADF;AAEPgC,YAAAA,SAAS,EAAE,KAFJ;AAGPoB,YAAAA,SAAS,EAAE,KAHJ;AAIPQ,YAAAA,gBAAgB,EAAE;AAJX;AAFF,SAAD,CAAR;AASAwD,QAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,YAAzC,CAAsD,MAAtD,EAA8D5I,QAAQ,CAACC,IAAT,CAAcmQ,QAA5E;AACA1H,QAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCG,KAAzC;AACD;AACF,KA/BH,EA+BKvG,KA/BL,CA+BWC,KAAK,IAAI;AAChB9C,MAAAA,QAAQ,CAAC;AACPmB,QAAAA,IAAI,EAAEtC,cADC;AAEPuC,QAAAA,OAAO,EAAE;AACPQ,UAAAA,OAAO,EAAE;AADF;AAFF,OAAD,CAAR;;AAMA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AACjCtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACD,OAFD,MAEO;AACL9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACD;AACF,KA3CH;AA4CD,GA1DD;AA2DD,CA5DM;AA8DL,OAAO,MAAMoQ,qBAAqB,GAAI5Q,UAAD,IAAgB;AACnD,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,WAAOD,KAAK,CAACuB,IAAN,CAAW,6BAAX,EAA0CF,UAA1C,EACNM,IADM,CACDC,QAAQ,IAAI;AAChB,UAAIiI,KAAK,GAAG,EAAZ;;AACA,UAAIjI,QAAQ,CAACC,IAAT,CAAcQ,GAAd,KAAsB,SAA1B,EAAqC;AACjCwH,QAAAA,KAAK,GAAGjI,QAAQ,CAACC,IAAT,CAAc,mBAAd,CAAR;AACA,cAAM8I,GAAG,GAAGC,MAAM,CAACC,IAAP,CAAYhB,KAAZ,CAAZ;;AACA,YAAIc,GAAJ,EAAS;AACLA,UAAAA,GAAG,CAACG,KAAJ;AACH,SAFD,MAEO;AACH/K,UAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB,qCAAnB,CAAX;AACH;AACJ,OARD,MAQO;AACH,YAAIX,QAAQ,CAACC,IAAT,CAAcQ,GAAlB,EAAuB;AACnBtC,UAAAA,KAAK,CAAC+B,IAAN,CAAWlB,IAAI,CAAC2B,aAAL,CAAmB;AAAEC,YAAAA,EAAE,EAAEZ,QAAQ,CAACC,IAAT,CAAcQ;AAApB,WAAnB,CAAX;AACH;AACJ;;AACDf,MAAAA,QAAQ,CAAC;AACLmB,QAAAA,IAAI,EAAEtC,cADD;AACiBuC,QAAAA,OAAO,EAAE;AAC3BQ,UAAAA,OAAO,EAAE,KADkB;AAE3BgC,UAAAA,SAAS,EAAE,KAFgB;AAEToB,UAAAA,SAAS,EAAE;AAFF;AAD1B,OAAD,CAAR;AAMH,KAtBQ,EAuBRnC,KAvBQ,CAuBFC,KAAK,IAAI;AACZ9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AAC/BtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACH,OAFD,MAGK;AACD9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACH;AACJ,KA/BQ,CAAP;AAgCC,GAlCH;AAmCD,CApCM;AAsCP,OAAO,SAASqQ,qBAAT,CAA+B7Q,UAA/B,EAA2Ca,UAA3C,EAAuDqC,SAAvD,EAAkEC,YAAlE,EAA+EtD,cAA/E,EAA+F;AACpG,SAAO,UAAUI,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACrB,WAAW,CAAC,IAAD,CAAZ,CAAR;AACA,QAAIyE,UAAU,GAAG,EAAjB;;AACA,QAAIrD,UAAU,CAACsD,YAAX,IAA2BtD,UAAU,CAACsD,YAAX,KAA0B,WAAzD,EAAsE;AACpE,YAAMC,QAAQ,GAAGvD,UAAU,CAACuD,QAA5B;AACAA,MAAAA,QAAQ,CAACC,MAAT,CAAgB,UAAhB,EAA4BC,IAAI,CAACC,SAAL,CAAe1D,UAAU,CAACK,SAAX,CAAqBuB,QAApC,CAA5B;AACAyB,MAAAA,UAAU,GAAG1E,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoFmD,QAApF,CAAb;AACD,KAJD,MAIO;AACLF,MAAAA,UAAU,GAAG1E,KAAK,CAACuB,IAAN,CAAWF,UAAU,CAACG,QAAX,GAAsB,GAAtB,GAA4BH,UAAU,CAAC2D,SAAvC,GAAmD3D,UAAU,CAACI,SAAzE,EAAoF,EAAE,GAAGJ,UAAU,CAACK;AAAhB,OAApF,CAAb;AACD;;AACD,WAAOgD,UAAU,CACd/C,IADI,CACCC,QAAQ,IAAI;AAClB,UAAIA,QAAQ,CAACC,IAAT,CAAcQ,GAAd,KAAuB,SAA3B,EAAsC;AACpC,YAAI8P,WAAW,GAAC;AACd3Q,UAAAA,QAAQ,EAACI,QAAQ,CAACC,IAAT,CAAcL,QADT;AACmBC,UAAAA,SAAS,EAACG,QAAQ,CAACC,IAAT,CAAcJ,SAD3C;AACsDC,UAAAA,SAAS,EAAC;AAAC,wBAAWL,UAAU,CAACK,SAAX,CAAqBuB;AAAjC,WADhE;AAEdW,UAAAA,WAAW,EAACvC,UAAU,CAACuC;AAFT,SAAhB,CADoC,CAKpC;;AAEA,YAAI/B,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAcuQ,YAAzB;AACA/R,QAAAA,QAAQ,CAACwB,IAAD,CAAR;AAEA,cAAMG,UAAU,GAAG;AACjBC,UAAAA,QAAQ,EAAE9B,cADO;AAEjB0B,UAAAA,IAAI,EAAE;AAAEK,YAAAA,UAAU,EAAE,EAAd;AAAkBC,YAAAA,YAAY,EAAEC;AAAhC;AAFW,SAAnB;AAIAd,QAAAA,QAAQ,CAACpB,WAAW,CAAC8B,UAAD,CAAZ,CAAR;AAGAV,QAAAA,QAAQ,CAAC;AACPmB,UAAAA,IAAI,EAAEtC,cADC;AAEPuC,UAAAA,OAAO,EAAE;AACPC,YAAAA,cAAc,EAAE,KADT;AAEPT,YAAAA,UAAU,EAAEL,IAFL;AAGPe,YAAAA,aAAa,EAAEf,IAAI,CAACe,aAHb;AAIPC,YAAAA,aAAa,EAAEhB,IAAI,CAACgB,aAJb;AAKPC,YAAAA,WAAW,EAAEjB,IAAI,CAACiB,WALX;AAMPzB,YAAAA,UAAU,EAAE8Q,WANL;AAOPpP,YAAAA,YAAY,EAAE,EAPP;AAQPC,YAAAA,QAAQ,EAAE3B,UAAU,CAACK,SAAX,CAAqBuB,QARxB;AASPC,YAAAA,OAAO,EAAE,KATF;AASSC,YAAAA,UAAU,EAAE,IATrB;AAS2BC,YAAAA,cAAc,EAAE,EAT3C;AAUPC,YAAAA,SAAS,EAAEjB,SAVJ;AAWPD,YAAAA,YAAY,EAAE;AACZmB,cAAAA,YAAY,EAAEzB,IAAI,CAAC0B,YADP;AACqBC,cAAAA,gBAAgB,EAAE3B,IAAI,CAAC4B,gBAD5C;AAEZC,cAAAA,eAAe,EAAE7B,IAAI,CAAC8B;AAFV,aAXP;AAePC,YAAAA,WAAW,EAAEuO,WAAW,CAACvO,WAflB;AAgBPC,YAAAA,cAAc,EAAEzB,SAhBT;AAiBP0B,YAAAA,IAAI,EAAE,CAjBC;AAiBEC,YAAAA,IAAI,EAAE3B,SAjBR;AAkBP4B,YAAAA,QAAQ,EAAE,CAlBH;AAmBP;AACAC,YAAAA,QAAQ,EAAEkO,WAAW,CAACzQ,SAAZ,CAAsBwC,QAAtB,GAAiCiO,WAAW,CAACzQ,SAAZ,CAAsBwC,QAAtB,CAA+B,EAA/B,CAAjC,GAAsE,EApBzE,CAqBP;;AArBO;AAFF,SAAD,CAAR;AA0BD;;AACD5C,MAAAA,QAAQ,CAAC;AACLmB,QAAAA,IAAI,EAAEtC,cADD;AACiBuC,QAAAA,OAAO,EAAE;AAC3BQ,UAAAA,OAAO,EAAE,KADkB;AAE3BgC,UAAAA,SAAS,EAAE,KAFgB;AAETvC,UAAAA,cAAc,EAAE;AAFP;AAD1B,OAAD,CAAR;AAMH,KApDQ,EAqDRwB,KArDQ,CAqDFC,KAAK,IAAI;AACZ9C,MAAAA,QAAQ,CAAC;AAAEmB,QAAAA,IAAI,EAAEtC,cAAR;AAAwBuC,QAAAA,OAAO,EAAE;AAAEQ,UAAAA,OAAO,EAAE;AAAX;AAAjC,OAAD,CAAR;;AACA,UAAIkB,KAAK,CAACxC,QAAN,CAAeyC,MAAf,KAA0B,GAA9B,EAAmC;AAC/BtE,QAAAA,KAAK,CAACqE,KAAN,CAAYA,KAAK,CAACyD,OAAlB;AACH,OAFD,MAGK;AACD9H,QAAAA,KAAK,CAAC+B,IAAN,CAAWsC,KAAK,CAACxC,QAAN,CAAeC,IAA1B;AACH;AACJ,KA7DQ,CAAP;AA8DC,GAxEH;AAyED;AAAA","sourcesContent":["import { toast } from 'react-toastify';\r\nimport rsapi from '../rsapi';\r\nimport { initRequest, updateStore } from './LoginAction';\r\nimport { DEFAULT_RETURN, REQUEST_FAILURE } from './LoginTypes';\r\nimport { sortData, searchData, searchJsonData, replaceUpdatedObject, constructOptionList, rearrangeDateFormat, Lims_JSON_stringify } from '../components/CommonScript';\r\nimport { intl } from '../components/App';\r\nimport { selectedDashBoardView } from './DashBoardTypeAction';\r\nimport Axios from \"axios\";\r\nimport { REPORTTYPE, designComponents, transactionStatus } from '../components/Enumeration';\r\nimport ConfirmMessage from '../components/confirm-alert/confirm-message.component';\r\nimport { viewReportDetailWithParametersReports } from './ReportDesignerAction';\r\n\r\n// import { getValidComponent } from '../components/droparea/helpers';\r\n//import { Engine } from 'json-rules-engine';\r\n//import employee from '../rules/Employee-Salary.json';\r\n\r\nexport const callService = (inputParam) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    return rsapi.post(inputParam.classUrl + \"/get\" + inputParam.methodUrl, inputParam.inputData)\r\n      .then(response => {\r\n\r\n        // console.log(\"res:\", response);\r\n\r\n        ///Start of Rule Engine code///////////////////////\r\n\r\n        // const decisions1 = [\r\n        //   {\r\n        //       \"conditions\": {\r\n        //           \"all\": [\r\n        //               {\r\n        //                   \"fact\": \"Designation\",\r\n        //                   \"operator\": \"equal\",\r\n        //                   \"value\": \"Manager\"\r\n        //               },\r\n        //               {\r\n        //                   \"fact\": \"Experience\",\r\n        //                   \"operator\": \"greaterThan\",\r\n        //                   \"value\": 10\r\n        //               }\r\n        //           ]\r\n        //       },\r\n        //       \"event\": {\r\n        //           \"type\": \"RS.1500000\",\r\n        //           \"params\": {message: 'Your Salary is 1500000/annum!'}\r\n        //       }\r\n        //   }\r\n        // ];\r\n        // console.log(\"decisions:\",decisions1);  \r\n        // const inputs1 = {Designation: 'Manager', Experience: 9 };\r\n\r\n        // const engine = new Engine(employee.decisions);   \r\n\r\n        // engine.run(inputs1)\r\n        // .then(results => {       \r\n        //   console.log(\"Rule output:\", results.events);\r\n        //   if ( results.events.length > 0){\r\n        //     const events = results.events;\r\n        //     events.map(event => console.log(\"Message:\",event.params.message)); \r\n\r\n\r\n        //     rsapi.post(\"section/getSection\" , inputParam.inputData)\r\n        //     .then(response => {\r\n        //       console.log(\"data:\", response);\r\n        //       let data = response.data;\r\n        //       sortData(data);\r\n\r\n        //       const updateInfo = {\r\n        //         typeName: DEFAULT_RETURN,\r\n        //         data: { masterData: [], organisation: undefined, }\r\n        //       }\r\n        //       dispatch(updateStore(updateInfo))\r\n\r\n        //       dispatch({\r\n        //         type: DEFAULT_RETURN,\r\n        //         payload: {\r\n        //           masterData: data,\r\n        //           activeTestTab: data.activeTestTab,\r\n        //           activeTestKey: data.activeTestKey,\r\n        //           activeBCTab: data.activeBCTab,\r\n        //           inputParam: inputParam,\r\n        //           masterStatus: \"\",\r\n        //           userInfo: inputParam.inputData.userinfo,\r\n        //           loading: false, selectedId: null, selectedRecord: {},\r\n        //           dataState: undefined,\r\n        //           organisation: {\r\n        //             selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n        //             primaryKeyValue: data.AddedChildPrimaryKey\r\n        //           },\r\n        //           displayName: inputParam.displayName,\r\n        //           reportFilePath: undefined\r\n        //         }\r\n        //       })\r\n\r\n        //     })\r\n        //     .catch(error => {\r\n        //       if (error.response === undefined && error === \"Network Error\") {\r\n        //         dispatch({\r\n        //           type: REQUEST_FAILURE,\r\n        //           payload: {\r\n        //             error: \"Network Error\",\r\n        //             loading: false,\r\n        //           }\r\n        //         });\r\n        //       } else if (error.response.status === 417) {\r\n        //         toast.warning(error.response.data);\r\n        //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        //       } else {\r\n        //         dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\r\n        //       }\r\n        //     })\r\n        //   }\r\n        //   else{\r\n        //     console.log(\"Message:\",\"Rules Failed\");\r\n        //     dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        //   }         \r\n        // })\r\n        ///End of Rule Engine code///////////////////////\r\n\r\n        ////uncomment below for Orginial Source start////////////////////\r\n\r\n        if (response.data[\"Success\"]) {\r\n          toast.warn(response.data.Success);\r\n        }\r\n\r\n        let data = response.data;\r\n        sortData(data);\r\n\r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { masterData: [], organisation: undefined, }\r\n        }\r\n        dispatch(updateStore(updateInfo))\r\n\r\n        if (response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\") {\r\n          toast.warning(intl.formatMessage({ id: \"IDS_USERNOTINRESULTENTRYFLOW\" }));\r\n        }\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            openExcelModal: false,\r\n            masterData: data,\r\n            activeTestTab: data.activeTestTab,\r\n            activeTestKey: data.activeTestKey,\r\n            activeBCTab: data.activeBCTab,\r\n            inputParam: inputParam,\r\n            masterStatus: \"\",\r\n            userInfo: inputParam.inputData.userinfo,\r\n            loading: false, selectedId: null, selectedRecord: {},\r\n            dataState: undefined,\r\n            organisation: {\r\n              selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n              primaryKeyValue: data.AddedChildPrimaryKey\r\n            },\r\n            displayName: inputParam.displayName,\r\n            reportFilePath: undefined,\r\n            skip: 0, take: undefined,\r\n            testskip: 0,\r\n            //testtake: 5,\r\n            testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10,\r\n            //  key:inputParam.key!==undefined?inputParam.key:\"\"\r\n          }\r\n        })\r\n\r\n        ///Uncomment till above for original source\r\n      })\r\n      .catch(error => {\r\n        //console.log(\"error:\", error);\r\n        if (error.response === undefined && error === \"Network Error\") {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              error: \"Network Error\",\r\n              loading: false,\r\n            }\r\n          });\r\n        } else if (error.response !== undefined && error.response.status === 417) {\r\n          toast.warning(error.response.data);\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } });\r\n        } else {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false, displayName: inputParam.displayName, userInfo: inputParam.inputData.userinfo } })\r\n        }\r\n      })\r\n\r\n  };\r\n};\r\n\r\n//Start- Add /Edit/Delete Master Data\r\nexport function crudMaster(inputParam, masterData, modalName, defaultInput,ConfirmMessage,clearSelectedRecordField) {\r\n\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let requestUrl = '';\r\n    if (inputParam.isFileupload && inputParam.isFileupload!=='undefined') {\r\n      const formData = inputParam.formData;\r\n      formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\r\n    } else {\r\n      requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData });\r\n    }\r\n    return requestUrl\r\n      .then(response => {\r\n        if (response.status === 202) {\r\n          //HttpStatus:Accepted\r\n          //Use this block when u need to display any success message\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              loadEsign: false,\r\n              [modalName]: false,\r\n            //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\r\n            //isFilterDetail is mainly use in the transaction save filter in all screen.\r\n              isFilterDetail:false,\r\n              loading: false,\r\n              ...selectedRecordObj\r\n            }\r\n          })\r\n          toast.success(response.data);\r\n        }\r\n        else if (response.status === 208) {\r\n          //HttpStatus:Accepted\r\n          //208-Already Reported\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              loadEsign: false,\r\n              [modalName]: false,\r\n              loading: false,\r\n              ...selectedRecordObj\r\n\r\n            }\r\n          })\r\n          toast.warn(response.data);\r\n        }\r\n        else {\r\n          const retrievedData = sortData(response.data);\r\n          if (masterData === undefined || Array.isArray(retrievedData)) {\r\n            masterData = retrievedData;\r\n          }\r\n          else {\r\n           if(!response.data.flag)\r\n           {\r\n            masterData = {\r\n            ...masterData,\r\n            ...retrievedData\r\n          }\r\n        }else{\r\n            masterData = {\r\n              ...masterData\r\n            }\r\n          }\r\n\r\n            \r\n            if (modalName === \"openModal\" && inputParam.operation !== \"delete\" && inputParam.operation !== \"prepare\"\r\n              && inputParam.operation !== \"create\" && inputParam.operation !== \"copy\") {\r\n\r\n              if (inputParam.postParam) {\r\n                if (masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]) {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                } else {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][0][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject][0];\r\n                }\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && inputParam.operation === \"create\") {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                //masterData[inputParam.postParam.selectedObject] = response.data;\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openChildModal\" && inputParam.operation === \"create\") {//searchedData\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                  x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                );\r\n                masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n                if (masterData[\"searchedData\"] !== undefined) {\r\n                  const foundIndex = masterData[\"searchedData\"].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n                }\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && inputParam.operation === \"copy\") {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                masterData[inputParam.postParam.inputListName].push(response.data[inputParam.postParam.selectedObject]);\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n              }\r\n            }\r\n            else if (modalName === \"openModal\" && (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\")) {\r\n              if (inputParam.postParam && inputParam.postParam.isSingleGet) {\r\n                if (inputParam.postParam.task === \"cancel\") {\r\n                  const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                    x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n                  );\r\n                  masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n                }\r\n                else {\r\n                  const list = masterData[inputParam.postParam.inputListName]\r\n                    .filter(item => item[inputParam.postParam.primaryKeyField] !== inputParam.postParam.primaryKeyValue)\r\n                  masterData[inputParam.postParam.inputListName] = list;\r\n\r\n                  // const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n                  //   x => x[inputParam.postParam.primaryKeyField] === inputParam.postParam.primaryKeyField\r\n                  // );\r\n                  // masterData[inputParam.postParam.inputListName].splice(foundIndex, 1)         \r\n\r\n                }\r\n                response.data.\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n              }\r\n            }\r\n          }\r\n          // (masterData);\r\n\r\n          //let openModal = false;\r\n          let openModal = masterData.flag && masterData.flag==='true'  ? true :false;\r\n          // let openChildModal= false;\r\n\r\n          let selectedRecord = {};\r\n          let activeSampleTab = inputParam.activeSampleTab ? { activeSampleTab: inputParam.activeSampleTab } : ''\r\n          let activeTestKey = inputParam.activeTestKey ? { activeTestKey: inputParam.activeTestKey } : ''\r\n          let showSample = inputParam.showSample ? inputParam.showSample : ''\r\n          let respObject = {\r\n            masterData,\r\n            inputParam,\r\n            modalName,\r\n            //   openChildModal,\r\n            //modalName:undefined,\r\n            //ATE234 Janakumar ALPD-5589,ALPD-5436 Test approval---> When using the save filter button, 500 occurs in Specific scenario Release & Report -> Edit Report Template Slide out issues.\r\n            //isFilterDetail is mainly use in the transaction save filter in all screen.\r\n            isFilterDetail:false,\r\n            [modalName]: openModal,\r\n            operation: inputParam.operation,\r\n            masterStatus: \"\",\r\n            errorCode: undefined,\r\n            loadEsign: false,\r\n            showEsign: false,\r\n            selectedRecord,\r\n            loading: false,\r\n            dataState: inputParam.dataState,\r\n            selectedId: inputParam.selectedId,\r\n            ...activeSampleTab,\r\n            ...activeTestKey,\r\n            showSample,\r\n            design: [],\r\n\r\n            //organisation: undefined\r\n            organisation: inputParam.nextNode ? {\r\n              selectedNode: inputParam.nextNode,\r\n              selectedNodeName: masterData.SelectedNodeName,\r\n              primaryKeyValue: masterData.AddedChildPrimaryKey,\r\n\r\n            } : undefined,\r\n            showConfirmAlert: inputParam.showConfirmAlert,\r\n            loadPoolSource: inputParam.loadPoolSource,\r\n            skip: inputParam.skip || undefined,\r\n            take: inputParam.take || undefined,\r\n            openPortal: false,\r\n          }\r\n\r\n          if (inputParam.operation === \"create\" || inputParam.operation === \"copy\") {\r\n            if (inputParam.saveType === 2) {\r\n              openModal = true;\r\n              //ALPD-5063 added by Dhanushya RI,Enable save and continue option in Type3 component based screen\r\n              Object.keys(inputParam.selectedRecord).map(item=>{\r\n                clearSelectedRecordField.map(data=>{\r\n                    if(data.controlType === \"checkbox\" ? (item===data.controlName || item===data.dataField): item===data.dataField){\r\n                      selectedRecord= inputParam.selectedRecord;\r\n                      selectedRecord[item]=data.preSetValue ? data.preSetValue:\"\";\r\n                    } \r\n                    //Added by sonia on 04th Mar 2025 for  jira id:ALPD-5504\r\n                    else {\r\n                        selectedRecord= inputParam.selectedRecord;\r\n                    }            \r\n                })\r\n              })\r\n             // selectedRecord = defaultInput;\r\n              \r\n            }\r\n            respObject = { ...respObject, [modalName]: openModal, selectedRecord };\r\n          }\r\n          if ((modalName === \"openModal\" || modalName === \"openChildModal\") && Object.keys(masterData).indexOf(\"searchedData\") !== -1\r\n            && masterData[\"searchedData\"] !== undefined) {\r\n            dispatch(postCRUDOrganiseSearch(inputParam.postParam, respObject))\r\n          }\r\n          else {\r\n            //ALPD-5540--Added by vignesh R(07-03-2025)--Supplier-->When click the logout button, blank page occurs in specific scenario\r\n            if (inputParam.saveType === 2) {\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, [modalName]: openModal } })\r\n\r\n            }\r\n            else{\r\n            dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, [modalName]: undefined } })\r\n            \r\n            }\r\n          }\r\n        }\r\n      })\r\n      .catch(response => {\r\n        console.log(\"error:\", response);\r\n        if (response.response.status === 500) {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              error: response.message,\r\n              loading: false,\r\n              // openPortal:this.props.Login.openPortal,\r\n              //openModal:inputParam.openPortal?false:true\r\n            }\r\n          });\r\n        } \r\n        else if (response.response.status === 409 && response.response.data.flag) {\r\n          dispatch({\r\n            type: REQUEST_FAILURE,\r\n            payload: {\r\n              loading: false,\r\n            }\r\n          });\r\n          let inputData={...inputParam.inputData,DeleteExistingRecord:true}\r\n          ConfirmMessage.confirm(\r\n            \"deleteMessage\",\r\n            intl.formatMessage({ id: \"IDS_INFOMATION\" }),\r\n            intl.formatMessage({ id: \"IDS_REMOVEEXISTINGCONFIGUARTION\" }),\r\n            intl.formatMessage({ id: \"IDS_OK\" }),\r\n            intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () =>\r\n            dispatch(crudMaster(inputParam={...inputParam,inputData}, masterData, modalName, defaultInput,ConfirmMessage))\r\n          );\r\n      }\r\n        else {\r\n\r\n          let obj = {}\r\n          if (inputParam.openPortal === true) {\r\n            obj = { openModal: false }\r\n          }\r\n          let selectedRecordObj = {}\r\n          if (inputParam.selectedRecord) {\r\n            selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n          }\r\n\r\n          if (inputParam.operation === \"delete\" || inputParam.operation === \"prepare\" || inputParam.operation === \"receive\" ||\r\n            inputParam.operation === 'approve' || inputParam.operation === 'Approve' || inputParam.operation === \"correction\"\r\n            || inputParam.operation === \"complete\" || inputParam.operation === \"dynamic\" \r\n            || inputParam.operation === \"setDefault\" || inputParam.operation === \"reset\" || inputParam.operation === \"retire\"\r\n            || inputParam.operation === \"xml\" || inputParam.operation === 'blackList' || inputParam.operation === 'attendance'\r\n            || inputParam.operation === 'certified' || inputParam.operation === 'competent' || inputParam.operation === \"invite\"\r\n            || inputParam.operation === \"cancel\" || inputParam.operation === \"cancel\" || inputParam.operation === \"conduct\"\r\n            || inputParam.operation === \"attend\" || inputParam.operation === \"certify\" || inputParam.operation === \"Competent\"\r\n            || inputParam.operation === \"Create\" || inputParam.operation === \"check\") {\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                masterStatus: response.response.data,\r\n                errorCode: response.response.status,\r\n                loadEsign: false,\r\n                [modalName]: false,\r\n                loading: false,\r\n                openPortal: false,\r\n                ...selectedRecordObj\r\n              }\r\n            });\r\n          } else {\r\n            // console.log('dispatch',obj)\r\n            if (inputParam.selectedRecord) {\r\n              selectedRecordObj = { selectedRecord: inputParam.selectedRecord }\r\n            }\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                masterStatus: response.response.data,\r\n                errorCode: response.response.status,\r\n                loadEsign: false, loading: false,\r\n                ...obj,\r\n                ...selectedRecordObj\r\n\r\n          \r\n              }\r\n            });\r\n          }\r\n\r\n        }\r\n      });\r\n  }\r\n}\r\nexport const validateEsignCredential = (inputParam, modalName,confirmMessage) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    if (inputParam && inputParam.inputData && inputParam.inputData.userinfo) {\r\n      inputParam.inputData[\"userinfo\"] = {\r\n        ...inputParam.inputData.userinfo,\r\n        sformname: Lims_JSON_stringify(inputParam.inputData.userinfo.sformname),\r\n        smodulename: Lims_JSON_stringify(inputParam.inputData.userinfo.smodulename),\r\n      }\r\n    }\r\n    return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n      .then(response => {\r\n        if (response.data === \"Success\") {\r\n\r\n          const methodUrl = inputParam[\"screenData\"][\"inputParam\"][\"methodUrl\"];\r\n          inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n          if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n\r\n            delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n\r\n            if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]) {\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n\r\n\r\n            }\r\n\r\n            // ALPD-2437 added for Type3 Component. Use selected record to clear esign values\r\n            if (inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"]) {\r\n\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignreason\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esignpassword\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"esigncomments\"];\r\n              delete inputParam[\"screenData\"][\"inputParam\"][\"selectedRecord\"][\"agree\"];\r\n            }\r\n          }\r\n          //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage))\r\n\r\n          if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]&&inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"sync\"){\r\n          dispatch(syncAction(inputParam[\"screenData\"][\"inputParam\"]))\r\n\r\n          }else{\r\n            //dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName))\r\n            //ALPD-5444 Test Group - Copy the spec in test group and do save continue loading issue occurs.\r\n            dispatch(crudMaster(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"masterData\"], modalName,'',confirmMessage,inputParam[\"screenData\"][\"clearSelectedRecordField\"]))\r\n\r\n          }\r\n        }\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  };\r\n};\r\n\r\nexport const fetchRecord = (fetchRecordParam) => {\r\n  return (dispatch) => {\r\n\r\n    dispatch(initRequest(true));\r\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n    rsapi.post(url, {\r\n      [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo\r\n    })\r\n      .then(response => {\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            selectedRecord: response.data,\r\n            screenName: fetchRecordParam.screenName,\r\n            operation: fetchRecordParam.operation,\r\n            openModal: true,\r\n            ncontrolCode: fetchRecordParam.ncontrolCode,\r\n            loading: false,\r\n            selectedId: fetchRecordParam.primaryKeyValue\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport function filterColumnData(filterValue, filterParam,filterOperator) {\r\n  return function (dispatch) {\r\n\r\n    let masterData = filterParam.masterData;\r\n\r\n    let primaryKeyValue = 0;\r\n    let searchedData = undefined;\r\n    if (filterValue === \"\") {\r\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\r\n        // if(filterParam.isjsondata)\r\n        // {\r\n        //    primaryKeyValue = masterData[filterParam.inputListName][0][\"jsondata\"][filterParam.primaryKeyField]\r\n\r\n        //  }\r\n        //else\r\n        // {\r\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\r\n        // }\r\n      }\r\n    }\r\n    else {\r\n      if (filterParam.isjsondata) {\r\n        searchedData = searchJsonData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [],filterOperator);\r\n      }\r\n      else {\r\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || [],filterOperator);\r\n\r\n      }\r\n      if (searchedData.length > 0) {\r\n        //  if(filterParam.isjsondata)\r\n        // {\r\n        //  primaryKeyValue = searchedData[0][\"jsondata\"][filterParam.primaryKeyField];\r\n        //  }\r\n        // else{\r\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\r\n        //  }\r\n      }\r\n    }\r\n\r\n    if (primaryKeyValue !== 0) {\r\n      dispatch(initRequest(true));\r\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject, [filterParam.primaryKeyField]: primaryKeyValue })\r\n        .then(response => {\r\n          masterData[\"searchedData\"] = searchedData;\r\n          masterData = { ...masterData, ...response.data };\r\n\r\n          if (filterParam.inputListName === \"DashBoardView\") {\r\n            dispatch(selectedDashBoardView(response, masterData));\r\n          }\r\n          else {\r\n            if (filterParam.sortField) {\r\n              sortData(masterData, filterParam.sortOrder, filterParam.sortField);\r\n            }\r\n            else {\r\n              sortData(masterData);\r\n            }\r\n            dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false, skip: 0, take: 10, selectedId: null } });\r\n          }\r\n        })\r\n        .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n            toast.error(intl.formatMessage({ id: error.message }));\r\n          }\r\n          else {\r\n            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n          }\r\n        })\r\n    }\r\n    else {\r\n      masterData[filterParam.selectedObject] = undefined;\r\n      masterData[\"searchedData\"] = [];\r\n      Object.keys(masterData).forEach(item => {\r\n        if (item !== filterParam.inputListName && item !== filterParam.selectedObject\r\n          && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) === -1)\r\n          masterData[item] = [];\r\n      })\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          masterData, operation: null, modalName: undefined,\r\n          loading: false\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport function postCRUDOrganiseSearch(postParam, respObject) {\r\n  return function (dispatch) {\r\n\r\n    let masterData = respObject.masterData;\r\n\r\n    if (respObject.inputParam.operation === \"create\" || respObject.inputParam.operation === \"copy\") {\r\n      if (respObject.modalName === \"openModal\") {\r\n        if (respObject.inputParam.isChild === undefined) {\r\n          respObject.inputParam.searchRef.current.value = \"\";\r\n          masterData[\"searchedData\"] = undefined;\r\n        }\r\n      }\r\n      dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData, modalName: undefined } })\r\n    }\r\n    else if (respObject.inputParam.operation === \"delete\" || respObject.inputParam.operation === \"prepare\") {\r\n\r\n      if (masterData[\"searchedData\"] !== undefined && respObject.modalName === \"openModal\") {\r\n        let temp = masterData[\"searchedData\"];\r\n        let primaryKeyValue = respObject.masterData[\"searchedData\"][0][postParam.primaryKeyField];\r\n        if (respObject.inputParam.isChild === undefined) {\r\n\r\n          temp = masterData[\"searchedData\"].filter(item => Array.isArray(postParam.primaryKeyValue) ?\r\n            !postParam.primaryKeyValue.includes(item[postParam.primaryKeyField])\r\n            : item[postParam.primaryKeyField] !== postParam.primaryKeyValue);\r\n          primaryKeyValue = temp.length > 0 ? temp[0][postParam.primaryKeyField] : 0;\r\n        }\r\n        else {\r\n          primaryKeyValue = masterData[postParam.selectedObject][postParam.primaryKeyField];\r\n        }\r\n        masterData[\"searchedData\"] = temp;\r\n        respObject = { ...respObject, modalName: undefined };\r\n        if (masterData[\"searchedData\"].length > 0) {\r\n          primaryKeyValue = masterData[\"searchedData\"][0][postParam.primaryKeyField];\r\n\r\n          return rsapi.post(postParam.fetchUrl, {\r\n            ...postParam.fecthInputObject, [postParam.primaryKeyField]: primaryKeyValue\r\n          })\r\n            .then(response => {\r\n              masterData = { ...masterData, ...response.data };\r\n              sortData(masterData);\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n            })\r\n            .catch(error => {\r\n              dispatch({ type: DEFAULT_RETURN, payload: { ...respObject } })\r\n              if (error.response.status === 500) {\r\n                toast.error(intl.formatMessage({ id: error.message }));\r\n              }\r\n              else {\r\n                toast.warn(intl.formatMessage({ id: error.response.data }));\r\n              }\r\n            })\r\n        }\r\n        else {\r\n          masterData[postParam.selectedObject] = undefined;\r\n          masterData[\"searchedData\"] = [];\r\n          Object.keys(masterData).forEach(item => {\r\n            if (item !== postParam.inputListName && item !== postParam.selectedObject\r\n              && postParam.unchangeList && postParam.unchangeList.indexOf(item) === -1)\r\n              masterData[item] = masterData && Array.isArray(masterData[item])?[]:undefined;\r\n          })\r\n\r\n          dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n        }\r\n      }\r\n      else {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData, modalName: undefined } });\r\n      }\r\n    }\r\n    else if (respObject.inputParam.filtercombochange) {\r\n\r\n      respObject = { ...respObject, modalName: undefined };\r\n      if (masterData[\"searchedData\"] !== undefined) {\r\n        masterData[\"searchedData\"] = undefined;\r\n        respObject.inputParam.searchRef.current.value = \"\";\r\n      }\r\n\r\n      let Map = {}\r\n      if (postParam.selectedComboName !== undefined) {\r\n        Map = { [postParam.selectedComboName]: { [postParam.selectedComboId]: postParam.selectedCombo } }\r\n      }\r\n\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          ...respObject, masterData, ...Map\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      respObject = { ...respObject, modalName: undefined };\r\n      if (masterData[\"searchedData\"] !== undefined) {\r\n        if (masterData[postParam.selectedObject][postParam.primaryKeyField]) {\r\n\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n            x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][postParam.primaryKeyField]\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject];\r\n        } else {\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n            x => x[postParam.primaryKeyField] === masterData[postParam.selectedObject][0][postParam.primaryKeyField]\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[postParam.selectedObject][0];\r\n        }\r\n      }\r\n      dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } });\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport const viewAttachment = (inputParam) => {\r\n  return (dispatch) => {\r\n    let inputData = { ...inputParam.inputData }\r\n    if (inputData['selectedRecord']) {\r\n      delete inputData['selectedRecord']['expanded'];\r\n    }\r\n    dispatch(initRequest(true));\r\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputData)\r\n      .then(response => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        let value = \"\";\r\n        if (response.data[\"AttachFile\"]) {\r\n          document.getElementById(\"download_data\").setAttribute(\"href\", response.data.FilePath);\r\n          document.getElementById(\"download_data\").click();\r\n        } else if (response.data[\"AttachLink\"]) {\r\n          value = response.data[\"AttachLink\"];\r\n          var win = window.open(value, '_blank');\r\n          if (win) {\r\n            win.focus();\r\n          } else {\r\n            intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\r\n          }\r\n        }\r\n        else {\r\n          if (response.data[\"rtn\"]) {\r\n            toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n          }\r\n\r\n        }\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response.status === 500) {\r\n          toast.error(error.message);\r\n        } else {\r\n          toast.warn(error.response.data);\r\n        }\r\n      });\r\n  }\r\n}\r\n\r\nexport function filterTransactionList(filterValue, filterParam, filteredListName,param) {\r\n  return function (dispatch) {\r\n    let masterData = filterParam.masterData;\r\n    filteredListName = filteredListName || \"searchedData\"\r\n    let primaryKeyValue = 0;\r\n    let searchedData = undefined;\r\n    let selectedData = []\r\n    filterParam.childRefs && filterParam.childRefs.map(childref => {\r\n      if (childref.ref !== undefined && childref.ref.current !== null) {\r\n        childref.ref.current.value = \"\";\r\n        masterData[childref.childFilteredListName] = undefined\r\n      }\r\n      return null;\r\n    })\r\n    if (filterValue === \"\") {\r\n      if (masterData[filterParam.inputListName] && masterData[filterParam.inputListName].length > 0) {\r\n        primaryKeyValue = masterData[filterParam.inputListName][0][filterParam.primaryKeyField];\r\n        selectedData.push(masterData[filterParam.inputListName][0])\r\n      }\r\n    }\r\n    else {\r\n      if (masterData[filterParam.inputListName]) {\r\n        searchedData = searchData(filterValue, masterData[filterParam.inputListName], filterParam.searchFieldList || []);\r\n      } else {\r\n        searchedData = []\r\n      }\r\n\r\n      if (searchedData.length > 0) {\r\n        primaryKeyValue = searchedData[0][filterParam.primaryKeyField];\r\n        selectedData.push(searchedData[0])\r\n      }\r\n    }\r\n\r\n    if (primaryKeyValue !== 0 && !filterParam.isService) {\r\n      primaryKeyValue = filterParam.isSingleSelect ? primaryKeyValue : String(primaryKeyValue)\r\n      dispatch(initRequest(true));\r\n      return rsapi.post(filterParam.fetchUrl, { ...filterParam.fecthInputObject, [filterParam.primaryKeyField]: primaryKeyValue })\r\n        .then(response => {\r\n          const dataState = {\r\n            skip: 0,\r\n            take: 10\r\n          }\r\n          masterData[filteredListName] = searchedData;\r\n          masterData[filterParam.selectedObject] = selectedData\r\n\r\n          // ALPD-4130 for Addition Filter Config Data Clear ATE-241\r\n          if(filterParam.primaryKeyField && filterParam.primaryKeyField === \"npreregno\"){\r\n          masterData[\"kendoFilterList\"]= undefined;\r\n          }\r\n          masterData = { ...masterData, ...response.data };\r\n          if (filterParam.isSortable) {\r\n            sortData(masterData[filterParam.sortList], 'descending', filterParam.sortValue);\r\n          }\r\n          if (filterParam.isMultiSort) {\r\n            filterParam.multiSortData.forEach(item => {\r\n              sortData(masterData[item.list], 'descending', item.pkey);\r\n            })\r\n          }\r\n          dispatch({\r\n            type: DEFAULT_RETURN, payload: {\r\n              masterData, loading: false,\r\n              // skip: 0, take: 10, testskip: 0, testtake: 10,dataState \r\n              skip: filterParam.skip, take: filterParam.take,\r\n              sampleskip : filterParam.sampleskip,\r\n              sampletake : filterParam.sampletake,\r\n              subsampleskip: filterParam.subsampleskip, subsampletake: filterParam.subsampletake,\r\n              testskip: filterParam.testskip, testtake: filterParam.testtake,\r\n              dataState,\r\n              // filterColumnActive:true,\r\n            }\r\n          });\r\n        })\r\n        .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n            toast.error(intl.formatMessage({ id: error.message }));\r\n          }\r\n          else {\r\n            toast.warn(intl.formatMessage({ id: error.response.data }));\r\n          }\r\n        })\r\n    }\r\n    else {\r\n      masterData[filterParam.selectedObject] =  !filterParam.isService ?undefined:searchedData;\r\n      masterData[filteredListName] =  !filterParam.isService?[]:searchedData;\r\n      \r\n      filterParam.changeList && filterParam.changeList.map(name => masterData[name] = [])\r\n      param && param.map(item=>masterData[item]=[])\r\n      // Object.keys(masterData).forEach(item=> {\r\n      //   if (item !== filterParam.inputListName && item !== filterParam.selectedObject \r\n      //     && filterParam.unchangeList && filterParam.unchangeList.indexOf(item) ===-1)\r\n      //       masterData[item] = [];\r\n      //   })   \r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n          masterData, operation: null, modalName: undefined, \r\n          // |ilterColumnActive:true,\r\n          loading: false\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function postCRUDOrganiseTransSearch(postParamList, respObject) {\r\n  return function (dispatch) {\r\n    let masterData = respObject.masterData;\r\n    postParamList && Array.isArray(postParamList) && postParamList.map((postParam, index) => {\r\n      if (postParam.clearFilter === 'yes') {\r\n\r\n        if (postParam.searchRef.current) {\r\n          postParam.searchRef.current.value = \"\";\r\n        }\r\n        masterData[postParam.filteredListName] = undefined;\r\n        postParam.childRefs && postParam.childRefs.map(childref => {\r\n          if (childref.ref !== undefined && childref.ref.current !== null) {\r\n            childref.ref.current.value = \"\";\r\n            masterData[childref.childFilteredListName] = undefined\r\n          }\r\n          return null;\r\n        })\r\n\r\n      }\r\n      if (Object.keys(masterData).indexOf(postParam.filteredListName) !== -1 && masterData[postParam.filteredListName] !== undefined) {\r\n\r\n        if (postParam.clearFilter === 'check') {\r\n          if (masterData[postParam.filteredListName] !== undefined) {\r\n            const temp = masterData[postParam.filteredListName].filter(item => !Array.isArray(postParam.primaryKeyValue) ? postParam.primaryKeyValue : postParam.primaryKeyValue.includes(item[postParam.primaryKeyField]));\r\n            masterData[postParam.filteredListName] = temp;\r\n\r\n            if (masterData[postParam.filteredListName].length > 0) {\r\n              return rsapi.post(postParam.fetchUrl, { ...postParam.fecthInputObject.fecthInputObject, [postParam.primaryKeyField]: String(respObject.masterData[postParam.filteredListName][0][postParam.primaryKeyField]) })\r\n                .then(response => {\r\n                  masterData = { ...masterData, ...response.data };\r\n                })\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          if (masterData[postParam.filteredListName] !== undefined) {\r\n            masterData[postParam.filteredListName] = replaceUpdatedObject(masterData[postParam.updatedListname], masterData[postParam.filteredListName], postParam.primaryKeyField)\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    })\r\n    //sortData(masterData);\r\n    dispatch({ type: DEFAULT_RETURN, payload: { ...respObject, masterData } })\r\n  }\r\n}\r\n\r\nexport function showUnderDevelopment() {\r\n  return function (dispatch) {\r\n    toast.info(intl.formatMessage({ id: \"IDS_UNDERDEVELOPMENT\" }));\r\n  }\r\n}\r\n\r\n//Fetch record when clicking add button in Type3Component\r\n// export function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList,IntegrationSettings) {\r\n//   return function (dispatch) {\r\n\r\n//     dispatch(initRequest(true));\r\n//     let urlArray = [];\r\n//     extractedColumnList.map(item=>{\r\n//       if(item.elnget){\r\n//         //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//         urlArray.push(rsapi.post(IntegrationSettings[0].slinkname+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//       }\r\n//       else{\r\n//         urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { userinfo: userInfo }))\r\n//       }\r\n\r\n//     }\r\n\r\n//       )\r\n\r\n//           Axios.all(urlArray)\r\n//               .then(response => {\r\n//                 let ComboFieldData = [];\r\n//                 let dataList = [];\r\n\r\n//                     extractedColumnList.map((item, index)=> {\r\n//                       if(item.ndesigncomponentcode == designComponents.COMBOBOX){\r\n//                         ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n//                                 item.dataField, undefined, undefined, undefined);\r\n//                            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n//                       }\r\n//     extractedColumnList.map(item =>\r\n//       urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\r\n//     )\r\n\r\n//     Axios.all(urlArray)\r\n//       .then(response => {\r\n//         let ComboFieldData = [];\r\n//         let dataList = [];\r\n\r\n//         extractedColumnList.map((item, index) => {\r\n//           if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n//             ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n//               item.dataField, undefined, undefined, undefined);\r\n//             dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n//           }\r\n\r\n//         });\r\n\r\n//         dispatch({\r\n//           type: DEFAULT_RETURN,\r\n//           payload: {\r\n//             dataList,\r\n//             operation,\r\n//             screenName: inputParam.displayName,\r\n//             openModal: true,\r\n//             ncontrolCode, loading: false\r\n//           }\r\n//         })\r\n//       })\r\n//       .catch(error => {\r\n//         dispatch(initRequest(false));\r\n//         if (error.response.status === 500) {\r\n//           toast.error(error.message);\r\n//         } else {\r\n//           toast.warn(intl.formatMessage({\r\n//             id: error.response.data\r\n//           }));\r\n//         }\r\n//       })\r\n//   }\r\n// }\r\n\r\n\r\n//Fetch record when clicking add button in Type3Component\r\n\r\nexport function onComboLoad(operation, userInfo, inputParam, ncontrolCode, extractedColumnList, IntegrationSettings) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n    extractedColumnList.map(item => {\r\n      if(item.ndesigncomponentcode !== designComponents.CHECKBOX){\r\n      if (item.elnget) {\r\n        //urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n        urlArray.push(rsapi.post(IntegrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}))\r\n      }\r\n      else {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { userinfo: userInfo }))\r\n      }\r\n\r\n    }\r\n    }\r\n    )\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecord={};\r\n        extractedColumnList.map((item, index) => {\r\n          if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n            ComboFieldData = constructOptionList(item.objectValue === null ? response[index].data || [] : response[index].data[item.objectValue], item.foreignDataField,\r\n              item.dataField, undefined, undefined, undefined);\r\n            dataList[item.dataField] = ComboFieldData.get(\"OptionList\");\r\n          }else if(item.ndesigncomponentcode === designComponents.CHECKBOX  && item.defaultvalue){\r\n            selectedRecord[item.controlName]= transactionStatus.YES;\r\n\r\n          }\r\n        });\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            dataList,\r\n            operation,\r\n            screenName: inputParam.displayName,\r\n            openModal: true,\r\n            ncontrolCode, loading: false,selectedRecord\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response !== undefined && error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else if (error.response === undefined) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({\r\n            id: error.response.data\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\n//Fetch record when clicking edit button in Type3Component\r\nexport const fetchRecordCombo = (fetchRecordParam) => {\r\n  return (dispatch) => {\r\n\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n    const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n    urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\r\n    fetchRecordParam.extractedColumnList.map(item => {\r\n\r\n      if (item.elnget) {\r\n        urlArray.push(rsapi.post(fetchRecordParam.integrationSettings[0].slinkname + \"/\" + item.classUrl + \"/\" + item.methodUrl, {}))\r\n      }\r\n      else if (item.classUrl && item.methodUrl) {\r\n\r\n        if (item.parentPrimaryField && item.parentPrimaryField !== null) {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl,\r\n            {\r\n              [item.foreignDataField]: fetchRecordParam.editRow[item.foreignDataField],\r\n              [item.parentPrimaryField]: fetchRecordParam.editRow[item.parentPrimaryField] || undefined,\r\n              \"userinfo\": fetchRecordParam.userInfo\r\n            }))\r\n        }\r\n        else {\r\n          urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {\r\n            [item.foreignDataField]:\r\n              fetchRecordParam.editRow[item.foreignDataField], \"userinfo\": fetchRecordParam.userInfo\r\n          }))\r\n        }\r\n\r\n        // urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, {[item.parentPrimaryField]: fetchRecordParam.editRow.nprojecttypecode , \"userinfo\": fetchRecordParam.userInfo}))\r\n      }\r\n    });\r\n\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecordData = { ...response[0].data };\r\n        let responseData = [...response];\r\n        let extractedColumnData = [];\r\n        responseData.splice(0, 1);\r\n\r\n        fetchRecordParam.extractedColumnList.map((item) => {\r\n          if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n            extractedColumnData.push(item);\r\n            if (!item.hideNARecord || selectedRecordData[item.tableDataField]!==-1) {\r\n              selectedRecordData[item.dataField] = {\r\n                value: selectedRecordData[item.foreignDataField],\r\n                label: selectedRecordData[item.dataField]\r\n              }\r\n            }\r\n          }\r\n          else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n            selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n          }\r\n        })\r\n\r\n        extractedColumnData.map((field, index) => {\r\n          responseData.map((item, indexValue) => {\r\n            if (index === indexValue) {\r\n              if ((field.classUrl === 'limselnusermapping' && field.methodUrl === 'getLimsUsers') || (field.classUrl === 'limselnsitemapping' && field.methodUrl === 'getLimsSite')) {\r\n                responseData[index].data.push(response[0].data);\r\n              }\r\n              ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n                field.dataField, undefined, undefined, undefined);\r\n              dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n            }\r\n          })\r\n        });\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            selectedRecord: selectedRecordData,\r\n            screenName: fetchRecordParam.screenName,\r\n            operation: fetchRecordParam.operation,\r\n            openModal: true,\r\n            ncontrolCode: fetchRecordParam.ncontrolCode,\r\n            loading: false,\r\n            selectedId: fetchRecordParam.primaryKeyValue,\r\n            dataList\r\n          }\r\n        });\r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n        if (error.response !== undefined && error.response.status === 500) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else if (error.response === undefined) {\r\n          toast.error(intl.formatMessage({ id: error.message }));\r\n        } else {\r\n          toast.warn(intl.formatMessage({ id: error.response.data }));\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n//Fetch record when clicking edit button in Type3Component\r\n// export const fetchRecordCombo = (fetchRecordParam) => {\r\n//   return (dispatch) => {\r\n\r\n//     dispatch(initRequest(true));\r\n//     let urlArray = [];\r\n//     const url = fetchRecordParam.inputParam.classUrl + \"/getActive\" + fetchRecordParam.inputParam.methodUrl + \"ById\";\r\n//     urlArray.push(rsapi.post(url, { [fetchRecordParam.primaryKeyField]: fetchRecordParam.primaryKeyValue, \"userinfo\": fetchRecordParam.userInfo }));\r\n//     fetchRecordParam.extractedColumnList.map(item => {\r\n//       if(item.classUrl && item.methodUrl){\r\n\r\n//         if(item.elnget){\r\n//           urlArray.push(rsapi.post(\"https://logilabelntest.azurewebsites.net\"+\"/\"+item.classUrl+\"/\"+item.methodUrl,{}))\r\n//         }\r\n//         else{\r\n//           urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\r\n//         }\r\n//         //urlArray.push(rsapi.post(item.classUrl+\"/\"+item.methodUrl, { \"userinfo\" : fetchRecordParam.userInfo }))\r\n//       if (item.classUrl && item.methodUrl) {\r\n//         urlArray.push(rsapi.post(item.classUrl + \"/\" + item.methodUrl, { \"userinfo\": fetchRecordParam.userInfo }))\r\n//       }\r\n//     });\r\n\r\n//     Axios.all(urlArray)\r\n//       .then(response => {\r\n\r\n//       fetchRecordParam.extractedColumnList.map((item) => {\r\n//         if(item.ndesigncomponentcode === designComponents.COMBOBOX){\r\n//           extractedColumnData.push(item);\r\n//           selectedRecordData[item.dataField] = {\r\n//             value:selectedRecordData[item.foreignDataField],\r\n//             label:selectedRecordData[item.dataField]\r\n//           }                      \r\n//         }\r\n//         else if(item.ndesigncomponentcode === designComponents.DATEPICKER){\r\n//           selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n//         }\r\n//       })\r\n\r\n//       extractedColumnData.map((field, index) => {\r\n//         responseData.map((item, indexValue) => {\r\n//           if(index === indexValue){\r\n//             if(field.classUrl==='limselnusermapping'&&field.methodUrl==='getLimsUsers'){\r\n//             responseData[index].data.push(response[0].data);}\r\n//             ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n//               field.dataField, undefined, undefined, undefined);\r\n//          dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n//         let ComboFieldData = [];\r\n//         let dataList = [];\r\n//         let selectedRecordData = { ...response[0].data };\r\n//         let responseData = [...response];\r\n//         let extractedColumnData = [];\r\n//         responseData.splice(0, 1);\r\n\r\n//         fetchRecordParam.extractedColumnList.map((item) => {\r\n//           if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n//             extractedColumnData.push(item);\r\n//             selectedRecordData[item.dataField] = {\r\n//               value: selectedRecordData[item.foreignDataField],\r\n//               label: selectedRecordData[item.dataField]\r\n//             }\r\n//           }\r\n//           else if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n//             selectedRecordData[item.dataField] = rearrangeDateFormat(fetchRecordParam.userInfo, selectedRecordData[item.dataField]);\r\n//           }\r\n//         })\r\n\r\n//         extractedColumnData.map((field, index) => {\r\n//           responseData.map((item, indexValue) => {\r\n//             if (index === indexValue) {\r\n//               ComboFieldData = constructOptionList(field.objectValue === null ? responseData[index].data || [] : responseData[index].data[field.objectValue], field.foreignDataField,\r\n//                 field.dataField, undefined, undefined, undefined);\r\n//               dataList[field.dataField] = ComboFieldData.get(\"OptionList\");\r\n//             }\r\n//           })\r\n//         });\r\n\r\n//         dispatch({\r\n//           type: DEFAULT_RETURN,\r\n//           payload: {\r\n//             selectedRecord: selectedRecordData,\r\n//             screenName: fetchRecordParam.screenName,\r\n//             operation: fetchRecordParam.operation,\r\n//             openModal: true,\r\n//             ncontrolCode: fetchRecordParam.ncontrolCode,\r\n//             loading: false,\r\n//             selectedId: fetchRecordParam.primaryKeyValue,\r\n//             dataList\r\n//           }\r\n//         });\r\n//       })\r\n//       .catch(error => {\r\n//         dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n//         if (error.response.status === 500) {\r\n//           toast.error(intl.formatMessage({ id: error.message }));\r\n//         } else {\r\n//           toast.warn(intl.formatMessage({ id: error.response.data }));\r\n//         }\r\n//       })\r\n//   }\r\n// }\r\nexport function onServiceLoad(userInfo, inputParam, ncontrolCode, comboColumnField, primarykeyvalue, inputData) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let urlArray = [];\r\n\r\n\r\n    comboColumnField.map(item => {\r\n        urlArray.push(rsapi.post(item.classUrl + \"/\" + item.onChangeUrl, {\r\n          userinfo: userInfo,\r\n          [item.tableDataField]: primarykeyvalue[item.tableDataField], \"parentPrimaryField\": inputData.selectedRecord[item.parentPrimaryField]\r\n        }))\r\n    }  //dependentParentPrimaryField into parentPrimaryField\r\n\r\n    )\r\n    Axios.all(urlArray)\r\n      .then(response => {\r\n\r\n        let ComboFieldData = [];\r\n        let dataList = [];\r\n        let selectedRecord = { ...inputData.selectedRecord };\r\n        comboColumnField.map((item, index) => {\r\n          if (item.ndesigncomponentcode == designComponents.COMBOBOX) {\r\n            ComboFieldData = constructOptionList(item.childObjectValue === null ? response[index].data || [] : response[index].data[item.childObjectValue], item.childPrimaryField,\r\n              item.childdataField, undefined, undefined, undefined);\r\n            dataList[item.childdataField] = ComboFieldData.get(\"OptionList\");\r\n            selectedRecord[item.childdataField] = undefined;\r\n\r\n          }\r\n        });\r\n\r\n        dataList = { ...inputData.dataList, ...dataList }\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            dataList,\r\n            //  operation,\r\n            screenName: inputParam.displayName,\r\n            openModal: true,\r\n            ncontrolCode, loading: false,\r\n            selectedRecord\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\nexport function dynamicFileDownload(filedata) {\r\n  return (dispatch) => {\r\n    if (filedata.viewName === 'InfoView') {\r\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: {\r\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_Sample']],\r\n              npreregno: filedata.npreregno,\r\n              sarno: filedata.sarno,\r\n              sfilename: filedata[filedata.field[2]]\r\n            },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: \"registration\",\r\n          operation: \"view\",\r\n          methodUrl: \"RegistrationFile\",\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    } else if (filedata.viewName === 'subSample') {\r\n      if (filedata && filedata[filedata.field[2] + ['_ssystemfilename_subSample']] !== undefined && filedata[filedata.field[2]] !== \"\") {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: {\r\n              ssystemfilename: filedata[filedata.field[2] + ['_ssystemfilename_subSample']],\r\n              npreregno: filedata.npreregno,\r\n              ntransactionsamplecode: filedata.ntransactionsamplecode,\r\n              ssamplearno: filedata.ssamplearno,\r\n              sfilename: filedata[filedata.field[2]],\r\n              sarno: filedata.sarno\r\n            },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: \"registration\",\r\n          operation: \"view\",\r\n          methodUrl: \"RegistrationSubSampleFile\",\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    } else {\r\n      let isFileupload;\r\n      if (filedata && filedata[filedata['dataField'] + ['_ssystemfilename']] !== undefined && filedata[filedata['dataField']] !== \"\") {\r\n        isFileupload = true;\r\n      }\r\n      if (filedata && filedata[filedata.dataField + ['_ssystemfilename_Sample']] !== undefined && filedata[filedata.dataField] !== \"\") {\r\n        isFileupload = true;\r\n      }\r\n      if (isFileupload) {\r\n        const inputParam = {\r\n          inputData: {\r\n            viewFile: filedata.screenName === 'SampleRegistration' ?\r\n              {\r\n                ssystemfilename: filedata[filedata.dataField + ['_ssystemfilename_Sample']],\r\n                npreregno: filedata.npreregno,\r\n                sarno: filedata.sarno,\r\n                sfilename: filedata[filedata.dataField]\r\n              } :\r\n              {\r\n                ssystemfilename: filedata[filedata['dataField'] + ['_ssystemfilename']],\r\n                ndynamicmastercode: filedata.ndynamicmastercode,\r\n                ndesigntemplatemappingcode: filedata.ndesigntemplatemappingcode,\r\n                sfieldname: filedata.dataField,\r\n                sfilename: filedata[filedata.dataField]\r\n              },\r\n            userinfo: filedata.userInfo\r\n          },\r\n          classUrl: filedata.classUrl,\r\n          operation: \"view\",\r\n          methodUrl: filedata.methodUrl,\r\n          //screenName: filedata.displayName\r\n        }\r\n        dispatch(viewAttachment(inputParam));\r\n      } else {\r\n        toast.warn(intl.formatMessage({ id: \"IDS_FILENOTUPLOADED\" }))\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function modalSave(inputParam, masterData) {\r\n\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, inputParam.inputData).then(response => {\r\n\r\n      masterData = {\r\n        ...masterData,\r\n        ...response.data\r\n      }\r\n      if (inputParam.postParam) {\r\n\r\n        const foundIndex = masterData[inputParam.postParam.inputListName].findIndex(\r\n\r\n          x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n\r\n        );\r\n\r\n        masterData[inputParam.postParam.inputListName][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n\r\n        if (masterData[\"searchedData\"] !== undefined) {\r\n\r\n          const foundIndex = masterData[\"searchedData\"].findIndex(\r\n\r\n            x => x[inputParam.postParam.primaryKeyField] === masterData[inputParam.postParam.selectedObject][inputParam.postParam.primaryKeyField]\r\n\r\n          );\r\n          masterData[\"searchedData\"][foundIndex] = masterData[inputParam.postParam.selectedObject];\r\n        }\r\n        // sortData(masterData);\r\n      }\r\n      masterData = sortData(masterData);\r\n      dispatch({\r\n        type: DEFAULT_RETURN, payload: {\r\n\t\t//ALPD-4519-Vignesh R(06-08-2024)\r\n          loadEsign: false,\r\n          loading: false,\r\n          masterData,\r\n          modalShow: inputParam.modalShow,\r\n          openModal: false,\r\n          modalTitle: undefined,\r\n          operation: inputParam.operation\r\n        }\r\n      }\r\n      )\r\n    })\r\n      .catch(error => {\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            loadEsign: false,\r\n            loading: false,\r\n            modalShow: true,\r\n            openModal: false\r\n          }\r\n        })\r\n\r\n        if (error.response.status === 500) {\r\n          toast.error(error.message);\r\n        }\r\n        else {\r\n          toast.warn(error.response.data);\r\n        }\r\n      })\r\n  }\r\n\r\n}\r\n\r\nexport function openBarcodeModal(selectedMaster, ncontrolCode, userinfo) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n\r\n\r\n    let urlArray = [];\r\n    const getPrinter = rsapi.post(\"barcode/getPrinter\", userinfo);\r\n    const getControlBasedBarcode = rsapi.post(\"barcodeconfiguration/checkConfiguration\", { selectedMaster, ncontrolCode, userinfo, Multiselect:Array.isArray(selectedMaster) });\r\n    urlArray = [getPrinter, getControlBasedBarcode]\r\n    Axios.all(urlArray).then(response => {\r\n\r\n      const printer = constructOptionList(response[0].data || [], \"sprintername\",\r\n        \"sprintername\", undefined, undefined, true).get(\"OptionList\");\r\n\r\n      const barcode = constructOptionList(response[1].data.Barcode || [], \"sbarcodename\",\r\n        \"sbarcodename\", undefined, undefined, true).get(\"OptionList\");\r\n\r\n       const selectedRecord={}\r\n\r\n       if(printer.length>0)\r\n       selectedRecord['sprintername']=printer[0];\r\n\r\n        if(barcode.length>0)selectedRecord['nbarcode']=barcode[0];\r\n        selectedRecord['nbarcodeprint']=1\r\n       \r\n\r\n      dispatch({\r\n        type: DEFAULT_RETURN,\r\n        payload: {\r\n          openModal: true,\r\n          operation: \"barcode\",\r\n          BarcodeList: barcode,\r\n          Printer: printer,\r\n          loading: false,\r\n          ncontrolcode: ncontrolCode,\r\n          nbarcodeprint: response[1].data.nbarcodeprint,\r\n          barcodeSelectedRecord: selectedMaster,\r\n          selectedRecord:selectedRecord\r\n        }\r\n      })\r\n    })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\nexport function barcodeGeneration(selectedMaster, ncontrolCode, userinfo, selectedRecord) {\r\n  return function (dispatch) {\r\n    dispatch(initRequest(true));\r\n    let list = []\r\n    if (Array.isArray(selectedMaster)) {\r\n      list = selectedMaster\r\n    } else {\r\n      list.push(selectedMaster)\r\n    }\r\n    rsapi.post(\"barcodeconfiguration/barcodeGeneration\", {\r\n      selectedMaster: list, ncontrolCode,\r\n      userinfo, nbarcode: selectedRecord.nbarcode.item.nbarcode, sprintername: selectedRecord.sprintername.value,\r\n      nbarcodeprintcount: selectedRecord.nbarcodeprintcount ? selectedRecord.nbarcodeprintcount : 1\r\n    })\r\n      .then(response => {\r\n        toast.info(response.data)\r\n\r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            openModal: false,\r\n            operation: \"barcode\",\r\n            loading: false,\r\n            selectedRecord: {},\r\n            barcodeSelectedRecord: undefined\r\n          }\r\n        })\r\n      })\r\n\r\n      .catch(error => {\r\n\r\n        dispatch(initRequest(false));\r\n\r\n        if (error.response.status === 500) {\r\n\r\n          toast.error(error.message);\r\n\r\n        } else {\r\n\r\n          toast.warn(intl.formatMessage({\r\n\r\n            id: error.response.data\r\n\r\n          }));\r\n\r\n        }\r\n\r\n      })\r\n\r\n  }\r\n\r\n}\r\n\r\nexport const syncAction = (inputParam) => {\r\n  return (dispatch) => {\r\n    dispatch(initRequest(true));\r\n    return rsapi.post(inputParam.classUrl + \"/\"+inputParam.operation+ inputParam.methodUrl, inputParam.inputData)\r\n      .then(response => {       \r\n \r\n        let data = response.data;\r\n        sortData(data);\r\n \r\n        const updateInfo = {\r\n          typeName: DEFAULT_RETURN,\r\n          data: { masterData: [],operation:inputParam.operation, organisation: undefined, }\r\n        }\r\n        dispatch(updateStore(updateInfo))\r\n \r\n       \r\n \r\n        dispatch({\r\n          type: DEFAULT_RETURN,\r\n          payload: {\r\n            masterData: data,\r\n            operation:inputParam.operation,\r\n            activeTestTab: data.activeTestTab,\r\n            activeTestKey: data.activeTestKey,\r\n            activeBCTab: data.activeBCTab,\r\n            inputParam: inputParam,\r\n            masterStatus: \"\",\r\n            userInfo: inputParam.inputData.userinfo,\r\n            loading: false, \r\n            openModal :false,\r\n            selectedId: null,\r\n            selectedRecord: {},\r\n            dataState: undefined,\r\n            organisation: {\r\n              selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n              primaryKeyValue: data.AddedChildPrimaryKey\r\n            },\r\n            displayName: inputParam.displayName,\r\n            reportFilePath: undefined,\r\n            skip: 0, take: undefined,\r\n            testskip: 0,\r\n            testtake: inputParam.inputData.settings ? inputParam.inputData.settings[12] : 10,           \r\n          }\r\n        })\r\n \r\n      })\r\n      .catch(error => {\r\n        dispatch({ type: DEFAULT_RETURN, payload: { loading: false,openModal:false,loadEsign:false } })\r\n        if (error.response.status === 503) {         \r\n          toast.warn(intl.formatMessage({id:\"IDS_SYNCUNABLEOATTEMPT\"}));            \r\n        }else if(error.response.status === 500){\r\n          toast.error(error.message);\r\n        }else {\r\n          toast.warn(error.response.data);\r\n        }\r\n       \r\n      })\r\n \r\n  };\r\n};\r\n\r\n\r\n//export const generateControlBasedReport = (inputParam) => {\r\n  export const generateControlBasedReport = (ncontrolCode, selectedRecord, Login, primaryKeyField, primaryKeyValue) => {\r\n    return (dispatch) => {\r\n      dispatch(initRequest(true));\r\n      const inputParam = {\r\n        primaryKeyField: primaryKeyField,\r\n        nformcode: Login.userInfo.nformcode,\r\n        sreportlink: Login.reportSettings[15],\r\n        smrttemplatelink: Login.reportSettings[16],\r\n        ncontrolcode: ncontrolCode,\r\n        userinfo: Login.userInfo,\r\n        selectedRecord: selectedRecord,\r\n        ntranscode: selectedRecord.ntransactionstatus,\r\n        primaryKeyValue: primaryKeyValue,\r\n        nreporttypecode:REPORTTYPE.CONTROLBASED\r\n      }\r\n      rsapi.post(\"controlbasedreport/controlBasedReport\", {\r\n  \r\n        ...inputParam\r\n      })\r\n        .then(response => {\r\n  \r\n          if (response.data.SelectedViewReportMaster && response.data.SelectedViewReportMaster.sreportformatdetail === 'viewer') {\r\n  \r\n            viewReportDetailWithParametersReports(response.data, inputParam);\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                loading: false,\r\n                loadEsign: false,\r\n                openModal: false,\r\n                showConfirmAlert: false\r\n              }\r\n            })\r\n          } else {\r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                loading: false,\r\n                loadEsign: false,\r\n                openModal: false,\r\n                showConfirmAlert: false\r\n              }\r\n            })\r\n            document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n            document.getElementById(\"download_data\").click();\r\n          }\r\n        }).catch(error => {\r\n          dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n              loading: false\r\n            }\r\n          })\r\n          if (error.response.status === 500) {\r\n            toast.error(error.message);\r\n          } else {\r\n            toast.warn(error.response.data);\r\n          }\r\n        })\r\n    }\r\n  }\r\n  \r\n    export const dynamicExportTemplate = (inputParam) => {\r\n      return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"exportimport/exportTemplate\", inputParam)\r\n        .then(response => {\r\n          let value = \"\";\r\n          if (response.data.rtn === \"Success\") {\r\n              value = response.data[\"exportFileViewUrl\"];\r\n              const win = window.open(value);\r\n              if (win) {\r\n                  win.focus();\r\n              } else {\r\n                  toast.warn(intl.formatMessage(\"IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE\"));\r\n              }\r\n          } else {\r\n              if (response.data.rtn) {\r\n                  toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n              }\r\n          }\r\n          dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                  loading: false,\r\n                  loadEsign: false, openModal: false\r\n              }\r\n          })\r\n      })\r\n      .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n              toast.error(error.message);\r\n          }\r\n          else {\r\n              toast.warn(error.response.data);\r\n          }\r\n      })\r\n        }         \r\n    };\r\n  \r\n    export function dynamicImportTemplate(inputParam, masterData, modalName, defaultInput,ConfirmMessage) {\r\n      return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let requestUrl = '';\r\n        if (inputParam.isFileupload && inputParam.isFileupload!=='undefined') {\r\n          const formData = inputParam.formData;\r\n          formData.append(\"userinfo\", JSON.stringify(inputParam.inputData.userinfo));\r\n          requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, formData);\r\n        } else {\r\n          requestUrl = rsapi.post(inputParam.classUrl + \"/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam.inputData });\r\n        }\r\n        return requestUrl\r\n          .then(response => {\r\n          if (response.data.rtn  === \"Success\") {\r\n            let inputParams={\r\n              classUrl:response.data.classUrl ,methodUrl:response.data.methodUrl ,inputData:{'userinfo':inputParam.inputData.userinfo},\r\n              displayName:inputParam.displayName\r\n            }\r\n            // dispatch(callService(inputParams))\r\n    \r\n            let data = response.data.ResponseBody;\r\n            sortData(data);\r\n    \r\n            const updateInfo = {\r\n              typeName: DEFAULT_RETURN,\r\n              data: { masterData: [], organisation: undefined, }\r\n            }\r\n            dispatch(updateStore(updateInfo))\r\n    \r\n    \r\n            dispatch({\r\n              type: DEFAULT_RETURN,\r\n              payload: {\r\n                openExcelModal: false,\r\n                masterData: data,\r\n                activeTestTab: data.activeTestTab,\r\n                activeTestKey: data.activeTestKey,\r\n                activeBCTab: data.activeBCTab,\r\n                inputParam: inputParams,\r\n                masterStatus: \"\",\r\n                userInfo: inputParam.inputData.userinfo,\r\n                loading: false, selectedId: null, selectedRecord: {},\r\n                dataState: undefined,\r\n                organisation: {\r\n                  selectedNode: data.SelectedNode, selectedNodeName: data.SelectedNodeName,\r\n                  primaryKeyValue: data.AddedChildPrimaryKey\r\n                },\r\n                displayName: inputParams.displayName,\r\n                reportFilePath: undefined,\r\n                skip: 0, take: undefined,\r\n                testskip: 0,\r\n                //testtake: 5,\r\n                testtake: inputParams.inputData.settings ? inputParams.inputData.settings[12] : 10,\r\n                //  key:inputParam.key!==undefined?inputParam.key:\"\"\r\n              }\r\n            })\r\n          } \r\n          dispatch({\r\n              type: DEFAULT_RETURN, payload: {\r\n                  loading: false,\r\n                  loadEsign: false, openExcelModal: false\r\n              }\r\n          })\r\n      })\r\n      .catch(error => {\r\n          dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n          if (error.response.status === 500) {\r\n              toast.error(error.message);\r\n          }\r\n          else {\r\n              toast.warn(error.response.data);\r\n          }\r\n      })\r\n        }         \r\n    };"]},"metadata":{},"sourceType":"module"}