{"ast":null,"code":"var _jsxFileName = \"D:\\\\Postgres_workingFolder\\\\QuaLISWeb\\\\src\\\\components\\\\App.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createIntl, createIntlCache, IntlProvider } from 'react-intl';\nimport { Switch, Route, Redirect, withRouter } from 'react-router';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport messages_en from '../assets/translations/en.json';\nimport messages_de from '../assets/translations/de.json';\nimport './App.css';\nimport Layout from './layout/layout.component.jsx';\nimport Login from '../pages/Login/Login.jsx';\nimport rsapi from '../rsapi';\nimport PortalApp from '../PortalApp';\nconst messages = {\n  'en-US': messages_en,\n  'ko-KR': messages_de\n}; // This is optional but highly recommended\n// since it prevents memory leak\n\nconst cache = createIntlCache(); // Call it once in your app. At the root of your app is the best place\n\ntoast.configure(); // Create the `intl` object\n\nexport const intl = createIntl({\n  // Locale of the application\n  locale: 'en-US',\n  // Locale of the fallback defaultMessage\n  defaultLocale: 'en-US',\n  messages: messages['en-US']\n}, cache);\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEndConcert = async () => {// Write a code to handle Leave button clicked\n      // await fetcher({\n      //   url: endConcert(concert.id),\n      //   method: 'PUT'\n      // })\n    };\n\n    this.handleUnload = this.handleUnload.bind(this);\n    this.handleEndConcert = this.handleEndConcert.bind(this); // Store the previous pathname and search strings\n\n    this.currentPathname = null;\n    this.currentSearch = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener('beforeunload', this.handleUnload);\n    window.addEventListener('unload', this.handleEndConcert);\n    const {\n      history\n    } = this.props;\n    history.listen((newLocation, action) => {\n      if (action === \"PUSH\") {\n        if (newLocation.pathname !== this.currentPathname || newLocation.search !== this.currentSearch) {\n          // Save new location\n          this.currentPathname = newLocation.pathname;\n          this.currentSearch = newLocation.search; // Clone location object and push it to history\n\n          history.push({\n            pathname: newLocation.pathname,\n            search: newLocation.search\n          });\n        }\n      } else {\n        // Send user back if they try to navigate back\n        history.go(1);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.handleUnload);\n    window.removeEventListener('unload', this.handleEndConcert);\n    this.handleEndConcert();\n  }\n\n  handleUnload(e) {\n    const message = \"\\o/\";\n\n    if (this.props.Login.userInfo.susername && this.props.Login.userInfo.susername !== \"\") {\n      let uRL = \"\";\n      let inputData = [];\n      uRL = 'login/insertAuditAction';\n      inputData = {\n        userinfo: this.props.Login.userInfo,\n        scomments: `User Name:${this.props.Login.userInfo.susername}, Login ID:${this.props.Login.userInfo.sloginid}`,\n        sauditaction: \"IDS_IMPROPERLOGOUT\",\n        nFlag: 2\n      };\n      rsapi.post(uRL, inputData).then(response => {\n        (e || window.event).returnValue = message; //Gecko + IE\n\n        return message;\n      }).catch(error => {\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      (e || window.event).returnValue = message; //Gecko + IE\n\n      return message;\n    }\n  }\n\n  render() {\n    const {\n      language,\n      navigation\n    } = this.props.Login;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IntlProvider, {\n      locale: language,\n      messages: messages[language],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      name: \"Login\",\n      render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 69\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      name: \"Home\",\n      render: props => /*#__PURE__*/React.createElement(Layout, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 57\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Redirect, {\n      push: true,\n      exact: true,\n      to: \"/\" + navigation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }), navigation !== \"login\" && /*#__PURE__*/React.createElement(PortalApp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 39\n      }\n    })));\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(App));","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/components/App.js"],"names":["React","connect","createIntl","createIntlCache","IntlProvider","Switch","Route","Redirect","withRouter","toast","messages_en","messages_de","Layout","Login","rsapi","PortalApp","messages","cache","configure","intl","locale","defaultLocale","mapStateToProps","state","App","Component","constructor","props","handleEndConcert","handleUnload","bind","currentPathname","currentSearch","componentDidMount","window","addEventListener","history","listen","newLocation","action","pathname","search","push","go","componentWillUnmount","removeEventListener","e","message","userInfo","susername","uRL","inputData","userinfo","scomments","sloginid","sauditaction","nFlag","post","then","response","event","returnValue","catch","error","status","warn","data","render","language","navigation"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect } from 'react-redux';\nimport { createIntl, createIntlCache, IntlProvider } from 'react-intl';\nimport { Switch, Route, Redirect, withRouter } from 'react-router';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nimport messages_en from '../assets/translations/en.json';\nimport messages_de from '../assets/translations/de.json';\n\nimport './App.css';\n\nimport Layout from './layout/layout.component.jsx';\nimport Login from '../pages/Login/Login.jsx'\n import rsapi from '../rsapi';\nimport PortalApp from '../PortalApp';\n\nconst messages = {\n  'en-US': messages_en,\n  'ko-KR': messages_de\n}\n\n// This is optional but highly recommended\n// since it prevents memory leak\nconst cache = createIntlCache()\n\n// Call it once in your app. At the root of your app is the best place\ntoast.configure()\n\n// Create the `intl` object\nexport const intl = createIntl(\n  {\n    // Locale of the application\n    locale: 'en-US',\n    // Locale of the fallback defaultMessage\n    defaultLocale: 'en-US',\n    messages: messages['en-US'],\n  },\n  cache,\n)\n\nconst mapStateToProps = (state) => {\n  return {\n    Login: state.Login\n  }\n}\n\nclass App extends React.Component {\n    constructor(props) {\n      super(props);\n      this.handleUnload = this.handleUnload.bind(this);\n      this.handleEndConcert = this.handleEndConcert.bind(this);\n      // Store the previous pathname and search strings\n      this.currentPathname = null;\n      this.currentSearch = null;\n    }\n    \n    componentDidMount() {\n\n      window.addEventListener('beforeunload', this.handleUnload);\n      window.addEventListener('unload', this.handleEndConcert)\n      const { history } = this.props;\n  \n      history.listen((newLocation, action) => {\n        if (action === \"PUSH\") {\n          if (\n            newLocation.pathname !== this.currentPathname ||\n            newLocation.search !== this.currentSearch\n          ) {\n            // Save new location\n            this.currentPathname = newLocation.pathname;\n            this.currentSearch = newLocation.search;\n  \n            // Clone location object and push it to history\n            history.push({\n              pathname: newLocation.pathname,\n              search: newLocation.search\n            });\n          }\n        } else {\n          // Send user back if they try to navigate back\n          history.go(1);\n        }\n      });\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('beforeunload', this.handleUnload);\n      window.removeEventListener('unload', this.handleEndConcert)\n      this.handleEndConcert()\n    }\n\n   handleUnload(e) {\n      const message = \"\\o/\";\n      if (this.props.Login.userInfo.susername && this.props.Login.userInfo.susername !== \"\") {\n        let uRL = \"\";\n        let inputData = [];\n        uRL = 'login/insertAuditAction';\n        inputData = {\n          userinfo: this.props.Login.userInfo,\n          scomments: `User Name:${this.props.Login.userInfo.susername}, Login ID:${this.props.Login.userInfo.sloginid}`,\n          sauditaction: \"IDS_IMPROPERLOGOUT\", nFlag: 2\n        }\n\n        rsapi.post(uRL, inputData)\n          .then(response => {\n            (e || window.event).returnValue = message; //Gecko + IE\n            return message;\n          })\n          .catch(error => {\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n          })\n      } else {\n        (e || window.event).returnValue = message; //Gecko + IE\n        return message;\n      }\n    }\n\n    handleEndConcert = async () => {\n      // Write a code to handle Leave button clicked\n      // await fetcher({\n      //   url: endConcert(concert.id),\n      //   method: 'PUT'\n      // })\n    }\n\n  render() {\n\n    const { language, navigation } = this.props.Login;\n\n    return (<>\n        <IntlProvider locale={language} messages={messages[language]}>\n          <Switch>\n            <Route exact path=\"/login\" name=\"Login\" render={props=> <Login {...props} />} />\n            <Route path=\"/\" name=\"Home\" render={props=> <Layout {...props} />} /> \n          </Switch>\n          <Redirect push exact to={\"/\" + navigation} />\n          { navigation !== \"login\" && <PortalApp />}\n        </IntlProvider>\n      </>);\n  }\n}\nexport default connect(mapStateToProps)(withRouter(App));\n"]},"metadata":{},"sourceType":"module"}