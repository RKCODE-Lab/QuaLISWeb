{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Card}from'react-bootstrap';import{injectIntl}from'react-intl';//FormattedMessage,\nimport SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import{toast}from'react-toastify';import Esign from'../audittrail/Esign';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,create_UUID,Lims_JSON_stringify,replaceBackSlash}from'../../components/CommonScript';import ProjectMasterMemberTabs from'./ProjectMasterMemberTabs';import ProjectMasterFileTab from'./ProjectMasterFileTab';import{transactionStatus,attachmentType}from'../../components/Enumeration';import CustomTabs from'../../components/custom-tabs/custom-tabs.component';import AddProjectMember from\"../../pages/project/AddProjectMember\";import AddProjectMasterFile from'./AddProjectMasterFile';import{formatInputDate}from\"../../components/CommonScript\";import ProjectMasterHistory from\"../../pages/project/ProjectMasterHistory\";import ProjectMasterQuotation from\"../../pages/project/ProjectMasterQuotation\";import AddProjectQuotation from'./AddProjectQuotation';var ProjectMasterTab=/*#__PURE__*/function(_React$Component){_inherits(ProjectMasterTab,_React$Component);var _super=_createSuper(ProjectMasterTab);function ProjectMasterTab(props){var _this;_classCallCheck(this,ProjectMasterTab);_this=_super.call(this,props);_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;_this.setState({selectedRecord:selectedRecord});};_this.tabDetail=function(){var addteammembersId=_this.props.controlMap.has(\"AddTeammembers\")&&_this.props.controlMap.get(\"AddTeammembers\").ncontrolcode;var deleteteammembersId=_this.props.controlMap.has(\"DeleteTeammembers\")&&_this.props.controlMap.get(\"DeleteTeammembers\").ncontrolcode;var projectmasterAddParam={screenName:\"IDS_MEMBERS\",operation:\"create\",primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:addteammembersId};var projectmasterDeleteParam={//    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \nscreenName:\"IDS_MEMBERS\",operation:\"delete\",primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,userInfo:_this.props.userInfo,ncontrolCode:deleteteammembersId};var tabMap=new Map();tabMap.set(\"IDS_MEMBERS\",/*#__PURE__*/React.createElement(ProjectMasterMemberTabs,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,addId:addteammembersId,addParam:projectmasterAddParam,comboDataService:_this.props.getProjectmasterAddMemberService,addTitleIDS:\"IDS_PROJECTMEMBER\",addTitleDefaultMsg:'ProjectMember',primaryKeyField:\"nprojectmembercode\",masterData:_this.props.masterData,primaryList:\"ProjectMember\",dataResult:_this.props.dataResult,dataState:_this.props.dataState,dataStateChange:_this.props.dataStateChange,columnList:_this.projectmemberColumnList,methodUrl:_this.props.methodUrl,deleteRecord:_this.props.deleteRecord,deleteParam:projectmasterDeleteParam,settings:_this.props.settings// deleteParam={deleteteammembersId}\n}));tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(ProjectMasterFileTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,projectmasterfile:_this.props.masterData.projectmasterFile||[],getAvailableData:_this.props.getAvailableData,addProjectMasterFile:_this.props.addProjectMasterFile,viewProjectMasterFile:_this.viewProjectMasterFile,defaultRecord:_this.defaultRecord// screenName=\"ProjectMaster File\"\n,screenName:\"IDS_FILE\",settings:_this.props.settings,ntransactionstatus:_this.props.ntransactionstatus}));//ALPD-3566 Start\ntabMap.set(\"IDS_QUOTATION\",/*#__PURE__*/React.createElement(ProjectMasterQuotation,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,projectQuotationdataResult:_this.props.projectQuotationdataResult,projectQuotationDataState:_this.props.projectQuotationDataState,projectQuotationDataStateChange:_this.props.projectQuotationDataStateChange,SelectedProjectMaster:_this.props.masterData.SelectedProjectMaster,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteProjectQuotation:_this.props.deleteProjectQuotation,defaultRecord:_this.defaultRecord,getAvailableQuotation:_this.props.getAvailableQuotation,getActiveProjectQuotationById:_this.props.getActiveProjectQuotationById,screenName:\"IDS_QUOTATION\"}));//ALPD-3566 End\ntabMap.set(\"IDS_HISTORY\",/*#__PURE__*/React.createElement(ProjectMasterHistory,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,projectMasterdataResult:_this.props.projectMasterdataResult,projectMasterHistorydata:_this.props.projectMasterHistorydata,historydataStateChange:_this.props.historydataStateChange,dataState:_this.props.dataState// screenName=\"ProjectMaster File\"\n,screenName:\"IDS_HISTORY\",settings:_this.props.settings,ntransactionstatus:_this.props.ntransactionstatus}));return tabMap;};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;//    let selectedRecord = this.state.selectedRecord;\nif(_this.props.loadEsign){if(_this.props.operation===\"delete\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord['esignpassword']='';selectedRecord['esigncomments']='';selectedRecord['esignreason']='';}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.viewProjectMasterFile=function(filedata){var inputParam={inputData:{projectmasterfile:filedata,userinfo:_this.props.userInfo},classUrl:\"projectmaster\",operation:\"view\",methodUrl:\"AttachedProjectMasterFile\",screenName:\"ProjectMaster File\"};_this.props.viewAttachment(inputParam);};_this.onSaveClick=function(saveType,formRef){var projectMasterData=[];var inputParam={};projectMasterData[\"userinfo\"]=_this.props.userInfo;var clearSelectedRecordField=[];var postParam={inputListName:\"ProjectMasterList\",selectedObject:\"SelectedProjectMaster\",primaryKeyField:\"nprojectmastercode\"};if(_this.props.operation===\"update\"&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){postParam[\"primaryKeyValue\"]=_this.props.masterData.SelectedProjectMaster.nprojectmastercode;projectMasterData[\"projectMaster\"]={nprojectmastercode:_this.props.masterData.SelectedProjectMaster.nprojectmastercode,//     nprojecttypecode:this.state.selectedRecord.nprojecttypecode.value,\nsprojecttitle:_this.state.selectedRecord.sprojecttitle,sprojectcode:_this.state.selectedRecord.sprojectcode,sprojectdescription:_this.state.selectedRecord.sprojectdescription,// drfwdate: formatInputDate(this.state.selectedRecord[\"drfwdate\"],false),\n// dprojectstartdate: formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false),\n//     nstudydirectorcode:this.state.selectedRecord.nstudydirectorcode.value,\n//     nteammembercode: this.state.selectedRecord.nteammembercode.value,\n//     nperiodcode: this.state.selectedRecord.nperiodcode.value,\nnprojectduration:_this.state.selectedRecord.nprojectduration};}else if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){projectMasterData[\"projectMaster\"]={nsitecode:_this.props.userInfo.nmastersitecode,sprojecttitle:_this.state.selectedRecord.sprojecttitle,sprojectcode:_this.state.selectedRecord.sprojectcode,sprojectdescription:_this.state.selectedRecord.sprojectdescription,nprojectduration:parseInt(_this.state.selectedRecord.nprojectduration)};/*     this.projectMasterFieldList.map((item) => {\r\n                   return (projectMasterData[\"projectMaster\"][item] = this.state.selectedRecord[item] == \"\" || this.state.selectedRecord[item] == undefined ?\r\n                   undefined :this.state.selectedRecord[item]);\r\n                 }); */}else if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_FILE\"){inputParam=_this.onSaveProjectMasterFile(saveType,formRef);clearSelectedRecordField=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"width\":\"200px\",\"controlType\":\"textbox\",\"isClearField\":true},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"sdescription\",\"width\":\"200px\",\"controlType\":\"textbox\",\"isClearField\":true},{\"idsName\":\"IDS_DESCRIPTION\",\"dataField\":\"slinkdescription\",\"width\":\"200px\",\"controlType\":\"textbox\",\"isClearField\":true}//{ \"idsName\": \"IDS_DEFAULT\", \"dataField\": \"ndefaultstatus\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":4},\n];}if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){projectMasterData[\"projectMaster\"][\"nprojecttypecode\"]=_this.state.selectedRecord[\"nprojecttypecode\"]?_this.state.selectedRecord[\"nprojecttypecode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nstudydirectorcode\"]=_this.state.selectedRecord[\"nstudydirectorcode\"]?_this.state.selectedRecord[\"nstudydirectorcode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nteammembercode\"]=_this.state.selectedRecord[\"nteammembercode\"]?_this.state.selectedRecord[\"nteammembercode\"].value:transactionStatus.NA;projectMasterData[\"projectMaster\"][\"nperiodcode\"]=_this.state.selectedRecord[\"nperiodcode\"]?_this.state.selectedRecord[\"nperiodcode\"].value:transactionStatus.NA;// if (this.state.selectedRecord[\"drfwdate\"] || this.state.selectedRecord[\"dprojectstartdate\"]) {\n//   if (this.props.Login.operation === \"create\") {\nprojectMasterData[\"projectMaster\"][\"drfwdate\"]=formatInputDate(_this.state.selectedRecord[\"drfwdate\"],false);projectMasterData[\"projectMaster\"][\"dprojectstartdate\"]=formatInputDate(_this.state.selectedRecord[\"dprojectstartdate\"],false);//   }\n//   else {\n//     projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"],false);\n//     projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false);\n//   }\n// }\n}if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_MEMBERS\"){/*        projectMasterData[\"ProjectMember\"] = {};\r\n                      projectMasterData[\"ProjectMember\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"][0] ? this.state.selectedRecord[\"nusercode\"][0].value\r\n                      : transactionStatus.NA;\r\n                      projectMasterData[\"ProjectMember\"][\"nprojectmastercode\"] =this.props.masterData.SelectedProjectMaster.nprojectmastercode; */inputParam=_this.onSaveProjectMasterMember(saveType,formRef);}if((_this.props.operation===\"create\"||_this.props.operation===\"update\")&&_this.props.screenName===\"IDS_ADDPROJECTMASTER\"){inputParam={classUrl:\"projectmaster\",methodUrl:\"ProjectMaster\",inputData:projectMasterData,operation:_this.props.operation,saveType:saveType,formRef:formRef,postParam:postParam,searchRef:_this.searchRef,isClearSearch:_this.props.isClearSearch};}/*else if ((this.props.operation === \"create\")  &&  (this.props.screenName === \"IDS_MEMBERS\")) {\r\n    \r\n          inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: projectMasterData,\r\n            operation: this.props.operation,\r\n            saveType,\r\n            formRef,\r\n            postParam,\r\n            searchRef: this.searchRef,\r\n            isClearSearch: this.props.isClearSearch,\r\n          }\r\n        } */ //ALPD-3566 Start\nif(_this.props.screenName===\"IDS_QUOTATION\"){inputParam=_this.onSaveProjectQuotation(saveType,formRef,_this.props.operation);clearSelectedRecordField=[{\"idsName\":\"IDS_REMARKS\",\"dataField\":\"sremarks\",\"width\":\"200px\",\"controlType\":\"textbox\",\"isClearField\":true},{\"idsName\":\"IDS_DEFAULTSTATUS\",\"dataField\":\"ndefaultstatus\",\"width\":\"100px\",\"isClearField\":true,\"preSetValue\":4}];}var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{if(_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_FILE\"||_this.props.operation===\"create\"&&_this.props.screenName===\"IDS_QUOTATION\"){_this.props.crudMaster(inputParam,masterData,\"openChildModal\",\"\",\"\",clearSelectedRecordField);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\");}}};_this.onSaveProjectMasterFile=function(saveType,formRef){var selectedRecord=_this.props.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var projectmasterFileArray=[];var projectmasterFile={nprojectmastercode:_this.props.masterData.SelectedProjectMaster.nprojectmastercode,nprojecttypecode:_this.props.masterData.SelectedProjectMaster.nprojecttypecode,nprojectmasterfilecode:selectedRecord.nprojectmasterfilecode?selectedRecord.nprojectmasterfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode// ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\n};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},projectmasterFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.nsupplierfilecode&&selectedRecord.nsupplierfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=Lims_JSON_stringify(file.name,false);tempData[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\"),false);tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);projectmasterFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{projectmasterFile[\"sfilename\"]=Lims_JSON_stringify(selectedRecord.sfilename,false);projectmasterFile[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\"),false);projectmasterFile[\"nlinkcode\"]=transactionStatus.NA;projectmasterFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;projectmasterFile[\"nfilesize\"]=selectedRecord.nfilesize;projectmasterFileArray.push(projectmasterFile);}}else{projectmasterFile[\"sfilename\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkfilename.trim()),false);projectmasterFile[\"sdescription\"]=Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\"),false);projectmasterFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;projectmasterFile[\"ssystemfilename\"]=\"\";projectmasterFile[\"nfilesize\"]=0;projectmasterFileArray.push(projectmasterFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"projectmasterfile\",JSON.stringify(projectmasterFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\n//let selectedId = null;\nvar postParam=undefined;if(_this.props.operation===\"update\"){// edit\npostParam={inputListName:\"ProjectMaster\",selectedObject:\"SelectedProjectMaster\",primaryKeyField:\"nprojectmastercode\"};// selectedId = selectedRecord[\"nprojectmasterfilecode\"];\n}var inputParam={// inputData: { userinfo: this.props.userInfo },\ninputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sformname:Lims_JSON_stringify(_this.props.userInfo.sformname),smodulename:Lims_JSON_stringify(_this.props.userInfo.smodulename),//ALPD-1826(while saving the file and link,audit trail is not captured the respective language)\nslanguagename:Lims_JSON_stringify(_this.props.userInfo.slanguagename)})},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"projectmaster\",saveType:saveType,formRef:formRef,methodUrl:\"ProjectMasterFile\",postParam:postParam,selectedRecord:_objectSpread({},selectedRecord)};return inputParam;};_this.deleteRecord=function(projectmasterfileparam){if(_this.props.masterData.SelectedProjectMaster.ntransactionstatus===transactionStatus.DRAFT){var inputParam={};// let inputData = {};\n// if (this.props.screenName === 'ProjectMaster File') { \nvar selectedRecord=projectmasterfileparam.selectedRecord;selectedRecord=_objectSpread(_objectSpread({},selectedRecord),{},{ntransactionstatus:_this.props.masterData.SelectedProjectMaster.ntransactionstatus});// inputData[\"projectmasterfile\"]={\n//     selectedRecord                    \n//     };\n//        if (this.props.screenName === 'IDS_FILE') {\ninputParam={classUrl:\"projectmaster\",methodUrl:projectmasterfileparam.methodUrl,inputData:{\"projectmasterfile\":selectedRecord,\"userinfo\":_this.props.userInfo},operation:projectmasterfileparam.operation,//dataState: this.state.dataState,\n//dataStateMaterial: this.state.dataStateMaterial\ndataState:_this.state.dataState};//          }\nif(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,projectmasterfileparam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:projectmasterfileparam.screenName,operation:projectmasterfileparam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_SELECTDRAFTVERSION\"}));}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.props.selectedRecord[\"esigncomments\"],nreasoncode:_this.props.selectedRecord[\"esignreason\"]&&_this.props.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.props.selectedRecord[\"esignreason\"]&&_this.props.selectedRecord[\"esignreason\"].label}),password:_this.props.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var dataState={skip:0,take:_this.props.settings?parseInt(_this.props.settings[14]):5};_this.state={isOpen:false,selectedRecord:{},dataResult:[],activeTab:'ProjectMembers-tab',dataState:dataState};_this.projectmemberColumnList=[{\"idsName\":\"IDS_LOGINID\",\"dataField\":\"sloginid\",\"width\":\"200px\"},{\"idsName\":\"IDS_USER\",\"dataField\":\"steammembername\",\"width\":\"200px\"}];return _this;}_createClass(ProjectMasterTab,[{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName){var mandatoryFields=[];if(screenName==='IDS_FILE'){if(this.props.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandatoryFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{mandatoryFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];}mandatoryFields.forEach(function(item){return item.mandatory===true&&mandatoryFields.push(item);});return mandatoryFields;}else if(screenName==='IDS_MEMBERS'){mandatoryFields=[{\"idsName\":\"IDS_USER\",\"dataField\":\"nusercode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];mandatoryFields.forEach(function(item){return item.mandatory===true&&mandatoryFields.push(item);});return mandatoryFields;}else if(screenName==='IDS_QUOTATION'){mandatoryFields=[{\"idsName\":\"IDS_QUOTATION\",\"dataField\":\"nquotationcode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];mandatoryFields.forEach(function(item){return item.mandatory===true&&mandatoryFields.push(item);});return mandatoryFields;}else{return[];}}},{key:\"render\",value:function render(){// const mandatoryFields = [];\n// let mandatoryFields = [];\nif(this.props.openChildModal){this.mandatoryFields=this.findMandatoryFields(this.props.screenName);}// if (this.props.screenName === 'IDS_FILE') {\n//     if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\n//         mandatoryFields = [\n//             { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\n//             { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\n//         ];\n//     } else {\n//         mandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\n//     }\n// } else if (this.props.screenName === 'IDS_MEMBERS') {\n//     mandatoryFields = [{ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\n// }\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"no-gutters\"},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs\"},/*#__PURE__*/React.createElement(CustomTabs,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange})))),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,showSaveContinue:this.props.screenName===\"IDS_FILE\"||this.props.screenName===\"IDS_QUOTATION\"?true:false,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.props.selectedRecord||{}// mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\n,mandatoryFields:this.mandatoryFields||[],addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.props.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.props.selectedRecord||{}}):this.props.screenName===\"IDS_MEMBERS\"?/*#__PURE__*/React.createElement(AddProjectMember,{MembersList:this.props.MembersList// selectedRecord={this.state.selectedRecord || {}}\n,selectedRecord:this.props.selectedRecord||{}//  onComboChange={this.onComboChange}\n,onComboChange:this.props.onComboChange}):this.props.screenName===\"IDS_FILE\"?/*#__PURE__*/React.createElement(AddProjectMasterFile,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.props.onInputOnChange,onDrop:this.props.onDropProjectMasterFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.props.deleteAttachment,actionType:this.state.actionType// onComboChange={this.onComboChange}\n,onComboChange:this.props.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_FILENAME\"}),name:\"projectmasterfilename\"})://ALPD-3566 Start\nthis.props.screenName===\"IDS_QUOTATION\"?/*#__PURE__*/React.createElement(AddProjectQuotation,{selectedRecord:this.props.selectedRecord||{},ProjectQuotationList:this.props.ProjectQuotationList,onComboChange:this.props.onComboChange,isMulti:false,onInputOnChange:this.props.onInputOnChange,operation:this.props.operation||\"\"}):\"\"//ALPD-3566 End\n}));}},{key:\"onSaveProjectQuotation\",value:function onSaveProjectQuotation(saveType,formRef,operation){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"ProjectQuotation\"]={};// let projectQuotationArray = []\nif(operation===\"create\"){// projectQuotationArray = this.props.selectedRecord.nquotationcode.map(item => {\nvar projectQuotationData={};projectQuotationData[\"nquotationcode\"]=this.props.selectedRecord&&this.props.selectedRecord.nquotationcode&&this.props.selectedRecord.nquotationcode.value;projectQuotationData[\"nprojectmastercode\"]=this.props.masterData.SelectedProjectMaster.nprojectmastercode;projectQuotationData['sremarks']=this.props.selectedRecord&&this.props.selectedRecord.sremarks?this.props.selectedRecord.sremarks:\"\";projectQuotationData['ndefaultstatus']=this.props.selectedRecord&&this.props.selectedRecord.ndefaultstatus?this.props.selectedRecord.ndefaultstatus:transactionStatus.NO;//     return projectQuotationData;\n//  });\ninputData['ProjectQuotation']=projectQuotationData;}else{inputData[\"ProjectQuotation\"][\"nquotationcode\"]=this.props.selectedRecord&&this.props.selectedRecord.nquotationcode&&this.props.selectedRecord.nquotationcode.value;inputData[\"ProjectQuotation\"][\"nprojectmastercode\"]=this.props.masterData.SelectedProjectMaster.nprojectmastercode;inputData[\"ProjectQuotation\"][\"sremarks\"]=this.props.selectedRecord&&this.props.selectedRecord.sremarks?this.props.selectedRecord.sremarks:\"\";inputData[\"ProjectQuotation\"][\"ndefaultstatus\"]=this.props.selectedRecord&&this.props.selectedRecord.ndefaultstatus?this.props.selectedRecord.ndefaultstatus:transactionStatus.NO;inputData[\"ProjectQuotation\"][\"nprojectquotationcode\"]=this.props.selectedRecord&&this.props.selectedRecord.nprojectquotationcode;}var inputParam={classUrl:\"projectmaster\",methodUrl:\"ProjectQuotation\",inputData:inputData,operation:operation,saveType:saveType,formRef:formRef,selectedRecord:_objectSpread({},this.props.selectedRecord)};return inputParam;}//ALPD-3566 End\n},{key:\"onSaveProjectMasterMember\",value:function onSaveProjectMasterMember(saveType,formRef){var _this2=this;var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;// inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\ninputData[\"ProjectMember\"]={};var projectmemberArray=[];projectmemberArray=this.props.selectedRecord.nusercode.map(function(item){var projectMasterData={};projectMasterData[\"nusercode\"]=item.value;projectMasterData[\"nprojectmastercode\"]=_this2.props.masterData.SelectedProjectMaster.nprojectmastercode;return projectMasterData;});inputData['ProjectMember']=projectmemberArray;var inputParam={classUrl:\"projectmaster\",methodUrl:\"ProjectMember\",inputData:inputData,operation:this.props.operation,saveType:saveType,formRef:formRef};return inputParam;}}]);return ProjectMasterTab;}(React.Component);export default injectIntl(ProjectMasterTab);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/project/ProjectMasterTab.jsx"],"names":["React","Row","Col","Card","injectIntl","SlideOutModal","toast","Esign","DEFAULT_RETURN","showEsign","create_UUID","Lims_JSON_stringify","replaceBackSlash","ProjectMasterMemberTabs","ProjectMasterFileTab","transactionStatus","attachmentType","CustomTabs","AddProjectMember","AddProjectMasterFile","formatInputDate","ProjectMasterHistory","ProjectMasterQuotation","AddProjectQuotation","ProjectMasterTab","props","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","onComboChange","comboData","fieldName","selectedRecord","state","setState","tabDetail","addteammembersId","controlMap","has","get","ncontrolcode","deleteteammembersId","projectmasterAddParam","operation","primaryKeyField","masterData","userInfo","ncontrolCode","projectmasterDeleteParam","tabMap","Map","set","userRoleControlRights","inputParam","getProjectmasterAddMemberService","dataResult","dataState","dataStateChange","projectmemberColumnList","methodUrl","deleteRecord","settings","projectmasterFile","getAvailableData","addProjectMasterFile","viewProjectMasterFile","defaultRecord","ntransactionstatus","projectQuotationdataResult","projectQuotationDataState","projectQuotationDataStateChange","SelectedProjectMaster","deleteProjectQuotation","getAvailableQuotation","getActiveProjectQuotationById","projectMasterdataResult","projectMasterHistorydata","historydataStateChange","closeModal","loadEsign","openChildModal","filedata","inputData","projectmasterfile","userinfo","classUrl","viewAttachment","onSaveClick","saveType","formRef","projectMasterData","clearSelectedRecordField","postParam","inputListName","selectedObject","nprojectmastercode","sprojecttitle","sprojectcode","sprojectdescription","nprojectduration","nsitecode","nmastersitecode","parseInt","onSaveProjectMasterFile","value","NA","onSaveProjectMasterMember","searchRef","isClearSearch","onSaveProjectQuotation","esignRights","nformcode","screenData","crudMaster","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","NO","projectmasterFileArray","nprojecttypecode","nprojectmasterfilecode","nstatus","ACTIVE","formData","FormData","FTP","Array","isArray","length","forEach","file","index","tempData","Object","assign","splittedFileName","name","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","nsupplierfilecode","sdescription","trim","size","append","push","YES","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","undefined","sformname","smodulename","slanguagename","isFileupload","projectmasterfileparam","DRAFT","warn","intl","formatMessage","id","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","skip","take","isOpen","activeTab","mandatoryFields","LINK","item","mandatory","findMandatoryFields","onInputOnChange","MembersList","onDropProjectMasterFile","onDropAccepted","deleteAttachment","actionType","linkMaster","editFiles","ProjectQuotationList","projectQuotationData","nquotationcode","sremarks","ndefaultstatus","nprojectquotationcode","projectmemberArray","nusercode","map","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Row, Col, Card } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';  //FormattedMessage,\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport { toast } from 'react-toastify';\r\nimport Esign from '../audittrail/Esign';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, create_UUID, Lims_JSON_stringify,replaceBackSlash } from '../../components/CommonScript';\r\nimport ProjectMasterMemberTabs from './ProjectMasterMemberTabs';\r\nimport ProjectMasterFileTab from './ProjectMasterFileTab';\r\nimport { transactionStatus, attachmentType } from '../../components/Enumeration';\r\nimport CustomTabs from '../../components/custom-tabs/custom-tabs.component';\r\nimport AddProjectMember from \"../../pages/project/AddProjectMember\";\r\nimport AddProjectMasterFile from './AddProjectMasterFile';\r\nimport { formatInputDate } from \"../../components/CommonScript\";\r\nimport ProjectMasterHistory from \"../../pages/project/ProjectMasterHistory\";\r\nimport ProjectMasterQuotation from \"../../pages/project/ProjectMasterQuotation\";\r\nimport AddProjectQuotation from './AddProjectQuotation';\r\n\r\nclass ProjectMasterTab extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5\r\n        };\r\n\r\n        this.state = {\r\n            isOpen: false, selectedRecord: {}, dataResult: [],\r\n            activeTab: 'ProjectMembers-tab',\r\n            dataState: dataState\r\n\r\n        };\r\n\r\n        this.projectmemberColumnList = [\r\n\r\n            { \"idsName\": \"IDS_LOGINID\", \"dataField\": \"sloginid\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USER\", \"dataField\": \"steammembername\", \"width\": \"200px\" }\r\n\r\n        ]\r\n\r\n    }\r\n\r\n    findMandatoryFields(screenName) {\r\n        let mandatoryFields = [];\r\n        if (screenName === 'IDS_FILE') {\r\n\r\n            if (this.props.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandatoryFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n\r\n                mandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\r\n\r\n            }\r\n            mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n            return mandatoryFields;\r\n        } else if (screenName === 'IDS_MEMBERS') {\r\n\r\n            mandatoryFields = [{ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n\r\n            mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n            return mandatoryFields;\r\n        }else if (screenName === 'IDS_QUOTATION') {\r\n\r\n            mandatoryFields = [{ \"idsName\": \"IDS_QUOTATION\", \"dataField\": \"nquotationcode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n\r\n            mandatoryFields.forEach(item => item.mandatory === true && mandatoryFields.push(item));\r\n            return mandatoryFields;\r\n        }\r\n        else {\r\n            return [];\r\n          }\r\n\r\n      }\r\n\r\n    render() {\r\n\r\n        // const mandatoryFields = [];\r\n        // let mandatoryFields = [];\r\n\r\n        if (this.props.openChildModal) {\r\n            this.mandatoryFields = this.findMandatoryFields(this.props.screenName)\r\n          }\r\n\r\n        // if (this.props.screenName === 'IDS_FILE') {\r\n\r\n        //     if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n        //         mandatoryFields = [\r\n        //             { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n        //             { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n        //         ];\r\n        //     } else {\r\n\r\n        //         mandatoryFields = [{ \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_CHOOSE\", \"controlType\": \"file\" }];\r\n\r\n        //     }\r\n        // } else if (this.props.screenName === 'IDS_MEMBERS') {\r\n\r\n        //     mandatoryFields = [{ \"idsName\": \"IDS_USER\", \"dataField\": \"nusercode\", \"width\": \"200px\", \"mandatory\": true, \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }];\r\n        // }\r\n\r\n        return (\r\n            <>\r\n                <Row className=\"no-gutters\">\r\n                    <Col md={12}>\r\n                        <Card className=\"at-tabs\">\r\n                            <CustomTabs tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal show={this.props.openChildModal} \r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.props.screenName}\r\n                        showSaveContinue={this.props.screenName === \"IDS_FILE\" || this.props.screenName === \"IDS_QUOTATION\"?true:false}\r\n                        onSaveClick={this.onSaveClick}\r\n                        updateStore={this.props.updateStore}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        selectedRecord={this.props.selectedRecord || {}}\r\n                          // mandatoryFields={this.props.screenName === \"IDS_MEMBERS\" ? mandatoryFields : mandatoryFields || []}\r\n                        mandatoryFields={this.mandatoryFields|| []}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign operation={this.props.operation}\r\n                                onInputOnChange={this.props.onInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.props.selectedRecord || {}}\r\n                            /> :\r\n                            this.props.screenName === \"IDS_MEMBERS\" ?\r\n                                <AddProjectMember\r\n                                    MembersList={this.props.MembersList}\r\n                                    // selectedRecord={this.state.selectedRecord || {}}\r\n                                    selectedRecord={this.props.selectedRecord || {}}\r\n                                    //  onComboChange={this.onComboChange}\r\n                                    onComboChange={this.props.onComboChange}\r\n\r\n                                /> :\r\n                                this.props.screenName === \"IDS_FILE\" ?\r\n                                    <AddProjectMasterFile\r\n                                        selectedRecord={this.props.selectedRecord || {}}\r\n                                        onInputOnChange={this.props.onInputOnChange}\r\n                                        onDrop={this.props.onDropProjectMasterFile}\r\n                                        onDropAccepted={this.onDropAccepted}\r\n                                        deleteAttachment={this.props.deleteAttachment}\r\n                                        actionType={this.state.actionType}\r\n                                        // onComboChange={this.onComboChange}\r\n                                        onComboChange={this.props.onComboChange}\r\n                                        linkMaster={this.props.linkMaster}\r\n                                        editFiles={this.props.editFiles}\r\n                                        maxSize={20}\r\n                                        maxFiles={1}\r\n                                        multiple={false}\r\n                                        label={this.props.intl.formatMessage({ id: \"IDS_FILENAME\" })}\r\n                                        name=\"projectmasterfilename\"\r\n                                    /> : \r\n                                    //ALPD-3566 Start\r\n                                    this.props.screenName === \"IDS_QUOTATION\" ?\r\n                                                        \r\n                                    <AddProjectQuotation\r\n                                    selectedRecord={this.props.selectedRecord || {}}\r\n                                    ProjectQuotationList={this.props.ProjectQuotationList}\r\n                                    onComboChange={this.props.onComboChange}\r\n                                    isMulti={false}\r\n                                    onInputOnChange={this.props.onInputOnChange}\r\n                                    operation={this.props.operation || \"\"}\r\n                                    />\r\n                                       :\"\"\r\n                                    //ALPD-3566 End\r\n                        }\r\n\r\n                    />\r\n                }\r\n            </>\r\n\r\n        )\r\n\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    tabDetail = () => {\r\n\r\n        const addteammembersId = this.props.controlMap.has(\"AddTeammembers\") && this.props.controlMap.get(\"AddTeammembers\").ncontrolcode;\r\n        const deleteteammembersId = this.props.controlMap.has(\"DeleteTeammembers\") && this.props.controlMap.get(\"DeleteTeammembers\").ncontrolcode;\r\n\r\n        const projectmasterAddParam = {\r\n            screenName: \"IDS_MEMBERS\", operation: \"create\", primaryKeyField: \"nprojectmembercode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: addteammembersId\r\n        };\r\n\r\n        const projectmasterDeleteParam = {\r\n\r\n            //    screenName: \"IDS_MEMBERS\", methodUrl: \"ProjectMember\", operation: \"delete\", ncontrolCode: deleteteammembersId \r\n\r\n            screenName: \"IDS_MEMBERS\", operation: \"delete\", primaryKeyField: \"nprojectmembercode\",\r\n            masterData: this.props.masterData, userInfo: this.props.userInfo, ncontrolCode: deleteteammembersId\r\n        };\r\n\r\n\r\n\r\n        const tabMap = new Map();\r\n\r\n        tabMap.set(\"IDS_MEMBERS\", <ProjectMasterMemberTabs\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            controlMap={this.props.controlMap}\r\n            inputParam={this.props.inputParam}\r\n            userInfo={this.props.userInfo}\r\n            addId={addteammembersId}\r\n            addParam={projectmasterAddParam}\r\n            comboDataService={this.props.getProjectmasterAddMemberService}\r\n            addTitleIDS={\"IDS_PROJECTMEMBER\"}\r\n            addTitleDefaultMsg={'ProjectMember'}\r\n            primaryKeyField={\"nprojectmembercode\"}\r\n            masterData={this.props.masterData}\r\n            primaryList={\"ProjectMember\"}\r\n            dataResult={this.props.dataResult}\r\n            dataState={this.props.dataState}\r\n            dataStateChange={this.props.dataStateChange}\r\n            columnList={this.projectmemberColumnList}\r\n            methodUrl={this.props.methodUrl}\r\n            deleteRecord={this.props.deleteRecord}\r\n            deleteParam={projectmasterDeleteParam}\r\n            settings={this.props.settings}\r\n        // deleteParam={deleteteammembersId}\r\n        />)\r\n\r\n\r\n        tabMap.set(\"IDS_FILE\", <ProjectMasterFileTab\r\n            controlMap={this.props.controlMap}\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            userInfo={this.props.userInfo}\r\n            inputParam={this.props.inputParam}\r\n            deleteRecord={this.deleteRecord}\r\n            projectmasterfile={this.props.masterData.projectmasterFile || []}\r\n            getAvailableData={this.props.getAvailableData}\r\n            addProjectMasterFile={this.props.addProjectMasterFile}\r\n            viewProjectMasterFile={this.viewProjectMasterFile}\r\n            defaultRecord={this.defaultRecord}\r\n            // screenName=\"ProjectMaster File\"\r\n            screenName=\"IDS_FILE\"\r\n            settings={this.props.settings}\r\n            ntransactionstatus={this.props.ntransactionstatus}\r\n        />);\r\n        //ALPD-3566 Start\r\n        tabMap.set(\"IDS_QUOTATION\",\r\n        <ProjectMasterQuotation\r\n        controlMap={this.props.controlMap}\r\n        userRoleControlRights={this.props.userRoleControlRights}\r\n        projectQuotationdataResult={this.props.projectQuotationdataResult}\r\n        projectQuotationDataState={this.props.projectQuotationDataState}\r\n        projectQuotationDataStateChange={this.props.projectQuotationDataStateChange}\r\n        SelectedProjectMaster={this.props.masterData.SelectedProjectMaster}\r\n        userInfo={this.props.userInfo}\r\n        inputParam={this.props.inputParam}\r\n        deleteProjectQuotation={this.props.deleteProjectQuotation}\r\n        defaultRecord={this.defaultRecord}\r\n        getAvailableQuotation={this.props.getAvailableQuotation}\r\n        getActiveProjectQuotationById={this.props.getActiveProjectQuotationById}\r\n        screenName=\"IDS_QUOTATION\"\r\n    />\r\n);\r\n        //ALPD-3566 End\r\n        tabMap.set(\"IDS_HISTORY\", <ProjectMasterHistory\r\n        controlMap={this.props.controlMap}\r\n        userRoleControlRights={this.props.userRoleControlRights}\r\n        userInfo={this.props.userInfo}\r\n        inputParam={this.props.inputParam}\r\n        projectMasterdataResult={this.props.projectMasterdataResult}\r\n        projectMasterHistorydata={this.props.projectMasterHistorydata}\r\n        historydataStateChange={this.props.historydataStateChange}\r\n        dataState={this.props.dataState}\r\n\r\n        // screenName=\"ProjectMaster File\"\r\n        screenName=\"IDS_HISTORY\"\r\n        settings={this.props.settings}\r\n        ntransactionstatus={this.props.ntransactionstatus}\r\n        />);\r\n       \r\n        \r\n        return tabMap;\r\n    }\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        //    let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = '';\r\n                selectedRecord['esigncomments'] = '';\r\n                selectedRecord['esignreason'] = '';\r\n            }\r\n        }\r\n        else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n\r\n    viewProjectMasterFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                projectmasterfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"projectmaster\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedProjectMasterFile\",\r\n            screenName: \"ProjectMaster File\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let projectMasterData = [];\r\n        let inputParam = {};\r\n        projectMasterData[\"userinfo\"] = this.props.userInfo;\r\n        let clearSelectedRecordField=[];\r\n        let postParam = {\r\n            inputListName: \"ProjectMasterList\",\r\n            selectedObject: \"SelectedProjectMaster\",\r\n            primaryKeyField: \"nprojectmastercode\",\r\n        };\r\n\r\n        if ((this.props.operation === \"update\") && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            postParam[\"primaryKeyValue\"] =\r\n                this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n\r\n            projectMasterData[\"projectMaster\"] = {\r\n                nprojectmastercode: this.props.masterData.SelectedProjectMaster.nprojectmastercode,\r\n                //     nprojecttypecode:this.state.selectedRecord.nprojecttypecode.value,\r\n                sprojecttitle: this.state.selectedRecord.sprojecttitle,\r\n                sprojectcode: this.state.selectedRecord.sprojectcode,\r\n                sprojectdescription: this.state.selectedRecord.sprojectdescription,\r\n                // drfwdate: formatInputDate(this.state.selectedRecord[\"drfwdate\"],false),\r\n                // dprojectstartdate: formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false),\r\n                //     nstudydirectorcode:this.state.selectedRecord.nstudydirectorcode.value,\r\n                //     nteammembercode: this.state.selectedRecord.nteammembercode.value,\r\n                //     nperiodcode: this.state.selectedRecord.nperiodcode.value,\r\n                nprojectduration: this.state.selectedRecord.nprojectduration,\r\n\r\n            };\r\n\r\n        } else if ((this.props.operation === \"create\") && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            projectMasterData[\"projectMaster\"] = {\r\n\r\n                nsitecode: this.props.userInfo.nmastersitecode,\r\n                sprojecttitle: this.state.selectedRecord.sprojecttitle,\r\n                sprojectcode: this.state.selectedRecord.sprojectcode,\r\n                sprojectdescription: this.state.selectedRecord.sprojectdescription,\r\n                nprojectduration: parseInt(this.state.selectedRecord.nprojectduration)\r\n            };\r\n\r\n            /*     this.projectMasterFieldList.map((item) => {\r\n                   return (projectMasterData[\"projectMaster\"][item] = this.state.selectedRecord[item] == \"\" || this.state.selectedRecord[item] == undefined ?\r\n                   undefined :this.state.selectedRecord[item]);\r\n                 }); */\r\n\r\n        } else if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_FILE\")) {\r\n\r\n            inputParam = this.onSaveProjectMasterFile(saveType, formRef);\r\n\r\n            clearSelectedRecordField =[\r\n                { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"width\": \"200px\" ,\"controlType\": \"textbox\",\"isClearField\":true},\r\n                { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\",\"controlType\": \"textbox\",\"isClearField\":true },\r\n                { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"slinkdescription\", \"width\": \"200px\",\"controlType\": \"textbox\",\"isClearField\":true },\r\n                \r\n                \r\n                //{ \"idsName\": \"IDS_DEFAULT\", \"dataField\": \"ndefaultstatus\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":4},\r\n                \r\n            ]\r\n        }\r\n\r\n        if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            projectMasterData[\"projectMaster\"][\"nprojecttypecode\"] = this.state.selectedRecord[\"nprojecttypecode\"] ? this.state.selectedRecord[\"nprojecttypecode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nstudydirectorcode\"] = this.state.selectedRecord[\"nstudydirectorcode\"] ? this.state.selectedRecord[\"nstudydirectorcode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nteammembercode\"] = this.state.selectedRecord[\"nteammembercode\"] ? this.state.selectedRecord[\"nteammembercode\"].value\r\n                : transactionStatus.NA;\r\n\r\n            projectMasterData[\"projectMaster\"][\"nperiodcode\"] = this.state.selectedRecord[\"nperiodcode\"] ? this.state.selectedRecord[\"nperiodcode\"].value\r\n                : transactionStatus.NA;\r\n\r\n\r\n            // if (this.state.selectedRecord[\"drfwdate\"] || this.state.selectedRecord[\"dprojectstartdate\"]) {\r\n            //   if (this.props.Login.operation === \"create\") {\r\n\r\n            projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"], false);\r\n            projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"], false);\r\n\r\n            //   }\r\n            //   else {\r\n\r\n            //     projectMasterData[\"projectMaster\"][\"drfwdate\"] = formatInputDate(this.state.selectedRecord[\"drfwdate\"],false);\r\n            //     projectMasterData[\"projectMaster\"][\"dprojectstartdate\"] = formatInputDate(this.state.selectedRecord[\"dprojectstartdate\"],false);\r\n\r\n            //   }\r\n            // }\r\n        }\r\n\r\n        if ((this.props.operation === \"create\") && (this.props.screenName === \"IDS_MEMBERS\")) {\r\n\r\n            /*        projectMasterData[\"ProjectMember\"] = {};\r\n                      projectMasterData[\"ProjectMember\"][\"nusercode\"] = this.state.selectedRecord[\"nusercode\"][0] ? this.state.selectedRecord[\"nusercode\"][0].value\r\n                      : transactionStatus.NA;\r\n                      projectMasterData[\"ProjectMember\"][\"nprojectmastercode\"] =this.props.masterData.SelectedProjectMaster.nprojectmastercode; */\r\n\r\n            inputParam = this.onSaveProjectMasterMember(saveType, formRef);\r\n        }\r\n\r\n        if (((this.props.operation === \"create\") || (this.props.operation === \"update\")) && (this.props.screenName === \"IDS_ADDPROJECTMASTER\")) {\r\n\r\n            inputParam = {\r\n                classUrl: \"projectmaster\",\r\n                methodUrl: \"ProjectMaster\",\r\n                inputData: projectMasterData,\r\n                operation: this.props.operation,\r\n                saveType,\r\n                formRef,\r\n                postParam,\r\n                searchRef: this.searchRef,\r\n                isClearSearch: this.props.isClearSearch,\r\n            };\r\n        }/*else if ((this.props.operation === \"create\")  &&  (this.props.screenName === \"IDS_MEMBERS\")) {\r\n    \r\n          inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: projectMasterData,\r\n            operation: this.props.operation,\r\n            saveType,\r\n            formRef,\r\n            postParam,\r\n            searchRef: this.searchRef,\r\n            isClearSearch: this.props.isClearSearch,\r\n          }\r\n        } */\r\n        //ALPD-3566 Start\r\n        if (this.props.screenName === \"IDS_QUOTATION\") {\r\n            inputParam = this.onSaveProjectQuotation(saveType, formRef,this.props.operation);\r\n\r\n            clearSelectedRecordField =[\r\n                { \"idsName\": \"IDS_REMARKS\", \"dataField\": \"sremarks\", \"width\": \"200px\" ,\"controlType\": \"textbox\",\"isClearField\":true},\r\n                { \"idsName\": \"IDS_DEFAULTSTATUS\", \"dataField\": \"ndefaultstatus\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":4},\r\n                \r\n            ]\r\n        }\r\n\r\n        const masterData = this.props.masterData;\r\n\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true,\r\n                    screenData: { inputParam, masterData },\r\n                    saveType,\r\n                },\r\n            };\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            if((this.props.operation === \"create\" && this.props.screenName === \"IDS_FILE\") || \r\n            (this.props.operation === \"create\" && this.props.screenName === \"IDS_QUOTATION\"))\r\n            {\r\n                this.props.crudMaster(inputParam, masterData, \"openChildModal\",\"\",\"\",clearSelectedRecordField);\r\n            }\r\n            else\r\n            {\r\n               this.props.crudMaster(inputParam, masterData, \"openChildModal\");\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    onSaveProjectMasterFile = (saveType, formRef) => {\r\n        const selectedRecord = this.props.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let projectmasterFileArray = [];\r\n        let projectmasterFile = {\r\n            nprojectmastercode: this.props.masterData.SelectedProjectMaster.nprojectmastercode,\r\n            nprojecttypecode: this.props.masterData.SelectedProjectMaster.nprojecttypecode,\r\n            nprojectmasterfilecode: selectedRecord.nprojectmasterfilecode ? selectedRecord.nprojectmasterfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n            // ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK ? \"nlinkdefaultstatus\" : \"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, projectmasterFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.nsupplierfilecode && selectedRecord.nsupplierfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = Lims_JSON_stringify(file.name, false);\r\n                    tempData[\"sdescription\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\"), false);\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    projectmasterFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                projectmasterFile[\"sfilename\"] = Lims_JSON_stringify(selectedRecord.sfilename, false);\r\n                projectmasterFile[\"sdescription\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\"), false);\r\n                projectmasterFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                projectmasterFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                projectmasterFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                projectmasterFileArray.push(projectmasterFile);\r\n            }\r\n        } else {\r\n            projectmasterFile[\"sfilename\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkfilename.trim()), false);\r\n            projectmasterFile[\"sdescription\"] = Lims_JSON_stringify(replaceBackSlash(selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\"), false);\r\n            projectmasterFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            projectmasterFile[\"ssystemfilename\"] = \"\";\r\n            projectmasterFile[\"nfilesize\"] = 0;\r\n            projectmasterFileArray.push(projectmasterFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"projectmasterfile\", JSON.stringify(projectmasterFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n\r\n        //let selectedId = null;\r\n        let postParam = undefined;\r\n        if (this.props.operation === \"update\") {\r\n            // edit\r\n            postParam = { inputListName: \"ProjectMaster\", selectedObject: \"SelectedProjectMaster\", primaryKeyField: \"nprojectmastercode\" };\r\n           // selectedId = selectedRecord[\"nprojectmasterfilecode\"];\r\n        }\r\n        const inputParam = {\r\n            // inputData: { userinfo: this.props.userInfo },\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sformname: Lims_JSON_stringify(this.props.userInfo.sformname),\r\n                    smodulename: Lims_JSON_stringify(this.props.userInfo.smodulename),\r\n                         //ALPD-1826(while saving the file and link,audit trail is not captured the respective language)\r\n                        slanguagename: Lims_JSON_stringify(this.props.userInfo.slanguagename)\r\n                }\r\n            },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"projectmaster\",\r\n            saveType, formRef, methodUrl: \"ProjectMasterFile\", postParam,\r\n            selectedRecord: { ...selectedRecord }\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n\r\n\r\n    onSaveProjectQuotation(saveType, formRef, operation) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"ProjectQuotation\"] = {};\r\n\r\n       // let projectQuotationArray = []\r\n        if (operation === \"create\"){\r\n           // projectQuotationArray = this.props.selectedRecord.nquotationcode.map(item => {\r\n                let projectQuotationData = {};\r\n\r\n            projectQuotationData[\"nquotationcode\"] = this.props.selectedRecord && this.props.selectedRecord.nquotationcode && this.props.selectedRecord.nquotationcode.value;\r\n                projectQuotationData[\"nprojectmastercode\"] = this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n                projectQuotationData['sremarks'] = this.props.selectedRecord && this.props.selectedRecord.sremarks ? this.props.selectedRecord.sremarks : \"\";\r\n                projectQuotationData['ndefaultstatus'] = this.props.selectedRecord && this.props.selectedRecord.ndefaultstatus ? this.props.selectedRecord.ndefaultstatus : transactionStatus.NO;\r\n\r\n\r\n           //     return projectQuotationData;\r\n          //  });\r\n        inputData['ProjectQuotation'] = projectQuotationData;\r\n    }\r\n    else{\r\n            inputData[\"ProjectQuotation\"][\"nquotationcode\"] = this.props.selectedRecord && this.props.selectedRecord.nquotationcode && this.props.selectedRecord.nquotationcode.value;\r\n    inputData[\"ProjectQuotation\"][\"nprojectmastercode\"]=this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n    inputData[\"ProjectQuotation\"][\"sremarks\"]=this.props.selectedRecord && this.props.selectedRecord.sremarks ? this.props.selectedRecord.sremarks : \"\";\r\n    inputData[\"ProjectQuotation\"][\"ndefaultstatus\"]=this.props.selectedRecord && this.props.selectedRecord.ndefaultstatus ? this.props.selectedRecord.ndefaultstatus : transactionStatus.NO;\r\n    inputData[\"ProjectQuotation\"][\"nprojectquotationcode\"]=this.props.selectedRecord && this.props.selectedRecord.nprojectquotationcode;\r\n    }\r\n\r\n        const inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectQuotation\",\r\n            inputData: inputData,\r\n            operation: operation, saveType, formRef,\r\n            selectedRecord: { ...this.props.selectedRecord }\r\n        }\r\n        return inputParam;\r\n    }\r\n//ALPD-3566 End\r\n    onSaveProjectMasterMember(saveType, formRef) {\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        // inputData[\"supplier\"] = this.props.masterData.SelectedSupplier;\r\n        inputData[\"ProjectMember\"] = {};\r\n\r\n\r\n        let projectmemberArray = []\r\n        projectmemberArray = this.props.selectedRecord.nusercode.map(item => {\r\n            let projectMasterData = {}\r\n\r\n            projectMasterData[\"nusercode\"] = item.value\r\n            projectMasterData[\"nprojectmastercode\"] = this.props.masterData.SelectedProjectMaster.nprojectmastercode;\r\n\r\n\r\n            return projectMasterData;\r\n        });\r\n        inputData['ProjectMember'] = projectmemberArray;\r\n\r\n        const inputParam = {\r\n            classUrl: \"projectmaster\",\r\n            methodUrl: \"ProjectMember\",\r\n            inputData: inputData,\r\n            operation: this.props.operation, saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    deleteRecord = (projectmasterfileparam) => {\r\n\r\n        if (this.props.masterData.SelectedProjectMaster.ntransactionstatus === transactionStatus.DRAFT) {\r\n\r\n            let inputParam = {};\r\n           // let inputData = {};\r\n            // if (this.props.screenName === 'ProjectMaster File') { \r\n            let selectedRecord = projectmasterfileparam.selectedRecord\r\n\r\n            selectedRecord = { ...selectedRecord, ntransactionstatus: this.props.masterData.SelectedProjectMaster.ntransactionstatus }\r\n\r\n            // inputData[\"projectmasterfile\"]={\r\n            //     selectedRecord                    \r\n            //     };\r\n\r\n            //        if (this.props.screenName === 'IDS_FILE') {\r\n            inputParam = {\r\n                classUrl: \"projectmaster\",\r\n                methodUrl: projectmasterfileparam.methodUrl,\r\n                inputData: {\r\n\r\n                    \"projectmasterfile\": selectedRecord,\r\n                    \"userinfo\": this.props.userInfo\r\n                },\r\n\r\n                operation: projectmasterfileparam.operation,\r\n                //dataState: this.state.dataState,\r\n                //dataStateMaterial: this.state.dataStateMaterial\r\n                dataState: this.state.dataState\r\n            }\r\n            //          }\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, projectmasterfileparam.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData },\r\n                        openChildModal: true, screenName: projectmasterfileparam.screenName, operation: projectmasterfileparam.operation\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n\r\n        }\r\n        else {\r\n\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTVERSION\" }));\r\n        }\r\n    }\r\n   \r\n    /*   deleteAttachment = (event, file, fieldName) => {\r\n           let selectedRecord = this.state.selectedRecord || {};\r\n           selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n   \r\n           this.setState({\r\n               selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n           });\r\n       } */\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.props.selectedRecord[\"esigncomments\"],\r\n                    nreasoncode: this.props.selectedRecord[\"esignreason\"] && this.props.selectedRecord[\"esignreason\"].value,\r\n                    spredefinedreason: this.props.selectedRecord[\"esignreason\"] && this.props.selectedRecord[\"esignreason\"].label,\r\n\r\n                },\r\n                password: this.props.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\n\r\nexport default injectIntl(ProjectMasterTab);\r\n\r\n"]},"metadata":{},"sourceType":"module"}