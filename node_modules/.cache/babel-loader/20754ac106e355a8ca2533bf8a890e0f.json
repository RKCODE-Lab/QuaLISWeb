{"ast":null,"code":"import _createForOfIteratorHelper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{toast}from'react-toastify';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import Axios from'axios';import{numericGrade}from'../pages/ResultEntryBySample/ResultEntryValidation';import{constructOptionList,fillRecordBasedOnCheckBoxSelection,filterRecordBasedOnTwoArrays,getRecordBasedOnPrimaryKeyName,getSameRecordFromTwoArrays,replaceUpdatedObject,sortData,updatedObjectWithNewElement,rearrangeDateFormat,filterRecordBasedOnPrimaryKeyName,reArrangeArrays,compareArrays,CF_encryptionData,sortDataByParent}from'../components/CommonScript';import{checkBoxOperation,transactionStatus}from'../components/Enumeration';import{crudMaster,postCRUDOrganiseTransSearch}from'./ServiceAction';export function getsubSampleREDetail(inputData,isServiceRequired){return function(dispatch){var inputParamData={ntype:2,nflag:inputData.nflag||2,nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntranscode:String(inputData.ntransactionstatus),ntransactiontestcode:0,userinfo:inputData.userinfo,ntestcode:inputData.ntestcode,napprovalversioncode:inputData.napprovalversioncode,fromdate:inputData.fromdate,todate:inputData.todate,activeTestKey:inputData.activeTestKey,activeSampleKey:inputData.activeSampleKey,//nneedsubsample: inputData.masterData.nneedsubsample,\nnneedsubsample:inputData.masterData.realRegSubTypeValue.nneedsubsample,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,nneedtemplatebasedflow:inputData.nneedtemplatebasedflow,nworlistcode:inputData.nworlistcode,nbatchmastercode:inputData.nbatchmastercode,nneedReceivedInLab:inputData.nneedReceivedInLab};var activeName=\"\";var dataStateName=\"\";// let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n//     documentDataState, testCommentDataState } = inputData\ndispatch(initRequest(true));if(isServiceRequired){rsapi.post(\"resultentrybysample/getResultEntryDetails\",_objectSpread(_objectSpread({},inputParamData),{},{checkBoxOperation:inputData.checkBoxOperation})).then(function(response){// if (response.data.DynamicGetSamples) {\n//     sortData(response.data.DynamicGetSamples, \"\", \"\");\n// }\n// if (response.data.DynamicGetTests) {\n//     sortData(response.data.DynamicGetTests, \"descending\", \"npreregno\");\n// }\nsortData(response.data);//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\nvar check=false;if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){if(response.data['RE_TEST']===undefined)check=true;}if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){if(response.data['RE_TEST']===undefined&&inputData.masterData.RESelectedTest.length===0)check=true;}if(check){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_TESTISNOTAVAILABLE\"}));}else{response.data['RE_SUBSAMPLE']=sortDataByParent(response.data['RE_SUBSAMPLE'],inputData.sample,\"npreregno\");// let responseData = { ...response.data, RESelectedSubSample: inputData.RESelectedSubSample }\n// responseData = sortData(responseData)\nvar oldSelectedTest=inputData.masterData.RESelectedTest;fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);//let RESelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5 || inputData.checkBoxOperation === 7 ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\nvar RESelectedSubSample=inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT||inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS||inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL?response.data.RESelectedSubSample:inputData.masterData.RESelectedSubSample;RESelectedSubSample=inputData.masterData.realRegSubTypeValue.nneedsubsample?RESelectedSubSample:inputData.masterData.RE_SUBSAMPLE;//for with sub sample\n/*   let check =true;\r\n                    if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                        if(inputData.masterData.realRegSubTypeValue.nneedsubsample){\r\n                        if(!(RESelectedSubSample[0].ntransactionsamplecode===(inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactionsamplecode : -1)))\r\n                            check =false;\r\n                        }\r\n                            else{\r\n                                  check=response.data['RE_TEST']!==undefined;\r\n                            }\r\n                        }\r\n                                        else if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                                          check=response.data['RE_TEST']!==undefined;\r\n                                        }\r\n\r\n            if( !check){\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_TESTISNOTAVAILABLE\"\r\n                        }));\r\n                   }\r\n                   */var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{// ...response.data,\nRESelectedTest:inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[],RESelectedSample:inputData.RESelectedSample,RESelectedSubSample:RESelectedSubSample});// if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\n//     inputData.searchSampleRef.current.value = \"\";\n//     masterData['searchedSample'] = undefined\n// }\nif(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTest']=undefined;}var _inputData=inputData,testskip=_inputData.testskip,testtake=_inputData.testtake,subSampleSkip=_inputData.subSampleSkip,subSampleTake=_inputData.subSampleTake;// let bool = false;\n// Commented bool value because no need to check bool condition to update skipInfo value.\nvar skipInfo={};// if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\ntestskip=0;// bool = true\n// }\nsubSampleSkip=0;// bool = true\n// if (bool) {\nskipInfo={testskip:testskip,testtake:testtake,subSampleSkip:subSampleSkip,subSampleTake:subSampleTake};// }\nvar TestParameters=[];var ResultUsedInstrument=[];var ResultUsedMaterial=[];var ResultUsedTasks=[];var RegistrationTestAttachment=[];var ResultChangeHistory=[];var RegistrationTestComment=[];var RegistrationComment=[];// let RegistrationSampleAttachment = [];\n//if (inputData.checkBoxOperation === 1) {\nif(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){//added by sudharshanan for test select issue while sample click\nvar wholeTestList=masterData.RE_TEST.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.map(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var ntransactiontestcode;var npreregno;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{RESelectedTest:oldSelectedTest});}else{ntransactiontestcode=masterData.RESelectedTest[0].ntransactiontestcode;npreregno=masterData.RESelectedSample[0].npreregno;}switch(inputData.activeTestKey){case\"IDS_RESULTS\":TestParameters=keepOld?inputData.masterData.TestParameters:getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":ResultUsedInstrument=keepOld?inputData.masterData.ResultUsedInstrument:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":ResultUsedMaterial=keepOld?inputData.masterData.ResultUsedMaterial:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":ResultUsedTasks=keepOld?inputData.masterData.ResultUsedTasks:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";break;case\"IDS_RESULTCHANGEHISTORY\":ResultChangeHistory=keepOld?inputData.masterData.ResultChangeHistory:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_SAMPLECOMMENTS\":RegistrationComment=keepOld?inputData.masterData.RegistrationComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment,npreregno,\"npreregno\");activeName=\"RegistrationComment\";dataStateName=\" sampleChangeDataState\";break;default:TestParameters=keepOld?inputData.masterData.TestParameters:getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}// } else if (inputData.checkBoxOperation === 5) {\n}else if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS){var list=[];var dbData=[];switch(inputData.activeTestKey){case\"IDS_RESULTS\":dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.TestParameters),_toConsumableArray(response.data.TestParameters));TestParameters=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_INSTRUMENT\":dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedInstrument),_toConsumableArray(response.data.ResultUsedInstrument));ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_MATERIAL\":list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedMaterial),_toConsumableArray(response.data.ResultUsedMaterial));ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TASK\":dbData=response.data.ResultUsedTasks||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedTasks),_toConsumableArray(dbData));list.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TESTATTACHMENTS\":dbData=response.data.RegistrationTestAttachment||[];list=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(dbData));RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_RESULTCHANGEHISTORY\":dbData=response.data.ResultChangeHistory||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultChangeHistory),_toConsumableArray(dbData));ResultChangeHistory=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TESTCOMMENTS\":dbData=response.data.RegistrationTestComment||[];list=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(dbData));RegistrationTestComment=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_SAMPLECOMMENTS\":dbData=response.data.RegistrationComment||[];list=[].concat(_toConsumableArray(inputData.masterData.RegistrationComment),_toConsumableArray(dbData));RegistrationComment=getRecordBasedOnPrimaryKeyName(list,inputData.RESelectedSample.length>0?inputData.RESelectedSample[0].npreregno:\"\",\"npreregno\");break;default:dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.TestParameters),_toConsumableArray(dbData));TestParameters=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;}}//else if (inputData.checkBoxOperation === 7) {\nelse if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL){//getSameRecordFromTwoArrays( inputData.masterData.RE_SAMPLE, responseData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\nvar _list=[];switch(inputData.activeTestKey){case\"IDS_RESULTS\":_list=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":_list=response.data.ResultUsedInstrument?sortData(response.data.ResultUsedInstrument,'descending','nresultusedinstrumentcode'):[];ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":_list=response.data.ResultUsedMaterial?sortData(response.data.ResultUsedMaterial,'descending','nresultusedmaterialcode'):[];ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":_list=response.data.ResultUsedTasks?sortData(response.data.ResultUsedTasks,'descending','nresultusedtaskcode'):[];_list.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":_list=response.data.RegistrationTestAttachment?sortData(response.data.RegistrationTestAttachment,'descending','ntestattachmentcode'):[];RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";break;case\"IDS_RESULTCHANGEHISTORY\":_list=response.data.ResultChangeHistory?sortData(response.data.ResultChangeHistory,'descending','nresultchangehistorycode'):[];ResultChangeHistory=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTCOMMENTS\":_list=response.data.RegistrationTestComment?sortData(response.data.RegistrationTestComment,'descending','ntestcommentcode'):[];RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;break;case\"IDS_SAMPLECOMMENTS\":RegistrationComment=response.data.RegistrationComment?_toConsumableArray(response.data.RegistrationComment):[];activeName=\"RegistrationComment\";dataStateName=\"sampleCommentsDataState\";break;default:_list=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}}else{var _list2=[];if(!inputData.masterData.realRegSubTypeValue.nneedsubsample){var _wholeTestList=masterData.RE_TEST.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.map(function(test,index){if(!_wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var _keepOld=false;var _ntransactiontestcode;if(oldSelectedTest.length>0){_keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{RESelectedTest:oldSelectedTest});}else{_ntransactiontestcode=masterData.RESelectedTest[0].ntransactiontestcode;}}switch(inputData.activeTestKey){case\"IDS_RESULTS\":_list2=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":_list2=response.data.ResultUsedInstrument?sortData(response.data.ResultUsedInstrument,'descending','nresultusedinstrumentcode'):[];ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":_list2=response.data.ResultUsedMaterial?sortData(response.data.ResultUsedMaterial,'descending','nresultusedmaterialcode'):[];ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":_list2=response.data.ResultUsedTasks?sortData(response.data.ResultUsedTasks,'descending','nresultusedtaskcode'):[];_list2.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":_list2=response.data.RegistrationTestAttachment?sortData(response.data.RegistrationTestAttachment,'descending','ntestattachmentcode'):[];RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";break;case\"IDS_RESULTCHANGEHISTORY\":_list2=response.data.ResultChangeHistory?sortData(response.data.ResultChangeHistory,'descending','nresultchangehistorycode'):[];ResultChangeHistory=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTCOMMENTS\":_list2=response.data.RegistrationTestComment?sortData(response.data.RegistrationTestComment,'descending','ntestcommentcode'):[];RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_SAMPLECOMMENTS\":_list2=response.data.RegistrationComment?sortData(response.data.RegistrationComment,'descending','nregcommentcode'):[];RegistrationComment=getRecordBasedOnPrimaryKeyName(_list2,inputData.RESelectedSample.length>0?inputData.RESelectedSample[0].npreregno:\"\",\"npreregno\");activeName=\"RegistrationComment\";dataStateName=\"sampleChangeDataState\";break;default:_list2=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list2,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}}masterData=_objectSpread(_objectSpread({},masterData),{},{// wholeApprovalParameter,\nTestParameters:TestParameters,// wholeResultUsedInstrument,\nResultUsedInstrument:ResultUsedInstrument,ResultUsedMaterial:ResultUsedMaterial,// wholeResultUsedTasks,\nResultUsedTasks:ResultUsedTasks,// wholeRegistrationTestAttachment,\nRegistrationTestAttachment:RegistrationTestAttachment,// wholeResultChangeHistory,\nResultChangeHistory:ResultChangeHistory,// wholeRegistrationTestComments,\nRegistrationTestComment:RegistrationTestComment,RegistrationComment:RegistrationComment// RegistrationSampleAttachment\n});if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}// Start of ALPD-4132 Additional Filter info to be Dispatched on Save - ATE-241\nvar multifilterInfo={};if(inputData.multiFilterLoad!==undefined){if(inputData.searchSampleRef!==undefined&&inputData.searchSampleRef.current!==null){inputData.searchSampleRef.current.value=\"\";}if(inputData.searchSubSampleRef!==undefined&&inputData.searchSubSampleRef.current!==null){inputData.searchSubSampleRef.current.value=\"\";}if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";}multifilterInfo={multiFilterLoad:inputData.multiFilterLoad,openModal:inputData.openModal,searchSampleRef:inputData.searchSampleRef,searchSubSampleRef:inputData.searchSubSampleRef,searchTestRef:inputData.searchTestRef,testskip:inputData.testskip,subsampleskip:inputData.subsampleskip,skip:inputData.skip};}//  End of ALPD-4132 - ATE-241\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterData:masterData,loading:false,skip:undefined,take:undefined,subSampleSkip:undefined,subSampleTake:undefined},skipInfo),{},{activeTabIndex:inputData.activeTabIndex},multifilterInfo)});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{var oldSelectedTest=inputData.masterData.RESelectedTest;//let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\n//let isGrandChildGetRequired = false;\nvar oldSelectedSubSample=inputData.masterData.RESelectedSubSample;var _inputData2=inputData,subsampletake=_inputData2.subsampletake,subsampleskip=_inputData2.subsampleskip;var skipInfo={};var TestSelected=[];var subSampleSelected=[];if(inputData[\"statusNone\"]){TestSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}else{TestSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest,inputData.removeElementFromArray[0].npreregno,\"npreregno\");subSampleSelected=filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");}var isGrandChildGetRequired=false;if(TestSelected.length>0){isGrandChildGetRequired=false;}else{isGrandChildGetRequired=true;}fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.RESelectedSample,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var ntransactiontestcode=inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode.toString():\"\";var RESelectedSample=inputData.RESelectedSample;var RESelectedTest=inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[];var RESelectedSubSample=inputData.masterData.RE_SUBSAMPLE;if(inputData.masterData.nneedsubsample){var filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RE_SUBSAMPLE,\"ntransactionsamplecode\");RESelectedSubSample=filterSelectedSubSample.length>0?filterSelectedSubSample:[inputData.masterData.RE_SUBSAMPLE[0]];if(inputData.masterData.RE_SUBSAMPLE.length<=inputData.subsampleskip){subsampleskip=0;skipInfo={subsampletake:subsampletake,subsampleskip:subsampleskip};}}var ntransactionsamplecode=RESelectedSubSample.map(function(subsample){return subsample.ntransactionsamplecode;}).join(',');var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{RESelectedSample:RESelectedSample,RESelectedSubSample:RESelectedSubSample,RESelectedTest:RESelectedTest});inputData=_objectSpread(_objectSpread({},inputData),{},{ntransactiontestcode:ntransactiontestcode,ntransactionsamplecode:ntransactionsamplecode,RESelectedSample:RESelectedSample,RESelectedTest:RESelectedTest,RESelectedSubSample:RESelectedSubSample,//checkBoxOperation: 3,\ncheckBoxOperation:checkBoxOperation.SINGLESELECT,activeTestKey:inputData.activeTestKey,masterData:masterData});if(RESelectedTest.length>0){inputData=_objectSpread(_objectSpread({},inputData),{},{childTabsKey:[\"TestParameters\",\"ResultUsedInstrument\",\"ResultUsedMaterial\",\"ResultUsedTasks\",\"RegistrationTestAttachment\",\"ResultChangeHistory\",\"RegistrationTestComment\",\"ResultChangeHistory\"]});dispatch(getTestChildTabREDetail(inputData,true));}else{inputData=_objectSpread(_objectSpread({},inputData),{},{masterData:masterData,childTabsKey:[\"RE_TEST\"]});dispatch(getTestREDetail(inputData,true));}}else{//added by sudharshanan for test select issue while sample click\nvar _masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{// RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\n// RESelectedSample: inputData.RESelectedSample,\n// RESelectedSubSample: inputData.masterData.nneedsubsample && inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE\nRESelectedTest:TestSelected?TestSelected:inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[],RESelectedSample:inputData.RESelectedSample,RESelectedSubSample:subSampleSelected?subSampleSelected:inputData.masterData.RE_SUBSAMPLE.length>0?[inputData.masterData.RE_SUBSAMPLE[0]]:[]});var subsamplecheck=true;if(inputData.masterData.nneedsubsample){var SubSampleSelected=getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample,inputData.removeElementFromArray[0].npreregno,\"npreregno\");if(SubSampleSelected.length>0){var _filterSelectedSubSample=getSameRecordFromTwoArrays(oldSelectedSubSample,inputData.masterData.RE_SUBSAMPLE,\"ntransactionsamplecode\");if(_filterSelectedSubSample.length===0){var wholeSubSample=_masterData.RE_SUBSAMPLE.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.forEach(function(test,index){if(!wholeSubSample.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});if(oldSelectedSubSample.length===0&&wholeSubSample.length>0&&_masterData.selectedTest.length===0){var selectedSubSample1=[inputData.masterData.RE_SUBSAMPLE[0]];_masterData=_objectSpread(_objectSpread({},_masterData),{},{RESelectedSubSample:selectedSubSample1,selectedTest:[]});inputData=_objectSpread(_objectSpread({},inputData),_masterData);inputData[\"npreregno\"]=selectedSubSample1.map(function(x){return x.npreregno;}).join(\",\");inputData[\"ntransactionsamplecode\"]=selectedSubSample1.map(function(x){return x.ntransactionsamplecode;}).join(\",\");// inputData[\"checkBoxOperation\"] = 3\ninputData[\"checkBoxOperation\"]=checkBoxOperation.SINGLESELECT;inputData[\"childTabsKey\"]=[\"RE_TEST\"];subsamplecheck=false;dispatch(getTestREDetail(inputData,true));}}else{oldSelectedSubSample=_filterSelectedSubSample;}}else{var _wholeSubSample=_masterData.RE_SUBSAMPLE.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.forEach(function(test,index){if(!_wholeSubSample.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});}if(subsamplecheck){_masterData=_objectSpread(_objectSpread({},_masterData),{},{RESelectedSubSample:oldSelectedSubSample});}if(inputData.masterData.RE_SUBSAMPLE.length<=inputData.subsampleskip){subsampleskip=0;_skipInfo={subsampleskip:subsampleskip,subsampletake:subsampletake};}}var wholeTestList=_masterData.RE_TEST.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.map(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var _ntransactiontestcode2;if(oldSelectedTest.length>0){keepOld=true;_masterData=_objectSpread(_objectSpread({},_masterData),{},{RESelectedTest:oldSelectedTest});}else{_ntransactiontestcode2=inputData.masterData.RE_TEST[0].ntransactiontestcode;// ntransactiontestcode = masterData.RE_TEST[0].ntransactiontestcode\n}//const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\n//ntransactiontestcode, \"ntransactiontestcode\");\nvar TestParameters=keepOld?inputData[\"statusNone\"]?getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,inputData.removeElementFromArray[0].npreregno,\"npreregno\"):filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,inputData.removeElementFromArray[0].npreregno,\"npreregno\"):getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,_ntransactiontestcode2,\"ntransactiontestcode\");var ResultUsedInstrument=keepOld?inputData.masterData.ResultUsedInstrument:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument||[],_ntransactiontestcode2,\"ntransactiontestcode\");var ResultUsedMaterial=keepOld?inputData.masterData.ResultUsedMaterial:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial||[],_ntransactiontestcode2,\"ntransactiontestcode\");var ResultUsedTasks=keepOld?inputData.masterData.ResultUsedTasks:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks||[],_ntransactiontestcode2,\"ntransactiontestcode\");var RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment||[],_ntransactiontestcode2,\"ntransactiontestcode\");var RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment||[],_ntransactiontestcode2,\"ntransactiontestcode\");var ResultChangeHistory=keepOld?inputData.masterData.ResultChangeHistory:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory||[],_ntransactiontestcode2,\"ntransactiontestcode\");var _inputData3=inputData,testskip=_inputData3.testskip,testtake=_inputData3.testtake;var bool=false;var _skipInfo={};if(inputData.masterData.RE_TEST.length<=inputData.testskip){testskip=0;bool=true;}if(bool){_skipInfo={testskip:testskip,testtake:testtake};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_objectSpread(_objectSpread({},_masterData),{},{RESelectedSample:inputData.RESelectedSample,// selectedPreregno: inputData.npreregno,\n// RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\n//     searchedTest[0]\n// ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\n//     RE_TEST[0]\n// ] : [],\n// RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\nTestParameters:TestParameters,ResultUsedInstrument:ResultUsedInstrument,ResultUsedMaterial:ResultUsedMaterial,ResultUsedTasks:ResultUsedTasks,RegistrationTestAttachment:RegistrationTestAttachment,RegistrationTestComment:RegistrationTestComment,ResultChangeHistory:ResultChangeHistory// RESelectedSubSample: inputData.masterData.RE_SUBSAMPLE\n}),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestKey:inputData.activeTestKey},_skipInfo)});}}};}export function getTestREDetail(inputData,isServiceRequired){return function(dispatch){var activeName=\"\";var dataStateName=\"\";var inputParamData={nflag:3,ntype:3,nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntransactiontestcode:0,ntranscode:inputData.ntransactionstatus.toString(),ntransactionsamplecode:inputData.ntransactionsamplecode,userinfo:inputData.userinfo,ntestcode:inputData.ntestcode,activeTestKey:inputData.activeTestKey,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,checkBoxOperation:inputData.checkBoxOperation,nneedsubsample:inputData.nneedsubsample,nworlistcode:inputData.nworlistcode,nbatchmastercode:inputData.nbatchmastercode,nneedReceivedInLab:inputData.nneedReceivedInLab,napprovalversioncode:inputData.napprovalversioncode};var subSample=inputData.nneedsubsample;// dispatch(initRequest(true));\n// rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\nif(isServiceRequired){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\",inputParamData).then(function(response){// let responseData = {\n//     ...response.data,\n//     RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\n//     RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\n//     // RESelectedTest: inputData.masterData.RESelectedTest\n// }\nvar responseData=_objectSpread({},response.data);responseData=sortData(responseData,'descending','npreregno');var oldSelectedTest=inputData.masterData.RESelectedTest;var oldSelectedSubSample=inputData.masterData.RESelectedSubSample||[];fillRecordBasedOnCheckBoxSelection(inputData.masterData,response.data,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{// ...response.data,\nRESelectedTest:inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[],RESelectedSample:inputData.masterData.RESelectedSample,RESelectedSubSample:inputData.RESelectedSubSample||inputData.masterData.RESelectedSubSample});if(inputData.searchTestRef!==undefined&&inputData.searchTestRef.current!==null){inputData.searchTestRef.current.value=\"\";masterData['searchedTests']=undefined;}var _inputData4=inputData,testskip=_inputData4.testskip,testtake=_inputData4.testtake,subSampleSkip=_inputData4.subSampleSkip,subSampleTake=_inputData4.subSampleTake;// let bool = false;\n// Commented bool value because no need to check bool condition to update skipInfo value.\nvar skipInfo={};// if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\ntestskip=0;// bool = true\n// }\n// if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subSampleSkip) {\nsubSampleSkip=0;// bool = true\n// }\n// if (bool) {\nskipInfo={testskip:testskip,testtake:testtake,subSampleSkip:subSampleSkip,subSampleTake:subSampleTake};// }\nvar TestParameters=[];var ResultUsedInstrument=[];var ResultUsedMaterial=[];var ResultUsedTasks=[];var RegistrationTestAttachment=[];var ResultChangeHistory=[];var RegistrationTestComment=[];var RegistrationSampleComment=[];var RegistrationSampleAttachment=[];//if (inputData.checkBoxOperation === 1) {\nif(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){//added by sudharshanan for test select issue while sample click\nvar wholeTestList=masterData.RE_TEST.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.map(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var ntransactiontestcode;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{RESelectedTest:oldSelectedTest});}else{ntransactiontestcode=masterData.RESelectedTest[0].ntransactiontestcode;}switch(inputData.activeTestKey){case\"IDS_RESULTS\":TestParameters=keepOld?inputData.masterData.TestParameters:getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":ResultUsedInstrument=keepOld?inputData.masterData.ResultUsedInstrument:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":ResultUsedMaterial=keepOld?inputData.masterData.ResultUsedMaterial:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":ResultUsedTasks=keepOld?inputData.masterData.ResultUsedTasks:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";break;case\"IDS_RESULTCHANGEHISTORY\":ResultChangeHistory=keepOld?inputData.masterData.ResultChangeHistory:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTCOMMENTS\":RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;// case \"IDS_SAMPLECOMMENTS\":\n//         RegistrationTestComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\n//         activeName = \"RegistrationComment\"\n//         dataStateName = \"sampleChangeDataState\"\n//         break;\ndefault:TestParameters=keepOld?inputData.masterData.TestParameters:getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,ntransactiontestcode,\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}//} else if (inputData.checkBoxOperation === 5) {\n}else if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTSTATUS){var list=[];var dbData=[];switch(inputData.activeTestKey){case\"IDS_RESULTS\":dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.TestParameters),_toConsumableArray(response.data.TestParameters));TestParameters=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_INSTRUMENT\":dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedInstrument),_toConsumableArray(response.data.ResultUsedInstrument));ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_MATERIAL\":list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedMaterial),_toConsumableArray(response.data.ResultUsedMaterial));ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TASK\":dbData=response.data.ResultUsedTasks||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultUsedTasks),_toConsumableArray(dbData));list.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TESTATTACHMENTS\":dbData=response.data.RegistrationTestAttachment||[];list=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(dbData));RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_RESULTCHANGEHISTORY\":dbData=response.data.ResultChangeHistory||[];list=[].concat(_toConsumableArray(inputData.masterData.ResultChangeHistory),_toConsumableArray(dbData));ResultChangeHistory=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TESTCOMMENTS\":dbData=response.data.RegistrationTestComment||[];list=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestComment),_toConsumableArray(dbData));RegistrationTestComment=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;default:dbData=response.data.TestParameters||[];list=[].concat(_toConsumableArray(inputData.masterData.TestParameters),_toConsumableArray(dbData));TestParameters=getRecordBasedOnPrimaryKeyName(list,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;}// } else if (inputData.checkBoxOperation === 7) {\n}else if(inputData.checkBoxOperation===checkBoxOperation.QUICKSELECTALL){var _list3=[];var _dbData=[];var testList=reArrangeArrays(inputData.masterData.RE_SUBSAMPLE,responseData.RE_TEST,\"ntransactionsamplecode\");masterData=_objectSpread(_objectSpread({},masterData),{},{RESelectedTest:[testList[0]],RE_TEST:testList// ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\n});switch(inputData.activeTestKey){case\"IDS_RESULTS\":_dbData=response.data.TestParameters||[];_list3=_toConsumableArray(response.data.TestParameters);TestParameters=getRecordBasedOnPrimaryKeyName(_list3,testList.length>0?testList[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_INSTRUMENT\":_dbData=response.data.TestParameters||[];_list3=[].concat(_toConsumableArray(inputData.masterData.ResultUsedInstrument),_toConsumableArray(response.data.ResultUsedInstrument));ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_MATERIAL\":_list3=[].concat(_toConsumableArray(inputData.masterData.ResultUsedMaterial),_toConsumableArray(response.data.ResultUsedMaterial));ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TASK\":_dbData=response.data.ResultUsedTasks||[];_list3=[].concat(_toConsumableArray(inputData.masterData.ResultUsedTasks),_toConsumableArray(_dbData));_list3.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_TESTATTACHMENTS\":_dbData=response.data.RegistrationTestAttachment||[];_list3=[].concat(_toConsumableArray(inputData.masterData.RegistrationTestAttachment),_toConsumableArray(_dbData));RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;case\"IDS_RESULTCHANGEHISTORY\":_dbData=response.data.ResultChangeHistory||[];_list3=[].concat(_toConsumableArray(inputData.masterData.ResultChangeHistory),_toConsumableArray(_dbData));ResultChangeHistory=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;// case \"IDS_TESTCOMMENTS\":\n//     dbData = response.data.RegistrationTestComment || []\n//     list = [...inputData.masterData.RegistrationTestComment, ...dbData];\n//     RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\n//     break;\ndefault:_dbData=response.data.TestParameters||[];_list3=[].concat(_toConsumableArray(inputData.masterData.TestParameters),_toConsumableArray(_dbData));TestParameters=getRecordBasedOnPrimaryKeyName(_list3,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");break;}}else{var _list4=[];switch(inputData.activeTestKey){case\"IDS_RESULTS\":_list4=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":_list4=response.data.ResultUsedInstrument?sortData(response.data.ResultUsedInstrument,'descending','nresultusedinstrumentcode'):[];ResultUsedInstrument=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":_list4=response.data.ResultUsedMaterial?sortData(response.data.ResultUsedMaterial,'descending','nresultusedmaterialcode'):[];ResultUsedMaterial=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":_list4=response.data.ResultUsedTasks?sortData(response.data.ResultUsedTasks,'descending','nresultusedtaskcode'):[];_list4.reduce(function(unique,item){return unique.includes(item)?unique:[].concat(_toConsumableArray(unique),[item]);},[]);ResultUsedTasks=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":_list4=response.data.RegistrationTestAttachment?sortData(response.data.RegistrationTestAttachment,'descending','ntestattachmentcode'):[];RegistrationTestAttachment=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestAttachment\";break;case\"IDS_RESULTCHANGEHISTORY\":_list4=response.data.ResultChangeHistory?sortData(response.data.ResultChangeHistory,'descending','nresultchangehistorycode'):[];ResultChangeHistory=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_TESTCOMMENTS\":_list4=response.data.RegistrationTestComment?sortData(response.data.RegistrationTestComment,'descending','ntestcommentcode'):[];RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_SUBSAMPLEATTACHMENTS\":_list4=response.data.RegistrationSampleComment?sortData(response.data.RegistrationSampleComment,'descending','ntestcommentcode'):[];RegistrationTestComment=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_SUBSAMPLE.length>0?inputData.masterData.RE_SUBSAMPLE[0].ntransactionsamplecode:\"\",\"ntransactionsamplecode\");activeName=\"RegistrationSampleComment\";dataStateName=\"testCommentDataState\";break;default:_list4=response.data.TestParameters?sortData(response.data.TestParameters,'ascending','ntransactionresultcode'):[];TestParameters=getRecordBasedOnPrimaryKeyName(_list4,inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode:\"\",\"ntransactiontestcode\");activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}}if(subSample){var wholeSubsampleList=masterData.RE_SUBSAMPLE.map(function(b){return b.ntransactionsamplecode;});oldSelectedSubSample.map(function(test,index){if(!wholeSubsampleList.includes(test.ntransactionsamplecode)){oldSelectedSubSample.splice(index,1);}return null;});var _keepOld2=false;var ntransactionsamplecode;if(oldSelectedSubSample.length>0){_keepOld2=true;}else{ntransactionsamplecode=masterData.selectedSubSample[0].ntransactionsamplecode;}switch(inputData.activeSubSampleTab){case\"IDS_SUBSAMPLECOMMENTS\":RegistrationSampleComment=_keepOld2?inputData.masterData.RegistrationSampleComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleComment\";dataStateName=\"subSampleCommentDataState\";break;default:RegistrationSampleAttachment=_keepOld2?inputData.masterData.RegistrationSampleAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment,ntransactionsamplecode,\"ntransactionsamplecode\");activeName=\"RegistrationSampleAttachment\";dataStateName=\"subSampleAttachmentDataState\";break;}}masterData=_objectSpread(_objectSpread({},masterData),{},{// wholeApprovalParameter,\nTestParameters:TestParameters,// wholeResultUsedInstrument,\nResultUsedInstrument:ResultUsedInstrument,ResultUsedMaterial:ResultUsedMaterial,// wholeResultUsedTasks,\nResultUsedTasks:ResultUsedTasks,// wholeRegistrationTestAttachment,\nRegistrationTestAttachment:RegistrationTestAttachment,// wholeResultChangeHistory,\nResultChangeHistory:ResultChangeHistory,// wholeRegistrationTestComments,\nRegistrationTestComment:RegistrationTestComment,RegistrationSampleComment:RegistrationSampleComment,RegistrationSampleAttachment:RegistrationSampleAttachment});if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({masterData:masterData,loading:false,showFilter:false,activeTestKey:inputData.activeTestKey,activeTestTab:inputData.activeTestKey,screenName:inputData.activeTestKey},skipInfo),{},{subSampleSkip:undefined,subSampleTake:undefined})});}).catch(function(error){console.log(\"error:\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{//fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\nvar oldSelectedTest=inputData.masterData.RESelectedTest;//let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\n// let isGrandChildGetRequired = false;\n// if (TestSelected.length > 0) {\n//     isGrandChildGetRequired = true;\n// } else {\n//     isGrandChildGetRequired = false;\n// }\nvar TestSelected=inputData[\"statusNone\"]?getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest,inputData.removeElementFromArray[0].ntransactionsamplecode,\"ntransactionsamplecode\"):filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest,inputData.removeElementFromArray[0].ntransactionsamplecode,\"ntransactionsamplecode\");var isGrandChildGetRequired=false;if(TestSelected.length>0){isGrandChildGetRequired=false;}else{isGrandChildGetRequired=true;}fillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.RESelectedSubSample,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactionsamplecode\",inputData.removeElementFromArray);if(isGrandChildGetRequired){var ntransactiontestcode=inputData.masterData.RE_TEST.length>0?inputData.masterData.RE_TEST[0].ntransactiontestcode.toString():\"\";var RESelectedSubSample=inputData.RESelectedSubSample;var RESelectedTest=inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[];// let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\ninputData=_objectSpread(_objectSpread({},inputData),{},{childTabsKey:[\"TestParameters\",\"ResultUsedInstrument\",\"ResultUsedMaterial\",\"ResultUsedTasks\",\"RegistrationTestAttachment\",\"ResultChangeHistory\",\"RegistrationTestComment\",\"ResultChangeHistory\"],ntransactiontestcode:ntransactiontestcode,RESelectedSample:inputData.masterData.RESelectedSample,RESelectedTest:RESelectedTest,RESelectedSubSample:RESelectedSubSample,//checkBoxOperation: 3,\ncheckBoxOperation:checkBoxOperation.SINGLESELECT,activeTestKey:inputData.activeTestKey});dispatch(getTestChildTabREDetail(inputData,true));}else{//added by sudharshanan for test select issue while sample click\nvar masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{RESelectedTest:inputData.masterData.RE_TEST.length>0?[inputData.masterData.RE_TEST[0]]:[],RESelectedSubSample:inputData.RESelectedSubSample});var wholeTestList=masterData.RE_TEST.map(function(b){return b.ntransactiontestcode;});oldSelectedTest.map(function(test,index){if(!wholeTestList.includes(test.ntransactiontestcode)){oldSelectedTest.splice(index,1);}return null;});var keepOld=false;var _ntransactiontestcode3;if(oldSelectedTest.length>0){keepOld=true;masterData=_objectSpread(_objectSpread({},masterData),{},{RESelectedTest:oldSelectedTest});}else{_ntransactiontestcode3=masterData.RE_TEST[0].ntransactiontestcode;}// const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\n//     ntransactiontestcode, \"ntransactiontestcode\");\nvar TestParameters=keepOld?inputData[\"statusNone\"]?getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,inputData.removeElementFromArray[0].ntransactionsamplecode,'ntransactionsamplecode'):filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,inputData.removeElementFromArray[0].ntransactionsamplecode,'ntransactionsamplecode'):getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,_ntransactiontestcode3,\"ntransactiontestcode\");var ResultUsedInstrument=keepOld?inputData.masterData.ResultUsedInstrument:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument||[],_ntransactiontestcode3,\"ntransactiontestcode\");var ResultUsedMaterial=keepOld?inputData.masterData.ResultUsedMaterial:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial||[],_ntransactiontestcode3,\"ntransactiontestcode\");var ResultUsedTasks=keepOld?inputData.masterData.ResultUsedTasks:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks||[],_ntransactiontestcode3,\"ntransactiontestcode\");var RegistrationTestAttachment=keepOld?inputData.masterData.RegistrationTestAttachment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment||[],_ntransactiontestcode3,\"ntransactiontestcode\");var RegistrationTestComment=keepOld?inputData.masterData.RegistrationTestComment:getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment||[],_ntransactiontestcode3,\"ntransactiontestcode\");var ResultChangeHistory=keepOld?inputData.masterData.ResultChangeHistory:getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory||[],_ntransactiontestcode3,\"ntransactiontestcode\");var _inputData5=inputData,testskip=_inputData5.testskip,testtake=_inputData5.testtake;var bool=false;var skipInfo={};if(inputData.masterData.RE_TEST.length<=inputData.testskip){testskip=0;bool=true;}if(bool){skipInfo={testskip:testskip,testtake:testtake};}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSubSample:inputData.RESelectedSubSample,// selectedPreregno: inputData.npreregno,\n// RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\n//     searchedTest[0]\n// ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\n//     RE_TEST[0]\n// ] : [],\n// RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\nTestParameters:TestParameters,ResultUsedInstrument:ResultUsedInstrument,ResultUsedMaterial:ResultUsedMaterial,ResultUsedTasks:ResultUsedTasks,RegistrationTestAttachment:RegistrationTestAttachment,RegistrationTestComment:RegistrationTestComment,ResultChangeHistory:ResultChangeHistory}),loading:false,showFilter:false,activeSampleTab:inputData.activeSampleTab,activeTestKey:inputData.activeTestKey,activeTestTab:inputData.activeTestKey},skipInfo)});}}};}export function getSampleChildTabREDetail(inputData){return function(dispatch){var inputParamData={ntransactiontestcode:inputData.ntransactiontestcode,npreregno:inputData.npreregno,userinfo:inputData.userinfo};var url=\"\";switch(inputData.activeSampleKey){case\"IDS_DOCUMENTS\":url=\"attachment/getSampleAttachment\";break;case\"IDS_SAMPLEATTACHMENTS\":url=\"attachment/getSampleAttachment\";break;case\"IDS_APPROVALHISTORY\":url=\"resultentrybysample/getSampleApprovalHistory\";break;case\"IDS_SAMPLECOMMENTS\":url=\"comments/getSampleComment\";break;default:url=\"attachment/getSampleAttachment\";break;}dispatch(initRequest(true));rsapi.post(url,inputParamData).then(function(response){var responseData=_objectSpread({},response.data);//responseData = sortData(responseData)\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,responseData,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{RESelectedSample:inputData.RESelectedSample}),loading:false,showFilter:false,activeSampleKey:inputData.activeSampleKey,screenName:inputData.screenName}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTestChildTabREDetail(inputData,isServiceRequired){return function(dispatch){var inputParamData={ntransactiontestcode:inputData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\"),npreregno:inputData.npreregno,userinfo:inputData.userinfo};var activeName=\"\";var dataStateName=\"\";// let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n//     documentDataState, testCommentDataState } = inputData\nvar url=\"resultentrybysample/getTestbasedParameter\";switch(inputData.activeTestKey){case\"IDS_RESULTS\":url=\"resultentrybysample/getTestbasedParameter\";activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":url=\"resultentrybysample/getResultUsedInstrument\";activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":url=\"resultentrybysample/getResultUsedMaterial\";activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":url=\"resultentrybysample/getResultUsedTask\";activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":url=\"attachment/getTestAttachment\";activeName=\"RegistrationTestAttachment\";break;case\"IDS_TESTCOMMENTS\":url=\"comments/getTestComment\";activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_DOCUMENTS\":url=\"attachment/getSampleAttachment\";activeName=\"\";dataStateName=\"documentDataState\";break;case\"IDS_RESULTCHANGEHISTORY\":url=\"resultentrybysample/getResultChangeHistory\";activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_SAMPLEATTACHMENTS\":url=\"attachment/getSampleAttachment\";activeName=\"\";dataStateName=\"resultDataState\";break;default:url=\"resultentrybysample/getTestbasedParameter\";activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}dispatch(initRequest(true));if(isServiceRequired){rsapi.post(url,inputParamData).then(function(response){var responseData=_objectSpread(_objectSpread({},response.data),{},{RESelectedSample:inputData.RESelectedSample||inputData.masterData.RESelectedSample,RESelectedTest:inputData.RESelectedTest,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId});var skipInfo={};fillRecordBasedOnCheckBoxSelection(inputData.masterData,responseData,inputData.childTabsKey,inputData.checkBoxOperation,\"npreregno\",inputData.removeElementFromArray);var masterData=_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RESelectedTest:inputData.RESelectedTest});if(inputData[dataStateName]&&masterData[activeName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,activeTabIndex:inputData.activeTabIndex,activeTabId:inputData.activeTabId,activeTestTab:inputData.activeTestKey,loading:false,activeTestKey:inputData.activeTestKey,screenName:inputData.activeTestKey,testskip:undefined,testtake:undefined},skipInfo)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{//fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\nfillRecordBasedOnCheckBoxSelection(inputData.masterData,inputData.RESelectedTest,inputData.childTabsKey,inputData.checkBoxOperation,\"ntransactiontestcode\",inputData.removeElementFromArray);var skipInfo={};var masterData=_objectSpread(_objectSpread({},inputData.masterData),{},{RESelectedTest:inputData.RESelectedTest});if(masterData[activeName].length<=inputData[dataStateName]&&inputData[dataStateName].skip){skipInfo=_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined}));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}dispatch({type:DEFAULT_RETURN,payload:_objectSpread({masterData:masterData,loading:false,showFilter:false,activeTestKey:inputData.activeTestKey,screenName:inputData.screenName},skipInfo)});}};}export function getRERegistrationType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getRegistrationType\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),{},{defaultSampleType:inputData.defaultSampleType},response.data),{},{realDesignTemplateMapping:inputData.realDesignTemplateMapping,realApproveConfigVersion:inputData.realApproveConfigVersion,realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,realFilterStatusList:inputData.realFilterStatusList,realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,realRegistrationTypeList:inputData.realRegistrationTypeList,realTestvaluesList:inputData.realTestvaluesList}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getRERegistrationSubType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getRegistrationsubType\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{//defaultFilterStatus:inputData.masterData.defaultFilterStatus,\ndefaultRegistrationType:inputData.defaultRegistrationType,realDesignTemplateMapping:inputData.realDesignTemplateMapping,realApproveConfigVersion:inputData.realApproveConfigVersion,realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,realFilterStatusList:inputData.realFilterStatusList,realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,realRegistrationTypeList:inputData.realRegistrationTypeList,realTestvaluesList:inputData.realTestvaluesList}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREApprovalConfigVersion(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getApprovalConfigVersion\",inputData).then(function(response){var nneedsubsample=inputData.defaultRegistrationSubType&&inputData.defaultRegistrationSubType.nneedsubsample;dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),{},{nneedsubsample:nneedsubsample},response.data),{},{defaultRegistrationSubType:inputData.defaultRegistrationSubType,// fromDate: inputData.fromdate,\n//  toDate: inputData.todate\nrealDesignTemplateMapping:inputData.realDesignTemplateMapping,realApproveConfigVersion:inputData.realApproveConfigVersion,realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,realFilterStatusList:inputData.realFilterStatusList,realRegistrationTypeList:inputData.realRegistrationTypeList,realTestvaluesList:inputData.realTestvaluesList}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREFilterStatus(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getFilterStatus\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{defaultjobstatus:inputData.defaultjobstatus// fromDate: inputData.fromdate,\n// toDate: inputData.todate\n}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREJobStatus(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getApproveConfigVersionRegTemplateDesign\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{defaultApprovalConfigVersion:inputData.defaultApprovalConfigVersion// fromDate: inputData.fromdate,\n// toDate: inputData.todate\n}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getResultEntryDetails(inputParamData){var masterData=_objectSpread({},inputParamData.masterData);return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntryDetails\",_objectSpread(_objectSpread({},inputParamData.inputData),{},{nneedsubsample://inputParamData.masterData.nneedsubsample\ninputParamData.masterData.realRegSubTypeValue.nneedsubsample})).then(function(response){//let masterData = { ...inputParamData.masterData }\nif(inputParamData.refs.searchSampleRef!==undefined&&inputParamData.refs.searchSampleRef.current!==null){inputParamData.refs.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputParamData.refs.searchSubSampleRef!==undefined&&inputParamData.refs.searchSubSampleRef.current!==null){inputParamData.refs.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputParamData.refs.searchTestRef!==undefined&&inputParamData.refs.searchTestRef.current!==null){inputParamData.refs.searchTestRef.current.value=\"\";// masterData['searchedTests'] = undefined\nmasterData['searchedTest']=undefined;}//sortData(response.data)\nsortData(response.data,'ascending','ntransactionresultcode');if(response.data.rtn==\"IDS_USERNOTINRESULTENTRYFLOW\"){toast.warning(intl.formatMessage({id:\"IDS_USERNOTINRESULTENTRYFLOW\"}));}dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{realFromDate:response.data[\"fromDate\"],realToDate:response.data[\"toDate\"]}),loading:false,showTest:inputParamData.inputData.showTest,showSample:inputParamData.inputData.showSample,activeTestKey:inputParamData.inputData.activeTestKey,skip:0,take:inputParamData.inputData.take,testskip:0,testtake:inputParamData.inputData.testtake,resultDataState:_objectSpread(_objectSpread({},inputParamData.resultDataState),{},{sort:undefined,filter:undefined}),instrumentDataState:_objectSpread(_objectSpread({},inputParamData.instrumentDataState),{},{sort:undefined,filter:undefined}),materialDataState:_objectSpread(_objectSpread({},inputParamData.materialDataState),{},{sort:undefined,filter:undefined}),taskDataState:_objectSpread(_objectSpread({},inputParamData.taskDataState),{},{sort:undefined,filter:undefined}),documentDataState:_objectSpread(_objectSpread({},inputParamData.documentDataState),{},{sort:undefined,filter:undefined}),resultChangeDataState:_objectSpread(_objectSpread({},inputParamData.resultChangeDataState),{},{sort:undefined,filter:undefined}),testCommentDataState:_objectSpread(_objectSpread({},inputParamData.testCommentDataState),{},{sort:undefined,filter:undefined}),historyDataState:_objectSpread(_objectSpread({},inputParamData.historyDataState),{},{sort:undefined,filter:undefined}),samplePrintHistoryDataState:_objectSpread(_objectSpread({},inputParamData.samplePrintHistoryDataState),{},{sort:undefined,filter:undefined}),sampleHistoryDataState:_objectSpread(_objectSpread({},inputParamData.sampleHistoryDataState),{},{sort:undefined,filter:undefined})}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else if(error.response.status===401){toast.warn(intl.formatMessage({id:error.response.data.rtn}));dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread(_objectSpread({},masterData),error.response.data),{},{realFromDate:error.response.data[\"fromDate\"],realToDate:error.response.data[\"toDate\"]})}});}else{toast.warn(error.response.data);}});};}export function resultGetModule(inputData,userInfo,ncontrolcode,testskip,testtake){return function(dispatch){var additionalInfo=[];var TestList=inputData.searchedTest?_toConsumableArray(inputData.searchedTest):_toConsumableArray(inputData.RE_TEST);TestList=TestList.splice(testskip,testskip+testtake);var acceptTestList=getSameRecordFromTwoArrays(TestList,inputData.RESelectedTest,\"ntransactiontestcode\");if(acceptTestList&&acceptTestList.length>0){if(Object.values(inputData).length>0&&inputData.RESelectedTest.length>0){var inputParamData={ntransactiontestcode:acceptTestList?acceptTestList.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",userinfo:userInfo};inputParamData['nregtypecode']=inputData.realRegTypeValue.nregtypecode;inputParamData['nregsubtypecode']=inputData.realRegSubTypeValue.nregsubtypecode;dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntryResults\",inputParamData).then(function(response){var selectedRecord={};var selectedResultGrade=[];var paremterResultcode=[];var parameterResults=sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\");var predefDefaultFlag=false;var formFields=[];if(response.data.FormFields&&response.data.FormFields.length>0){var formFieldJSON=JSON.parse(response.data.FormFields[0].jsondata['value']);Object.entries(formFieldJSON).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return formFields.push(value);});}parameterResults.map(function(param,index){selectedResultGrade[index]={ngradecode:param.ngradecode};paremterResultcode[index]=param.ntransactionresultcode;var jsondata=JSON.parse(param.jsondata['value']);if(jsondata.hasOwnProperty('additionalInfo')){additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'];}predefDefaultFlag=false;response.data.PredefinedValues&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(function(predefinedvalue){// if (predefinedvalue.ndefaultstatus === transactionStatus.YES) {\n//     if (!predefDefaultFlag) {\n//         predefDefaultFlag = true;\n//         response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\n//             undefined, undefined).get(\"OptionList\");\n//     }\n// response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =\n//     constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\n//         undefined, undefined).get(\"OptionList\");\n//     if (response.data.ResultParameter[index].sresult === null) {\n//         response.data.ResultParameter[index].sresult = predefinedvalue.spredefinedname;\n//         response.data.ResultParameter[index].sresultpredefinedname = predefinedvalue.sresultpredefinedname;\n//         response.data.ResultParameter[index].sfinal = predefinedvalue.spredefinedsynonym;\n//         response.data.ResultParameter[index].editable = true;\n//         response.data.ResultParameter[index].ngradecode = predefinedvalue.ngradecode;\n//         if(predefinedvalue.spredefinedcomments&&predefinedvalue.spredefinedcomments!==null){\n//             response.data.ResultParameter[index].sresultcomment = predefinedvalue.spredefinedcomments\n//             &&predefinedvalue.spredefinedcomments;\n//         }\n//     }\n// }\n//  else {\nif(!predefDefaultFlag){predefDefaultFlag=true;response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]=constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]||[],'sresultpredefinedname','sresultpredefinedname',undefined,undefined,undefined).get(\"OptionList\");}//   }\n//return null;\n});if(parameterResults[index][\"nparametertypecode\"]==1){parameterResults[index][\"nresultaccuracycode\"]={\"value\":parameterResults[index][\"nresultaccuracycode\"],\"label\":parameterResults[index][\"sresultaccuracyname\"]};parameterResults[index][\"nunitcode\"]={\"value\":parameterResults[index][\"nunitcode\"],\"label\":parameterResults[index][\"sunitname\"]};}param['editable']=false;//return null;\n// response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =  constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\n// undefined, undefined).get(\"OptionList\");\n});var ResultAccuracyList=constructOptionList(response.data[\"ResultAccuracy\"]||[],\"nresultaccuracycode\",\"sresultaccuracyname\",undefined,undefined,false);var ResultAccuracy=ResultAccuracyList.get(\"OptionList\");var UnitList=constructOptionList(response.data[\"Unit\"]||[],\"nunitcode\",\"sunitname\",undefined,undefined,false);var Unit=UnitList.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData),response.data),{},{paremterResultcode:paremterResultcode//,\n//selectedResultGrade ,\n}),selectedRecord:{additionalInfo:additionalInfo.length>0?additionalInfo:[],selectedResultGrade:selectedResultGrade,ResultParameter:sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\")//response.data.ResultParameter \n},// parameterResults:response.data.ResultParameter,\nparameterResults:sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\"),isParameterInitialRender:true,loading:false,screenName:\"IDS_RESULTENTRY\",openModal:true,operation:\"update\",activeTestKey:\"IDS_RESULTS\",ncontrolcode:ncontrolcode,ResultAccuracy:ResultAccuracy,Unit:Unit,formFields:formFields}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//}\n}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}};}export function completeTest(inputParam,acceptList,userInfo,completeResultId,booleanFlag,param){if(acceptList!==undefined&&acceptList.length>0){return function(dispatch){var isSearched=false;var inputData=inputParam.testChildGetREParam;var inputParamData={ntype:3,// nflag: 2,\nninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,nportalrequired:inputParam.inputData.nportalrequired,basedrulesengine:param.basedrulesengine,nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,ntranscode:String(inputData.ntransactionstatus),napprovalversioncode:inputData.napprovalversioncode,napprovalconfigcode:inputData.napprovalconfigcode,ntransactionsamplecode:inputData.ntransactionsamplecode,userinfo:userInfo,fromdate:inputData.fromdate,todate:inputData.todate,ntestcode:inputData.ntestcode,transactiontestcode:acceptList?acceptList.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",ntransactiontestcode:0,activeTestKey:inputData.activeTestKey,ncontrolcode:inputParam.inputData.ncontrolcode,nneedsubsample:inputData.masterData.nneedsubsample,ndesigntemplatemappingcode:inputData.masterData.ndesigntemplatemappingcode,checkBoxOperation:checkBoxOperation.SINGLESELECT,nsettingcode:inputParam.nsettingcode,nusercode:inputParam.nusercode,susername:inputParam.susername,nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab};var activeName=\"\";var dataStateName=\"\";// let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n//     documentDataState, testCommentDataState } = inputData\n// let url = \"resultentrybysample/getTestbasedParameter\"\nswitch(inputData.activeTestKey){case\"IDS_RESULTS\":activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":activeName=\"RegistrationTestAttachment\";break;case\"IDS_TESTCOMMENTS\":activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_DOCUMENTS\":activeName=\"\";dataStateName=\"documentDataState\";break;case\"IDS_RESULTCHANGEHISTORY\":activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_SAMPLEATTACHMENTS\":activeName=\"\";dataStateName=\"resultDataState\";break;default:activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}dispatch(initRequest(true));rsapi.post(\"resultentrybysample/completeTest\",inputParamData).then(function(response){var _objectSpread8;var RE_SAMPLE=[];var RE_SUBSAMPLE=[];var RE_TEST=[];var onlySampleService=false;var responseData=sortData(response.data,'ascending','ntransactionresultcode');//response.data\n//rules engine new subsample outcome --start ---\nvar testcode=responseData[\"RE_TEST\"].map(function(test){return test.npreregno;}).join(\",\");var sampleCode=responseData[\"RE_SUBSAMPLE\"].map(function(test){return test.npreregno;}).join(\",\");inputData.masterData[\"searchedSample\"]&&inputData.masterData[\"searchedSample\"].map(function(item){if(!testcode.includes(String(item.npreregno))&&!sampleCode.includes(String(item.npreregno))){responseData[\"RE_TEST\"]=[];responseData[\"RE_SUBSAMPLE\"]=[];responseData[\"RESelectedSubSample\"]=[];responseData[\"RESelectedTest\"]=[];isSearched=true;}});var transactiontestcode=inputData.masterData[\"RE_TEST\"].map(function(test){return test.ntransactiontestcode;}).join(\",\");responseData[\"RE_TEST\"]&&responseData[\"RE_TEST\"].forEach(function(element){if(!transactiontestcode.includes(String(element.ntransactiontestcode))){inputData.masterData[\"RE_TEST\"].push(element);}});var transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(function(item){return item.ntransactionsamplecode;}).join(\",\");responseData[\"RE_SUBSAMPLE\"]&&responseData[\"RE_SUBSAMPLE\"].forEach(function(element){if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){inputData.masterData[\"RE_SUBSAMPLE\"].push(element);}});//end--\n//Added\nif(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){inputData.masterData[\"searchedTest\"]=getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");}if(responseData[\"RE_TEST\"]&&responseData[\"RE_TEST\"].length>0){//Added\nif(inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\n)RE_TEST=filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactionsamplecode\");else RE_TEST=filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"npreregno\");}else{RE_TEST=inputData.masterData[\"RE_TEST\"];}RE_SUBSAMPLE=filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"],RE_TEST,\"ntransactionsamplecode\");if(RE_SUBSAMPLE.length>0){// RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\nRE_SAMPLE=replaceUpdatedObject(responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"],\"npreregno\");//inputData.masterData[\"RE_SAMPLE\"];\n//Added\nvar selectedSampleArray=inputData.masterData[\"RESelectedSample\"];var subSampleArray=RE_SUBSAMPLE.map(function(x){return x.npreregno;});var selectPreregNOBefore=selectedSampleArray.map(function(x){return x.npreregno;});selectedSampleArray=selectedSampleArray.filter(function(item){return subSampleArray.includes(item.npreregno);}).map(function(x){return x.npreregno;});var unwantedPreregno=selectPreregNOBefore.filter(function(x){return!selectedSampleArray.some(function(y){return x===y;});});RE_SAMPLE=RE_SAMPLE.filter(function(item){return!unwantedPreregno.includes(item.npreregno);});//RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\n}else{RE_SAMPLE=getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],responseData[\"RE_SAMPLE\"],\"npreregno\");RE_SAMPLE=filterRecordBasedOnTwoArrays(RE_SAMPLE,RE_TEST,\"npreregno\");}//  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n//Added\nvar RESelectedSample=RE_SUBSAMPLE.length>0?inputData.masterData[\"RESelectedSample\"]:RE_SAMPLE;var boolSelectedSubSample;var searchedSubSample=undefined;var RESelectedSubSample=[];var backfrontTest=getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");if(inputData.masterData[\"searchedSubSample\"]){searchedSubSample=inputData.masterData[\"searchedSubSample\"];boolSelectedSubSample=searchedSubSample.some(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});var searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(function(x){return x.ntransactionsamplecode;});searchedSubSample=inputData.masterData[\"RESelectedSubSample\"].filter(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});var searchedSubSampleaftere=searchedSubSample.map(function(x){return x.ntransactionsamplecode;});var unwantedSamplecode=searchedSubSamplebefore.filter(function(x){return!searchedSubSampleaftere.some(function(y){return x===y;});});inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(function(item){return!unwantedSamplecode.includes(item.ntransactionsamplecode);});}else{boolSelectedSubSample=RE_SUBSAMPLE.some(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});}if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\n){RESelectedSubSample=boolSelectedSubSample?inputData.masterData[\"RESelectedSubSample\"]:inputData.masterData[\"searchedSubSample\"][0]?[inputData.masterData[\"searchedSubSample\"][0]]:[];}else{RESelectedSubSample=boolSelectedSubSample?inputData.masterData[\"RESelectedSubSample\"]:RE_SUBSAMPLE;}//  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\nvar RESelectedTest1=filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"],acceptList,\"ntransactiontestcode\");var RESelectedTest2=updatedObjectWithNewElement(RESelectedTest1,responseData.RESelectedTest);var searchedSample=undefined;if(inputData.masterData[\"searchedSample\"]){RE_SAMPLE=getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],responseData[\"RE_SAMPLE\"],\"npreregno\");searchedSample=filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\n,RE_TEST,\"npreregno\");searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];}var masterData=_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},(_objectSpread8={RE_SAMPLE:RE_SAMPLE,RE_SUBSAMPLE:RE_SUBSAMPLE,RESelectedSubSample:RESelectedSubSample,searchedSample:searchedSample,RESelectedSample:RESelectedSample,RESelectedTest:RESelectedTest2},_defineProperty(_objectSpread8,\"RESelectedTest\",response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length!==0||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length!==0?inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\ninputData.masterData[\"searchedTest\"]&&inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]:responseData.RESelectedTest),_defineProperty(_objectSpread8,\"RE_TEST\",responseData[\"RE_TEST\"]),_objectSpread8));var skipInfo={};// if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\nif(masterData.RE_SUBSAMPLE&&masterData.RE_SUBSAMPLE.length==0&&masterData.RE_TEST&&masterData.RE_TEST.length==0){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{skip:0,take:inputParam.take});}// }\nif(masterData.RE_SUBSAMPLE&&masterData.RE_SUBSAMPLE.length<=inputParam.subSampleTake){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{subSampleSkip:0,subSampleTake:inputParam.subSampleTake});}if(masterData.RE_TEST&&masterData.RE_TEST.length<=inputParam.testskip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{testskip:0,testtake:inputParam.testtake});}if(inputData[dataStateName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}var respObject=_objectSpread(_objectSpread({RegistrationTestAlert:response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\n?response.data.RegistrationTestAlert:{},NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\n?response.data.NewTestGroupTestAlert:{},showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length!==0||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length!==0//&&response.data.RegistrationTestAlert.length>0||\n// response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\n?true:false,showAlertForPredefined:false,additionalInfoView:false},inputParamData.inputData),{},{openModal:false,loadEsign:false,showConfirmAlert:false,//selectedRecord: undefined,\nloading:false,screenName:inputData.activeTestKey},skipInfo);if(searchedSample//&& RESelectedSample.length === 0 \n&&searchedSample.length>0){var _objectSpread11;var paramList=inputParam.postParamList[0];var inputParameter=_objectSpread(_objectSpread({},paramList.fecthInputObject.fecthInputObject),{},(_objectSpread11={fetchUrl:paramList.fetchUrl},_defineProperty(_objectSpread11,paramList.primaryKeyField,String(searchedSample[0][paramList.primaryKeyField])),_defineProperty(_objectSpread11,\"ntype\",2),_defineProperty(_objectSpread11,\"nflag\",2),_objectSpread11));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSample:[searchedSample[0]]})});// dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},inputParameter),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}else if(!searchedSample&&RESelectedSample.length===0&&RE_SAMPLE.length>0){var _objectSpread12;var _paramList=inputParam.postParamList[0];var _inputParameter=_objectSpread(_objectSpread({},_paramList.fecthInputObject.fecthInputObject),{},(_objectSpread12={fetchUrl:_paramList.fetchUrl},_defineProperty(_objectSpread12,_paramList.primaryKeyField,String(RE_SAMPLE[0][_paramList.primaryKeyField])),_defineProperty(_objectSpread12,\"ntype\",2),_defineProperty(_objectSpread12,\"nflag\",2),_objectSpread12));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSample:[RE_SAMPLE[0]]})});//dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},_inputParameter),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}else if(!searchedSample&&RE_SAMPLE.length>0){var _inputParameter2;if(RESelectedSample.length>0||RE_SUBSAMPLE.length>0){var _objectSpread13;onlySampleService=true;var _paramList2=inputParam.postParamList[0];_inputParameter2=_objectSpread(_objectSpread({},_paramList2.fecthInputObject.fecthInputObject),{},(_objectSpread13={fetchUrl:_paramList2.fetchUrl},_defineProperty(_objectSpread13,_paramList2.primaryKeyField,String(RE_SAMPLE[0][_paramList2.primaryKeyField])),_defineProperty(_objectSpread13,\"ntype\",2),_defineProperty(_objectSpread13,\"nflag\",2),_objectSpread13));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSample:[RE_SAMPLE[0]]})});//dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},_inputParameter2),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}if(boolSelectedSubSample===false?boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length!==0//&&!searchedSubSample\n:RESelectedSubSample.length===0&&RE_SUBSAMPLE.length>0){var _objectSpread14;var _paramList3=inputParam.postParamList[1];_inputParameter2=_objectSpread(_objectSpread({},_paramList3.fecthInputObject),{},(_objectSpread14={fetchUrl:_paramList3.fetchUrl},_defineProperty(_objectSpread14,_paramList3.primaryKeyField,String(RE_SUBSAMPLE[0][_paramList3.primaryKeyField])),_defineProperty(_objectSpread14,\"ntype\",3),_defineProperty(_objectSpread14,\"nflag\",3),_objectSpread14));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSubSample:[RE_SUBSAMPLE[0]]})});//dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},_inputParameter2),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}else{respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:masterData});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{loading:false})});}}else{respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:masterData});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{loading:false})});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOCOMPLETE\"}));}}export function testStart(inputParam,acceptList,userInfo,completeResultId){if(acceptList!==undefined&&acceptList.length>0){return function(dispatch){var inputData=inputParam.testChildGetREParam;var inputParamData={ntype:3,nflag:3,nsampletypecode:inputData.nsampletypecode,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,npreregno:inputData.npreregno,// ALPD-3513\n//  Result entry: When initiate the test, list allignment issue occurs\nntranscode:String(0),//ntranscode:String(inputData.ntransactionstatus),\nnapprovalversioncode:inputData.napprovalversioncode,napprovalconfigcode:inputData.napprovalconfigcode,ntransactionsamplecode:inputData.ntransactionsamplecode,userinfo:userInfo,fromdate:inputData.fromdate,todate:inputData.todate,ntestcode:inputData.ntestcode,transactiontestcode:acceptList?acceptList.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",//ntransactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\nntransactiontestcode:0,activeTestKey:inputData.activeTestKey,ncontrolcode:inputParam.inputData.ncontrolcode,ndesigntemplatemappingcode:inputData.masterData.ndesigntemplatemappingcode,nneedsubsample:inputParam.inputData.subSampleNeeded,needjoballocationandmyjob:inputParam.inputData.NeedJobAllocationAndMyjob,nneedjoballocation:inputParam.inputData.nneedjoballocation,nneedmyjob:inputParam.inputData.nneedmyjob,nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab};var activeName=\"\";var dataStateName=\"\";// let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\n//     documentDataState, testCommentDataState } = inputData\n// let url = \"resultentrybysample/getTestbasedParameter\"\nswitch(inputData.activeTestKey){case\"IDS_RESULTS\":activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;case\"IDS_INSTRUMENT\":activeName=\"ResultUsedInstrument\";dataStateName=\"instrumentDataState\";break;case\"IDS_MATERIAL\":activeName=\"ResultUsedMaterial\";dataStateName=\"materialDataState\";break;case\"IDS_TASK\":activeName=\"ResultUsedTasks\";dataStateName=\"taskDataState\";break;case\"IDS_TESTATTACHMENTS\":activeName=\"RegistrationTestAttachment\";break;case\"IDS_TESTCOMMENTS\":activeName=\"RegistrationTestComment\";dataStateName=\"testCommentDataState\";break;case\"IDS_DOCUMENTS\":activeName=\"\";dataStateName=\"documentDataState\";break;case\"IDS_RESULTCHANGEHISTORY\":activeName=\"ResultChangeHistory\";dataStateName=\"resultChangeDataState\";break;case\"IDS_SAMPLEATTACHMENTS\":activeName=\"\";dataStateName=\"resultDataState\";break;default:activeName=\"TestParameters\";dataStateName=\"resultDataState\";break;}dispatch(initRequest(true));rsapi.post(\"resultentrybysample/testInitiated\",inputParamData).then(function(response){var RE_SAMPLE=[];var RE_SUBSAMPLE=[];var RE_TEST=[];var onlySampleService=false;var childTabsKey=[\"TestParameters\",\"ResultUsedInstrument\",\"ResultUsedTasks\",\"RegistrationTestAttachment\",\"ResultChangeHistory\",\"RegistrationTestComment\",\"ResultChangeHistory\"];//let responseData = response.data \nvar responseData=sortData(response.data,'ascending','ntransactionresultcode');fillRecordBasedOnCheckBoxSelection(responseData,inputData.masterData,childTabsKey,3,\"ntransactionsamplecode\",[]);var responseRESelectedTest=responseData.RESelectedTest;responseData[\"RESelectedTest\"]=getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");// ALPD-3513\n// commed for Result entry: When initiate the test, list allignment issue occurs\n//ALPD-3425\n// if(responseData[\"RESelectedTest\"].length === 0){\n//     responseData[\"RESelectedTest\"] = responseRESelectedTest;\n// }\nvar responseRE_TEST;// if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\n//        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\n//     inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\n//    }\nif(responseData[\"RE_TEST\"].length>0){if(inputData.masterData.realRegSubTypeValue.nneedsubsample)//.nneedsubsample)\n{//RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\n// RE_TEST = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RESelectedTest\"],\"ntransactiontestcode\");\nRE_TEST=replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");responseRE_TEST=replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");;}else RE_TEST=responseData[\"RE_TEST\"];responseRE_TEST=responseData[\"RE_TEST\"];// RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\n}else{RE_TEST=inputData.masterData[\"RE_TEST\"];responseRE_TEST=responseData[\"RE_TEST\"];}RE_SUBSAMPLE=filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"],filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactionsamplecode\"),\"ntransactionsamplecode\");if(RE_SUBSAMPLE.length>0){//    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \n//    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\n//    selectedSampleArray=selectedSampleArray.filter(objx=>RE_TEST.some(objy=>objx['npreregno']===objy['npreregno']))\n//    let selectedTestPreregno=inputData.masterData[\"RESelectedTest\"].map(x=>x.npreregno);\n//    let selectPreregNOafter=selectedSampleArray.map(x=>x.npreregno)\n//    let unwantedPreregno= selectPreregNOBefore.filter(item => !selectPreregNOafter.includes(item))\n//                         .filter(item => !selectPreregNOafter.includes(item)&& !selectedTestPreregno.includes(item));\n//    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"].filter(objx=>unwantedPreregno.every(npreregno=>npreregno!==objx['npreregno'])) \nRE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"];var selectedSampleArray=inputData.masterData[\"RESelectedSample\"];var subSampleArray=RE_SUBSAMPLE.map(function(x){return x.npreregno;});var selectPreregNOBefore=selectedSampleArray.map(function(x){return x.npreregno;});selectedSampleArray=selectedSampleArray.filter(function(item){return subSampleArray.includes(item.npreregno);}).map(function(x){return x.npreregno;});var unwantedPreregno=selectPreregNOBefore.filter(function(x){return!selectedSampleArray.some(function(y){return x===y;});});RE_SAMPLE=RE_SAMPLE.filter(function(item){return!unwantedPreregno.includes(item.npreregno);});//RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\n}else{RE_SAMPLE=filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_TEST,\"npreregno\");}var RESelectedSample=RE_SUBSAMPLE.length>0?inputData.masterData[\"RESelectedSample\"]:[RE_SAMPLE[0]];//const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\n// let x=filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\") \n// let boolSelectedSubSample=x.some(objx=>RE_TEST.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode']))\n// const RESelectedSubSample =boolSelectedSubSample? filterRecordBasedOnTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\"):\n// getSameRecordFromTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\nvar boolSelectedSubSample;var searchedSubSample=undefined;var RESelectedSubSample=[];var backfrontTest=getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");if(inputData.masterData[\"searchedSubSample\"]){searchedSubSample=inputData.masterData[\"searchedSubSample\"];boolSelectedSubSample=searchedSubSample.some(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});var searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(function(x){return x.ntransactionsamplecode;});searchedSubSample=inputData.masterData[\"RESelectedSubSample\"].filter(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});var searchedSubSampleaftere=searchedSubSample.map(function(x){return x.ntransactionsamplecode;});var unwantedSamplecode=searchedSubSamplebefore.filter(function(x){return!searchedSubSampleaftere.some(function(y){return x===y;});});inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(function(item){return!unwantedSamplecode.includes(item.ntransactionsamplecode);});}else{boolSelectedSubSample=RE_SUBSAMPLE.some(function(objx){return backfrontTest.some(function(objy){return objx['ntransactionsamplecode']===objy['ntransactionsamplecode'];});});}if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\n){RESelectedSubSample=boolSelectedSubSample?inputData.masterData[\"RESelectedSubSample\"]:inputData.masterData[\"searchedSubSample\"][0]?[inputData.masterData[\"searchedSubSample\"][0]]:[];}else{RESelectedSubSample=boolSelectedSubSample?inputData.masterData[\"RESelectedSubSample\"]:[RE_SUBSAMPLE[0]];}// let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\n// let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\n// RESelectedTest2 = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\nvar searchedSample=undefined;if(inputData.masterData[\"searchedSample\"]){searchedSample=filterRecordBasedOnTwoArrays(inputData.masterData[\"searchedSample\"],RE_SAMPLE,\"npreregno\");searchedSample=searchedSample.length>0?searchedSample:inputData.masterData[\"searchedSample\"];}var masterData=_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RE_SAMPLE:RE_SAMPLE,RE_SUBSAMPLE:RE_SUBSAMPLE,RESelectedSubSample:RESelectedSubSample,searchedSample:searchedSample,RESelectedSample:RESelectedSample,RESelectedTest:inputData.masterData[\"searchedTest\"]&&inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]:responseData.RESelectedTest,// ALPD-3513\n// commed for Result entry: When initiate the test, list allignment issue occurs\n// RE_TEST: responseData[\"RE_TEST\"]\n// RE_TEST: responseRE_TEST\n//ALPD-3425\nRE_TEST:RE_TEST});if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){var respObject1={masterData:masterData};dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject1));// inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\n}var skipInfo={};if(masterData.RE_SAMPLE&&masterData.RE_SAMPLE.length<=inputParam.skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{skip:0,take:inputParam.take});}if(masterData.RE_TEST&&masterData.RE_TEST.length<=inputParam.testskip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},{testskip:0,testtake:inputParam.testtake});}if(inputData[dataStateName]&&masterData[activeName]&&masterData[activeName].length<=inputData[dataStateName].skip){skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{skip:0,sort:undefined,filter:undefined})));}else{skipInfo=_objectSpread(_objectSpread({},skipInfo),{},_defineProperty({},dataStateName,_objectSpread(_objectSpread({},inputData[dataStateName]),{},{sort:undefined,filter:undefined})));}var respObject=_objectSpread(_objectSpread({},inputParamData.inputData),{},{openModal:false,loadEsign:false,showConfirmAlert:false,//selectedRecord: undefined,\nloading:false,screenName:inputData.activeTestKey},skipInfo);if(searchedSample// && RESelectedSample.length === 0 \n&&searchedSample.length>0){if(RESelectedSample.length===0||RE_SUBSAMPLE.length==0){var _objectSpread17;var paramList=inputParam.postParamList[0];var inputParameter=_objectSpread(_objectSpread({},paramList.fecthInputObject.fecthInputObject),{},(_objectSpread17={fetchUrl:paramList.fetchUrl},_defineProperty(_objectSpread17,paramList.primaryKeyField,String(searchedSample[0][paramList.primaryKeyField])),_defineProperty(_objectSpread17,\"ntype\",2),_defineProperty(_objectSpread17,\"nflag\",2),_objectSpread17));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSample:[searchedSample[0]]})});//  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},inputParameter),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}else{respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:masterData});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{loading:false})});}}else if(!searchedSample&&RE_SAMPLE.length>0){var _inputParameter3;// let paramList = inputParam.postParamList[0];\n// let inputParameter = {\n//     ...paramList.fecthInputObject.fecthInputObject,\n//     fetchUrl: paramList.fetchUrl,\n//     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\n//     ntype: 2,\n//     nflag: 2\n// };\n// respObject = {\n//     ...respObject,\n//     masterData: {\n//         ...masterData,\n//         RESelectedSample: [RE_SAMPLE[0]]\n//     }\n// }\nif(RESelectedSample.length===0||RE_SUBSAMPLE.length==0){var _objectSpread18;onlySampleService=true;var _paramList4=inputParam.postParamList[0];_inputParameter3=_objectSpread(_objectSpread({},_paramList4.fecthInputObject.fecthInputObject),{},(_objectSpread18={fetchUrl:_paramList4.fetchUrl},_defineProperty(_objectSpread18,_paramList4.primaryKeyField,String(RE_SAMPLE[0][_paramList4.primaryKeyField])),_defineProperty(_objectSpread18,\"ntype\",2),_defineProperty(_objectSpread18,\"nflag\",2),_objectSpread18));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSample:[RE_SAMPLE[0]]})});// dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},_inputParameter3),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}if(boolSelectedSubSample===false?boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length!==0//&&!searchedSubSample\n:RESelectedSubSample.length===0&&RE_SUBSAMPLE.length>0){var _objectSpread19;var _paramList5=inputParam.postParamList[1];_inputParameter3=_objectSpread(_objectSpread({},_paramList5.fecthInputObject),{},(_objectSpread19={fetchUrl:_paramList5.fetchUrl},_defineProperty(_objectSpread19,_paramList5.primaryKeyField,String(RE_SUBSAMPLE[0][_paramList5.primaryKeyField])),_defineProperty(_objectSpread19,\"ntype\",3),_defineProperty(_objectSpread19,\"nflag\",3),_objectSpread19));respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:_objectSpread(_objectSpread({},masterData),{},{RESelectedSubSample:[RE_SUBSAMPLE[0]]})});//  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\ndispatch(fetchSelectedData(_objectSpread(_objectSpread({},_inputParameter3),{},{checkBoxOperation:checkBoxOperation.SINGLESELECT}),respObject));}// if(RESelectedTest.length === 0)\n// {\n//     let paramList = inputParam.postParamList[2];\n//     inputParameter = {\n//         ...paramList.fecthInputObject,\n//         fetchUrl: paramList.fetchUrl,\n//         [paramList.primaryKeyField]: String(RE_TEST[0][paramList.primaryKeyField]),\n//         ntype: 3,\n//         nflag: 3\n//     };\n//     respObject = {\n//         ...respObject,\n//         masterData: {\n//             ...masterData,\n//             RESelectedTest: [RE_TEST[0]]\n//         }\n//     }\n//     dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\n// }\nelse{respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:masterData});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{loading:false})});}}else{respObject=_objectSpread(_objectSpread({},respObject),{},{masterData:masterData});dispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{loading:false})});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOINITIATE\"}));}}//Compare two array and return the first array which is available in second array\nexport function compareTwoArray(firstArray,secondArray,PrimaryKey){var filterArray=firstArray.filter(function(x){return secondArray.some(function(y){return x[PrimaryKey]===y[PrimaryKey];});});return filterArray;}function fetchSelectedData(inputParam,respObject){return function(dispatch){rsapi.post(inputParam.fetchUrl,_objectSpread({},inputParam)).then(function(response){if(response.data.RE_SUBSAMPLE&&response.data.RE_SUBSAMPLE.length>0){sortData(response.data.RE_SUBSAMPLE,'descending','ntransactionsamplecode');}sortData(response.data.RE_TEST,'ascending','ntransactionresultcode');var masterData=_objectSpread(_objectSpread(_objectSpread({},respObject.masterData),response.data),{},{RESelectedSample:response.data.RESelectedSample||respObject.masterData.RESelectedSample||[]});//sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:_objectSpread(_objectSpread({},respObject),{},{masterData:masterData,loading:false})});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function testMethodSourceEdit(inputData){return function(dispatch){var inputParamData={ntransactiontestcode:inputData.test.ntransactiontestcode,ntestgrouptestcode:inputData.test.ntestgrouptestcode,ntestcode:inputData.test.ntestcode,ncontrolcode:inputData.editSourceMethodId,userinfo:inputData.userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getTestMethodSource\",inputParamData).then(function(response){var TagSource=constructOptionList(response.data.SourceData||[],\"nsourcecode\",\"ssourcename\",undefined,undefined,undefined);var TagListSource=TagSource.get(\"OptionList\");var TagMethod=constructOptionList(response.data.MethodData||[],\"nmethodcode\",\"smethodname\",undefined,undefined,undefined);var TagListMethod=TagMethod.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{SourceData:TagListSource,MethodData:TagListMethod,RESelectedSubSample:inputData.masterData.RESelectedSubSample}),selectedRecord:{ntransactiontestcode:inputData.test.ntransactiontestcode,stestsynonym:inputData.test.jsondata.stestsynonym,nsourcecode:response.data.SourceDataValue,nmethodcode:response.data.MethodDataValue},loading:false,screenName:\"IDS_TESTMETHODSOURCE\",openModal:true,operation:\"update\",ncontrolcode:inputData.editSourceMethodId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function updateParameterComments(inputData,masterData){return function(dispatch){var inputParamData={ntransactiontestcode:inputData.ntransactiontestcode,ntransactionresultcode:inputData.ntransactionresultcode,sresultcomment:inputData.sresultcomment,transactiontestcode:inputData.transactiontestcode,userinfo:inputData.userinfo,nregtypecode:inputData.nregtypecode,nregsubtypecode:inputData.nregsubtypecode,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,ncontrolcode:inputData.ncontrolcode};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/updateParameterComments\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),response.data),loading:false,loadEsign:false,screenName:\"IDS_RESULT\",openModal:false,operation:\"update\",ncontrolcode:inputData.ncontrolcode//ncontrolcode:inputData.editSourceMethodId\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function addREInstrument(inputData){return function(dispatch){var urlArray=[];var resultusedinstrument=rsapi.post(\"resultentrybysample/getResultUsedInstrumentNameCombo\",{userinfo:inputData.userInfo,ntestgrouptestcode:inputData.masterData.RESelectedTest.ntestgrouptestcode});var timeZoneService=rsapi.post(\"timezone/getTimeZone\");var UTCtimeZoneService=rsapi.post(\"timezone/getLocalTimeByZone\",{userinfo:inputData.userInfo});urlArray=[resultusedinstrument,timeZoneService,UTCtimeZoneService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var TagInstrumentName=constructOptionList(response[0].data.InstrumentName||[],\"ninstrumentnamecode\",\"sinstrumentname\",undefined,undefined,undefined);var TagListInstrumentName=TagInstrumentName.get(\"OptionList\");var TagInsturmentcategory=constructOptionList(response[0].data.InstrumentCategory||[],\"ninstrumentcatcode\",\"sinstrumentcatname\",undefined,undefined,undefined);var TagListInstrumentCategory=TagInsturmentcategory.get(\"OptionList\");var TagTimeZone=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,undefined);var TagListTimeZone=TagTimeZone.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{InstrumentName:TagListInstrumentName,InstrumentCategory:TagListInstrumentCategory}),selectedId:null,// selectedRecord\nselectedRecordInstrumentForm:{sarno:inputData.test.sarno,ssamplearno:inputData.test.ssamplearno,stestsynonym:inputData.test.stestsynonym,transactiontestcode:inputData.RESelectedTest?inputData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\").toString():\"\",ntransactiontestcode:inputData.test.ntransactiontestcode,ninstrumentcatcode:TagInsturmentcategory.get(\"DefaultValue\")?TagInsturmentcategory.get(\"DefaultValue\"):[],ninstrumentnamecode:TagInstrumentName.get(\"DefaultValue\")?TagInstrumentName.get(\"DefaultValue\"):[],npreregno:inputData.test.npreregno,//dtodate: new Date(response[2].data),//new Date(),\ndtodate:rearrangeDateFormat(inputData.userInfo,response[2].data),//new Date(),\n//dfromdate: new Date(response[2].data),//new Date(),\ndfromdate:rearrangeDateFormat(inputData.userInfo,response[2].data),//new Date(),\nntzfromdate:{\"value\":inputData.userInfo.ntimezonecode,\"label\":inputData.userInfo.stimezoneid},ntztodate:{\"value\":inputData.userInfo.ntimezonecode,\"label\":inputData.userInfo.stimezoneid}},timeZoneList:TagListTimeZone||[],loading:false,screenName:\"IDS_INSTRUMENT\",openModal:true,operation:\"create\",isInstrumentInitialRender:true,//activeTestKey: \"IDS_INSTRUMENT\",\nncontrolcode:inputData.addResultUsedInstrumentId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function addREMaterial(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\",{userinfo:inputData.userInfo,nsectioncode:inputData.test.nsectioncode,ntestgrouptestcode:inputData.test.ntestgrouptestcode}).then(function(response){var materialTypeMap=constructOptionList(response.data.MaterialType||[],\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,undefined);var materialType=materialTypeMap.get(\"OptionList\");var materialCatMap=constructOptionList(response.data.MaterialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCat=materialCatMap.get(\"OptionList\");var materialMap=constructOptionList(response.data.Material||[],\"nmaterialcode\",\"smaterialname\",undefined,undefined,undefined);var material=materialMap.get(\"OptionList\");var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,//selectedRecord\nselectedRecordMaterialForm:{ntestgroupmaterial:transactionStatus.YES,sarno:inputData.test.sarno,ssamplearno:inputData.test.ssamplearno,stestsynonym:inputData.test.stestsynonym,nsectioncode:inputData.test.nsectioncode,ssectionname:inputData.test.ssectionname,transactiontestcode:inputData.RESelectedTest?inputData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\").toString():\"\",ntransactiontestcode:inputData.test.ntransactiontestcode,npreregno:inputData.test.npreregno,nmaterialtypecode:materialTypeMap.get(\"DefaultValue\"),nmaterialcatcode:materialCatMap.get(\"DefaultValue\"),nmaterialcode:materialMap.get(\"OptionList\").length>0?materialMap.get(\"OptionList\")[0]:\"\",nmaterialinventorycode:materialInventoryMap.get(\"OptionList\").length>0?materialInventoryMap.get(\"OptionList\")[0]:\"\",sunitname:response.data.MaterialInventory!==undefined?response.data.MaterialInventory[0].sunitname:\"\",savailablequantity:response.data.MaterialInventory!==undefined?response.data.MaterialInventory[0].savailablequatity:\"\"},isMaterialInitialRender:true,materialType:materialType,materialCat:materialCat,material:material,materialInventory:materialInventory,loading:false,screenName:\"IDS_MATERIAL\",openModal:true,operation:\"create\",//activeTestKey: \"IDS_INSTRUMENT\",\nncontrolcode:inputData.addResultUsedMaterailId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREMaterialComboGet(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\",{userinfo:inputData.userInfo,nsectioncode:inputData.test.nsectioncode,ntestgrouptestcode:inputData.ntestgrouptestcode}).then(function(response){var materialTypeMap=constructOptionList(response.data.MaterialType||[],\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,undefined);var materialType=materialTypeMap.get(\"OptionList\");var materialCatMap=constructOptionList(response.data.MaterialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCat=materialCatMap.get(\"OptionList\");var materialMap=constructOptionList(response.data.Material||[],\"nmaterialcode\",\"smaterialname\",undefined,undefined,undefined);var material=materialMap.get(\"OptionList\");var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,selectedRecord:{ntestgroupmaterial:inputData.ntestgroupmaterial,sarno:inputData.test.sarno,ssamplearno:inputData.test.ssamplearno,stestsynonym:inputData.test.stestsynonym,nsectioncode:inputData.test.nsectioncode,ssectionname:inputData.test.ssectionname,transactiontestcode:inputData.RESelectedTest?inputData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\").toString():\"\",ntransactiontestcode:inputData.test.ntransactiontestcode,npreregno:inputData.test.npreregno,nmaterialtypecode:materialTypeMap.get(\"DefaultValue\")?materialTypeMap.get(\"DefaultValue\"):\"\",nmaterialcatcode:materialCatMap.get(\"DefaultValue\")?materialCatMap.get(\"DefaultValue\"):\"\",nmaterialcode:materialMap.get(\"OptionList\").length>0?materialMap.get(\"OptionList\")[0]:\"\",nmaterialinventorycode:materialInventoryMap.get(\"OptionList\").length>0?materialInventoryMap.get(\"OptionList\")[0]:\"\",sunitname:response.data.MaterialInventory!==undefined?response.data.MaterialInventory[0].sunitname:\"\",savailablequantity:response.data.MaterialInventory!==undefined?response.data.MaterialInventory[0].savailablequatity:\"\"},materialType:materialType,materialCat:materialCat,material:material,materialInventory:materialInventory,loading:false,screenName:\"IDS_MATERIAL\",openModal:true,operation:\"create\"//activeTestKey: \"IDS_INSTRUMENT\",\n//ncontrolcode: inputData.addResultUsedMaterailId\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREMaterialCategoryByType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getREMaterialCategoryByType\",{ntestgrouptestcode:inputData.ntestgrouptestcode,nmaterialtypecode:inputData.selectedRecord.nmaterialtypecode.value,userinfo:inputData.userInfo}).then(function(response){var materialCatMap=constructOptionList(response.data.MaterialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCat=materialCatMap.get(\"OptionList\");var materialMap=constructOptionList(response.data.Material||[],\"nmaterialcode\",\"smaterialname\",undefined,undefined,undefined);var material=materialMap.get(\"OptionList\");var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,selectedRecord:_objectSpread(_objectSpread({},inputData.selectedRecord),{},{nmaterialcode:materialMap.get(\"DefaultValue\")||{},nmaterialinventorycode:materialInventoryMap.get(\"DefaultValue\")||{},nmaterialcatcode:materialCatMap.get(\"DefaultValue\")||{}}),materialCat:materialCat,material:material,materialInventory:materialInventory,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREMaterialByCategory(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getREMaterialByCategory\",{ntestgrouptestcode:inputData.ntestgrouptestcode,nmaterialtypecode:inputData.selectedRecord.nmaterialtypecode.value,nmaterialcatcode:inputData.selectedRecord.nmaterialcatcode.value,nsectioncode:inputData.selectedRecord.nsectioncode,userinfo:inputData.userInfo}).then(function(response){var materialMap=constructOptionList(response.data.Material||[],\"nmaterialcode\",\"smaterialname\",undefined,undefined,undefined);var material=materialMap.get(\"OptionList\");var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,selectedRecord:_objectSpread(_objectSpread({},inputData.selectedRecord),{},{nmaterialcode:materialMap.get(\"OptionList\")[0],nmaterialinventorycode:materialInventoryMap.get(\"OptionList\")[0],savailablequantity:response.data.MaterialInventory?response.data.MaterialInventory[0].savailablequatity:\"\",sunitname:response.data.MaterialInventory?response.data.MaterialInventory[0].sunitname:\"\"}),material:material,materialInventory:materialInventory,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREMaterialInvertoryByMaterial(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getREMaterialInvertoryByMaterial\",{ntestgrouptestcode:inputData.ntestgrouptestcode,nmaterialcode:inputData.selectedRecord.nmaterialcode.value,nsectioncode:inputData.selectedRecord.nsectioncode,userinfo:inputData.userInfo}).then(function(response){var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,selectedRecord:_objectSpread(_objectSpread({},inputData.selectedRecord),{},{sunitname:response.data.MaterialInventory?response.data.MaterialInventory[0].sunitname:\"\",savailablequantity:response.data.MaterialInventory?response.data.MaterialInventory[0].savailablequatity:\"\"}),materialInventory:materialInventory,loading:false,screenName:\"IDS_MATERIAL\",openModal:true,//operation: \"create\",\n//activeTestKey: \"IDS_INSTRUMENT\",\nncontrolcode:inputData.addResultUsedInstrumentId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getAvailableMaterialQuantity(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getAvailableMaterialQuantity\",{ntestgrouptestcode:inputData.ntestgrouptestcode,nmaterialinventorycode:inputData.selectedRecord.nmaterialinventorycode.value,nsectioncode:inputData.selectedRecord.nsectioncode,userinfo:inputData.userInfo}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{selectedId:null,selectedRecord:_objectSpread(_objectSpread({},inputData.selectedRecord),{},{savailablequantity:response.data.inventory?response.data.inventory.savailablequatity:\"\",sunitname:response.data.inventory?response.data.inventory.sunitname:\"\"}),loading:false,screenName:\"IDS_MATERIAL\",openModal:true,//operation: \"create\",\n//activeTestKey: \"IDS_INSTRUMENT\",\nncontrolcode:inputData.addResultUsedInstrumentId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function deleteInstrumentRecord(inputData){return function(dispatch){var inputParamData={nresultusedinstrumentcode:inputData.selectedRecord.nresultusedinstrumentcode,userinfo:inputData.userInfo,ntransactiontestcode:inputData.masterData.RESelectedTest?inputData.masterData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\").toString():\"\",nregtypecode:inputData.masterData.defaultRegistrationType.nregtypecode,nregsubtypecode:inputData.masterData.defaultRegistrationSubType.nregsubtypecode,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),loading:false,operation:\"delete\",openModal:false,loadEsign:false,selectedId:null}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}// export function deleteInstrumentRecord(inputData) {\n//     return function (dispatch) {\n//         let inputParamData = {\n//             nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\n//             userinfo: inputData.userInfo,\n//             ntransactiontestcode: inputData.masterData.RESelectedTest ?\n//                 inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\n//             nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\n//             nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\n//         }\n//         dispatch(initRequest(true));\n//         rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\n//             .then(response => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         masterData: {\n//                             ...inputData.masterData,\n//                             ...response.data\n//                         },\n//                         loading: false,\n//                         operation: \"delete\",\n//                         openModal: false,\n//                         loadEsign: false\n//                     }\n//                 })\n//             })\n//             .catch(error => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         loading: false\n//                     }\n//                 })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 } else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     }\n// }\nexport function fetchInstrumentRecord(inputData){return function(dispatch){var urlArray=[];//const resultUsedInstrumentCombo = rsapi.post(\"resultentrybysample/getResultUsedInstrumentCombo\", { userinfo: inputData.userInfo });\nvar timeZoneService=rsapi.post(\"resultentrybysample/getResultUsedInstrument\",{nresultusedinstrumentcode:inputData.editRow.nresultusedinstrumentcode,userinfo:inputData.userInfo});var getResultUsedInstrument=rsapi.post(\"timezone/getTimeZone\");urlArray=[timeZoneService,getResultUsedInstrument];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var TagInstrumentName=constructOptionList(response[0].data.InstrumentName||[],\"ninstrumentnamecode\",\"sinstrumentname\",undefined,undefined,undefined);var TagListInstrumentName=TagInstrumentName.get(\"OptionList\");var TagInstrumentId=constructOptionList(response[0].data.InstrumentId||[],\"ninstrumentcode\",\"sinstrumentid\",undefined,undefined,undefined);var TagListInstrumentId=TagInstrumentId.get(\"OptionList\");var TagInsturmentcategory=constructOptionList(response[0].data.InstrumentCategory||[],\"ninstrumentcatcode\",\"sinstrumentcatname\",undefined,undefined,undefined);var TagListInstrumentCategory=TagInsturmentcategory.get(\"OptionList\");var TagTimeZone=constructOptionList(response[1].data||[],\"ntimezonecode\",\"stimezoneid\",undefined,undefined,undefined);var TagListTimeZone=TagTimeZone.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),{},{InstrumentName:TagListInstrumentName,InstrumentId:TagListInstrumentId,InstrumentCategory:TagListInstrumentCategory},response[1].data),selectedId:inputData.editRow.nresultusedinstrumentcode,//  selectedRecord\nselectedRecordInstrumentForm:{ssamplearno:response[0].data.EditResultUsedInstrument[0].ssamplearno,stestsynonym:inputData.editRow.stestsynonym,npreregno:response[0].data.EditResultUsedInstrument[0].npreregno,ntransactiontestcode:inputData.editRow.ntransactiontestcode,nresultusedinstrumentcode:inputData.editRow.nresultusedinstrumentcode,ninstrumentcatcode:{\"value\":response[0].data.EditResultUsedInstrument[0].ninstrumentcatcode,\"label\":response[0].data.EditResultUsedInstrument[0].sinstrumentcatname},ninstrumentnamecode:{\"value\":response[0].data.EditResultUsedInstrument[0].ninstrumentnamecode,\"label\":response[0].data.EditResultUsedInstrument[0].sinstrumentname},ninstrumentcode:{\"value\":response[0].data.EditResultUsedInstrument[0].ninstrumentcode,\"label\":response[0].data.EditResultUsedInstrument[0].sinstrumentid},ntzfromdate:{\"value\":response[0].data.EditResultUsedInstrument[0].ntzfromdate,\"label\":response[0].data.EditResultUsedInstrument[0].stzfromdate},ntztodate:{\"value\":response[0].data.EditResultUsedInstrument[0].ntztodate,\"label\":response[0].data.EditResultUsedInstrument[0].stztodate},//dfromdate: new Date(response[0].data.EditResultUsedInstrument[0].sfromdate),\n//dtodate: new Date(response[0].data.EditResultUsedInstrument[0].stodate)\ndfromdate:rearrangeDateFormat(inputData.userInfo,response[0].data.EditResultUsedInstrument[0].sfromdate),dtodate:rearrangeDateFormat(inputData.userInfo,response[0].data.EditResultUsedInstrument[0].stodate)},isInstrumentInitialRender:true,timeZoneList:TagListTimeZone||[],ncontrolcode:inputData.ncontrolCode,loading:false,screenName:\"IDS_INSTRUMENT\",openModal:true,operation:\"update\"}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function fetchMaterialRecord(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultUsedMaterial\",{nresultusedmaterialcode:inputData.editRow.nresultusedmaterialcode,userinfo:inputData.userInfo}).then(function(response){var materialTypeMap=constructOptionList(response.data.MaterialType||[],\"nmaterialtypecode\",\"smaterialtypename\",undefined,undefined,undefined);var materialType=materialTypeMap.get(\"OptionList\");var materialCatMap=constructOptionList(response.data.MaterialCategory||[],\"nmaterialcatcode\",\"smaterialcatname\",undefined,undefined,undefined);var materialCat=materialCatMap.get(\"OptionList\");var materialMap=constructOptionList(response.data.Material||[],\"nmaterialcode\",\"smaterialname\",undefined,undefined,undefined);var material=materialMap.get(\"OptionList\");var materialInventoryMap=constructOptionList(response.data.MaterialInventory||[],\"nmaterialinventorycode\",\"sinventoryid\",undefined,undefined,undefined);var materialInventory=materialInventoryMap.get(\"OptionList\");var EditResultUsedMaterial=response.data.EditResultUsedMaterial[0];dispatch({type:DEFAULT_RETURN,payload:{selectedId:inputData.editRow.nresultusedinstrumentcode,materialType:materialType,materialCat:materialCat,material:material,materialInventory:materialInventory,selectedRecord:_objectSpread(_objectSpread({},EditResultUsedMaterial),{},{stestsynonym:inputData.editRow.jsondata.stestsynonym,npreregno:EditResultUsedMaterial.npreregno,ntransactiontestcode:inputData.editRow.ntransactiontestcode,nresultusedinstrumentcode:inputData.editRow.nresultusedinstrumentcode,nmaterialtypecode:{label:EditResultUsedMaterial.jsondata.smaterialtypename,value:EditResultUsedMaterial.nmaterialtypecode},nmaterialcatcode:{\"value\":EditResultUsedMaterial.nmaterialcategorycode,\"label\":EditResultUsedMaterial.jsondata.smaterialcatname},nmaterialcode:{\"value\":EditResultUsedMaterial.nmaterialcode,\"label\":EditResultUsedMaterial.jsondata.smaterialname},nmaterialinventorycode:{\"value\":EditResultUsedMaterial.ninventorycode,\"label\":EditResultUsedMaterial.jsondata.sinventoryid},ntztodate:{\"value\":EditResultUsedMaterial.ntztodate,\"label\":EditResultUsedMaterial.stztodate},susedquantity:EditResultUsedMaterial.jsondata.nqtyused,scarriergas:EditResultUsedMaterial.jsondata.scarriergas,smobilephase:EditResultUsedMaterial.jsondata.smobilephase,sremarks:EditResultUsedMaterial.jsondata.sremarks,savailablequantity:response.data.inventory?response.data.inventory.savailablequatity:\"\",sunitname:response.data.inventory?response.data.inventory.sunitname:\"\"}),ncontrolcode:inputData.ncontrolCode,loading:false,screenName:\"IDS_MATERIAL\",openModal:true,operation:\"update\"}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function deleteTaskRecord(inputData,userInfo){return function(dispatch){var inputParamData={nresultusedtaskcode:inputData.selectedRecord.nresultusedtaskcode,userinfo:inputData.userInfo,ntransactiontestcode:inputData.masterData.RESelectedTest?inputData.masterData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\").toString():\"\",nregtypecode:inputData.masterData.defaultRegistrationType.nregtypecode,nregsubtypecode:inputData.masterData.defaultRegistrationSubType.nregsubtypecode,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/deleteResultUsedTasks\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),loading:false,operation:\"delete\",openModal:false,loadEsign:false,selectedId:null}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function fetchTaskRecord(inputData){return function(dispatch){var inputParamData={nresultusedtaskcode:inputData.editRow.nresultusedtaskcode,userinfo:inputData.userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultUsedTask\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),selectedId:response.data.EditResultUsedTasks[0].nresultusedtaskcode,//      selectedRecord: {\nselectedRecordTaskForm:{npreregno:response.data.EditResultUsedTasks[0].npreregno,stestsynonym:inputData.editRow.stestsynonym,sanalysistime:response.data.EditResultUsedTasks[0].jsondata.sanalysistime,smisctime:response.data.EditResultUsedTasks[0].jsondata.smisctime,spreanalysistime:response.data.EditResultUsedTasks[0].jsondata.spreanalysistime,spreparationtime:response.data.EditResultUsedTasks[0].jsondata.spreparationtime,scomments:response.data.EditResultUsedTasks[0].jsondata.scomments,staskprocedure:response.data.EditResultUsedTasks[0].jsondata.staskprocedure,nresultusedtaskcode:response.data.EditResultUsedTasks[0].nresultusedtaskcode},isTaskInitialRender:true,loading:false,screenName:\"IDS_TASK\",openModal:true,operation:\"update\",ncontrolcode:inputData.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function parameterRecord(inputData){return function(dispatch){var inputParamData={ntransactionresultcode:inputData.selectedRecord.ntransactionresultcode,ntransactiontestcode:inputData.masterData.RESelectedTest?inputData.masterData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",ncontrolcode:inputData.controlcode,userinfo:inputData.userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getParameterComments\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread({},inputData.masterData),selectedId:response.data.ParameterComments.ntransactionresultcode,selectedRecord:{sresultcomment:response.data.ParameterComments.sresultcomment,stestsynonym:inputData.selectedRecord.stestsynonym,sparametersynonym:inputData.selectedRecord.sparametersynonym,transactiontestcode:response.data.ParameterComments.ntransactiontestcode,ntransactionresultcode:response.data.ParameterComments.ntransactionresultcode,ntransactiontestcode:inputData.masterData.RESelectedTest?inputData.masterData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",ncontrolcode:inputData.controlcode},loading:false,screenName:\"IDS_PARAMETERCOMMENTS\",openModal:true,operation:\"updateParameterComments\",ncontrolcode:inputData.controlcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function checkListRecord(inputData){return function(dispatch){var inputParamData={ntransactionresultcode:inputData.selectedRecord.ntransactionresultcode,napprovalparametercode:inputData.selectedRecord.napprovalparametercode,nchecklistversioncode:inputData.selectedRecord.nchecklistversioncode,ntransactiontestcode:inputData.selectedRecord.ntransactiontestcode.toString(),ncontrolcode:inputData.ncontrolcode,userinfo:inputData.userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getChecklistdesign\",inputParamData).then(function(response){var selectedRecord={};var lsteditedQB=[];selectedRecord={sarno:inputData.selectedRecord.sarno,ssamplearno:inputData.selectedRecord.ssamplearno,npreregno:inputData.selectedRecord.npreregno,stestsynonym:inputData.selectedRecord.stestsynonym,sparametersynonym:inputData.selectedRecord.sparametersynonym,ntransactiontestcode:inputData.selectedRecord.ntransactiontestcode,ntransactionresultcode:inputData.selectedRecord.ntransactionresultcode,transactiontestcode:inputData.masterData.RESelectedTest?inputData.masterData.RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\"};response.data.ChecklistData.map(function(checklist){selectedRecord[checklist.nchecklistversionqbcode]={nchecklistqbcode:checklist.nchecklistqbcode,nchecklistversioncode:checklist.nchecklistversioncode,nchecklistversionqbcode:checklist.nchecklistversionqbcode,sdefaultvalue:checklist.nchecklistcomponentcode===7?rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue):checklist.sdefaultvalue,//  sdefaultvalue: checklist.sdefaultvalue,\nsarno:inputData.selectedRecord.sarno,ssamplearno:inputData.selectedRecord.ssamplearno,stestsynonym:inputData.selectedRecord.stestsynonym,sparametersynonym:inputData.selectedRecord.sparametersynonym};lsteditedQB.push(checklist.nchecklistversionqbcode);return null;});response.data.ChecklistData.map(function(checklist){selectedRecord['jsondata']=_objectSpread(_objectSpread({},selectedRecord['jsondata']),{},_defineProperty({},checklist.nchecklistversionqbcode,checklist.nchecklistcomponentcode===7?rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue):checklist.sdefaultvalue));return null;});selectedRecord[\"editedQB\"]=lsteditedQB;dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),selectedId:response.data.selectedId,selectedRecord:selectedRecord,loading:false,screenName:\"IDS_CHECKLISTRESULT\",openTemplateModal:true,needSaveButton:inputData.needSaveButton,operation:\"create\",ncontrolCode:inputData.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function onSaveCheckList(selectedRecord,userInfo,nregtypecode,nregsubtypecode,ndesigntemplatemappingcode){return function(dispatch){var listResultCheckList=[];if(selectedRecord&&selectedRecord.jsondata){selectedRecord.editedQB.map(function(qbcode){return listResultCheckList.push(selectedRecord[qbcode]);});var inputParamData={ntransactionresultcode:selectedRecord.ntransactionresultcode,ntransactiontestcode:selectedRecord.ntransactiontestcode.toString(),transactiontestcode:selectedRecord.transactiontestcode,npreregno:selectedRecord.npreregno,ResultCheckList:{nchecklistversioncode:listResultCheckList[0].nchecklistversioncode,nchecklistqbcode:listResultCheckList[0].nchecklistqbcode,jsondata:selectedRecord.jsondata,npreregno:selectedRecord.npreregno,ntransactionresultcode:selectedRecord.ntransactionresultcode},//jsondata: selectedRecord.jsondata,\nuserinfo:userInfo,nregtypecode:nregtypecode,nregsubtypecode:nregsubtypecode,ndesigntemplatemappingcode:ndesigntemplatemappingcode,ncontrolcode:-1};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/createResultEntryChecklist\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:{},templateData:undefined,openTemplateModal:false,openModal:false,loading:false,loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{dispatch({type:DEFAULT_RETURN,payload:{openTemplateModal:false,selectedRecord:{},loading:false,loadEsign:false}});}};}export function defaultTest(inputData,RESelectedTest,RESelectedSample,nregtypecode,nregsubtypecode,ndesigntemplatemappingcode){if(RESelectedTest!==undefined&&RESelectedTest.length>0){return function(dispatch){var inputParamData={userinfo:inputData.userinfo,ntransactiontestcode:RESelectedTest?RESelectedTest.map(function(test){return test.ntransactiontestcode;}).join(\",\"):\"\",ntestgrouptestcode:RESelectedTest?RESelectedTest.map(function(test){return test.ntestgrouptestcode;}).join(\",\"):\"\",npreregno:RESelectedTest?RESelectedTest.map(function(preregno){return preregno.npreregno;}).join(\",\"):\"\",//RESelectedSample ? RESelectedSample.map(preregno => preregno.npreregno).join(\",\") : \"\",\nnregtypecode:nregtypecode,nregsubtypecode:nregsubtypecode,//ndesigntemplatemappingcode:ndesigntemplatemappingcode,\nndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,ncontrolcode:inputData.ncontrolcode,nneedReceivedInLab:inputData.nneedReceivedInLab};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/updateDefaultValue\",inputParamData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{TestParameters:replaceUpdatedObject(response.data.TestParameters,inputData.masterData.TestParameters,'ntransactionresultcode'),RESelectedSubSample:inputData.masterData.RESelectedSubSample}),loading:false,activeTestKey:\"IDS_RESULTS\",openModal:false,loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:false,loadEsign:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOCOMPLETE\"}));}}export function getFormula(parameterData,userInfo,masterData,index,selectedRecord){return function(dispatch){var inputParamData={ntransactiontestcode:parameterData.ntransactiontestcode,nformulacode:parameterData.ntestgrouptestformulacode,userinfo:userInfo,npreregno:parameterData.npreregno,ntransactionsamplecode:parameterData.ntransactionsamplecode};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getFormulaInputs\",inputParamData).then(function(response){var validateFormulaMandyFields=response.data.DynamicFormulaFields.map(function(item,index){return{\"idsName\":\"IDS_FILLALLFIELDS\",\"dataField\":index,\"mandatory\":true};});var selectedForumulaInput=[];var selectedForumulaInput1=[];var selectedMandatory=[];//           selectedRecord.ResultParameter = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\nresponse.data.DynamicFormulaFields.map(function(fields,index){var dynamicformulafields={};var selectedTestParameters=getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter,fields.ndynamicformulafieldcode,\"ntestparametercode\");if(selectedTestParameters.length>0){selectedTestParameters=selectedTestParameters.filter(function(element){return element.sresult!==null&&element.sresult!='';});var nisaverageneed=selectedTestParameters.length;var maxResultCode=selectedTestParameters.length>0?Math.max.apply(Math,_toConsumableArray(selectedTestParameters.map(function(o){return o.ntransactionresultcode;}))):-1;// const maxResultCode= Math.max(...(selectedTestParameters.filter(element => {\n//                 return element.sresult !== null && element.sresult !='';\n//               }).map(o => o.ntransactionresultcode)));\nvar paramValue=getRecordBasedOnPrimaryKeyName(selectedTestParameters,maxResultCode,\"ntransactionresultcode\");if(paramValue.length==0){dynamicformulafields.svalues=\"\";dynamicformulafields.sparameter=response.data.DynamicFormulaFields[index].sdescription;//dynamicformulafields.nisaverageneed = 0;\ndynamicformulafields.senableAverage=false;response.data.DynamicFormulaFields[index].nisaverageneed=0;selectedForumulaInput.push(dynamicformulafields);selectedMandatory.push(\"\");}else{if((maxResultCode>=response.data.DynamicFormulaFields[index].ntransactionresultcode&&paramValue.length>0?paramValue[0].sresult!=\"\":false)||(response.data.DynamicFormulaFields[index].svalue!=\"\"&&response.data.DynamicFormulaFields[index].svalue!=null?maxResultCode<=response.data.DynamicFormulaFields[index].ntransactionresultcode&&paramValue.length>0?paramValue[0].sresult!=\"\":false:\"\")){dynamicformulafields.svalues=paramValue[0].sresult;dynamicformulafields.sparameter=response.data.DynamicFormulaFields[index].sdescription;dynamicformulafields.sparameter=response.data.DynamicFormulaFields[index].sdescription;//dynamicformulafields.nisaverageneed = nisaverageneed;\ndynamicformulafields.senableAverage=false;response.data.DynamicFormulaFields[index].nisaverageneed=nisaverageneed;selectedForumulaInput.push(dynamicformulafields);selectedMandatory.push(paramValue[0].sresult);}else{dynamicformulafields.svalues=response.data.DynamicFormulaFields[index].svalue;dynamicformulafields.sparameter=response.data.DynamicFormulaFields[index].sdescription;// dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\ndynamicformulafields.senableAverage=false;selectedForumulaInput.push(dynamicformulafields);selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);}}}else{dynamicformulafields.svalues=response.data.DynamicFormulaFields[index].svalue;dynamicformulafields.sparameter=response.data.DynamicFormulaFields[index].sdescription;// dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\nselectedForumulaInput.push(dynamicformulafields);selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);}return selectedForumulaInput1.push(selectedRecord.ResultParameter.filter(function(x){return x.ntestparametercode===fields.ndynamicformulafieldcode;})[0]);});dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),response.data),selectedRecord:_objectSpread(_objectSpread({},selectedRecord),{},{parameterData:parameterData,naverageroundingdigits:parameterData.nroundingdigits,sformulacalculationdetail:response.data.query,formulainput:response.data.Formula,resultindex:index,DynamicFormulaFields:response.data.DynamicFormulaFields,//selectedForumulaInput: []\n//  DynamicFormulaFields.map((fields, index) => {\n//     return {\n//         selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\n//     }\n//  });\n// response.data.DynamicFields.map((fields, index) =>\nselectedForumulaInput:selectedForumulaInput,selectedMandatory:selectedMandatory// selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\n// )\n}),validateFormulaMandyFields:validateFormulaMandyFields,loading:false,screenName:\"IDS_RESULTFORMULA\",showFormula:true,operation:\"validate\",showValidate:true}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function calculateFormula(inputDataValue){return function(dispatch){var inputData={ntransactiontestcode:inputDataValue.selectedRecord.parameterData.ntransactiontestcode,ntransactionresultcode:inputDataValue.selectedRecord.parameterData.ntransactionresultcode,npreregno:inputDataValue.selectedRecord.parameterData.npreregno,sformulacalculationcode:inputDataValue.selectedRecord.sformulacalculationdetail,nformulacode:inputDataValue.selectedRecord.parameterData.ntestgrouptestformulacode,userinfo:inputDataValue.userInfo,dynamicformulafields:inputDataValue.lstDynamicFields};dispatch(initRequest(true));rsapi.post(\"testmaster/calculateFormula\",inputData).then(function(response){// inputDataValue.selectedResultData[inputDataValue.selectedRecord.resultindex] =\n// {\n//     ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\n//     ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\n//     nparametertypecode: inputDataValue.selectedRecord.parameterData.nparametertypecode,\n//     sresult: response.data.Result,\n//     nroundingdigit: inputDataValue.selectedRecord.parameterData.nroundingdigits,\n//     value: inputDataValue.selectedRecord.parameterData.ngradecode,\n//     parameter: inputDataValue.selectedRecord.parameterData\n// }\ninputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sfinal\"]=response.data.Result;inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sresult\"]=response.data.Result;inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex]['editable']=true;inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"ncalculatedresult\"]=3;inputDataValue.selectedResultGrade[inputDataValue.selectedRecord.resultindex]={ngradecode:numericGrade(inputDataValue.selectedRecord.parameterData,parseInt(response.data.Result))};dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread({},inputDataValue.masterData),selectedRecord:{selectedResultGrade:inputDataValue.selectedResultGrade,ResultParameter:inputDataValue.ResultParameter},parameterResults:inputDataValue.ResultParameter,isParameterInitialRender:true,loading:false,screenName:\"IDS_RESULTENTRY\",showFormula:false,operation:\"update\",showValidate:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{//toast.warn(error.response.data);\ntoast.warn(error.response.data[\"Result\"]);}});};}export function getREFilterTestData(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getTestBasedOnCombo\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{defaultFilterStatus:inputData.defaultFilterStatus,defaultRegistrationSubType:inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\nndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,DesignTemplateMappingValue:inputData.DesignTemplateMappingValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getREFilterTemplate(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getTestBasedOnCombo\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{defaultRegistrationSubType:inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\nndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,DesignTemplateMappingValue:inputData.DesignTemplateMappingValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function updateTestMethodSource(inputData,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/updateTestMethodSource\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),{},{RE_TEST:replaceUpdatedObject(response.data.RE_TEST,masterData.RE_TEST,'ntransactiontestcode')}),loading:false,openModal:false,loadEsign:false// activeTestKey: \"IDS_RESULTS\"\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function resultImportFile(inputParam,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getImportResultEntry\",inputParam.formData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread({},masterData),loading:false,openModal:false// activeTestKey: \"IDS_RESULTS\"\n}});if(response.data.returnStatus&&response.data.returnStatus!==\"\"){toast.info(intl.formatMessage({id:response.data.returnStatus}));}else{toast.warn(intl.formatMessage({id:response.data.returnStatus}));}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function validateEsignCredentialComplete(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"login/validateEsignCredential\",inputParam.inputData).then(function(response){if(response.data===\"Success\"){var methodUrl=\"performaction\";inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"]=inputParam.inputData.userinfo;if(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()]&&inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]){delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];}if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"testinitiate\"){dispatch(testStart(inputParam[\"screenData\"][\"inputParam\"],inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"],inputParam.inputData.userinfo));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"complete\"){dispatch(completeTest(inputParam[\"screenData\"][\"inputParam\"],inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"],inputParam.inputData.userinfo,'','',{basedrulesengine:inputParam[\"screenData\"][\"inputParam\"][\"basedrulesengine\"]}));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"default\"){dispatch(defaultTest(inputParam[\"screenData\"][\"inputParam\"][\"testChildGetREParam\"],inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"],inputParam[\"screenData\"][\"inputParam\"][\"RESelectedSample\"],inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregtypecode\"],inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregsubtypecode\"]));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"deleteInstrument\"){dispatch(deleteInstrumentRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"createMethod\"){dispatch(updateTestMethodSource(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"],inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"deleteTask\"){dispatch(deleteTaskRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]));}else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"updateParameterComments\"){dispatch(updateParameterComments(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"],inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]));}else if(inputParam[\"screenData\"][\"operation\"]===\"updatechecklist\"){var _inputParam$screenDat=inputParam[\"screenData\"],selectedRecord=_inputParam$screenDat.selectedRecord,userInfo=_inputParam$screenDat.userInfo,nregtypecode=_inputParam$screenDat.nregtypecode,nregsubtypecode=_inputParam$screenDat.nregsubtypecode,ndesigntemplatemappingcode=_inputParam$screenDat.ndesigntemplatemappingcode;delete selectedRecord.esignpassword;delete selectedRecord.esigncomments;delete selectedRecord.esignreason;delete selectedRecord.agree;delete inputParam.inputData.password;userInfo=inputParam.inputData.userinfo;dispatch(onSaveCheckList(selectedRecord,userInfo,nregtypecode,nregsubtypecode,ndesigntemplatemappingcode));}//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\nelse if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"]===\"updateSection\"){dispatch(updateSectionTest(inputParam[\"screenData\"][\"inputParam\"]));}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getMeanCalculationTestParameter(meanParam){return function(dispatch){dispatch(initRequest(true));var inputData={npreregno:meanParam.selectedRecord.npreregno,ntransactionresultcode:meanParam.selectedRecord.ntransactionresultcode,userinfo:meanParam.userInfo};return rsapi.post(\"resultentrybysample/getMeanCalculationTestParameter\",inputData).then(function(response){var list=response.data||[];// const optionList = [];\n// list.map(item=>{\n//     console.log(\"item:\", item);\n//         optionList.push({item:item, \n//                         label:\"[\"+item.stestsynonym+\"]-[\"+item.sparametersynonym+\"]-[\"+item.sresult+\"]\", \n//                         value:item.ntransactionresultcode})\n//     })\n// const masterData = {...masterData, ResultParameter:meanParam.selectedRecord}\ndispatch({type:DEFAULT_RETURN,payload:{loading:false,openModal:true,meanTestParameterList:list,screenName:\"IDS_MEANPARAMETER\",ncontrolcode:meanParam.ncontrolCode,selectedTestParameterMean:meanParam.selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}/*export function deleteResultUsedMaterial(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedMaterial\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}*/export function getAverageResult(parameterData,index,selectedForumulaInput,userInfo,masterData,selectedRecord){return function(dispatch){var selectedTestParameters=selectedRecord.ResultParameter.filter(function(element){return element.editable==true;});selectedTestParameters=getRecordBasedOnPrimaryKeyName(selectedTestParameters,selectedRecord.parameterData.ntransactionsamplecode,\"ntransactionsamplecode\");selectedTestParameters=getRecordBasedOnPrimaryKeyName(selectedTestParameters,parameterData.ndynamicformulafieldcode,\"ntestparametercode\");var ResultParameterNew=[];if(selectedTestParameters.length>0){selectedTestParameters.map(function(Parameter){var resultParameterValues={};resultParameterValues.ntransactionresultcode=Parameter.ntransactionresultcode;resultParameterValues.sresult=Parameter.sresult;resultParameterValues.ntestparametercode=Parameter.ntestparametercode;ResultParameterNew.push(resultParameterValues);});}var inputParamData={naverageroundingdigits:selectedRecord.naverageroundingdigits,ntransactiontestcode:parameterData.ntransactiontestcode,ntestparametercode:parameterData.ndynamicformulafieldcode,userinfo:userInfo,ntransactionsamplecode:parameterData.ntransactionsamplecode,ResultParameter:ResultParameterNew};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getAverageResult\",inputParamData).then(function(response){selectedForumulaInput[index].soldvalue=selectedForumulaInput[index].svalues;selectedForumulaInput[index].svalues=response.data.AverageResult.sresult;selectedForumulaInput[index].senableAverage=true;//selectedForumulaInput[index].svaluesold = \ndispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),response.data),selectedRecord:_objectSpread(_objectSpread({},selectedRecord),{},{selectedForumulaInput:selectedForumulaInput}),// selectedRecord: {\n//     ...selectedRecord,\n//     parameterData: parameterData,\n//     sformulacalculationdetail: response.data.query,\n//     formulainput: response.data.Formula,\n//     resultindex: index,\n//     selectedForumulaInput,\n//     selectedMandatory\n// },\n// validateFormulaMandyFields,\nloading:false,screenName:\"IDS_RESULTFORMULA\",showFormula:true,operation:\"validate\",showValidate:true}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}// export function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\n//     return function (dispatch) {\n//         let inputParamData = {\n//             ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\n//         }\n//         dispatch(initRequest(true));\n//         rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\n//             .then(response => {\n//                 let showMultiSelectCombo=false;  \n//                 let ResultParameter=selectedRecord['ResultParameter']\n//                 let onlyAlertMsgAvailable=false; \n//                 let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\n//                 if(inputData['nneedsubcodedresult']===transactionStatus.YES){\n//                     showMultiSelectCombo=true\n//                     masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \n//                 }\n//                 else\n//                 {\n//                     onlyAlertMsgAvailable=true; \n//                 }\n//                // ResultParameter.map(Parameter=>\n//                     for(const Parameter of ResultParameter) \n//                     {\n//                         if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\n//                             let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\n//                             Parameter.additionalInfoUidata\n//                             if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\n//                             Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\n//                             if(Parameter.additionalInfoUidata){\n//                                 selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \n//                                 break;\n//                             }\n//                             }else{\n//                             if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\n//                                 delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \n//                             }\n//                             }\n//                         }\n//                     };  \n//                 masterData['salertmessage']=inputData.salertmessage \n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: { \n//                         loading: false,\n//                         masterData, \n//                         showAlertGrid: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\n//                          showAlertForPredefined: true,\n//                          showMultiSelectCombo,\n//                          onlyAlertMsgAvailable,\n//                          additionalInfoView:false,\n//                          selectedRecord,\n//                          currentAlertResultCode,\n//                          currentntestgrouptestpredefcode\n//                     }\n//                 })\n//             })\n//             .catch(error => {\n//                 dispatch({\n//                     type: DEFAULT_RETURN,\n//                     payload: {\n//                         loading: false\n//                     }\n//                 })\n//                 if (error.response.status === 500) {\n//                     toast.error(error.message);\n//                 } else {\n//                     toast.warn(error.response.data);\n//                 }\n//             })\n//     }\n// }\nexport function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode){return function(dispatch){var inputParamData={ntestgrouptestpredefcode:inputData.ntestgrouptestpredefcode};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getPredefinedData\",inputParamData).then(function(response){var showMultiSelectCombo=false;var ResultParameter=selectedRecord['ResultParameter'];var onlyAlertMsgAvailable=false;var testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult'];if(inputData['nneedsubcodedresult']===transactionStatus.YES){showMultiSelectCombo=true;masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult;}else{onlyAlertMsgAvailable=true;}// ResultParameter.map(Parameter=>\nvar _iterator=_createForOfIteratorHelper(ResultParameter),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var Parameter=_step.value;if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){var additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata):Parameter.additionalInfoUidata;if(Parameter['ntransactionresultcode']===currentAlertResultCode&&Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){if(Parameter.additionalInfoUidata){selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'];break;}}else{if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){delete selectedRecord[\"ntestgrouptestpredefsubcode\"];}}}}}catch(err){_iterator.e(err);}finally{_iterator.f();};masterData['salertmessage']=inputData.salertmessage;dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:masterData,showAlert:inputData.nneedresultentryalert===transactionStatus.NO?false:true,showAlertForPredefined:true,showMultiSelectCombo:showMultiSelectCombo,onlyAlertMsgAvailable:onlyAlertMsgAvailable,additionalInfoView:false,selectedRecord:selectedRecord,currentAlertResultCode:currentAlertResultCode,currentntestgrouptestpredefcode:currentntestgrouptestpredefcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getELNTestValidation(inputData,integrationSettings){return function(dispatch){//console.log(localStorage);\n//localStorage.removeItem(\"linkedorder\");\nvar inputs={npreregno:inputData.test.npreregno,ntransactiontestcode:inputData.test.ntransactiontestcode,userInfo:inputData.userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getELNTestValidation\",inputs).then(function(response){var enlLink=\"\";if(response.data){var link=\"\";var detail=CF_encryptionData(\"-1//Sheet\").EncryptData;// let encryptedbatchid = CF_encryptionData(inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-' + inputData.test.ntestcode +'-' + inputData.userInfo.nsitecode).EncryptData;\n//let encryptedbatchid = CF_encryptionData(\"TR-23-0014-TR-23-0014-01-TestNew\").EncryptData;\n// let encryptedbatchid = CF_encryptionData(inputData.test.sarno +'-' +inputData.test.ssamplearno +'-'+ inputData.test.stestsynonym+'-'+inputData.userInfo.ssitename).EncryptData;\nvar settedId=inputData.test.npreregno+'-'+inputData.test.ntransactionsamplecode+'-'+inputData.test.ntestcode+'-'+inputData.test.ntestrepeatno+'-'+inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode;//console.log(settedId);\nvar encryptedbatchid=CF_encryptionData(settedId).EncryptData;var userObject={usercode:inputData.elnUserInfo.nelncode,username:inputData.elnUserInfo.selnuserid,userfullname:inputData.elnUserInfo.selnusername,lsusergroup:{usergroupcode:inputData.elnUserInfo.nelnusergroupcode,usergroupname:inputData.elnUserInfo.nelnusergroupcode},lssitemaster:{sitecode:inputData.elnSite.nelnsitecode}};var encrypteduser=CF_encryptionData(userObject).EncryptData;//const baseURL = \"http://localhost:9090/ELN\";\nvar baseURL=integrationSettings[1].slinkname;link=baseURL+\"/vieworder\"+'#{\"d\":\"'+settedId+'\",\"user\":\"'+encrypteduser+'\",\"batchid\":\"'+encryptedbatchid+'\"}';// let a=\"/vieworder\" + '#{\"d\":\"' + inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\n// // return link;\n// //   }\n// let hashobject = JSON.parse(a);\n//                     let batchid = \"\";\n//  if (link.batchid !== undefined) {\n// // eslint-disable-next-line no-useless-escape\n// batchid = CF_decrypt(link.batchid ).replaceAll('\\\"', '');\n//  }\n// const encrypteduser1 = CF_decrypt(link);\n//enlLink = link;\n// console.log(\"--->\"+link);\n//console.log(\"--->\"+batchid);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{enlLink:link}),openELNSheet:true,loading:false,enlLink:link// enlLink:enlLink\n}});//enlLink = \"https://logilabelntest.azurewebsites.net/vieworder\".concat(link);    \n}else{toast.warn(intl.formatMessage({id:\"IDS_NOSHEETFORTHISTEST\"}));dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),response.data),{},{enlLink:\"\"}),enlLink:\"\",loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getConfigurationFilter(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getConfigurationFilter\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTestBasedBatchWorklist(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getTestBasedBatchWorklist\",inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputData.masterData),response.data),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function addREAdhocParamter(inputDataObj){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/getAdhocParamter\",inputDataObj).then(function(response){var AdhocParamter=constructOptionList(response.data['AdhocParamter']||[],'ntestparametercode','sparametersynonym',undefined,undefined,undefined);AdhocParamter=AdhocParamter.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},inputDataObj.masterData),{},{AdhocParamter:AdhocParamter}),screenName:'IDS_ADHOCPARAMETER',adhoctransactiontestcode:inputDataObj.ntransactiontestcode,adhocpreregno:inputDataObj.npreregno,openModal:true,operation:\"IDS_ADD\",selectedRecord:{},adhocId:inputDataObj.adhocId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function createAdhocParamter(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/createAdhocParamter\",inputParam.inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},inputParam.inputData.masterData),response.data),screenName:'IDS_ADHOCPARAMETER',openModal:false,activeTestTab:\"IDS_RESULTS\",activeTabIndex:1}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function enforceResult(inputParam,userInfo){return function(dispatch){dispatch(initRequest(true));var url=[];url.push(rsapi.post(\"/grade/getGrade\",{userinfo:userInfo}));url.push(rsapi.post(\"resultentrybysample/getenforceResult\",{ncontrolcode:inputParam['ncontrolcode'],ntransactiontestcode:inputParam['dataItem']['ntransactiontestcode'],ntransactionresultcode:inputParam['dataItem']['ntransactionresultcode'],userinfo:userInfo}));Axios.all(url).then(function(response){var Grade=constructOptionList(response[0].data||[],\"ngradecode\",\"sdisplaystatus\",false,false,false);var selectedRecord={};var savedResultparameter=response[1].data['savedResultparameter'];selectedRecord=//savedResultparameter['sgradename']&&savedResultparameter['sgradename']!=='NA'?\n{'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],// 'ngradecode':{\n//     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\n//     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\n// } ,\n'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],ntransactionresultcode:savedResultparameter['ntransactionresultcode'],ntransactiontestcode:savedResultparameter['ntransactiontestcode']};//        : {\n//         'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\n//         'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\n//         // 'ngradecode':{\n//         //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\n//         //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\n//         // } ,\n//         ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\n//         ntransactiontestcode:savedResultparameter['ntransactiontestcode']\n//    };\ndispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({'GradeList':Grade.get(\"OptionList\")},inputParam.masterData),response.data),ncontrolcode:inputParam['ncontrolcode'],selectedRecord:selectedRecord,screenName:\"IDS_ENFORCERESULT\",openModal:true,operation:\"update\",loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function ResultEntryViewPatientDetails(masterData,screenName,userInfo,viewdetails){return function(dispatch){dispatch(initRequest(true));var selectedRecord={ntestcode:viewdetails.test.ntestcode};rsapi.post(\"worklist/getSampleViewDetails\",{selectedRecord:selectedRecord,PatientId:viewdetails.test.PatientId,npreregno:viewdetails.test.npreregno,userinfo:userInfo}).then(function(response){masterData['AuditModifiedComments']=[];masterData['AuditModifiedComments']=response.data['AuditModifiedComments'];masterData['viewdetails']=[];masterData['viewdetails']=response.data['viewdetails'][0];//sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,screenName:\"IDS_PREVIOUSRESULTVIEW\",operation:\"\",loading:false,openModal:true}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function resultEntryGetParameter(selectedRecord,inputData,userInfo,ncontrolcode,testskip,testtake){if(inputData.realTestcodeValue.ntestcode!==0){return function(dispatch){var additionalInfo=[];var selectedSpecification=selectedRecord.selectedSpecification;var TestList=inputData.searchedTest?_toConsumableArray(inputData.searchedTest):_toConsumableArray(inputData.RE_TEST);TestList=TestList.splice(testskip,testskip+testtake);var acceptTestList=getSameRecordFromTwoArrays(TestList,inputData.RESelectedTest,\"ntransactiontestcode\");if(acceptTestList&&acceptTestList.length>0){if(Object.values(inputData).length>0&&inputData.RESelectedTest.length>0){var inputParamData={ntransactiontestcode:acceptTestList[0].ntransactiontestcode.toString(),ntestcode:inputData.realTestcodeValue.ntestcode,nallottedspeccode:selectedRecord.nallottedspeccode.value,nspecsampletypecode:selectedRecord.ncomponentcode.value,userinfo:userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntryParameter\",inputParamData).then(function(response){//     const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\n//     \"scomponentname\", undefined, undefined, false);\n// const Component = ComponentMap.get(\"OptionList\");\nvar selectedResultGrade=[];var paremterResultcode=[];var parameterResults=response.data.ResultParameter;var predefDefaultFlag=false;parameterResults.map(function(param,index){selectedResultGrade[index]={ngradecode:param.ngradecode};paremterResultcode[index]=param.ntransactionresultcode;var jsondata=JSON.parse(param.jsondata['value']);if(jsondata.hasOwnProperty('additionalInfo')){additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'];}predefDefaultFlag=false;response.data.PredefinedValues&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(function(predefinedvalue){if(!predefDefaultFlag){predefDefaultFlag=true;response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]=constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]||[],'sresultpredefinedname','sresultpredefinedname',undefined,undefined,undefined).get(\"OptionList\");}});param['editable']=false;});dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData),response.data),{},{paremterResultcode:paremterResultcode}),selectedRecord:{additionalInfo:additionalInfo.length>0?additionalInfo:[],selectedResultGrade:selectedResultGrade,ResultParameter:response.data.ResultParameter,selectedSpecification:selectedSpecification,nallottedspeccode:selectedRecord.nallottedspeccode,ncomponentcode:selectedRecord.ncomponentcode,selectedComponent:selectedRecord.selectedComponent},selectedsubcode:undefined,parameterResults:response.data.ResultParameter,isParameterInitialRender:true,loading:false,screenName:\"IDS_RESULTENTRYPARAMETER\",openModal:true,operation:\"update\",activeTestKey:\"IDS_RESULTS\",ncontrolcode:ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//}\n}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}};}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTVALIDTEST\"}));}}export function resultEntryGetSpec(inputData,userInfo,ncontrolcode,testskip,testtake){return function(dispatch){if(inputData.realTestcodeValue.length!==0&&inputData.realTestcodeValue.ntestcode!==0){var additionalInfo=[];var TestList=inputData.searchedTest?_toConsumableArray(inputData.searchedTest):_toConsumableArray(inputData.RE_TEST);TestList=TestList.splice(testskip,testskip+testtake);var inputParamData={nregsubtypecode:inputData.realRegSubTypeValue.nregsubtypecode,nregtypecode:inputData.realRegSubTypeValue.nregtypecode,ntestcode:inputData.realTestcodeValue.ntestcode,userinfo:userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntrySpec\",inputParamData).then(function(response){var allottedspeccode={value:response.data.nallottedspeccode[\"nallottedspeccode\"],label:response.data.nallottedspeccode[\"sspecname\"]};var componentcode={value:response.data.ncomponentcode[\"ncomponentcode\"],label:response.data.ncomponentcode[\"scomponentname\"]};// componentcode.push({\n//     \"value\":response.data.ncomponentcode[\"ncomponentcode\"],\n//     \"label\": response.data.ncomponentcode[\"scomponentname\"]\n// });\nvar selectedResultGrade=[];var paremterResultcode=[];var parameterResults=response.data.ResultParameter;var predefDefaultFlag=false;parameterResults.map(function(param,index){selectedResultGrade[index]={ngradecode:param.ngradecode};paremterResultcode[index]=param.ntransactionresultcode;var jsondata=JSON.parse(param.jsondata['value']);if(jsondata.hasOwnProperty('additionalInfo')){additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'];}predefDefaultFlag=false;response.data.PredefinedValues&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(function(predefinedvalue){if(!predefDefaultFlag){predefDefaultFlag=true;response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]=constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]||[],'sresultpredefinedname','sresultpredefinedname',undefined,undefined,undefined).get(\"OptionList\");}});param['editable']=false;});var SpecificationMap=constructOptionList(response.data[\"Specification\"]||[],\"nallottedspeccode\",\"sspecname\",undefined,undefined,false);var Specification=SpecificationMap.get(\"OptionList\");var ComponentMap=constructOptionList(response.data[\"Component\"]||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,false);var Component=ComponentMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData),response.data),{},{paremterResultcode:paremterResultcode,selectedSpecification:Specification,selectedComponent:Component//selectedResultGrade ,\n}),selectedRecord:{additionalInfo:additionalInfo.length>0?additionalInfo:[],selectedResultGrade:selectedResultGrade,selectedSpecification:Specification,selectedComponent:Component,ResultParameter:response.data.ResultParameter,nallottedspeccode:allottedspeccode,ncomponentcode:componentcode//nallottedspeccode:selectedRecord.nallottedspeccode\n},parameterResults:response.data.ResultParameter,isParameterInitialRender:true,loading:false,screenName:\"IDS_RESULTENTRYPARAMETER\",openModal:true,operation:\"update\",activeTestKey:\"IDS_RESULTS\",ncontrolcode:ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//}\n}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTVALIDTEST\"}));}};}export function resultEntryGetComponent(selectedRecord,inputData,userInfo,ncontrolcode,testskip,testtake){if(inputData.realTestcodeValue.ntestcode!==0){return function(dispatch){var additionalInfo=[];var selectedSpecification=selectedRecord.selectedSpecification;var TestList=inputData.searchedTest?_toConsumableArray(inputData.searchedTest):_toConsumableArray(inputData.RE_TEST);TestList=TestList.splice(testskip,testskip+testtake);var acceptTestList=getSameRecordFromTwoArrays(TestList,inputData.RESelectedTest,\"ntransactiontestcode\");if(acceptTestList&&acceptTestList.length>0){if(Object.values(inputData).length>0&&inputData.RESelectedTest.length>0){var inputParamData={ntransactiontestcode:acceptTestList[0].ntransactiontestcode.toString(),ntestcode:inputData.realTestcodeValue.ntestcode,nallottedspeccode:selectedRecord.nallottedspeccode.value,userinfo:userInfo};dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getResultEntryComponent\",inputParamData).then(function(response){var ComponentMap=constructOptionList(response.data[\"Component\"]||[],\"ncomponentcode\",\"scomponentname\",undefined,undefined,false);var Component=ComponentMap.get(\"OptionList\");var componentcode={value:response.data.ncomponentcode[\"ncomponentcode\"],label:response.data.ncomponentcode[\"scomponentname\"]};var selectedResultGrade=[];var paremterResultcode=[];var parameterResults=response.data.ResultParameter;var predefDefaultFlag=false;parameterResults.map(function(param,index){selectedResultGrade[index]={ngradecode:param.ngradecode};paremterResultcode[index]=param.ntransactionresultcode;var jsondata=JSON.parse(param.jsondata['value']);if(jsondata.hasOwnProperty('additionalInfo')){additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'];}predefDefaultFlag=false;response.data.PredefinedValues&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]&&response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(function(predefinedvalue){if(!predefDefaultFlag){predefDefaultFlag=true;response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]=constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]||[],'sresultpredefinedname','sresultpredefinedname',undefined,undefined,undefined).get(\"OptionList\");}});param['editable']=false;});dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData),response.data),{},{paremterResultcode:paremterResultcode}),selectedRecord:{additionalInfo:additionalInfo.length>0?additionalInfo:[],selectedResultGrade:selectedResultGrade,ResultParameter:response.data.ResultParameter,selectedSpecification:selectedSpecification,nallottedspeccode:selectedRecord.nallottedspeccode,selectedComponent:Component,ncomponentcode:componentcode},selectedsubcode:undefined,parameterResults:response.data.ResultParameter,isParameterInitialRender:true,loading:false,screenName:\"IDS_RESULTENTRYPARAMETER\",openModal:true,operation:\"update\",activeTestKey:\"IDS_RESULTS\",ncontrolcode:ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});//}\n}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false}});toast.warn(intl.formatMessage({id:\"IDS_SELECTTESTTOENTERRESULT\"}));}};}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTVALIDTEST\"}));}}export function addREAdhocTestParamter(inputDataObj){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/getAdhocTestParamter\",inputDataObj).then(function(response){var AdhocTestParamter=constructOptionList(response.data['TestParameter']||[],'ntestparametercode','sparametersynonym',undefined,undefined,undefined);AdhocTestParamter=AdhocTestParamter.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},inputDataObj.masterData),{},{AdhocParamter:AdhocTestParamter}),screenName:'IDS_ADHOCPARAMETER',adhoctransactiontestcode:inputDataObj.ntransactiontestcode,adhocpreregno:inputDataObj.npreregno,openModal:true,operation:\"IDS_ADD\",selectedRecordAdhocParameter:{},adhocId:inputDataObj.adhocId}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function createAdhocTestParamter(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/createAdhocTestParamter\",inputParam.inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterData:_objectSpread(_objectSpread({},inputParam.inputData.masterData),response.data),screenName:'IDS_ADHOCPARAMETER',openModal:false,activeTestTab:\"IDS_RESULTS\",activeTabIndex:1,selectedRecordAdhocParameter:{}}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function CompletePopupAction(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getAnalysedUser\",inputParam.inputData).then(function(response){var selectedRecordCompleteForm={};var UsersMap=constructOptionList(response.data.Users||[],\"nusercode\",\"susername\",undefined,undefined,false);var Users=UsersMap.get(\"OptionList\");selectedRecordCompleteForm[\"nusercode\"]={\"value\":response.data.userCode,\"label\":response.data.userName};dispatch({type:DEFAULT_RETURN,payload:{Users:Users,isOpen:true,operation:inputParam.inputData.operation,screenName:\"IDS_RESULTENTRYCOMPLETE\",openModal:true,ncontrolCode:inputParam.inputData.ncontrolcode,loading:false,isCompleteInitialRender:true,selectedRecordCompleteForm:selectedRecordCompleteForm}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}//Added by sonia for ALPD-4084 on May 2 2024 Export action\nexport function exportAction(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"resultentrybysample/getExportData\",inputParam.inputData).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});var value=\"\";if(response.data.rtn===\"Success\"){value=response.data[\"ExportFileViewUrl\"];var win=window.open(value,'_blank');if(win){win.focus();}else{intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');}}else{if(response.data[\"rtn\"]){toast.warn(intl.formatMessage({id:response.data.rtn}));}}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\nexport function getSectionChange(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/getSectionChange\",inputParam.inputData).then(function(response){var section=[];//ALPD-4050\nvar selectedRecord=_objectSpread(_objectSpread({},inputParam.selectedRecord),{},{nsectioncode:\"\"});var sectionMap=constructOptionList(response.data.Section||[],\"nsectioncode\",\"ssectionname\",undefined,undefined,false);section=sectionMap.get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{section:section,loading:false,loadEsign:false,openModal:true,operation:inputParam.inputData.operation,screenName:inputParam.inputData.screenName,ncontrolcode:inputParam.inputData.ncontrolcode,selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\nexport function updateSectionTest(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"resultentrybysample/updateSectionTest\",inputParam.inputData).then(function(response){if(response.data.rtn===undefined||response.data.rtn===\"Success\"){var responseData=sortData(response.data,'ascending','ntransactionresultcode');var selectedRecord=_objectSpread(_objectSpread({},inputParam.selectedRecord),{},{\"nsectioncode\":\"\"});responseData[\"RESelectedTest\"]=getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");//ALPD-4226--Vignesh R(24-05-2024)--Test is de-selected when changing the section\nvar selectedTestList=[];if(responseData[\"RESelectedTest\"].length===0&&responseData.RE_TEST.length>0){selectedTestList.push(responseData.RE_TEST[0]);responseData[\"RESelectedTest\"]=selectedTestList;}var masterData=_objectSpread(_objectSpread({},inputParam.inputData.masterData),responseData);var respObject=_objectSpread(_objectSpread(_objectSpread({},inputParam.inputData),inputParam.inputData.masterData),{},{masterData:masterData,loading:false,loadEsign:false,openModal:false,showSample:undefined,selectedRecord:selectedRecord});dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList,respObject));}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,loadEsign:false,openModal:false}});toast.warn(response.data.rtn);}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/ResultEntryAction.js"],"names":["rsapi","DEFAULT_RETURN","toast","initRequest","intl","Axios","numericGrade","constructOptionList","fillRecordBasedOnCheckBoxSelection","filterRecordBasedOnTwoArrays","getRecordBasedOnPrimaryKeyName","getSameRecordFromTwoArrays","replaceUpdatedObject","sortData","updatedObjectWithNewElement","rearrangeDateFormat","filterRecordBasedOnPrimaryKeyName","reArrangeArrays","compareArrays","CF_encryptionData","sortDataByParent","checkBoxOperation","transactionStatus","crudMaster","postCRUDOrganiseTransSearch","getsubSampleREDetail","inputData","isServiceRequired","dispatch","inputParamData","ntype","nflag","nsampletypecode","nregtypecode","nregsubtypecode","npreregno","ntranscode","String","ntransactionstatus","ntransactiontestcode","userinfo","ntestcode","napprovalversioncode","fromdate","todate","activeTestKey","activeSampleKey","nneedsubsample","masterData","realRegSubTypeValue","ndesigntemplatemappingcode","nneedtemplatebasedflow","nworlistcode","nbatchmastercode","nneedReceivedInLab","activeName","dataStateName","post","then","response","data","check","SINGLESELECT","undefined","MULTISELECT","RESelectedTest","length","type","payload","loading","warn","formatMessage","id","sample","oldSelectedTest","childTabsKey","removeElementFromArray","RESelectedSubSample","QUICKSELECTSTATUS","QUICKSELECTALL","RE_SUBSAMPLE","RE_TEST","RESelectedSample","searchSubSampleRef","current","value","searchTestRef","testskip","testtake","subSampleSkip","subSampleTake","skipInfo","TestParameters","ResultUsedInstrument","ResultUsedMaterial","ResultUsedTasks","RegistrationTestAttachment","ResultChangeHistory","RegistrationTestComment","RegistrationComment","wholeTestList","map","b","test","index","includes","splice","keepOld","list","dbData","reduce","unique","item","skip","sort","filter","multifilterInfo","multiFilterLoad","searchSampleRef","openModal","subsampleskip","take","activeTabIndex","catch","error","status","message","oldSelectedSubSample","subsampletake","TestSelected","subSampleSelected","isGrandChildGetRequired","toString","filterSelectedSubSample","ntransactionsamplecode","subsample","join","getTestChildTabREDetail","getTestREDetail","subsamplecheck","SubSampleSelected","wholeSubSample","forEach","selectedTest","selectedSubSample1","x","bool","showFilter","activeSampleTab","subSample","responseData","RegistrationSampleComment","RegistrationSampleAttachment","testList","wholeSubsampleList","selectedSubSample","activeSubSampleTab","activeTestTab","screenName","console","log","getSampleChildTabREDetail","url","activeTabId","getRERegistrationType","defaultSampleType","realDesignTemplateMapping","realApproveConfigVersion","realApprovalConfigVersionList","realDesignTemplateMappingList","realFilterStatusList","realRegistrationSubTypeList","realRegistrationTypeList","realTestvaluesList","getRERegistrationSubType","defaultRegistrationType","getREApprovalConfigVersion","defaultRegistrationSubType","getREFilterStatus","defaultjobstatus","getREJobStatus","defaultApprovalConfigVersion","getResultEntryDetails","refs","rtn","warning","realFromDate","realToDate","showTest","showSample","resultDataState","instrumentDataState","materialDataState","taskDataState","documentDataState","resultChangeDataState","testCommentDataState","historyDataState","samplePrintHistoryDataState","sampleHistoryDataState","resultGetModule","userInfo","ncontrolcode","additionalInfo","TestList","searchedTest","acceptTestList","Object","values","realRegTypeValue","selectedRecord","selectedResultGrade","paremterResultcode","parameterResults","ResultParameter","predefDefaultFlag","formFields","FormFields","formFieldJSON","JSON","parse","jsondata","entries","key","push","param","ngradecode","ntransactionresultcode","hasOwnProperty","PredefinedValues","predefinedvalue","get","ResultAccuracyList","ResultAccuracy","UnitList","Unit","isParameterInitialRender","operation","completeTest","inputParam","acceptList","completeResultId","booleanFlag","isSearched","testChildGetREParam","ninsertMaterialInventoryTrans","nportalrequired","basedrulesengine","napprovalconfigcode","transactiontestcode","nsettingcode","nusercode","susername","RE_SAMPLE","onlySampleService","testcode","sampleCode","element","transactionsamplecode","selectedSampleArray","subSampleArray","selectPreregNOBefore","unwantedPreregno","some","y","boolSelectedSubSample","searchedSubSample","backfrontTest","objx","objy","searchedSubSamplebefore","searchedSubSampleaftere","unwantedSamplecode","RESelectedTest1","RESelectedTest2","searchedSample","keys","respObject","RegistrationTestAlert","NewTestGroupTestAlert","showAlertGrid","showAlertForPredefined","additionalInfoView","loadEsign","showConfirmAlert","paramList","postParamList","inputParameter","fecthInputObject","fetchUrl","primaryKeyField","fetchSelectedData","testStart","subSampleNeeded","needjoballocationandmyjob","NeedJobAllocationAndMyjob","nneedjoballocation","nneedmyjob","responseRESelectedTest","responseRE_TEST","respObject1","compareTwoArray","firstArray","secondArray","PrimaryKey","filterArray","testMethodSourceEdit","ntestgrouptestcode","editSourceMethodId","TagSource","SourceData","TagListSource","TagMethod","MethodData","TagListMethod","stestsynonym","nsourcecode","SourceDataValue","nmethodcode","MethodDataValue","updateParameterComments","sresultcomment","addREInstrument","urlArray","resultusedinstrument","timeZoneService","UTCtimeZoneService","all","TagInstrumentName","InstrumentName","TagListInstrumentName","TagInsturmentcategory","InstrumentCategory","TagListInstrumentCategory","TagTimeZone","TagListTimeZone","selectedId","selectedRecordInstrumentForm","sarno","ssamplearno","ninstrumentcatcode","ninstrumentnamecode","dtodate","dfromdate","ntzfromdate","ntimezonecode","stimezoneid","ntztodate","timeZoneList","isInstrumentInitialRender","addResultUsedInstrumentId","addREMaterial","nsectioncode","materialTypeMap","MaterialType","materialType","materialCatMap","MaterialCategory","materialCat","materialMap","Material","material","materialInventoryMap","MaterialInventory","materialInventory","selectedRecordMaterialForm","ntestgroupmaterial","YES","ssectionname","nmaterialtypecode","nmaterialcatcode","nmaterialcode","nmaterialinventorycode","sunitname","savailablequantity","savailablequatity","isMaterialInitialRender","addResultUsedMaterailId","getREMaterialComboGet","getREMaterialCategoryByType","getREMaterialByCategory","getREMaterialInvertoryByMaterial","getAvailableMaterialQuantity","inventory","deleteInstrumentRecord","nresultusedinstrumentcode","fetchInstrumentRecord","editRow","getResultUsedInstrument","TagInstrumentId","InstrumentId","TagListInstrumentId","EditResultUsedInstrument","sinstrumentcatname","sinstrumentname","ninstrumentcode","sinstrumentid","stzfromdate","stztodate","sfromdate","stodate","ncontrolCode","fetchMaterialRecord","nresultusedmaterialcode","EditResultUsedMaterial","label","smaterialtypename","nmaterialcategorycode","smaterialcatname","smaterialname","ninventorycode","sinventoryid","susedquantity","nqtyused","scarriergas","smobilephase","sremarks","deleteTaskRecord","nresultusedtaskcode","fetchTaskRecord","EditResultUsedTasks","selectedRecordTaskForm","sanalysistime","smisctime","spreanalysistime","spreparationtime","scomments","staskprocedure","isTaskInitialRender","parameterRecord","controlcode","ParameterComments","sparametersynonym","checkListRecord","napprovalparametercode","nchecklistversioncode","lsteditedQB","ChecklistData","checklist","nchecklistversionqbcode","nchecklistqbcode","sdefaultvalue","nchecklistcomponentcode","openTemplateModal","needSaveButton","onSaveCheckList","listResultCheckList","editedQB","qbcode","ResultCheckList","templateData","defaultTest","preregno","getFormula","parameterData","nformulacode","ntestgrouptestformulacode","validateFormulaMandyFields","DynamicFormulaFields","selectedForumulaInput","selectedForumulaInput1","selectedMandatory","fields","dynamicformulafields","selectedTestParameters","ndynamicformulafieldcode","sresult","nisaverageneed","maxResultCode","Math","max","o","paramValue","svalues","sparameter","sdescription","senableAverage","svalue","ntestparametercode","naverageroundingdigits","nroundingdigits","sformulacalculationdetail","query","formulainput","Formula","resultindex","showFormula","showValidate","calculateFormula","inputDataValue","sformulacalculationcode","lstDynamicFields","Result","parseInt","getREFilterTestData","defaultFilterStatus","DesignTemplateMappingValue","getREFilterTemplate","updateTestMethodSource","resultImportFile","formData","returnStatus","info","validateEsignCredentialComplete","methodUrl","toLowerCase","esignpassword","esigncomments","esignreason","agree","password","updateSectionTest","getMeanCalculationTestParameter","meanParam","meanTestParameterList","selectedTestParameterMean","getAverageResult","editable","ResultParameterNew","Parameter","resultParameterValues","soldvalue","AverageResult","getPredefinedData","currentAlertResultCode","currentntestgrouptestpredefcode","ntestgrouptestpredefcode","showMultiSelectCombo","onlyAlertMsgAvailable","testgrouptestpredefsubresult","additionalInfoUidata","salertmessage","showAlert","nneedresultentryalert","NO","getELNTestValidation","integrationSettings","inputs","enlLink","link","detail","EncryptData","settedId","ntestrepeatno","ntestretestno","nsitecode","encryptedbatchid","userObject","usercode","elnUserInfo","nelncode","username","selnuserid","userfullname","selnusername","lsusergroup","usergroupcode","nelnusergroupcode","usergroupname","lssitemaster","sitecode","elnSite","nelnsitecode","encrypteduser","baseURL","slinkname","openELNSheet","getConfigurationFilter","getTestBasedBatchWorklist","addREAdhocParamter","inputDataObj","AdhocParamter","adhoctransactiontestcode","adhocpreregno","adhocId","createAdhocParamter","enforceResult","Grade","savedResultparameter","ResultEntryViewPatientDetails","viewdetails","PatientId","resultEntryGetParameter","realTestcodeValue","selectedSpecification","nallottedspeccode","nspecsampletypecode","ncomponentcode","selectedComponent","selectedsubcode","resultEntryGetSpec","allottedspeccode","componentcode","SpecificationMap","Specification","ComponentMap","Component","resultEntryGetComponent","addREAdhocTestParamter","AdhocTestParamter","selectedRecordAdhocParameter","createAdhocTestParamter","CompletePopupAction","selectedRecordCompleteForm","UsersMap","Users","userCode","userName","isOpen","isCompleteInitialRender","exportAction","win","window","open","focus","getSectionChange","section","sectionMap","Section","selectedTestList"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    initRequest\r\n} from './LoginAction';\r\nimport {\r\n    intl\r\n} from '../components/App';\r\nimport Axios from 'axios';\r\nimport {\r\n    numericGrade\r\n} from '../pages/ResultEntryBySample/ResultEntryValidation';\r\nimport {\r\n    constructOptionList,\r\n    fillRecordBasedOnCheckBoxSelection,\r\n    filterRecordBasedOnTwoArrays,\r\n    getRecordBasedOnPrimaryKeyName,\r\n    getSameRecordFromTwoArrays,\r\n    replaceUpdatedObject,\r\n    sortData,\r\n    updatedObjectWithNewElement, rearrangeDateFormat, filterRecordBasedOnPrimaryKeyName, reArrangeArrays, compareArrays,CF_encryptionData,sortDataByParent\r\n} from '../components/CommonScript';\r\nimport {\r\n    checkBoxOperation,\r\n    transactionStatus\r\n} from '../components/Enumeration';\r\nimport { crudMaster, postCRUDOrganiseTransSearch } from './ServiceAction'\r\n\r\nexport function getsubSampleREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntype: 2,\r\n            nflag: inputData.nflag || 2,\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntranscode: String(inputData.ntransactionstatus),\r\n            ntransactiontestcode: 0,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            napprovalversioncode: inputData.napprovalversioncode,\r\n            fromdate: inputData.fromdate,\r\n            todate: inputData.todate,\r\n            activeTestKey: inputData.activeTestKey,\r\n            activeSampleKey: inputData.activeSampleKey,\r\n            //nneedsubsample: inputData.masterData.nneedsubsample,\r\n            nneedsubsample: inputData.masterData.realRegSubTypeValue.nneedsubsample,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            nneedtemplatebasedflow: inputData.nneedtemplatebasedflow,\r\n            nworlistcode: inputData.nworlistcode,\r\n            nbatchmastercode:inputData.nbatchmastercode,\r\n            nneedReceivedInLab:inputData.nneedReceivedInLab\r\n         }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n        //     documentDataState, testCommentDataState } = inputData\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData, checkBoxOperation: inputData.checkBoxOperation })\r\n                .then(response => {\r\n                    // if (response.data.DynamicGetSamples) {\r\n                    //     sortData(response.data.DynamicGetSamples, \"\", \"\");\r\n                    // }\r\n                    // if (response.data.DynamicGetTests) {\r\n                    //     sortData(response.data.DynamicGetTests, \"descending\", \"npreregno\");\r\n                    // }\r\n                    sortData(response.data);\r\n                //ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\n                let check=false;\r\n                        if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                            if(response.data['RE_TEST']===undefined)\r\n                            check=true;\r\n                        }\r\n                        if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                                if(response.data['RE_TEST']===undefined&&inputData.masterData.RESelectedTest.length===0)\r\n                                    check=true;\r\n                        }\r\n                   if( check){\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_TESTISNOTAVAILABLE\"\r\n                        }));\r\n                   }\r\n                   else{\r\n                    response.data['RE_SUBSAMPLE']= sortDataByParent(response.data['RE_SUBSAMPLE'],inputData.sample, \"npreregno\");\r\n                    // let responseData = { ...response.data, RESelectedSubSample: inputData.RESelectedSubSample }\r\n                    // responseData = sortData(responseData)\r\n                    let oldSelectedTest = inputData.masterData.RESelectedTest\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n                    //let RESelectedSubSample = inputData.checkBoxOperation === 3 || inputData.checkBoxOperation === 5 || inputData.checkBoxOperation === 7 ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\r\n                    let RESelectedSubSample = inputData.checkBoxOperation === checkBoxOperation.SINGLESELECT || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS || inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL ? response.data.RESelectedSubSample : inputData.masterData.RESelectedSubSample\r\n                    RESelectedSubSample = inputData.masterData.realRegSubTypeValue.nneedsubsample ? RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE;\r\n                    //for with sub sample\r\n                 /*   let check =true;\r\n                    if(inputData.checkBoxOperation===checkBoxOperation.MULTISELECT){\r\n                        if(inputData.masterData.realRegSubTypeValue.nneedsubsample){\r\n                        if(!(RESelectedSubSample[0].ntransactionsamplecode===(inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactionsamplecode : -1)))\r\n                            check =false;\r\n                        }\r\n                            else{\r\n                                  check=response.data['RE_TEST']!==undefined;\r\n                            }\r\n                        }\r\n                                        else if(inputData.checkBoxOperation===checkBoxOperation.SINGLESELECT){\r\n                                          check=response.data['RE_TEST']!==undefined;\r\n                                        }\r\n\r\n            if( !check){\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        toast.warn(intl.formatMessage({\r\n                            id: \"IDS_TESTISNOTAVAILABLE\"\r\n                        }));\r\n                   }\r\n                   */\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        // ...response.data,\r\n                        RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                        RESelectedSample: inputData.RESelectedSample,\r\n                        RESelectedSubSample\r\n                    }\r\n                    // if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                    //     inputData.searchSampleRef.current.value = \"\";\r\n                    //     masterData['searchedSample'] = undefined\r\n                    // }\r\n                    if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                        inputData.searchSubSampleRef.current.value = \"\";\r\n                        masterData['searchedSubSample'] = undefined\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTest'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                        , subSampleSkip, subSampleTake\r\n                    } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    subSampleSkip = 0;\r\n                    // bool = true\r\n                    // if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                            , subSampleSkip, subSampleTake\r\n                        }\r\n                    // }\r\n                    let TestParameters = [];\r\n                    let ResultUsedInstrument = [];\r\n                    let ResultUsedMaterial = [];\r\n                    let ResultUsedTasks = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let ResultChangeHistory = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationComment = [];\r\n                    // let RegistrationSampleAttachment = [];\r\n\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {    \r\n                        //added by sudharshanan for test select issue while sample click\r\n                        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        let npreregno;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                RESelectedTest: oldSelectedTest\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode;\r\n                            npreregno = masterData.RESelectedSample[0].npreregno;\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                RegistrationComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \" sampleChangeDataState\"\r\n                                break;\r\n\r\n\r\n                            default:\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n\r\n                   // } else if (inputData.checkBoxOperation === 5) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                dbData = response.data.RegistrationComment || []\r\n                                list = [...inputData.masterData.RegistrationComment, ...dbData];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                    }\r\n                    //else if (inputData.checkBoxOperation === 7) {\r\n                    else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {    \r\n\r\n                        //getSameRecordFromTwoArrays( inputData.masterData.RE_SAMPLE, responseData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n\r\n                                RegistrationComment = response.data.RegistrationComment ? [...response.data.RegistrationComment] : [];\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleCommentsDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                        let list = []\r\n                        if (!inputData.masterData.realRegSubTypeValue.nneedsubsample) {\r\n                            let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                            oldSelectedTest.map((test, index) => {\r\n                                if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                    oldSelectedTest.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            let keepOld = false;\r\n                            let ntransactiontestcode;\r\n                            if (oldSelectedTest.length > 0) {\r\n                                keepOld = true\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    RESelectedTest: oldSelectedTest\r\n                                }\r\n                            } else {\r\n                                ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode\r\n                            }\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SAMPLECOMMENTS\":\r\n                                list = response.data.RegistrationComment ? sortData(response.data.RegistrationComment, 'descending', 'nregcommentcode') : [];\r\n                                RegistrationComment = getRecordBasedOnPrimaryKeyName(list, inputData.RESelectedSample.length > 0 ? inputData.RESelectedSample[0].npreregno : \"\", \"npreregno\")\r\n                                activeName = \"RegistrationComment\"\r\n                                dataStateName = \"sampleChangeDataState\"\r\n                                break;\r\n                            \r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    masterData = {\r\n                        ...masterData,\r\n                        // wholeApprovalParameter,\r\n                        TestParameters,\r\n                        // wholeResultUsedInstrument,\r\n                        ResultUsedInstrument,\r\n                        ResultUsedMaterial,\r\n                        // wholeResultUsedTasks,\r\n                        ResultUsedTasks,\r\n                        // wholeRegistrationTestAttachment,\r\n                        RegistrationTestAttachment,\r\n                        // wholeResultChangeHistory,\r\n                        ResultChangeHistory,\r\n                        // wholeRegistrationTestComments,\r\n                        RegistrationTestComment,\r\n\r\n                        RegistrationComment,\r\n                        // RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    // Start of ALPD-4132 Additional Filter info to be Dispatched on Save - ATE-241\r\n                    let multifilterInfo = {};\r\n                    if (inputData.multiFilterLoad !== undefined) {\r\n                        if (inputData.searchSampleRef !== undefined && inputData.searchSampleRef.current !== null) {\r\n                            inputData.searchSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchSubSampleRef !== undefined && inputData.searchSubSampleRef.current !== null) {\r\n                            inputData.searchSubSampleRef.current.value = \"\";\r\n                        }\r\n                        if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                            inputData.searchTestRef.current.value = \"\";\r\n                        }\r\n                        multifilterInfo = {\r\n                            multiFilterLoad: inputData.multiFilterLoad,\r\n                            openModal: inputData.openModal,\r\n                            searchSampleRef: inputData.searchSampleRef,\r\n                            searchSubSampleRef: inputData.searchSubSampleRef,\r\n                            searchTestRef: inputData.searchTestRef,\r\n                            testskip: inputData.testskip,\r\n                            subsampleskip: inputData.subsampleskip,\r\n                            skip: inputData.skip,\r\n                        };\r\n                    }\r\n                    //  End of ALPD-4132 - ATE-241\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            skip: undefined,\r\n                            take: undefined,\r\n                            subSampleSkip: undefined,\r\n                            subSampleTake: undefined,\r\n                            ...skipInfo,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            //  ALPD-4132 Addition Filter Info to be dispatched on save - ATE-241\r\n                            ...multifilterInfo,\r\n                        }\r\n                    })\r\n        }\r\n    })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            let oldSelectedTest = inputData.masterData.RESelectedTest\r\n            //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            //let isGrandChildGetRequired = false;\r\n            let oldSelectedSubSample = inputData.masterData.RESelectedSubSample\r\n            let { subsampletake, subsampleskip } = inputData;\r\n            let skipInfo = {};\r\n            let TestSelected = [];\r\n            let subSampleSelected = [];\r\n            if (inputData[\"statusNone\"]) {\r\n                TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n            else {\r\n                TestSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                subSampleSelected = filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n            }\r\n\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSample, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let RESelectedSample = inputData.RESelectedSample;\r\n                let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [];\r\n                let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\r\n\r\n\r\n                if (inputData.masterData.nneedsubsample) {\r\n                    let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                    RESelectedSubSample = filterSelectedSubSample.length > 0 ? filterSelectedSubSample : [inputData.masterData.RE_SUBSAMPLE[0]];\r\n                    if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampletake, subsampleskip }\r\n                    }\r\n                }\r\n                let ntransactionsamplecode = RESelectedSubSample.map(subsample => subsample.ntransactionsamplecode).join(',');\r\n                let masterData = { ...inputData.masterData, RESelectedSample, RESelectedSubSample, RESelectedTest }\r\n                inputData = {\r\n                    ...inputData,\r\n                    ntransactiontestcode,\r\n                    ntransactionsamplecode,\r\n                    RESelectedSample,\r\n                    RESelectedTest,\r\n                    RESelectedSubSample,\r\n                    //checkBoxOperation: 3,\r\n                    checkBoxOperation: checkBoxOperation.SINGLESELECT,\r\n                    activeTestKey: inputData.activeTestKey, masterData\r\n                }\r\n\r\n                if (RESelectedTest.length > 0) {\r\n                    inputData = {\r\n                        ...inputData,\r\n                        childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                            \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"\r\n                        ]\r\n                    }\r\n                    dispatch(getTestChildTabREDetail(inputData, true));\r\n                } else {\r\n                    inputData = {\r\n                        ...inputData, masterData,\r\n                        childTabsKey: [\"RE_TEST\"]\r\n                    }\r\n                    dispatch(getTestREDetail(inputData, true));\r\n                }\r\n            } else {\r\n                //added by sudharshanan for test select issue while sample click\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    // RESelectedSample: inputData.RESelectedSample,\r\n                    // RESelectedSubSample: inputData.masterData.nneedsubsample && inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RESelectedSubSample : inputData.masterData.RE_SUBSAMPLE\r\n                    RESelectedTest: TestSelected ? TestSelected : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    RESelectedSample: inputData.RESelectedSample,\r\n                    RESelectedSubSample: subSampleSelected ? subSampleSelected : inputData.masterData.RE_SUBSAMPLE.length > 0 ? [inputData.masterData.RE_SUBSAMPLE[0]] : []\r\n\r\n                }\r\n                let subsamplecheck = true;\r\n                if (inputData.masterData.nneedsubsample) {\r\n                    let SubSampleSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedSubSample, inputData.removeElementFromArray[0].npreregno, \"npreregno\");\r\n                    if (SubSampleSelected.length > 0) {\r\n                        let filterSelectedSubSample = getSameRecordFromTwoArrays(oldSelectedSubSample, inputData.masterData.RE_SUBSAMPLE, \"ntransactionsamplecode\");\r\n                        if (filterSelectedSubSample.length === 0) {\r\n                            let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                            oldSelectedSubSample.forEach((test, index) => {\r\n                                if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                    oldSelectedSubSample.splice(index, 1)\r\n                                }\r\n                                return null;\r\n                            })\r\n                            if (oldSelectedSubSample.length === 0 && wholeSubSample.length > 0\r\n                                && masterData.selectedTest.length === 0) {\r\n                                const selectedSubSample1 = [inputData.masterData.RE_SUBSAMPLE[0]];\r\n                                masterData = {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: selectedSubSample1,\r\n                                    selectedTest: []\r\n                                }\r\n                                inputData = { ...inputData, ...masterData }\r\n                                inputData[\"npreregno\"] = selectedSubSample1.map(x => x.npreregno).join(\",\")\r\n                                inputData[\"ntransactionsamplecode\"] = selectedSubSample1.map(x => x.ntransactionsamplecode).join(\",\")\r\n                               // inputData[\"checkBoxOperation\"] = 3\r\n                                inputData[\"checkBoxOperation\"] = checkBoxOperation.SINGLESELECT\r\n                                inputData[\"childTabsKey\"] = [\"RE_TEST\"]\r\n                                subsamplecheck = false;\r\n                                dispatch(getTestREDetail(inputData, true));\r\n\r\n                            }\r\n                        } else {\r\n                            oldSelectedSubSample = filterSelectedSubSample\r\n                        }\r\n\r\n                    } else {\r\n                        let wholeSubSample = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.forEach((test, index) => {\r\n                            if (!wholeSubSample.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n\r\n                    if (subsamplecheck) {\r\n                        masterData = {\r\n                            ...masterData,\r\n                            RESelectedSubSample: oldSelectedSubSample\r\n                        }\r\n                    }\r\n                    if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subsampleskip) {\r\n                        subsampleskip = 0;\r\n                        skipInfo = { subsampleskip, subsampletake }\r\n                    }\r\n                }\r\n                let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        RESelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = inputData.masterData.RE_TEST[0].ntransactiontestcode\r\n                    // ntransactiontestcode = masterData.RE_TEST[0].ntransactiontestcode\r\n                }\r\n                //const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\r\n                //ntransactiontestcode, \"ntransactiontestcode\");\r\n                const TestParameters = keepOld ? inputData[\"statusNone\"] ? getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].npreregno, \"npreregno\") : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n\r\n                const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RESelectedSample: inputData.RESelectedSample,\r\n                            // selectedPreregno: inputData.npreregno,\r\n                            // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\r\n                            //     searchedTest[0]\r\n                            // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\r\n                            //     RE_TEST[0]\r\n                            // ] : [],\r\n                            // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                            TestParameters,\r\n                            ResultUsedInstrument,\r\n                            ResultUsedMaterial,\r\n                            ResultUsedTasks,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                            ResultChangeHistory,\r\n                            // RESelectedSubSample: inputData.masterData.RE_SUBSAMPLE\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function getTestREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        let inputParamData = {\r\n            nflag: 3,\r\n            ntype: 3,\r\n            nsampletypecode: inputData.nsampletypecode,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            npreregno: inputData.npreregno,\r\n            ntransactiontestcode: 0,\r\n            ntranscode: inputData.ntransactionstatus.toString(),\r\n            ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n            userinfo: inputData.userinfo,\r\n            ntestcode: inputData.ntestcode,\r\n            activeTestKey: inputData.activeTestKey,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            checkBoxOperation: inputData.checkBoxOperation,\r\n            nneedsubsample: inputData.nneedsubsample,\r\n            nworlistcode: inputData.nworlistcode,\r\n            nbatchmastercode:inputData.nbatchmastercode,\r\n            nneedReceivedInLab:inputData.nneedReceivedInLab,\r\n            napprovalversioncode: inputData.napprovalversioncode,\r\n        }\r\n        const subSample = inputData.nneedsubsample;\r\n        // dispatch(initRequest(true));\r\n        // rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\r\n        if (isServiceRequired) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/getResultEntrySubSampleDetails\", inputParamData)\r\n                .then(response => {\r\n                    // let responseData = {\r\n                    //     ...response.data,\r\n                    //     RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\r\n                    //     RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\r\n                    //     // RESelectedTest: inputData.masterData.RESelectedTest\r\n                    // }\r\n                    let responseData = { ...response.data }\r\n                    responseData = sortData(responseData, 'descending', 'npreregno')\r\n                    let oldSelectedTest = inputData.masterData.RESelectedTest\r\n                    let oldSelectedSubSample = inputData.masterData.RESelectedSubSample || []\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        // ...response.data,\r\n                        RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                        RESelectedSample: inputData.masterData.RESelectedSample,\r\n                        RESelectedSubSample: inputData.RESelectedSubSample || inputData.masterData.RESelectedSubSample,\r\n                    }\r\n                    if (inputData.searchTestRef !== undefined && inputData.searchTestRef.current !== null) {\r\n                        inputData.searchTestRef.current.value = \"\"\r\n                        masterData['searchedTests'] = undefined\r\n                    }\r\n                    let {\r\n                        testskip,\r\n                        testtake\r\n                        , subSampleSkip, subSampleTake\r\n                    } = inputData\r\n                    // let bool = false;\r\n                    // Commented bool value because no need to check bool condition to update skipInfo value.\r\n                    let skipInfo = {}\r\n                    // if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                        testskip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    // if (inputData.masterData.RE_SUBSAMPLE.length <= inputData.subSampleSkip) {\r\n                        subSampleSkip = 0;\r\n                        // bool = true\r\n                    // }\r\n                    // if (bool) {\r\n                        skipInfo = {\r\n                            testskip,\r\n                            testtake\r\n                            , subSampleSkip, subSampleTake\r\n                        }\r\n                    // }\r\n                    let TestParameters = [];\r\n                    let ResultUsedInstrument = [];\r\n                    let ResultUsedMaterial = [];\r\n                    let ResultUsedTasks = [];\r\n                    let RegistrationTestAttachment = [];\r\n                    let ResultChangeHistory = [];\r\n                    let RegistrationTestComment = [];\r\n                    let RegistrationSampleComment = [];\r\n                    let RegistrationSampleAttachment = [];\r\n\r\n                    //if (inputData.checkBoxOperation === 1) {\r\n                    if (inputData.checkBoxOperation === checkBoxOperation.MULTISELECT) {    \r\n                        //added by sudharshanan for test select issue while sample click\r\n                        let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                        oldSelectedTest.map((test, index) => {\r\n                            if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                                oldSelectedTest.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactiontestcode;\r\n                        if (oldSelectedTest.length > 0) {\r\n                            keepOld = true\r\n                            masterData = {\r\n                                ...masterData,\r\n                                RESelectedTest: oldSelectedTest\r\n                            }\r\n                        } else {\r\n                            ntransactiontestcode = masterData.RESelectedTest[0].ntransactiontestcode\r\n                        }\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            // case \"IDS_SAMPLECOMMENTS\":\r\n                            //         RegistrationTestComment = keepOld ? inputData.masterData.RegistrationComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationComment, npreregno, \"npreregno\")\r\n                            //         activeName = \"RegistrationComment\"\r\n                            //         dataStateName = \"sampleChangeDataState\"\r\n                            //         break;\r\n                            default:\r\n                                TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n\r\n                    //} else if (inputData.checkBoxOperation === 5) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTSTATUS) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                dbData = response.data.RegistrationTestComment || []\r\n                                list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n                   // } else if (inputData.checkBoxOperation === 7) {\r\n                    } else if (inputData.checkBoxOperation === checkBoxOperation.QUICKSELECTALL) {    \r\n                        let list = []\r\n                        let dbData = [];\r\n                        let testList = reArrangeArrays(inputData.masterData.RE_SUBSAMPLE, responseData.RE_TEST, \"ntransactionsamplecode\");\r\n                        masterData = {\r\n                            ...masterData,\r\n                            RESelectedTest: [testList[0]],\r\n                            RE_TEST: testList,\r\n                            // ApprovalParameter:responseData.ApprovalParameter ? responseData.ApprovalParameter.length > 0  ? responseData.ApprovalParameter : masterData.ApprovalParameter: masterData.ApprovalParameter\r\n                        }\r\n\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...response.data.TestParameters];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, testList.length > 0 ? testList[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.ResultUsedInstrument, ...response.data.ResultUsedInstrument];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = [...inputData.masterData.ResultUsedMaterial, ...response.data.ResultUsedMaterial];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                dbData = response.data.ResultUsedTasks || []\r\n                                list = [...inputData.masterData.ResultUsedTasks, ...dbData];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                dbData = response.data.RegistrationTestAttachment || []\r\n                                list = [...inputData.masterData.RegistrationTestAttachment, ...dbData];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                dbData = response.data.ResultChangeHistory || []\r\n                                list = [...inputData.masterData.ResultChangeHistory, ...dbData];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                            // case \"IDS_TESTCOMMENTS\":\r\n                            //     dbData = response.data.RegistrationTestComment || []\r\n                            //     list = [...inputData.masterData.RegistrationTestComment, ...dbData];\r\n                            //     RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                            //     break;\r\n                            default:\r\n                                dbData = response.data.TestParameters || []\r\n                                list = [...inputData.masterData.TestParameters, ...dbData];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                break;\r\n                        }\r\n\r\n                    } else {\r\n                        let list = []\r\n                        switch (inputData.activeTestKey) {\r\n                            case \"IDS_RESULTS\":\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                            case \"IDS_INSTRUMENT\":\r\n                                list = response.data.ResultUsedInstrument ? sortData(response.data.ResultUsedInstrument, 'descending', 'nresultusedinstrumentcode') : [];\r\n                                ResultUsedInstrument = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedInstrument\"\r\n                                dataStateName = \"instrumentDataState\"\r\n                                break;\r\n                            case \"IDS_MATERIAL\":\r\n                                list = response.data.ResultUsedMaterial ? sortData(response.data.ResultUsedMaterial, 'descending', 'nresultusedmaterialcode') : [];\r\n                                ResultUsedMaterial = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedMaterial\"\r\n                                dataStateName = \"materialDataState\"\r\n                                break;\r\n                            case \"IDS_TASK\":\r\n                                list = response.data.ResultUsedTasks ? sortData(response.data.ResultUsedTasks, 'descending', 'nresultusedtaskcode') : [];\r\n                                list.reduce((unique, item) => unique.includes(item) ? unique : [...unique, item], []);\r\n                                ResultUsedTasks = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultUsedTasks\"\r\n                                dataStateName = \"taskDataState\"\r\n                                break;\r\n                            case \"IDS_TESTATTACHMENTS\":\r\n                                list = response.data.RegistrationTestAttachment ? sortData(response.data.RegistrationTestAttachment, 'descending', 'ntestattachmentcode') : [];\r\n                                RegistrationTestAttachment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestAttachment\"\r\n                                break;\r\n                            case \"IDS_RESULTCHANGEHISTORY\":\r\n                                list = response.data.ResultChangeHistory ? sortData(response.data.ResultChangeHistory, 'descending', 'nresultchangehistorycode') : [];\r\n                                ResultChangeHistory = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"ResultChangeHistory\"\r\n                                dataStateName = \"resultChangeDataState\"\r\n                                break;\r\n                            case \"IDS_TESTCOMMENTS\":\r\n                                list = response.data.RegistrationTestComment ? sortData(response.data.RegistrationTestComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"RegistrationTestComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            case \"IDS_SUBSAMPLEATTACHMENTS\":\r\n                                list = response.data.RegistrationSampleComment ? sortData(response.data.RegistrationSampleComment, 'descending', 'ntestcommentcode') : [];\r\n                                RegistrationTestComment = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_SUBSAMPLE.length > 0 ? inputData.masterData.RE_SUBSAMPLE[0].ntransactionsamplecode : \"\", \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"testCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                list = response.data.TestParameters ? sortData(response.data.TestParameters, 'ascending', 'ntransactionresultcode') : [];\r\n                                TestParameters = getRecordBasedOnPrimaryKeyName(list, inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode : \"\", \"ntransactiontestcode\")\r\n                                activeName = \"TestParameters\"\r\n                                dataStateName = \"resultDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    if (subSample) {\r\n                        let wholeSubsampleList = masterData.RE_SUBSAMPLE.map(b => b.ntransactionsamplecode)\r\n                        oldSelectedSubSample.map((test, index) => {\r\n                            if (!wholeSubsampleList.includes(test.ntransactionsamplecode)) {\r\n                                oldSelectedSubSample.splice(index, 1)\r\n                            }\r\n                            return null;\r\n                        })\r\n                        let keepOld = false;\r\n                        let ntransactionsamplecode;\r\n                        if (oldSelectedSubSample.length > 0) {\r\n                            keepOld = true\r\n                        } else {\r\n                            ntransactionsamplecode = masterData.selectedSubSample[0].ntransactionsamplecode\r\n                        }\r\n\r\n                        switch (inputData.activeSubSampleTab) {\r\n                            case \"IDS_SUBSAMPLECOMMENTS\":\r\n                                RegistrationSampleComment = keepOld ? inputData.masterData.RegistrationSampleComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleComment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleComment\"\r\n                                dataStateName = \"subSampleCommentDataState\"\r\n                                break;\r\n                            default:\r\n                                RegistrationSampleAttachment = keepOld ? inputData.masterData.RegistrationSampleAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationSampleAttachment, ntransactionsamplecode, \"ntransactionsamplecode\")\r\n                                activeName = \"RegistrationSampleAttachment\"\r\n                                dataStateName = \"subSampleAttachmentDataState\"\r\n                                break;\r\n                        }\r\n                    }\r\n                    masterData = {\r\n                        ...masterData,\r\n                        // wholeApprovalParameter,\r\n                        TestParameters,\r\n                        // wholeResultUsedInstrument,\r\n                        ResultUsedInstrument,\r\n                        ResultUsedMaterial,\r\n                        // wholeResultUsedTasks,\r\n                        ResultUsedTasks,\r\n                        // wholeRegistrationTestAttachment,\r\n                        RegistrationTestAttachment,\r\n                        // wholeResultChangeHistory,\r\n                        ResultChangeHistory,\r\n                        // wholeRegistrationTestComments,\r\n                        RegistrationTestComment,\r\n                        RegistrationSampleComment,\r\n                        RegistrationSampleAttachment\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false,\r\n                            showFilter: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            ...skipInfo,\r\n                            subSampleSkip: undefined,\r\n                            subSampleTake: undefined\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    console.log(\"error:\", error);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n            let oldSelectedTest = inputData.masterData.RESelectedTest\r\n            //let TestSelected = getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            // let isGrandChildGetRequired = false;\r\n            // if (TestSelected.length > 0) {\r\n            //     isGrandChildGetRequired = true;\r\n            // } else {\r\n            //     isGrandChildGetRequired = false;\r\n            // }\r\n\r\n            let TestSelected =\r\n                inputData[\"statusNone\"] ?\r\n                    getRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\") :\r\n                    filterRecordBasedOnPrimaryKeyName(inputData.masterData.RESelectedTest, inputData.removeElementFromArray[0].ntransactionsamplecode, \"ntransactionsamplecode\");\r\n            let isGrandChildGetRequired = false;\r\n            if (TestSelected.length > 0) {\r\n                isGrandChildGetRequired = false;\r\n            } else {\r\n                isGrandChildGetRequired = true;\r\n            }\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedSubSample, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactionsamplecode\", inputData.removeElementFromArray);\r\n            if (isGrandChildGetRequired) {\r\n                let ntransactiontestcode = inputData.masterData.RE_TEST.length > 0 ? inputData.masterData.RE_TEST[0].ntransactiontestcode.toString() : \"\";\r\n                let RESelectedSubSample = inputData.RESelectedSubSample;\r\n                let RESelectedTest = inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [];\r\n                // let RESelectedSubSample = inputData.masterData.RE_SUBSAMPLE\r\n\r\n                inputData = {\r\n                    ...inputData,\r\n                    childTabsKey: [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedMaterial\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                        \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\"\r\n                    ],\r\n                    ntransactiontestcode,\r\n                    RESelectedSample: inputData.masterData.RESelectedSample,\r\n                    RESelectedTest,\r\n                    RESelectedSubSample,\r\n                    //checkBoxOperation: 3,\r\n                    checkBoxOperation: checkBoxOperation.SINGLESELECT,\r\n                    activeTestKey: inputData.activeTestKey\r\n                }\r\n                dispatch(getTestChildTabREDetail(inputData, true));\r\n            } else {\r\n                //added by sudharshanan for test select issue while sample click\r\n                let masterData = {\r\n                    ...inputData.masterData,\r\n                    RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                    RESelectedSubSample: inputData.RESelectedSubSample\r\n                }\r\n                let wholeTestList = masterData.RE_TEST.map(b => b.ntransactiontestcode)\r\n                oldSelectedTest.map((test, index) => {\r\n                    if (!wholeTestList.includes(test.ntransactiontestcode)) {\r\n                        oldSelectedTest.splice(index, 1)\r\n                    }\r\n                    return null;\r\n                })\r\n                let keepOld = false;\r\n                let ntransactiontestcode;\r\n                if (oldSelectedTest.length > 0) {\r\n                    keepOld = true\r\n                    masterData = {\r\n                        ...masterData,\r\n                        RESelectedTest: oldSelectedTest\r\n                    }\r\n                } else {\r\n                    ntransactiontestcode = masterData.RE_TEST[0].ntransactiontestcode\r\n                }\r\n                // const TestParameters = keepOld ? inputData.masterData.TestParameters : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters,\r\n                //     ntransactiontestcode, \"ntransactiontestcode\");\r\n                const TestParameters = keepOld ?\r\n                    inputData[\"statusNone\"] ?\r\n                        getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') :\r\n                        filterRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, inputData.removeElementFromArray[0].ntransactionsamplecode, 'ntransactionsamplecode') : getRecordBasedOnPrimaryKeyName(inputData.masterData.TestParameters, ntransactiontestcode, \"ntransactiontestcode\")\r\n\r\n                const ResultUsedInstrument = keepOld ? inputData.masterData.ResultUsedInstrument : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedInstrument || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedMaterial = keepOld ? inputData.masterData.ResultUsedMaterial : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedMaterial || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultUsedTasks = keepOld ? inputData.masterData.ResultUsedTasks : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultUsedTasks || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestAttachment = keepOld ? inputData.masterData.RegistrationTestAttachment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestAttachment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const RegistrationTestComment = keepOld ? inputData.masterData.RegistrationTestComment : getRecordBasedOnPrimaryKeyName(inputData.masterData.RegistrationTestComment || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                const ResultChangeHistory = keepOld ? inputData.masterData.ResultChangeHistory : getRecordBasedOnPrimaryKeyName(inputData.masterData.ResultChangeHistory || [],\r\n                    ntransactiontestcode, \"ntransactiontestcode\");\r\n                let { testskip, testtake } = inputData\r\n                let bool = false;\r\n                let skipInfo = {}\r\n                if (inputData.masterData.RE_TEST.length <= inputData.testskip) {\r\n                    testskip = 0;\r\n                    bool = true\r\n                }\r\n                if (bool) {\r\n                    skipInfo = {\r\n                        testskip,\r\n                        testtake\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RESelectedSubSample: inputData.RESelectedSubSample,\r\n                            // selectedPreregno: inputData.npreregno,\r\n                            // RESelectedTest: inputData.masterData.searchedTest && inputData.masterData.searchedTest.length > 0 ? [inputData.masterData.\r\n                            //     searchedTest[0]\r\n                            // ] : inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.\r\n                            //     RE_TEST[0]\r\n                            // ] : [],\r\n                            // RESelectedTest: inputData.masterData.RE_TEST.length > 0 ? [inputData.masterData.RE_TEST[0]] : [],\r\n                            TestParameters,\r\n                            ResultUsedInstrument,\r\n                            ResultUsedMaterial,\r\n                            ResultUsedTasks,\r\n                            RegistrationTestAttachment,\r\n                            RegistrationTestComment,\r\n                            ResultChangeHistory,\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleTab: inputData.activeSampleTab,\r\n                        activeTestKey: inputData.activeTestKey,\r\n                        activeTestTab: inputData.activeTestKey,\r\n                        ...skipInfo,\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function getSampleChildTabREDetail(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.ntransactiontestcode,\r\n            npreregno: inputData.npreregno,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let url = \"\"\r\n        switch (inputData.activeSampleKey) {\r\n            case \"IDS_DOCUMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n            case \"IDS_SAMPLEATTACHMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n            case \"IDS_APPROVALHISTORY\":\r\n                url = \"resultentrybysample/getSampleApprovalHistory\"\r\n                break;\r\n            case \"IDS_SAMPLECOMMENTS\":\r\n                url = \"comments/getSampleComment\"\r\n                break;\r\n            default:\r\n                url = \"attachment/getSampleAttachment\"\r\n                break;\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(url, inputParamData)\r\n            .then(response => {\r\n                let responseData = {\r\n                    ...response.data\r\n                }\r\n                //responseData = sortData(responseData)\r\n                fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            RESelectedSample: inputData.RESelectedSample\r\n                        },\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        activeSampleKey: inputData.activeSampleKey,\r\n                        screenName: inputData.screenName\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport function getTestChildTabREDetail(inputData, isServiceRequired) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\"),\r\n            npreregno: inputData.npreregno,\r\n            userinfo: inputData.userinfo\r\n        }\r\n        let activeName = \"\";\r\n        let dataStateName = \"\";\r\n        // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n        //     documentDataState, testCommentDataState } = inputData\r\n        let url = \"resultentrybysample/getTestbasedParameter\"\r\n        switch (inputData.activeTestKey) {\r\n            case \"IDS_RESULTS\":\r\n                url = \"resultentrybysample/getTestbasedParameter\"\r\n                activeName = \"TestParameters\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n            case \"IDS_INSTRUMENT\":\r\n                url = \"resultentrybysample/getResultUsedInstrument\"\r\n                activeName = \"ResultUsedInstrument\"\r\n                dataStateName = \"instrumentDataState\"\r\n                break;\r\n            case \"IDS_MATERIAL\":\r\n                url = \"resultentrybysample/getResultUsedMaterial\";\r\n                activeName = \"ResultUsedMaterial\"\r\n                dataStateName = \"materialDataState\"\r\n                break;\r\n            case \"IDS_TASK\":\r\n                url = \"resultentrybysample/getResultUsedTask\"\r\n                activeName = \"ResultUsedTasks\"\r\n                dataStateName = \"taskDataState\"\r\n                break;\r\n            case \"IDS_TESTATTACHMENTS\":\r\n                url = \"attachment/getTestAttachment\"\r\n                activeName = \"RegistrationTestAttachment\"\r\n                break;\r\n            case \"IDS_TESTCOMMENTS\":\r\n                url = \"comments/getTestComment\"\r\n                activeName = \"RegistrationTestComment\"\r\n                dataStateName = \"testCommentDataState\"\r\n                break;\r\n            case \"IDS_DOCUMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                activeName = \"\"\r\n                dataStateName = \"documentDataState\"\r\n                break;\r\n            case \"IDS_RESULTCHANGEHISTORY\":\r\n                url = \"resultentrybysample/getResultChangeHistory\"\r\n                activeName = \"ResultChangeHistory\"\r\n                dataStateName = \"resultChangeDataState\"\r\n                break;\r\n            case \"IDS_SAMPLEATTACHMENTS\":\r\n                url = \"attachment/getSampleAttachment\"\r\n                activeName = \"\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n            default:\r\n                url = \"resultentrybysample/getTestbasedParameter\"\r\n                activeName = \"TestParameters\"\r\n                dataStateName = \"resultDataState\"\r\n                break;\r\n        }\r\n        dispatch(initRequest(true));\r\n        if (isServiceRequired) {\r\n            rsapi.post(url, inputParamData)\r\n                .then(response => {\r\n                    let responseData = {\r\n                        ...response.data,\r\n                        RESelectedSample: inputData.RESelectedSample || inputData.masterData.RESelectedSample,\r\n                        RESelectedTest: inputData.RESelectedTest,\r\n                        activeTabIndex: inputData.activeTabIndex,\r\n                        activeTabId: inputData.activeTabId\r\n                    }\r\n                    let skipInfo = {};\r\n                    fillRecordBasedOnCheckBoxSelection(inputData.masterData, responseData, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RESelectedTest: inputData.RESelectedTest\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            activeTabIndex: inputData.activeTabIndex,\r\n                            activeTabId: inputData.activeTabId,\r\n                            activeTestTab: inputData.activeTestKey,\r\n                            loading: false,\r\n                            activeTestKey: inputData.activeTestKey,\r\n                            screenName: inputData.activeTestKey,\r\n                            testskip: undefined,\r\n                            testtake: undefined,\r\n                            ...skipInfo\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            //fillRecordBasedOnCheckBoxSelection(inputData.masterData, response.data, inputData.childTabsKey, inputData.checkBoxOperation, \"npreregno\", inputData.removeElementFromArray);\r\n            fillRecordBasedOnCheckBoxSelection(inputData.masterData, inputData.RESelectedTest, inputData.childTabsKey, inputData.checkBoxOperation, \"ntransactiontestcode\", inputData.removeElementFromArray);\r\n            let skipInfo = {};\r\n            let masterData = {\r\n                ...inputData.masterData,\r\n                RESelectedTest: inputData.RESelectedTest\r\n            }\r\n            if (masterData[activeName].length <= inputData[dataStateName] && inputData[dataStateName].skip) {\r\n\r\n                skipInfo = {\r\n\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        skip: 0,\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            } else {\r\n                skipInfo = {\r\n                    ...skipInfo,\r\n                    [dataStateName]: {\r\n                        ...inputData[dataStateName],\r\n                        sort: undefined,\r\n                        filter: undefined\r\n                    }\r\n                }\r\n            }\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData,\r\n                    loading: false,\r\n                    showFilter: false,\r\n                    activeTestKey: inputData.activeTestKey,\r\n                    screenName: inputData.screenName,\r\n                    ...skipInfo\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRERegistrationType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getRegistrationType\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            defaultSampleType: inputData.defaultSampleType,\r\n                            ...response.data,\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getRERegistrationSubType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getRegistrationsubType\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            //defaultFilterStatus:inputData.masterData.defaultFilterStatus,\r\n                            defaultRegistrationType: inputData.defaultRegistrationType,\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationSubTypeList:inputData.realRegistrationSubTypeList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREApprovalConfigVersion(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getApprovalConfigVersion\", inputData)\r\n            .then(response => {\r\n                let nneedsubsample = inputData.defaultRegistrationSubType && inputData.defaultRegistrationSubType.nneedsubsample;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            nneedsubsample,\r\n                            ...response.data,\r\n                            defaultRegistrationSubType: inputData.defaultRegistrationSubType,\r\n                            // fromDate: inputData.fromdate,\r\n                            //  toDate: inputData.todate\r\n                            realDesignTemplateMapping:inputData.realDesignTemplateMapping,\r\n                            realApproveConfigVersion:inputData.realApproveConfigVersion,\r\n                            realApprovalConfigVersionList:inputData.realApprovalConfigVersionList,\r\n                            realDesignTemplateMappingList:inputData.realDesignTemplateMappingList,\r\n                            realFilterStatusList:inputData.realFilterStatusList,\r\n                            realRegistrationTypeList:inputData.realRegistrationTypeList,\r\n                            realTestvaluesList:inputData.realTestvaluesList,\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getFilterStatus\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultjobstatus: inputData.defaultjobstatus,\r\n                            // fromDate: inputData.fromdate,\r\n                            // toDate: inputData.todate\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getREJobStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getApproveConfigVersionRegTemplateDesign\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultApprovalConfigVersion: inputData.defaultApprovalConfigVersion,\r\n                            // fromDate: inputData.fromdate,\r\n                            // toDate: inputData.todate\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getResultEntryDetails(inputParamData) {\r\n    let masterData = { ...inputParamData.masterData }\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultEntryDetails\", { ...inputParamData.inputData, nneedsubsample: //inputParamData.masterData.nneedsubsample\r\n        inputParamData.masterData.realRegSubTypeValue.nneedsubsample\r\n         })\r\n            .then(response => {\r\n                //let masterData = { ...inputParamData.masterData }\r\n                if (inputParamData.refs.searchSampleRef !== undefined && inputParamData.refs.searchSampleRef.current !== null) {\r\n                    inputParamData.refs.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParamData.refs.searchSubSampleRef !== undefined && inputParamData.refs.searchSubSampleRef.current !== null) {\r\n                    inputParamData.refs.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParamData.refs.searchTestRef !== undefined && inputParamData.refs.searchTestRef.current !== null) {\r\n                    inputParamData.refs.searchTestRef.current.value = \"\"\r\n                    // masterData['searchedTests'] = undefined\r\n                    masterData['searchedTest'] = undefined\r\n                }\r\n                //sortData(response.data)\r\n                sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n                if(response.data.rtn == \"IDS_USERNOTINRESULTENTRYFLOW\")\r\n                {\r\n                toast.warning(intl.formatMessage({ id: \"IDS_USERNOTINRESULTENTRYFLOW\" }));\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            realFromDate: response.data[\"fromDate\"],\r\n                            realToDate: response.data[\"toDate\"]\r\n                        },\r\n                        loading: false,\r\n                        showTest: inputParamData.inputData.showTest,\r\n                        showSample: inputParamData.inputData.showSample,\r\n                        activeTestKey: inputParamData.inputData.activeTestKey,\r\n                        skip: 0,\r\n                        take: inputParamData.inputData.take,\r\n                        testskip: 0,\r\n                        testtake: inputParamData.inputData.testtake,\r\n                        resultDataState: { ...inputParamData.resultDataState, sort: undefined, filter: undefined },\r\n                        instrumentDataState: { ...inputParamData.instrumentDataState, sort: undefined, filter: undefined },\r\n                        materialDataState: { ...inputParamData.materialDataState, sort: undefined, filter: undefined },\r\n                        taskDataState: { ...inputParamData.taskDataState, sort: undefined, filter: undefined },\r\n                        documentDataState: { ...inputParamData.documentDataState, sort: undefined, filter: undefined },\r\n                        resultChangeDataState: { ...inputParamData.resultChangeDataState, sort: undefined, filter: undefined },\r\n                        testCommentDataState: { ...inputParamData.testCommentDataState, sort: undefined, filter: undefined },\r\n                        historyDataState: { ...inputParamData.historyDataState, sort: undefined, filter: undefined },\r\n                        samplePrintHistoryDataState: { ...inputParamData.samplePrintHistoryDataState, sort: undefined, filter: undefined },\r\n                        sampleHistoryDataState: { ...inputParamData.sampleHistoryDataState, sort: undefined, filter: undefined }\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else if(error.response.status === 401) {\r\n                    toast.warn(intl.formatMessage({id:error.response.data.rtn}));\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ...error.response.data,\r\n                                realFromDate: error.response.data[\"fromDate\"],\r\n                                realToDate: error.response.data[\"toDate\"]\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function resultGetModule(inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode: acceptTestList ? acceptTestList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                    userinfo: userInfo\r\n                }\r\n                inputParamData['nregtypecode']= inputData.realRegTypeValue.nregtypecode;\r\n                inputParamData['nregsubtypecode']= inputData.realRegSubTypeValue.nregsubtypecode;\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryResults\", inputParamData)\r\n                    .then(response => {\r\n                        let selectedRecord = {};\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\");\r\n                        let predefDefaultFlag = false;\r\n                        let formFields=[];\r\n                        if(response.data.FormFields && response.data.FormFields.length>0){\r\n                        let formFieldJSON=JSON.parse(response.data.FormFields[0].jsondata['value'])\r\n                        Object.entries(formFieldJSON).map(([key, value])=>(\r\n                            formFields.push(value)\r\n                        ))\r\n                    }\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    // if (predefinedvalue.ndefaultstatus === transactionStatus.YES) {\r\n                                    //     if (!predefDefaultFlag) {\r\n                                    //         predefDefaultFlag = true;\r\n                                    //         response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                    //             undefined, undefined).get(\"OptionList\");\r\n                                    //     }\r\n                                        // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =\r\n                                        //     constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\r\n                                        //         undefined, undefined).get(\"OptionList\");\r\n                                    //     if (response.data.ResultParameter[index].sresult === null) {\r\n                                    //         response.data.ResultParameter[index].sresult = predefinedvalue.spredefinedname;\r\n                                    //         response.data.ResultParameter[index].sresultpredefinedname = predefinedvalue.sresultpredefinedname;\r\n                                    //         response.data.ResultParameter[index].sfinal = predefinedvalue.spredefinedsynonym;\r\n                                    //         response.data.ResultParameter[index].editable = true;\r\n                                    //         response.data.ResultParameter[index].ngradecode = predefinedvalue.ngradecode;\r\n                                    //         if(predefinedvalue.spredefinedcomments&&predefinedvalue.spredefinedcomments!==null){\r\n                                    //             response.data.ResultParameter[index].sresultcomment = predefinedvalue.spredefinedcomments\r\n                                    //             &&predefinedvalue.spredefinedcomments;\r\n                                    //         }\r\n                                    //     }\r\n                                    // }\r\n                                  //  else {\r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                       \r\n                                        \r\n\r\n                                 //   }\r\n                                    //return null;\r\n\r\n                                });\r\n                                if( parameterResults[index][\"nparametertypecode\"] ==1) {\r\n                                    parameterResults[index][\"nresultaccuracycode\"] ={\r\n                                        \"value\": parameterResults[index][\"nresultaccuracycode\"],\r\n                                        \"label\": parameterResults[index][\"sresultaccuracyname\"],\r\n                                    };\r\n\r\n                                    parameterResults[index][\"nunitcode\"] ={\r\n                                        \"value\": parameterResults[index][\"nunitcode\"],\r\n                                        \"label\": parameterResults[index][\"sunitname\"],\r\n                                    };\r\n                                }\r\n                                param['editable'] = false;\r\n                            //return null;\r\n                            // response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] =  constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'spredefinedname', 'spredefinedname', undefined,\r\n                            // undefined, undefined).get(\"OptionList\");\r\n                        });\r\n\r\n                        const ResultAccuracyList = constructOptionList(response.data[\"ResultAccuracy\"] || [], \"nresultaccuracycode\",\"sresultaccuracyname\", undefined, undefined, false);   \r\n                        const ResultAccuracy = ResultAccuracyList.get(\"OptionList\");\r\n\r\n                        const UnitList = constructOptionList(response.data[\"Unit\"] || [], \"nunitcode\",\"sunitname\", undefined, undefined, false);   \r\n                        const Unit = UnitList.get(\"OptionList\");\r\n\r\n                       \r\n                                  \r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\r\n                                    ...response.data,\r\n                                    paremterResultcode//,\r\n                                    //selectedResultGrade ,\r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    ResultParameter: sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\")\r\n                                    //response.data.ResultParameter \r\n                                   \r\n                                },\r\n                                 // parameterResults:response.data.ResultParameter,\r\n                                  parameterResults:sortDataByParent(response.data.ResultParameter,TestList,\"ntransactiontestcode\"),\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRY\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode,\r\n                                ResultAccuracy,\r\n                                Unit,formFields\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function completeTest(inputParam, acceptList, userInfo, completeResultId,booleanFlag,param) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let isSearched=false;\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n               // nflag: 2,\r\n               ninsertMaterialInventoryTrans:inputParam.inputData.ninsertMaterialInventoryTrans,\r\n               nportalrequired:inputParam.inputData.nportalrequired,\r\n                basedrulesengine:param.basedrulesengine,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                ntranscode: String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                nneedsubsample: inputData.masterData.nneedsubsample,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                checkBoxOperation:checkBoxOperation.SINGLESELECT,\r\n                nsettingcode:  inputParam.nsettingcode,\r\n                nusercode: inputParam.nusercode,\r\n                susername:  inputParam.susername,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/completeTest\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let responseData =  sortData(response.data, 'ascending', 'ntransactionresultcode')//response.data\r\n                    //rules engine new subsample outcome --start ---\r\n                    let testcode= responseData[\"RE_TEST\"].map(test => test.npreregno).join(\",\");\r\n                    let sampleCode= responseData[\"RE_SUBSAMPLE\"].map(test => test.npreregno).join(\",\");\r\n                    inputData.masterData[\"searchedSample\"] && inputData.masterData[\"searchedSample\"].map(item=>{  \r\n                        if(!testcode.includes(String(item.npreregno)) && !sampleCode.includes(String(item.npreregno)) ){\r\n                            responseData[\"RE_TEST\"]=[];\r\n                            responseData[\"RE_SUBSAMPLE\"]=[];\r\n                            responseData[\"RESelectedSubSample\"]=[];\r\n                            responseData[\"RESelectedTest\"]=[];\r\n                            isSearched=true;\r\n                        }\r\n                    });\r\n                    let transactiontestcode=inputData.masterData[\"RE_TEST\"].map(test => test.ntransactiontestcode).join(\",\")\r\n                    responseData[\"RE_TEST\"]&& responseData[\"RE_TEST\"].forEach(element => {\r\n                            if(!transactiontestcode.includes(String(element.ntransactiontestcode))){\r\n                                inputData.masterData[\"RE_TEST\"].push(element);\r\n                            }\r\n                    });\r\n                    let transactionsamplecode=inputData.masterData[\"RE_SUBSAMPLE\"].map(item=>item.ntransactionsamplecode).join(\",\")\r\n                    responseData[\"RE_SUBSAMPLE\"] && responseData[\"RE_SUBSAMPLE\"].forEach(element => {\r\n                            if(!transactionsamplecode.includes(String(element.ntransactionsamplecode))){\r\n                                inputData.masterData[\"RE_SUBSAMPLE\"].push(element);\r\n                            }\r\n                    });\r\n                    //end--\r\n                    //Added\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                       }\r\n\r\n\r\n                    if (responseData[\"RE_TEST\"] && responseData[\"RE_TEST\"].length > 0) {\r\n                         //Added\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample//.nneedsubsample\r\n                            )\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                        else\r\n                            RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                    }\r\n\r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    if (RE_SUBSAMPLE.length > 0) {\r\n                        // RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n                        RE_SAMPLE = replaceUpdatedObject( responseData[\"RE_SAMPLE\"],inputData.masterData[\"RE_SAMPLE\"] , \"npreregno\");\r\n                        //inputData.masterData[\"RE_SAMPLE\"];\r\n                         //Added\r\n                        let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                        let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                        let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                        selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                        let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                            return !selectedSampleArray.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          }); \r\n                        RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                        //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"RE_SAMPLE\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        RE_SAMPLE = filterRecordBasedOnTwoArrays(RE_SAMPLE, RE_TEST, \"npreregno\");\r\n                    }\r\n                  //  const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n                  //Added\r\n                  const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] :  RE_SAMPLE\r\n\r\n                 \r\n\r\n                  let boolSelectedSubSample; \r\n                  let searchedSubSample = undefined; \r\n                  let RESelectedSubSample=[];\r\n                  let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                   if(inputData.masterData[\"searchedSubSample\"]){\r\n                       searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                       boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                       let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                       searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                       let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                       let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                          return !searchedSubSampleaftere.some(function (y) { \r\n                            return x  === y \r\n                          })\r\n                        });  \r\n                        inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                    }else{\r\n                      boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                    }\r\n                 \r\n                  if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                  ){\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                      inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                  }else{\r\n                      RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  RE_SUBSAMPLE\r\n                  }  \r\n                  //  const RESelectedSubSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n\r\n                    let searchedSample = undefined;\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        RE_SAMPLE = getSameRecordFromTwoArrays(inputData.masterData[\"searchedSample\"],  responseData[\"RE_SAMPLE\"], \"npreregno\");\r\n\r\n                        searchedSample = filterRecordBasedOnTwoArrays(RE_SAMPLE//inputData.masterData[\"searchedSample\"]\r\n                        ,\r\n                         RE_TEST, \"npreregno\");\r\n                         searchedSample=searchedSample.length>0?searchedSample:isSearched?[]:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n\r\n                    let masterData = {\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n \t\t\t\t\t\tRESelectedTest: RESelectedTest2,\r\n                         RESelectedTest: response.data.hasOwnProperty('RegistrationTestAlert')\r\n                         &&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                         ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&\r\n                         Object.keys(response.data['NewTestGroupTestAlert']).length !== 0?\r\n                         inputData.masterData[\"RESelectedTest\"]://RESelectedTest2\r\n                         inputData.masterData[\"searchedTest\"]&&\r\n                         inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: \r\n                         responseData.RESelectedTest\r\n                         ,\r\n                         \r\n                        //  RE_TEST:compareArrays(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"])?\r\n                        //  inputData.masterData[\"RE_TEST\"]: responseData[\"RE_TEST\"]\r\n                        RE_TEST: responseData[\"RE_TEST\"]\r\n                        \r\n                    }\r\n                    let skipInfo = {};\r\n                    // if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) { //ALPD-2230\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length == 0 && masterData.RE_TEST && masterData.RE_TEST.length == 0){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    // }\r\n                    if (masterData.RE_SUBSAMPLE && masterData.RE_SUBSAMPLE.length <= inputParam.subSampleTake){\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            subSampleSkip: 0,\r\n                            subSampleTake: inputParam.subSampleTake\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        RegistrationTestAlert: response.data.hasOwnProperty('RegistrationTestAlert')//&&response.data.RegistrationTestAlert.length>0\r\n                        ?response.data.RegistrationTestAlert:{},\r\n                        NewTestGroupTestAlert:response.data.hasOwnProperty('NewTestGroupTestAlert')//&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?response.data.NewTestGroupTestAlert:{},\r\n                        showAlertGrid:response.data.hasOwnProperty('RegistrationTestAlert')&&Object.keys(response.data['RegistrationTestAlert']).length !== 0\r\n                        ||response.data.hasOwnProperty('NewTestGroupTestAlert')&&Object.keys(response.data['NewTestGroupTestAlert']).length !== 0//&&response.data.RegistrationTestAlert.length>0||\r\n                       // response.data.hasOwnProperty('NewTestGroupTestAlert')&&response.data.NewTestGroupTestAlert.length>0\r\n                        ?true:false,\r\n                        showAlertForPredefined:false,\r\n                        additionalInfoView:false,\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample //&& RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [searchedSample[0]]\r\n                            }\r\n                        }\r\n                       // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    } else if (!searchedSample && RESelectedSample.length === 0 && RE_SAMPLE.length > 0) {\r\n                        const paramList = inputParam.postParamList[0];\r\n                        const inputParameter = {\r\n                            ...paramList.fecthInputObject.fecthInputObject,\r\n                            fetchUrl: paramList.fetchUrl,\r\n                            [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                            ntype: 2,\r\n                            nflag: 2\r\n                        };\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData: {\r\n                                ...masterData,\r\n                                RESelectedSample: [RE_SAMPLE[0]]\r\n                            }\r\n                        }\r\n                        //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                    }else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter \r\n                        if(RESelectedSample.length > 0 || RE_SUBSAMPLE.length > 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                            //dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } \r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    }   \r\n                    else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                            toast.warn(error.response.data); \r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function testStart(inputParam, acceptList, userInfo, completeResultId) {\r\n    if (acceptList !== undefined && acceptList.length > 0) {\r\n        return function (dispatch) {\r\n            let inputData = inputParam.testChildGetREParam\r\n            let inputParamData = {\r\n                ntype: 3,\r\n                nflag: 3,\r\n                nsampletypecode: inputData.nsampletypecode,\r\n                nregtypecode: inputData.nregtypecode,\r\n                nregsubtypecode: inputData.nregsubtypecode,\r\n                npreregno: inputData.npreregno,\r\n                 // ALPD-3513\r\n                //  Result entry: When initiate the test, list allignment issue occurs\r\n                ntranscode: String(0),\r\n                //ntranscode:String(inputData.ntransactionstatus),\r\n                napprovalversioncode: inputData.napprovalversioncode,\r\n                napprovalconfigcode: inputData.napprovalconfigcode,\r\n                ntransactionsamplecode: inputData.ntransactionsamplecode,\r\n                userinfo: userInfo,\r\n                fromdate: inputData.fromdate,\r\n                todate: inputData.todate,\r\n                ntestcode: inputData.ntestcode,\r\n                transactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                //ntransactiontestcode: acceptList ? acceptList.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntransactiontestcode: 0,\r\n                activeTestKey: inputData.activeTestKey,\r\n                ncontrolcode: inputParam.inputData.ncontrolcode,\r\n                ndesigntemplatemappingcode: inputData.masterData.ndesigntemplatemappingcode,\r\n                nneedsubsample : inputParam.inputData.subSampleNeeded,\r\n                needjoballocationandmyjob:inputParam.inputData.NeedJobAllocationAndMyjob,\r\n                nneedjoballocation:inputParam.inputData.nneedjoballocation,\r\n                nneedmyjob:inputParam.inputData.nneedmyjob,\r\n                nneedReceivedInLab:inputParam.inputData.nneedReceivedInLab\r\n            }\r\n            let activeName = \"\";\r\n            let dataStateName = \"\";\r\n            // let { resultDataState, materialDataState, instrumentDataState, taskDataState, resultChangeDataState,\r\n            //     documentDataState, testCommentDataState } = inputData\r\n            // let url = \"resultentrybysample/getTestbasedParameter\"\r\n            switch (inputData.activeTestKey) {\r\n                case \"IDS_RESULTS\":\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                case \"IDS_INSTRUMENT\":\r\n                    activeName = \"ResultUsedInstrument\"\r\n                    dataStateName = \"instrumentDataState\"\r\n                    break;\r\n                case \"IDS_MATERIAL\":\r\n                    activeName = \"ResultUsedMaterial\"\r\n                    dataStateName = \"materialDataState\"\r\n                    break;\r\n                case \"IDS_TASK\":\r\n                    activeName = \"ResultUsedTasks\"\r\n                    dataStateName = \"taskDataState\"\r\n                    break;\r\n                case \"IDS_TESTATTACHMENTS\":\r\n                    activeName = \"RegistrationTestAttachment\"\r\n                    break;\r\n                case \"IDS_TESTCOMMENTS\":\r\n                    activeName = \"RegistrationTestComment\"\r\n                    dataStateName = \"testCommentDataState\"\r\n                    break;\r\n                case \"IDS_DOCUMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"documentDataState\"\r\n                    break;\r\n                case \"IDS_RESULTCHANGEHISTORY\":\r\n                    activeName = \"ResultChangeHistory\"\r\n                    dataStateName = \"resultChangeDataState\"\r\n                    break;\r\n                case \"IDS_SAMPLEATTACHMENTS\":\r\n                    activeName = \"\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n                default:\r\n                    activeName = \"TestParameters\"\r\n                    dataStateName = \"resultDataState\"\r\n                    break;\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/testInitiated\", inputParamData)\r\n                .then(response => {\r\n                    let RE_SAMPLE = [];\r\n                    let RE_SUBSAMPLE = [];\r\n                    let RE_TEST = [];\r\n                    let onlySampleService=false;\r\n                    let childTabsKey = [\"TestParameters\", \"ResultUsedInstrument\", \"ResultUsedTasks\", \"RegistrationTestAttachment\",\r\n                            \"ResultChangeHistory\", \"RegistrationTestComment\", \"ResultChangeHistory\" ];\r\n                    //let responseData = response.data \r\n                    let responseData =   sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n                    fillRecordBasedOnCheckBoxSelection(responseData, inputData.masterData, childTabsKey, 3, \"ntransactionsamplecode\", []);\r\n                    let responseRESelectedTest= responseData.RESelectedTest;\r\n                    responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");\r\n                     // ALPD-3513\r\n                        // commed for Result entry: When initiate the test, list allignment issue occurs\r\n                    //ALPD-3425\r\n                    // if(responseData[\"RESelectedTest\"].length === 0){\r\n                    //     responseData[\"RESelectedTest\"] = responseRESelectedTest;\r\n                    // }\r\n                    let responseRE_TEST;\r\n                    // if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                    //        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                    //     inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                    //    }\r\n                    if (responseData[\"RE_TEST\"].length > 0) {\r\n                        if (inputData.masterData.realRegSubTypeValue.nneedsubsample)//.nneedsubsample)\r\n                        {\r\n                           //RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\");\r\n                         \r\n                           // RE_TEST = getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RESelectedTest\"],\"ntransactiontestcode\");\r\n                            RE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                            responseRE_TEST = replaceUpdatedObject(responseData[\"RE_TEST\"],inputData.masterData[\"RE_TEST\"],\"ntransactiontestcode\");;\r\n                        \r\n                        }\r\n                        else\r\n                             RE_TEST= responseData[\"RE_TEST\"]\r\n                             responseRE_TEST = responseData[\"RE_TEST\"]\r\n                           // RE_TEST = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"npreregno\");\r\n                    } else {\r\n                        RE_TEST = inputData.masterData[\"RE_TEST\"];\r\n                        responseRE_TEST = responseData[\"RE_TEST\"]\r\n                    } \r\n                    RE_SUBSAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SUBSAMPLE\"], filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_TEST\"], responseData[\"RE_TEST\"], \"ntransactionsamplecode\"), \"ntransactionsamplecode\");\r\n                    if (RE_SUBSAMPLE.length > 0) {  \r\n                    //    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n\r\n                    //    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                    //    selectedSampleArray=selectedSampleArray.filter(objx=>RE_TEST.some(objy=>objx['npreregno']===objy['npreregno']))\r\n                    //    let selectedTestPreregno=inputData.masterData[\"RESelectedTest\"].map(x=>x.npreregno);\r\n                    //    let selectPreregNOafter=selectedSampleArray.map(x=>x.npreregno)\r\n                    //    let unwantedPreregno= selectPreregNOBefore.filter(item => !selectPreregNOafter.includes(item))\r\n                    //                         .filter(item => !selectPreregNOafter.includes(item)&& !selectedTestPreregno.includes(item));\r\n\r\n                    //    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"].filter(objx=>unwantedPreregno.every(npreregno=>npreregno!==objx['npreregno'])) \r\n                    RE_SAMPLE=inputData.masterData[\"RE_SAMPLE\"];\r\n                    let selectedSampleArray= inputData.masterData[\"RESelectedSample\"]; \r\n                    let subSampleArray=RE_SUBSAMPLE.map(x=>x.npreregno);\r\n                    let selectPreregNOBefore=selectedSampleArray.map(x=>x.npreregno)\r\n                    selectedSampleArray=selectedSampleArray.filter(item => subSampleArray.includes(item.npreregno)).map(x=>x.npreregno) \r\n                    let unwantedPreregno=  selectPreregNOBefore.filter(function (x) {\r\n                        return !selectedSampleArray.some(function (y) { \r\n                          return x  === y \r\n                        })\r\n                      }); \r\n                    RE_SAMPLE= RE_SAMPLE.filter(item => !unwantedPreregno.includes(item.npreregno))\r\n                    //RE_SAMPLE= filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"],RE_SUBSAMPLE , \"npreregno\");\r\n                    } else {\r\n                        RE_SAMPLE = filterRecordBasedOnTwoArrays(inputData.masterData[\"RE_SAMPLE\"], RE_TEST, \"npreregno\");\r\n                    }\r\n\r\n\r\n                    const RESelectedSample = RE_SUBSAMPLE.length > 0 ? inputData.masterData[\"RESelectedSample\"] : [RE_SAMPLE[0]]\r\n                    \r\n                    //const RESelectedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSample\"], RE_TEST, \"npreregno\");\r\n\r\n                    // let x=filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\") \r\n                    // let boolSelectedSubSample=x.some(objx=>RE_TEST.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode']))\r\n                    // const RESelectedSubSample =boolSelectedSubSample? filterRecordBasedOnTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\"):\r\n                    // getSameRecordFromTwoArrays (inputData.masterData[\"RESelectedSubSample\"], RE_TEST, \"ntransactionsamplecode\");\r\n                    let boolSelectedSubSample; \r\n                    let searchedSubSample = undefined; \r\n                    let RESelectedSubSample=[];\r\n                    let backfrontTest= getSameRecordFromTwoArrays(inputData.masterData[\"RE_TEST\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\")\r\n                     if(inputData.masterData[\"searchedSubSample\"]){\r\n                         searchedSubSample =inputData.masterData[\"searchedSubSample\"]\r\n                         boolSelectedSubSample=searchedSubSample.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n\r\n                         let searchedSubSamplebefore=inputData.masterData[\"RESelectedSubSample\"].map(x=>x.ntransactionsamplecode);\r\n                         searchedSubSample= inputData.masterData[\"RESelectedSubSample\"].filter(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                         let searchedSubSampleaftere=searchedSubSample.map(x=>x.ntransactionsamplecode);\r\n                         let unwantedSamplecode=  searchedSubSamplebefore.filter(function (x) {\r\n                            return !searchedSubSampleaftere.some(function (y) { \r\n                              return x  === y \r\n                            })\r\n                          });  \r\n                          inputData.masterData[\"searchedSubSample\"]=inputData.masterData[\"searchedSubSample\"].filter(item => !unwantedSamplecode.includes(item.ntransactionsamplecode)) \r\n                      }else{\r\n                        boolSelectedSubSample=RE_SUBSAMPLE.some(objx=>backfrontTest.some(objy=>objx['ntransactionsamplecode']===objy['ntransactionsamplecode'])) \r\n                      }\r\n                   \r\n                    if(inputData.masterData[\"searchedSubSample\"]//&&inputData.masterData[\"searchedSubSample\"].length>0\r\n                    ){\r\n                        RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :\r\n                        inputData.masterData[\"searchedSubSample\"][0]? [inputData.masterData[\"searchedSubSample\"][0]]:[]\r\n                    }else{\r\n                        RESelectedSubSample = boolSelectedSubSample ?inputData.masterData[\"RESelectedSubSample\"] :  [RE_SUBSAMPLE[0]]\r\n                    } \r\n                    // let RESelectedTest1 = filterRecordBasedOnTwoArrays(inputData.masterData[\"RESelectedTest\"], acceptList, \"ntransactiontestcode\");\r\n                    // let RESelectedTest2 = updatedObjectWithNewElement(RESelectedTest1, responseData.RESelectedTest)\r\n                    // RESelectedTest2 = replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\r\n\r\n                    let searchedSample = undefined;\r\n                    if (inputData.masterData[\"searchedSample\"]) {\r\n                        searchedSample = filterRecordBasedOnTwoArrays(inputData.masterData[\"searchedSample\"], RE_SAMPLE, \"npreregno\");\r\n                     searchedSample=searchedSample.length>0?searchedSample:inputData.masterData[\"searchedSample\"];\r\n                    }\r\n\r\n                    let masterData = {\r\n                        // ...inputData.masterData,\r\n                        // //...responseData,\r\n                        // //RE_SAMPLE,\r\n                        // //RE_SUBSAMPLE,\r\n                        // //RESelectedSubSample,\r\n                        // searchedSample,\r\n                        // RE_TEST:replaceUpdatedObject(responseData[\"RE_TEST\"], inputData.masterData.RE_TEST, 'ntransactiontestcode')\r\n                        // //RESelectedSample,\r\n                        // //RESelectedTest: RESelectedTest2,\r\n                        // //RE_TEST: responseData[\"RE_TEST\"]\r\n                        ...inputData.masterData,\r\n                        ...responseData,\r\n                        RE_SAMPLE,\r\n                        RE_SUBSAMPLE,\r\n                        RESelectedSubSample,\r\n                        searchedSample,\r\n                        RESelectedSample,\r\n                        RESelectedTest:inputData.masterData[\"searchedTest\"]&&\r\n                        inputData.masterData[\"searchedTest\"].length>0?[inputData.masterData[\"searchedTest\"][0]]: responseData.RESelectedTest,\r\n                        // ALPD-3513\r\n                        // commed for Result entry: When initiate the test, list allignment issue occurs\r\n                        // RE_TEST: responseData[\"RE_TEST\"]\r\n                        // RE_TEST: responseRE_TEST\r\n                        //ALPD-3425\r\n                        RE_TEST\r\n                    }\r\n                    if(inputData.masterData[\"searchedTest\"]&&responseData[\"RE_TEST\"]){\r\n                        let respObject1={masterData:masterData};\r\n                        dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject1))\r\n                    // inputData.masterData[\"searchedTest\"]= getSameRecordFromTwoArrays(inputData.masterData[\"searchedTest\"],responseData[\"RE_TEST\"],\"ntransactiontestcode\");\r\n                    }\r\n                    let skipInfo = {};\r\n                    if (masterData.RE_SAMPLE && masterData.RE_SAMPLE.length <= inputParam.skip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            skip: 0,\r\n                            take: inputParam.take\r\n                        }\r\n                    }\r\n                    if (masterData.RE_TEST && masterData.RE_TEST.length <= inputParam.testskip) {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            testskip: 0,\r\n                            testtake: inputParam.testtake\r\n                        }\r\n                    }\r\n                    if (inputData[dataStateName] && masterData[activeName] && masterData[activeName].length <= inputData[dataStateName].skip) {\r\n\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                skip: 0,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    } else {\r\n                        skipInfo = {\r\n                            ...skipInfo,\r\n                            [dataStateName]: {\r\n                                ...inputData[dataStateName],\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    }\r\n                    let respObject = {\r\n                        ...inputParamData.inputData,\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        showConfirmAlert: false,\r\n                        //selectedRecord: undefined,\r\n                        loading: false,\r\n                        screenName: inputData.activeTestKey,\r\n                        ...skipInfo\r\n                    }\r\n                    if (searchedSample// && RESelectedSample.length === 0 \r\n                        && searchedSample.length > 0) {\r\n                        if(RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0){\r\n                            const paramList = inputParam.postParamList[0];\r\n                            const inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(searchedSample[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [searchedSample[0]]\r\n                                }\r\n                            }\r\n                          //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        } else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n                    } else if (!searchedSample && RE_SAMPLE.length > 0) {\r\n                        let inputParameter\r\n                        // let paramList = inputParam.postParamList[0];\r\n                        // let inputParameter = {\r\n                        //     ...paramList.fecthInputObject.fecthInputObject,\r\n                        //     fetchUrl: paramList.fetchUrl,\r\n                        //     [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                        //     ntype: 2,\r\n                        //     nflag: 2\r\n                        // };\r\n                        // respObject = {\r\n                        //     ...respObject,\r\n                        //     masterData: {\r\n                        //         ...masterData,\r\n                        //         RESelectedSample: [RE_SAMPLE[0]]\r\n                        //     }\r\n                        // }\r\n\r\n                        if(RESelectedSample.length === 0 || RE_SUBSAMPLE.length == 0)\r\n                        {\r\n                            onlySampleService=true;\r\n                            let paramList = inputParam.postParamList[0];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 2,\r\n                                nflag: 2\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSample: [RE_SAMPLE[0]]\r\n                                }\r\n                            }\r\n                           // dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n\r\n                        if(boolSelectedSubSample===false?(boolSelectedSubSample===false&&onlySampleService===false&&RESelectedSubSample.length !== 0\r\n                            //&&!searchedSubSample\r\n                            )\r\n                        :(RESelectedSubSample.length === 0 && RE_SUBSAMPLE.length > 0))\r\n                        {\r\n                            let paramList = inputParam.postParamList[1];\r\n                            inputParameter = {\r\n                                ...paramList.fecthInputObject,\r\n                                fetchUrl: paramList.fetchUrl,\r\n                                [paramList.primaryKeyField]: String(RE_SUBSAMPLE[0][paramList.primaryKeyField]),\r\n                                ntype: 3,\r\n                                nflag: 3\r\n                            };\r\n\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData: {\r\n                                    ...masterData,\r\n                                    RESelectedSubSample: [RE_SUBSAMPLE[0]]\r\n                                }\r\n                            }\r\n                          //  dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                            dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: checkBoxOperation.SINGLESELECT }, respObject));\r\n                        }\r\n                        // if(RESelectedTest.length === 0)\r\n                        // {\r\n                        //     let paramList = inputParam.postParamList[2];\r\n                        //     inputParameter = {\r\n                        //         ...paramList.fecthInputObject,\r\n                        //         fetchUrl: paramList.fetchUrl,\r\n                        //         [paramList.primaryKeyField]: String(RE_TEST[0][paramList.primaryKeyField]),\r\n                        //         ntype: 3,\r\n                        //         nflag: 3\r\n                        //     };\r\n\r\n                        //     respObject = {\r\n                        //         ...respObject,\r\n                        //         masterData: {\r\n                        //             ...masterData,\r\n                        //             RESelectedTest: [RE_TEST[0]]\r\n                        //         }\r\n                        //     }\r\n                        //     dispatch(fetchSelectedData({ ...inputParameter, checkBoxOperation: 3 }, respObject));\r\n                        // }\r\n                        else {\r\n                            respObject = {\r\n                                ...respObject,\r\n                                masterData\r\n                            };\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    ...respObject,\r\n                                    loading: false\r\n                                }\r\n                            });\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        respObject = {\r\n                            ...respObject,\r\n                            masterData\r\n                        };\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                ...respObject,\r\n                                loading: false\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOINITIATE\"\r\n        }));\r\n    }\r\n\r\n}\r\n//Compare two array and return the first array which is available in second array\r\nexport function compareTwoArray(firstArray, secondArray, PrimaryKey) {\r\n    const filterArray = firstArray.filter(function (x) {\r\n        return secondArray.some(function (y) {\r\n            return x[PrimaryKey] === y[PrimaryKey]\r\n        })\r\n    });\r\n    return filterArray;\r\n}\r\n\r\nfunction fetchSelectedData(inputParam, respObject) {\r\n    return (dispatch) => {\r\n        rsapi.post(inputParam.fetchUrl, {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n\r\n                if (response.data.RE_SUBSAMPLE && response.data.RE_SUBSAMPLE.length > 0)\r\n                {\r\n                    sortData(response.data.RE_SUBSAMPLE,'descending', 'ntransactionsamplecode');\r\n                }\r\n                sortData(response.data.RE_TEST,'ascending', 'ntransactionresultcode');\r\n                const masterData = {\r\n                    ...respObject.masterData,\r\n                    ...response.data,\r\n                    RESelectedSample: response.data.RESelectedSample || respObject.masterData.RESelectedSample || []\r\n                };\r\n                //sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        ...respObject,\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport function testMethodSourceEdit(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n            ntestgrouptestcode: inputData.test.ntestgrouptestcode,\r\n            ntestcode: inputData.test.ntestcode,\r\n            ncontrolcode: inputData.editSourceMethodId,\r\n            userinfo: inputData.userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestMethodSource\", inputParamData)\r\n            .then(response => {\r\n\r\n                const TagSource = constructOptionList(response.data.SourceData || [], \"nsourcecode\",\r\n                    \"ssourcename\", undefined, undefined, undefined);\r\n                const TagListSource = TagSource.get(\"OptionList\");\r\n\r\n                const TagMethod = constructOptionList(response.data.MethodData || [], \"nmethodcode\",\r\n                    \"smethodname\", undefined, undefined, undefined);\r\n                const TagListMethod = TagMethod.get(\"OptionList\");\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            SourceData: TagListSource,\r\n                            MethodData: TagListMethod,\r\n                            RESelectedSubSample: inputData.masterData.RESelectedSubSample\r\n                        },\r\n                        selectedRecord: {\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            stestsynonym: inputData.test.jsondata.stestsynonym,\r\n                            nsourcecode: response.data.SourceDataValue,\r\n                            nmethodcode: response.data.MethodDataValue\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_TESTMETHODSOURCE\",\r\n                        openModal: true,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.editSourceMethodId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function updateParameterComments(inputData, masterData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactiontestcode: inputData.ntransactiontestcode,\r\n            ntransactionresultcode: inputData.ntransactionresultcode,\r\n            sresultcomment: inputData.sresultcomment,\r\n            transactiontestcode: inputData.transactiontestcode,\r\n            userinfo: inputData.userinfo,\r\n            nregtypecode: inputData.nregtypecode,\r\n            nregsubtypecode: inputData.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n            ncontrolcode: inputData.ncontrolcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/updateParameterComments\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        screenName: \"IDS_RESULT\",\r\n                        openModal: false,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.ncontrolcode\r\n                        //ncontrolcode:inputData.editSourceMethodId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function addREInstrument(inputData) {\r\n    return function (dispatch) {\r\n\r\n        let urlArray = [];\r\n        const resultusedinstrument = rsapi.post(\"resultentrybysample/getResultUsedInstrumentNameCombo\", {\r\n            userinfo: inputData.userInfo,ntestgrouptestcode:inputData.masterData.RESelectedTest.ntestgrouptestcode\r\n        });\r\n        const timeZoneService = rsapi.post(\"timezone/getTimeZone\");\r\n        const UTCtimeZoneService = rsapi.post(\"timezone/getLocalTimeByZone\", { userinfo: inputData.userInfo });\r\n        urlArray = [resultusedinstrument, timeZoneService, UTCtimeZoneService];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\",\r\n                    \"sinstrumentname\", undefined, undefined, undefined);\r\n                const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\r\n\r\n\r\n                const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                    \"sinstrumentcatname\", undefined, undefined, undefined);\r\n                const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\r\n\r\n                const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, undefined);\r\n                const TagListTimeZone = TagTimeZone.get(\"OptionList\")\r\n\r\n                dispatch({\r\n\r\n\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            InstrumentName: TagListInstrumentName,\r\n                            InstrumentCategory: TagListInstrumentCategory\r\n\r\n                        },\r\n                        selectedId: null,\r\n                       // selectedRecord\r\n                       selectedRecordInstrumentForm : {\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            ninstrumentcatcode: TagInsturmentcategory.get(\"DefaultValue\") ? TagInsturmentcategory.get(\"DefaultValue\") : [],\r\n                            ninstrumentnamecode: TagInstrumentName.get(\"DefaultValue\") ? TagInstrumentName.get(\"DefaultValue\") : [],\r\n                            npreregno: inputData.test.npreregno,\r\n                            //dtodate: new Date(response[2].data),//new Date(),\r\n                            dtodate: rearrangeDateFormat(inputData.userInfo, response[2].data),//new Date(),\r\n                            //dfromdate: new Date(response[2].data),//new Date(),\r\n                            dfromdate: rearrangeDateFormat(inputData.userInfo, response[2].data),//new Date(),\r\n                            ntzfromdate: {\r\n                                \"value\": inputData.userInfo.ntimezonecode,\r\n                                \"label\": inputData.userInfo.stimezoneid\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": inputData.userInfo.ntimezonecode,\r\n                                \"label\": inputData.userInfo.stimezoneid\r\n                            }\r\n                        },\r\n                        timeZoneList: TagListTimeZone || [],\r\n                        loading: false,\r\n                        screenName: \"IDS_INSTRUMENT\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        isInstrumentInitialRender:true,\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function addREMaterial(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", { userinfo: inputData.userInfo, nsectioncode: inputData.test.nsectioncode, ntestgrouptestcode: inputData.test.ntestgrouptestcode })\r\n            .then(response => {\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        //selectedRecord\r\n                        selectedRecordMaterialForm : {\r\n                            ntestgroupmaterial : transactionStatus.YES,\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            nsectioncode: inputData.test.nsectioncode,\r\n                            ssectionname: inputData.test.ssectionname,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            npreregno: inputData.test.npreregno,\r\n                            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\"),\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\"),\r\n                            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\r\n                            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\r\n                            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        isMaterialInitialRender:true,\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedMaterailId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREMaterialComboGet(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterialCombo\", { userinfo: inputData.userInfo, nsectioncode: inputData.test.nsectioncode, ntestgrouptestcode: inputData.ntestgrouptestcode })\r\n            .then(response => {\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ntestgroupmaterial : inputData.ntestgroupmaterial,\r\n                            sarno: inputData.test.sarno,\r\n                            ssamplearno: inputData.test.ssamplearno,\r\n                            stestsynonym: inputData.test.stestsynonym,\r\n                            nsectioncode: inputData.test.nsectioncode,\r\n                            ssectionname: inputData.test.ssectionname,\r\n                            transactiontestcode: inputData.RESelectedTest ? inputData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n                            ntransactiontestcode: inputData.test.ntransactiontestcode,\r\n                            npreregno: inputData.test.npreregno,\r\n                            nmaterialtypecode: materialTypeMap.get(\"DefaultValue\") ? materialTypeMap.get(\"DefaultValue\") : \"\",\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") ? materialCatMap.get(\"DefaultValue\") : \"\",\r\n                            nmaterialcode: materialMap.get(\"OptionList\").length > 0 ? materialMap.get(\"OptionList\")[0] : \"\",\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\").length > 0 ? materialInventoryMap.get(\"OptionList\")[0] : \"\",\r\n                            sunitname: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].sunitname : \"\",\r\n                            savailablequantity: response.data.MaterialInventory !== undefined ? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        //ncontrolcode: inputData.addResultUsedMaterailId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREMaterialCategoryByType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialCategoryByType\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            nmaterialcode:materialMap.get(\"DefaultValue\")|| {},\r\n                            nmaterialinventorycode:materialInventoryMap.get(\"DefaultValue\")|| {},\r\n                            nmaterialcatcode: materialCatMap.get(\"DefaultValue\") || {},\r\n                        },\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getREMaterialByCategory(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialByCategory\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialtypecode: inputData.selectedRecord.nmaterialtypecode.value,\r\n            nmaterialcatcode: inputData.selectedRecord.nmaterialcatcode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            nmaterialcode: materialMap.get(\"OptionList\")[0],\r\n                            nmaterialinventorycode: materialInventoryMap.get(\"OptionList\")[0],\r\n                            savailablequantity: response.data.MaterialInventory ? response.data.MaterialInventory[0].savailablequatity:\"\",\r\n                            sunitname:response.data.MaterialInventory? response.data.MaterialInventory[0].sunitname :\"\"\r\n                        },\r\n                        material,\r\n                        materialInventory,\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getREMaterialInvertoryByMaterial(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getREMaterialInvertoryByMaterial\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialcode: inputData.selectedRecord.nmaterialcode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            sunitname: response.data.MaterialInventory ? response.data.MaterialInventory[0].sunitname :\"\",\r\n                            savailablequantity: response.data.MaterialInventory? response.data.MaterialInventory[0].savailablequatity : \"\"\r\n                        },\r\n                        materialInventory,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        //operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getAvailableMaterialQuantity(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAvailableMaterialQuantity\", {\r\n            ntestgrouptestcode : inputData.ntestgrouptestcode,\r\n            nmaterialinventorycode: inputData.selectedRecord.nmaterialinventorycode.value,\r\n            nsectioncode: inputData.selectedRecord.nsectioncode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: null,\r\n                        selectedRecord: {\r\n                            ...inputData.selectedRecord,\r\n                            savailablequantity: response.data.inventory ? response.data.inventory.savailablequatity :\"\",\r\n                            sunitname: response.data.inventory ? response.data.inventory.sunitname :\"\"\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        //operation: \"create\",\r\n                        //activeTestKey: \"IDS_INSTRUMENT\",\r\n                        ncontrolcode: inputData.addResultUsedInstrumentId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function deleteInstrumentRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        selectedId : null\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n// export function deleteInstrumentRecord(inputData) {\r\n//     return function (dispatch) {\r\n//         let inputParamData = {\r\n//             nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n//             userinfo: inputData.userInfo,\r\n//             ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n//                 inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n//             nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n//             nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n//         }\r\n//         dispatch(initRequest(true));\r\n//         rsapi.post(\"resultentrybysample/deleteResultUsedInstrument\", inputParamData)\r\n//             .then(response => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         masterData: {\r\n//                             ...inputData.masterData,\r\n//                             ...response.data\r\n//                         },\r\n//                         loading: false,\r\n//                         operation: \"delete\",\r\n//                         openModal: false,\r\n//                         loadEsign: false\r\n//                     }\r\n//                 })\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         loading: false\r\n//                     }\r\n//                 })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 } else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n//     }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function fetchInstrumentRecord(inputData) {\r\n    return function (dispatch) {\r\n\r\n        let urlArray = [];\r\n        //const resultUsedInstrumentCombo = rsapi.post(\"resultentrybysample/getResultUsedInstrumentCombo\", { userinfo: inputData.userInfo });\r\n        const timeZoneService = rsapi.post(\"resultentrybysample/getResultUsedInstrument\", {\r\n            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo\r\n        });\r\n        const getResultUsedInstrument = rsapi.post(\"timezone/getTimeZone\");\r\n        urlArray = [timeZoneService, getResultUsedInstrument];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n\r\n                const TagInstrumentName = constructOptionList(response[0].data.InstrumentName || [], \"ninstrumentnamecode\",\r\n                    \"sinstrumentname\", undefined, undefined, undefined);\r\n                const TagListInstrumentName = TagInstrumentName.get(\"OptionList\");\r\n\r\n                const TagInstrumentId = constructOptionList(response[0].data.InstrumentId || [], \"ninstrumentcode\",\r\n                    \"sinstrumentid\", undefined, undefined, undefined);\r\n                const TagListInstrumentId = TagInstrumentId.get(\"OptionList\");\r\n\r\n                const TagInsturmentcategory = constructOptionList(response[0].data.InstrumentCategory || [], \"ninstrumentcatcode\",\r\n                    \"sinstrumentcatname\", undefined, undefined, undefined);\r\n                const TagListInstrumentCategory = TagInsturmentcategory.get(\"OptionList\");\r\n\r\n                const TagTimeZone = constructOptionList(response[1].data || [], \"ntimezonecode\",\r\n                    \"stimezoneid\", undefined, undefined, undefined);\r\n                const TagListTimeZone = TagTimeZone.get(\"OptionList\")\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            InstrumentName: TagListInstrumentName,\r\n                            InstrumentId:TagListInstrumentId,\r\n                            InstrumentCategory: TagListInstrumentCategory,\r\n                            // ...response[0].data,\r\n                            ...response[1].data,\r\n                            //...response[2].data\r\n                        },\r\n                        selectedId: inputData.editRow.nresultusedinstrumentcode,\r\n                      //  selectedRecord\r\n                        selectedRecordInstrumentForm\r\n                        : {\r\n                            ssamplearno:response[0].data.EditResultUsedInstrument[0].ssamplearno,\r\n                            stestsynonym: inputData.editRow.stestsynonym,\r\n                            npreregno: response[0].data.EditResultUsedInstrument[0].npreregno,\r\n                            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\r\n                            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n                            ninstrumentcatcode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcatcode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentcatname\r\n                            },\r\n                            ninstrumentnamecode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentnamecode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentname\r\n                            },\r\n                            ninstrumentcode: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ninstrumentcode,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].sinstrumentid\r\n                            },\r\n                            ntzfromdate: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ntzfromdate,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].stzfromdate\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": response[0].data.EditResultUsedInstrument[0].ntztodate,\r\n                                \"label\": response[0].data.EditResultUsedInstrument[0].stztodate\r\n                            },\r\n                            //dfromdate: new Date(response[0].data.EditResultUsedInstrument[0].sfromdate),\r\n                            //dtodate: new Date(response[0].data.EditResultUsedInstrument[0].stodate)\r\n                            dfromdate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].sfromdate),\r\n                            dtodate: rearrangeDateFormat(inputData.userInfo, response[0].data.EditResultUsedInstrument[0].stodate)\r\n                        },\r\n                        isInstrumentInitialRender:true,\r\n                        timeZoneList: TagListTimeZone || [],\r\n                        ncontrolcode: inputData.ncontrolCode,\r\n                        loading: false,\r\n                        screenName: \"IDS_INSTRUMENT\",\r\n                        openModal: true,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function fetchMaterialRecord(inputData) {\r\n    return function (dispatch) {\r\n\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedMaterial\", {\r\n            nresultusedmaterialcode: inputData.editRow.nresultusedmaterialcode,\r\n            userinfo: inputData.userInfo\r\n        })\r\n            .then(response => {\r\n\r\n                const materialTypeMap = constructOptionList(response.data.MaterialType || [], \"nmaterialtypecode\", \"smaterialtypename\", undefined, undefined, undefined);\r\n                const materialType = materialTypeMap.get(\"OptionList\");\r\n                const materialCatMap = constructOptionList(response.data.MaterialCategory || [], \"nmaterialcatcode\", \"smaterialcatname\", undefined, undefined, undefined);\r\n                const materialCat = materialCatMap.get(\"OptionList\");\r\n                const materialMap = constructOptionList(response.data.Material || [], \"nmaterialcode\", \"smaterialname\", undefined, undefined, undefined);\r\n                const material = materialMap.get(\"OptionList\");\r\n                const materialInventoryMap = constructOptionList(response.data.MaterialInventory || [], \"nmaterialinventorycode\", \"sinventoryid\", undefined, undefined, undefined);\r\n                const materialInventory = materialInventoryMap.get(\"OptionList\");\r\n                const EditResultUsedMaterial = response.data.EditResultUsedMaterial[0]\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedId: inputData.editRow.nresultusedinstrumentcode,\r\n                        materialType,\r\n                        materialCat,\r\n                        material,\r\n                        materialInventory,\r\n                        selectedRecord: {\r\n                            ...EditResultUsedMaterial,\r\n                            stestsynonym: inputData.editRow.jsondata.stestsynonym,\r\n                            npreregno: EditResultUsedMaterial.npreregno,\r\n                            ntransactiontestcode: inputData.editRow.ntransactiontestcode,\r\n                            nresultusedinstrumentcode: inputData.editRow.nresultusedinstrumentcode,\r\n                            nmaterialtypecode: {\r\n                                label: EditResultUsedMaterial.jsondata.smaterialtypename,\r\n                                value: EditResultUsedMaterial.nmaterialtypecode\r\n                            },\r\n                            nmaterialcatcode: {\r\n                                \"value\": EditResultUsedMaterial.nmaterialcategorycode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.smaterialcatname\r\n                            },\r\n                            nmaterialcode: {\r\n                                \"value\": EditResultUsedMaterial.nmaterialcode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.smaterialname,\r\n                            },\r\n                            nmaterialinventorycode: {\r\n                                \"value\": EditResultUsedMaterial.ninventorycode,\r\n                                \"label\": EditResultUsedMaterial.jsondata.sinventoryid\r\n                            },\r\n                            ntztodate: {\r\n                                \"value\": EditResultUsedMaterial.ntztodate,\r\n                                \"label\": EditResultUsedMaterial.stztodate\r\n                            },\r\n                            susedquantity: EditResultUsedMaterial.jsondata.nqtyused,\r\n                            scarriergas: EditResultUsedMaterial.jsondata.scarriergas,\r\n                            smobilephase: EditResultUsedMaterial.jsondata.smobilephase,\r\n                            sremarks: EditResultUsedMaterial.jsondata.sremarks,\r\n                            savailablequantity: response.data.inventory ?  response.data.inventory.savailablequatity :\"\",\r\n                            sunitname: response.data.inventory ? response.data.inventory.sunitname :\"\"\r\n                        },\r\n                        ncontrolcode: inputData.ncontrolCode,\r\n                        loading: false,\r\n                        screenName: \"IDS_MATERIAL\",\r\n                        openModal: true,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function deleteTaskRecord(inputData, userInfo) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedtaskcode: inputData.selectedRecord.nresultusedtaskcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode,\r\n            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedTasks\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false,\r\n                        selectedId: null\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function fetchTaskRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedtaskcode: inputData.editRow.nresultusedtaskcode,\r\n            userinfo: inputData.userInfo,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getResultUsedTask\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        selectedId: response.data.EditResultUsedTasks[0].nresultusedtaskcode,\r\n                  //      selectedRecord: {\r\n                    selectedRecordTaskForm:{\r\n                            npreregno: response.data.EditResultUsedTasks[0].npreregno,\r\n                            stestsynonym: inputData.editRow.stestsynonym,\r\n                            sanalysistime: response.data.EditResultUsedTasks[0].jsondata.sanalysistime,\r\n                            smisctime: response.data.EditResultUsedTasks[0].jsondata.smisctime,\r\n                            spreanalysistime: response.data.EditResultUsedTasks[0].jsondata.spreanalysistime,\r\n                            spreparationtime: response.data.EditResultUsedTasks[0].jsondata.spreparationtime,\r\n                            scomments: response.data.EditResultUsedTasks[0].jsondata.scomments,\r\n                            staskprocedure: response.data.EditResultUsedTasks[0].jsondata.staskprocedure,\r\n                            nresultusedtaskcode: response.data.EditResultUsedTasks[0].nresultusedtaskcode\r\n                        },\r\n                        isTaskInitialRender:true,\r\n                        loading: false,\r\n                        screenName: \"IDS_TASK\",\r\n                        openModal: true,\r\n                        operation: \"update\",\r\n                        ncontrolcode: inputData.ncontrolcode,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function parameterRecord(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n            ncontrolcode: inputData.controlcode,\r\n            userinfo: inputData.userInfo\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getParameterComments\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                        },\r\n                        selectedId: response.data.ParameterComments.ntransactionresultcode,\r\n                        selectedRecord: {\r\n                            sresultcomment: response.data.ParameterComments.sresultcomment,\r\n                            stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                            sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                            transactiontestcode: response.data.ParameterComments.ntransactiontestcode,\r\n                            ntransactionresultcode: response.data.ParameterComments.ntransactionresultcode,\r\n                            ntransactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                            ncontrolcode: inputData.controlcode\r\n                        },\r\n                        loading: false,\r\n                        screenName: \"IDS_PARAMETERCOMMENTS\",\r\n                        openModal: true,\r\n                        operation: \"updateParameterComments\",\r\n                        ncontrolcode: inputData.controlcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function checkListRecord(inputData) {\r\n\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n            napprovalparametercode: inputData.selectedRecord.napprovalparametercode,\r\n            nchecklistversioncode: inputData.selectedRecord.nchecklistversioncode,\r\n            ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode.toString(),\r\n            ncontrolcode: inputData.ncontrolcode,\r\n            userinfo: inputData.userInfo,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getChecklistdesign\", inputParamData)\r\n            .then(response => {\r\n                let selectedRecord = {};\r\n                let lsteditedQB = [];\r\n                selectedRecord = {\r\n                    sarno: inputData.selectedRecord.sarno,\r\n                    ssamplearno: inputData.selectedRecord.ssamplearno,\r\n                    npreregno: inputData.selectedRecord.npreregno,\r\n                    stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                    sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                    ntransactiontestcode: inputData.selectedRecord.ntransactiontestcode,\r\n                    ntransactionresultcode: inputData.selectedRecord.ntransactionresultcode,\r\n                    transactiontestcode: inputData.masterData.RESelectedTest ? inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\"\r\n                }\r\n\r\n                response.data.ChecklistData.map(checklist => {\r\n                    selectedRecord[checklist.nchecklistversionqbcode] = {\r\n                        nchecklistqbcode: checklist.nchecklistqbcode,\r\n                        nchecklistversioncode: checklist.nchecklistversioncode,\r\n                        nchecklistversionqbcode: checklist.nchecklistversionqbcode,\r\n                        sdefaultvalue: checklist.nchecklistcomponentcode ===7  ? rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue) :checklist.sdefaultvalue,\r\n                      //  sdefaultvalue: checklist.sdefaultvalue,\r\n                        sarno: inputData.selectedRecord.sarno,\r\n                        ssamplearno: inputData.selectedRecord.ssamplearno,\r\n                        stestsynonym: inputData.selectedRecord.stestsynonym,\r\n                        sparametersynonym: inputData.selectedRecord.sparametersynonym,\r\n                    }\r\n                    lsteditedQB.push(checklist.nchecklistversionqbcode);\r\n                    return null;\r\n                });\r\n\r\n                response.data.ChecklistData.map(checklist => {\r\n                    selectedRecord['jsondata'] = {\r\n                        ...selectedRecord['jsondata'],\r\n                      //  [checklist.nchecklistversionqbcode]: checklist.sdefaultvalue\r\n                        [checklist.nchecklistversionqbcode]:checklist.nchecklistcomponentcode ===7 ? rearrangeDateFormat(inputData.userInfo,checklist.sdefaultvalue) :checklist.sdefaultvalue\r\n\r\n                    }\r\n                    return null;\r\n                });\r\n                selectedRecord[\"editedQB\"] = lsteditedQB;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        selectedId: response.data.selectedId,\r\n                        selectedRecord: selectedRecord,\r\n                        loading: false,\r\n                        screenName: \"IDS_CHECKLISTRESULT\",\r\n                        openTemplateModal: true,\r\n                        needSaveButton: inputData.needSaveButton,\r\n                        operation: \"create\",\r\n                        ncontrolCode: inputData.ncontrolcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\r\n\r\n    return function (dispatch) {\r\n\r\n        let listResultCheckList = [];\r\n        if (selectedRecord && selectedRecord.jsondata) {\r\n            selectedRecord.editedQB.map(qbcode =>\r\n                listResultCheckList.push(selectedRecord[qbcode]))\r\n\r\n            let inputParamData = {\r\n                ntransactionresultcode: selectedRecord.ntransactionresultcode,\r\n                ntransactiontestcode: selectedRecord.ntransactiontestcode.toString(),\r\n                transactiontestcode: selectedRecord.transactiontestcode,\r\n                npreregno: selectedRecord.npreregno,\r\n                ResultCheckList: {\r\n                    nchecklistversioncode: listResultCheckList[0].nchecklistversioncode,\r\n                    nchecklistqbcode: listResultCheckList[0].nchecklistqbcode,\r\n                    jsondata: selectedRecord.jsondata,\r\n                    npreregno: selectedRecord.npreregno,\r\n                    ntransactionresultcode: selectedRecord.ntransactionresultcode,\r\n                },\r\n                //jsondata: selectedRecord.jsondata,\r\n                userinfo: userInfo,\r\n                nregtypecode: nregtypecode,\r\n                nregsubtypecode: nregsubtypecode,\r\n                ndesigntemplatemappingcode: ndesigntemplatemappingcode,\r\n\r\n                ncontrolcode: -1\r\n            }\r\n\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/createResultEntryChecklist\", inputParamData)\r\n\r\n                .then(response => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            selectedRecord: {},\r\n                            templateData: undefined,\r\n                            openTemplateModal: false,\r\n                            openModal: false,\r\n                            loading: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    openTemplateModal: false,\r\n                    selectedRecord: {},\r\n                    loading: false,\r\n                    loadEsign: false\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function defaultTest(inputData, RESelectedTest, RESelectedSample, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode) {\r\n    if (RESelectedTest !== undefined && RESelectedTest.length > 0) {\r\n        return function (dispatch) {\r\n            let inputParamData = {\r\n                userinfo: inputData.userinfo,\r\n                ntransactiontestcode: RESelectedTest ? RESelectedTest.map(test => test.ntransactiontestcode).join(\",\") : \"\",\r\n                ntestgrouptestcode: RESelectedTest ? RESelectedTest.map(test => test.ntestgrouptestcode).join(\",\") : \"\",\r\n                npreregno: RESelectedTest ? RESelectedTest.map(preregno => preregno.npreregno).join(\",\") : \"\",\r\n                //RESelectedSample ? RESelectedSample.map(preregno => preregno.npreregno).join(\",\") : \"\",\r\n                nregtypecode: nregtypecode,\r\n                nregsubtypecode: nregsubtypecode,\r\n                //ndesigntemplatemappingcode:ndesigntemplatemappingcode,\r\n                ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                ncontrolcode: inputData.ncontrolcode,\r\n                nneedReceivedInLab:inputData.nneedReceivedInLab\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"resultentrybysample/updateDefaultValue\", inputParamData)\r\n                .then(response => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                ...response.data,\r\n                                TestParameters: replaceUpdatedObject(response.data.TestParameters, inputData.masterData.TestParameters, 'ntransactionresultcode'),\r\n                                RESelectedSubSample: inputData.masterData.RESelectedSubSample\r\n                            },\r\n                            loading: false,\r\n                            activeTestKey: \"IDS_RESULTS\",\r\n                            openModal: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            openModal: false,\r\n                            loadEsign: false\r\n                        }\r\n                    })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    } else {\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTTESTTOCOMPLETE\"\r\n        }));\r\n    }\r\n\r\n}\r\n\r\nexport function getFormula(parameterData, userInfo, masterData, index, selectedRecord) {\r\n    return function (dispatch) {\r\n\r\n        let inputParamData = {\r\n            ntransactiontestcode: parameterData.ntransactiontestcode,\r\n            nformulacode: parameterData.ntestgrouptestformulacode,\r\n            userinfo: userInfo,\r\n            npreregno: parameterData.npreregno,\r\n            ntransactionsamplecode: parameterData.ntransactionsamplecode\r\n        }\r\n\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getFormulaInputs\", inputParamData)\r\n            .then(response => {\r\n\r\n                const validateFormulaMandyFields = response.data.DynamicFormulaFields.map((item, index) => {\r\n                    return {\r\n                        \"idsName\": \"IDS_FILLALLFIELDS\",\r\n                        \"dataField\": index,\r\n                        \"mandatory\": true\r\n                    }\r\n                });\r\n\r\n                let selectedForumulaInput = [];\r\n                let selectedForumulaInput1 = [];\r\n                let selectedMandatory = [];\r\n   //           selectedRecord.ResultParameter = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\r\n\r\n                response.data.DynamicFormulaFields.map((fields, index) => {\r\n                    let dynamicformulafields = {};\r\n                    let selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedRecord.ResultParameter, fields.ndynamicformulafieldcode, \"ntestparametercode\");\r\n\r\n                    if (selectedTestParameters.length > 0) {\r\n\r\n                        selectedTestParameters = selectedTestParameters.filter(element => {\r\n                            return element.sresult !== null && element.sresult != ''\r\n                        });\r\n\r\n                        const nisaverageneed = selectedTestParameters.length;\r\n\r\n                        const maxResultCode = selectedTestParameters.length > 0 ? Math.max(...selectedTestParameters.map(o => o.ntransactionresultcode)) : -1;\r\n\r\n\r\n                        // const maxResultCode= Math.max(...(selectedTestParameters.filter(element => {\r\n                        //                 return element.sresult !== null && element.sresult !='';\r\n                        //               }).map(o => o.ntransactionresultcode)));\r\n\r\n                        const paramValue = getRecordBasedOnPrimaryKeyName(selectedTestParameters, maxResultCode, \"ntransactionresultcode\");\r\n                        if (paramValue.length == 0) {\r\n                            dynamicformulafields.svalues = \"\";\r\n                            dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                            //dynamicformulafields.nisaverageneed = 0;\r\n                            dynamicformulafields.senableAverage = false;\r\n                            response.data.DynamicFormulaFields[index].nisaverageneed = 0; \r\n                            selectedForumulaInput.push(dynamicformulafields);\r\n                            selectedMandatory.push(\"\");\r\n\r\n                        }\r\n                        else {\r\n                            if ((maxResultCode >= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false)\r\n                                || (response.data.DynamicFormulaFields[index].svalue != \"\" && response.data.DynamicFormulaFields[index].svalue != null\r\n                                    ? maxResultCode <= response.data.DynamicFormulaFields[index].ntransactionresultcode && paramValue.length > 0 ? paramValue[0].sresult != \"\" : false : \"\")) {\r\n                                dynamicformulafields.svalues = paramValue[0].sresult;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                //dynamicformulafields.nisaverageneed = nisaverageneed;\r\n                                dynamicformulafields.senableAverage = false;\r\n                                response.data.DynamicFormulaFields[index].nisaverageneed = nisaverageneed; \r\n                                selectedForumulaInput.push(dynamicformulafields);\r\n                                selectedMandatory.push(paramValue[0].sresult);\r\n                            }\r\n                            else {\r\n                                dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\r\n                                dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                                // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\r\n                                dynamicformulafields.senableAverage = false;\r\n                                selectedForumulaInput.push(dynamicformulafields);\r\n                                selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    else {\r\n                        dynamicformulafields.svalues = response.data.DynamicFormulaFields[index].svalue;\r\n                        dynamicformulafields.sparameter = response.data.DynamicFormulaFields[index].sdescription;\r\n                        // dynamicformulafields.nisaverageneed = response.data.DynamicFormulaFields[index].nisaverageneed;\r\n                        selectedForumulaInput.push(dynamicformulafields);\r\n                        selectedMandatory.push(response.data.DynamicFormulaFields[index].svalue);\r\n                    }\r\n                    return selectedForumulaInput1.push(selectedRecord.ResultParameter.filter(x => x.ntestparametercode === fields.ndynamicformulafieldcode)[0])\r\n\r\n\r\n                });\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecord,\r\n                            parameterData: parameterData,\r\n                            naverageroundingdigits: parameterData.nroundingdigits,\r\n                            sformulacalculationdetail: response.data.query,\r\n                            formulainput: response.data.Formula,\r\n                            resultindex: index,\r\n                            DynamicFormulaFields: response.data.DynamicFormulaFields,\r\n                            //selectedForumulaInput: []\r\n                            //  DynamicFormulaFields.map((fields, index) => {\r\n                            //     return {\r\n                            //         selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\r\n\r\n                            //     }\r\n\r\n                            //  });\r\n                            // response.data.DynamicFields.map((fields, index) =>\r\n                            selectedForumulaInput,\r\n                            selectedMandatory\r\n                            // selectedForumulaInput:  selectedRecord.ResultParameter.filter(x=>x.ntestparametercode===response.data.DynamicFormulaFields)\r\n                            // )\r\n                        },\r\n                        validateFormulaMandyFields,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTFORMULA\",\r\n                        showFormula: true,\r\n                        operation: \"validate\",\r\n                        showValidate: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function calculateFormula(inputDataValue) {\r\n    return function (dispatch) {\r\n        const inputData = {\r\n            ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\r\n            ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\r\n            npreregno: inputDataValue.selectedRecord.parameterData.npreregno,\r\n            sformulacalculationcode: inputDataValue.selectedRecord.sformulacalculationdetail,\r\n            nformulacode: inputDataValue.selectedRecord.parameterData.ntestgrouptestformulacode,\r\n            userinfo: inputDataValue.userInfo,\r\n            dynamicformulafields: inputDataValue.lstDynamicFields,\r\n        }\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testmaster/calculateFormula\", inputData)\r\n            .then(response => {\r\n\r\n                // inputDataValue.selectedResultData[inputDataValue.selectedRecord.resultindex] =\r\n                // {\r\n                //     ntransactionresultcode: inputDataValue.selectedRecord.parameterData.ntransactionresultcode,\r\n                //     ntransactiontestcode: inputDataValue.selectedRecord.parameterData.ntransactiontestcode,\r\n                //     nparametertypecode: inputDataValue.selectedRecord.parameterData.nparametertypecode,\r\n                //     sresult: response.data.Result,\r\n                //     nroundingdigit: inputDataValue.selectedRecord.parameterData.nroundingdigits,\r\n                //     value: inputDataValue.selectedRecord.parameterData.ngradecode,\r\n                //     parameter: inputDataValue.selectedRecord.parameterData\r\n                // }\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sfinal\"] = response.data.Result;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"sresult\"] = response.data.Result;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex]['editable'] = true;\r\n                inputDataValue.ResultParameter[inputDataValue.selectedRecord.resultindex][\"ncalculatedresult\"] = 3;\r\n                inputDataValue.selectedResultGrade[inputDataValue.selectedRecord.resultindex] = {\r\n                    ngradecode: numericGrade(inputDataValue.selectedRecord.parameterData, parseInt(response.data.Result))\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputDataValue.masterData,\r\n                            //selectedResultData: inputDataValue.selectedResultData,\r\n                            //selectedResultGrade: inputDataValue.selectedResultGrade,\r\n                            //ResultParameter: inputDataValue.ResultParameter\r\n                        },\r\n                        selectedRecord: {\r\n                            selectedResultGrade: inputDataValue.selectedResultGrade,\r\n                            ResultParameter: inputDataValue.ResultParameter\r\n                        },\r\n                          parameterResults:inputDataValue.ResultParameter,\r\n                        isParameterInitialRender:true,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTENTRY\",\r\n                        showFormula: false,\r\n                        operation: \"update\",\r\n                        showValidate: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    //toast.warn(error.response.data);\r\n                    toast.warn(error.response.data[\"Result\"]);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterTestData(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultFilterStatus: inputData.defaultFilterStatus,\r\n                            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getREFilterTemplate(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedOnCombo\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function updateTestMethodSource(inputData, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/updateTestMethodSource\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            RE_TEST: replaceUpdatedObject(response.data.RE_TEST, masterData.RE_TEST, 'ntransactiontestcode')\r\n                        },\r\n                        loading: false,\r\n                        openModal: false,\r\n                        loadEsign: false\r\n\r\n                        // activeTestKey: \"IDS_RESULTS\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function resultImportFile(inputParam, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getImportResultEntry\",inputParam.formData)\r\n            .then(response => {\r\n\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData\r\n                        },\r\n                        loading: false,\r\n                        openModal: false,\r\n                        // activeTestKey: \"IDS_RESULTS\"\r\n                    }\r\n                })\r\n\r\n                if (response.data.returnStatus && response.data.returnStatus !== \"\") {\r\n                    toast.info(intl.formatMessage({ id: response.data.returnStatus }));\r\n                }\r\n                else {\r\n                    toast.warn(intl.formatMessage({ id: response.data.returnStatus}));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function validateEsignCredentialComplete(inputParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"login/validateEsignCredential\", inputParam.inputData)\r\n            .then(response => {\r\n                if (response.data === \"Success\") {\r\n\r\n\r\n\r\n                    const methodUrl = \"performaction\"\r\n                    inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"userinfo\"] = inputParam.inputData.userinfo;\r\n\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()] &&\r\n                        inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"]) {\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignpassword\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esigncomments\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"esignreason\"];\r\n                        delete inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][methodUrl.toLowerCase()][\"agree\"];\r\n                    }\r\n                    if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"testinitiate\") {\r\n                        dispatch(testStart(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo))\r\n                    }\r\n                    else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"complete\") {\r\n                        dispatch(completeTest(inputParam[\"screenData\"][\"inputParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam.inputData.userinfo,'','',{basedrulesengine:inputParam[\"screenData\"][\"inputParam\"][\"basedrulesengine\"]}))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"default\") {\r\n                        dispatch(defaultTest(inputParam[\"screenData\"][\"inputParam\"][\"testChildGetREParam\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedTest\"], inputParam[\"screenData\"][\"inputParam\"][\"RESelectedSample\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregtypecode\"], inputParam[\"screenData\"][\"inputParam\"][\"inputData\"][\"nregsubtypecode\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteInstrument\") {\r\n                        dispatch(deleteInstrumentRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"createMethod\") {\r\n                        dispatch(updateTestMethodSource(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"deleteTask\") {\r\n                        dispatch(deleteTaskRecord(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"inputParam\"][\"operation\"] === \"updateParameterComments\") {\r\n                        dispatch(updateParameterComments(inputParam[\"screenData\"][\"inputParam\"][\"inputData\"], inputParam[\"screenData\"][\"inputParam\"][\"masterData\"]))\r\n                    } else if (inputParam[\"screenData\"][\"operation\"] === \"updatechecklist\") {\r\n                        let { selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode } = inputParam[\"screenData\"];\r\n                        delete selectedRecord.esignpassword;\r\n                        delete selectedRecord.esigncomments;\r\n                        delete selectedRecord.esignreason;\r\n                        delete selectedRecord.agree;\r\n                        delete inputParam.inputData.password;\r\n                        userInfo = inputParam.inputData.userinfo;\r\n                        dispatch(onSaveCheckList(selectedRecord, userInfo, nregtypecode, nregsubtypecode, ndesigntemplatemappingcode))\r\n                    }\r\n\t\t//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\n                    else if(inputParam[\"screenData\"][\"inputParam\"][\"operation\"] ===\"updateSection\"){\r\n                        dispatch(updateSectionTest(inputParam[\"screenData\"][\"inputParam\"]))\r\n \r\n                    }\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\nexport function getMeanCalculationTestParameter(meanParam) {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        const inputData = {\r\n            npreregno: meanParam.selectedRecord.npreregno,\r\n            ntransactionresultcode: meanParam.selectedRecord.ntransactionresultcode,\r\n            userinfo: meanParam.userInfo\r\n        }\r\n        return rsapi.post(\"resultentrybysample/getMeanCalculationTestParameter\", inputData)\r\n            .then(response => {\r\n\r\n                const list = response.data || [];\r\n                // const optionList = [];\r\n                // list.map(item=>{\r\n                //     console.log(\"item:\", item);\r\n                //         optionList.push({item:item, \r\n                //                         label:\"[\"+item.stestsynonym+\"]-[\"+item.sparametersynonym+\"]-[\"+item.sresult+\"]\", \r\n                //                         value:item.ntransactionresultcode})\r\n                //     })\r\n                // const masterData = {...masterData, ResultParameter:meanParam.selectedRecord}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false, openModal: true,\r\n                        meanTestParameterList: list,\r\n                        screenName: \"IDS_MEANPARAMETER\",\r\n                        ncontrolcode: meanParam.ncontrolCode,\r\n                        selectedTestParameterMean: meanParam.selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    };\r\n}\r\n\r\n/*export function deleteResultUsedMaterial(inputData) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            nresultusedinstrumentcode: inputData.selectedRecord.nresultusedinstrumentcode,\r\n            userinfo: inputData.userInfo,\r\n            ntransactiontestcode: inputData.masterData.RESelectedTest ?\r\n                inputData.masterData.RESelectedTest.map(test => test.ntransactiontestcode).join(\",\").toString() : \"\",\r\n            nregtypecode: inputData.masterData.defaultRegistrationType.nregtypecode,\r\n            nregsubtypecode: inputData.masterData.defaultRegistrationSubType.nregsubtypecode\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/deleteResultUsedMaterial\", inputParamData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false,\r\n                        operation: \"delete\",\r\n                        openModal: false,\r\n                        loadEsign: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}*/\r\nexport function getAverageResult(parameterData, index, selectedForumulaInput, userInfo, masterData, selectedRecord) {\r\n    return function (dispatch) {\r\n    \r\n        let selectedTestParameters = selectedRecord.ResultParameter.filter(element => {\r\n            return element.editable == true;\r\n        });\r\n\r\n        selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, selectedRecord.parameterData.ntransactionsamplecode, \"ntransactionsamplecode\");\r\n        selectedTestParameters = getRecordBasedOnPrimaryKeyName(selectedTestParameters, parameterData.ndynamicformulafieldcode, \"ntestparametercode\");\r\n\r\n        let ResultParameterNew = [];\r\n        if (selectedTestParameters.length > 0) {\r\n            selectedTestParameters.map(Parameter => {\r\n                let resultParameterValues = {};\r\n                resultParameterValues.ntransactionresultcode = Parameter.ntransactionresultcode;\r\n                resultParameterValues.sresult = Parameter.sresult;\r\n                resultParameterValues.ntestparametercode = Parameter.ntestparametercode;\r\n                ResultParameterNew.push(resultParameterValues);\r\n            })\r\n\r\n        }\r\n\r\n        let inputParamData = {\r\n            naverageroundingdigits: selectedRecord.naverageroundingdigits,\r\n            ntransactiontestcode: parameterData.ntransactiontestcode,\r\n            ntestparametercode: parameterData.ndynamicformulafieldcode,\r\n            userinfo: userInfo,\r\n            ntransactionsamplecode: parameterData.ntransactionsamplecode,\r\n            ResultParameter: ResultParameterNew\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAverageResult\", inputParamData)\r\n            .then(response => {\r\n                selectedForumulaInput[index].soldvalue =  selectedForumulaInput[index].svalues;\r\n                selectedForumulaInput[index].svalues = response.data.AverageResult.sresult;\r\n                selectedForumulaInput[index].senableAverage = true;\r\n                //selectedForumulaInput[index].svaluesold = \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                        },\r\n                        selectedRecord: {\r\n                            ...selectedRecord,\r\n                            selectedForumulaInput\r\n                        },\r\n                        // selectedRecord: {\r\n                        //     ...selectedRecord,\r\n                        //     parameterData: parameterData,\r\n                        //     sformulacalculationdetail: response.data.query,\r\n                        //     formulainput: response.data.Formula,\r\n                        //     resultindex: index,\r\n                        //     selectedForumulaInput,\r\n                        //     selectedMandatory\r\n                        // },\r\n                        // validateFormulaMandyFields,\r\n                        loading: false,\r\n                        screenName: \"IDS_RESULTFORMULA\",\r\n                        showFormula: true,\r\n                        operation: \"validate\",\r\n                        showValidate: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n// export function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\r\n//     return function (dispatch) {\r\n//         let inputParamData = {\r\n//             ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\r\n//         }\r\n//         dispatch(initRequest(true));\r\n//         rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\r\n//             .then(response => {\r\n//                 let showMultiSelectCombo=false;  \r\n//                 let ResultParameter=selectedRecord['ResultParameter']\r\n//                 let onlyAlertMsgAvailable=false; \r\n//                 let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\r\n//                 if(inputData['nneedsubcodedresult']===transactionStatus.YES){\r\n//                     showMultiSelectCombo=true\r\n//                     masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \r\n//                 }\r\n//                 else\r\n//                 {\r\n//                     onlyAlertMsgAvailable=true; \r\n//                 }\r\n//                // ResultParameter.map(Parameter=>\r\n//                     for(const Parameter of ResultParameter) \r\n//                     {\r\n//                         if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\r\n//                             let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\r\n//                             Parameter.additionalInfoUidata\r\n//                             if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\r\n//                             Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\r\n//                             if(Parameter.additionalInfoUidata){\r\n//                                 selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \r\n//                                 break;\r\n//                             }\r\n//                             }else{\r\n//                             if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\r\n//                                 delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \r\n//                             }\r\n//                             }\r\n//                         }\r\n                       \r\n//                     };  \r\n//                 masterData['salertmessage']=inputData.salertmessage \r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: { \r\n//                         loading: false,\r\n//                         masterData, \r\n//                         showAlertGrid: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\r\n//                          showAlertForPredefined: true,\r\n//                          showMultiSelectCombo,\r\n//                          onlyAlertMsgAvailable,\r\n//                          additionalInfoView:false,\r\n//                          selectedRecord,\r\n//                          currentAlertResultCode,\r\n//                          currentntestgrouptestpredefcode\r\n//                     }\r\n//                 })\r\n//             })\r\n//             .catch(error => {\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN,\r\n//                     payload: {\r\n//                         loading: false\r\n//                     }\r\n//                 })\r\n//                 if (error.response.status === 500) {\r\n//                     toast.error(error.message);\r\n//                 } else {\r\n//                     toast.warn(error.response.data);\r\n//                 }\r\n//             })\r\n//     }\r\n\r\n// }\r\n\r\nexport function getPredefinedData(inputData,selectedRecord,currentAlertResultCode,masterData,currentntestgrouptestpredefcode) {\r\n    return function (dispatch) {\r\n        let inputParamData = {\r\n            ntestgrouptestpredefcode: inputData.ntestgrouptestpredefcode,\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getPredefinedData\", inputParamData)\r\n            .then(response => {\r\n                let showMultiSelectCombo=false;  \r\n                let ResultParameter=selectedRecord['ResultParameter']\r\n                let onlyAlertMsgAvailable=false; \r\n                let testgrouptestpredefsubresult=response.data['testgrouptestpredefsubresult']\r\n                if(inputData['nneedsubcodedresult']===transactionStatus.YES){\r\n                    showMultiSelectCombo=true\r\n                    masterData['testgrouptestpredefsubresultOptions']=testgrouptestpredefsubresult  \r\n                }\r\n                else\r\n                {\r\n                    onlyAlertMsgAvailable=true; \r\n                }\r\n               // ResultParameter.map(Parameter=>\r\n                    for(const Parameter of ResultParameter) \r\n                    {\r\n                        if(Parameter.additionalInfoUidata||Parameter.additionalInfoUidata===\"\"){\r\n                            let additionalInfoUidata=typeof Parameter.additionalInfoUidata==='string'?Parameter.additionalInfoUidata===\"\"?\"\":JSON.parse(Parameter.additionalInfoUidata) :\r\n                            Parameter.additionalInfoUidata\r\n                            if(Parameter['ntransactionresultcode']===currentAlertResultCode&&\r\n                            Parameter['ntestgrouptestpredefcode']===inputData['ntestgrouptestpredefcode']){\r\n                            if(Parameter.additionalInfoUidata){\r\n                                selectedRecord[\"ntestgrouptestpredefsubcode\"]=additionalInfoUidata['ntestgrouptestpredefsubcode'] \r\n                                break;\r\n                            }\r\n                            }else{\r\n                            if(selectedRecord[\"ntestgrouptestpredefsubcode\"]){\r\n                                delete selectedRecord[\"ntestgrouptestpredefsubcode\"] \r\n                            }\r\n                            }\r\n                        }\r\n                       \r\n                    };  \r\n                masterData['salertmessage']=inputData.salertmessage \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: { \r\n                        loading: false,\r\n                       masterData, \r\n                        showAlert: inputData.nneedresultentryalert===transactionStatus.NO?false:true,\r\n                         showAlertForPredefined: true,\r\n                         showMultiSelectCombo,\r\n                         onlyAlertMsgAvailable,\r\n                         additionalInfoView:false,\r\n                         selectedRecord,\r\n                         currentAlertResultCode,\r\n                         currentntestgrouptestpredefcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function getELNTestValidation(inputData,integrationSettings) {\r\n    return function (dispatch) {\r\n        //console.log(localStorage);\r\n        //localStorage.removeItem(\"linkedorder\");\r\n        const inputs = {npreregno:inputData.test.npreregno, \r\n            ntransactiontestcode:inputData.test. ntransactiontestcode,\r\n            userInfo:inputData.userInfo\r\n\r\n        }\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getELNTestValidation\", inputs)\r\n            .then(response => {\r\n                let enlLink = \"\";\r\n                if(response.data)\r\n                {\r\n                    \r\n                        let link = \"\";\r\n                    \r\n                        let detail = CF_encryptionData(\"-1//Sheet\").EncryptData;\r\n                        // let encryptedbatchid = CF_encryptionData(inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-' + inputData.test.ntestcode +'-' + inputData.userInfo.nsitecode).EncryptData;\r\n                        //let encryptedbatchid = CF_encryptionData(\"TR-23-0014-TR-23-0014-01-TestNew\").EncryptData;\r\n                       // let encryptedbatchid = CF_encryptionData(inputData.test.sarno +'-' +inputData.test.ssamplearno +'-'+ inputData.test.stestsynonym+'-'+inputData.userInfo.ssitename).EncryptData;\r\n                       \r\n                       const settedId = inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode;\r\n                       //console.log(settedId);\r\n                       let encryptedbatchid = CF_encryptionData(settedId).EncryptData;\r\n                        const userObject = {\r\n                            usercode: inputData.elnUserInfo.nelncode,\r\n                            username: inputData.elnUserInfo.selnuserid,\r\n                            userfullname: inputData.elnUserInfo.selnusername,\r\n                            lsusergroup: {\r\n                            usergroupcode: inputData.elnUserInfo.nelnusergroupcode,\r\n                            usergroupname: inputData.elnUserInfo.nelnusergroupcode,\r\n                            },\r\n                            lssitemaster:{\r\n                            sitecode: inputData.elnSite.nelnsitecode\r\n                            }\r\n                        }\r\n                        let encrypteduser = CF_encryptionData(userObject).EncryptData;\r\n                        \r\n                        //const baseURL = \"http://localhost:9090/ELN\";\r\n                        const baseURL = integrationSettings[1].slinkname\r\n                        \r\n                        link = baseURL + \"/vieworder\" + '#{\"d\":\"' + settedId + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\r\n                        // let a=\"/vieworder\" + '#{\"d\":\"' + inputData.test.npreregno +'-' +inputData.test.ntransactionsamplecode +'-'+ inputData.test.ntestcode+'-'+ inputData.test.ntestrepeatno+'-'+ inputData.test.ntestretestno+'-'+inputData.userInfo.nsitecode + '\",\"user\":\"' + encrypteduser + '\",\"batchid\":\"' + encryptedbatchid + '\"}';\r\n                        // // return link;\r\n                        // //   }\r\n                        // let hashobject = JSON.parse(a);\r\n   //                     let batchid = \"\";\r\n\r\n//  if (link.batchid !== undefined) {\r\n\r\n// // eslint-disable-next-line no-useless-escape\r\n\r\n// batchid = CF_decrypt(link.batchid ).replaceAll('\\\"', '');\r\n\r\n//  }\r\n                        \r\n                       // const encrypteduser1 = CF_decrypt(link);\r\n                        //enlLink = link;\r\n                       // console.log(\"--->\"+link);\r\n                        //console.log(\"--->\"+batchid);\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData.masterData,\r\n                                    //defaultSampleType: inputData.defaultSampleType,\r\n                                    ...response.data,\r\n                                    enlLink:link\r\n                                },\r\n                                openELNSheet: true,\r\n                                loading: false,\r\n                                enlLink:link\r\n                               // enlLink:enlLink\r\n                            }\r\n                        })\r\n                         //enlLink = \"https://logilabelntest.azurewebsites.net/vieworder\".concat(link);    \r\n\r\n\r\n\r\n\r\n                }else{\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_NOSHEETFORTHISTEST\"\r\n                    }));\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                //defaultSampleType: inputData.defaultSampleType,\r\n                                ...response.data,\r\n                                enlLink:\"\"\r\n                            },\r\n                            enlLink:\"\",\r\n                            loading: false\r\n                            \r\n                        }\r\n                    })\r\n                }\r\n               \r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getConfigurationFilter(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getConfigurationFilter\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                            // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getTestBasedBatchWorklist(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getTestBasedBatchWorklist\", inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...response.data,\r\n                           // defaultTestvalues: inputData.defaultTestvalues //,\r\n                            // defaultRegistrationSubType: inputData.masterData.defaultRegistrationSubType,//inputData.defaultRegistrationSubType,\r\n                            // ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                            // DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function addREAdhocParamter(inputDataObj) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getAdhocParamter\", inputDataObj)\r\n            .then(response => {\r\n\r\n                let AdhocParamter = constructOptionList(response.data['AdhocParamter'] || [], 'ntestparametercode', 'sparametersynonym',\r\n                undefined, undefined, undefined);\r\n                AdhocParamter = AdhocParamter.get(\"OptionList\");\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputDataObj.masterData,\r\n                            AdhocParamter : AdhocParamter\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\r\n                        adhocpreregno:inputDataObj.npreregno,\r\n                        openModal:true,\r\n                        operation:\"IDS_ADD\",\r\n                        selectedRecord:{},\r\n                        adhocId:inputDataObj.adhocId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function createAdhocParamter(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/createAdhocParamter\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputParam.inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        openModal:false,\r\n                        activeTestTab: \"IDS_RESULTS\",\r\n                        activeTabIndex:1\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function enforceResult(inputParam,userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let url = [];\r\n        url.push(rsapi.post(\"/grade/getGrade\", {\r\n            userinfo: userInfo\r\n        }));\r\n        url.push(rsapi.post(\"resultentrybysample/getenforceResult\", {\r\n            ncontrolcode:inputParam['ncontrolcode'],\r\n            ntransactiontestcode:inputParam['dataItem']['ntransactiontestcode'],\r\n            ntransactionresultcode:inputParam['dataItem']['ntransactionresultcode'],\r\n            userinfo: userInfo\r\n        })); \r\n       Axios.all(url)\r\n       .then(response => {\r\n        const Grade = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, false); \r\n        let selectedRecord={}\r\n                let savedResultparameter=response[1].data['savedResultparameter']\r\n                   selectedRecord=//savedResultparameter['sgradename']&&savedResultparameter['sgradename']!=='NA'?\r\n                 {\r\n                        'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\r\n                        // 'ngradecode':{\r\n                        //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\r\n                        //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\r\n                        // } ,\r\n                        'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\r\n                        ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\r\n                        ntransactiontestcode:savedResultparameter['ntransactiontestcode']\r\n                   }\r\n            //        : {\r\n            //         'senforceresult':savedResultparameter['sfinal']&&savedResultparameter['sfinal'],\r\n            //         'senforceresultcomment':savedResultparameter['senforceresultcomment']&&savedResultparameter['senforceresultcomment'],\r\n            //         // 'ngradecode':{\r\n            //         //     'label':savedResultparameter['sgradename']&&savedResultparameter['sgradename'],\r\n            //         //     'value': savedResultparameter['ngradecode']&&savedResultparameter['ngradecode']\r\n            //         // } ,\r\n            //         ntransactionresultcode:savedResultparameter['ntransactionresultcode'],\r\n            //         ntransactiontestcode:savedResultparameter['ntransactiontestcode']\r\n            //    };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            'GradeList':Grade.get(\"OptionList\") , \r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        },\r\n                        ncontrolcode:inputParam['ncontrolcode'],\r\n                        selectedRecord,\r\n                        screenName: \"IDS_ENFORCERESULT\",\r\n                        openModal: true, \r\n                        operation: \"update\",  \r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function ResultEntryViewPatientDetails(masterData, screenName, userInfo, viewdetails) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const selectedRecord={\r\n            ntestcode:viewdetails.test.ntestcode\r\n        }\r\n        rsapi.post(\"worklist/getSampleViewDetails\", { selectedRecord, PatientId:viewdetails.test.PatientId, npreregno: viewdetails.test.npreregno, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData['AuditModifiedComments'] = [];\r\n                masterData['AuditModifiedComments'] = response.data['AuditModifiedComments']\r\n                masterData['viewdetails'] = [];\r\n                masterData['viewdetails'] = response.data['viewdetails'][0]\r\n                //sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        screenName: \"IDS_PREVIOUSRESULTVIEW\",\r\n                        operation: \"\",\r\n                        loading: false,\r\n                        openModal: true,\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function resultEntryGetParameter(selectedRecord,inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    if(inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let selectedSpecification=selectedRecord.selectedSpecification\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode:(acceptTestList[0].ntransactiontestcode).toString(),\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    nallottedspeccode:selectedRecord.nallottedspeccode.value,\r\n                    nspecsampletypecode:selectedRecord.ncomponentcode.value,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryParameter\", inputParamData)\r\n                    .then(response => {\r\n                    //     const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                    //     \"scomponentname\", undefined, undefined, false);\r\n                    // const Component = ComponentMap.get(\"OptionList\");\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    \r\n                                    ...response.data,\r\n                                    paremterResultcode\r\n                                    \r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    ResultParameter: response.data.ResultParameter ,selectedSpecification:selectedSpecification,\r\n                                    nallottedspeccode:selectedRecord.nallottedspeccode,ncomponentcode:selectedRecord.ncomponentcode\r\n                                    ,selectedComponent:selectedRecord.selectedComponent\r\n                                },\r\n                                selectedsubcode:undefined ,\r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}else{\r\n    toast.warn(intl.formatMessage({\r\n        id: \"IDS_SELECTVALIDTEST\"\r\n    }));\r\n}\r\n\r\n}\r\n\r\n\r\nexport function resultEntryGetSpec(inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    \r\n    return function (dispatch) {\r\n        if(inputData.realTestcodeValue.length!==0 && inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n        let additionalInfo=[]\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        \r\n       \r\n           \r\n                let inputParamData = {\r\n                    nregsubtypecode:inputData.realRegSubTypeValue.nregsubtypecode,\r\n                    nregtypecode:inputData.realRegSubTypeValue.nregtypecode,\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntrySpec\", inputParamData)\r\n                    .then(response => {\r\n\r\n                        const allottedspeccode={\r\n                            value:response.data.nallottedspeccode[\"nallottedspeccode\"],\r\n                        label: response.data.nallottedspeccode[\"sspecname\"]\r\n                        };\r\n                       \r\n                        \r\n                        const componentcode={\r\n                            value:response.data.ncomponentcode[\"ncomponentcode\"],\r\n                            label: response.data.ncomponentcode[\"scomponentname\"]\r\n                        };\r\n                        // componentcode.push({\r\n                        //     \"value\":response.data.ncomponentcode[\"ncomponentcode\"],\r\n                        //     \"label\": response.data.ncomponentcode[\"scomponentname\"]\r\n                        // });\r\n                        \r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n                        const SpecificationMap = constructOptionList(response.data[\"Specification\"] || [], \"nallottedspeccode\",\r\n                        \"sspecname\", undefined, undefined, false);\r\n                    const Specification = SpecificationMap.get(\"OptionList\");\r\n\r\n                    const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                    \"scomponentname\", undefined, undefined, false);\r\n                const Component = ComponentMap.get(\"OptionList\");\r\n                        \r\n                       \r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    //...sortData(response.data,\"desc\",\"ntransactiontestcode\"),\r\n                                    ...response.data,\r\n                                    paremterResultcode,\r\n                                    selectedSpecification:Specification,\r\n                                    selectedComponent:Component,\r\n                                    \r\n                                    \r\n                                    //selectedResultGrade ,\r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,selectedSpecification:Specification\r\n                                    ,selectedComponent:Component,                                   \r\n                                     ResultParameter: response.data.ResultParameter ,nallottedspeccode:allottedspeccode\r\n                                    ,ncomponentcode:componentcode\r\n                                     //nallottedspeccode:selectedRecord.nallottedspeccode\r\n\r\n                                   \r\n                                },\r\n                                 \r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n          \r\n      \r\n    }\r\n    else{\r\n\r\n\r\n        dispatch({\r\n            type: DEFAULT_RETURN,\r\n            payload: {\r\n                loading: false\r\n            }\r\n        })\r\n        toast.warn(intl.formatMessage({\r\n            id: \"IDS_SELECTVALIDTEST\"\r\n        }));\r\n    \r\n    }\r\n\r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function resultEntryGetComponent(selectedRecord,inputData, userInfo, ncontrolcode, testskip, testtake) {\r\n\r\n    if(inputData.realTestcodeValue.ntestcode!==0)\r\n    {\r\n    return function (dispatch) {\r\n        let additionalInfo=[]\r\n        let selectedSpecification=selectedRecord.selectedSpecification\r\n        let TestList = inputData.searchedTest ? [...inputData.searchedTest] : [...inputData.RE_TEST];\r\n        TestList = TestList.splice(testskip, testskip + testtake);\r\n        let acceptTestList = getSameRecordFromTwoArrays(TestList, inputData.RESelectedTest, \"ntransactiontestcode\");\r\n        if (acceptTestList && acceptTestList.length > 0) {\r\n            if (Object.values(inputData).length > 0 && inputData.RESelectedTest.length > 0) {\r\n                let inputParamData = {\r\n                    ntransactiontestcode:(acceptTestList[0].ntransactiontestcode).toString(),\r\n                    ntestcode:inputData.realTestcodeValue.ntestcode,\r\n                    nallottedspeccode:selectedRecord.nallottedspeccode.value,\r\n                    userinfo: userInfo\r\n                }\r\n                dispatch(initRequest(true));\r\n                rsapi.post(\"resultentrybysample/getResultEntryComponent\", inputParamData)\r\n                    .then(response => {\r\n                        const ComponentMap = constructOptionList(response.data[\"Component\"] || [], \"ncomponentcode\",\r\n                        \"scomponentname\", undefined, undefined, false);\r\n                    const Component = ComponentMap.get(\"OptionList\");\r\n                    const componentcode={\r\n                        value:response.data.ncomponentcode[\"ncomponentcode\"],\r\n                        label: response.data.ncomponentcode[\"scomponentname\"]\r\n                    };\r\n                        let selectedResultGrade = [];\r\n                        let paremterResultcode = [];\r\n                        const parameterResults = response.data.ResultParameter\r\n                        let predefDefaultFlag = false;\r\n                        parameterResults.map((param, index) => {\r\n                            selectedResultGrade[index] = { ngradecode: param.ngradecode };\r\n                            paremterResultcode[index] = param.ntransactionresultcode;\r\n                            let jsondata=JSON.parse(param.jsondata['value'])\r\n                            if(jsondata.hasOwnProperty('additionalInfo')){\r\n                                additionalInfo[param.ntransactionresultcode]=jsondata['additionalInfo'] \r\n                            }  \r\n                            predefDefaultFlag = false;\r\n                            (response.data.PredefinedValues && response.data.PredefinedValues[parameterResults[index].ntransactionresultcode]) &&\r\n                                response.data.PredefinedValues[parameterResults[index].ntransactionresultcode].map(predefinedvalue => {\r\n                                    \r\n                                        if (!predefDefaultFlag) {\r\n                                            predefDefaultFlag = true;\r\n                                            response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] = constructOptionList(response.data.PredefinedValues[parameterResults[index].ntransactionresultcode] || [], 'sresultpredefinedname', 'sresultpredefinedname', undefined,\r\n                                                undefined, undefined).get(\"OptionList\");\r\n                                        }\r\n\r\n                                });\r\n                                param['editable'] = false;\r\n\r\n                        });\r\n\r\n\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                masterData: {\r\n                                    ...inputData,\r\n                                    \r\n                                    ...response.data,\r\n                                    paremterResultcode\r\n                                    \r\n\r\n                                },\r\n                                selectedRecord: {\r\n                                    additionalInfo:additionalInfo.length>0?additionalInfo:[],\r\n                                    selectedResultGrade: selectedResultGrade,\r\n                                    ResultParameter: response.data.ResultParameter ,selectedSpecification:selectedSpecification,\r\n                                    nallottedspeccode:selectedRecord.nallottedspeccode,selectedComponent:Component\r\n                                    ,ncomponentcode:componentcode\r\n                                },\r\n                                selectedsubcode:undefined ,\r\n                                  parameterResults:response.data.ResultParameter,\r\n                                  isParameterInitialRender:true,\r\n                                loading: false,\r\n                                screenName: \"IDS_RESULTENTRYPARAMETER\",\r\n                                openModal: true,\r\n                                operation: \"update\",\r\n                                activeTestKey: \"IDS_RESULTS\",\r\n                                ncontrolcode: ncontrolcode\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        dispatch({\r\n                            type: DEFAULT_RETURN,\r\n                            payload: {\r\n                                loading: false\r\n                            }\r\n                        })\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                    })\r\n                //}\r\n            } else {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n                }));\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    loading: false\r\n                }\r\n            })\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTTESTTOENTERRESULT\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}else{\r\n    toast.warn(intl.formatMessage({\r\n        id: \"IDS_SELECTVALIDTEST\"\r\n    }));\r\n}\r\n\r\n}\r\n\r\n\r\nexport function addREAdhocTestParamter(inputDataObj) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getAdhocTestParamter\", inputDataObj)\r\n            .then(response => {\r\n\r\n                let AdhocTestParamter = constructOptionList(response.data['TestParameter'] || [], 'ntestparametercode', 'sparametersynonym',\r\n                undefined, undefined, undefined);\r\n                AdhocTestParamter = AdhocTestParamter.get(\"OptionList\");\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputDataObj.masterData,\r\n                            AdhocParamter : AdhocTestParamter\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        adhoctransactiontestcode: inputDataObj.ntransactiontestcode,\r\n                        adhocpreregno:inputDataObj.npreregno,\r\n                        openModal:true,\r\n                        operation:\"IDS_ADD\",\r\n                        selectedRecordAdhocParameter:{},\r\n                        adhocId:inputDataObj.adhocId\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function createAdhocTestParamter(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/createAdhocTestParamter\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        masterData: {\r\n                            ...inputParam.inputData.masterData,\r\n                            ...response.data\r\n                        },\r\n                        screenName:'IDS_ADHOCPARAMETER',\r\n                        openModal:false,\r\n                        activeTestTab: \"IDS_RESULTS\",\r\n                        activeTabIndex:1,\r\n                        selectedRecordAdhocParameter:{}\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function CompletePopupAction(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getAnalysedUser\", inputParam.inputData)\r\n            .then(response => {\r\n                let selectedRecordCompleteForm ={};\r\n                const UsersMap = constructOptionList(response.data.Users || [], \"nusercode\",\"susername\", undefined, undefined, false);                \r\n                const Users = UsersMap.get(\"OptionList\");\r\n\r\n                selectedRecordCompleteForm[\"nusercode\"] = {\r\n                    \"value\": response.data.userCode,\r\n                    \"label\":  response.data.userName\r\n                };\r\n\r\n              \r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {                      \r\n                        Users,                      \r\n                        isOpen: true,\r\n                        operation: inputParam.inputData.operation,\r\n                        screenName: \"IDS_RESULTENTRYCOMPLETE\",\r\n                        openModal: true,\r\n                        ncontrolCode: inputParam.inputData.ncontrolcode,\r\n                        loading: false,\r\n                        isCompleteInitialRender:true,\r\n                        selectedRecordCompleteForm\r\n\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n//Added by sonia for ALPD-4084 on May 2 2024 Export action\r\nexport function exportAction(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"resultentrybysample/getExportData\", inputParam.inputData)\r\n            .then(response => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                let value = \"\";\r\n                if(response.data.rtn ===\"Success\"){\r\n                    value = response.data[\"ExportFileViewUrl\"];\r\n                    var win = window.open(value, '_blank');\r\n                    if (win) {\r\n                        win.focus();\r\n                    } else {\r\n                        intl.warn('IDS_PLEASEALLOWPOPUPSFORTHISWEBSITE');\r\n                    }\r\n                }else{\r\n                    if (response.data[\"rtn\"]) {\r\n                        toast.warn(intl.formatMessage({ id: response.data.rtn }));\r\n                      }\r\n                }\r\n\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\nexport function getSectionChange(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/getSectionChange\", inputParam.inputData\r\n        )\r\n            .then(response => {\r\n                let section = [];\r\n                //ALPD-4050\r\n                let selectedRecord={...inputParam.selectedRecord,nsectioncode:\"\"}\r\n                const sectionMap = constructOptionList(response.data.Section || [], \"nsectioncode\", \"ssectionname\", undefined, undefined, false);\r\n                section = sectionMap.get(\"OptionList\");\r\n           \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        section,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: true,operation:inputParam.inputData.operation,\r\n                        screenName:inputParam.inputData.screenName,\r\n                        ncontrolcode:inputParam.inputData.ncontrolcode,\r\n                        selectedRecord\r\n\r\n                    }\r\n                });\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\n//ALPD-4156--Vignesh R(15-05-2024)-->Result Entry - Option to change section for the test(s)\t\r\nexport function updateSectionTest(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"resultentrybysample/updateSectionTest\", inputParam.inputData\r\n        )\r\n            .then(response => {\r\n                if (response.data.rtn === undefined || response.data.rtn === \"Success\") {\r\n               \r\n            let responseData =   sortData(response.data, 'ascending', 'ntransactionresultcode')\r\n\r\n            let selectedRecord={...inputParam.selectedRecord,\"nsectioncode\":\"\"}\r\n            \r\n            responseData[\"RESelectedTest\"] = getSameRecordFromTwoArrays(responseData.RE_TEST,inputParam.RESelectedTest,\"ntransactiontestcode\");\r\n        //ALPD-4226--Vignesh R(24-05-2024)--Test is de-selected when changing the section\r\n            let selectedTestList=[];\r\n            if(responseData[\"RESelectedTest\"].length===0&&responseData.RE_TEST.length>0){\r\n                selectedTestList.push(responseData.RE_TEST[0]);\r\n                responseData[\"RESelectedTest\"]=selectedTestList;\r\n\r\n            }\r\n          \r\n            let masterData = {\r\n                        ...inputParam.inputData.masterData,\r\n                        ...responseData\r\n                        \r\n                    }\r\n                    let respObject = {\r\n                        ...inputParam.inputData,\r\n                        ...inputParam.inputData.masterData,\r\n                        masterData,\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showSample: undefined,\r\n                        selectedRecord\r\n                    }\r\n                    dispatch(postCRUDOrganiseTransSearch(inputParam.postParamList, respObject))\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false,\r\n                            loadEsign: false,\r\n                            openModal: false\r\n                        }\r\n                    });\r\n                    toast.warn(response.data.rtn);\r\n                }\r\n\r\n\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}