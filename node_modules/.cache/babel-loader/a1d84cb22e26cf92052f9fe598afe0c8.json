{"ast":null,"code":"import Axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { constructOptionList, sortData } from \"../components/CommonScript\";\nimport { transactionStatus } from \"../components/Enumeration\";\nimport rsapi from \"../rsapi\";\nimport { initRequest } from \"./LoginAction\";\nimport { intl } from '../components/App';\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nexport function getSeqNoFormats(inputObj, selectedRecord) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let URL = [rsapi.post('/registrationsubtype/getAllSeqNoFormats', {\n      userinfo: inputObj.userInfo\n    })];\n    URL.push(rsapi.post('/registrationsubtype/getPeriods', {\n      userinfo: inputObj.userInfo\n    }));\n    URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormats', {\n      userinfo: inputObj.userInfo\n    }));\n    URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormatsRelease', {\n      userinfo: inputObj.userInfo\n    }));\n    URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', {\n      userinfo: inputObj.userInfo\n    }));\n    Axios.all(URL).then(response => {\n      let periodMap = constructOptionList(response[1].data || [], 'nperiodcode', 'speriodname');\n      let periodList = periodMap.get(\"OptionList\");\n      const periodDefault = periodMap.get(\"DefaultValue\");\n\n      if (periodDefault !== undefined) {\n        selectedRecord = {\n          \"nperiodcode\": {\n            \"value\": periodDefault.value,\n            \"label\": periodDefault.label\n          }\n        };\n      }\n\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          existingFormats: response[0].data,\n          sitewiseexistingFormats: response[2].data,\n          sitewiseexistingFormatsRelease: response[3].data,\n          sreleaseexistingFormats: response[4].data,\n          periodList,\n          selectedRecord,\n          openChildModal: true,\n          loading: false,\n          operation: 'create',\n          screenName: \"Version\",\n          ncontrolcode: inputObj.ncontrolcode\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRegistrationSubTypeOnReload(userInfo, searchRef) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post('registrationsubtype/getRegistrationSubType', {\n      userinfo: userInfo\n    }).then(res => {\n      let masterData = { ...res.data\n      };\n\n      if (searchRef !== undefined && searchRef.current !== null) {\n        searchRef.current.value = \"\"; //masterData['searchedData'] = undefined\n      }\n\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false,\n          reloadData: true\n        }\n      });\n    }).catch(err => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      if (err.response.status === 500) toast.error(err.message);else toast.warn(err.response.data);\n    });\n  };\n}\nexport function getRegistrationSubTypeMaster(selectedSampleType, selectedRegType, masterData, userInfo, searchRef) {\n  return function (dispatch) {\n    if (selectedRegType.value === undefined) {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTALLVALUESINFILTER\"\n      }));\n    } else {\n      dispatch(initRequest(true));\n      rsapi.post('registrationsubtype/getRegistrationSubTypeMaster', {\n        nregtypecode: selectedRegType.value,\n        userinfo: userInfo\n      }).then(response => {\n        masterData = { ...masterData,\n          ...response.data\n        };\n\n        if (searchRef !== undefined && searchRef.current !== null) {\n          searchRef.current.value = \"\";\n          masterData['searchedData'] = undefined;\n        }\n\n        sortData(masterData);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            realSampleType: selectedSampleType,\n            realRegtype: selectedRegType,\n            loading: false\n          }\n        });\n      }).catch(err => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        if (err.response.status === 500) toast.error(err.message);else toast.warn(err.response.data);\n      });\n    }\n  };\n}\nexport function selectRegistrationSubType(selectedRegSubType, masterData, userInfo) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post('/registrationsubtype/getRegistrationSubTypeById', {\n      nregsubtypecode: selectedRegSubType.nregsubtypecode,\n      userinfo: userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data,\n        selectedRegistrationSubType: selectedRegSubType\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(err => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      if (err.response.status === 500) toast.error(err.message);else toast.warn(err.response.data);\n    });\n  };\n}\nexport function getEditRegSubType(nregsubtypecode, userInfo, ncontrolcode) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post('/registrationsubtype/getEditRegSubType', {\n      nregsubtypecode,\n      userinfo: userInfo\n    }).then(response => {\n      let selectedRecord = {\n        nregsubtypecode: response.data.nregsubtypecode,\n        nregtypecode: response.data.nregtypecode,\n        ...response.data.jsondata\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord,\n          loading: false,\n          openModal: true,\n          screenName: \"IDS_REGISTRATIONSUBTYPE\",\n          ncontrolcode,\n          operation: \"update\"\n        }\n      });\n    }).catch(err => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n      if (err.response.status === 500) toast.error(err.message);else toast.warn(err.response.data);\n    });\n  };\n}\nexport function getRegSubTypeDetails(inputObj) {\n  let {\n    version,\n    masterData,\n    userInfo\n  } = inputObj;\n  return function (dispatch) {\n    if (!(masterData.selectedVersion.nregsubtypeversioncode === version.nregsubtypeversioncode)) {\n      dispatch(initRequest(true));\n      rsapi.post('registrationsubtype/getVersionDetails', {\n        userinfo: userInfo,\n        nregsubtypeversioncode: version.nregsubtypeversioncode\n      }).then(res => {\n        masterData = { ...masterData,\n          selectedVersion: res.data\n        };\n        sortData(masterData);\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    }\n  };\n}\nexport function getVersionById(primaryKey, userInfo, ncontrolcode) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let URL = [];\n    URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormats', {\n      userinfo: userInfo\n    }));\n    URL.push(rsapi.post('/registrationsubtype/getPeriods', {\n      userinfo: userInfo\n    }));\n    URL.push(rsapi.post('registrationsubtype/getVersionDetails', {\n      userinfo: userInfo,\n      nregsubtypeversioncode: primaryKey\n    }));\n    Axios.all(URL).then(res => {\n      if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\n        let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\");\n        let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode);\n        let selectedRecord = {};\n        selectedRecord = { ...res[2].data.jsondata,\n          nperiodcode: nperiodcode[0],\n          nregsubtypeversioncode: primaryKey\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            existingFormats: res[0].data,\n            periodList,\n            selectedRecord,\n            openChildModal: true,\n            operation: 'update',\n            ncontrolcode,\n            loading: false,\n            screenName: \"Version\"\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            masterStatus: \"IDS_SELECTDRAFTRECORD\"\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getRegistrationTypeBySampleType(comboData, masterData, userInfo, realRegtype) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    rsapi.post('registrationtype/getRegistrationTypeBySampleType', {\n      nsampletypecode: comboData.value,\n      userinfo: userInfo\n    }).then(res => {\n      masterData = { ...masterData,\n        RegistrationTypes: res.data\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          selectedSampleType: comboData,\n          realRegtype,\n          loading: false,\n          reloadData: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function getVersionByReleaseNo(primaryKey, userInfo, ncontrolcode) {\n  return function (dispatch) {\n    dispatch(initRequest(true));\n    let URL = [];\n    URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', {\n      userinfo: userInfo\n    }));\n    URL.push(rsapi.post('/registrationsubtype/getPeriods', {\n      userinfo: userInfo\n    }));\n    URL.push(rsapi.post('registrationsubtype/getVersionDetailsByRelease', {\n      userinfo: userInfo,\n      nregsubtypeversioncode: primaryKey\n    }));\n    Axios.all(URL).then(res => {\n      if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\n        let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\");\n        let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode);\n        let selectedRecord = {};\n        selectedRecord = { ...res[2].data.jsondata,\n          nperiodcode: nperiodcode[0],\n          nregsubtypeversionreleasecode: res[2].data.nregsubtypeversionreleasecode\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            sreleaseexistingFormats: res[0].data,\n            periodList,\n            selectedRecord,\n            openChildModal: true,\n            operation: 'update',\n            ncontrolcode,\n            loading: false,\n            screenName: \"IDS_RELEASEARNO\"\n          }\n        });\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false,\n            masterStatus: \"IDS_SELECTDRAFTRECORD\"\n          }\n        });\n      }\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/actions/RegistrationSubTypeAction.js"],"names":["Axios","toast","constructOptionList","sortData","transactionStatus","rsapi","initRequest","intl","DEFAULT_RETURN","getSeqNoFormats","inputObj","selectedRecord","dispatch","URL","post","userinfo","userInfo","push","all","then","response","periodMap","data","periodList","get","periodDefault","undefined","value","label","type","payload","existingFormats","sitewiseexistingFormats","sitewiseexistingFormatsRelease","sreleaseexistingFormats","openChildModal","loading","operation","screenName","ncontrolcode","catch","error","status","message","warn","getRegistrationSubTypeOnReload","searchRef","res","masterData","current","reloadData","err","getRegistrationSubTypeMaster","selectedSampleType","selectedRegType","formatMessage","id","nregtypecode","realSampleType","realRegtype","selectRegistrationSubType","selectedRegSubType","nregsubtypecode","selectedRegistrationSubType","getEditRegSubType","jsondata","openModal","getRegSubTypeDetails","version","selectedVersion","nregsubtypeversioncode","getVersionById","primaryKey","ntransactionstatus","DRAFT","nperiodcode","filter","period","masterStatus","getRegistrationTypeBySampleType","comboData","nsampletypecode","RegistrationTypes","getVersionByReleaseNo","nregsubtypeversionreleasecode"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { constructOptionList, sortData } from \"../components/CommonScript\";\r\nimport { transactionStatus } from \"../components/Enumeration\";\r\nimport rsapi from \"../rsapi\"\r\nimport { initRequest } from \"./LoginAction\"\r\nimport { intl } from '../components/App';\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\n\r\nexport function getSeqNoFormats(inputObj,selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = [rsapi.post('/registrationsubtype/getAllSeqNoFormats', { userinfo: inputObj.userInfo })]\r\n\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormats', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormatsRelease', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', { userinfo: inputObj.userInfo }))\r\n\r\n        Axios.all(URL)\r\n            .then(response => {\r\n                let periodMap = constructOptionList(response[1].data || [], 'nperiodcode', 'speriodname');\r\n                let periodList = periodMap.get(\"OptionList\")\r\n                const periodDefault = periodMap.get(\"DefaultValue\");\r\n\r\n                if (periodDefault !== undefined) {\r\n                    selectedRecord = {\r\n                        \"nperiodcode\": {\r\n                            \"value\": periodDefault.value,\r\n                            \"label\": periodDefault.label\r\n                        },\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        existingFormats: response[0].data,\r\n                        sitewiseexistingFormats: response[2].data,\r\n                        sitewiseexistingFormatsRelease: response[3].data,\r\n                        sreleaseexistingFormats: response[4].data,\r\n                        periodList,\r\n                        selectedRecord,\r\n                        openChildModal: true,\r\n                        loading: false,\r\n                        operation: 'create',\r\n                        screenName: \"Version\",\r\n                        ncontrolcode:inputObj.ncontrolcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationSubTypeOnReload(userInfo,searchRef) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('registrationsubtype/getRegistrationSubType', { userinfo: userInfo })\r\n            .then(res => {\r\n                let masterData = {\r\n                    ...res.data\r\n                }\r\n                if (searchRef !== undefined && searchRef.current !== null) {\r\n                    searchRef.current.value = \"\";\r\n                    //masterData['searchedData'] = undefined\r\n                }\r\n                sortData(masterData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        reloadData: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationSubTypeMaster(selectedSampleType, selectedRegType, masterData, userInfo,searchRef) {\r\n    return function (dispatch) {\r\n        if(selectedRegType.value === undefined){\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTALLVALUESINFILTER\" }));\r\n        }\r\n        else{\r\n            dispatch(initRequest(true));\r\n            rsapi.post('registrationsubtype/getRegistrationSubTypeMaster', { nregtypecode: selectedRegType.value, userinfo: userInfo })\r\n                .then(response => {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        ...response.data\r\n                    }\r\n                    if (searchRef !== undefined && searchRef.current !== null) {\r\n                        searchRef.current.value = \"\";\r\n                        masterData['searchedData'] = undefined\r\n                    }\r\n                    sortData(masterData);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            realSampleType: selectedSampleType,\r\n                            realRegtype: selectedRegType,\r\n                            loading: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: { loading: false }\r\n                    })\r\n                    if (err.response.status === 500)\r\n                        toast.error(err.message);\r\n                    else\r\n                        toast.warn(err.response.data)\r\n                })\r\n            }\r\n    }\r\n}\r\nexport function selectRegistrationSubType(selectedRegSubType, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('/registrationsubtype/getRegistrationSubTypeById', { nregsubtypecode: selectedRegSubType.nregsubtypecode, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    selectedRegistrationSubType: selectedRegSubType\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getEditRegSubType(nregsubtypecode, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('/registrationsubtype/getEditRegSubType', { nregsubtypecode, userinfo: userInfo })\r\n            .then(response => {\r\n                let selectedRecord = {\r\n                    nregsubtypecode: response.data.nregsubtypecode,\r\n                    nregtypecode: response.data.nregtypecode,\r\n                    ...response.data.jsondata\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        openModal: true,\r\n                        screenName: \"IDS_REGISTRATIONSUBTYPE\",\r\n                        ncontrolcode,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getRegSubTypeDetails(inputObj) {\r\n    let { version, masterData, userInfo } = inputObj;\r\n    return function (dispatch) {\r\n        if (!(masterData.selectedVersion.nregsubtypeversioncode === version.nregsubtypeversioncode)) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post('registrationsubtype/getVersionDetails', { userinfo: userInfo, nregsubtypeversioncode: version.nregsubtypeversioncode })\r\n                .then(res => {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedVersion: res.data\r\n                    }\r\n                    sortData(masterData);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\nexport function getVersionById(primaryKey, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = []\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormats', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('registrationsubtype/getVersionDetails', { userinfo: userInfo, nregsubtypeversioncode: primaryKey }))\r\n        Axios.all(URL)\r\n            .then(res => {\r\n                if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\r\n                    let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\")\r\n                    let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode)\r\n                    let selectedRecord = {}\r\n                    selectedRecord = {\r\n                        ...res[2].data.jsondata,\r\n                        nperiodcode:nperiodcode[0],\r\n                        nregsubtypeversioncode: primaryKey\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            existingFormats: res[0].data,\r\n                            periodList,\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n                            operation: 'update',\r\n                            ncontrolcode,\r\n                            loading: false,\r\n                            screenName:\"Version\"\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterStatus: \"IDS_SELECTDRAFTRECORD\" } });\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationTypeBySampleType(comboData, masterData, userInfo, realRegtype) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('registrationtype/getRegistrationTypeBySampleType', { nsampletypecode: comboData.value, userinfo: userInfo })\r\n            .then(res => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationTypes: res.data\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedSampleType: comboData,\r\n                        realRegtype,\r\n                        loading: false,\r\n                        reloadData: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getVersionByReleaseNo(primaryKey, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = []\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('registrationsubtype/getVersionDetailsByRelease', { userinfo: userInfo, nregsubtypeversioncode: primaryKey }))\r\n        Axios.all(URL)\r\n            .then(res => {\r\n                if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\r\n                    let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\")\r\n                    let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode)\r\n                    let selectedRecord = {}\r\n                    selectedRecord = {\r\n                        ...res[2].data.jsondata,\r\n                        nperiodcode:nperiodcode[0],\r\n                        nregsubtypeversionreleasecode: res[2].data.nregsubtypeversionreleasecode\r\n\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            sreleaseexistingFormats: res[0].data,\r\n                            periodList,\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n                            operation: 'update',\r\n                            ncontrolcode,\r\n                            loading: false,\r\n                            screenName:\"IDS_RELEASEARNO\"\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterStatus: \"IDS_SELECTDRAFTRECORD\" } });\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}