{"ast":null,"code":"var _jsxFileName = \"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\branches\\\\SOURCE-513-PROD\\\\SOURCE-513-ALPD-5304\\\\QuaLISWeb\\\\src\\\\pages\\\\release\\\\ReleaseTestAttachment.jsx\";\nimport React from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { injectIntl } from 'react-intl';\nimport { transactionStatus } from '../../components/Enumeration';\nimport { viewAttachment } from '../../actions';\nimport { connect } from 'react-redux';\nimport DataGrid from '../../components/data-grid/data-grid.component';\nimport { process } from '@progress/kendo-data-query';\nimport rsapi from '../../rsapi';\nimport { toast } from 'react-toastify';\nimport { updateStore } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass ReleaseTestAttachment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getSampleDetails = (event, ncontrolCode, operation) => {\n      const url = \"release/getActiveReleaseTestAttachmentById\";\n      let masterData = this.props.masterData; // let screenName = this.props.screenName;\n\n      const isInitialRender = true;\n\n      if (this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.RELEASED && this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\n        if (operation === \"update\") {\n          let screenName = \"IDS_EDITRELEASETESTATTACHMENT\";\n          rsapi.post(url, {\n            \"ncoaparentcode\": event.editRow.ncoaparentcode,\n            \"npreregno\": event.editRow.npreregno,\n            \"ntransactionsamplecode\": event.editRow.ntransactionsamplecode,\n            \"ntransactiontestcode\": event.editRow.ntransactiontestcode,\n            \"nreleasetestattachmentcode\": event.editRow.nreleasetestattachmentcode,\n            \"userinfo\": this.props.userInfo\n          }).then(response => {\n            let responseData = response.data;\n\n            if (responseData.ntransactionstatus !== transactionStatus.RELEASED && responseData.ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\n              let selectedReleaseTestAttachment = event.editRow;\n              let nneedreport = responseData && responseData.nneedreport ? responseData.nneedreport : transactionStatus.NO;\n              let sdescription = responseData && responseData.sdescription ? responseData.sdescription : \"\";\n              let sheader = responseData && responseData.sheader ? responseData.sheader : \"\";\n              let nsortorder = responseData && responseData.nsortorder ? responseData.nsortorder : \"\";\n              let sfilename = event.editRow && event.editRow.sfilename;\n              let npreregno;\n              let ntransactionsamplecode;\n              let ntransactiontestcode;\n              let sarno;\n              let ssamplearno;\n              let stestsynonym;\n              masterData.RegistrationArno.map(item => {\n                if (item.value === responseData.npreregno) {\n                  npreregno = item;\n                  sarno = item.label;\n                }\n              });\n              masterData.RegistrationSampleArno.map(item => {\n                if (item.value === responseData.ntransactionsamplecode) {\n                  ntransactionsamplecode = item;\n                  ssamplearno = item.label;\n                }\n              });\n              masterData.RegistrationTest.map(item => {\n                if (item.value === responseData.ntransactiontestcode) {\n                  ntransactiontestcode = item;\n                  stestsynonym = item.label;\n                }\n              });\n              let selectedRecord = { ...this.state.selectedRecord,\n                npreregno,\n                ntransactionsamplecode,\n                ntransactiontestcode,\n                sfilename,\n                sarno,\n                ssamplearno,\n                stestsynonym,\n                nneedreport,\n                sdescription,\n                selectedReleaseTestAttachment,\n                sheader,\n                nsortorder\n              };\n              masterData[\"selectedRecord\"] = selectedRecord;\n              const updateInfo = {\n                typeName: DEFAULT_RETURN,\n                data: {\n                  isReleaseTestAttachment: false,\n                  isAddReleaseTestAttachment: true,\n                  masterData,\n                  operation,\n                  selectedRecord,\n                  screenName,\n                  ncontrolCode,\n                  isInitialRender\n                }\n              };\n              this.props.updateStore(updateInfo);\n            } else {\n              toast.warn(this.props.intl.formatMessage({\n                id: \"IDS_SELECTDRAFTCORRECTEDRECORD\"\n              }));\n            }\n          }).catch(error => {\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n\n            this.setState({\n              loading: false\n            });\n          });\n        } else {\n          let screenName = \"IDS_ADDRELEASETESTATTACHMENT\";\n          let RegistrationArno = this.props.masterData.RegistrationArno;\n          let selectedRecord = {\n            RegistrationArno: RegistrationArno,\n            ReleaseTestAttachmentDetails: this.props.masterData.ReleaseTestAttachmentDetails,\n            nneedreport: transactionStatus.NO\n          };\n          masterData[\"selectedRecord\"] = selectedRecord;\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              isReleaseTestAttachment: false,\n              isAddReleaseTestAttachment: true,\n              masterData,\n              operation,\n              selectedRecord,\n              screenName,\n              ncontrolCode,\n              isInitialRender\n            }\n          };\n          this.props.updateStore(updateInfo);\n        }\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_SELECTDRAFTCORRECTEDRECORD\"\n        }));\n      }\n    };\n\n    this.deleteRecord = deleteParam => {\n      const url = \"release/deleteReleaseTestAttachment\";\n\n      if (this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.RELEASED && this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\n        let releasetestattachment = {\n          \"ncoaparentcode\": deleteParam.selectedRecord.ncoaparentcode,\n          \"npreregno\": deleteParam.selectedRecord.npreregno,\n          \"ntransactionsamplecode\": deleteParam.selectedRecord.ntransactionsamplecode,\n          \"ntransactiontestcode\": deleteParam.selectedRecord.ntransactiontestcode,\n          \"nreleasetestattachmentcode\": deleteParam.selectedRecord.nreleasetestattachmentcode\n        };\n        rsapi.post(url, {\n          releasetestattachment,\n          \"userinfo\": this.props.userInfo\n        }).then(response => {\n          let ReleaseTestAttachmentDetails = response.data.ReleaseTestAttachmentDetails;\n          let selectedRecord = { ...this.state.selectedRecord,\n            ...response.data\n          };\n          let masterData = this.props.masterData;\n          masterData[\"ReleaseTestAttachmentDetails\"] = ReleaseTestAttachmentDetails;\n          const updateInfo = {\n            typeName: DEFAULT_RETURN,\n            data: {\n              selectedRecord,\n              ReleaseTestAttachmentDetails,\n              masterData\n            }\n          };\n          this.props.updateStore(updateInfo);\n          this.setState({\n            selectedRecord,\n            ReleaseTestAttachmentDetails\n          });\n        }).catch(error => {\n          if (error.response.status === 500) {\n            toast.error(error.message);\n          } else {\n            toast.warn(error.response.data);\n          }\n\n          this.setState({\n            loading: false\n          });\n        });\n      } else {\n        toast.warn(this.props.intl.formatMessage({\n          id: \"IDS_SELECTDRAFTCORRECTEDRECORD\"\n        }));\n      }\n    };\n\n    this.viewReleaseTestAttachmentFile = filedata => {\n      delete filedata.inputData.userinfo;\n      const inputParam = {\n        inputData: {\n          releasetestattachment: filedata.inputData,\n          userinfo: this.props.userInfo,\n          ncontrolcode: filedata.ncontrolCode\n        },\n        classUrl: \"release\",\n        operation: \"view\",\n        methodUrl: \"ReleaseTestAttachment\"\n      };\n      this.props.viewAttachment(inputParam);\n    };\n\n    const dataState = {\n      skip: 0,\n      take: this.props.settings ? parseInt(this.props.settings[14]) : 5\n    };\n    this.state = {\n      loading: false,\n      ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails,\n      dataState: dataState,\n      openModal: false,\n      inputParam: this.props.inputParam,\n      loadEsign: false,\n      operation: this.props.operation ? this.props.operation : \"\",\n      selectedRecord: this.props.selectedRecord,\n      isneedReport: this.props.isneedReport\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.ReleaseTestAttachmentDetails !== prevProps.ReleaseTestAttachmentDetails) {\n      this.setState({\n        ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails\n      });\n    }\n\n    if (this.props.inputParam !== prevProps.inputParam) {\n      this.setState({\n        inputParam: this.props.inputParam\n      });\n    }\n\n    if (this.props.selectedRecord !== prevProps.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.selectedRecord\n      });\n    }\n\n    if (this.props.operation !== prevProps.operation) {\n      this.setState({\n        operation: this.props.operation\n      });\n    }\n  }\n\n  render() {\n    const addReleaseTestAttachment = this.props.controlMap.has(\"AddReleaseTestAttachment\") && this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;\n    const editReleaseTestAttachment = this.props.controlMap.has(\"EditReleaseTestAttachment\") && this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;\n    const editReleaseTestAttachmentParam = {\n      screenName: this.props.intl.formatMessage({\n        id: \"IDS_RELEASETESTATTACHMENT\"\n      }),\n      operation: \"update\",\n      primaryKeyField: \"nreleasetestattachmentcode\",\n      inputParam: this.state.inputParam,\n      userInfo: this.props.userInfo,\n      ncontrolCode: editReleaseTestAttachment\n    };\n    this.fieldsForReleasedTestAttachmentGrid = [{\n      \"idsName\": \"IDS_FILENAME\",\n      \"dataField\": \"sfilename\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_ARNO\",\n      \"dataField\": \"sarno\",\n      \"width\": \"200px\"\n    }];\n    {\n      this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample && this.fieldsForReleasedTestAttachmentGrid.push({\n        \"idsName\": \"IDS_SAMPLEARNO\",\n        \"dataField\": \"ssamplearno\",\n        \"width\": \"200px\"\n      });\n    }\n    this.fieldsForReleasedTestAttachmentGrid.push({\n      \"idsName\": \"IDS_TESTSYNONYM\",\n      \"dataField\": \"stestsynonym\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_SCREENNAME\",\n      \"dataField\": \"sformname\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_HEADER\",\n      \"dataField\": \"sheader\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_DESCRIPTION\",\n      \"dataField\": \"sdescription\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_INCULDEINREPORT\",\n      \"dataField\": \"sneedreport\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_SORT\",\n      \"dataField\": \"nsortorder\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_USERNAME\",\n      \"dataField\": \"susername\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_USERROLENAME\",\n      \"dataField\": \"suserrolename\",\n      \"width\": \"200px\"\n    }, {\n      \"idsName\": \"IDS_CREATEDDATE\",\n      \"dataField\": \"screateddate\",\n      \"width\": \"200px\"\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      primaryKeyField: \"nreleasetestattachmentcode\",\n      data: this.state.ReleaseTestAttachmentDetails || [],\n      dataResult: process(this.state.ReleaseTestAttachmentDetails && this.state.ReleaseTestAttachmentDetails || [], this.props.dataState),\n      dataState: this.props.dataState,\n      isExportExcelRequired: false,\n      controlMap: this.props.controlMap,\n      userRoleControlRights: this.props.userRoleControlRights,\n      userInfo: this.props.userInfo,\n      editParam: editReleaseTestAttachmentParam,\n      extractedColumnList: this.fieldsForReleasedTestAttachmentGrid,\n      pageable: true,\n      dataStateChange: this.props.dataStateChange,\n      scrollable: 'scrollable',\n      gridHeight: '630px',\n      isActionRequired: true,\n      addRecord: event => this.getSampleDetails(event, addReleaseTestAttachment, \"create\"),\n      isToolBarRequired: true,\n      methodUrl: 'ReleaseTestAttachment',\n      isAddRequired: this.props.isAddRequired,\n      isRefreshRequired: this.props.isRefreshRequired,\n      isImportRequired: this.props.isImportRequired,\n      isDownloadPDFRequired: this.props.isDownloadPDFRequired,\n      isDownloadExcelRequired: this.props.isDownloadExcelRequired,\n      fetchRecord: event => {\n        this.getSampleDetails(event, editReleaseTestAttachment, \"update\");\n      },\n      deleteRecord: this.props.deleteRecord,\n      viewDownloadFile: this.viewReleaseTestAttachmentFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  viewAttachment,\n  updateStore\n})(injectIntl(ReleaseTestAttachment));","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5304/QuaLISWeb/src/pages/release/ReleaseTestAttachment.jsx"],"names":["React","Col","Row","injectIntl","transactionStatus","viewAttachment","connect","DataGrid","process","rsapi","toast","updateStore","DEFAULT_RETURN","mapStateToProps","state","Login","ReleaseTestAttachment","Component","constructor","props","getSampleDetails","event","ncontrolCode","operation","url","masterData","isInitialRender","selectedReleaseHistory","ntransactionstatus","RELEASED","PRELIMINARYRELEASE","screenName","post","editRow","ncoaparentcode","npreregno","ntransactionsamplecode","ntransactiontestcode","nreleasetestattachmentcode","userInfo","then","response","responseData","data","selectedReleaseTestAttachment","nneedreport","NO","sdescription","sheader","nsortorder","sfilename","sarno","ssamplearno","stestsynonym","RegistrationArno","map","item","value","label","RegistrationSampleArno","RegistrationTest","selectedRecord","updateInfo","typeName","isReleaseTestAttachment","isAddReleaseTestAttachment","warn","intl","formatMessage","id","catch","error","status","message","setState","loading","ReleaseTestAttachmentDetails","deleteRecord","deleteParam","releasetestattachment","viewReleaseTestAttachmentFile","filedata","inputData","userinfo","inputParam","ncontrolcode","classUrl","methodUrl","dataState","skip","take","settings","parseInt","openModal","loadEsign","isneedReport","componentDidUpdate","prevProps","render","addReleaseTestAttachment","controlMap","has","get","editReleaseTestAttachment","editReleaseTestAttachmentParam","primaryKeyField","fieldsForReleasedTestAttachmentGrid","realRegSubTypeValue","nneedsubsample","push","userRoleControlRights","dataStateChange","isAddRequired","isRefreshRequired","isImportRequired","isDownloadPDFRequired","isDownloadExcelRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { injectIntl } from 'react-intl';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\nimport { viewAttachment } from '../../actions';\r\nimport { connect } from 'react-redux';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport rsapi from '../../rsapi';\r\nimport { toast } from 'react-toastify';\r\nimport { updateStore } from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass ReleaseTestAttachment extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.settings ? parseInt(this.props.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            loading: false,\r\n            ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails,\r\n            dataState: dataState,\r\n            openModal: false,\r\n            inputParam: this.props.inputParam,\r\n            loadEsign: false,\r\n            operation: this.props.operation ? this.props.operation : \"\",\r\n            selectedRecord: this.props.selectedRecord,\r\n            isneedReport: this.props.isneedReport\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.ReleaseTestAttachmentDetails !== prevProps.ReleaseTestAttachmentDetails) {\r\n            this.setState({ ReleaseTestAttachmentDetails: this.props.ReleaseTestAttachmentDetails })\r\n        }\r\n        if (this.props.inputParam !== prevProps.inputParam) {\r\n            this.setState({ inputParam: this.props.inputParam })\r\n        }\r\n        if (this.props.selectedRecord !== prevProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord })\r\n        }\r\n        if (this.props.operation !== prevProps.operation) {\r\n            this.setState({ operation: this.props.operation })\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const addReleaseTestAttachment =\r\n            this.props.controlMap.has(\"AddReleaseTestAttachment\") &&\r\n            this.props.controlMap.get(\"AddReleaseTestAttachment\").ncontrolcode;\r\n\r\n        const editReleaseTestAttachment =\r\n            this.props.controlMap.has(\"EditReleaseTestAttachment\") &&\r\n            this.props.controlMap.get(\"EditReleaseTestAttachment\").ncontrolcode;\r\n\r\n        const editReleaseTestAttachmentParam = {\r\n            screenName: this.props.intl.formatMessage({ id: \"IDS_RELEASETESTATTACHMENT\" }),\r\n            operation: \"update\", primaryKeyField: \"nreleasetestattachmentcode\",\r\n            inputParam: this.state.inputParam,\r\n            userInfo: this.props.userInfo,\r\n            ncontrolCode: editReleaseTestAttachment\r\n        };\r\n\r\n        this.fieldsForReleasedTestAttachmentGrid = [\r\n            { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"sfilename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_ARNO\", \"dataField\": \"sarno\", \"width\": \"200px\" },\r\n        ];\r\n        {\r\n            this.props.masterData.realRegSubTypeValue && this.props.masterData.realRegSubTypeValue.nneedsubsample &&\r\n                this.fieldsForReleasedTestAttachmentGrid.push(\r\n                    { \"idsName\": \"IDS_SAMPLEARNO\", \"dataField\": \"ssamplearno\", \"width\": \"200px\" }\r\n                )\r\n        }\r\n        this.fieldsForReleasedTestAttachmentGrid.push(\r\n            { \"idsName\": \"IDS_TESTSYNONYM\", \"dataField\": \"stestsynonym\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SCREENNAME\", \"dataField\": \"sformname\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_HEADER\", \"dataField\": \"sheader\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_DESCRIPTION\", \"dataField\": \"sdescription\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_INCULDEINREPORT\", \"dataField\": \"sneedreport\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_SORT\", \"dataField\": \"nsortorder\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERNAME\", \"dataField\": \"susername\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_USERROLENAME\", \"dataField\": \"suserrolename\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_CREATEDDATE\", \"dataField\": \"screateddate\", \"width\": \"200px\" }\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <Row>\r\n                    <Col>\r\n                        <DataGrid\r\n                            primaryKeyField=\"nreleasetestattachmentcode\"\r\n                            data={this.state.ReleaseTestAttachmentDetails || []}\r\n                            dataResult={process(this.state.ReleaseTestAttachmentDetails && this.state.ReleaseTestAttachmentDetails || [], this.props.dataState)}\r\n                            dataState={this.props.dataState}\r\n                            isExportExcelRequired={false}\r\n                            controlMap={this.props.controlMap}\r\n                            userRoleControlRights={this.props.userRoleControlRights}\r\n                            userInfo={this.props.userInfo}\r\n                            editParam={editReleaseTestAttachmentParam}\r\n                            extractedColumnList={this.fieldsForReleasedTestAttachmentGrid}\r\n                            pageable={true}\r\n                            dataStateChange={this.props.dataStateChange}\r\n                            scrollable={'scrollable'}\r\n                            gridHeight={'630px'}\r\n                            isActionRequired={true}\r\n                            addRecord={(event) => this.getSampleDetails(event, addReleaseTestAttachment, \"create\")}\r\n                            isToolBarRequired={true}\r\n                            methodUrl={'ReleaseTestAttachment'}\r\n                            isAddRequired={this.props.isAddRequired}\r\n                            isRefreshRequired={this.props.isRefreshRequired}\r\n                            isImportRequired={this.props.isImportRequired}\r\n                            isDownloadPDFRequired={this.props.isDownloadPDFRequired}\r\n                            isDownloadExcelRequired={this.props.isDownloadExcelRequired}\r\n                            fetchRecord={(event) => { this.getSampleDetails(event, editReleaseTestAttachment, \"update\") }}\r\n                            deleteRecord={this.props.deleteRecord}\r\n                            viewDownloadFile={this.viewReleaseTestAttachmentFile}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </>\r\n        );\r\n    };\r\n\r\n    getSampleDetails = (event, ncontrolCode, operation) => {\r\n        const url = \"release/getActiveReleaseTestAttachmentById\";\r\n        let masterData = this.props.masterData;\r\n        // let screenName = this.props.screenName;\r\n        const isInitialRender = true;\r\n        if (this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.RELEASED\r\n            && this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\r\n            if (operation === \"update\") {\r\n                let screenName = \"IDS_EDITRELEASETESTATTACHMENT\";\r\n                rsapi.post(url, {\r\n                    \"ncoaparentcode\": event.editRow.ncoaparentcode,\r\n                    \"npreregno\": event.editRow.npreregno,\r\n                    \"ntransactionsamplecode\": event.editRow.ntransactionsamplecode,\r\n                    \"ntransactiontestcode\": event.editRow.ntransactiontestcode,\r\n                    \"nreleasetestattachmentcode\": event.editRow.nreleasetestattachmentcode,\r\n                    \"userinfo\": this.props.userInfo\r\n                })\r\n                    .then(response => {\r\n                        let responseData = response.data;\r\n                        if (responseData.ntransactionstatus !== transactionStatus.RELEASED && responseData.ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\r\n                            let selectedReleaseTestAttachment = event.editRow;\r\n                            let nneedreport = responseData && responseData.nneedreport ? responseData.nneedreport : transactionStatus.NO;\r\n                            let sdescription = responseData && responseData.sdescription ? responseData.sdescription : \"\";\r\n                            let sheader = responseData && responseData.sheader ? responseData.sheader : \"\";\r\n                            let nsortorder = responseData && responseData.nsortorder ? responseData.nsortorder : \"\";\r\n                            let sfilename = event.editRow && event.editRow.sfilename;\r\n                            let npreregno;\r\n                            let ntransactionsamplecode;\r\n                            let ntransactiontestcode;\r\n                            let sarno;\r\n                            let ssamplearno;\r\n                            let stestsynonym;\r\n                            masterData.RegistrationArno.map(item => {\r\n                                if (item.value === responseData.npreregno) {\r\n                                    npreregno = item;\r\n                                    sarno = item.label;\r\n                                }\r\n                            });\r\n                            masterData.RegistrationSampleArno.map(item => {\r\n                                if (item.value === responseData.ntransactionsamplecode) {\r\n                                    ntransactionsamplecode = item;\r\n                                    ssamplearno = item.label;\r\n                                }\r\n                            });\r\n                            masterData.RegistrationTest.map(item => {\r\n                                if (item.value === responseData.ntransactiontestcode) {\r\n                                    ntransactiontestcode = item;\r\n                                    stestsynonym = item.label;\r\n                                }\r\n                            });\r\n                            let selectedRecord = {\r\n                                ...this.state.selectedRecord, npreregno, ntransactionsamplecode, ntransactiontestcode, sfilename, sarno, ssamplearno, stestsynonym, nneedreport, sdescription, selectedReleaseTestAttachment\r\n                                , sheader, nsortorder\r\n                            };\r\n                            masterData[\"selectedRecord\"] = selectedRecord;\r\n                            const updateInfo = {\r\n                                typeName: DEFAULT_RETURN,\r\n                                data: { isReleaseTestAttachment: false, isAddReleaseTestAttachment: true, masterData, operation, selectedRecord, screenName, ncontrolCode, isInitialRender }\r\n                            }\r\n                            this.props.updateStore(updateInfo);\r\n                        } else {\r\n                            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTCORRECTEDRECORD\" }));\r\n                        }\r\n                    }).catch(error => {\r\n                        if (error.response.status === 500) {\r\n                            toast.error(error.message);\r\n                        } else {\r\n                            toast.warn(error.response.data);\r\n                        }\r\n                        this.setState({\r\n                            loading: false\r\n                        });\r\n                    });\r\n            } else {\r\n                let screenName = \"IDS_ADDRELEASETESTATTACHMENT\"\r\n                let RegistrationArno = this.props.masterData.RegistrationArno;\r\n                let selectedRecord = {\r\n                    RegistrationArno: RegistrationArno,\r\n                    ReleaseTestAttachmentDetails: this.props.masterData.ReleaseTestAttachmentDetails,\r\n                    nneedreport: transactionStatus.NO\r\n                };\r\n                masterData[\"selectedRecord\"] = selectedRecord;\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { isReleaseTestAttachment: false, isAddReleaseTestAttachment: true, masterData, operation, selectedRecord, screenName, ncontrolCode, isInitialRender }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTCORRECTEDRECORD\" }));\r\n        }\r\n    }\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const url = \"release/deleteReleaseTestAttachment\";\r\n        if (this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.RELEASED\r\n            && this.props.masterData.selectedReleaseHistory[0].ntransactionstatus !== transactionStatus.PRELIMINARYRELEASE) {\r\n            let releasetestattachment = {\r\n                \"ncoaparentcode\": deleteParam.selectedRecord.ncoaparentcode,\r\n                \"npreregno\": deleteParam.selectedRecord.npreregno,\r\n                \"ntransactionsamplecode\": deleteParam.selectedRecord.ntransactionsamplecode,\r\n                \"ntransactiontestcode\": deleteParam.selectedRecord.ntransactiontestcode,\r\n                \"nreleasetestattachmentcode\": deleteParam.selectedRecord.nreleasetestattachmentcode\r\n            }\r\n            rsapi.post(url, {\r\n                releasetestattachment, \"userinfo\": this.props.userInfo\r\n            })\r\n                .then(response => {\r\n                    let ReleaseTestAttachmentDetails = response.data.ReleaseTestAttachmentDetails;\r\n                    let selectedRecord = {\r\n                        ...this.state.selectedRecord, ...response.data\r\n                    };\r\n                    let masterData = this.props.masterData;\r\n                    masterData[\"ReleaseTestAttachmentDetails\"] = ReleaseTestAttachmentDetails;\r\n                    const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: { selectedRecord, ReleaseTestAttachmentDetails, masterData }\r\n                    }\r\n                    this.props.updateStore(updateInfo);\r\n\r\n                    this.setState({\r\n                        selectedRecord, ReleaseTestAttachmentDetails\r\n                    });\r\n                }).catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                    this.setState({\r\n                        loading: false\r\n                    });\r\n                });\r\n        } else {\r\n            toast.warn(this.props.intl.formatMessage({ id: \"IDS_SELECTDRAFTCORRECTEDRECORD\" }));\r\n        }\r\n    }\r\n\r\n    viewReleaseTestAttachmentFile = (filedata) => {\r\n        delete (filedata.inputData.userinfo);\r\n        const inputParam = {\r\n            inputData: {\r\n                releasetestattachment: filedata.inputData,\r\n                userinfo: this.props.userInfo,\r\n                ncontrolcode: filedata.ncontrolCode\r\n            },\r\n            classUrl: \"release\",\r\n            operation: \"view\",\r\n            methodUrl: \"ReleaseTestAttachment\",\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { viewAttachment, updateStore })(injectIntl(ReleaseTestAttachment));"]},"metadata":{},"sourceType":"module"}