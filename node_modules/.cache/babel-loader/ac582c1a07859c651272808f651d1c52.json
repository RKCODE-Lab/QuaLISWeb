{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{FormattedMessage,injectIntl}from'react-intl';import DataGrid from'../../components/data-grid/data-grid.component';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import Esign from'../audittrail/Esign';import AddEDQMProduct from'./AddEDQMProduct';import{ListWrapper}from'../../components/client-group.styles';import{Row,Col,FormGroup,FormLabel}from'react-bootstrap';//, Card, Form, Modal\nimport{toast}from'react-toastify';import{process}from'@progress/kendo-data-query';import{MediaLabel}from'../../components/add-client.styles';import rsapi from'../../rsapi';import Axios from'axios';import{callService,crudMaster,updateStore,validateEsignCredential,edqmProductFetchRecord}from'../../actions';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{constructOptionList,getControlMap,showEsign}from'../../components/CommonScript';import{transactionStatus}from'../../components/Enumeration';var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};var EDQMProduct=/*#__PURE__*/function(_React$Component){_inherits(EDQMProduct,_React$Component);var _super=_createSuper(EDQMProduct);function EDQMProduct(_props){var _this;_classCallCheck(this,EDQMProduct);_this=_super.call(this,_props);_this.dataStateChange=function(event){_this.setState({dataResult:process(_this.state.data,event.dataState),dataState:event.dataState});};_this.closeModal=function(){var loadEsign=_this.props.Login.loadEsign;var openModal=_this.props.Login.openModal;var selectedRecord=_this.props.Login.selectedRecord;if(_this.props.Login.loadEsign){if(_this.props.Login.operation===\"delete\"){loadEsign=false;openModal=false;selectedRecord={};}else{loadEsign=false;}}else{openModal=false;selectedRecord={};}_this.setState({safetyMarkByID:[],productTypeByID:[]});var updateInfo={typeName:DEFAULT_RETURN,data:{openModal:openModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null,operation:_this.props.Login.operation}};_this.props.updateStore(updateInfo);};_this.getNestedFieldData=function(nestedColumnArray,data){return nestedColumnArray.reduce(function(xs,x){return xs&&xs[x]?xs[x]:null;},data);};_this.expandChange=function(event){var isExpanded=event.dataItem.expanded===undefined?event.dataItem.aggregates:event.dataItem.expanded;event.dataItem.expanded=!isExpanded;_this.setState(_objectSpread({},_this.props));};_this.detailBand=function(props){var Dataitem=props.dataItem;var OptionalFieldList=[{datafield:\"sproducttype\",Column:\"Product Type\"},{datafield:\"sbulktype\",Column:\"Bulk Type\"},{datafield:\"scomponentbulkgroup\",Column:\"Component Bulk Group\"},{datafield:\"smasterfiletype\",Column:\"Master File Type\"},{datafield:\"ssafetymarkername\",Column:\"Safety Marker Name\"}];return/*#__PURE__*/React.createElement(Row,null,OptionalFieldList.map(function(fields){return/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(FormLabel,null,/*#__PURE__*/React.createElement(FormattedMessage,{id:fields.Column,message:fields.Column})),/*#__PURE__*/React.createElement(MediaLabel,{className:\"readonly-text font-weight-normal\"},Dataitem[fields.datafield])));}));};_this.detailedFieldList=[{dataField:\"sproducttype\",idsName:\"IDS_PRODUCTTYPE\",columnSize:\"4\"},{dataField:\"sbulktype\",idsName:\"IDS_BULKTYPE\",columnSize:\"4\"},{dataField:\"scomponentbulkgroup\",idsName:\"IDS_COMPONENTBULKGROUP\",columnSize:\"4\"},{dataField:\"smasterfiletype\",idsName:\"IDS_MASTERFILETYPE\",columnSize:\"4\"},{dataField:\"ssafetymarkername\",idsName:\"IDS_SAFETYMARKNAME\",columnSize:\"4\"}//{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\n];_this.onComboChange=function(comboData,fieldName){if(comboData!=null){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData.value;if(fieldName===\"nproductdesccode\"){_this.getProductTypeMandatory(comboData.value,selectedRecord);}if(fieldName===\"nproducttypecode\"){_this.getSafetyMarkerMandatory(comboData.value,selectedRecord);}else{_this.setState({selectedRecord:selectedRecord});}}};_this.fetchRecord=function(primaryKeyName,primaryKeyValue,operation){var productDomainData=rsapi.post(\"edqmproductdomain/getEDQMProductDomain\",{\"userinfo\":_this.props.Login.userInfo});var productDescData=rsapi.post(\"edqmproductdescription/getEDQMProductDescription\",{\"userinfo\":_this.props.Login.userInfo});var productTypeData=rsapi.post(\"edqmproducttype/getAllEDQMProductType\",{\"userinfo\":_this.props.Login.userInfo});var bulkTypeData=rsapi.post(\"edqmbulktype/getAllEDQMBulkType\",{\"userinfo\":_this.props.Login.userInfo});var componentBulkData=rsapi.post(\"edqmcomponentbulkgroup/getAllEDQMComponentBulkGroup\",{\"userinfo\":_this.props.Login.userInfo});var masterFileData=rsapi.post(\"edqmmasterfiletype/getAllEDQMMasterFileType\",{\"userinfo\":_this.props.Login.userInfo});var safetyFileData=rsapi.post(\"edqmsafetymarker/getAllEDQMSafetyMarker\",{\"userinfo\":_this.props.Login.userInfo});var urlArray=[];if(operation===\"update\"){var _rsapi$post;var productData=rsapi.post(_this.props.Login.inputParam.classUrl+\"/getActive\"+_this.props.Login.inputParam.methodUrl+\"ById\",(_rsapi$post={},_defineProperty(_rsapi$post,primaryKeyName,primaryKeyValue),_defineProperty(_rsapi$post,\"userinfo\",_this.props.Login.userInfo),_rsapi$post));urlArray=[productDomainData,productDescData,productTypeData,bulkTypeData,componentBulkData,masterFileData,safetyFileData,productData];}else{urlArray=[productDomainData,productDescData,productTypeData,bulkTypeData,componentBulkData,masterFileData,safetyFileData];}Axios.all(urlArray).then(Axios.spread(function(){var nproductdomaincode=[];var nproductdesccode=[];var nproducttypecode=[];var nbulktypecode=[];var ncomponentbulkgroupcode=[];var nmasterfiletypecode=[];var nsafetymarkercode=[];for(var _len=arguments.length,response=new Array(_len),_key=0;_key<_len;_key++){response[_key]=arguments[_key];}if(operation===\"update\"){nproductdomaincode.push({label:response[7].data[\"sproductdomain\"],value:response[7].data[\"nproductdomaincode\"]});nproductdesccode.push({label:response[7].data[\"sproductclass\"],value:response[7].data[\"nproductdesccode\"]});nproducttypecode.push({label:response[7].data[\"sproducttype\"],value:response[7].data[\"nproducttypecode\"]});nbulktypecode.push({label:response[7].data[\"sbulktype\"],value:response[7].data[\"nbulktypecode\"]});ncomponentbulkgroupcode.push({label:response[7].data[\"scomponentbulkgroup\"],value:response[7].data[\"ncomponentbulkgroupcode\"]});nmasterfiletypecode.push({label:response[7].data[\"smasterfiletype\"],value:response[7].data[\"nmasterfiletypecode\"]});nsafetymarkercode.push({label:response[7].data[\"ssafetymarkername\"],value:response[7].data[\"nsafetymarkercode\"]});}_this.setState({productDomainData:response[0].data,productDescData:response[1].data,productTypeData:response[2].data,bulkTypeData:response[3].data,componentBulkData:response[4].data,masterFileData:response[5].data,safetyFileData:response[6].data,nproductdomaincode:nproductdomaincode,nproductdesccode:nproductdesccode,nproducttypecode:nproducttypecode,nbulktypecode:nbulktypecode,ncomponentbulkgroupcode:ncomponentbulkgroupcode,nmasterfiletypecode:nmasterfiletypecode,nsafetymarkercode:nsafetymarkercode,isOpen:true,selectedRecord:operation===\"update\"?response[7].data:undefined,operation:operation});})).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"agree\"){selectedRecord[event.target.name]=event.target.checked===true?3:4;}}else if(event.target.type==='select-one'){if(event.target.name===\"nproductdesccode\"){_this.getProductTypeMandatory(event.target.value);}if(event.target.name===\"nproducttypecode\"){_this.getSafetyMarkerMandatory(event.target.value);}selectedRecord[event.target.name]=event.target.value;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.deleteRecord=function(deleteParam){var _inputData;if(deleteParam.selectedRecord.expanded!==undefined){delete deleteParam.selectedRecord.expanded;}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:deleteParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,inputData:(_inputData={},_defineProperty(_inputData,deleteParam.methodUrl.toLowerCase(),deleteParam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.Login.userInfo),_inputData),operation:deleteParam.operation,dataState:_this.state.dataState};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}};_this.reloadData=function(){var inputParam={inputData:{\"userinfo\":_this.props.Login.userInfo},classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,userInfo:_this.props.Login.userInfo};_this.props.callService(inputParam);};_this.onSaveClick=function(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=_this.props.Login.userInfo;var dataState=undefined;var selectedId=null;// let selectedRecord = {};\nif(_this.props.Login.operation===\"update\"){selectedId=_this.props.Login.selectedId;// edit\ninputData[_this.props.Login.inputParam.methodUrl.toLowerCase()]=_this.state.selectedRecord;_this.fieldList.map(function(item){return inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][item]=_this.state.selectedRecord[item];});dataState=_this.state.dataState;}else{//add       this.fieldList = [\"sofficialproductname\", \"nproductdomaincode\", \"nproductdesccode\", \"nproducttypecode\", \n//\"nbulktypecode\", \"ncomponentbulkgroupcode\", \"nmasterfiletypecode\", \"nsafetymarkercode\"];            \ninputData[_this.props.Login.inputParam.methodUrl.toLowerCase()]={\"nsitecode\":_this.props.Login.userInfo.nmastersitecode};inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"sofficialproductname\"]=_this.state.selectedRecord[\"sofficialproductname\"];inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproductdomaincode\"]=_this.state.selectedRecord[\"nproductdomaincode\"];inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproductdesccode\"]=_this.state.selectedRecord[\"nproductdesccode\"];inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproducttypecode\"]=_this.state.selectedRecord[\"nproducttypecode\"]?_this.state.selectedRecord[\"nproducttypecode\"]:-1;inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nbulktypecode\"]=_this.state.selectedRecord[\"nbulktypecode\"]?_this.state.selectedRecord[\"nbulktypecode\"]:-1;inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"ncomponentbulkgroupcode\"]=_this.state.selectedRecord[\"ncomponentbulkgroupcode\"]?_this.state.selectedRecord[\"ncomponentbulkgroupcode\"]:-1;inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nmasterfiletypecode\"]=_this.state.selectedRecord[\"nmasterfiletypecode\"]?_this.state.selectedRecord[\"nmasterfiletypecode\"]:-1;inputData[_this.props.Login.inputParam.methodUrl.toLowerCase()][\"nsafetymarkercode\"]=_this.state.selectedRecord[\"nsafetymarkercode\"]?_this.state.selectedRecord[\"nsafetymarkercode\"]:-1;// this.fieldList.map(item => {\n//     return inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][item] = this.state.selectedRecord[item]\n// })\n}var inputParam={classUrl:_this.props.Login.inputParam.classUrl,methodUrl:_this.props.Login.inputParam.methodUrl,displayName:_this.props.Login.inputParam.displayName,inputData:inputData,operation:_this.props.Login.operation,saveType:saveType,formRef:formRef,dataState:dataState,selectedId:selectedId};if(showEsign(_this.props.Login.userRoleControlRights,_this.props.Login.userInfo.nformcode,_this.props.Login.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.Login.masterData},openModal:true,screenName:_this.props.intl.formatMessage({id:_this.props.Login.inputParam.displayName}),operation:_this.props.Login.operation,selectedId:selectedId}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.Login.masterData,\"openModal\");}_this.setState({safetyMarkByID:[],productTypeByID:[]});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.Login.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.Login.screenData};_this.props.validateEsignCredential(inputParam,\"openModal\");};_this.formRef=React.createRef();_this.extractedColumnList=[];_this.fieldList=[];var _dataState={skip:0,take:_this.props.Login.settings?parseInt(_this.props.Login.settings[14]):5};_this.state={addScreen:false,data:[],masterStatus:\"\",error:\"\",operation:\"create\",dataResult:[],dataState:_dataState,productDomainData:[],productDescData:[],productTypeData:[],bulkTypeData:[],componentBulkData:[],masterFileData:[],safetyFileData:[],productTypeByID:[],productTypeMandatory:0,safetyMarkByID:[],isOpen:false,userRoleControlRights:[],controlMap:new Map(),selectedRecord:{},nproductdomaincode:[],nproductdesccode:[],nproducttypecode:[],nbulktypecode:[],ncomponentbulkgroupcode:[],nmasterfiletypecode:[],nsafetymarkercode:[],//mandatoryFields:[]\nvalidationColumnList:[{\"idsName\":\"IDS_PRODUCTNAME\",\"dataField\":\"sofficialproductname\",\"width\":\"300px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PRODUCTDOMAIN\",\"dataField\":\"nproductdomaincode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_PRODUCTDESC\",\"dataField\":\"nproductdesccode\",\"width\":\"200px\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}]};return _this;}_createClass(EDQMProduct,[{key:\"render\",value:function render(){var _this2=this;//let primaryKeyField = \"\";\nthis.extractedColumnList=[{\"idsName\":\"IDS_PRODUCTNAME\",\"dataField\":\"sofficialproductname\",\"width\":\"300px\"},{\"idsName\":\"IDS_PRODUCTDOMAIN\",\"dataField\":\"sproductdomain\",\"width\":\"200px\"},{\"idsName\":\"IDS_PRODUCTCLASS\",\"dataField\":\"sproductclass\",\"width\":\"200px\"}// { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"sproducttype\", \"width\": \"200px\" },\n// { \"idsName\": \"IDS_BULKTYPE\", \"dataField\": \"sbulktype\", \"width\": \"200px\" },\n// { \"idsName\": \"IDS_COMPONENTBULKGROUP\", \"dataField\": \"scomponentbulkgroup\", \"width\": \"200px\" },\n// { \"idsName\": \"IDS_MASTERFILETYPE\", \"dataField\": \"smasterfiletype\", \"width\": \"200px\" },\n// { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"ssafetymarkername\", \"width\": \"200px\" },\n];//primaryKeyField = \"nofficialproductcode\";\n//let validationColumnList = [];\nthis.fieldList=[\"sofficialproductname\",\"nproductdomaincode\",\"nproductdesccode\",\"nproducttypecode\",\"nbulktypecode\",\"ncomponentbulkgroupcode\",\"nmasterfiletypecode\",\"nsafetymarkercode\"];// validationColumnList = [\n//     { \"idsName\": \"IDS_PRODUCTNAME\", \"dataField\": \"sofficialproductname\", \"width\": \"300px\", \"mandatory\": true },\n//     { \"idsName\": \"IDS_PRODUCTDOMAIN\", \"dataField\": \"nproductdomaincode\", \"width\": \"200px\", \"mandatory\": true },\n//     { \"idsName\": \"IDS_PRODUCTDESC\", \"dataField\": \"nproductdesccode\", \"width\": \"200px\", \"mandatory\": true },\n// ]\n// if (this.state.productTypeByID.nproducttypemand === transactionStatus.YES && this.state.safetyMarkByID.nsafetymarkermand === 3) {\n//     this.validationColumnList.push(\n//         { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"nproducttypecode\", \"width\": \"200px\", \"mandatory\": true },\n//         { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"nsafetymarkercode\", \"width\": \"200px\", \"mandatory\": true },\n//     );\n// }\n// else {\n// if (this.state.productTypeByID.nproducttypemand === transactionStatus.YES) {\n//     validationColumnList.push(\n//         { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"nproducttypecode\", \"width\": \"200px\", \"mandatory\": true },\n//     );\n// }\n// if (this.state.safetyMarkByID.nsafetymarkermand === transactionStatus.YES) {\n//     validationColumnList.push(\n//        { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"nsafetymarkercode\", \"width\": \"200px\", \"mandatory\": true },\n//     );\n// }\n//}\nvar mandatoryFields=[];this.state.validationColumnList.forEach(function(item){return item.mandatory===true?mandatoryFields.push(item):\"\";});var addId=this.props.Login.inputParam&&this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var editId=this.props.Login.inputParam&&this.state.controlMap.has(\"Edit\".concat(this.props.Login.inputParam.methodUrl))&&this.state.controlMap.get(\"Edit\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;var edqmAddParam={screenName:\"EDQM Product\",operation:\"create\",primaryKeyField:\"nofficialproductcode\",primaryKeyValue:null,masterData:null,userInfo:this.props.Login.userInfo,ncontrolCode:addId};var edqmEditParam={screenName:\"EDQM Product\",operation:\"update\",primaryKeyField:\"nofficialproductcode\",masterData:null,userInfo:this.props.Login.userInfo,ncontrolCode:editId};var edqmDeleteParam={screenName:\"EDQMProduct\",methodUrl:\"EDQMProduct\",operation:\"delete\"};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(ListWrapper,{className:\"client-list-content\"},this.state.data?/*#__PURE__*/React.createElement(DataGrid,{primaryKeyField:\"nofficialproductcode\",expandField:\"expanded\",detailedFieldList:this.detailedFieldList,data:this.state.data,dataResult:this.state.dataResult,dataState:this.state.dataState,dataStateChange:this.dataStateChange,extractedColumnList:this.extractedColumnList,controlMap:this.state.controlMap,userRoleControlRights:this.state.userRoleControlRights,inputParam:this.props.Login.inputParam,userInfo:this.props.Login.userInfo,fetchRecord:this.props.edqmProductFetchRecord,editParam:edqmEditParam,deleteRecord:this.deleteRecord,deleteParam:edqmDeleteParam,reloadData:this.reloadData,addRecord:function addRecord(){return _this2.props.edqmProductFetchRecord(edqmAddParam);},pageable:{buttonCount:4,pageSizes:true},scrollable:\"scrollable\",gridHeight:\"600px\",isActionRequired:true,isToolBarRequired:true// isComponent={true}\n,selectedId:this.props.Login.selectedId,hasDynamicColSize:true}):\"\"))),this.props.Login.openModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.Login.openModal,closeModal:this.closeModal,operation:this.props.Login.operation,inputParam:this.props.Login.inputParam,screenName:this.props.Login.screenName,onSaveClick:this.onSaveClick,esign:this.props.Login.loadEsign,validateEsign:this.validateEsign,masterStatus:this.props.Login.masterStatus,updateStore:this.props.updateStore,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.Login.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.Login.operation,formatMessage:this.props.intl.formatMessage,onInputOnChange:this.onInputOnChange,inputParam:this.props.Login.inputParam,selectedRecord:this.state.selectedRecord||{}}):/*#__PURE__*/React.createElement(AddEDQMProduct,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,formatMessage:this.props.intl.formatMessage,productDomainData:this.state.productDomainData||[]//{this.props.Login.productDomainData}\n,productDescData:this.state.productDescData||[]//{this.props.Login.productDescData}\n,productTypeData:this.state.productTypeData||[]//{this.props.Login.productTypeData}\n,productTypeByID:this.state.productTypeByID//{this.props.Login.productTypeByID}\n,bulkTypeData:this.state.bulkTypeData||[]//{this.props.Login.bulkTypeData}\n,componentBulkData:this.state.componentBulkData||[]//{this.props.Login.componentBulkData}\n,masterFileData:this.state.masterFileData||[]//{this.props.Login.masterFileData}\n,safetyFileData:this.state.safetyFileData//{this.props.Login.safetyFileData}\n,safetyMarkByID:this.state.safetyMarkByID//{this.props.Login.safetyMarkByID}\n,nproductdomaincode:this.props.Login.nproductdomaincode,nproductdesccode:this.props.Login.nproductdesccode,nproducttypecode:this.props.Login.nproducttypecode,nbulktypecode:this.props.Login.nbulktypecode,ncomponentbulkgroupcode:this.props.Login.ncomponentbulkgroupcode,nmasterfiletypecode:this.props.Login.nmasterfiletypecode,nsafetymarkercode:this.props.Login.nsafetymarkercode})}));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.Login.masterData!==previousProps.Login.masterData){if(this.props.Login.userInfo.nformcode!==previousProps.Login.userInfo.nformcode){var userRoleControlRights=[];if(this.props.Login.userRoleControlRights){this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]&&Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(function(item){return userRoleControlRights.push(item.ncontrolcode);});}var controlMap=getControlMap(this.props.Login.userRoleControlRights,this.props.Login.userInfo.nformcode);this.setState({userRoleControlRights:userRoleControlRights,controlMap:controlMap,data:this.props.Login.masterData,dataResult:process(this.props.Login.masterData,this.state.dataState)});}else{var dataState=this.state.dataState;if(this.props.Login.dataState===undefined){dataState={skip:0,take:this.props.Login.settings?parseInt(this.props.Login.settings[14]):5};}this.setState({data:this.props.Login.masterData,dataResult:process(this.props.Login.masterData,dataState),dataState:dataState});}}if(this.props.Login.selectedRecord!==previousProps.Login.selectedRecord){this.setState({selectedRecord:this.props.Login.selectedRecord});}if(this.props.Login.productDomainData!==previousProps.Login.productDomainData||this.props.Login.productDescData!==previousProps.Login.productDescData||this.props.Login.productTypeData!==previousProps.Login.productTypeData||this.props.Login.bulkTypeData!==previousProps.Login.bulkTypeData||this.props.Login.componentBulkData!==previousProps.Login.componentBulkData||this.props.Login.masterFileData!==previousProps.Login.masterFileData||this.props.Login.safetyFileData!==previousProps.Login.safetyFileData){var productDomainData=constructOptionList(this.props.Login.productDomainData||[],\"nproductdomaincode\",\"sproductdomain\",undefined,undefined,undefined);var productDomainDataEDQM=productDomainData.get(\"OptionList\");var productDescData=constructOptionList(this.props.Login.productDescData||[],\"nproductdesccode\",\"sproductclass\",undefined,undefined,undefined);var productDescDataEDQM=productDescData.get(\"OptionList\");var productTypeData=constructOptionList(this.props.Login.productTypeData||[],\"nproducttypecode\",\"sproducttype\",undefined,undefined,undefined);var productTypeDataEDQM=productTypeData.get(\"OptionList\");var bulkTypeData=constructOptionList(this.props.Login.bulkTypeData||[],\"nbulktypecode\",\"sbulktype\",undefined,undefined,undefined);var bulkTypeDataEDQM=bulkTypeData.get(\"OptionList\");var componentBulkData=constructOptionList(this.props.Login.componentBulkData||[],\"ncomponentbulkgroupcode\",\"scomponentbulkgroup\",undefined,undefined,undefined);var componentBulkDataEDQM=componentBulkData.get(\"OptionList\");var masterFileData=constructOptionList(this.props.Login.masterFileData||[],\"nmasterfiletypecode\",\"smasterfiletype\",undefined,undefined,undefined);var masterFileDataEDQM=masterFileData.get(\"OptionList\");var safetyFileData=constructOptionList(this.props.Login.safetyFileData||[],\"nsafetymarkercode\",\"ssafetymarkername\",undefined,undefined,undefined);var safetyFileDataEDQM=safetyFileData.get(\"OptionList\");this.setState({productDomainData:productDomainDataEDQM,productDescData:productDescDataEDQM,productTypeData:productTypeDataEDQM,bulkTypeData:bulkTypeDataEDQM,componentBulkData:componentBulkDataEDQM,masterFileData:masterFileDataEDQM,safetyFileData:safetyFileDataEDQM});}}},{key:\"getProductTypeMandatory\",value:function getProductTypeMandatory(ProductDescCode,selectedRecord){var _this3=this;var url=\"edqmproductdescription/getActiveEDQMProductDescriptionById\";rsapi.post(url,{\"nproductdesccode\":parseInt(ProductDescCode),\"userinfo\":this.props.Login.userInfo}).then(function(response){var productTypeByID=response.data;var validationColumnList=_this3.state.validationColumnList;if(productTypeByID.nproducttypemand===transactionStatus.YES){validationColumnList.push({\"idsName\":\"IDS_PRODUCTTYPE\",\"dataField\":\"nproducttypecode\",\"width\":\"200px\",\"mandatory\":true});}_this3.setState({productTypeByID:productTypeByID,selectedRecord:selectedRecord,validationColumnList:validationColumnList});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}},{key:\"getSafetyMarkerMandatory\",value:function getSafetyMarkerMandatory(ProductTypeCode,selectedRecord){var _this4=this;var url=rsapi.post(\"edqmproducttype/getActiveEDQMProductTypeById\",{\"nproducttypecode\":parseInt(ProductTypeCode),\"userinfo\":this.props.Login.userInfo});var safetyMarkert=rsapi.post(\"edqmsafetymarker/getSafetyMarkers\",{\"nproducttypecode\":parseInt(ProductTypeCode),\"userinfo\":this.props.Login.userInfo});var urlArray=[url,safetyMarkert];Axios.all(urlArray).then(Axios.spread(function(){for(var _len2=arguments.length,response=new Array(_len2),_key2=0;_key2<_len2;_key2++){response[_key2]=arguments[_key2];}var safetyFileData1=constructOptionList(response[1].data||[],\"nsafetymarkercode\",\"ssafetymarkername\",undefined,undefined,undefined);var safetyFileDataEDQM=safetyFileData1.get(\"OptionList\");var safetyMarkByID=response[0].data;var validationColumnList=_this4.state.validationColumnList;if(safetyMarkByID.nsafetymarkermand===transactionStatus.YES){validationColumnList.push({\"idsName\":\"IDS_SAFETYMARKNAME\",\"dataField\":\"nsafetymarkercode\",\"width\":\"200px\",\"mandatory\":true});}else{var index=validationColumnList.findIndex(function(data){return data.idsName===\"IDS_SAFETYMARKNAME\";});if(index>-1){validationColumnList.splice(index,1);}}_this4.setState({safetyFileData:safetyFileDataEDQM,safetyMarkByID:safetyMarkByID,isOpen:true,selectedRecord:selectedRecord,validationColumnList:validationColumnList});})).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.Login.masterStatus!==\"\"&&props.Login.masterStatus!==state.masterStatus){toast.warn(props.Login.masterStatus);props.Login.masterStatus=\"\";}if(props.Login.error!==state.error){toast.error(props.Login.error);props.Login.error=\"\";}if(props.Login.selectedRecord===undefined){return{selectedRecord:{}};}return null;}}]);return EDQMProduct;}(React.Component);export default connect(mapStateToProps,{callService:callService,crudMaster:crudMaster,updateStore:updateStore,validateEsignCredential:validateEsignCredential,edqmProductFetchRecord:edqmProductFetchRecord})(injectIntl(EDQMProduct));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/edqmmaster/EDQMProduct.jsx"],"names":["React","connect","FormattedMessage","injectIntl","DataGrid","SlideOutModal","Esign","AddEDQMProduct","ListWrapper","Row","Col","FormGroup","FormLabel","toast","process","MediaLabel","rsapi","Axios","callService","crudMaster","updateStore","validateEsignCredential","edqmProductFetchRecord","DEFAULT_RETURN","constructOptionList","getControlMap","showEsign","transactionStatus","mapStateToProps","state","Login","EDQMProduct","props","dataStateChange","event","setState","dataResult","data","dataState","closeModal","loadEsign","openModal","selectedRecord","operation","safetyMarkByID","productTypeByID","updateInfo","typeName","selectedId","getNestedFieldData","nestedColumnArray","reduce","xs","x","expandChange","isExpanded","dataItem","expanded","undefined","aggregates","detailBand","Dataitem","OptionalFieldList","datafield","Column","map","fields","detailedFieldList","dataField","idsName","columnSize","onComboChange","comboData","fieldName","value","getProductTypeMandatory","getSafetyMarkerMandatory","fetchRecord","primaryKeyName","primaryKeyValue","productDomainData","post","userInfo","productDescData","productTypeData","bulkTypeData","componentBulkData","masterFileData","safetyFileData","urlArray","productData","inputParam","classUrl","methodUrl","all","then","spread","nproductdomaincode","nproductdesccode","nproducttypecode","nbulktypecode","ncomponentbulkgroupcode","nmasterfiletypecode","nsafetymarkercode","response","push","label","isOpen","catch","error","status","message","warn","onInputOnChange","target","type","name","checked","deleteRecord","deleteParam","displayName","inputData","toLowerCase","userRoleControlRights","nformcode","ncontrolCode","screenData","masterData","screenName","reloadData","onSaveClick","saveType","formRef","fieldList","item","nmastersitecode","intl","formatMessage","id","validateEsign","sreason","password","createRef","extractedColumnList","skip","take","settings","parseInt","addScreen","masterStatus","productTypeMandatory","controlMap","Map","validationColumnList","mandatoryFields","forEach","mandatory","addId","has","concat","get","ncontrolcode","editId","edqmAddParam","primaryKeyField","edqmEditParam","edqmDeleteParam","buttonCount","pageSizes","previousProps","Object","values","productDomainDataEDQM","productDescDataEDQM","productTypeDataEDQM","bulkTypeDataEDQM","componentBulkDataEDQM","masterFileDataEDQM","safetyFileDataEDQM","ProductDescCode","url","nproducttypemand","YES","ProductTypeCode","safetyMarkert","safetyFileData1","nsafetymarkermand","index","findIndex","splice","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport DataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddEDQMProduct from './AddEDQMProduct';\r\n\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport { Row, Col, FormGroup, FormLabel } from 'react-bootstrap';//, Card, Form, Modal\r\nimport { toast } from 'react-toastify';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { MediaLabel } from '../../components/add-client.styles';\r\nimport rsapi from '../../rsapi';\r\nimport Axios from 'axios';\r\nimport { callService, crudMaster, updateStore, validateEsignCredential, edqmProductFetchRecord } from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { constructOptionList, getControlMap, showEsign } from '../../components/CommonScript';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass EDQMProduct extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n        this.fieldList = [];\r\n       \r\n\r\n\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            addScreen: false, data: [], masterStatus: \"\", error: \"\", operation: \"create\",\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            productDomainData: [], productDescData: [], productTypeData: [], bulkTypeData: [], componentBulkData: [],\r\n            masterFileData: [], safetyFileData: [],\r\n            productTypeByID: [], productTypeMandatory: 0,\r\n            safetyMarkByID: [], isOpen: false,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            selectedRecord: {},\r\n            nproductdomaincode: [], nproductdesccode: [], nproducttypecode: [], nbulktypecode: [],\r\n            ncomponentbulkgroupcode: [], nmasterfiletypecode: [], nsafetymarkercode: [],\r\n            //mandatoryFields:[]\r\n\r\n            validationColumnList: [\r\n                { \"idsName\": \"IDS_PRODUCTNAME\", \"dataField\": \"sofficialproductname\", \"width\": \"300px\", \"mandatory\": true  , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                { \"idsName\": \"IDS_PRODUCTDOMAIN\", \"dataField\": \"nproductdomaincode\", \"width\": \"200px\", \"mandatory\": true  , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                { \"idsName\": \"IDS_PRODUCTDESC\", \"dataField\": \"nproductdesccode\", \"width\": \"200px\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n            ]\r\n        };\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data, event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        this.setState({ safetyMarkByID: [], productTypeByID: [] });\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId: null, operation: this.props.Login.operation }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }\r\n        if (props.Login.selectedRecord === undefined) {\r\n            return { selectedRecord: {} }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getNestedFieldData = (nestedColumnArray, data) =>\r\n        nestedColumnArray.reduce((xs, x) => (xs && xs[x]) ? xs[x] : null, data);\r\n\r\n    render() {\r\n\r\n        //let primaryKeyField = \"\";\r\n        \r\n        this.extractedColumnList = [\r\n            { \"idsName\": \"IDS_PRODUCTNAME\", \"dataField\": \"sofficialproductname\", \"width\": \"300px\" },\r\n            { \"idsName\": \"IDS_PRODUCTDOMAIN\", \"dataField\": \"sproductdomain\", \"width\": \"200px\" },\r\n            { \"idsName\": \"IDS_PRODUCTCLASS\", \"dataField\": \"sproductclass\", \"width\": \"200px\" },\r\n            // { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"sproducttype\", \"width\": \"200px\" },\r\n            // { \"idsName\": \"IDS_BULKTYPE\", \"dataField\": \"sbulktype\", \"width\": \"200px\" },\r\n            // { \"idsName\": \"IDS_COMPONENTBULKGROUP\", \"dataField\": \"scomponentbulkgroup\", \"width\": \"200px\" },\r\n            // { \"idsName\": \"IDS_MASTERFILETYPE\", \"dataField\": \"smasterfiletype\", \"width\": \"200px\" },\r\n            // { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"ssafetymarkername\", \"width\": \"200px\" },\r\n\r\n\r\n        ]\r\n        //primaryKeyField = \"nofficialproductcode\";\r\n        //let validationColumnList = [];\r\n        this.fieldList = [\"sofficialproductname\", \"nproductdomaincode\", \"nproductdesccode\", \"nproducttypecode\", \"nbulktypecode\", \"ncomponentbulkgroupcode\", \"nmasterfiletypecode\", \"nsafetymarkercode\"];\r\n        // validationColumnList = [\r\n        //     { \"idsName\": \"IDS_PRODUCTNAME\", \"dataField\": \"sofficialproductname\", \"width\": \"300px\", \"mandatory\": true },\r\n        //     { \"idsName\": \"IDS_PRODUCTDOMAIN\", \"dataField\": \"nproductdomaincode\", \"width\": \"200px\", \"mandatory\": true },\r\n        //     { \"idsName\": \"IDS_PRODUCTDESC\", \"dataField\": \"nproductdesccode\", \"width\": \"200px\", \"mandatory\": true },\r\n        // ]\r\n        // if (this.state.productTypeByID.nproducttypemand === transactionStatus.YES && this.state.safetyMarkByID.nsafetymarkermand === 3) {\r\n        //     this.validationColumnList.push(\r\n        //         { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"nproducttypecode\", \"width\": \"200px\", \"mandatory\": true },\r\n        //         { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"nsafetymarkercode\", \"width\": \"200px\", \"mandatory\": true },\r\n        //     );\r\n        // }\r\n        // else {\r\n        // if (this.state.productTypeByID.nproducttypemand === transactionStatus.YES) {\r\n        //     validationColumnList.push(\r\n        //         { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"nproducttypecode\", \"width\": \"200px\", \"mandatory\": true },\r\n\r\n        //     );\r\n        // }\r\n        // if (this.state.safetyMarkByID.nsafetymarkermand === transactionStatus.YES) {\r\n        //     validationColumnList.push(\r\n        //        { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"nsafetymarkercode\", \"width\": \"200px\", \"mandatory\": true },\r\n        //     );\r\n        // }\r\n        //}\r\n        const mandatoryFields = [];\r\n        this.state.validationColumnList.forEach(item => item.mandatory === true ?\r\n            mandatoryFields.push(item) : \"\"\r\n        );\r\n\r\n        const addId = this.props.Login.inputParam && this.state.controlMap.has(\"Add\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Add\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n\r\n\r\n        const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\".concat(this.props.Login.inputParam.methodUrl))\r\n            && this.state.controlMap.get(\"Edit\".concat(this.props.Login.inputParam.methodUrl)).ncontrolcode;\r\n        const edqmAddParam = {\r\n            screenName: \"EDQM Product\", operation: \"create\", primaryKeyField: \"nofficialproductcode\",\r\n            primaryKeyValue: null, masterData: null, userInfo: this.props.Login.userInfo,\r\n            ncontrolCode: addId\r\n        };\r\n\r\n        const edqmEditParam = {\r\n            screenName: \"EDQM Product\", operation: \"update\", primaryKeyField: \"nofficialproductcode\",\r\n            masterData: null, userInfo: this.props.Login.userInfo,\r\n            ncontrolCode: editId\r\n        };\r\n        const edqmDeleteParam = { screenName: \"EDQMProduct\", methodUrl: \"EDQMProduct\", operation: \"delete\" };\r\n\r\n        return (\r\n\r\n            <>\r\n                <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">\r\n                            {/* <PrimaryHeader className=\"d-flex justify-content-between mb-3\"> */}\r\n                            {/* <HeaderName className=\"header-primary-md\">\r\n                                    {this.props.Login.inputParam && this.props.Login.inputParam.displayName ?\r\n                                        <FormattedMessage id={this.props.Login.inputParam.displayName} /> : \"\"}\r\n                                </HeaderName> */}\r\n\r\n                            {/* <Button className=\"btn btn-user btn-primary-blue\"\r\n                                    hidden={this.props.Login.inputParam && this.state.userRoleControlRights.indexOf(addId) === -1}\r\n                                    onClick={() => this.props.edqmProductFetchRecord(edqmAddParam)} role=\"button\">\r\n                                    <FontAwesomeIcon icon={faPlus} /> { }\r\n                                    <FormattedMessage id={\"IDS_ADD\"} defaultMessage='Add' />\r\n                                </Button>\r\n                            </PrimaryHeader> */}\r\n\r\n\r\n                            {this.state.data ?\r\n                                <DataGrid\r\n                                    primaryKeyField={\"nofficialproductcode\"}\r\n                                    expandField=\"expanded\"\r\n                                    detailedFieldList={this.detailedFieldList}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    fetchRecord={this.props.edqmProductFetchRecord}\r\n                                    editParam={edqmEditParam}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    deleteParam={edqmDeleteParam}\r\n                                    reloadData={this.reloadData}\r\n                                    addRecord={() => this.props.edqmProductFetchRecord(edqmAddParam)}\r\n                                    pageable={{ buttonCount: 4, pageSizes: true }}\r\n                                    scrollable={\"scrollable\"}\r\n                                    gridHeight={\"600px\"}\r\n                                    isActionRequired={true}\r\n                                    isToolBarRequired={true}\r\n                                    // isComponent={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                    hasDynamicColSize={true}\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row>\r\n                {this.props.Login.openModal &&\r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={mandatoryFields}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            />\r\n                            : <AddEDQMProduct\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                onComboChange={this.onComboChange}\r\n                                formatMessage={this.props.intl.formatMessage}\r\n                                productDomainData={this.state.productDomainData || []}//{this.props.Login.productDomainData}\r\n                                productDescData={this.state.productDescData || []}//{this.props.Login.productDescData}\r\n                                productTypeData={this.state.productTypeData || []}//{this.props.Login.productTypeData}\r\n                                productTypeByID={this.state.productTypeByID}//{this.props.Login.productTypeByID}\r\n                                bulkTypeData={this.state.bulkTypeData || []}//{this.props.Login.bulkTypeData}\r\n                                componentBulkData={this.state.componentBulkData || []}//{this.props.Login.componentBulkData}\r\n                                masterFileData={this.state.masterFileData || []}//{this.props.Login.masterFileData}\r\n                                safetyFileData={this.state.safetyFileData}//{this.props.Login.safetyFileData}\r\n                                safetyMarkByID={this.state.safetyMarkByID}//{this.props.Login.safetyMarkByID}\r\n                                nproductdomaincode={this.props.Login.nproductdomaincode}\r\n                                nproductdesccode={this.props.Login.nproductdesccode}\r\n                                nproducttypecode={this.props.Login.nproducttypecode}\r\n                                nbulktypecode={this.props.Login.nbulktypecode}\r\n                                ncomponentbulkgroupcode={this.props.Login.ncomponentbulkgroupcode}\r\n                                nmasterfiletypecode={this.props.Login.nmasterfiletypecode}\r\n                                nsafetymarkercode={this.props.Login.nsafetymarkercode}\r\n\r\n                            />}\r\n                    />\r\n                }\r\n            </>\r\n        );\r\n    }\r\n\r\n    expandChange = (event) => {\r\n        const isExpanded =\r\n            event.dataItem.expanded === undefined ?\r\n                event.dataItem.aggregates : event.dataItem.expanded;\r\n        event.dataItem.expanded = !isExpanded;\r\n        this.setState({ ...this.props });\r\n    }\r\n\r\n    detailBand = (props) => {\r\n\r\n        const Dataitem = props.dataItem\r\n        const OptionalFieldList = [\r\n            { datafield: \"sproducttype\", Column: \"Product Type\" },\r\n            { datafield: \"sbulktype\", Column: \"Bulk Type\" },\r\n            { datafield: \"scomponentbulkgroup\", Column: \"Component Bulk Group\" },\r\n            { datafield: \"smasterfiletype\", Column: \"Master File Type\" },\r\n            { datafield: \"ssafetymarkername\", Column: \"Safety Marker Name\" },\r\n        ];\r\n        return (<Row>\r\n            {OptionalFieldList.map((fields) => {\r\n                return (\r\n                    <Col md='6'>\r\n                        <FormGroup>\r\n                            <FormLabel><FormattedMessage id={fields.Column} message={fields.Column} /></FormLabel>\r\n                            <MediaLabel className=\"readonly-text font-weight-normal\">{Dataitem[fields.datafield]}</MediaLabel>\r\n                        </FormGroup>\r\n                    </Col>\r\n                )\r\n            })\r\n            }\r\n        </Row>)\r\n    }\r\n\r\n    detailedFieldList = [\r\n        { dataField: \"sproducttype\", idsName: \"IDS_PRODUCTTYPE\" , columnSize:\"4\"},\r\n        { dataField: \"sbulktype\", idsName: \"IDS_BULKTYPE\" , columnSize:\"4\"},\r\n        { dataField: \"scomponentbulkgroup\", idsName: \"IDS_COMPONENTBULKGROUP\" , columnSize:\"4\"},\r\n        { dataField: \"smasterfiletype\", idsName: \"IDS_MASTERFILETYPE\" , columnSize:\"4\"},\r\n        { dataField: \"ssafetymarkername\", idsName: \"IDS_SAFETYMARKNAME\" , columnSize:\"4\"},\r\n        //{ \"idsName\": \"IDS_DISPLAYSTATUS\", \"dataField\": \"sdisplaystatus\", \"width\": \"20%\", \"isIdsField\": true, \"controlName\": \"ndefaultstatus\" }\r\n\r\n    ];\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        if (comboData != null) {\r\n            const selectedRecord = this.state.selectedRecord || {};\r\n            selectedRecord[fieldName] = comboData.value;\r\n\r\n            if (fieldName === \"nproductdesccode\") {\r\n                this.getProductTypeMandatory(comboData.value, selectedRecord)\r\n            }\r\n            if (fieldName === \"nproducttypecode\") {\r\n                this.getSafetyMarkerMandatory(comboData.value, selectedRecord)\r\n            }\r\n            else {\r\n                this.setState({ selectedRecord });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.setState({\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData,\r\n                    dataResult: process(this.props.Login.masterData, this.state.dataState),\r\n                });\r\n            }\r\n            else {\r\n\r\n                let { dataState } = this.state;\r\n                if (this.props.Login.dataState === undefined) {\r\n                    dataState = { skip: 0, take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5 }\r\n                }\r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData,\r\n                    dataResult: process(this.props.Login.masterData, dataState),\r\n                    dataState\r\n                });\r\n            }\r\n        }\r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });\r\n        }\r\n        if (this.props.Login.productDomainData !== previousProps.Login.productDomainData || this.props.Login.productDescData !== previousProps.Login.productDescData || this.props.Login.productTypeData !== previousProps.Login.productTypeData ||\r\n            this.props.Login.bulkTypeData !== previousProps.Login.bulkTypeData || this.props.Login.componentBulkData !== previousProps.Login.componentBulkData || this.props.Login.masterFileData !== previousProps.Login.masterFileData ||\r\n            this.props.Login.safetyFileData !== previousProps.Login.safetyFileData) {\r\n\r\n            const productDomainData = constructOptionList(this.props.Login.productDomainData || [], \"nproductdomaincode\",\r\n                \"sproductdomain\", undefined, undefined, undefined);\r\n            const productDomainDataEDQM = productDomainData.get(\"OptionList\");\r\n\r\n            const productDescData = constructOptionList(this.props.Login.productDescData || [], \"nproductdesccode\",\r\n                \"sproductclass\", undefined, undefined, undefined);\r\n            const productDescDataEDQM = productDescData.get(\"OptionList\");\r\n\r\n            const productTypeData = constructOptionList(this.props.Login.productTypeData || [], \"nproducttypecode\",\r\n                \"sproducttype\", undefined, undefined, undefined);\r\n            const productTypeDataEDQM = productTypeData.get(\"OptionList\");\r\n\r\n            const bulkTypeData = constructOptionList(this.props.Login.bulkTypeData || [], \"nbulktypecode\",\r\n                \"sbulktype\", undefined, undefined, undefined);\r\n            const bulkTypeDataEDQM = bulkTypeData.get(\"OptionList\");\r\n\r\n            const componentBulkData = constructOptionList(this.props.Login.componentBulkData || [], \"ncomponentbulkgroupcode\",\r\n                \"scomponentbulkgroup\", undefined, undefined, undefined);\r\n            const componentBulkDataEDQM = componentBulkData.get(\"OptionList\");\r\n\r\n            const masterFileData = constructOptionList(this.props.Login.masterFileData || [], \"nmasterfiletypecode\",\r\n                \"smasterfiletype\", undefined, undefined, undefined);\r\n            const masterFileDataEDQM = masterFileData.get(\"OptionList\");\r\n\r\n            const safetyFileData = constructOptionList(this.props.Login.safetyFileData || [], \"nsafetymarkercode\",\r\n                \"ssafetymarkername\", undefined, undefined, undefined);\r\n            const safetyFileDataEDQM = safetyFileData.get(\"OptionList\");\r\n\r\n            this.setState({\r\n                productDomainData: productDomainDataEDQM, productDescData: productDescDataEDQM, productTypeData: productTypeDataEDQM,\r\n                bulkTypeData: bulkTypeDataEDQM, componentBulkData: componentBulkDataEDQM, masterFileData: masterFileDataEDQM, safetyFileData: safetyFileDataEDQM\r\n            });\r\n        }\r\n    }\r\n\r\n    fetchRecord = (primaryKeyName, primaryKeyValue, operation) => {\r\n\r\n        const productDomainData = rsapi.post(\"edqmproductdomain/getEDQMProductDomain\", { \"userinfo\": this.props.Login.userInfo });\r\n        const productDescData = rsapi.post(\"edqmproductdescription/getEDQMProductDescription\", { \"userinfo\": this.props.Login.userInfo });\r\n        const productTypeData = rsapi.post(\"edqmproducttype/getAllEDQMProductType\", { \"userinfo\": this.props.Login.userInfo });\r\n        const bulkTypeData = rsapi.post(\"edqmbulktype/getAllEDQMBulkType\", { \"userinfo\": this.props.Login.userInfo });\r\n        const componentBulkData = rsapi.post(\"edqmcomponentbulkgroup/getAllEDQMComponentBulkGroup\", { \"userinfo\": this.props.Login.userInfo });\r\n        const masterFileData = rsapi.post(\"edqmmasterfiletype/getAllEDQMMasterFileType\", { \"userinfo\": this.props.Login.userInfo });\r\n        const safetyFileData = rsapi.post(\"edqmsafetymarker/getAllEDQMSafetyMarker\", { \"userinfo\": this.props.Login.userInfo });\r\n\r\n        let urlArray = [];\r\n\r\n        if (operation === \"update\") {\r\n            const productData = rsapi.post(this.props.Login.inputParam.classUrl + \"/getActive\" + this.props.Login.inputParam.methodUrl + \"ById\", { [primaryKeyName]: primaryKeyValue, \"userinfo\": this.props.Login.userInfo });\r\n\r\n            urlArray = [productDomainData, productDescData, productTypeData, bulkTypeData, componentBulkData, masterFileData, safetyFileData, productData];\r\n        }\r\n        else {\r\n            urlArray = [productDomainData, productDescData, productTypeData, bulkTypeData, componentBulkData, masterFileData, safetyFileData];\r\n\r\n        }\r\n\r\n        Axios.all(urlArray)\r\n            .then(Axios.spread((...response) => {\r\n\r\n                let nproductdomaincode = [];\r\n                let nproductdesccode = [];\r\n                let nproducttypecode = [];\r\n                let nbulktypecode = [];\r\n                let ncomponentbulkgroupcode = [];\r\n                let nmasterfiletypecode = [];\r\n                let nsafetymarkercode = [];\r\n\r\n                if (operation === \"update\") {\r\n\r\n                    nproductdomaincode.push({\r\n                        label: response[7].data[\"sproductdomain\"],\r\n                        value: response[7].data[\"nproductdomaincode\"]\r\n                    });\r\n\r\n                    nproductdesccode.push({\r\n                        label: response[7].data[\"sproductclass\"],\r\n                        value: response[7].data[\"nproductdesccode\"]\r\n                    });\r\n\r\n                    nproducttypecode.push({\r\n                        label: response[7].data[\"sproducttype\"],\r\n                        value: response[7].data[\"nproducttypecode\"]\r\n                    });\r\n\r\n                    nbulktypecode.push({\r\n                        label: response[7].data[\"sbulktype\"],\r\n                        value: response[7].data[\"nbulktypecode\"]\r\n                    });\r\n\r\n                    ncomponentbulkgroupcode.push({\r\n                        label: response[7].data[\"scomponentbulkgroup\"],\r\n                        value: response[7].data[\"ncomponentbulkgroupcode\"]\r\n                    });\r\n\r\n                    nmasterfiletypecode.push({\r\n                        label: response[7].data[\"smasterfiletype\"],\r\n                        value: response[7].data[\"nmasterfiletypecode\"]\r\n                    });\r\n\r\n                    nsafetymarkercode.push({\r\n                        label: response[7].data[\"ssafetymarkername\"],\r\n                        value: response[7].data[\"nsafetymarkercode\"]\r\n                    });\r\n                }\r\n                this.setState({\r\n                    productDomainData: response[0].data, productDescData: response[1].data,\r\n                    productTypeData: response[2].data, bulkTypeData: response[3].data,\r\n                    componentBulkData: response[4].data, masterFileData: response[5].data,\r\n                    safetyFileData: response[6].data,\r\n                    nproductdomaincode, nproductdesccode, nproducttypecode, nbulktypecode,\r\n                    ncomponentbulkgroupcode, nmasterfiletypecode, nsafetymarkercode,\r\n                    isOpen: true, selectedRecord: operation === \"update\" ? response[7].data : undefined, operation: operation\r\n                });\r\n\r\n\r\n            }))\r\n\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            if (event.target.name === \"agree\") {\r\n                selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n            }\r\n        }\r\n        else if (event.target.type === 'select-one') {\r\n            if (event.target.name === \"nproductdesccode\") {\r\n\r\n                this.getProductTypeMandatory((event.target.value))\r\n            }\r\n            if (event.target.name === \"nproducttypecode\") {\r\n                this.getSafetyMarkerMandatory((event.target.value))\r\n            }\r\n\r\n            selectedRecord[event.target.name] = event.target.value;\r\n\r\n        }\r\n        else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n\r\n\r\n    }\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        if (deleteParam.selectedRecord.expanded !== undefined) {\r\n            delete deleteParam.selectedRecord.expanded\r\n        }\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: deleteParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: {\r\n\r\n                [deleteParam.methodUrl.toLowerCase()]: deleteParam.selectedRecord,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n\r\n            operation: deleteParam.operation, dataState: this.state.dataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true,\r\n\r\n                    screenName: deleteParam.screenName, operation: deleteParam.operation\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    getProductTypeMandatory(ProductDescCode, selectedRecord) {\r\n        const url = \"edqmproductdescription/getActiveEDQMProductDescriptionById\";\r\n        rsapi.post(url, { \"nproductdesccode\": parseInt(ProductDescCode), \"userinfo\": this.props.Login.userInfo })\r\n            .then(response => {\r\n                const productTypeByID = response.data;\r\n                const validationColumnList = this.state.validationColumnList;\r\n                if (productTypeByID.nproducttypemand === transactionStatus.YES) {\r\n                    validationColumnList.push(\r\n                        { \"idsName\": \"IDS_PRODUCTTYPE\", \"dataField\": \"nproducttypecode\", \"width\": \"200px\", \"mandatory\": true },\r\n\r\n                    );\r\n                }\r\n\r\n                this.setState({ productTypeByID, selectedRecord, validationColumnList });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n    getSafetyMarkerMandatory(ProductTypeCode, selectedRecord) {\r\n\r\n        const url = rsapi.post(\"edqmproducttype/getActiveEDQMProductTypeById\", { \"nproducttypecode\": parseInt(ProductTypeCode), \"userinfo\": this.props.Login.userInfo });\r\n        const safetyMarkert = rsapi.post(\"edqmsafetymarker/getSafetyMarkers\", { \"nproducttypecode\": parseInt(ProductTypeCode), \"userinfo\": this.props.Login.userInfo });\r\n        let urlArray = [url, safetyMarkert];\r\n        Axios.all(urlArray)\r\n            .then(Axios.spread((...response) => {\r\n                const safetyFileData1 = constructOptionList(response[1].data || [], \"nsafetymarkercode\",\r\n                    \"ssafetymarkername\", undefined, undefined, undefined);\r\n                const safetyFileDataEDQM = safetyFileData1.get(\"OptionList\");\r\n                const safetyMarkByID = response[0].data;\r\n                const validationColumnList = this.state.validationColumnList;\r\n\r\n                if (safetyMarkByID.nsafetymarkermand === transactionStatus.YES) {\r\n                    validationColumnList.push(\r\n                        { \"idsName\": \"IDS_SAFETYMARKNAME\", \"dataField\": \"nsafetymarkercode\", \"width\": \"200px\", \"mandatory\": true },\r\n                    );\r\n                }\r\n                else {\r\n                    let index = validationColumnList.findIndex(data => data.idsName === \"IDS_SAFETYMARKNAME\");\r\n                    if (index > -1) {\r\n                        validationColumnList.splice(index, 1);\r\n                    }\r\n                }\r\n\r\n                this.setState({\r\n                    safetyFileData: safetyFileDataEDQM,\r\n                    safetyMarkByID,\r\n                    isOpen: true,\r\n                    selectedRecord, validationColumnList\r\n                });\r\n            }))\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            userInfo: this.props.Login.userInfo\r\n        };\r\n\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n        // let selectedRecord = {};\r\n\r\n\r\n        if (this.props.Login.operation === \"update\") {\r\n            selectedId = this.props.Login.selectedId;\r\n            // edit\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = this.state.selectedRecord;\r\n\r\n            this.fieldList.map(item => {\r\n                return inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][item] = this.state.selectedRecord[item]\r\n            })\r\n            dataState = this.state.dataState;\r\n        }\r\n        else {\r\n            //add       this.fieldList = [\"sofficialproductname\", \"nproductdomaincode\", \"nproductdesccode\", \"nproducttypecode\", \r\n            //\"nbulktypecode\", \"ncomponentbulkgroupcode\", \"nmasterfiletypecode\", \"nsafetymarkercode\"];            \r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()] = { \"nsitecode\": this.props.Login.userInfo.nmastersitecode };\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"sofficialproductname\"] = this.state.selectedRecord[\"sofficialproductname\"];\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproductdomaincode\"] = this.state.selectedRecord[\"nproductdomaincode\"];\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproductdesccode\"] = this.state.selectedRecord[\"nproductdesccode\"];\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nproducttypecode\"] = this.state.selectedRecord[\"nproducttypecode\"] ?\r\n                this.state.selectedRecord[\"nproducttypecode\"] : -1;\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nbulktypecode\"] = this.state.selectedRecord[\"nbulktypecode\"] ?\r\n                this.state.selectedRecord[\"nbulktypecode\"] : -1;\r\n\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"ncomponentbulkgroupcode\"] = this.state.selectedRecord[\"ncomponentbulkgroupcode\"] ?\r\n                this.state.selectedRecord[\"ncomponentbulkgroupcode\"] : -1\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nmasterfiletypecode\"] = this.state.selectedRecord[\"nmasterfiletypecode\"] ?\r\n                this.state.selectedRecord[\"nmasterfiletypecode\"] : -1\r\n\r\n            inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][\"nsafetymarkercode\"] = this.state.selectedRecord[\"nsafetymarkercode\"] ?\r\n                this.state.selectedRecord[\"nsafetymarkercode\"] : -1\r\n            // this.fieldList.map(item => {\r\n            //     return inputData[this.props.Login.inputParam.methodUrl.toLowerCase()][item] = this.state.selectedRecord[item]\r\n            // })\r\n        }\r\n\r\n        const inputParam = {\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            displayName: this.props.Login.inputParam.displayName,\r\n            inputData: inputData,\r\n            operation: this.props.Login.operation, saveType, formRef, dataState, selectedId\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }),\r\n                    operation: this.props.Login.operation, selectedId\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n     this.setState({ safetyMarkByID: [], productTypeByID: [] }); \r\n    }\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    callService, crudMaster, updateStore, validateEsignCredential,\r\n    edqmProductFetchRecord\r\n})(injectIntl(EDQMProduct));"]},"metadata":{},"sourceType":"module"}