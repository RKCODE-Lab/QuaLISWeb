{"ast":null,"code":"import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from\"react-toastify\";import{intl}from\"../components/App\";import{constructOptionList,replaceUpdatedObject,sortData}from\"../components/CommonScript\";import{reportCOAType,REPORTTYPE}from\"../components/Enumeration\";import rsapi from\"../rsapi\";import{initRequest}from\"./LoginAction\";import{DEFAULT_RETURN}from\"./LoginTypes\";export function getSubSampleBySample(methodParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getSubSampleBySample\",{nsitecode:methodParam.nsitecode,npreregno:methodParam.primaryKeyValue,userinfo:methodParam.userInfo}).then(function(response){// let releaseSubSample = response.data[\"ReleaseSubSample\"];  \nvar releaseSubSample=methodParam.masterData.releaseSubSample||new Map();releaseSubSample.set(parseInt(Object.keys(response.data[\"ReleaseSubSample\"])[0]),Object.values(response.data[\"ReleaseSubSample\"])[0]);var masterData=_objectSpread(_objectSpread({},methodParam.masterData),{},{releaseSubSample:releaseSubSample},response.data);//  sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:methodParam.data,releaseSubSample:releaseSubSample,dataState:methodParam.dataState,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedSamples(userInfo,controlId,selectedSampleData,data,flag){var npreregno=\"\";selectedSampleData.map(function(item,i){var s=\"\";npreregno=npreregno+item.npreregno;if(i<selectedSampleData.length){if(i<selectedSampleData.length-1){s=\",\";}npreregno=npreregno+s;}else{npreregno=item.npreregno;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedSample\",{npreregno:npreregno,nregtypecode:selectedSampleData[0].nregtypecode,nregsubtypecode:selectedSampleData[0].nregsubtypecode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedSubSamples(userInfo,controlId,selectedSubSampleData,data,flag){var ntransactionsamplecode=\"\";var npreregno=\"\";selectedSubSampleData.map(function(item,i){var s=\"\";ntransactionsamplecode=ntransactionsamplecode+item.ntransactionsamplecode;npreregno=npreregno+item.npreregno;if(i<selectedSubSampleData.length){if(i<selectedSubSampleData.length-1){s=\",\";}ntransactionsamplecode=ntransactionsamplecode+s;npreregno=npreregno+s;}else{ntransactionsamplecode=item.ntransactionsamplecode;npreregno=item.npreregno;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedSubSample\",{npreregno:npreregno,ntransactionsamplecode:ntransactionsamplecode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTestBySample(methodParam,kjkj){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getTestBySample\",{nsitecode:methodParam.nsitecode,npreregno:methodParam.viewRow.npreregno,ntransactionsamplecode:methodParam.viewRow.ntransactionsamplecode,userinfo:methodParam.userInfo}).then(function(response){var releaseTest=methodParam.masterData.releaseTest||new Map();releaseTest.set(parseInt(Object.keys(response.data[\"ReleaseTest\"])[0]),Object.values(response.data[\"ReleaseTest\"])[0]);var masterData=_objectSpread(_objectSpread({},methodParam.masterData),{},{releaseTest:releaseTest},response.data);//  sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:methodParam.data,releaseTest:releaseTest,dataState:methodParam.dataState,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedTest(userInfo,controlId,selectedTestData,data,flag){var ntransactionsamplecode=\"\";var npreregno=\"\";var ntransactiontestcode=\"\";selectedTestData.map(function(item,i){var s=\"\";ntransactionsamplecode=ntransactionsamplecode+item.ntransactionsamplecode;npreregno=npreregno+item.npreregno;ntransactiontestcode=ntransactiontestcode+item.ntransactiontestcode;if(i<selectedTestData.length){if(i<selectedTestData.length-1){s=\",\";}ntransactionsamplecode=ntransactionsamplecode+s;npreregno=npreregno+s;ntransactiontestcode=ntransactiontestcode+s;}else{ntransactionsamplecode=item.ntransactionsamplecode;npreregno=item.npreregno;ntransactiontestcode=item.ntransactiontestcode;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedTest\",{npreregno:npreregno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}// export function getReleaseSelectedSampleSubSampleTest(userInfo, control, SampleArray1, SubSampleArray1, TestArray1,SampleArray,SubSampleArray,TestArray,Data1,k) {    \n//    let ntransactionsamplecode = \"\"\n//    let npreregno = \"\"\n//     let ntransactiontestcode = \"\" \n//     let bFlag = \"\" \n//     if (TestArray !== undefined) {\n//         TestArray.map(test => {\n//             ntransactionsamplecode += test.ntransactionsamplecode + ',';\n//             npreregno += test.npreregno + ',';\n//             ntransactiontestcode += test.ntransactiontestcode + ',';\n//         })\n//         TestArray = {\n//             ntransactionsamplecode: ntransactionsamplecode,\n//             npreregno: npreregno,\n//             ntransactiontestcode: ntransactiontestcode,\n//             bFlag:\"3\"\n//         }\n//     }   \n//     if (SubSampleArray !== undefined) {\n//         SubSampleArray.map(SubSample => {\n//             ntransactionsamplecode += SubSample.ntransactionsamplecode + ',';\n//             npreregno += SubSample.npreregno + ',';\n//             ntransactiontestcode += SubSample.ntransactiontestcode + ',';\n//             SubSampleArray = {\n//                 ntransactionsamplecode: ntransactionsamplecode,\n//                 npreregno: npreregno,\n//                 ntransactiontestcode: ntransactiontestcode,\n//                 bFlag:\"2\"\n//             }\n//         })\n//     }\n//     if (SampleArray !== undefined) {\n//         SampleArray.map(Sample => {\n//             ntransactionsamplecode += Sample.ntransactionsamplecode + ',';\n//             npreregno += Sample.npreregno + ',';\n//             ntransactiontestcode += Sample.ntransactiontestcode + ',';\n//         })\n//         SampleArray = {\n//             ntransactionsamplecode: ntransactionsamplecode,\n//             npreregno: npreregno,\n//             ntransactiontestcode: ntransactiontestcode,\n//             bFlag:\"1\"\n//         }\n//     }\n//     let allNpreregno = []\n//     if (SampleArray1 !== undefined) {\n//         SampleArray1.map(temp => {\n//             allNpreregno += temp + ','\n//         })\n//     }\n//     let allNtransactionsamplecode = []\n//     if (SubSampleArray1 !== undefined) {\n//         SubSampleArray1.map(temp => {\n//             allNtransactionsamplecode += temp + ','\n//         })\n//     }\n//     let allNtransactiontestcode = []\n//     if (TestArray1 !== undefined) {\n//         TestArray1.map(temp => {\n//             allNtransactiontestcode += temp + ','\n//         })\n//     }\n//     return function (dispatch) {  \n//     dispatch(initRequest(true));\n//     return rsapi.post(\"coarelease/updateStatus\", \n//         {\n//             SampleArray:SampleArray,\n//             SubSampleArray:SubSampleArray,\n//             TestArray: TestArray,\n//             userinfo: userInfo,\n//             allNtransactionsamplecode: allNtransactionsamplecode,\n//             allNtransactiontestcode: allNtransactiontestcode,\n//             allNpreregno:allNpreregno\n//         })\n//     .then(response=>{ \n//        // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \n//        let releaseSubSample = Data1.releaseSubSample || new Map();           \n//        let releaseTest = Data1.releaseTest || new Map();           \n//        releaseSubSample = Data1.releaseSubSample || new Map();           \n//              releaseTest = Data1.releaseTest || new Map();\n// if(response.data.body[\"cFlag\"]===\"3\"){\n//             releaseTest.set(parseInt(Object.keys(response.data.body[\"ReleaseTest\"])[0]), Object.values(response.data.body[\"ReleaseTest\"])[0]);\n//        }\n//       //  else {\n//         if(response.data.body[\"cFlag\"]===\"2\"){\n//             releaseSubSample.set(parseInt(Object.keys(response.data.body[\"ReleaseSubSample\"])[0]), Object.values(response.data.body[\"ReleaseSubSample\"])[0]);\n//         }\n//         let masterData = { ...Data1, releaseSubSample,releaseTest,...response.data.body};\n//             sortData(masterData);\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData,\n//                 data:releaseSubSample,releaseTest,\n//                       //  dataState:dataState,\n//                         loading:false\n//                     }});\n//         })\n//         .catch(error=>{\n//             dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\n//             if (error.response.status === 500){\n//                 toast.error(error.message);\n//             } \n//             else{               \n//                 toast.warn(error.response.data);\n//             }  \n//         })        \n//     }\n// }\nexport function getReleaseSelectedSampleSubSampleTest(userInfo,Data1,inputData){return function(dispatch){if(inputData!==undefined&&inputData.npreregno!==\"\"){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateStatus\",inputData).then(function(response){if(response.data.statusCodeValue!==200){toast.warn(intl.formatMessage({id:response.data.body}));dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else{var groupBy=function groupBy(objectArray,property){return objectArray.reduce(function(acc,obj){var key=obj[property];if(!acc[key]){acc[key]=[];}acc[key].push(obj);return acc;},{});};// Data1.ReleaseSample.map(item => {\n//     delete item[\"expanded\"]\n// });\nvar selected=[];var expanded=[];var testdata=[];var subsampleData=[];var subsampleexpanded=[];var subsampleselected=[];var subsampleDataRes=[];// let y = []\n// let a = []\n// let SubSample = Object.values(Data1.ReleaseSubSample).forEach(item1 => {\n//     item1.map(item2 => {\n//         subsampleData.push(item2)\n//         if (item2.expanded === true) {\n//             subsampleexpanded.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"expanded\": item2.expanded })\n//         }\n//         if (item2.selected === true) {\n//             subsampleselected.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"selected\": item2.selected })\n//         }\n//     })\n// });\n// let SubSampleRes = Object.values(response.data.body.ReleaseSubSample).forEach(item1 => {\n//     item1.map(item2 => {\n//         subsampleDataRes.push(item2)\n//         subsampleexpanded.map(item1 => {\n//             if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\n//                 item2[\"expanded\"] = true\n//             }\n//         })\n//         subsampleselected.map(item1 => {\n//             if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\n//                 item2[\"selected\"] = true\n//             }\n//         })\n//     })\n// });\nvar testDataRes=[];var testDataPrevious=[];// let testDataSelected = []\n// let testDataExpanded = []\n// testDataSelected = Object.values(Data1.ReleaseTest).forEach(item1 => {\n//     item1.map(item2 => {\n//         testDataPrevious.push(item2)\n//         if (item2.selected === true) {\n//             testdata.push({ \"ntransactiontestcode\": item2.ntransactiontestcode })\n//         }\n//     })\n// });\n// testDataExpanded = Object.values(response.data.body.ReleaseTest||{}).forEach(item1 => {\n//     item1.map(item2 => {\n//         testDataRes.push(item2)\n//         testdata.map(x => {\n//             if (item2.ntransactiontestcode === x.ntransactiontestcode) {\n//                 item2[\"selected\"] = true\n//             }\n//         })\n//     })\n// });\nvar ReleaseTest=replaceUpdatedObject(testDataRes,testDataPrevious,'ntransactiontestcode');var ReleaseTest1=groupBy(ReleaseTest,'ntransactionsamplecode');var ReleaseSubSample=replaceUpdatedObject(subsampleDataRes,subsampleData,'ntransactionsamplecode');var ReleaseSubSample1=groupBy(ReleaseSubSample,'npreregno');Data1.ReleaseSample.map(function(item2){if(item2.expanded===true){expanded.push({\"npreregno\":item2.npreregno,\"expanded\":item2.expanded});}if(item2.selected===true){selected.push({\"npreregno\":item2.npreregno,\"selected\":item2.selected});}});response.data.body.ReleaseSample&&response.data.body.ReleaseSample.map(function(item2){expanded.map(function(item1){if(item1.npreregno===item2.npreregno){item2[\"expanded\"]=true;}});selected.map(function(item1){if(item1.npreregno===item2.npreregno){item2[\"selected\"]=true;}});});var masterData=_objectSpread(_objectSpread(_objectSpread({},Data1),response.data.body),{},{ReleaseTest:ReleaseTest1,ReleaseSubSample:ReleaseSubSample1,ReleaseSample:replaceUpdatedObject(response.data.body.ReleaseSample,Data1.ReleaseSample,'npreregno')});// sortData(masterData);\n//  dispatch(generateReport(inputData,masterData))\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,checkedflag:false,change:inputData.change,loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTANYONESAMPLE/SUBSAMPLE/TEST\"}));}};}export function getReleaseRegistrationType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getRegistrationType\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{SampleTypeValue:inputData.SampleTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseRegistrationSubType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getRegistrationSubType\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegTypeValue:inputData.RegTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseFilterStatus(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getFilterStatus\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegSubTypeValue:inputData.RegSubTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseFilterBasedTest(inputData){return function(dispatch){if(inputData.napprovalversioncode){dispatch(initRequest(true));rsapi.post(\"coarelease/getFilterBasedTest\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegSubTypeValue:inputData.RegSubTypeValue,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,DesignTemplateMappingValue:inputData.DesignTemplateMappingValue}),loading:false}});if(response.data.rtn){toast.warn(response.data.rtn);}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_PLSSELECTALLVALUESINFILTER\"}));}};}export function getReleaseApprovalVersion(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getApprovalVersion\",inputParam.inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),responseData),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSample(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getReleaseSample\",inputParam.inputData).then(function(response){var responseData=_objectSpread({},response.data);// responseData = sortData(responseData)\nvar masterData=_objectSpread(_objectSpread({},inputParam.masterData),responseData);if(inputParam.searchSampleRef!==undefined&&inputParam.searchSampleRef.current!==null){inputParam.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputParam.searchSubSampleRef!==undefined&&inputParam.searchSubSampleRef.current!==null){inputParam.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputParam.searchTestRef!==undefined&&inputParam.searchTestRef.current!==null){inputParam.searchTestRef.current.value=\"\";// masterData['searchedTest'] = undefined\nmasterData['searchedTests']=undefined;}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,skip:0,take:inputParam.take,testskip:0,testtake:inputParam.testtake,resultDataState:_objectSpread(_objectSpread({},inputParam.resultDataState),{},{sort:undefined,filter:undefined}),instrumentDataState:_objectSpread(_objectSpread({},inputParam.instrumentDataState),{},{sort:undefined,filter:undefined}),materialDataState:_objectSpread(_objectSpread({},inputParam.materialDataState),{},{sort:undefined,filter:undefined}),taskDataState:_objectSpread(_objectSpread({},inputParam.taskDataState),{},{sort:undefined,filter:undefined}),documentDataState:_objectSpread(_objectSpread({},inputParam.documentDataState),{},{sort:undefined,filter:undefined}),resultChangeDataState:_objectSpread(_objectSpread({},inputParam.resultChangeDataState),{},{sort:undefined,filter:undefined}),testCommentDataState:_objectSpread(_objectSpread({},inputParam.testCommentDataState),{},{sort:undefined,filter:undefined}),historyDataState:_objectSpread(_objectSpread({},inputParam.historyDataState),{},{sort:undefined,filter:undefined}),samplePrintHistoryDataState:_objectSpread(_objectSpread({},inputParam.samplePrintHistoryDataState),{},{sort:undefined,filter:undefined}),sampleHistoryDataState:_objectSpread(_objectSpread({},inputParam.sampleHistoryDataState),{},{sort:undefined,filter:undefined}),checkedflag:false,npreregno:[]}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getCOAReportType(releaseParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getCOAReportType\",{userinfo:releaseParam.userInfo}).then(function(response){var reportType=[];var reportTypeMap=constructOptionList(response.data.ReportType||[],\"ncoareporttypecode\",\"scoareporttypename\",undefined,undefined,false);var ReportTypeList=reportTypeMap.get(\"OptionList\");var selectedRecord={\"ncoareporttypecode\":{\"value\":response.data.ReportType[0].ncoareporttypecode,\"label\":response.data.ReportType[0].scoareporttypename}};dispatch({type:DEFAULT_RETURN,payload:{operation:null,modalName:undefined,loading:false,dataState:undefined//,modalShow: true\n,ReportTypeList:ReportTypeList,modalTitle:\"IDS_RELEASEANDREPORTGENERATION\",selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function generateReport(inputParam,Data){return function(dispatch){dispatch(initRequest(true));var inputData={npreregno:inputParam.npreregno,//   nsectioncode: inputParam.nsectioncode || -1,\nuserinfo:inputParam.userinfo,nprimarykey:inputParam.npreregno,ncoareporttypecode:reportCOAType.SAMPLEWISE,nreporttypecode:REPORTTYPE.COAREPORT,sprimarykeyname:\"npreregno\",ncontrolcode:inputParam.ncontrolCode,nregtypecode:inputParam.nregtypecode,nregsubtypecode:inputParam.nregsubtypecode,ntransactiontestcode:inputParam.ntransactiontestcode,napproveconfversioncode:inputParam.napprovalversioncode,action:inputParam.action};rsapi.post(\"approval/generateCOAReport\",inputData).then(function(response){if(response.data.rtn===\"Success\"){document.getElementById(\"download_data\").setAttribute(\"href\",response.data.filepath);document.getElementById(\"download_data\").click();}else{toast.warn(response.data.rtn);}dispatch({type:DEFAULT_RETURN,payload:{loading:false,change:inputParam.change,masterData:Data,modalShow:false,selectedRecord:{},loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/COAReleaseAction.js"],"names":["toast","intl","constructOptionList","replaceUpdatedObject","sortData","reportCOAType","REPORTTYPE","rsapi","initRequest","DEFAULT_RETURN","getSubSampleBySample","methodParam","dispatch","post","nsitecode","npreregno","primaryKeyValue","userinfo","userInfo","then","response","releaseSubSample","masterData","Map","set","parseInt","Object","keys","data","values","type","payload","dataState","loading","catch","error","status","message","warn","getReleaseSelectedSamples","controlId","selectedSampleData","flag","map","item","i","s","length","nregtypecode","nregsubtypecode","getReleaseSelectedSubSamples","selectedSubSampleData","ntransactionsamplecode","getTestBySample","kjkj","viewRow","releaseTest","getReleaseSelectedTest","selectedTestData","ntransactiontestcode","getReleaseSelectedSampleSubSampleTest","Data1","inputData","undefined","statusCodeValue","formatMessage","id","body","groupBy","objectArray","property","reduce","acc","obj","key","push","selected","expanded","testdata","subsampleData","subsampleexpanded","subsampleselected","subsampleDataRes","testDataRes","testDataPrevious","ReleaseTest","ReleaseTest1","ReleaseSubSample","ReleaseSubSample1","ReleaseSample","item2","item1","checkedflag","change","getReleaseRegistrationType","responseData","SampleTypeValue","getReleaseRegistrationSubType","RegTypeValue","getReleaseFilterStatus","RegSubTypeValue","getReleaseFilterBasedTest","napprovalversioncode","ndesigntemplatemappingcode","DesignTemplateMappingValue","rtn","getReleaseApprovalVersion","inputParam","getReleaseSample","searchSampleRef","current","value","searchSubSampleRef","searchTestRef","showFilter","skip","take","testskip","testtake","resultDataState","sort","filter","instrumentDataState","materialDataState","taskDataState","documentDataState","resultChangeDataState","testCommentDataState","historyDataState","samplePrintHistoryDataState","sampleHistoryDataState","getCOAReportType","releaseParam","reportType","reportTypeMap","ReportType","ReportTypeList","get","selectedRecord","ncoareporttypecode","scoareporttypename","operation","modalName","modalTitle","generateReport","Data","nprimarykey","SAMPLEWISE","nreporttypecode","COAREPORT","sprimarykeyname","ncontrolcode","ncontrolCode","napproveconfversioncode","action","document","getElementById","setAttribute","filepath","click","modalShow","loadEsign"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport { intl } from \"../components/App\";\r\nimport { constructOptionList, replaceUpdatedObject, sortData } from \"../components/CommonScript\";\r\nimport { reportCOAType, REPORTTYPE } from \"../components/Enumeration\";\r\nimport rsapi from \"../rsapi\";\r\nimport { initRequest } from \"./LoginAction\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\n\r\nexport function getSubSampleBySample(methodParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getSubSampleBySample\",\r\n            {\r\n                nsitecode: methodParam.nsitecode, npreregno: methodParam.primaryKeyValue,\r\n                userinfo: methodParam.userInfo\r\n            })\r\n            .then(response => {\r\n                // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \r\n                let releaseSubSample = methodParam.masterData.releaseSubSample || new Map();\r\n\r\n                releaseSubSample.set(parseInt(Object.keys(response.data[\"ReleaseSubSample\"])[0]), Object.values(response.data[\"ReleaseSubSample\"])[0]);\r\n                let masterData = { ...methodParam.masterData, releaseSubSample, ...response.data };\r\n\r\n                //  sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: methodParam.data, releaseSubSample,\r\n                        dataState: methodParam.dataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getReleaseSelectedSamples(userInfo, controlId, selectedSampleData, data, flag) {\r\n    let npreregno = \"\";\r\n    selectedSampleData.map((item, i) => {\r\n        let s = \"\";\r\n        npreregno = npreregno + item.npreregno;\r\n        if (i < selectedSampleData.length) {\r\n            if (i < selectedSampleData.length - 1) {\r\n                s = \",\";\r\n            }\r\n            npreregno = npreregno + s;\r\n        }\r\n        else {\r\n            npreregno = item.npreregno;\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedSample\",\r\n            {\r\n                npreregno: npreregno,\r\n                nregtypecode: selectedSampleData[0].nregtypecode,\r\n                nregsubtypecode: selectedSampleData[0].nregsubtypecode,\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSelectedSubSamples(userInfo, controlId, selectedSubSampleData, data, flag) {\r\n    let ntransactionsamplecode = \"\"\r\n    let npreregno = \"\"\r\n\r\n    selectedSubSampleData.map((item, i) => {\r\n        let s = \"\"\r\n        ntransactionsamplecode = ntransactionsamplecode + item.ntransactionsamplecode;\r\n        npreregno = npreregno + item.npreregno;\r\n\r\n        if (i < selectedSubSampleData.length) {\r\n            if (i < selectedSubSampleData.length - 1) {\r\n                s = \",\"\r\n            }\r\n            ntransactionsamplecode = ntransactionsamplecode + s;\r\n            npreregno = npreregno + s;\r\n\r\n        }\r\n        else {\r\n            ntransactionsamplecode = item.ntransactionsamplecode;\r\n            npreregno = item.npreregno;\r\n\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedSubSample\",\r\n            {\r\n\r\n                npreregno: npreregno,\r\n                ntransactionsamplecode: ntransactionsamplecode,\r\n\r\n                userinfo: userInfo\r\n            })\r\n\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getTestBySample(methodParam, kjkj) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getTestBySample\",\r\n            {\r\n                nsitecode: methodParam.nsitecode, npreregno: methodParam.viewRow.npreregno,\r\n                ntransactionsamplecode: methodParam.viewRow.ntransactionsamplecode,\r\n                userinfo: methodParam.userInfo\r\n            })\r\n            .then(response => {\r\n                let releaseTest = methodParam.masterData.releaseTest || new Map();\r\n                releaseTest.set(parseInt(Object.keys(response.data[\"ReleaseTest\"])[0]), Object.values(response.data[\"ReleaseTest\"])[0]);\r\n                let masterData = { ...methodParam.masterData, releaseTest, ...response.data };\r\n\r\n                //  sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: methodParam.data,\r\n                        releaseTest,\r\n                        dataState: methodParam.dataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSelectedTest(userInfo, controlId, selectedTestData, data, flag) {\r\n    let ntransactionsamplecode = \"\"\r\n    let npreregno = \"\"\r\n    let ntransactiontestcode = \"\"\r\n\r\n    selectedTestData.map((item, i) => {\r\n        let s = \"\"\r\n        ntransactionsamplecode = ntransactionsamplecode + item.ntransactionsamplecode;\r\n        npreregno = npreregno + item.npreregno;\r\n        ntransactiontestcode = ntransactiontestcode + item.ntransactiontestcode;\r\n\r\n        if (i < selectedTestData.length) {\r\n            if (i < selectedTestData.length - 1) {\r\n                s = \",\"\r\n            }\r\n            ntransactionsamplecode = ntransactionsamplecode + s;\r\n            npreregno = npreregno + s;\r\n            ntransactiontestcode = ntransactiontestcode + s;\r\n\r\n        }\r\n        else {\r\n            ntransactionsamplecode = item.ntransactionsamplecode;\r\n            npreregno = item.npreregno;\r\n            ntransactiontestcode = item.ntransactiontestcode;\r\n\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedTest\",\r\n            {\r\n\r\n                npreregno: npreregno,\r\n                ntransactionsamplecode: ntransactionsamplecode,\r\n                ntransactiontestcode: ntransactiontestcode,\r\n\r\n                userinfo: userInfo\r\n            })\r\n\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n// export function getReleaseSelectedSampleSubSampleTest(userInfo, control, SampleArray1, SubSampleArray1, TestArray1,SampleArray,SubSampleArray,TestArray,Data1,k) {    \r\n//    let ntransactionsamplecode = \"\"\r\n//    let npreregno = \"\"\r\n//     let ntransactiontestcode = \"\" \r\n//     let bFlag = \"\" \r\n//     if (TestArray !== undefined) {\r\n//         TestArray.map(test => {\r\n//             ntransactionsamplecode += test.ntransactionsamplecode + ',';\r\n//             npreregno += test.npreregno + ',';\r\n//             ntransactiontestcode += test.ntransactiontestcode + ',';\r\n//         })\r\n//         TestArray = {\r\n//             ntransactionsamplecode: ntransactionsamplecode,\r\n//             npreregno: npreregno,\r\n//             ntransactiontestcode: ntransactiontestcode,\r\n//             bFlag:\"3\"\r\n\r\n//         }\r\n//     }   \r\n//     if (SubSampleArray !== undefined) {\r\n//         SubSampleArray.map(SubSample => {\r\n//             ntransactionsamplecode += SubSample.ntransactionsamplecode + ',';\r\n//             npreregno += SubSample.npreregno + ',';\r\n//             ntransactiontestcode += SubSample.ntransactiontestcode + ',';\r\n//             SubSampleArray = {\r\n//                 ntransactionsamplecode: ntransactionsamplecode,\r\n//                 npreregno: npreregno,\r\n//                 ntransactiontestcode: ntransactiontestcode,\r\n//                 bFlag:\"2\"\r\n\r\n//             }\r\n//         })\r\n//     }\r\n//     if (SampleArray !== undefined) {\r\n\r\n//         SampleArray.map(Sample => {\r\n//             ntransactionsamplecode += Sample.ntransactionsamplecode + ',';\r\n//             npreregno += Sample.npreregno + ',';\r\n//             ntransactiontestcode += Sample.ntransactiontestcode + ',';\r\n\r\n//         })\r\n//         SampleArray = {\r\n//             ntransactionsamplecode: ntransactionsamplecode,\r\n//             npreregno: npreregno,\r\n//             ntransactiontestcode: ntransactiontestcode,\r\n//             bFlag:\"1\"\r\n\r\n//         }\r\n//     }\r\n//     let allNpreregno = []\r\n//     if (SampleArray1 !== undefined) {\r\n\r\n//         SampleArray1.map(temp => {\r\n//             allNpreregno += temp + ','\r\n//         })\r\n//     }\r\n//     let allNtransactionsamplecode = []\r\n//     if (SubSampleArray1 !== undefined) {\r\n\r\n//         SubSampleArray1.map(temp => {\r\n//             allNtransactionsamplecode += temp + ','\r\n//         })\r\n//     }\r\n//     let allNtransactiontestcode = []\r\n//     if (TestArray1 !== undefined) {\r\n\r\n//         TestArray1.map(temp => {\r\n//             allNtransactiontestcode += temp + ','\r\n//         })\r\n//     }\r\n\r\n//     return function (dispatch) {  \r\n//     dispatch(initRequest(true));\r\n//     return rsapi.post(\"coarelease/updateStatus\", \r\n//         {\r\n//             SampleArray:SampleArray,\r\n//             SubSampleArray:SubSampleArray,\r\n//             TestArray: TestArray,\r\n//             userinfo: userInfo,\r\n//             allNtransactionsamplecode: allNtransactionsamplecode,\r\n//             allNtransactiontestcode: allNtransactiontestcode,\r\n//             allNpreregno:allNpreregno\r\n//         })\r\n//     .then(response=>{ \r\n//        // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \r\n//        let releaseSubSample = Data1.releaseSubSample || new Map();           \r\n//        let releaseTest = Data1.releaseTest || new Map();           \r\n//        releaseSubSample = Data1.releaseSubSample || new Map();           \r\n\r\n//              releaseTest = Data1.releaseTest || new Map();\r\n// if(response.data.body[\"cFlag\"]===\"3\"){\r\n//             releaseTest.set(parseInt(Object.keys(response.data.body[\"ReleaseTest\"])[0]), Object.values(response.data.body[\"ReleaseTest\"])[0]);\r\n//        }\r\n//       //  else {\r\n//         if(response.data.body[\"cFlag\"]===\"2\"){\r\n\r\n\r\n//             releaseSubSample.set(parseInt(Object.keys(response.data.body[\"ReleaseSubSample\"])[0]), Object.values(response.data.body[\"ReleaseSubSample\"])[0]);\r\n\r\n//         }\r\n//         let masterData = { ...Data1, releaseSubSample,releaseTest,...response.data.body};\r\n\r\n//             sortData(masterData);\r\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData,\r\n//                 data:releaseSubSample,releaseTest,\r\n//                       //  dataState:dataState,\r\n//                         loading:false\r\n//                     }});\r\n//         })\r\n//         .catch(error=>{\r\n//             dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n//             if (error.response.status === 500){\r\n//                 toast.error(error.message);\r\n//             } \r\n//             else{               \r\n//                 toast.warn(error.response.data);\r\n//             }  \r\n//         })        \r\n//     }\r\n// }\r\nexport function getReleaseSelectedSampleSubSampleTest(userInfo, Data1, inputData) {\r\n\r\n\r\n    return function (dispatch) {\r\n      if (inputData !== undefined &&inputData.npreregno!==\"\") {\r\n\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateStatus\",\r\n\r\n            inputData\r\n        )\r\n            .then(response => {\r\n                if (response.data.statusCodeValue !== 200) {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: response.data.body\r\n                    }));\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n\r\n\r\n                }\r\n                else {\r\n                    let selected = []\r\n                    let expanded = []\r\n                    let testdata = []\r\n                    let subsampleData = []\r\n                    let subsampleexpanded = []\r\n                    let subsampleselected = []\r\n                    let subsampleDataRes = []\r\n                   // let y = []\r\n                   // let a = []\r\n                    // let SubSample = Object.values(Data1.ReleaseSubSample).forEach(item1 => {\r\n                    //     item1.map(item2 => {\r\n                    //         subsampleData.push(item2)\r\n                    //         if (item2.expanded === true) {\r\n                    //             subsampleexpanded.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"expanded\": item2.expanded })\r\n                    //         }\r\n                    //         if (item2.selected === true) {\r\n                    //             subsampleselected.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"selected\": item2.selected })\r\n                    //         }\r\n\r\n                    //     })\r\n                    // });\r\n                    // let SubSampleRes = Object.values(response.data.body.ReleaseSubSample).forEach(item1 => {\r\n                    //     item1.map(item2 => {\r\n                    //         subsampleDataRes.push(item2)\r\n                    //         subsampleexpanded.map(item1 => {\r\n                    //             if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\r\n                    //                 item2[\"expanded\"] = true\r\n                    //             }\r\n                    //         })\r\n                    //         subsampleselected.map(item1 => {\r\n                    //             if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\r\n                    //                 item2[\"selected\"] = true\r\n                    //             }\r\n                    //         })\r\n                    //     })\r\n                    // });\r\n                    let testDataRes = []\r\n                    let testDataPrevious = []\r\n                    // let testDataSelected = []\r\n                    // let testDataExpanded = []\r\n                    // testDataSelected = Object.values(Data1.ReleaseTest).forEach(item1 => {\r\n                    //     item1.map(item2 => {\r\n                    //         testDataPrevious.push(item2)\r\n                    //         if (item2.selected === true) {\r\n                    //             testdata.push({ \"ntransactiontestcode\": item2.ntransactiontestcode })\r\n                    //         }\r\n                    //     })\r\n                    // });\r\n                    // testDataExpanded = Object.values(response.data.body.ReleaseTest||{}).forEach(item1 => {\r\n                    //     item1.map(item2 => {\r\n                    //         testDataRes.push(item2)\r\n\r\n                    //         testdata.map(x => {\r\n                    //             if (item2.ntransactiontestcode === x.ntransactiontestcode) {\r\n                    //                 item2[\"selected\"] = true\r\n                    //             }\r\n                    //         })\r\n                    //     })\r\n                    // });\r\n                    let ReleaseTest = replaceUpdatedObject(testDataRes, testDataPrevious, 'ntransactiontestcode');\r\n                    let ReleaseTest1 = groupBy(ReleaseTest, 'ntransactionsamplecode');\r\n                    let ReleaseSubSample = replaceUpdatedObject(subsampleDataRes, subsampleData, 'ntransactionsamplecode');\r\n                    let ReleaseSubSample1 = groupBy(ReleaseSubSample, 'npreregno');\r\n\r\n                    function groupBy(objectArray, property) {\r\n                        return objectArray.reduce((acc, obj) => {\r\n                            const key = obj[property];\r\n                            if (!acc[key]) {\r\n                                acc[key] = [];\r\n                            }\r\n                            acc[key].push(obj);\r\n                            return acc;\r\n                        }, {});\r\n                    }\r\n                    // Data1.ReleaseSample.map(item => {\r\n                    //     delete item[\"expanded\"]\r\n                    // });\r\n                    Data1.ReleaseSample.map(item2 => {\r\n                        if (item2.expanded === true) {\r\n                            expanded.push({ \"npreregno\": item2.npreregno, \"expanded\": item2.expanded })\r\n                        }\r\n                        if (item2.selected === true) {\r\n                            selected.push({ \"npreregno\": item2.npreregno, \"selected\": item2.selected })\r\n                        }\r\n                    })\r\n                    response.data.body.ReleaseSample&&response.data.body.ReleaseSample.map(item2 => {\r\n                        expanded.map(item1 => {\r\n                            if (item1.npreregno === item2.npreregno) {\r\n                                item2[\"expanded\"] = true\r\n                            }\r\n                        })\r\n                        selected.map(item1 => {\r\n                            if (item1.npreregno === item2.npreregno) {\r\n                                item2[\"selected\"] = true\r\n                            }\r\n                        })\r\n\r\n                    })\r\n\r\n                    let masterData = {\r\n\r\n                        ...Data1, ...response.data.body,\r\n                        ReleaseTest: ReleaseTest1,\r\n                        ReleaseSubSample: ReleaseSubSample1,\r\n\r\n                        ReleaseSample: replaceUpdatedObject(response.data.body.ReleaseSample, Data1.ReleaseSample, 'npreregno'),\r\n\r\n\r\n                    };\r\n\r\n                    // sortData(masterData);\r\n                  //  dispatch(generateReport(inputData,masterData))\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            checkedflag:false,\r\n                            change: inputData.change,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n\r\n\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTANYONESAMPLE/SUBSAMPLE/TEST\"\r\n            }));\r\n        }\r\n    }\r\n}\r\nexport function getReleaseRegistrationType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getRegistrationType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            SampleTypeValue: inputData.SampleTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseRegistrationSubType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getRegistrationSubType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            RegTypeValue: inputData.RegTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseFilterStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getFilterStatus\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            RegSubTypeValue: inputData.RegSubTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getReleaseFilterBasedTest(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.napprovalversioncode) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"coarelease/getFilterBasedTest\", inputData)\r\n                .then(response => {\r\n\r\n\r\n                    let responseData = { ...response.data }\r\n                    responseData = sortData(responseData)\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                ...responseData,\r\n                                RegSubTypeValue: inputData.RegSubTypeValue,\r\n                                ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                                DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                            },\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (response.data.rtn) {\r\n                        toast.warn(response.data.rtn);\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_PLSSELECTALLVALUESINFILTER\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function getReleaseApprovalVersion(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getApprovalVersion\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...responseData,\r\n                            // fromDate: inputParam.inputData.dfrom,\r\n                            // toDate: inputParam.inputData.dto,\r\n                        },\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getReleaseSample\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                // responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\r\n                    inputParam.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\r\n                    inputParam.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\r\n                    inputParam.searchTestRef.current.value = \"\"\r\n                    // masterData['searchedTest'] = undefined\r\n                    masterData['searchedTests'] = undefined\r\n\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        take: inputParam.take,\r\n                        testskip: 0,\r\n                        testtake: inputParam.testtake,\r\n                        resultDataState: { ...inputParam.resultDataState, sort: undefined, filter: undefined },\r\n                        instrumentDataState: { ...inputParam.instrumentDataState, sort: undefined, filter: undefined },\r\n                        materialDataState: { ...inputParam.materialDataState, sort: undefined, filter: undefined },\r\n                        taskDataState: { ...inputParam.taskDataState, sort: undefined, filter: undefined },\r\n                        documentDataState: { ...inputParam.documentDataState, sort: undefined, filter: undefined },\r\n                        resultChangeDataState: { ...inputParam.resultChangeDataState, sort: undefined, filter: undefined },\r\n                        testCommentDataState: { ...inputParam.testCommentDataState, sort: undefined, filter: undefined },\r\n                        historyDataState: { ...inputParam.historyDataState, sort: undefined, filter: undefined },\r\n                        samplePrintHistoryDataState: { ...inputParam.samplePrintHistoryDataState, sort: undefined, filter: undefined },\r\n                        sampleHistoryDataState: { ...inputParam.sampleHistoryDataState, sort: undefined, filter: undefined },\r\n                        checkedflag:false,\r\n                        npreregno:[]\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getCOAReportType(releaseParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getCOAReportType\", {userinfo: releaseParam.userInfo })\r\n            .then(response => {\r\n                let reportType = [];\r\n\r\n                const reportTypeMap = constructOptionList(response.data.ReportType || [], \"ncoareporttypecode\",\r\n                    \"scoareporttypename\", undefined, undefined, false);\r\n\r\n                const ReportTypeList = reportTypeMap.get(\"OptionList\");\r\n                let selectedRecord = {\"ncoareporttypecode\": {\r\n                    \"value\": response.data.ReportType[0].ncoareporttypecode,\r\n                     \"label\": response.data.ReportType[0].scoareporttypename\r\n                 }};\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                     payload: {\r\n                        operation: null, modalName: undefined,\r\n                        loading: false, dataState: undefined//,modalShow: true\r\n                        ,ReportTypeList\r\n                        ,modalTitle:\"IDS_RELEASEANDREPORTGENERATION\"\r\n                       ,selectedRecord\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\nexport function generateReport(inputParam,Data) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const inputData = {\r\n            npreregno: inputParam.npreregno,\r\n         //   nsectioncode: inputParam.nsectioncode || -1,\r\n            userinfo: inputParam.userinfo,\r\n            nprimarykey: inputParam.npreregno,\r\n            ncoareporttypecode: reportCOAType.SAMPLEWISE,\r\n            nreporttypecode: REPORTTYPE.COAREPORT,\r\n            sprimarykeyname: \"npreregno\",\r\n            ncontrolcode: inputParam.ncontrolCode,\r\n            nregtypecode: inputParam.nregtypecode,\r\n            nregsubtypecode: inputParam.nregsubtypecode,\r\n            ntransactiontestcode:inputParam.ntransactiontestcode,\r\n            napproveconfversioncode: inputParam.napprovalversioncode,\r\n            action:inputParam.action\r\n        }\r\n        rsapi.post(\"approval/generateCOAReport\", inputData)\r\n            .then(response => {\r\n\r\n                if (response.data.rtn === \"Success\") {\r\n                    document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n                    document.getElementById(\"download_data\").click();\r\n                } else {\r\n                    toast.warn(response.data.rtn);\r\n                }\r\n               \r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false,change: inputParam.change,masterData:Data,\r\n                    modalShow: false, selectedRecord: {}, loadEsign: false } })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}