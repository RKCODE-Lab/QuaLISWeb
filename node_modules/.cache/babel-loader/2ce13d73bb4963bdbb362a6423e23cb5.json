{"ast":null,"code":"var _jsxFileName = \"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\src\\\\pages\\\\dynamicmaster\\\\DynamicMaster.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport { Row, Col } from 'react-bootstrap';\nimport { toast } from 'react-toastify';\nimport { process } from '@progress/kendo-data-query';\nimport DynamicDataGrid from '../../components/data-grid/data-grid.component';\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\nimport Esign from '../../pages/audittrail/Esign';\nimport { callService, crudMaster, updateStore, validateEsignCredential, getEditDynamicMasterCombo, //fetchRecord,\ngetDynamicMasterCombo, getChildValues } from '../../actions';\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\nimport { showEsign, getControlMap, deleteAttachmentDropZone, getSameRecordFromTwoArrays, onDropAttachFileList, convertDateTimetoString, validateEmail, formatDate, sortData } from '../../components/CommonScript';\nimport { ListWrapper } from '../../components/client-group.styles';\nimport DynamicSlideout from '../dynamicpreregdesign/DynamicSlideout.jsx';\nimport { transactionStatus } from '../../components/Enumeration';\n\nconst mapStateToProps = state => {\n  return {\n    Login: state.Login\n  };\n};\n\nclass DynamicMaster extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dataStateChange = event => {\n      this.setState({\n        dataResult: process(this.state.data || [], event.dataState),\n        dataState: event.dataState\n      });\n    };\n\n    this.closeModal = () => {\n      let loadEsign = this.props.Login.loadEsign;\n      let openModal = this.props.Login.openModal;\n      let selectedRecord = this.props.Login.selectedRecord;\n\n      if (this.props.Login.loadEsign) {\n        if (this.props.Login.operation === \"delete\") {\n          loadEsign = false;\n          openModal = false;\n          selectedRecord = {};\n        } else {\n          loadEsign = false;\n          selectedRecord['esignpassword'] = \"\";\n          selectedRecord['esigncomments'] = \"\";\n        }\n      } else {\n        openModal = false;\n        selectedRecord = {};\n      }\n\n      const updateInfo = {\n        typeName: DEFAULT_RETURN,\n        data: {\n          openModal,\n          loadEsign,\n          selectedRecord,\n          selectedId: null\n        }\n      };\n      this.props.updateStore(updateInfo);\n    };\n\n    this.openModal = () => {\n      const addId = this.props.Login.inputParam && this.state.controlMap.has(\"Add\") && this.state.controlMap.get(\"Add\").ncontrolcode;\n      this.props.getDynamicMasterCombo(this.props.Login.masterData, this.props.Login.userInfo, addId, this.state.designData, this.state.selectedRecord, this.state.childColumnList, this.state.comboComponents, this.state.withoutCombocomponent, false, true, new Map(), true, \"create\", this.props.Login.displayName);\n    };\n\n    this.fetchRecord = fetchRecordParam => {\n      this.props.getEditDynamicMasterCombo(fetchRecordParam, this.state.designData, this.state.selectedRecord, this.state.childColumnList, this.state.comboComponents, this.state.withoutCombocomponent);\n    };\n\n    this.comboChild = (data, columnList, childColumnList, slice) => {\n      let retunObj = {}; // if (data.findIndex(x => x.label === columnList.label) !== -1) {\n\n      if (!childColumnList.hasOwnProperty(columnList.label)) {\n        if (childColumnList[columnList.label] === undefined) {\n          if (columnList.hasOwnProperty(\"child\")) {\n            let childList = [];\n            columnList.child.map(childData => {\n              const index = data.findIndex(x => x.label === childData.label);\n\n              if (index !== -1) {\n                childList.push(data[index]);\n\n                if (slice) {\n                  data = [...data.slice(0, index), ...data.slice(index + 1)];\n                }\n              }\n            });\n            childColumnList[columnList.label] = childList;\n\n            if (childList.length > 0) {\n              childList.map(y => {\n                if (y.hasOwnProperty(\"child\")) {\n                  const val = this.comboChild(data, y, childColumnList, slice);\n                  retunObj[\"data\"] = val.data;\n                  retunObj[\"childColumnList\"] = val.childColumnList;\n                } else {\n                  retunObj[\"data\"] = data;\n                  retunObj[\"childColumnList\"] = childColumnList;\n                }\n              });\n            } else {\n              retunObj[\"data\"] = data;\n              retunObj[\"childColumnList\"] = childColumnList;\n            }\n          } else {\n            retunObj[\"data\"] = data;\n            retunObj[\"childColumnList\"] = childColumnList;\n          }\n        } else {\n          retunObj[\"data\"] = data;\n          retunObj[\"childColumnList\"] = childColumnList;\n        }\n      } else {\n        retunObj[\"data\"] = data;\n        retunObj[\"childColumnList\"] = childColumnList;\n      }\n\n      return retunObj;\n    };\n\n    this.onComboChange = (comboData, control, customName) => {\n      let comboName = customName || control.label;\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (comboData) {\n        selectedRecord[comboName] = comboData;\n      } else {\n        selectedRecord[comboName] = [];\n      }\n\n      if (control.child && control.child.length > 0) {\n        const childComboList = getSameRecordFromTwoArrays(this.state.comboComponents, control.child, \"label\");\n        let childColumnList = {};\n        childComboList.map(columnList => {\n          const val = this.comboChild(this.state.comboComponents, columnList, childColumnList, false);\n          childColumnList = val.childColumnList;\n        });\n        const parentList = getSameRecordFromTwoArrays(this.state.withoutCombocomponent, control.child, \"label\");\n        const inputParem = {\n          child: control.child,\n          source: control.source,\n          primarykeyField: control.valuemember,\n          value: comboData.value,\n          item: comboData.item\n        };\n        this.props.getChildValues(inputParem, this.props.Login.userInfo, selectedRecord, this.props.Login.comboData, childComboList, childColumnList, this.state.withoutCombocomponent, [...childComboList, ...parentList]);\n      } else {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            selectedRecord\n          }\n        };\n        this.props.updateStore(updateInfo);\n      }\n    };\n\n    this.onNumericInputChange = (value, name) => {\n      let selectedRecord = this.state.selectedRecord;\n      selectedRecord[name] = value;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.handleDateChange = (dateValue, dateName) => {\n      const {\n        selectedRecord\n      } = this.state;\n      selectedRecord[dateName] = dateValue;\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.onDrop = (value, type, oldVlaue) => {\n      const design = this.state.design;\n      let columns = design[0].children;\n      let designData = this.props.Login.ReactInputFields;\n      value = JSON.parse(value.fields);\n      value = { ...value,\n        type: \"component\"\n      };\n      let designDataIndex = designData.findIndex(item => item.label === value.label);\n      let firstIndex = columns[0] ? columns[0].children.findIndex(item => item.label === value.label) : -1;\n      let secondIndex = columns[1] ? columns[1].children.findIndex(item => item.label === value.label) : -1;\n      if (designDataIndex >= 0) designData.splice(designDataIndex, 1);\n\n      if (firstIndex >= 0) {\n        if (type !== 1) {\n          columns[0].children.splice(firstIndex, 1); // columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\n        } else {\n          if (oldVlaue) {\n            oldVlaue = JSON.parse(oldVlaue);\n            let from = columns[0].children.findIndex(item => item.label === value.label);\n            let to = columns[0].children.findIndex(item => item.label === oldVlaue.label);\n            columns[0].children.splice(to, 0, columns[0].children.splice(from, 1)[0]);\n          }\n        }\n      } else if (type === 1) {\n        if (columns[0]) {\n          columns[0].children.push(value);\n        } else {\n          columns[0] = {\n            id: \"1\",\n            type: \"column\",\n            children: []\n          };\n          columns[0].children.push(value);\n        }\n      }\n\n      if (secondIndex >= 0) {\n        if (type !== 2) {\n          columns[1].splice(secondIndex, 1);\n        } else {\n          if (oldVlaue) {\n            oldVlaue = JSON.parse(oldVlaue);\n            let from = columns[1].children.findIndex(item => item.label === value.label);\n            let to = columns[1].children.findIndex(item => item.label === oldVlaue.label);\n            columns[1].children.splice(to, 0, columns[1].children.splice(from, 1)[0]);\n          }\n        }\n      } else if (type === 2) {\n        if (columns[1]) {\n          columns[1].children.push(value);\n        } else {\n          columns[1] = {\n            id: \"2\",\n            type: \"column\",\n            children: []\n          };\n          columns[1].children.push(value);\n        }\n      } // design.push(columns)\n\n\n      this.setState({\n        designData,\n        design\n      });\n    };\n\n    this.onDropFile = (attachedFiles, fieldName, maxSize) => {\n      let selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize);\n      this.setState({\n        selectedRecord,\n        actionType: \"new\"\n      });\n    };\n\n    this.deleteAttachment = (event, file, fieldName) => {\n      let selectedRecord = this.state.selectedRecord || {};\n      selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file);\n      this.setState({\n        selectedRecord,\n        actionType: \"delete\" //fileToDelete:file.name \n\n      });\n    };\n\n    this.onInputOnChange = (event, value) => {\n      const selectedRecord = this.state.selectedRecord || {};\n\n      if (event.target.type === 'toggle') {\n        selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\n      } else if (event.target.type === 'numeric') {\n        if (/\\D/.test(event.target.value)) selectedRecord[event.target.name] = event.target.value;\n      } else if (event.target.type === 'checkbox') {\n        selectedRecord[event.target.name] = value;\n      } else if (event.target.type === 'radio') {\n        selectedRecord[event.target.name] = value;\n      } else {\n        selectedRecord[event.target.name] = event.target.value;\n      }\n\n      this.setState({\n        selectedRecord\n      });\n    };\n\n    this.deleteRecord = deleteParam => {\n      const inputParam = {\n        classUrl: \"dynamicmaster\",\n        methodUrl: \"DynamicMaster\",\n        displayName: this.props.Login.displayName,\n        inputData: {\n          [\"dynamicmaster\"]: {\n            \"ndynamicmastercode\": deleteParam.selectedRecord.ndynamicmastercode\n          },\n          //.dataItem,\n          \"userinfo\": this.props.Login.userInfo\n        },\n        operation: \"delete\",\n        dataState: this.state.dataState\n      };\n\n      if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: this.props.Login.displayName,\n            operation: \"delete\"\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n      }\n    };\n\n    this.reloadData = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": this.props.Login.userInfo\n        },\n        classUrl: this.props.Login.inputParam.classUrl,\n        methodUrl: this.props.Login.inputParam.methodUrl,\n        userInfo: this.props.Login.userInfo,\n        displayName: this.props.Login.inputParam.displayName\n      };\n      this.props.callService(inputParam);\n    };\n\n    this.onSaveClick = (saveType, formRef) => {\n      //add / edit  \n      let inputData = [];\n      let dataState = undefined;\n      inputData[\"userinfo\"] = this.props.Login.userInfo;\n      inputData[\"masterdateconstraints\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;\n      inputData[\"masterdatefields\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;\n      inputData[\"masteruniquevalidation\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masteruniquevalidation;\n      let selectedId = null;\n      let operation = \"\";\n      let selectedRecord = this.state.selectedRecord;\n\n      if (this.props.Login.operation === \"update\") {\n        // edit\n        dataState = this.state.dataState;\n        inputData[\"dynamicmaster\"] = {\n          ndynamicmastercode: this.state.selectedRecord[\"ndynamicmastercode\"]\n        }; //this.state.selectedRecord;\n\n        inputData[\"dynamicmaster\"][\"jsondata\"] = {};\n        inputData[\"dynamicmaster\"][\"jsonuidata\"] = {};\n        selectedId = this.props.Login.selectedId;\n        operation = \"update\";\n      } else {\n        //add                          \n        inputData[\"dynamicmaster\"] = {\n          //\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \n          nformcode: this.props.Login.userInfo.nformcode,\n          ndesigntemplatemappingcode: this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode,\n          jsondata: {},\n          jsonuidata: {}\n        };\n        operation = \"create\";\n      }\n\n      const dateList = [];\n      const defaulttimezone = this.props.Login.defaulttimezone;\n      const userInfo = this.props.Login.userInfo;\n      this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(row => {\n        row.children.map(column => {\n          column.children.map(component => {\n            if (component.hasOwnProperty(\"children\")) {\n              component.children.map(componentrow => {\n                if (componentrow.inputtype === \"combo\") {\n                  inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ? {\n                    value: selectedRecord[componentrow.label].value,\n                    label: selectedRecord[componentrow.label].label\n                  } : -1;\n                  inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = selectedRecord[componentrow.label] ? selectedRecord[componentrow.label].label : \"\";\n                } else if (componentrow.inputtype === \"date\") {\n                  if (componentrow.mandatory) {\n                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = formatDate(selectedRecord[componentrow.label], false);\n                    inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]; //inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n                  } else {\n                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = componentrow.loadcurrentdate ? formatDate(selectedRecord[componentrow.label] || new Date(), false) : selectedRecord[componentrow.label] ? formatDate(selectedRecord[componentrow.label], false) : \"\";\n                    inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]; //convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\n                  }\n\n                  if (componentrow.timezone) {\n                    inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ? {\n                      value: selectedRecord[`tz${componentrow.label}`].value,\n                      label: selectedRecord[`tz${componentrow.label}`].label\n                    } : defaulttimezone ? defaulttimezone : -1;\n                    inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${componentrow.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`];\n                  }\n\n                  dateList.push(componentrow.label);\n                } else {\n                  inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ? selectedRecord[componentrow.label] : \"\";\n                  inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]; // inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\n                }\n\n                return inputData[\"dynamicmaster\"];\n              });\n            } else {\n              if (component.inputtype === \"combo\") {\n                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ? {\n                  value: selectedRecord[component.label].value,\n                  label: selectedRecord[component.label].label\n                } : -1;\n                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label; //selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\n              } else if (component.inputtype === \"date\") {\n                if (component.mandatory) {\n                  inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = formatDate(selectedRecord[component.label], false); // convertDateTimetoString(selectedRecord[component.label] ?\n                  // selectedRecord[component.label] : new Date(), userInfo);\n\n                  inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]; //convertDateTimetoString(selectedRecord[component.label], userInfo);\n                } else {\n                  inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = component.loadcurrentdate ? //convertDateTimetoString(selectedRecord[component.label] ?                                      \n                  //    selectedRecord[component.label] : new Date(), userInfo) :\n                  formatDate(selectedRecord[component.label] || new Date(), false) : selectedRecord[component.label] ? // convertDateTimetoString(selectedRecord[component.label] ?\n                  //   selectedRecord[component.label] : new Date(), userInfo) : \"\";\n                  formatDate(selectedRecord[component.label], false) : \"\";\n                  inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]; //convertDateTimetoString(selectedRecord[component.label], userInfo)\n                }\n\n                if (component.timezone) {\n                  inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`] = selectedRecord[`tz${component.label}`] ? {\n                    value: selectedRecord[`tz${component.label}`].value,\n                    label: selectedRecord[`tz${component.label}`].label\n                  } : defaulttimezone ? defaulttimezone : -1;\n                  inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${component.label}`] = inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`];\n                }\n\n                dateList.push(component.label);\n              } else {\n                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ? selectedRecord[component.label] : \"\";\n                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label];\n              }\n            }\n\n            return inputData[\"dynamicmaster\"];\n          });\n          return inputData[\"dynamicmaster\"];\n        });\n        return inputData[\"dynamicmaster\"];\n      });\n      inputData[\"dynamicmaster\"][\"jsonstring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);\n      inputData[\"dynamicmaster\"][\"jsonuistring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);\n      inputData[\"masterdatelist\"] = dateList;\n      const inputParam = {\n        classUrl: \"dynamicmaster\",\n        methodUrl: \"DynamicMaster\",\n        displayName: this.props.Login.displayName,\n        inputData: inputData,\n        operation: operation,\n        saveType,\n        formRef,\n        selectedId,\n        dataState\n      };\n      const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\n\n      if (esignNeeded) {\n        const updateInfo = {\n          typeName: DEFAULT_RETURN,\n          data: {\n            loadEsign: true,\n            screenData: {\n              inputParam,\n              masterData: this.props.Login.masterData\n            },\n            openModal: true,\n            screenName: this.props.Login.displayName,\n            operation: \"create\"\n          }\n        };\n        this.props.updateStore(updateInfo);\n      } else {\n        this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\n      }\n    };\n\n    this.validateEsign = () => {\n      const inputParam = {\n        inputData: {\n          \"userinfo\": { ...this.props.Login.userInfo,\n            sreason: this.state.selectedRecord[\"esigncomments\"]\n          },\n          password: this.state.selectedRecord[\"esignpassword\"]\n        },\n        screenData: this.props.Login.screenData\n      };\n      this.props.validateEsignCredential(inputParam, \"openModal\");\n    };\n\n    this.formRef = React.createRef();\n    this.extractedColumnList = [];\n    this.detailedColumnList = [];\n    const _dataState = {\n      skip: 0,\n      take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n    };\n    this.state = {\n      data: [],\n      masterStatus: \"\",\n      error: \"\",\n      selectedRecord: {},\n      dataResult: [],\n      dataState: _dataState,\n      userRoleControlRights: [],\n      controlMap: new Map(),\n      comboComponents: [],\n      withoutCombocomponent: []\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\n      toast.warn(props.Login.masterStatus);\n      props.Login.masterStatus = \"\";\n    }\n\n    if (props.Login.error !== state.error) {\n      toast.error(props.Login.error);\n      props.Login.error = \"\";\n    }\n\n    return null;\n  }\n\n  render() {\n    let primaryKeyField = \"ndynamicmastercode\";\n    const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\") && this.state.controlMap.get(\"Edit\").ncontrolcode;\n    const editParam = {\n      screenName: this.props.Login.inputParam && this.props.Login.inputParam.displayName && this.props.intl.formatMessage({\n        id: this.props.Login.inputParam.displayName\n      }),\n      operation: \"update\",\n      primaryKeyField,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      ncontrolCode: editId\n    };\n    const deleteParam = {\n      operation: \"delete\"\n    }; // const mandatoryFields=[];\n    // this.extractedColumnList.forEach(item=>item.mandatory === true ? \n    //     mandatoryFields.push(item) :\"\"\n    // );   \n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ListWrapper, {\n      className: \"client-list-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, this.state.data ? /*#__PURE__*/React.createElement(DynamicDataGrid, {\n      primaryKeyField: primaryKeyField,\n      data: this.state.data,\n      dataResult: this.state.dataResult,\n      dataState: this.state.dataState,\n      dataStateChange: this.dataStateChange,\n      extractedColumnList: this.extractedColumnList,\n      detailedFieldList: this.detailedColumnList,\n      expandField: this.detailedColumnList.length > 0 ? \"expanded\" : false,\n      methodUrl: \"\",\n      controlMap: this.state.controlMap,\n      userRoleControlRights: this.state.userRoleControlRights,\n      inputParam: this.props.Login.inputParam,\n      userInfo: this.props.Login.userInfo,\n      fetchRecord: this.fetchRecord,\n      editParam: editParam,\n      deleteRecord: this.deleteRecord,\n      deleteParam: deleteParam,\n      reloadData: this.reloadData,\n      addRecord: this.openModal,\n      pageable: true,\n      scrollable: 'scrollable',\n      gridHeight: '600px',\n      isActionRequired: true,\n      isToolBarRequired: true,\n      selectedId: this.props.Login.selectedId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 33\n      }\n    }) : \"\"))), this.props.Login.openModal ? /*#__PURE__*/React.createElement(SlideOutModal, {\n      show: this.props.Login.openModal,\n      closeModal: this.closeModal,\n      operation: this.props.Login.operation ? this.props.Login.operation : \"create\",\n      inputParam: this.props.Login.inputParam,\n      screenName: this.props.Login.screenName,\n      onSaveClick: this.onSaveClick,\n      esign: this.props.Login.loadEsign,\n      validateEsign: this.validateEsign,\n      masterStatus: this.props.Login.masterStatus,\n      updateStore: this.props.updateStore,\n      selectedRecord: this.state.selectedRecord || {},\n      mandatoryFields: this.state.mandatoryFields || [],\n      addComponent: this.props.Login.loadEsign ? /*#__PURE__*/React.createElement(Esign, {\n        operation: this.props.Login.operation,\n        onInputOnChange: this.onInputOnChange,\n        inputParam: this.props.Login.inputParam,\n        selectedRecord: this.state.selectedRecord || {},\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }\n      }) : /*#__PURE__*/React.createElement(DynamicSlideout, {\n        selectedRecord: this.props.Login.selectedRecord,\n        templateData: this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign,\n        handleChange: this.handleChange,\n        handleDateChange: this.handleDateChange,\n        onInputOnChange: this.onInputOnChange,\n        onNumericInputChange: this.onNumericInputChange,\n        comboData: this.props.Login.comboData,\n        onComboChange: this.onComboChange,\n        onDropFile: this.onDropFile,\n        deleteAttachment: this.deleteAttachment,\n        userInfo: this.props.Login.userInfo,\n        timeZoneList: this.props.Login.timeZoneList,\n        defaultTimeZone: this.props.Login.defaultTimeZone,\n        Login: this.props.Login,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 33\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }) : \"\");\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.props.Login.masterData !== previousProps.Login.masterData) {\n      if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\n        const userRoleControlRights = [];\n\n        if (this.props.Login.userRoleControlRights) {\n          this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item => userRoleControlRights.push(item.ncontrolcode));\n        }\n\n        const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode);\n        this.extractedColumnList = [];\n        this.detailedColumnList = [];\n\n        if (this.props.Login.masterData && this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.screendesign) {\n          this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(row => {\n            // console.log(\"data:\", row);\n            this.extractedColumnList.push({\n              \"idsName\": row[\"1\"][this.props.Login.userInfo.slanguagetypecode],\n              \"dataField\": row[\"2\"]\n            });\n          });\n          this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(row => {\n            this.detailedColumnList.push({\n              \"idsName\": row[\"1\"][this.props.Login.userInfo.slanguagetypecode],\n              \"dataField\": row[\"2\"]\n            });\n          });\n        }\n\n        let data = [];\n        const withoutCombocomponent = [];\n        const mandatoryFields = [];\n        const Layout = this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign || [];\n        Layout.map(row => {\n          row.children.map(column => {\n            column.children.map(component => {\n              if (component.hasOwnProperty(\"children\")) {\n                component.children.map(componentrow => {\n                  if (componentrow.inputtype === \"combo\") {\n                    data.push(componentrow);\n                  } else {\n                    withoutCombocomponent.push(componentrow);\n                  }\n\n                  if (componentrow.mandatory === true) {\n                    if (componentrow.inputtype === \"email\") {\n                      mandatoryFields.push({\n                        \"mandatory\": true,\n                        \"idsName\": componentrow.label,\n                        \"dataField\": componentrow.label,\n                        \"alertPreFix\": this.props.intl.formatMessage({\n                          id: \"IDS_VALID\"\n                        }),\n                        \"validateFunction\": validateEmail,\n                        \"mandatoryLabel\": \"IDS_ENTER\",\n                        \"controlType\": \"textbox\"\n                      });\n                    } else {\n                      mandatoryFields.push({\n                        \"mandatory\": true,\n                        \"idsName\": componentrow.label,\n                        \"dataField\": componentrow.label,\n                        \"mandatoryLabel\": componentrow.inputtype === \"combo\" ? \"IDS_SELECT\" : \"IDS_ENTER\",\n                        \"controlType\": componentrow.inputtype === \"combo\" ? \"selectbox\" : \"textbox\"\n                      });\n                    }\n                  }\n                });\n              } else {\n                component.inputtype === \"combo\" ? data.push(component) : withoutCombocomponent.push(component);\n\n                if (component.mandatory === true) {\n                  if (component.inputtype === \"email\") {\n                    mandatoryFields.push({\n                      \"mandatory\": true,\n                      \"idsName\": component.label,\n                      \"dataField\": component.label,\n                      \"alertPreFix\": this.props.intl.formatMessage({\n                        id: \"IDS_VALID\"\n                      }),\n                      \"validateFunction\": validateEmail,\n                      \"mandatoryLabel\": \"IDS_ENTER\",\n                      \"controlType\": \"textbox\"\n                    });\n                  } else {\n                    mandatoryFields.push({\n                      \"mandatory\": true,\n                      \"idsName\": component.label,\n                      \"dataField\": component.label,\n                      \"mandatoryLabel\": component.inputtype === \"combo\" ? \"IDS_SELECT\" : \"IDS_ENTER\",\n                      \"controlType\": component.inputtype === \"combo\" ? \"selectbox\" : \"textbox\"\n                    });\n                  }\n                }\n              }\n            });\n          });\n        });\n        const comboComponents = data;\n        let childColumnList = {};\n        data.map(columnList => {\n          const val = this.comboChild(data, columnList, childColumnList, true);\n          data = val.data;\n          childColumnList = val.childColumnList;\n        });\n        const masterData = this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\", \"ndynamicmastercode\") : [];\n        this.setState({\n          withoutCombocomponent,\n          comboComponents,\n          childColumnList,\n          designData: data,\n          mandatoryFields,\n          userRoleControlRights,\n          controlMap,\n          data: this.props.Login.masterData.DynamicMasterData || [],\n          dataResult: process(masterData || [], this.state.dataState)\n        });\n      } else {\n        let {\n          dataState\n        } = this.state;\n\n        if (this.props.Login.dataState === undefined) {\n          dataState = {\n            skip: 0,\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5\n          };\n        }\n\n        const masterData = this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\", \"ndynamicmastercode\") : [];\n        this.setState({\n          data: this.props.Login.masterData.DynamicMasterData || [],\n          selectedRecord: this.props.Login.selectedRecord,\n          dataResult: process(masterData || [], dataState),\n          dataState //, comboComponents, withoutCombocomponent\n\n        });\n      }\n    }\n\n    if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\n      this.setState({\n        selectedRecord: this.props.Login.selectedRecord\n      });\n    }\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  callService,\n  crudMaster,\n  updateStore,\n  validateEsignCredential,\n  getChildValues,\n  getEditDynamicMasterCombo,\n  //fetchRecord,\n  getDynamicMasterCombo\n})(injectIntl(DynamicMaster));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/dynamicmaster/DynamicMaster.jsx"],"names":["React","connect","injectIntl","Row","Col","toast","process","DynamicDataGrid","SlideOutModal","Esign","callService","crudMaster","updateStore","validateEsignCredential","getEditDynamicMasterCombo","getDynamicMasterCombo","getChildValues","DEFAULT_RETURN","showEsign","getControlMap","deleteAttachmentDropZone","getSameRecordFromTwoArrays","onDropAttachFileList","convertDateTimetoString","validateEmail","formatDate","sortData","ListWrapper","DynamicSlideout","transactionStatus","mapStateToProps","state","Login","DynamicMaster","Component","constructor","props","dataStateChange","event","setState","dataResult","data","dataState","closeModal","loadEsign","openModal","selectedRecord","operation","updateInfo","typeName","selectedId","addId","inputParam","controlMap","has","get","ncontrolcode","masterData","userInfo","designData","childColumnList","comboComponents","withoutCombocomponent","Map","displayName","fetchRecord","fetchRecordParam","comboChild","columnList","slice","retunObj","hasOwnProperty","label","undefined","childList","child","map","childData","index","findIndex","x","push","length","y","val","onComboChange","comboData","control","customName","comboName","childComboList","parentList","inputParem","source","primarykeyField","valuemember","value","item","onNumericInputChange","name","handleDateChange","dateValue","dateName","onDrop","type","oldVlaue","design","columns","children","ReactInputFields","JSON","parse","fields","designDataIndex","firstIndex","secondIndex","splice","from","to","id","onDropFile","attachedFiles","fieldName","maxSize","actionType","deleteAttachment","file","onInputOnChange","target","checked","YES","NO","test","deleteRecord","deleteParam","classUrl","methodUrl","inputData","ndynamicmastercode","userRoleControlRights","nformcode","ncontrolCode","screenData","screenName","reloadData","onSaveClick","saveType","formRef","DynamicMasterDesign","screendesign","masterdateconstraints","masterdatefields","masteruniquevalidation","ndesigntemplatemappingcode","jsondata","jsonuidata","dateList","defaulttimezone","slideoutdesign","row","column","component","componentrow","inputtype","mandatory","loadcurrentdate","Date","timezone","stringify","esignNeeded","validateEsign","sreason","password","createRef","extractedColumnList","detailedColumnList","skip","take","settings","parseInt","masterStatus","error","getDerivedStateFromProps","warn","render","primaryKeyField","editId","editParam","intl","formatMessage","mandatoryFields","handleChange","timeZoneList","defaultTimeZone","componentDidUpdate","previousProps","Object","values","griditem","slanguagetypecode","gridmoreitem","Layout","DynamicMasterData"],"mappings":"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","sourcesContent":["import React  from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport { Row, Col} from 'react-bootstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport DynamicDataGrid from '../../components/data-grid/data-grid.component';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport Esign from '../../pages/audittrail/Esign';\r\nimport { callService, crudMaster, updateStore, validateEsignCredential, \r\n    getEditDynamicMasterCombo,\r\n    //fetchRecord,\r\n    getDynamicMasterCombo, getChildValues } from '../../actions';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, getControlMap, deleteAttachmentDropZone, \r\n    getSameRecordFromTwoArrays, onDropAttachFileList,convertDateTimetoString,\r\n    validateEmail, formatDate, sortData} from '../../components/CommonScript';\r\nimport { ListWrapper } from '../../components/client-group.styles';\r\nimport DynamicSlideout from '../dynamicpreregdesign/DynamicSlideout.jsx';\r\nimport { transactionStatus } from '../../components/Enumeration';\r\n\r\nconst mapStateToProps = state => {\r\n    return ({ Login: state.Login })\r\n}\r\n\r\nclass DynamicMaster extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.formRef = React.createRef();\r\n        this.extractedColumnList = [];\r\n        this.detailedColumnList= [];\r\n        const dataState = {\r\n            skip: 0,\r\n            take: this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5,\r\n        };\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {},\r\n            dataResult: [],\r\n            dataState: dataState,\r\n            userRoleControlRights: [],\r\n            controlMap: new Map(),\r\n            comboComponents: [],\r\n            withoutCombocomponent: []\r\n        };\r\n    }\r\n\r\n    dataStateChange = (event) => {\r\n        this.setState({\r\n            dataResult: process(this.state.data ||[], event.dataState),\r\n            dataState: event.dataState\r\n        });\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.Login.loadEsign;\r\n        let openModal = this.props.Login.openModal;\r\n        let selectedRecord = this.props.Login.selectedRecord;\r\n        if (this.props.Login.loadEsign) {\r\n            if (this.props.Login.operation === \"delete\") {\r\n                loadEsign = false;\r\n                openModal = false;\r\n                selectedRecord = {};\r\n            }\r\n            else {\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n            }\r\n        }\r\n        else {\r\n            openModal = false;\r\n            selectedRecord = {};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openModal, loadEsign, selectedRecord, selectedId:null }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n\r\n    }\r\n\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.Login.masterStatus !== \"\" && props.Login.masterStatus !== state.masterStatus) {\r\n            toast.warn(props.Login.masterStatus);\r\n            props.Login.masterStatus = \"\";\r\n        }\r\n\r\n        if (props.Login.error !== state.error) {\r\n            toast.error(props.Login.error)\r\n            props.Login.error = \"\";\r\n        }         \r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        \r\n        let primaryKeyField = \"ndynamicmastercode\";\r\n\r\n        const editId = this.props.Login.inputParam && this.state.controlMap.has(\"Edit\")\r\n               && this.state.controlMap.get(\"Edit\").ncontrolcode;\r\n    \r\n        const editParam = {screenName:this.props.Login.inputParam && this.props.Login.inputParam.displayName \r\n                            && this.props.intl.formatMessage({ id: this.props.Login.inputParam.displayName }), operation:\"update\",  primaryKeyField, \r\n            inputParam:this.props.Login.inputParam,   userInfo:this.props.Login.userInfo,  ncontrolCode:editId};\r\n\r\n        const deleteParam ={operation:\"delete\"};\r\n\r\n        // const mandatoryFields=[];\r\n        // this.extractedColumnList.forEach(item=>item.mandatory === true ? \r\n        //     mandatoryFields.push(item) :\"\"\r\n        // );   \r\n        \r\n        return (<>\r\n                <Row>\r\n                    <Col>\r\n                        <ListWrapper className=\"client-list-content\">                           \r\n                            {this.state.data ?\r\n                                <DynamicDataGrid\r\n                                    primaryKeyField={primaryKeyField}\r\n                                    data={this.state.data}\r\n                                    dataResult={this.state.dataResult}\r\n                                    dataState={this.state.dataState}\r\n                                    dataStateChange={this.dataStateChange}\r\n                                    extractedColumnList={this.extractedColumnList}\r\n                                    detailedFieldList={this.detailedColumnList}\r\n                                    expandField={ this.detailedColumnList.length > 0 ? \"expanded\":false}\r\n                                    methodUrl={\"\"}\r\n                                    controlMap={this.state.controlMap}\r\n                                    userRoleControlRights={this.state.userRoleControlRights}\r\n                                    inputParam={this.props.Login.inputParam}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    fetchRecord={this.fetchRecord}\r\n                                    editParam={editParam}\r\n                                    deleteRecord={this.deleteRecord}\r\n                                    deleteParam={deleteParam}\r\n                                    reloadData={this.reloadData}\r\n                                    addRecord = {this.openModal}\r\n                                    pageable={true}\r\n                                    scrollable={'scrollable'}\r\n                                    gridHeight = {'600px'}\r\n                                    isActionRequired={true}\r\n                                    isToolBarRequired={true}\r\n                                    selectedId={this.props.Login.selectedId}\r\n                                />\r\n                                : \"\"}\r\n                        </ListWrapper>\r\n                    </Col>\r\n                </Row>\r\n \r\n                {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n                {this.props.Login.openModal ? \r\n                    <SlideOutModal show={this.props.Login.openModal}\r\n                        closeModal={this.closeModal}\r\n                        operation={this.props.Login.operation ? this.props.Login.operation : \"create\"}\r\n                        inputParam={this.props.Login.inputParam}\r\n                        screenName={this.props.Login.screenName}\r\n                        onSaveClick={this.onSaveClick}\r\n                        esign={this.props.Login.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        masterStatus={this.props.Login.masterStatus}\r\n                        updateStore={this.props.updateStore}\r\n                        selectedRecord={this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.state.mandatoryFields || []}\r\n                        addComponent={this.props.Login.loadEsign ?\r\n                            <Esign operation={this.props.Login.operation}\r\n                                onInputOnChange={this.onInputOnChange}\r\n                                inputParam={this.props.Login.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> :\r\n                                <DynamicSlideout\r\n                                    selectedRecord={this.props.Login.selectedRecord}\r\n                                    templateData={this.props.Login.masterData.DynamicMasterDesign &&\r\n                                        this.props.Login.masterData.DynamicMasterDesign.slideoutdesign}\r\n                                    handleChange={this.handleChange}\r\n                                    handleDateChange={this.handleDateChange}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onNumericInputChange={this.onNumericInputChange}\r\n                                    comboData={this.props.Login.comboData}\r\n                                    onComboChange={this.onComboChange}\r\n                                    onDropFile={this.onDropFile}\r\n                                    deleteAttachment={this.deleteAttachment}\r\n                                    userInfo={this.props.Login.userInfo}\r\n                                    timeZoneList={this.props.Login.timeZoneList}\r\n                                    defaultTimeZone={this.props.Login.defaultTimeZone}\r\n                                    Login={this.props.Login}\r\n                                />\r\n                            }\r\n                          \r\n                    /> :\"\"}\r\n            </>\r\n        );\r\n    }\r\n\r\n    openModal = () => {       \r\n     \r\n        const addId =  this.props.Login.inputParam && this.state.controlMap.has(\"Add\")\r\n                             && this.state.controlMap.get(\"Add\").ncontrolcode;\r\n     \r\n        this.props.getDynamicMasterCombo(this.props.Login.masterData, this.props.Login.userInfo, addId,\r\n                                            this.state.designData, this.state.selectedRecord, this.state.childColumnList, \r\n                                            this.state.comboComponents, this.state.withoutCombocomponent, \r\n                                            false, true, new Map(), true, \"create\", this.props.Login.displayName);\r\n    }\r\n\r\n    fetchRecord = (fetchRecordParam) => {     \r\n\r\n            this.props.getEditDynamicMasterCombo(fetchRecordParam,\r\n                    this.state.designData, this.state.selectedRecord, this.state.childColumnList,\r\n                    this.state.comboComponents, this.state.withoutCombocomponent) \r\n\r\n    }\r\n\r\n    comboChild = (data, columnList, childColumnList, slice) => {\r\n        let retunObj = {}\r\n        // if (data.findIndex(x => x.label === columnList.label) !== -1) {\r\n        if (!childColumnList.hasOwnProperty(columnList.label)) {\r\n            if (childColumnList[columnList.label] === undefined) {\r\n                if (columnList.hasOwnProperty(\"child\")) {\r\n                    let childList = []\r\n                    columnList.child.map(childData => {\r\n                        const index = data.findIndex(x => x.label === childData.label)\r\n                        if (index !== -1) {\r\n                            childList.push(data[index])\r\n                            if (slice) {\r\n                                data = [...data.slice(0, index), ...data.slice(index + 1)]\r\n                            }\r\n                        }\r\n                    })\r\n                    childColumnList[columnList.label] = childList;\r\n                    if (childList.length > 0) {\r\n                        childList.map(y => {\r\n                            if (y.hasOwnProperty(\"child\")) {\r\n                                const val = this.comboChild(data, y, childColumnList, slice)\r\n                                retunObj[\"data\"] = val.data;\r\n                                retunObj[\"childColumnList\"] = val.childColumnList;\r\n                            } else {\r\n                                retunObj[\"data\"] = data;\r\n                                retunObj[\"childColumnList\"] = childColumnList;\r\n                            }\r\n                        })\r\n                    } else {\r\n                        retunObj[\"data\"] = data;\r\n                        retunObj[\"childColumnList\"] = childColumnList;\r\n                    }\r\n                } else {\r\n                    retunObj[\"data\"] = data;\r\n                    retunObj[\"childColumnList\"] = childColumnList;\r\n                }\r\n            } else {\r\n                retunObj[\"data\"] = data;\r\n                retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n            }\r\n        } else {\r\n            retunObj[\"data\"] = data;\r\n            retunObj[\"childColumnList\"] = childColumnList;\r\n\r\n        }\r\n        return retunObj;\r\n    }\r\n\r\n    onComboChange = (comboData, control, customName) => {\r\n\r\n        let comboName = customName || control.label;\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (comboData) {\r\n            selectedRecord[comboName] = comboData;\r\n        } else {\r\n            selectedRecord[comboName] = []\r\n        }\r\n        if (control.child && control.child.length > 0) {\r\n            const childComboList = getSameRecordFromTwoArrays(this.state.comboComponents, control.child, \"label\")\r\n            let childColumnList = {};\r\n            childComboList.map(columnList => {\r\n                const val = this.comboChild(this.state.comboComponents, columnList, childColumnList, false);\r\n                childColumnList = val.childColumnList\r\n            })\r\n\r\n            const parentList = getSameRecordFromTwoArrays(this.state.withoutCombocomponent, control.child, \"label\")\r\n\r\n            const inputParem = {\r\n                child: control.child,\r\n                source: control.source,\r\n                primarykeyField: control.valuemember,\r\n                value: comboData.value,\r\n                item: comboData.item\r\n            }\r\n            this.props.getChildValues(inputParem,\r\n                this.props.Login.userInfo, selectedRecord, this.props.Login.comboData,\r\n                childComboList, childColumnList, this.state.withoutCombocomponent, [...childComboList, ...parentList])\r\n        } else {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { selectedRecord }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n    }\r\n    \r\n    onNumericInputChange = (value, name) => {\r\n        let selectedRecord = this.state.selectedRecord\r\n        selectedRecord[name] = value;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    handleDateChange = (dateValue, dateName) => {\r\n        const { selectedRecord } = this.state;\r\n        selectedRecord[dateName] = dateValue;\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onDrop = (value, type, oldVlaue) => {\r\n        const design = this.state.design;\r\n        let columns = design[0].children;\r\n        let designData = this.props.Login.ReactInputFields;\r\n        value = JSON.parse(value.fields);\r\n        value = { ...value, type: \"component\" }\r\n        let designDataIndex = designData.findIndex(item => item.label === value.label);\r\n        let firstIndex = columns[0] ? columns[0].children.findIndex(item => item.label === value.label) : -1;\r\n        let secondIndex = columns[1] ? columns[1].children.findIndex(item => item.label === value.label) : -1;\r\n\r\n        if (designDataIndex >= 0)\r\n            designData.splice(designDataIndex, 1);\r\n        if (firstIndex >= 0) {\r\n            if (type !== 1) {\r\n                columns[0].children.splice(firstIndex, 1);\r\n                // columns[0].splice(to, 0, columns[0].splice(from, 1)[0]);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[0].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[0].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[0].children.splice(to, 0, columns[0].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n\r\n        } else if (type === 1) {\r\n            if (columns[0]) {\r\n                columns[0].children.push(value);\r\n            } else {\r\n                columns[0] = {\r\n                    id: \"1\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n\r\n                columns[0].children.push(value);\r\n            }\r\n        }\r\n        if (secondIndex >= 0) {\r\n            if (type !== 2) {\r\n                columns[1].splice(secondIndex, 1);\r\n            } else {\r\n                if (oldVlaue) {\r\n                    oldVlaue = JSON.parse(oldVlaue);\r\n                    let from = columns[1].children.findIndex(item => item.label === value.label);\r\n                    let to = columns[1].children.findIndex(item => item.label === oldVlaue.label);\r\n                    columns[1].children.splice(to, 0, columns[1].children.splice(from, 1)[0]);\r\n                }\r\n            }\r\n        } else if (type === 2) {\r\n            if (columns[1]) {\r\n                columns[1].children.push(value);\r\n            } else {\r\n                columns[1] = {\r\n                    id: \"2\",\r\n                    type: \"column\",\r\n                    children: []\r\n                }\r\n                columns[1].children.push(value);\r\n            }\r\n        }\r\n\r\n        // design.push(columns)\r\n        this.setState({ designData, design })\r\n    }\r\n\r\n    onDropFile = (attachedFiles, fieldName, maxSize) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n    componentDidUpdate(previousProps) {       \r\n   \r\n        if (this.props.Login.masterData !== previousProps.Login.masterData) {\r\n            if (this.props.Login.userInfo.nformcode !== previousProps.Login.userInfo.nformcode) {\r\n                const userRoleControlRights = [];\r\n              \r\n                if (this.props.Login.userRoleControlRights) {\r\n                    this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode] && Object.values(this.props.Login.userRoleControlRights[this.props.Login.userInfo.nformcode]).map(item =>\r\n                        userRoleControlRights.push(item.ncontrolcode))\r\n                }\r\n                const controlMap = getControlMap(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode)\r\n                this.extractedColumnList = [];    \r\n                this.detailedColumnList = [];            \r\n                              \r\n                if (this.props.Login.masterData && this.props.Login.masterData.DynamicMasterDesign &&\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign)\r\n                {\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.griditem.map(row => {\r\n                       // console.log(\"data:\", row);\r\n                        this.extractedColumnList.push({\"idsName\":row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\":row[\"2\"]}) ;                     \r\n                    })\r\n                    this.props.Login.masterData.DynamicMasterDesign.screendesign.gridmoreitem.map(row => {\r\n                        this.detailedColumnList.push({\"idsName\":row[\"1\"][this.props.Login.userInfo.slanguagetypecode], \"dataField\":row[\"2\"]}) ;                     \r\n                    })\r\n                }\r\n\r\n                let data = [];\r\n                const withoutCombocomponent = [];\r\n                const mandatoryFields = [];\r\n                const Layout = (this.props.Login.masterData.DynamicMasterDesign && this.props.Login.masterData.DynamicMasterDesign.slideoutdesign ) || [];\r\n                Layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"children\") ){\r\n                                component.children.map(componentrow => {\r\n                                    if (componentrow.inputtype === \"combo\") {\r\n                                        data.push(componentrow)\r\n                                    } else {\r\n                                        withoutCombocomponent.push(componentrow)\r\n                                    }\r\n                                    if (componentrow.mandatory === true){\r\n                                        if (componentrow.inputtype === \"email\") {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true, \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                                \"validateFunction\": validateEmail,\r\n                                                \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                                \"controlType\": \"textbox\"\r\n                                            })\r\n                                        } \r\n                                        else {\r\n                                            mandatoryFields.push({\r\n                                                \"mandatory\": true,\r\n                                                \"idsName\": componentrow.label,\r\n                                                \"dataField\": componentrow.label,\r\n                                                \"mandatoryLabel\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                                \"controlType\": componentrow.inputtype === \"combo\" ?\r\n                                                    \"selectbox\" : \"textbox\"\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                            else\r\n                            {\r\n                                component.inputtype === \"combo\" ? \r\n                                    data.push(component) \r\n                                : withoutCombocomponent.push(component)\r\n\r\n                                if (component.mandatory === true){\r\n                                    if (component.inputtype === \"email\") {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true, \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"alertPreFix\": this.props.intl.formatMessage({ id: \"IDS_VALID\" }),\r\n                                            \"validateFunction\": validateEmail,\r\n                                            \"mandatoryLabel\": \"IDS_ENTER\",\r\n                                            \"controlType\": \"textbox\"\r\n                                        })\r\n                                    } \r\n                                    else {\r\n                                        mandatoryFields.push({\r\n                                            \"mandatory\": true,\r\n                                            \"idsName\": component.label,\r\n                                            \"dataField\": component.label,\r\n                                            \"mandatoryLabel\": component.inputtype === \"combo\" ?\r\n                                                \"IDS_SELECT\" : \"IDS_ENTER\",\r\n                                            \"controlType\": component.inputtype === \"combo\" ?\r\n                                                \"selectbox\" : \"textbox\"\r\n                                        })\r\n                                    }\r\n                                }\r\n                            }   \r\n                        })\r\n                    })\r\n                })\r\n                const comboComponents = data;\r\n                let childColumnList = {};\r\n                data.map(columnList => {\r\n                    const val = this.comboChild(data, columnList, childColumnList, true);\r\n                    data = val.data;\r\n                    childColumnList = val.childColumnList\r\n                })\r\n\r\n                const masterData =  this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\",\"ndynamicmastercode\") : [];\r\n\r\n               this.setState({ withoutCombocomponent, comboComponents, childColumnList,designData : data,mandatoryFields,\r\n                    userRoleControlRights, controlMap, data: this.props.Login.masterData.DynamicMasterData || [],\r\n                    dataResult: process(masterData || [], this.state.dataState),\r\n                });\r\n            }\r\n            else {        \r\n                let {dataState}=this.state;\r\n                if(this.props.Login.dataState === undefined){\r\n                    dataState={skip:0,take:this.props.Login.settings ? parseInt(this.props.Login.settings[14]) : 5}\r\n                }  \r\n            \r\n                const masterData =  this.props.Login.masterData.DynamicMasterData ? sortData(this.props.Login.masterData.DynamicMasterData, \"descending\",\"ndynamicmastercode\") : [];\r\n\r\n                this.setState({\r\n                    data: this.props.Login.masterData.DynamicMasterData || [], selectedRecord: this.props.Login.selectedRecord,\r\n                    dataResult: process(masterData ||[],dataState),\r\n                    dataState//, comboComponents, withoutCombocomponent\r\n                });               \r\n            }  \r\n        }     \r\n        if (this.props.Login.selectedRecord !== previousProps.Login.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.Login.selectedRecord });          \r\n        }        \r\n    }\r\n\r\n    onInputOnChange = (event, value) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n      \r\n        if (event.target.type === 'toggle') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        } else if (event.target.type === 'numeric') {\r\n            if (/\\D/.test(event.target.value))\r\n                selectedRecord[event.target.name] = event.target.value;\r\n        } else if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = value;\r\n        } else if (event.target.type === 'radio') {\r\n            selectedRecord[event.target.name] = value\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    //deleteRecord = (selectedRecord, operation, ncontrolCode) => {\r\n    deleteRecord = (deleteParam) =>{\r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: {\r\n                [\"dynamicmaster\"]: {\"ndynamicmastercode\":deleteParam.selectedRecord.ndynamicmastercode},//.dataItem,\r\n                \"userinfo\": this.props.Login.userInfo\r\n            },\r\n            operation:\"delete\",\r\n            dataState:this.state.dataState\r\n        }\r\n\r\n        if (showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation:\"delete\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    reloadData = () => {\r\n        const inputParam = {\r\n            inputData: { \"userinfo\": this.props.Login.userInfo },\r\n            classUrl: this.props.Login.inputParam.classUrl,\r\n            methodUrl: this.props.Login.inputParam.methodUrl,\r\n            userInfo: this.props.Login.userInfo,\r\n            displayName: this.props.Login.inputParam.displayName\r\n        };\r\n        this.props.callService(inputParam);\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        //add / edit  \r\n\r\n        let inputData = [];\r\n        let dataState =undefined;\r\n        inputData[\"userinfo\"] = this.props.Login.userInfo;\r\n        inputData[\"masterdateconstraints\"] =  this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdateconstraints;\r\n        inputData[\"masterdatefields\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masterdatefields;\r\n        inputData[\"masteruniquevalidation\"] = this.props.Login.masterData.DynamicMasterDesign.screendesign.masteruniquevalidation;\r\n        let selectedId = null;\r\n        let operation = \"\";\r\n        let selectedRecord = this.state.selectedRecord;\r\n        if (this.props.Login.operation === \"update\") {    // edit\r\n            dataState=this.state.dataState\r\n            inputData[\"dynamicmaster\"] = {ndynamicmastercode:this.state.selectedRecord[\"ndynamicmastercode\"]};//this.state.selectedRecord;\r\n            inputData[\"dynamicmaster\"][\"jsondata\"] = {}; \r\n            inputData[\"dynamicmaster\"][\"jsonuidata\"] = {}; \r\n            selectedId = this.props.Login.selectedId; \r\n            operation = \"update\";\r\n        }\r\n        else {\r\n            //add                          \r\n            inputData[\"dynamicmaster\"] = { //\"nsitecode\": this.props.Login.userInfo.nmastersitecode, \r\n                                            nformcode:this.props.Login.userInfo.nformcode, \r\n                                            ndesigntemplatemappingcode:this.props.Login.masterData.DynamicMasterDesign.ndesigntemplatemappingcode, \r\n                                            jsondata:{}, jsonuidata:{} };\r\n\r\n           operation = \"create\";\r\n           \r\n        }\r\n\r\n        const dateList = [];\r\n        const defaulttimezone = this.props.Login.defaulttimezone;\r\n        const userInfo = this.props.Login.userInfo;\r\n\r\n        this.props.Login.masterData.DynamicMasterDesign &&\r\n            this.props.Login.masterData.DynamicMasterDesign.slideoutdesign.map(row => {\r\n                row.children.map(column => {\r\n                    column.children.map(component => {\r\n                        if (component.hasOwnProperty(\"children\")) {\r\n                          \r\n                            component.children.map(componentrow => {\r\n                                if (componentrow.inputtype === \"combo\") {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        { value: selectedRecord[componentrow.label].value, label: selectedRecord[componentrow.label].label } : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = selectedRecord[componentrow.label] ? selectedRecord[componentrow.label].label : \"\"\r\n                                    \r\n                                }\r\n                                else if (componentrow.inputtype === \"date\") {\r\n                                    if (componentrow.mandatory) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = formatDate(selectedRecord[componentrow.label], false)\r\n                                        \r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        //inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    } \r\n                                    else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = componentrow.loadcurrentdate ?\r\n                                             formatDate(selectedRecord[componentrow.label] || new Date(), false):\r\n                                            selectedRecord[componentrow.label] ? formatDate(selectedRecord[componentrow.label], false)\r\n                                            : \"\";\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] =  inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label];\r\n                                        //convertDateTimetoString(selectedRecord[componentrow.label], userInfo);\r\n                                    }\r\n                                    if (componentrow.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`] = selectedRecord[`tz${componentrow.label}`] ?\r\n                                            { value: selectedRecord[`tz${componentrow.label}`].value, label: selectedRecord[`tz${componentrow.label}`].label } :\r\n                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                            inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${componentrow.label}`] =  inputData[\"dynamicmaster\"][\"jsondata\"][`tz${componentrow.label}`]\r\n                                    }\r\n                                    dateList.push(componentrow.label)\r\n                                }\r\n\r\n                                else {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label] = selectedRecord[componentrow.label] ?\r\n                                        selectedRecord[componentrow.label] : \"\"\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][componentrow.label] = inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n                                        // inputData[\"dynamicmaster\"][\"jsondata\"][componentrow.label]\r\n\r\n                                }\r\n                                return inputData[\"dynamicmaster\"];\r\n                            })\r\n                         }\r\n                        else {\r\n                            if (component.inputtype === \"combo\") {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    { value: selectedRecord[component.label].value, label: selectedRecord[component.label].label } : -1\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label].label;\r\n                                    //selectedRecord[component.label] ? selectedRecord[component.label].label : \"\"\r\n                            }\r\n                            else if (component.inputtype === \"date\") {\r\n                                if (component.mandatory) {\r\n                                    inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = formatDate(selectedRecord[component.label] , false);\r\n                                        // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                        // selectedRecord[component.label] : new Date(), userInfo);\r\n\r\n                                    inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] =  inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                    //convertDateTimetoString(selectedRecord[component.label], userInfo);\r\n                                       \r\n                                } else {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = component.loadcurrentdate ?\r\n                                                                //convertDateTimetoString(selectedRecord[component.label] ?                                      \r\n                                                                //    selectedRecord[component.label] : new Date(), userInfo) :\r\n                                                                formatDate(selectedRecord[component.label] || new Date(), false) :\r\n                                                                selectedRecord[component.label] ? \r\n                                                            // convertDateTimetoString(selectedRecord[component.label] ?\r\n                                                                //   selectedRecord[component.label] : new Date(), userInfo) : \"\";\r\n                                                                    formatDate(selectedRecord[component.label] , false) :\"\";\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                                        //convertDateTimetoString(selectedRecord[component.label], userInfo)\r\n                                      \r\n                                }\r\n                                if (component.timezone) {\r\n                                        inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`] = selectedRecord[`tz${component.label}`] ?\r\n                                                            { value: selectedRecord[`tz${component.label}`].value, label: selectedRecord[`tz${component.label}`].label } :\r\n                                                            defaulttimezone ? defaulttimezone : -1\r\n\r\n                                        inputData[\"dynamicmaster\"][\"jsonuidata\"][`tz${component.label}`] =  inputData[\"dynamicmaster\"][\"jsondata\"][`tz${component.label}`]\r\n                                }\r\n                                dateList.push(component.label)\r\n                            }\r\n                            else {\r\n                                inputData[\"dynamicmaster\"][\"jsondata\"][component.label] = selectedRecord[component.label] ?\r\n                                    selectedRecord[component.label] : \"\"\r\n\r\n                                inputData[\"dynamicmaster\"][\"jsonuidata\"][component.label] = inputData[\"dynamicmaster\"][\"jsondata\"][component.label]\r\n                            }\r\n                        }\r\n                        return inputData[\"dynamicmaster\"];\r\n                    }\r\n                    )\r\n                    return inputData[\"dynamicmaster\"];\r\n                })\r\n                return inputData[\"dynamicmaster\"];\r\n            })\r\n\r\n\r\n        inputData[\"dynamicmaster\"][\"jsonstring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsondata\"]);\r\n        inputData[\"dynamicmaster\"][\"jsonuistring\"] = JSON.stringify(inputData[\"dynamicmaster\"][\"jsonuidata\"]);\r\n        inputData[\"masterdatelist\"] = dateList;       \r\n        \r\n        const inputParam = {\r\n            classUrl: \"dynamicmaster\",\r\n            methodUrl: \"DynamicMaster\",\r\n            displayName: this.props.Login.displayName,\r\n            inputData: inputData, operation:operation,\r\n            saveType, formRef,  selectedId,dataState\r\n\r\n        }\r\n        const esignNeeded = showEsign(this.props.Login.userRoleControlRights, this.props.Login.userInfo.nformcode, this.props.Login.ncontrolCode);\r\n        if (esignNeeded) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData: this.props.Login.masterData },\r\n                    openModal: true, screenName: this.props.Login.displayName,\r\n                    operation: \"create\"\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else {\r\n            this.props.crudMaster(inputParam, this.props.Login.masterData, \"openModal\");\r\n        }\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.Login.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.Login.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openModal\");\r\n    }\r\n\r\n}\r\nexport default connect(mapStateToProps, { callService, crudMaster, updateStore, validateEsignCredential, \r\n    getChildValues, getEditDynamicMasterCombo,//fetchRecord,\r\n    getDynamicMasterCombo})(injectIntl(DynamicMaster));\r\n"]},"metadata":{},"sourceType":"module"}