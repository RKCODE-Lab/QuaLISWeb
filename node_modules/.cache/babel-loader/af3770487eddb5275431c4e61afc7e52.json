{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Scheduler,TimelineView,DayView,WeekView,MonthView,AgendaView}from'@progress/kendo-react-scheduler';import FormSelectSearch from'../../components/form-select-search/form-select-search.component';import{Col,Row}from\"react-bootstrap\";import{injectIntl}from\"react-intl\";import{guid}from'@progress/kendo-react-common';import'./Calender.css';import CustomEditItem,{CustomEditSlotForMonth,CustomSlot,CustomSlotForDayAndWeek,CustomTask}from\"./EditItem\";import CustomItem from'./NewCustomItem';import{FormWithCustomEditor}from\"./custom-form\";import{toast}from\"react-toastify\";import rsapi from\"../../rsapi\";import{convertDateTimetoStringDBFormat}from\"../../components/CommonScript\";var NewJobAlloct=/*#__PURE__*/function(_React$Component){_inherits(NewJobAlloct,_React$Component);var _super=_createSuper(NewJobAlloct);function NewJobAlloct(props){var _this;_classCallCheck(this,NewJobAlloct);_this=_super.call(this,props);_this.handleDateChange=function(e){var date=e.value;var view=_this.state.view;return rsapi.post(\"joballocation/getAnalystCalendarBasedOnUserWithDate\",{\"nusercode\":_this.props.selectedRecord[\"nusercode\"]?_this.props.selectedRecord[\"nusercode\"].value:-1,view:view,startDate:convertDateTimetoStringDBFormat(date,_this.props.userInfo),\"userinfo\":_this.props.userInfo}).then(function(response){var data=[];for(var i=0;i<response.data.UserData.length;i++){data.push(_objectSpread(_objectSpread({},response.data.UserData[i].jsondata),response.data.UserData[i]));}data=data.map(function(dataItem,i){return{start:new Date(dataItem.UserStartDate),end:new Date(dataItem.UserEndDate),title:\"\".concat(dataItem.sarno&&dataItem.sarno,\"/\").concat(dataItem.stestsynonym&&dataItem.stestsynonym),// title: `ArNo:${dataItem.sarno && dataItem.sarno} - Test Name:${dataItem.stestsynonym && dataItem.stestsynonym} - Status:${dataItem.stransdisplaystatus && dataItem.stransdisplaystatus}`,\nid:dataItem.id?dataItem.id:i,startTimezone:dataItem.startTimezone,endTimezone:dataItem.endTimezone,description:dataItem.Comments?dataItem.Comments:\"\",Instrument:dataItem.Instrument.value,InstrumentCategory:dataItem.InstrumentCategory.value,sarno:dataItem.sarno,ssamplearno:dataItem.ssamplearno,stestsynonym:dataItem.stestsynonym,ntransactionstatus:dataItem.ntransactionstatus,stransdisplaystatus:dataItem.stransdisplaystatus,ntransactiontestcode:dataItem.ntransactiontestcode,npreregno:dataItem.npreregno};});_this.setState({data:data,startDate:date});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};_this.onViewChange=function(e){return rsapi.post(\"joballocation/getAnalystCalendarBasedOnUserWithDate\",{\"nusercode\":_this.props.selectedRecord[\"nusercode\"]?_this.props.selectedRecord[\"nusercode\"].value:-1,view:e.value,startDate:convertDateTimetoStringDBFormat(_this.state.startDate,_this.props.userInfo),\"userinfo\":_this.props.userInfo}).then(function(response){var data=[];for(var i=0;i<response.data.UserData.length;i++){data.push(_objectSpread(_objectSpread({},response.data.UserData[i].jsondata),response.data.UserData[i]));}data=data.map(function(dataItem,i){return{start:new Date(dataItem.UserStartDate),end:new Date(dataItem.UserEndDate),title:\"\".concat(dataItem.sarno&&dataItem.sarno,\"/\").concat(dataItem.stestsynonym&&dataItem.stestsynonym),id:dataItem.id?dataItem.id:i,startTimezone:dataItem.startTimezone,endTimezone:dataItem.endTimezone,description:dataItem.Comments?dataItem.Comments:\"\",Instrument:dataItem.Instrument.value,InstrumentCategory:dataItem.InstrumentCategory.value,sarno:dataItem.sarno,ssamplearno:dataItem.ssamplearno,stestsynonym:dataItem.stestsynonym,ntransactionstatus:dataItem.ntransactionstatus,stransdisplaystatus:dataItem.stransdisplaystatus,ntransactiontestcode:dataItem.ntransactiontestcode,npreregno:dataItem.npreregno};});_this.setState({data:data,view:e.value});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};_this.handleDataChange=function(_ref){var created=_ref.created,updated=_ref.updated,deleted=_ref.deleted;var data=_this.state.data;var aa=created.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}));if(aa.length>1){var dataTest=data.filter(function(x){return x.insertRecord;});if(dataTest.length!==_this.props.selectedTest.length){data=data.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(_this.props.selectedTest.map(function(y){if(dataTest.filter(function(x){return x.ntransactiontestcode===y.ntransactiontestcode;}).length===0){return Object.assign({},y,_objectSpread({},created.map(function(item){return Object.assign({},item,{id:guid(),insertRecord:true,title:\"\".concat(y.sarno&&y.sarno,\"/\").concat(y.stestsynonym&&y.stestsynonym)});})[0]));}}));var newArray=data.filter(function(a){return a;});_this.setState({data:newArray});_this.props.parentScheduleState(newArray);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_TESTALREADYASSIGNEDEDITASSIGNED\"}));}}if(updated.length>0){data=data// Filter the deleted items\n.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(created.map(function(item){return Object.assign({},item,{id:guid()});}));_this.setState({data:data});_this.props.parentScheduleState(data);}if(deleted.length>0){if(deleted[0].ntransactionstatus!==20){_this.setState(function(old){return{data:old.data// Filter the deleted items\n.filter(function(item){return deleted.find(function(current){return current.id===item.id;})===undefined;})// Find and replace the updated items\n.map(function(item){return updated.find(function(current){return current.id===item.id;})||item;})// Add the newly created items and assign an `id`.\n.concat(created.map(function(item){return Object.assign({},item,{});}))};});_this.props.parentScheduleState(data);}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ALLOTEDCANNOTBEDELETED\"}));}}};_this.state={data:[],view:'month',startDate:_this.props.currentTime};return _this;}_createClass(NewJobAlloct,[{key:\"render\",value:function render(){var _this2=this;var displayDate=this.props.currentTime;return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Row,{className:\"mt-n4\"},/*#__PURE__*/React.createElement(Col,{md:8,className:\"d-flex\"},/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_TECHNIQUE\"}),isSearchable:true,name:\"ntechniquecode\",isDisabled:false,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:false,isClearable:true,options:this.props.Technique,value:this.props.selectedRecord[\"ntechniquecode\"]||\"\",defaultValue:this.props.selectedRecord[\"ntechniquecode\"],onChange:function onChange(event){return _this2.props.onComboChange(event,\"ntechniquecode\");},closeMenuOnSelect:true,formGroupClassName:\"single-line-label\"}),/*#__PURE__*/React.createElement(FormSelectSearch,{formLabel:this.props.intl.formatMessage({id:\"IDS_USERS\"}),isSearchable:true,name:\"nusercode\",isDisabled:false,placeholder:this.props.intl.formatMessage({id:\"IDS_SELECTRECORD\"}),isMandatory:true,isClearable:false,options:this.props.Users,value:this.props.selectedRecord[\"nusercode\"]||\"\",defaultValue:this.props.selectedRecord[\"nusercode\"],onChange:function onChange(event){return _this2.props.onComboChange(event,\"nusercode\");},closeMenuOnSelect:true,formGroupClassName:\"single-line-label\"})))),/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Scheduler,{data:this.state.data,onDataChange:this.handleDataChange,onDateChange:this.handleDateChange,onViewChange:this.onViewChange,editable:{add:true,remove:true,drag:false,resize:true,select:true,edit:true},height:600,editItem:CustomEditItem,item:CustomItem,form:FormWithCustomEditor,defaultDate:displayDate,editSlot:CustomEditSlotForMonth,slot:CustomSlot},/*#__PURE__*/React.createElement(MonthView,{editable:{add:true,remove:true,drag:false,resize:true,select:true,edit:true}}),/*#__PURE__*/React.createElement(AgendaView,{slotDivisions:1,task:CustomTask,editable:{add:false,remove:false,drag:false,resize:false,select:false,edit:false}}),/*#__PURE__*/React.createElement(WeekView,{slot:CustomSlotForDayAndWeek,editItem:CustomEditItem,editSlot:CustomEditSlotForMonth,item:CustomItem}),/*#__PURE__*/React.createElement(DayView,{slot:CustomSlotForDayAndWeek,editSlot:CustomEditSlotForMonth,editItem:CustomEditItem,item:CustomItem,numberOfDays:2,style:{zorder:25000}}),/*#__PURE__*/React.createElement(TimelineView,{slot:CustomSlotForDayAndWeek}))));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){var data=[];if(this.props.userData!==undefined){if(!(this.props.userData.length<=this.state.data.length)){for(var i=0;i<this.props.userData.length;i++){data.push(_objectSpread(_objectSpread({},this.props.userData[i].jsondata),this.props.userData[i]));}data=data.map(function(dataItem,i){return{start:new Date(dataItem.UserStartDate),end:new Date(dataItem.UserEndDate),title:\"\".concat(dataItem.sarno&&dataItem.sarno,\"/\").concat(dataItem.stestsynonym&&dataItem.stestsynonym),// title: `ArNo:${dataItem.sarno && dataItem.sarno} - Test Name:${dataItem.stestsynonym && dataItem.stestsynonym} - Status:${dataItem.stransdisplaystatus && dataItem.stransdisplaystatus}`,\nid:dataItem.id?dataItem.id:i,startTimezone:dataItem.startTimezone,endTimezone:dataItem.endTimezone,description:dataItem.Comments?dataItem.Comments:\"\",Instrument:dataItem.Instrument.value,InstrumentCategory:dataItem.InstrumentCategory.value,sarno:dataItem.sarno,ssamplearno:dataItem.ssamplearno,stestsynonym:dataItem.stestsynonym,ntransactionstatus:dataItem.ntransactionstatus,stransdisplaystatus:dataItem.stransdisplaystatus,ntransactiontestcode:dataItem.ntransactiontestcode,npreregno:dataItem.npreregno};});this.setState({data:data});}}}}]);return NewJobAlloct;}(React.Component);export default injectIntl(NewJobAlloct);export var currentYear=new Date().getFullYear();export var parseAdjust=function parseAdjust(eventDate){var date=new Date(eventDate);date.setFullYear(currentYear);return date;};export var parseAdjustDate=function parseAdjustDate(eventDate){return[padTo2Digits(eventDate.getMonth()+1),eventDate.getFullYear(),padTo2Digits(eventDate.getDate())].join('/');};export var padTo2Digits=function padTo2Digits(num){return num.toString().padStart(2,'0');};","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/joballocation/NewJobAlloct.jsx"],"names":["React","Scheduler","TimelineView","DayView","WeekView","MonthView","AgendaView","FormSelectSearch","Col","Row","injectIntl","guid","CustomEditItem","CustomEditSlotForMonth","CustomSlot","CustomSlotForDayAndWeek","CustomTask","CustomItem","FormWithCustomEditor","toast","rsapi","convertDateTimetoStringDBFormat","NewJobAlloct","props","handleDateChange","e","date","value","view","state","post","selectedRecord","startDate","userInfo","then","response","data","i","UserData","length","push","jsondata","map","dataItem","start","Date","UserStartDate","end","UserEndDate","title","sarno","stestsynonym","id","startTimezone","endTimezone","description","Comments","Instrument","InstrumentCategory","ssamplearno","ntransactionstatus","stransdisplaystatus","ntransactiontestcode","npreregno","setState","catch","error","status","message","warn","onViewChange","handleDataChange","created","updated","deleted","aa","concat","item","Object","assign","dataTest","filter","x","insertRecord","selectedTest","find","current","undefined","y","newArray","a","parentScheduleState","info","intl","formatMessage","old","currentTime","displayDate","Technique","event","onComboChange","Users","add","remove","drag","resize","select","edit","zorder","previousProps","userData","Component","currentYear","getFullYear","parseAdjust","eventDate","setFullYear","parseAdjustDate","padTo2Digits","getMonth","getDate","join","num","toString","padStart"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Scheduler, TimelineView, DayView, WeekView, MonthView, AgendaView } from '@progress/kendo-react-scheduler';\r\nimport FormSelectSearch from '../../components/form-select-search/form-select-search.component';\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { injectIntl } from \"react-intl\";\r\nimport { guid } from '@progress/kendo-react-common';\r\nimport './Calender.css'\r\nimport CustomEditItem, {\r\n    CustomEditSlotForMonth,\r\n    CustomSlot,\r\n    CustomSlotForDayAndWeek,\r\n    CustomTask\r\n} from \"./EditItem\";\r\nimport CustomItem from './NewCustomItem'\r\nimport { FormWithCustomEditor } from \"./custom-form\";\r\nimport { toast } from \"react-toastify\";\r\nimport rsapi from \"../../rsapi\";\r\nimport { convertDateTimetoStringDBFormat } from \"../../components/CommonScript\";\r\n\r\nclass NewJobAlloct extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [],\r\n            view: 'month',\r\n            startDate:this.props.currentTime\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var displayDate = this.props.currentTime;\r\n        return (\r\n            <Row>\r\n            <Col md={12}>\r\n                <Row className=\"mt-n4\">\r\n                    <Col md={8} className=\"d-flex\">\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_TECHNIQUE\" })}\r\n                                isSearchable={true}\r\n                                name={\"ntechniquecode\"}\r\n                                isDisabled={false}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={false}\r\n                                isClearable={true}\r\n                                options={this.props.Technique}\r\n                                value={this.props.selectedRecord[\"ntechniquecode\"] || \"\"}\r\n                                defaultValue={this.props.selectedRecord[\"ntechniquecode\"]}\r\n                                onChange={(event) => this.props.onComboChange(event, \"ntechniquecode\")}\r\n                                closeMenuOnSelect={true}\r\n                                formGroupClassName={\"single-line-label\"}\r\n                            >\r\n                            </FormSelectSearch>\r\n                            <FormSelectSearch\r\n                                formLabel={this.props.intl.formatMessage({ id: \"IDS_USERS\" })}\r\n                                isSearchable={true}\r\n                                name={\"nusercode\"}\r\n                                isDisabled={false}\r\n                                placeholder={this.props.intl.formatMessage({ id: \"IDS_SELECTRECORD\" })}\r\n                                isMandatory={true}\r\n                                isClearable={false}\r\n                                options={this.props.Users}\r\n                                value={this.props.selectedRecord[\"nusercode\"] || \"\"}\r\n                                defaultValue={this.props.selectedRecord[\"nusercode\"]}\r\n                                onChange={(event) => this.props.onComboChange(event, \"nusercode\")}\r\n                                closeMenuOnSelect={true}\r\n                                formGroupClassName={\"single-line-label\"}\r\n                            >\r\n                            </FormSelectSearch>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n                <Col md={12}>\r\n                    <Scheduler data={this.state.data}\r\n                        onDataChange={this.handleDataChange}\r\n                        onDateChange={this.handleDateChange}\r\n                        onViewChange={this.onViewChange}\r\n                        editable={{\r\n                            add: true,\r\n                            remove: true,\r\n                            drag: false,\r\n                            resize: true,\r\n                            select: true,\r\n                            edit: true\r\n                        }}\r\n                        height={600}\r\n                        editItem={CustomEditItem}\r\n                        item={CustomItem}\r\n                        form={FormWithCustomEditor}\r\n                        defaultDate={displayDate}\r\n                        editSlot={CustomEditSlotForMonth}\r\n                        slot={CustomSlot}\r\n                    >\r\n                        <MonthView\r\n                            editable={{\r\n                                add: true,\r\n                                remove: true,\r\n                                drag: false,\r\n                                resize: true,\r\n                                select: true,\r\n                                edit: true\r\n                            }}\r\n                        />\r\n                        <AgendaView slotDivisions={1} task={CustomTask} editable={{\r\n                            add: false,\r\n                            remove: false,\r\n                            drag: false,\r\n                            resize: false,\r\n                            select: false,\r\n                            edit: false\r\n                        }} />\r\n                        <WeekView\r\n                            slot={CustomSlotForDayAndWeek}\r\n                            editItem={CustomEditItem}\r\n                            editSlot={CustomEditSlotForMonth}\r\n                            item={CustomItem}\r\n                        />\r\n                        <DayView\r\n                            slot={CustomSlotForDayAndWeek}\r\n                            editSlot={CustomEditSlotForMonth}\r\n                            editItem={CustomEditItem}\r\n                            item={CustomItem}\r\n                            numberOfDays={2}\r\n                            style={{ zorder: 25000 }}\r\n                        />\r\n                        <TimelineView \r\n                            slot={CustomSlotForDayAndWeek}\r\n                        />\r\n                    </Scheduler>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n\r\n    handleDateChange = (e) => {\r\n        const date = e.value\r\n        const view = this.state.view\r\n        return rsapi.post(\"joballocation/getAnalystCalendarBasedOnUserWithDate\", {\r\n            \"nusercode\": this.props.selectedRecord[\"nusercode\"] ? this.props.selectedRecord[\"nusercode\"].value : -1, view: view, startDate: convertDateTimetoStringDBFormat(date, this.props.userInfo),\r\n            \"userinfo\": this.props.userInfo\r\n        })\r\n            .then(response => {\r\n                let data = [];\r\n                for (let i = 0; i < response.data.UserData.length; i++) {\r\n                    data.push({ ...response.data.UserData[i].jsondata, ...response.data.UserData[i] });\r\n                }\r\n                data = data.map((dataItem, i) => ({\r\n                    start: new Date(dataItem.UserStartDate),\r\n                    end: new Date(dataItem.UserEndDate),\r\n                    title: `${dataItem.sarno && dataItem.sarno}/${dataItem.stestsynonym && dataItem.stestsynonym}`,\r\n                    // title: `ArNo:${dataItem.sarno && dataItem.sarno} - Test Name:${dataItem.stestsynonym && dataItem.stestsynonym} - Status:${dataItem.stransdisplaystatus && dataItem.stransdisplaystatus}`,\r\n                    id: dataItem.id ? dataItem.id : i,\r\n                    startTimezone: dataItem.startTimezone,\r\n                    endTimezone: dataItem.endTimezone,\r\n                    description: dataItem.Comments ? dataItem.Comments : \"\",\r\n                    Instrument: dataItem.Instrument.value,\r\n                    InstrumentCategory: dataItem.InstrumentCategory.value,\r\n                    sarno: dataItem.sarno,\r\n                    ssamplearno: dataItem.ssamplearno,\r\n                    stestsynonym: dataItem.stestsynonym,\r\n                    ntransactionstatus: dataItem.ntransactionstatus,\r\n                    stransdisplaystatus: dataItem.stransdisplaystatus,\r\n                    ntransactiontestcode: dataItem.ntransactiontestcode,\r\n                    npreregno: dataItem.npreregno,\r\n                }))\r\n                this.setState({ data: data, startDate: date });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n    onViewChange = (e) => {\r\n        return rsapi.post(\"joballocation/getAnalystCalendarBasedOnUserWithDate\", {\r\n            \"nusercode\": this.props.selectedRecord[\"nusercode\"] ? this.props.selectedRecord[\"nusercode\"].value : -1, view: e.value, startDate: convertDateTimetoStringDBFormat(this.state.startDate, this.props.userInfo),\r\n            \"userinfo\": this.props.userInfo\r\n        })\r\n            .then(response => {\r\n                let data = [];\r\n                for (let i = 0; i < response.data.UserData.length; i++) {\r\n                    data.push({ ...response.data.UserData[i].jsondata, ...response.data.UserData[i] });\r\n                }\r\n                data = data.map((dataItem, i) => ({\r\n                    start: new Date(dataItem.UserStartDate),\r\n                    end: new Date(dataItem.UserEndDate),\r\n                    title: `${dataItem.sarno && dataItem.sarno}/${dataItem.stestsynonym && dataItem.stestsynonym}`,\r\n                    id: dataItem.id ? dataItem.id : i,\r\n                    startTimezone: dataItem.startTimezone,\r\n                    endTimezone: dataItem.endTimezone,\r\n                    description: dataItem.Comments ? dataItem.Comments : \"\",\r\n                    Instrument: dataItem.Instrument.value,\r\n                    InstrumentCategory: dataItem.InstrumentCategory.value,\r\n                    sarno: dataItem.sarno,\r\n                    ssamplearno: dataItem.ssamplearno,\r\n                    stestsynonym: dataItem.stestsynonym,\r\n                    ntransactionstatus: dataItem.ntransactionstatus,\r\n                    stransdisplaystatus: dataItem.stransdisplaystatus,\r\n                    ntransactiontestcode: dataItem.ntransactiontestcode,\r\n                    npreregno: dataItem.npreregno,\r\n                }));\r\n                this.setState({ data: data, view: e.value });\r\n            }).catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n    handleDataChange = ({\r\n        created,\r\n        updated,\r\n        deleted\r\n    }) => {\r\n        let data = this.state.data;\r\n        const aa = created.concat(created.map(item => Object.assign({}, item, {\r\n            id: guid()\r\n        })));\r\n        if (aa.length > 1) {\r\n            const dataTest = data.filter(x => x.insertRecord);\r\n            if (dataTest.length !== this.props.selectedTest.length) {\r\n                data = data.filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                    .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                    .concat(this.props.selectedTest.map((y) => {\r\n                        if (dataTest.filter(x => x.ntransactiontestcode === y.ntransactiontestcode).length === 0) {\r\n                            return Object.assign({}, y, {\r\n                                ...created.map(item => Object.assign({}, item, {\r\n                                    id: guid(), insertRecord: true, title: `${y.sarno && y.sarno}/${y.stestsynonym && y.stestsynonym}`\r\n                                }))[0]\r\n                            })\r\n                        }\r\n                    }\r\n                    ))\r\n                const newArray = data.filter((a) => a)\r\n                this.setState({ data: newArray });\r\n                this.props.parentScheduleState(newArray);\r\n            } else {\r\n                toast.info(this.props.intl.formatMessage({id:\"IDS_TESTALREADYASSIGNEDEDITASSIGNED\"}))\r\n            }\r\n        }\r\n        if (updated.length > 0) {\r\n            data = data     // Filter the deleted items\r\n                .filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                .concat(created.map(item => Object.assign({}, item, {\r\n                    id: guid()\r\n                })))\r\n            this.setState({data});\r\n            this.props.parentScheduleState(data);\r\n        }\r\n\r\n        if (deleted.length > 0) {\r\n            if (deleted[0].ntransactionstatus !== 20) {\r\n                this.setState(old => ({\r\n                    data: old.data     // Filter the deleted items\r\n                        .filter(item => deleted.find(current => current.id === item.id) === undefined) // Find and replace the updated items\r\n                        .map(item => updated.find(current => current.id === item.id) || item) // Add the newly created items and assign an `id`.\r\n                        .concat(created.map(item => Object.assign({}, item, {\r\n                        })))\r\n                }));\r\n                this.props.parentScheduleState(data);\r\n            } else {\r\n                toast.info(this.props.intl.formatMessage({id:\"IDS_ALLOTEDCANNOTBEDELETED\"}))\r\n            }\r\n        }\r\n    };\r\n\r\n    componentDidUpdate(previousProps) {\r\n        let data = [];\r\n        if (this.props.userData !== undefined) {\r\n            if (!(this.props.userData.length <= this.state.data.length)) {\r\n                for (let i = 0; i < this.props.userData.length; i++) {\r\n                    data.push({ ...this.props.userData[i].jsondata, ...this.props.userData[i] });\r\n                }\r\n                data = data.map((dataItem, i) => ({\r\n                    start: new  Date(dataItem.UserStartDate),\r\n                    end: new Date(dataItem.UserEndDate),\r\n                    title: `${dataItem.sarno && dataItem.sarno}/${dataItem.stestsynonym && dataItem.stestsynonym}`,\r\n                    // title: `ArNo:${dataItem.sarno && dataItem.sarno} - Test Name:${dataItem.stestsynonym && dataItem.stestsynonym} - Status:${dataItem.stransdisplaystatus && dataItem.stransdisplaystatus}`,\r\n                    id: dataItem.id ? dataItem.id : i,\r\n                    startTimezone: dataItem.startTimezone,\r\n                    endTimezone: dataItem.endTimezone,\r\n                    description: dataItem.Comments ? dataItem.Comments : \"\",\r\n                    Instrument: dataItem.Instrument.value,\r\n                    InstrumentCategory: dataItem.InstrumentCategory.value,\r\n                    sarno: dataItem.sarno,\r\n                    ssamplearno: dataItem.ssamplearno,\r\n                    stestsynonym: dataItem.stestsynonym,\r\n                    ntransactionstatus: dataItem.ntransactionstatus,\r\n                    stransdisplaystatus: dataItem.stransdisplaystatus,\r\n                    ntransactiontestcode: dataItem.ntransactiontestcode,\r\n                    npreregno: dataItem.npreregno,\r\n                }))\r\n                this.setState({ data: data });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default injectIntl(NewJobAlloct);\r\nexport const currentYear = new Date().getFullYear();\r\nexport const parseAdjust = eventDate => {\r\n    const date = new Date(eventDate);\r\n    date.setFullYear(currentYear);\r\n    return date;\r\n};\r\n\r\nexport const parseAdjustDate = eventDate => {\r\n\r\n    return [\r\n        padTo2Digits(eventDate.getMonth() + 1),\r\n        eventDate.getFullYear(),\r\n        padTo2Digits(eventDate.getDate()),\r\n    ].join('/');\r\n};\r\n\r\nexport const padTo2Digits = (num) => {\r\n    return num.toString().padStart(2, '0');\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}