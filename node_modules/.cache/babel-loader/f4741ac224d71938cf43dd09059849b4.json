{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport rsapi from \"../rsapi\";\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\nimport { attachmentType, parameterType, transactionStatus } from \"../components/Enumeration\";\nimport { constructOptionList, rearrangeDateFormat, //formatInputDate,\nsortData } from \"../components/CommonScript\";\nimport Axios from \"axios\";\nimport { intl } from \"../components/App\";\nimport { initRequest } from \"./LoginAction\";\nexport const sampleTypeOnChange = (inputParam, masterData) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup\" + inputParam.methodUrl, inputParam.inputData).then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          tempFilterData: inputParam.inputData.tempFilterData,\n          masterData: { ...masterData,\n            ...response.data\n          },\n          loading: false\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        masterData[\"ExistingLinkTable\"] = [];\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData,\n            loading: false\n          }\n        });\n        toast.warn(error.response.data);\n      } else {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const filterTestGroup = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"/testgroup/filterTestGroup\", inputParam.inputData).then(response => {\n      sortData(response.data);\n      searchRef.current.value = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          filterData: inputParam.inputData.filterData,\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          loading: false,\n          historyDataState: { ...inputParam.historyDataState,\n            sort: undefined,\n            filter: undefined\n          }\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const createTree = (selectedRecord, userInfo, selectedNode, ncontrolCode) => {\n  return dispatch => {\n    if (selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES || selectedRecord.nproductcode) {\n      const inputParam = {\n        sampletype: selectedRecord.nsampletypecode.item,\n        ncategorycode: selectedRecord.nproductcatcode.value,\n        ntreeversiontempcode: selectedRecord.ntreeversiontempcode.value,\n        userinfo: userInfo,\n        treetemplatemanipulation: selectedNode\n      };\n      dispatch(initRequest(true));\n      rsapi.post(\"/testgroup/getTemplateMasterDetails\", { ...inputParam\n      }).then(response => {\n        const treetempTranstestGroup = response.data[\"TreetempTranstestGroup\"] || []; // const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\n        //         return {\n        //             \"idsName\": item.slabelname,\n        //             \"dataField\": \"sleveldescription_\" + index,\n        //             \"mandatory\": true\n        //         }\n        // });\n        //  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\n\n        const mandatoryFields = [];\n        treetempTranstestGroup.forEach((item, index) => {\n          if (item.sleveldescription === null) {\n            mandatoryFields.push({\n              \"idsName\": item.slabelname,\n              \"dataField\": \"sleveldescription_\" + index,\n              \"mandatory\": true\n            });\n          }\n        });\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: \"create\",\n            screenName: \"IDS_PROFILETREE\",\n            TreetempTranstestGroup: treetempTranstestGroup,\n            treeMandatoryFields: mandatoryFields,\n            //selectedRecord,\n            ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_PRODUCTNOTAVAILABLE\"\n      }));\n    }\n  };\n};\nexport const editTree = (operation, selectedNode, userinfo, ncontrolCode, filterData) => {\n  return dispatch => {\n    if (selectedNode) {\n      dispatch(initRequest(true));\n      rsapi.post(\"/testgroup/getTreeById\", {\n        userinfo,\n        treetemplatemanipulation: selectedNode,\n        ntreeversiontempcode: filterData.ntreeversiontempcode.value\n      }).then(response => {\n        const treetempTranstestGroup = response.data;\n        const treeMandatoryFields = treetempTranstestGroup && [{\n          \"idsName\": treetempTranstestGroup.slabelname,\n          \"dataField\": \"sleveldescription\",\n          \"mandatory\": true\n        }];\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: operation,\n            screenName: \"IDS_EDITTREE\",\n            selectedRecord: { ...treetempTranstestGroup\n            },\n            treeMandatoryFields,\n            ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTPROFILENODETOEDIT\"\n      }));\n    }\n  };\n};\nexport const addSpecification = (operation, inputParam, ncontrolCode) => {\n  return dispatch => {\n    //if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\n    if (inputParam.selectedNode != null && inputParam.selectedNode.nnextchildcode === -1) {\n      let urlArray = [];\n\n      if (operation === \"update\") {\n        const testgroupspecification = inputParam.testgroupspecification[0];\n\n        if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION || testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\n          urlArray = [rsapi.post(\"timezone/getTimeZone\")];\n          urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\", {\n            testgroupspecification,\n            userinfo: inputParam.userinfo,\n            ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value\n          }));\n        } else {\n          toast.warn(intl.formatMessage({\n            id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n          }));\n          return;\n        }\n      } else {\n        urlArray = [rsapi.post(\"timezone/getTimeZone\")];\n        urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\", {\n          userinfo: inputParam.userInfo,\n          ntreeversiontempcode: inputParam.selectedRecord.ntreeversiontempcode.value //currentdate: formatInputDate(new Date(), true)\n\n        }));\n      }\n\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = {};\n\n        if (operation === \"update\") {\n          selectedRecord = {\n            sproductname: inputParam.selectedRecord.nproductcode.label,\n            ...response[1].data,\n            //dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\n            dexpirydate: rearrangeDateFormat(inputParam.userinfo, response[1].data[\"sexpirydate\"]),\n            ntzexpirydate: {\n              \"label\": response[1].data.stimezoneid,\n              \"value\": response[1].data.ntzexpirydate\n            }\n          };\n        } else {\n          selectedRecord = {\n            sproductname: inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow === transactionStatus.YES ? \"\" : inputParam.selectedRecord.nproductcode.label,\n            sspecname: inputParam.selectedNode.sleveldescription,\n            //dexpirydate: new Date(response[1].data.ExpiryDate),\n            dexpirydate: rearrangeDateFormat(inputParam.userInfo, response[1].data.ExpiryDate),\n            ncomponentrequired: transactionStatus.YES,\n            ntransactionstatus: transactionStatus.ACTIVE,\n            ntzexpirydate: {\n              \"label\": inputParam.userInfo.stimezoneid,\n              \"value\": inputParam.userInfo.ntimezonecode\n            }\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: operation,\n            screenName: \"IDS_SPECIFICATION\",\n            selectedRecord,\n            timeZoneList: constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", false, false, true).get(\"OptionList\"),\n            ncontrolCode\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      if (operation === \"copy\") {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTSPECIFICATION\"\n        }));\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SELECTLASTLEVELNODETOADDSPEC\"\n        }));\n      }\n    }\n  };\n};\nexport const addComponent = (SelectedSpecification, userInfo, ncontrolCode) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getAvailableComponent\", {\n      userinfo: userInfo,\n      testgroupspecification: SelectedSpecification\n    }).then(response => {\n      const testGroupSpecSampleType = response.data[\"TestGroupSpecSampleType\"] || [];\n\n      if (testGroupSpecSampleType.length > 0) {\n        const testCategory = constructOptionList(response.data[\"TestCategory\"] || [], \"ntestcategorycode\", \"stestcategoryname\", 'ntestcategorycode', 'ascending', false);\n        const sampleTypeMap = constructOptionList(testGroupSpecSampleType, \"ncomponentcode\", \"scomponentname\", false, false, true); // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: \"create\",\n            screenName: \"IDS_COMPONENT\",\n            testGroupInputData: {\n              TestCategory: testCategory.get(\"OptionList\"),\n              TestGroupSpecSampleType: sampleTypeMap.get(\"OptionList\"),\n              TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\n\n            },\n            selectedRecord: {\n              ncomponentcode: sampleTypeMap.get(\"DefaultValue\"),\n              ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\n            },\n            ncontrolCode\n          }\n        });\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_COMPONENTNOTAVAILABLE\"\n        }));\n      }\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const addTestGroupTest = (selectedComponent, userInfo, ncontrolCode, selectedSpecification, filterData) => {\n  return dispatch => {\n    if (selectedSpecification) {\n      if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n        if (selectedComponent) {\n          rsapi.post(\"/testgroup/getAvailableTest\", {\n            userinfo: userInfo,\n            testgroupspecsampletype: selectedComponent,\n            ntreeversiontempcode: filterData.ntreeversiontempcode.value\n          }).then(response => {\n            const testCategory = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false); // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\n\n            dispatch({\n              type: DEFAULT_RETURN,\n              payload: {\n                openModal: true,\n                operation: \"create\",\n                screenName: \"IDS_TEST\",\n                testGroupInputData: {\n                  TestCategory: testCategory.get(\"OptionList\"),\n                  TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\n\n                },\n                selectedRecord: {\n                  ntestcategorycode: {\n                    label: response.data[\"SelectedTestCategory\"].stestcategoryname,\n                    value: response.data[\"SelectedTestCategory\"].stestcategorycode,\n                    item: response.data[\"SelectedTestCategory\"]\n                  } //ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\n\n                },\n                ncontrolCode\n              }\n            });\n          }).catch(error => {\n            if (error.response.status === 409 || error.response.status === 417) {\n              toast.warn(error.response.data);\n            } else {\n              toast.error(error.message);\n            }\n          });\n        } else {\n          toast.warn(intl.formatMessage({\n            id: \"IDS_NEEDCOMPONENTTOADDTEST\"\n          }));\n        }\n      } else {\n        toast.warn(intl.formatMessage({\n          id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n        }));\n      }\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SELECTSPECIFICATION\"\n      }));\n    }\n  };\n};\nexport const editTestGroupTest = (operation, selectedTest, userInfo, ncontrolCode, selectedSpecification, filterData) => {\n  return dispatch => {\n    if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n      const ntestcode = selectedTest.ntestcode;\n      const urlArray = [rsapi.post(\"/testgroup/getActiveTestById\", {\n        userinfo: userInfo,\n        testgrouptest: selectedTest,\n        ntreeversiontempcode: filterData.ntreeversiontempcode.value\n      }), rsapi.post(\"/source/getSource\", {\n        userinfo: userInfo\n      }), rsapi.post(\"/testmaster/getSection\", {\n        ntestcode,\n        userinfo: userInfo\n      }), rsapi.post(\"/testmaster/getMethod\", {\n        ntestcode,\n        userinfo: userInfo\n      }), rsapi.post(\"/testmaster/getInstrumentCategory\", {\n        ntestcode,\n        userinfo: userInfo\n      }), rsapi.post(\"/testmaster/getTestAttachment\", {\n        ntestcode,\n        userinfo: userInfo\n      })];\n      Axios.all(urlArray).then(response => {\n        const editObject = response[0].data.TestGroupTest;\n        const testFileItem = response[0].data.TestGroupTestFile;\n        const selectedRecord = { ...editObject,\n          nsourcecode: {\n            \"label\": editObject.ssourcename,\n            \"value\": editObject.nsourcecode\n          },\n          nsectioncode: {\n            \"label\": editObject.ssectionname,\n            \"value\": editObject.nsectioncode\n          } // nmethodcode: {\n          //     \"label\": editObject.smethodname,\n          //     \"value\": editObject.nmethodcode\n          // },\n          // ninstrumentcatcode: {\n          //     \"label\": editObject.sinstrumentcatname,\n          //     \"value\": editObject.ninstrumentcatcode\n          // }\n\n        };\n\n        if (testFileItem) {\n          selectedRecord[\"ntestfilecode\"] = {\n            \"label\": testFileItem.sfilename,\n            \"value\": testFileItem.ntestgroupfilecode,\n            item: testFileItem\n          };\n          selectedRecord[\"ntestgroupfilecode\"] = testFileItem.ntestgroupfilecode;\n        }\n\n        if (editObject.nmethodcode !== -1) {\n          selectedRecord[\"nmethodcode\"] = {\n            \"label\": editObject.smethodname,\n            \"value\": editObject.nmethodcode\n          };\n        } else {\n          selectedRecord[\"nmethodcode\"] = undefined;\n        }\n\n        if (editObject.ninstrumentcatcode !== -1) {\n          selectedRecord[\"ninstrumentcatcode\"] = {\n            \"label\": editObject.sinstrumentcatname,\n            \"value\": editObject.ninstrumentcatcode\n          };\n        } else {\n          selectedRecord[\"ninstrumentcatcode\"] = undefined;\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: operation,\n            screenName: \"IDS_EDITTESTGROUPTEST\",\n            testGroupInputData: {\n              source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\n              section: constructOptionList(response[2].data || [], \"nsectioncode\", \"ssectionname\", false, false, true).get(\"OptionList\"),\n              method: constructOptionList(response[3].data || [], \"nmethodcode\", \"smethodname\", false, false, true).get(\"OptionList\"),\n              instrumentCategory: constructOptionList(response[4].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true).get(\"OptionList\"),\n              testFile: constructOptionList(response[5].data || [], \"ntestfilecode\", \"sfilename\", false, false, true).get(\"OptionList\")\n            },\n            selectedRecord,\n            ncontrolCode\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n      }));\n    }\n  };\n};\nexport const editTestGroupParameter = (operation, selectedParameter, userInfo, ncontrolCode, selectedSpecification, filterData) => {\n  return dispatch => {\n    if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT || selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\n      dispatch(initRequest(true));\n      const urlArray = [rsapi.post(\"/testgroup/getActiveParameterById\", {\n        userinfo: userInfo,\n        testgrouptestparameter: selectedParameter,\n        ntreeversiontempcode: filterData.ntreeversiontempcode.value\n      }), rsapi.post(\"/parametertype/getParameterType\", {\n        userinfo: userInfo\n      }), rsapi.post(\"unit/getUnit\", {\n        userinfo: userInfo\n      }), rsapi.post(\"grade/getGrade\", {\n        userinfo: userInfo\n      }), rsapi.post(\"checklist/getApprovedChecklist\", {\n        \"userinfo\": userInfo\n      })];\n      Axios.all(urlArray).then(response => {\n        const parameterObject = response[0].data.TestGroupTestParameter[0];\n        const predefinedObject = response[0].data.TestGroupTestPredefinedParameter;\n        const characterObject = response[0].data.TestGroupTestCharParameter;\n        const numericObject = response[0].data.TestGroupTestNumericParameter && response[0].data.TestGroupTestNumericParameter.length > 0 ? response[0].data.TestGroupTestNumericParameter[0] : {};\n        const selectedRecord = { ...parameterObject,\n          nunitcode: {\n            \"label\": parameterObject.sunitname,\n            \"value\": parameterObject.nunitcode\n          },\n          nparametertypecode: {\n            \"label\": parameterObject.sdisplaystatus,\n            \"value\": parameterObject.nparametertypecode\n          },\n          parameterTypeCode: parameterObject.nparametertypecode,\n          nchecklistversioncode: {\n            \"label\": parameterObject.schecklistname,\n            \"value\": parameterObject.nchecklistversioncode\n          },\n          schecklistversionname: parameterObject.schecklistversionname,\n          ntestformulacode: parameterObject.ntestformulacode > 0 ? {\n            \"label\": parameterObject.sformulacalculationdetail,\n            \"value\": parameterObject.ntestformulacode,\n            item: {\n              sformulacalculationdetail: parameterObject.sformulacalculationdetail,\n              ntestformulacode: parameterObject.ntestformulacode,\n              sformulacalculationcode: parameterObject.sformulacalculationcode\n            }\n          } : \"\"\n        };\n\n        if (characterObject) {\n          selectedRecord[\"scharname\"] = characterObject.scharname;\n          selectedRecord[\"ntestgrouptestcharcode\"] = characterObject.ntestgrouptestcharcode;\n        }\n\n        if (predefinedObject) {\n          selectedRecord[\"ntestgrouptestpredefcode\"] = predefinedObject.ntestgrouptestpredefcode;\n          selectedRecord[\"spredefinedname\"] = predefinedObject.spredefinedname;\n          selectedRecord[\"ndefaultstatus\"] = predefinedObject.ndefaultstatus;\n          selectedRecord[\"ngradecode\"] = {\n            \"label\": predefinedObject.sdisplaystatus,\n            \"value\": predefinedObject.ngradecode\n          };\n        }\n\n        if (numericObject) {\n          selectedRecord[\"ntestgrouptestnumericcode\"] = numericObject.ntestgrouptestnumericcode;\n          selectedRecord[\"sminlod\"] = numericObject.sminlod;\n          selectedRecord[\"smaxlod\"] = numericObject.smaxlod;\n          selectedRecord[\"sminb\"] = numericObject.sminb;\n          selectedRecord[\"smina\"] = numericObject.smina;\n          selectedRecord[\"smaxa\"] = numericObject.smaxa;\n          selectedRecord[\"smaxb\"] = numericObject.smaxb;\n          selectedRecord[\"sminloq\"] = numericObject.sminloq;\n          selectedRecord[\"smaxloq\"] = numericObject.smaxloq;\n          selectedRecord[\"sdisregard\"] = numericObject.sdisregard;\n          selectedRecord[\"sresultvalue\"] = numericObject.sresultvalue;\n        }\n\n        const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n        const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\n        const grade = gradeMap.get(\"OptionList\");\n        const unit = unitMap.get(\"OptionList\");\n        const disabled = parameterObject.nparametertypecode === parameterType.NUMERIC ? false : true;\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openChildModal: true,\n            operation: operation,\n            screenName: \"IDS_PARAMETER\",\n            testGroupInputData: {\n              unit,\n              grade,\n              testFormula: constructOptionList(response[0].data.TestFormula || [], \"ntestformulacode\", \"sformulacalculationdetail\", false, false, true).get(\"OptionList\"),\n              parameterType: constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true).get(\"OptionList\"),\n              checkListVersion: constructOptionList(response[4].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true).get(\"OptionList\"),\n              needRoundingDigit: disabled,\n              needUnit: disabled\n            },\n            parameterData: {\n              grade\n            },\n            selectedRecord,\n            ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n      }));\n    }\n  };\n}; // export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\n//     return dispatch => {\n//         const testgroupspecification = optionalData.testgroupspecification;\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n//             dispatch(initRequest(true));\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\n//             .then(response=>{\n//                 dispatch({\n//                     type: DEFAULT_RETURN, \n//                     payload:{\n//                         openChildModal: true,\n//                         operation: \"create\",\n//                         screenName: \"IDS_FORMULA\",\n//                         testGroupInputData: {testFormula: response.data},\n//                         selectedRecord: {},\n//                         ncontrolCode\n//                 }});\n//             })\n//             .catch(error=>{\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\n//                 if(error.response.status === 409 || error.response.status === 417) {\n//                     toast.warn(error.response.data);\n//                 } else {\n//                     toast.error(error.message)\n//                 }\n//             });\n//         } else {\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\n//         }\n//     }\n// }\n\nexport const getTestGroupParameter = inputParam => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getTestGroupTestParameter\", { ...inputParam\n    }).then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const getComponentBySpecId = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\n      [inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0],\n      userinfo: inputParam.userInfo\n    }).then(response => {\n      sortData(response.data);\n      searchRef.current.value = \"\";\n      const historyDataState = { ...inputParam.historyDataState,\n        sort: undefined,\n        filter: undefined\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          historyDataState\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getTestGroupDetails = inputParam => {\n  return dispatch => {\n    //...inputParam, \n    rsapi.post(\"/testgroup/getTestGroupTest\", {\n      ntestgrouptestcode: parseInt(inputParam['ntestgrouptestcode']),\n      userinfo: inputParam.userInfo\n    }) // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n    //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n    .then(response => {\n      sortData(response.data);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getTestGroupComponentDetails = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    //...inputParam, \n    rsapi.post(\"/testgroup/getTestByComponentId\", {\n      testgroupspecsampletype: inputParam['testgroupspecsampletype'],\n      userinfo: inputParam.userInfo\n    }) // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \n    //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\n    .then(response => {\n      sortData(response.data);\n      searchRef.current.value = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getSpecification = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    if (inputParam.selectedRecord !== null) {\n      rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, { ...inputParam,\n        [inputParam.keyName]: inputParam.selectedRecord\n      }).then(response => {\n        sortData(response.data);\n        searchRef.current.value = \"\";\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData: { ...masterData,\n              ActiveKey: inputParam.activeKey,\n              FocusKey: inputParam.focusKey,\n              primaryKey: inputParam.primaryKey,\n              ...response.data,\n              selectedNode: inputParam.selectedRecord,\n              searchedData: undefined\n            },\n            historyDataState: { ...inputParam.historyDataState,\n              sort: undefined,\n              filter: undefined\n            }\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            selectedNode: inputParam.selectedRecord,\n            TestGroupSpecification: [],\n            SelectedSpecification: {},\n            TestGroupTest: [],\n            TestGroupTestParameter: [],\n            TestGroupTestNumericParameter: [],\n            TestGroupTestFormula: [],\n            TestGroupTestPredefinedParameter: [],\n            TestGroupTestCharParameter: [],\n            ActiveKey: inputParam.activeKey,\n            FocusKey: inputParam.focusKey,\n            SelectedTest: {},\n            selectedParameter: {},\n            TestGroupSpecFile: [],\n            TestGroupSpecificationHistory: [],\n            SelectedComponent: undefined\n          }\n        }\n      });\n    }\n  };\n};\nexport const changeTestCategory = (inputParam, testGroupInputData) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/getTestMasterByCategory\", { ...inputParam\n    }).then(response => {\n      sortData(response.data);\n      inputParam.selectedRecord.ntestcode = [];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          selectedRecord: inputParam.selectedRecord,\n          testGroupInputData: { ...testGroupInputData,\n            ...response.data\n          }\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const getSpecificationDetails = (inputParam, masterData, searchRef) => {\n  return dispatch => {\n    rsapi.post(\"/testgroup/get\" + inputParam.methodUrl, { ...inputParam.inputData\n    }).then(response => {\n      searchRef.current.value = \"\";\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...masterData,\n            ...response.data,\n            searchedData: undefined\n          },\n          screenName: inputParam.screenName\n        }\n      });\n    }).catch(error => {\n      if (error.response.status === 409 || error.response.status === 417) {\n        toast.warn(error.response.data);\n      } else {\n        toast.error(error.message);\n      }\n    });\n  };\n};\nexport const editSpecFile = inputParam => {\n  return dispatch => {\n    if (inputParam.testgroupspecification.napprovalstatus === transactionStatus.DRAFT || inputParam.testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n      let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\n        userinfo: inputParam.userInfo\n      }), rsapi.post(\"/testgroup/getActiveSpecFileById\", {\n        userinfo: inputParam.userInfo,\n        testgroupspecfile: inputParam.selectedRecord,\n        ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\n      })];\n      Axios.all(urlArray).then(response => {\n        const linkmaster = response[0].data.LinkMaster;\n        const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\n        const editObject = response[1].data;\n        let nlinkcode = {};\n        let link = {};\n\n        if (editObject.nattachmenttypecode === attachmentType.LINK) {\n          nlinkcode = {\n            \"label\": editObject.slinkname,\n            \"value\": editObject.nlinkcode\n          };\n          link = {\n            slinkfilename: editObject.sfilename,\n            slinkdescription: editObject.sdescription,\n            nlinkdefaultstatus: editObject.ndefaultstatus,\n            sfilesize: '',\n            nfilesize: 0,\n            ndefaultstatus: 4,\n            sfilename: ''\n          };\n        } else {\n          nlinkcode = defaultLink.length > 0 ? {\n            \"label\": defaultLink[0].slinkname,\n            \"value\": defaultLink[0].nlinkcode\n          } : \"\";\n          link = {\n            slinkfilename: '',\n            slinkdescription: '',\n            sdescription: editObject.sdescription,\n            nlinkdefaultstatus: 4,\n            sfilesize: editObject.sfilesize,\n            nfilesize: editObject.nfilesize,\n            ndefaultstatus: editObject.ndefaultstatus,\n            sfilename: editObject.sfilename\n          };\n        }\n\n        const selectedRecord = { // ...editObject,\n          ...link,\n          nallotedspeccode: editObject.nallotedspeccode,\n          nspecfilecode: editObject.nspecfilecode,\n          stypename: editObject.stypename,\n          nattachmenttypecode: editObject.nattachmenttypecode,\n          nlinkcode // disabled: true\n\n        };\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openModal: true,\n            operation: \"update\",\n            screenName: \"IDS_SPECFILE\",\n            editFiles: Object.values(editObject).length > 0 && editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {},\n            selectedRecord,\n            ncontrolCode: inputParam.ncontrolCode\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 409 || error.response.status === 417) {\n          toast.warn(error.response.data);\n        } else {\n          toast.error(error.message);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n      }));\n    }\n  };\n};\nexport const addTestGroupCodedResult = (operation, paramdata, userInfo, ncontrolCode, optionalData) => {\n  return dispatch => {\n    const testgroupspecification = optionalData.testgroupspecification;\n\n    if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT || testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\n      dispatch(initRequest(true));\n      const urlArray = [rsapi.post(\"grade/getGrade\", {\n        \"userinfo\": userInfo\n      })];\n\n      if (operation === \"update\") {\n        urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\", {\n          testgrouptestpredefinedparameter: paramdata,\n          \"userinfo\": userInfo,\n          testgroupspecification\n        }));\n      }\n\n      Axios.all(urlArray).then(response => {\n        let selectedRecord = {};\n        const gradeMap = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\n        const grade = gradeMap.get(\"OptionList\");\n\n        if (operation === \"update\") {\n          const editCodedResult = response[1].data;\n          selectedRecord = {\n            ntestgrouptestpredefcode: paramdata[\"ntestgrouptestpredefcode\"],\n            ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\n            ngradecode: {\n              \"label\": editCodedResult[\"sdisplaystatus\"],\n              \"value\": editCodedResult[\"ngradecode\"]\n            },\n            spredefinedname: editCodedResult[\"spredefinedname\"]\n          };\n        } else {\n          selectedRecord = {\n            ngradecode: gradeMap.get(\"DefaultValue\") // {\n            //     \"value\": grade[0].ngradecode,\n            //     \"label\": grade[0][\"sdisplaystatus\"]\n            // }\n\n          };\n        }\n\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            openChildModal: true,\n            showSaveContinue: false,\n            operation: operation,\n            screenName: \"IDS_CODEDRESULT\",\n            parameterData: {\n              grade,\n              needCodedResult: false\n            },\n            selectedRecord,\n            ncontrolCode,\n            loading: false\n          }\n        });\n      }).catch(error => {\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            loading: false\n          }\n        });\n\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      toast.warn(intl.formatMessage({\n        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\n      }));\n    }\n  };\n};\nexport const viewTestGroupCheckList = (inputParam, userInfo) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"checklist/viewTemplate\", { ...inputParam\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          openTemplateModal: true,\n          testGroupCheckList: {\n            templateData: response.data\n          },\n          loading: false,\n          selectedRecord: {}\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const reportSpecification = inputParam => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testgroup/specReportGenerate\", { ...inputParam,\n      ntreeversiontempcode: inputParam.filterData.ntreeversiontempcode.value\n    }).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false,\n          loadEsign: false,\n          openModal: false,\n          showConfirmAlert: false\n        }\n      });\n      document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\n      document.getElementById(\"download_data\").click();\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};\nexport const retireSpecification = (inputParam, masterData) => {\n  return dispatch => {\n    dispatch(initRequest(true));\n    rsapi.post(\"testgroup/retireSpec\", { ...inputParam\n    }).then(response => {\n      // const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\n      sortData(response.data);\n      masterData = { ...masterData,\n        ...response.data\n      };\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData,\n          loading: false\n        }\n      });\n    }).catch(error => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          loading: false\n        }\n      });\n\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/Postgres_workingFolder/QuaLISWeb/src/actions/TestGroupAction.js"],"names":["toast","rsapi","DEFAULT_RETURN","attachmentType","parameterType","transactionStatus","constructOptionList","rearrangeDateFormat","sortData","Axios","intl","initRequest","sampleTypeOnChange","inputParam","masterData","dispatch","post","methodUrl","inputData","then","response","data","type","payload","tempFilterData","loading","catch","error","status","warn","message","filterTestGroup","searchRef","current","value","filterData","searchedData","undefined","historyDataState","sort","filter","createTree","selectedRecord","userInfo","selectedNode","ncontrolCode","nproductcatcode","item","ncategorybasedflow","YES","nproductcode","sampletype","nsampletypecode","ncategorycode","ntreeversiontempcode","userinfo","treetemplatemanipulation","treetempTranstestGroup","mandatoryFields","forEach","index","sleveldescription","push","slabelname","openModal","operation","screenName","TreetempTranstestGroup","treeMandatoryFields","formatMessage","id","editTree","addSpecification","nnextchildcode","urlArray","testgroupspecification","napprovalstatus","CORRECTION","DRAFT","all","sproductname","label","dexpirydate","ntzexpirydate","stimezoneid","sspecname","ExpiryDate","ncomponentrequired","ntransactionstatus","ACTIVE","ntimezonecode","timeZoneList","get","addComponent","SelectedSpecification","testGroupSpecSampleType","length","testCategory","sampleTypeMap","testGroupInputData","TestCategory","TestGroupSpecSampleType","TestGroupTest","ncomponentcode","ntestcategorycode","addTestGroupTest","selectedComponent","selectedSpecification","testgroupspecsampletype","stestcategoryname","stestcategorycode","editTestGroupTest","selectedTest","ntestcode","testgrouptest","editObject","testFileItem","TestGroupTestFile","nsourcecode","ssourcename","nsectioncode","ssectionname","sfilename","ntestgroupfilecode","nmethodcode","smethodname","ninstrumentcatcode","sinstrumentcatname","source","section","method","instrumentCategory","testFile","editTestGroupParameter","selectedParameter","testgrouptestparameter","parameterObject","TestGroupTestParameter","predefinedObject","TestGroupTestPredefinedParameter","characterObject","TestGroupTestCharParameter","numericObject","TestGroupTestNumericParameter","nunitcode","sunitname","nparametertypecode","sdisplaystatus","parameterTypeCode","nchecklistversioncode","schecklistname","schecklistversionname","ntestformulacode","sformulacalculationdetail","sformulacalculationcode","scharname","ntestgrouptestcharcode","ntestgrouptestpredefcode","spredefinedname","ndefaultstatus","ngradecode","ntestgrouptestnumericcode","sminlod","smaxlod","sminb","smina","smaxa","smaxb","sminloq","smaxloq","sdisregard","sresultvalue","gradeMap","unitMap","grade","unit","disabled","NUMERIC","openChildModal","testFormula","TestFormula","checkListVersion","needRoundingDigit","needUnit","parameterData","getTestGroupParameter","getComponentBySpecId","keyName","getTestGroupDetails","ntestgrouptestcode","parseInt","getTestGroupComponentDetails","getSpecification","ActiveKey","activeKey","FocusKey","focusKey","primaryKey","TestGroupSpecification","TestGroupTestFormula","SelectedTest","TestGroupSpecFile","TestGroupSpecificationHistory","SelectedComponent","changeTestCategory","getSpecificationDetails","editSpecFile","testgroupspecfile","linkmaster","LinkMaster","defaultLink","ndefaultlink","nlinkcode","link","nattachmenttypecode","LINK","slinkname","slinkfilename","slinkdescription","sdescription","nlinkdefaultstatus","sfilesize","nfilesize","nallotedspeccode","nspecfilecode","stypename","editFiles","Object","values","FTP","addTestGroupCodedResult","paramdata","optionalData","testgrouptestpredefinedparameter","editCodedResult","ntestgrouptestparametercode","showSaveContinue","needCodedResult","viewTestGroupCheckList","openTemplateModal","testGroupCheckList","templateData","reportSpecification","loadEsign","showConfirmAlert","document","getElementById","setAttribute","filepath","click","retireSpecification"],"mappings":"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","sourcesContent":["import {\r\n    toast\r\n} from \"react-toastify\";\r\nimport rsapi from \"../rsapi\";\r\nimport {\r\n    DEFAULT_RETURN\r\n} from \"./LoginTypes\";\r\nimport {\r\n    attachmentType,\r\n    parameterType,\r\n    transactionStatus\r\n} from \"../components/Enumeration\";\r\nimport {\r\n    constructOptionList,\r\n    rearrangeDateFormat,\r\n    //formatInputDate,\r\n    sortData\r\n} from \"../components/CommonScript\";\r\nimport Axios from \"axios\";\r\nimport {\r\n    intl\r\n} from \"../components/App\";\r\nimport {\r\n    initRequest\r\n} from \"./LoginAction\";\r\n\r\n\r\nexport const sampleTypeOnChange = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup\" + inputParam.methodUrl, inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        tempFilterData: inputParam.inputData.tempFilterData,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data\r\n                        },\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    masterData[\"ExistingLinkTable\"] = [];\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const filterTestGroup = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"/testgroup/filterTestGroup\", inputParam.inputData)\r\n            .then(response => {\r\n                sortData(response.data);\r\n                searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        filterData: inputParam.inputData.filterData,\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        loading: false,\r\n                        historyDataState: {\r\n                            ...inputParam.historyDataState,\r\n                            sort: undefined,\r\n                            filter: undefined\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                });\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const createTree = (selectedRecord, userInfo, selectedNode, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        if (selectedRecord.nproductcatcode.item.ncategorybasedflow===transactionStatus.YES||selectedRecord.nproductcode) {\r\n            const inputParam = {\r\n                sampletype: selectedRecord.nsampletypecode.item,\r\n                ncategorycode: selectedRecord.nproductcatcode.value,\r\n                ntreeversiontempcode: selectedRecord.ntreeversiontempcode.value,\r\n                userinfo: userInfo,\r\n                treetemplatemanipulation: selectedNode\r\n            }\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/testgroup/getTemplateMasterDetails\", {\r\n                    ...inputParam\r\n                })\r\n                .then(response => {\r\n                    const treetempTranstestGroup = response.data[\"TreetempTranstestGroup\"] || [];\r\n\r\n                    // const treeMandatoryFields = treetempTranstestGroup.map((item, index) => {\r\n                    //         return {\r\n                    //             \"idsName\": item.slabelname,\r\n                    //             \"dataField\": \"sleveldescription_\" + index,\r\n                    //             \"mandatory\": true\r\n                    //         }\r\n                    // });\r\n\r\n                    //  const selectedNodeLevel = selectedNode ? selectedNode.slevelcode.split(\"/1\").length-2 : -1;\r\n                    const mandatoryFields = [];\r\n                    treetempTranstestGroup.forEach((item, index) => {\r\n                        if (item.sleveldescription === null) {\r\n                            mandatoryFields.push({\r\n                                \"idsName\": item.slabelname,\r\n                                \"dataField\": \"sleveldescription_\" + index,\r\n                                \"mandatory\": true\r\n                            })\r\n                        }\r\n                    });\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: \"create\",\r\n                            screenName: \"IDS_PROFILETREE\",\r\n                            TreetempTranstestGroup: treetempTranstestGroup,\r\n                            treeMandatoryFields: mandatoryFields,\r\n                            //selectedRecord,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_PRODUCTNOTAVAILABLE\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTree = (operation, selectedNode, userinfo, ncontrolCode,filterData) => {\r\n    return (dispatch) => {\r\n        if (selectedNode) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"/testgroup/getTreeById\", {\r\n                    userinfo,\r\n                    treetemplatemanipulation: selectedNode,\r\n                    ntreeversiontempcode:filterData.ntreeversiontempcode.value\r\n                })\r\n                .then(response => {\r\n                    const treetempTranstestGroup = response.data;\r\n                    const treeMandatoryFields = treetempTranstestGroup && [{\r\n                        \"idsName\": treetempTranstestGroup.slabelname,\r\n                        \"dataField\": \"sleveldescription\",\r\n                        \"mandatory\": true\r\n                    }];\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: operation,\r\n                            screenName: \"IDS_EDITTREE\",\r\n                            selectedRecord: {\r\n                                ...treetempTranstestGroup\r\n                            },\r\n                            treeMandatoryFields,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTPROFILENODETOEDIT\"\r\n            }))\r\n        }\r\n    }\r\n}\r\n\r\nexport const addSpecification = (operation, inputParam, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        //if (inputParam.selectedNode != null && inputParam.selectedNode.schildnode === \"\") {\r\n        if (inputParam.selectedNode != null && inputParam.selectedNode.nnextchildcode === -1) {\r\n            let urlArray=[];\r\n            if (operation === \"update\") {\r\n                const testgroupspecification = inputParam.testgroupspecification[0];\r\n                if (testgroupspecification.napprovalstatus === transactionStatus.CORRECTION ||\r\n                    testgroupspecification.napprovalstatus === transactionStatus.DRAFT) {\r\n                         urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n                    urlArray.push(rsapi.post(\"/testgroup/getActiveSpecificationById\", {\r\n                        testgroupspecification,\r\n                        userinfo: inputParam.userinfo,\r\n                        ntreeversiontempcode:inputParam.selectedRecord.ntreeversiontempcode.value\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                    }));\r\n                    return;\r\n                }\r\n            \r\n            } else {\r\n             urlArray = [rsapi.post(\"timezone/getTimeZone\")];\r\n\r\n            urlArray.push(rsapi.post(\"/testgroup/getAddSpecification\", {\r\n                userinfo: inputParam.userInfo,\r\n                ntreeversiontempcode:inputParam.selectedRecord.ntreeversiontempcode.value\r\n                //currentdate: formatInputDate(new Date(), true)\r\n            }));\r\n       \r\n               \r\n            }\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = {};\r\n                    if (operation === \"update\") {\r\n                        selectedRecord = {\r\n                            sproductname: inputParam.selectedRecord.nproductcode.label,\r\n                            ...response[1].data,\r\n                            //dexpirydate: new Date(response[1].data[\"sexpirydate\"]),\r\n                            dexpirydate: rearrangeDateFormat(inputParam.userinfo, response[1].data[\"sexpirydate\"]),\r\n                            ntzexpirydate: {\r\n                                \"label\": response[1].data.stimezoneid,\r\n                                \"value\": response[1].data.ntzexpirydate\r\n                            }\r\n                        };\r\n                    } else {\r\n                        selectedRecord = {\r\n                            sproductname:inputParam.selectedRecord.nproductcatcode.item.ncategorybasedflow===transactionStatus.YES?\"\": inputParam.selectedRecord.nproductcode.label,\r\n                            sspecname: inputParam.selectedNode.sleveldescription,\r\n                            //dexpirydate: new Date(response[1].data.ExpiryDate),\r\n                            dexpirydate: rearrangeDateFormat(inputParam.userInfo, response[1].data.ExpiryDate),\r\n                            ncomponentrequired: transactionStatus.YES,\r\n                            ntransactionstatus: transactionStatus.ACTIVE,\r\n                            ntzexpirydate: {\r\n                                \"label\": inputParam.userInfo.stimezoneid,\r\n                                \"value\": inputParam.userInfo.ntimezonecode\r\n                            }\r\n                        };\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: operation,\r\n                            screenName: \"IDS_SPECIFICATION\",\r\n                            selectedRecord,\r\n                            timeZoneList: constructOptionList(response[0].data || [], \"ntimezonecode\", \"stimezoneid\", false, false, true).get(\"OptionList\"),\r\n                            ncontrolCode\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            if (operation === \"copy\") {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTSPECIFICATION\"\r\n                }));\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SELECTLASTLEVELNODETOADDSPEC\"\r\n                }));\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const addComponent = (SelectedSpecification, userInfo, ncontrolCode) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getAvailableComponent\", {\r\n                userinfo: userInfo,\r\n                testgroupspecification: SelectedSpecification\r\n            })\r\n            .then(response => {\r\n                const testGroupSpecSampleType = response.data[\"TestGroupSpecSampleType\"] || [];\r\n                if (testGroupSpecSampleType.length > 0) {\r\n                    const testCategory = constructOptionList(response.data[\"TestCategory\"] || [], \"ntestcategorycode\", \"stestcategoryname\", 'ntestcategorycode', 'ascending', false);\r\n                    const sampleTypeMap = constructOptionList(testGroupSpecSampleType, \"ncomponentcode\", \"scomponentname\", false, false, true);\r\n                    // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: \"create\",\r\n                            screenName: \"IDS_COMPONENT\",\r\n                            testGroupInputData: {\r\n                                TestCategory: testCategory.get(\"OptionList\"),\r\n                                TestGroupSpecSampleType: sampleTypeMap.get(\"OptionList\"),\r\n                                TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                            },\r\n                            selectedRecord: {\r\n                                ncomponentcode: sampleTypeMap.get(\"DefaultValue\"),\r\n                                ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                            },\r\n                            ncontrolCode\r\n                        }\r\n                    });\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_COMPONENTNOTAVAILABLE\"\r\n                    }));\r\n                }\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport const addTestGroupTest = (selectedComponent, userInfo, ncontrolCode, selectedSpecification,filterData ) => {\r\n    return dispatch => {\r\n        if (selectedSpecification) {\r\n            if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n                selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n                if (selectedComponent) {\r\n                    rsapi.post(\"/testgroup/getAvailableTest\", {\r\n                            userinfo: userInfo,\r\n                            testgroupspecsampletype: selectedComponent,\r\n                            ntreeversiontempcode :filterData.ntreeversiontempcode.value\r\n                        })\r\n                        .then(response => {\r\n                            const testCategory = constructOptionList(response.data[\"TestCategory\"], \"ntestcategorycode\", \"stestcategoryname\", \"ntestcategorycode\", \"ascending\", false);\r\n                            // const TestGroupTestMap = constructOptionList(response.data[\"TestGroupTest\"]||[], \"ntestcode\", \"stestname\", false, false, true);\r\n                            dispatch({\r\n                                type: DEFAULT_RETURN,\r\n                                payload: {\r\n                                    openModal: true,\r\n                                    operation: \"create\",\r\n                                    screenName: \"IDS_TEST\",\r\n                                    testGroupInputData: {\r\n                                        TestCategory: testCategory.get(\"OptionList\"),\r\n                                        TestGroupTest: response.data[\"TestGroupTest\"] || [] //TestGroupTestMap.get(\"OptionList\"),\r\n                                    },\r\n                                    selectedRecord: {\r\n                                        ntestcategorycode: {\r\n                                            label: response.data[\"SelectedTestCategory\"].stestcategoryname,\r\n                                            value: response.data[\"SelectedTestCategory\"].stestcategorycode,\r\n                                            item: response.data[\"SelectedTestCategory\"]\r\n                                        }\r\n                                        //ntestcategorycode: testCategory.get(\"DefaultValue\") ? testCategory.get(\"DefaultValue\") : testCategory.get(\"OptionList\")[0]\r\n                                    },\r\n                                    ncontrolCode\r\n                                }\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            if (error.response.status === 409 || error.response.status === 417) {\r\n                                toast.warn(error.response.data);\r\n                            } else {\r\n                                toast.error(error.message);\r\n                            }\r\n                        });\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: \"IDS_NEEDCOMPONENTTOADDTEST\"\r\n                    }));\r\n                }\r\n            } else {\r\n                toast.warn(intl.formatMessage({\r\n                    id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n                }));\r\n            }\r\n         \r\n}\r\n   else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTSPECIFICATION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupTest = (operation, selectedTest, userInfo, ncontrolCode, selectedSpecification,filterData) => {\r\n    return dispatch => {\r\n        if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n            const ntestcode = selectedTest.ntestcode;\r\n            const urlArray = [\r\n                rsapi.post(\"/testgroup/getActiveTestById\", {\r\n                    userinfo: userInfo,\r\n                    testgrouptest: selectedTest,\r\n                    ntreeversiontempcode:filterData.ntreeversiontempcode.value\r\n                }),\r\n                rsapi.post(\"/source/getSource\", {\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"/testmaster/getSection\", {\r\n                    ntestcode,\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"/testmaster/getMethod\", {\r\n                    ntestcode,\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"/testmaster/getInstrumentCategory\", {\r\n                    ntestcode,\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"/testmaster/getTestAttachment\", {\r\n                    ntestcode,\r\n                    userinfo: userInfo\r\n                })\r\n            ]\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    const editObject = response[0].data.TestGroupTest;\r\n                    const testFileItem = response[0].data.TestGroupTestFile;\r\n\r\n\r\n                    const selectedRecord = {\r\n                        ...editObject,\r\n                        nsourcecode: {\r\n                            \"label\": editObject.ssourcename,\r\n                            \"value\": editObject.nsourcecode\r\n                        },\r\n                        nsectioncode: {\r\n                            \"label\": editObject.ssectionname,\r\n                            \"value\": editObject.nsectioncode\r\n                        },\r\n                        // nmethodcode: {\r\n                        //     \"label\": editObject.smethodname,\r\n                        //     \"value\": editObject.nmethodcode\r\n                        // },\r\n                        // ninstrumentcatcode: {\r\n                        //     \"label\": editObject.sinstrumentcatname,\r\n                        //     \"value\": editObject.ninstrumentcatcode\r\n                        // }\r\n                    };\r\n                    if (testFileItem) {\r\n                        selectedRecord[\"ntestfilecode\"] = {\r\n                            \"label\": testFileItem.sfilename,\r\n                            \"value\": testFileItem.ntestgroupfilecode,\r\n                            item: testFileItem\r\n                        };\r\n                        selectedRecord[\"ntestgroupfilecode\"] = testFileItem.ntestgroupfilecode\r\n                    }\r\n                    if (editObject.nmethodcode !== -1) {\r\n                        selectedRecord[\"nmethodcode\"] = {\r\n                            \"label\": editObject.smethodname,\r\n                            \"value\": editObject.nmethodcode\r\n                        }\r\n                    } else {\r\n                        selectedRecord[\"nmethodcode\"] = undefined;\r\n                    }\r\n                    if (editObject.ninstrumentcatcode !== -1) {\r\n                        selectedRecord[\"ninstrumentcatcode\"] = {\r\n                            \"label\": editObject.sinstrumentcatname,\r\n                            \"value\": editObject.ninstrumentcatcode\r\n                        }\r\n                    } else {\r\n                        selectedRecord[\"ninstrumentcatcode\"] = undefined;\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: operation,\r\n                            screenName: \"IDS_EDITTESTGROUPTEST\",\r\n                            testGroupInputData: {\r\n                                source: constructOptionList(response[1].data || [], \"nsourcecode\", \"ssourcename\", false, false, true).get(\"OptionList\"),\r\n                                section: constructOptionList(response[2].data || [], \"nsectioncode\", \"ssectionname\", false, false, true).get(\"OptionList\"),\r\n                                method: constructOptionList(response[3].data || [], \"nmethodcode\", \"smethodname\", false, false, true).get(\"OptionList\"),\r\n                                instrumentCategory: constructOptionList(response[4].data || [], \"ninstrumentcatcode\", \"sinstrumentcatname\", false, false, true).get(\"OptionList\"),\r\n                                testFile: constructOptionList(response[5].data || [], \"ntestfilecode\", \"sfilename\", false, false, true).get(\"OptionList\")\r\n                            },\r\n                            selectedRecord,\r\n                            ncontrolCode\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const editTestGroupParameter = (operation, selectedParameter, userInfo, ncontrolCode, selectedSpecification,filterData) => {\r\n    return dispatch => {\r\n        if (selectedSpecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            selectedSpecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = [\r\n                rsapi.post(\"/testgroup/getActiveParameterById\", {\r\n                    userinfo: userInfo,\r\n                    testgrouptestparameter: selectedParameter,\r\n                    ntreeversiontempcode:filterData.ntreeversiontempcode.value\r\n                }),\r\n                rsapi.post(\"/parametertype/getParameterType\", {\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"unit/getUnit\", {\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"grade/getGrade\", {\r\n                    userinfo: userInfo\r\n                }),\r\n                rsapi.post(\"checklist/getApprovedChecklist\", {\r\n                    \"userinfo\": userInfo\r\n                })\r\n            ]\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    const parameterObject = response[0].data.TestGroupTestParameter[0];\r\n                    const predefinedObject = response[0].data.TestGroupTestPredefinedParameter;\r\n                    const characterObject = response[0].data.TestGroupTestCharParameter;\r\n                    const numericObject = response[0].data.TestGroupTestNumericParameter && response[0].data.TestGroupTestNumericParameter.length > 0 ? response[0].data.TestGroupTestNumericParameter[0] : {};\r\n                    const selectedRecord = {\r\n                        ...parameterObject,\r\n                        nunitcode: {\r\n                            \"label\": parameterObject.sunitname,\r\n                            \"value\": parameterObject.nunitcode\r\n                        },\r\n                        nparametertypecode: {\r\n                            \"label\": parameterObject.sdisplaystatus,\r\n                            \"value\": parameterObject.nparametertypecode\r\n                        },\r\n                        parameterTypeCode: parameterObject.nparametertypecode,\r\n                        nchecklistversioncode: {\r\n                            \"label\": parameterObject.schecklistname,\r\n                            \"value\": parameterObject.nchecklistversioncode\r\n                        },\r\n                        schecklistversionname: parameterObject.schecklistversionname,\r\n                        ntestformulacode: parameterObject.ntestformulacode > 0 ? {\r\n                            \"label\": parameterObject.sformulacalculationdetail,\r\n                            \"value\": parameterObject.ntestformulacode,\r\n                            item: {\r\n                                sformulacalculationdetail: parameterObject.sformulacalculationdetail,\r\n                                ntestformulacode: parameterObject.ntestformulacode,\r\n                                sformulacalculationcode: parameterObject.sformulacalculationcode\r\n                            }\r\n                        } : \"\"\r\n                    };\r\n                    if (characterObject) {\r\n                        selectedRecord[\"scharname\"] = characterObject.scharname;\r\n                        selectedRecord[\"ntestgrouptestcharcode\"] = characterObject.ntestgrouptestcharcode;\r\n                    }\r\n                    if (predefinedObject) {\r\n                        selectedRecord[\"ntestgrouptestpredefcode\"] = predefinedObject.ntestgrouptestpredefcode;\r\n                        selectedRecord[\"spredefinedname\"] = predefinedObject.spredefinedname;\r\n                        selectedRecord[\"ndefaultstatus\"] = predefinedObject.ndefaultstatus;\r\n                        selectedRecord[\"ngradecode\"] = {\r\n                            \"label\": predefinedObject.sdisplaystatus,\r\n                            \"value\": predefinedObject.ngradecode\r\n                        };\r\n                    }\r\n                    if (numericObject) {\r\n                        selectedRecord[\"ntestgrouptestnumericcode\"] = numericObject.ntestgrouptestnumericcode;\r\n                        selectedRecord[\"sminlod\"] = numericObject.sminlod;\r\n                        selectedRecord[\"smaxlod\"] = numericObject.smaxlod;\r\n                        selectedRecord[\"sminb\"] = numericObject.sminb;\r\n                        selectedRecord[\"smina\"] = numericObject.smina;\r\n                        selectedRecord[\"smaxa\"] = numericObject.smaxa;\r\n                        selectedRecord[\"smaxb\"] = numericObject.smaxb;\r\n                        selectedRecord[\"sminloq\"] = numericObject.sminloq;\r\n                        selectedRecord[\"smaxloq\"] = numericObject.smaxloq;\r\n                        selectedRecord[\"sdisregard\"] = numericObject.sdisregard;\r\n                        selectedRecord[\"sresultvalue\"] = numericObject.sresultvalue;\r\n                    }\r\n                    const gradeMap = constructOptionList(response[3].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                    const unitMap = constructOptionList(response[2].data || [], \"nunitcode\", \"sunitname\", false, false, true);\r\n                    const grade = gradeMap.get(\"OptionList\");\r\n                    const unit = unitMap.get(\"OptionList\");\r\n                    const disabled = parameterObject.nparametertypecode === parameterType.NUMERIC ? false : true;\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openChildModal: true,\r\n                            operation: operation,\r\n                            screenName: \"IDS_PARAMETER\",\r\n                            testGroupInputData: {\r\n                                unit,\r\n                                grade,\r\n                                testFormula: constructOptionList(response[0].data.TestFormula || [], \"ntestformulacode\", \"sformulacalculationdetail\", false, false, true).get(\"OptionList\"),\r\n                                parameterType: constructOptionList(response[1].data || [], \"nparametertypecode\", \"sdisplaystatus\", false, false, true).get(\"OptionList\"),\r\n                                checkListVersion: constructOptionList(response[4].data || [], \"nchecklistversioncode\", \"schecklistname\", false, false, true).get(\"OptionList\"),\r\n                                needRoundingDigit: disabled,\r\n                                needUnit: disabled\r\n                            },\r\n                            parameterData: {\r\n                                grade\r\n                            },\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message);\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\n// export const addTestGroupFormula = (selectedParameter, userInfo, ncontrolCode, optionalData) => {\r\n//     return dispatch => {\r\n//         const testgroupspecification = optionalData.testgroupspecification;\r\n//         if(testgroupspecification.napprovalstatus === transactionStatus.DRAFT || \r\n//             testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n//             dispatch(initRequest(true));\r\n//             rsapi.post(\"/testgroup/getTestGroupFormula\", {userinfo: userInfo, testgrouptestparameter: selectedParameter, testgroupspecification})\r\n//             .then(response=>{\r\n//                 dispatch({\r\n//                     type: DEFAULT_RETURN, \r\n//                     payload:{\r\n//                         openChildModal: true,\r\n//                         operation: \"create\",\r\n//                         screenName: \"IDS_FORMULA\",\r\n//                         testGroupInputData: {testFormula: response.data},\r\n//                         selectedRecord: {},\r\n//                         ncontrolCode\r\n//                 }});\r\n//             })\r\n//             .catch(error=>{\r\n//                 dispatch({type: DEFAULT_RETURN, payload: {loading:false}});\r\n//                 if(error.response.status === 409 || error.response.status === 417) {\r\n//                     toast.warn(error.response.data);\r\n//                 } else {\r\n//                     toast.error(error.message)\r\n//                 }\r\n//             });\r\n//         } else {\r\n//             toast.warn(intl.formatMessage({id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"}));\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport const getTestGroupParameter = (inputParam) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestGroupTestParameter\", {\r\n                ...inputParam\r\n            })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getComponentBySpecId = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n                [inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0],\r\n                userinfo: inputParam.userInfo\r\n            })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                searchRef.current.value = \"\";\r\n                const historyDataState = {\r\n                    ...inputParam.historyDataState,\r\n                    sort: undefined,\r\n                    filter: undefined\r\n                }\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        historyDataState\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupDetails = (inputParam) => {\r\n    return (dispatch) => { //...inputParam, \r\n        rsapi.post(\"/testgroup/getTestGroupTest\", {\r\n                ntestgrouptestcode: parseInt(inputParam['ntestgrouptestcode']),\r\n                userinfo: inputParam.userInfo\r\n            })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                sortData(response.data);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getTestGroupComponentDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => { //...inputParam, \r\n        rsapi.post(\"/testgroup/getTestByComponentId\", {\r\n                testgroupspecsampletype: inputParam['testgroupspecsampletype'],\r\n                userinfo: inputParam.userInfo\r\n            })\r\n            // rsapi.post(\"/testgroup/\"+inputParam.operation+inputParam.methodUrl, \r\n            //     {[inputParam.keyName]: inputParam.selectedRecord.testgroupspecification[0], userinfo: inputParam.userInfo})\r\n            .then(response => {\r\n                sortData(response.data);\r\n                searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecification = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        if (inputParam.selectedRecord !== null) {\r\n            rsapi.post(\"/testgroup/\" + inputParam.operation + inputParam.methodUrl, {\r\n                    ...inputParam,\r\n                    [inputParam.keyName]: inputParam.selectedRecord\r\n                })\r\n                .then(response => {\r\n                    sortData(response.data);\r\n                    searchRef.current.value = \"\";\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData: {\r\n                                ...masterData,\r\n                                ActiveKey: inputParam.activeKey,\r\n                                FocusKey: inputParam.focusKey,\r\n                                primaryKey: inputParam.primaryKey,\r\n                                ...response.data,\r\n                                selectedNode: inputParam.selectedRecord,\r\n                                searchedData: undefined,\r\n\r\n                            },\r\n                            historyDataState: {\r\n                                ...inputParam.historyDataState,\r\n                                sort: undefined,\r\n                                filter: undefined\r\n                            }\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData: {\r\n                        ...masterData,\r\n                        selectedNode: inputParam.selectedRecord,\r\n                        TestGroupSpecification: [],\r\n                        SelectedSpecification: {},\r\n                        TestGroupTest: [],\r\n                        TestGroupTestParameter: [],\r\n                        TestGroupTestNumericParameter: [],\r\n                        TestGroupTestFormula: [],\r\n                        TestGroupTestPredefinedParameter: [],\r\n                        TestGroupTestCharParameter: [],\r\n                        ActiveKey: inputParam.activeKey,\r\n                        FocusKey: inputParam.focusKey,\r\n                        SelectedTest: {},\r\n                        selectedParameter: {},\r\n                        TestGroupSpecFile: [],\r\n                        TestGroupSpecificationHistory: [],\r\n                        SelectedComponent: undefined\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport const changeTestCategory = (inputParam, testGroupInputData) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/getTestMasterByCategory\", {\r\n                ...inputParam\r\n            })\r\n            .then(response => {\r\n                sortData(response.data);\r\n                inputParam.selectedRecord.ntestcode = [];\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord: inputParam.selectedRecord,\r\n                        testGroupInputData: {\r\n                            ...testGroupInputData,\r\n                            ...response.data\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const getSpecificationDetails = (inputParam, masterData, searchRef) => {\r\n    return (dispatch) => {\r\n        rsapi.post(\"/testgroup/get\" + inputParam.methodUrl, {\r\n                ...inputParam.inputData\r\n            })\r\n            .then(response => {\r\n                searchRef.current.value = \"\";\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData: {\r\n                            ...masterData,\r\n                            ...response.data,\r\n                            searchedData: undefined\r\n                        },\r\n                        screenName: inputParam.screenName\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409 || error.response.status === 417) {\r\n                    toast.warn(error.response.data);\r\n                } else {\r\n                    toast.error(error.message)\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nexport const editSpecFile = (inputParam) => {\r\n    return (dispatch) => {\r\n        if (inputParam.testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            inputParam.testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n            let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", {\r\n                    userinfo: inputParam.userInfo\r\n                }),\r\n                rsapi.post(\"/testgroup/getActiveSpecFileById\", {\r\n                    userinfo: inputParam.userInfo,\r\n                    testgroupspecfile: inputParam.selectedRecord,\r\n                    ntreeversiontempcode:inputParam.filterData.ntreeversiontempcode.value\r\n                })\r\n            ]\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    const linkmaster = response[0].data.LinkMaster;\r\n                    const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\r\n                    const editObject = response[1].data;\r\n                    let nlinkcode = {};\r\n                    let link = {};\r\n                    if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                        nlinkcode = {\r\n                            \"label\": editObject.slinkname,\r\n                            \"value\": editObject.nlinkcode\r\n                        }\r\n                        link = {\r\n                            slinkfilename: editObject.sfilename,\r\n                            slinkdescription: editObject.sdescription,\r\n                            nlinkdefaultstatus: editObject.ndefaultstatus,\r\n                            sfilesize: '',\r\n                            nfilesize: 0,\r\n                            ndefaultstatus: 4,\r\n                            sfilename: '',\r\n                        }\r\n\r\n                    } else {\r\n                        nlinkcode = defaultLink.length > 0 ? {\r\n                            \"label\": defaultLink[0].slinkname,\r\n                            \"value\": defaultLink[0].nlinkcode\r\n                        } : \"\"\r\n\r\n                        link = {\r\n                            slinkfilename: '',\r\n                            slinkdescription: '',\r\n                            sdescription: editObject.sdescription,\r\n                            nlinkdefaultstatus: 4,\r\n                            sfilesize: editObject.sfilesize,\r\n                            nfilesize: editObject.nfilesize,\r\n                            ndefaultstatus: editObject.ndefaultstatus,\r\n                            sfilename: editObject.sfilename,\r\n                        }\r\n                    }\r\n                    const selectedRecord = {\r\n                        // ...editObject,\r\n                        ...link,\r\n                        nallotedspeccode: editObject.nallotedspeccode,\r\n                        nspecfilecode: editObject.nspecfilecode,\r\n                        stypename: editObject.stypename,\r\n                        nattachmenttypecode: editObject.nattachmenttypecode,\r\n                        nlinkcode,\r\n                        // disabled: true\r\n                    };\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openModal: true,\r\n                            operation: \"update\",\r\n                            screenName: \"IDS_SPECFILE\",\r\n                            editFiles: Object.values(editObject).length > 0 && editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {},\r\n                            selectedRecord,\r\n                            ncontrolCode: inputParam.ncontrolCode\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 409 || error.response.status === 417) {\r\n                        toast.warn(error.response.data);\r\n                    } else {\r\n                        toast.error(error.message)\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const addTestGroupCodedResult = (operation, paramdata, userInfo, ncontrolCode, optionalData) => {\r\n    return (dispatch) => {\r\n        const testgroupspecification = optionalData.testgroupspecification;\r\n        if (testgroupspecification.napprovalstatus === transactionStatus.DRAFT ||\r\n            testgroupspecification.napprovalstatus === transactionStatus.CORRECTION) {\r\n            dispatch(initRequest(true));\r\n            const urlArray = [\r\n                rsapi.post(\"grade/getGrade\", {\r\n                    \"userinfo\": userInfo\r\n                })\r\n            ];\r\n            if (operation === \"update\") {\r\n                urlArray.push(rsapi.post(\"testgroup/getActivePredefinedParameterById\", {\r\n                    testgrouptestpredefinedparameter: paramdata,\r\n                    \"userinfo\": userInfo,\r\n                    testgroupspecification\r\n                }));\r\n            }\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = {};\r\n                    const gradeMap = constructOptionList(response[0].data || [], \"ngradecode\", \"sdisplaystatus\", false, false, true);\r\n                    const grade = gradeMap.get(\"OptionList\");\r\n                    if (operation === \"update\") {\r\n                        const editCodedResult = response[1].data;\r\n                        selectedRecord = {\r\n                            ntestgrouptestpredefcode: paramdata[\"ntestgrouptestpredefcode\"],\r\n                            ntestgrouptestparametercode: paramdata[\"ntestgrouptestparametercode\"],\r\n                            ngradecode: {\r\n                                \"label\": editCodedResult[\"sdisplaystatus\"],\r\n                                \"value\": editCodedResult[\"ngradecode\"]\r\n                            },\r\n                            spredefinedname: editCodedResult[\"spredefinedname\"]\r\n                        }\r\n                    } else {\r\n                        selectedRecord = {\r\n                            ngradecode: gradeMap.get(\"DefaultValue\")\r\n                            // {\r\n                            //     \"value\": grade[0].ngradecode,\r\n                            //     \"label\": grade[0][\"sdisplaystatus\"]\r\n                            // }\r\n                        }\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            openChildModal: true,\r\n                            showSaveContinue: false,\r\n                            operation: operation,\r\n                            screenName: \"IDS_CODEDRESULT\",\r\n                            parameterData: {\r\n                                grade,\r\n                                needCodedResult: false\r\n                            },\r\n                            selectedRecord,\r\n                            ncontrolCode,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SPECIFICATIONSTATUSMUSTBEDRAFTCORRECTION\"\r\n            }));\r\n        }\r\n    }\r\n}\r\n\r\nexport const viewTestGroupCheckList = (inputParam, userInfo) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"checklist/viewTemplate\", {\r\n                ...inputParam\r\n            })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        openTemplateModal: true,\r\n                        testGroupCheckList: {\r\n                            templateData: response.data\r\n                        },\r\n                        loading: false,\r\n                        selectedRecord: {}\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport const reportSpecification = (inputParam) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/specReportGenerate\", {\r\n                ...inputParam,\r\n                ntreeversiontempcode:inputParam.filterData.ntreeversiontempcode.value\r\n            })\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false,\r\n                        loadEsign: false,\r\n                        openModal: false,\r\n                        showConfirmAlert: false\r\n                    }\r\n                })\r\n                document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n                document.getElementById(\"download_data\").click();\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport const retireSpecification = (inputParam, masterData) => {\r\n    return (dispatch) => {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"testgroup/retireSpec\", {\r\n                ...inputParam\r\n            })\r\n            .then(response => {\r\n\r\n                // const TestGroupSpecification = response.data.TestGroupSpecificationHistory ;\r\n                sortData(response.data);\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n\r\n                };\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            }).catch(error => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        loading: false\r\n                    }\r\n                })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}