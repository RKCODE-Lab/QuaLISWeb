{"ast":null,"code":"import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from\"../rsapi\";import{toast}from\"react-toastify\";import{DEFAULT_RETURN}from\"./LoginTypes\";import Axios from\"axios\";import{initRequest,updateStore}from\"./LoginAction\";import{transactionStatus,attachmentType}from\"../components/Enumeration\";import{constructOptionList,showEsign}from\"../components/CommonScript\";import{crudMaster}from'./ServiceAction';import{intl}from\"../components/App\";export function getAttachmentCombo(inputParam){return function(dispatch){var valid=false;if(inputParam.masterList){if(Array.isArray(inputParam.masterList)){if(inputParam.masterList.length>0){valid=true;}}else{valid=true;}}//if (inputParam.masterList && inputParam.masterList.length > 0) {\nif(valid){dispatch(initRequest(true));var urlArray=[rsapi.post(\"/linkmaster/getLinkMaster\",{userinfo:inputParam.userInfo})];if(inputParam.operation===\"update\"){urlArray.push(rsapi.post(\"/attachment/getEdit\".concat(inputParam.methodUrl),{userinfo:inputParam.userInfo,selectedrecord:inputParam.selectedRecord}));}Axios.all(urlArray).then(function(response){var _payload;var linkmaster=response[0].data.LinkMaster;var selectedRecord={};var defaultLink=linkmaster.filter(function(item){return item.ndefaultlink===transactionStatus.YES;});var linkmasterMap=constructOptionList(linkmaster||[],\"nattachmenttypecode\",\"slinkname\",undefined,undefined,true);linkmaster=linkmasterMap.get(\"OptionList\");var disabled=false;var editObject={};if(inputParam.operation===\"update\"){editObject=response[1].data;var nlinkcode={};var link={};if(editObject.nattachmenttypecode===attachmentType.LINK){nlinkcode={\"label\":editObject.jsondata.slinkname,\"value\":editObject.nlinkcode};link={slinkfilename:editObject.jsondata.sfilename,slinkdescription:editObject.jsondata.sdescription,sfilesize:'',nfilesize:0,sfilename:'',sdescription:''};}else{nlinkcode=defaultLink.length>0?{\"label\":defaultLink[0].slinkname,\"value\":defaultLink[0].nlinkcode}:\"\";link={slinkfilename:'',slinkdescription:'',sfilesize:editObject.jsondata.sfilesize,nfilesize:editObject.jsondata.nfilesize,sfilename:editObject.jsondata.sfilename,sdescription:editObject.jsondata.sdescription,sheader:editObject.jsondata.sheader};}selectedRecord=_objectSpread(_objectSpread({},link),{},{dcreateddate:editObject.dcreateddate,groupingField:editObject.groupingField,nattachmenttypecode:editObject.nattachmenttypecode,nformcode:editObject.nformcode,npreregno:editObject.npreregno,nregattachmentcode:editObject.nregattachmentcode,nsampleattachmentcode:editObject.nsampleattachmentcode,nuserrolecode:editObject.nuserrolecode,sarno:editObject.sarno,screateddate:editObject.screateddate,sdisplayname:editObject.sdisplayname,ssystemfilename:editObject.ssystemfilename,stypename:editObject.stypename,susername:editObject.susername,suserrolename:editObject.suserrolename,nusercode:editObject.nusercode,ntestattachmentcode:editObject.ntestattachmentcode,ntransactionsamplecode:editObject.ntransactionsamplecode,ntransactiontestcode:editObject.ntransactiontestcode,nbatchfilecode:editObject.nbatchfilecode,nreleasebatchcode:editObject.nreleasebatchcode,nlinkcode:nlinkcode,stestsynonym:editObject.jsondata.stestsynonym,nneedreport:editObject.jsondata.nneedreport// disabled: true\n});}else{selectedRecord={nattachmenttypecode:response[0].data.AttachmentType.length>0?response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,nlinkcode:defaultLink.length>0?{\"label\":defaultLink[0].slinkname,\"value\":defaultLink[0].nlinkcode}:\"\",disabled:disabled};}dispatch({type:DEFAULT_RETURN,payload:(_payload={},_defineProperty(_payload,inputParam.modalName,true),_defineProperty(_payload,\"operation\",inputParam.operation),_defineProperty(_payload,\"screenName\",inputParam.screenName),_defineProperty(_payload,\"ncontrolCode\",inputParam.ncontrolCode),_defineProperty(_payload,\"selectedRecord\",selectedRecord),_defineProperty(_payload,\"loading\",false),_defineProperty(_payload,\"linkMaster\",linkmaster),_defineProperty(_payload,\"modalType\",'attachment'),_defineProperty(_payload,\"modalName\",[inputParam.modalName]),_defineProperty(_payload,\"editFiles\",editObject.nattachmenttypecode===attachmentType.FTP?editObject:{}),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:inputParam.masterAlertStatus}));}};}export function deleteAttachment(deleteParam){return function(dispatch){var _inputData;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var data=deleteParam.data;var attachmentskip=deleteParam.skip;var attachmenttake=deleteParam.take;if(data.length===1){if(attachmentskip>attachmenttake){attachmentskip=attachmentskip-attachmenttake;}else if(attachmentskip>=attachmenttake){attachmentskip=0;}}var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"nreleasebatchcode\",deleteParam.nreleasebatchcode),_defineProperty(_inputData,\"npreregno\",deleteParam.npreregno),_defineProperty(_inputData,\"ntransactiontestcode\",deleteParam.ntransactiontestcode),_defineProperty(_inputData,\"ntransactionsamplecode\",deleteParam.ntransactionsamplecode),_defineProperty(_inputData,\"userinfo\",deleteParam.userInfo),_defineProperty(_inputData,\"attachmentskip\",attachmentskip),_defineProperty(_inputData,\"attachmenttake\",attachmenttake),_inputData),classUrl:\"attachment\",operation:'delete',methodUrl:methodUrl,screenName:deleteParam.screenName,attachmentskip:attachmentskip,attachmenttake:attachmenttake};var masterData=deleteParam.masterData;if(showEsign(deleteParam.esignRights,deleteParam.userInfo.nformcode,deleteParam.ncontrolCode)){// dispatch({\n//     type: DEFAULT_RETURN,\n//     payload: {\n//         loadEsign: true,\n//         screenData: { inputParam, masterData },\n//         openAttachmentModal: true,\n//         screenName: deleteParam.screenName,\n//         operation: 'delete',\n//         selectedRecord: {}\n//     }\n// });\nvar updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openAttachmentModal:true,screenName:deleteParam.screenName,operation:'delete',selectedRecord:{}}};dispatch(updateStore(updateInfo));}else{dispatch(crudMaster(inputParam,masterData,\"openAttachmentModal\",{}));}};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/AttachmentsAction.js"],"names":["rsapi","toast","DEFAULT_RETURN","Axios","initRequest","updateStore","transactionStatus","attachmentType","constructOptionList","showEsign","crudMaster","intl","getAttachmentCombo","inputParam","dispatch","valid","masterList","Array","isArray","length","urlArray","post","userinfo","userInfo","operation","push","concat","methodUrl","selectedrecord","selectedRecord","all","then","response","linkmaster","data","LinkMaster","defaultLink","filter","item","ndefaultlink","YES","linkmasterMap","undefined","get","disabled","editObject","nlinkcode","link","nattachmenttypecode","LINK","jsondata","slinkname","slinkfilename","sfilename","slinkdescription","sdescription","sfilesize","nfilesize","sheader","dcreateddate","groupingField","nformcode","npreregno","nregattachmentcode","nsampleattachmentcode","nuserrolecode","sarno","screateddate","sdisplayname","ssystemfilename","stypename","susername","suserrolename","nusercode","ntestattachmentcode","ntransactionsamplecode","ntransactiontestcode","nbatchfilecode","nreleasebatchcode","stestsynonym","nneedreport","AttachmentType","FTP","type","payload","modalName","screenName","ncontrolCode","catch","error","loading","status","message","warn","formatMessage","id","masterAlertStatus","deleteAttachment","deleteParam","selected","attachmentskip","skip","attachmenttake","take","inputData","toLowerCase","classUrl","masterData","esignRights","updateInfo","typeName","loadEsign","screenData","openAttachmentModal"],"mappings":"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","sourcesContent":["import rsapi from \"../rsapi\";\r\nimport { toast } from \"react-toastify\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\nimport Axios from \"axios\";\r\nimport { initRequest, updateStore } from \"./LoginAction\";\r\nimport { transactionStatus, attachmentType } from \"../components/Enumeration\";\r\nimport { constructOptionList, showEsign } from \"../components/CommonScript\";\r\nimport { crudMaster } from './ServiceAction'\r\nimport { intl } from \"../components/App\";\r\n\r\nexport function getAttachmentCombo(inputParam) {\r\n    return (dispatch) => {\r\n        let valid = false;\r\n        if (inputParam.masterList){\r\n            if (Array.isArray(inputParam.masterList)){\r\n                if (inputParam.masterList.length > 0){\r\n                    valid = true;\r\n                }\r\n            }\r\n            else{\r\n                valid = true;\r\n            }\r\n        }\r\n        \r\n        //if (inputParam.masterList && inputParam.masterList.length > 0) {\r\n        if (valid){\r\n            dispatch(initRequest(true));\r\n            let urlArray = [rsapi.post(\"/linkmaster/getLinkMaster\", { userinfo: inputParam.userInfo })];\r\n            if (inputParam.operation === \"update\") {\r\n                urlArray.push(rsapi.post(\"/attachment/getEdit\".concat(inputParam.methodUrl), { userinfo: inputParam.userInfo, selectedrecord: inputParam.selectedRecord }))\r\n            }\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let linkmaster = response[0].data.LinkMaster;\r\n                    let selectedRecord = {};\r\n                    const defaultLink = linkmaster.filter(item => item.ndefaultlink === transactionStatus.YES);\r\n                    const linkmasterMap  = constructOptionList(linkmaster || [], \"nattachmenttypecode\",\"slinkname\" , undefined, undefined, true);\r\n                    linkmaster = linkmasterMap.get(\"OptionList\");\r\n                    let disabled = false;\r\n                    let editObject = {};\r\n                    if (inputParam.operation === \"update\") {\r\n                        editObject = response[1].data;\r\n                        let nlinkcode = {};\r\n                        let link = {};\r\n                        if (editObject.nattachmenttypecode === attachmentType.LINK) {\r\n                            nlinkcode = { \"label\": editObject.jsondata.slinkname,\r\n                             \"value\": editObject.nlinkcode }\r\n                             link = {\r\n                                slinkfilename:editObject.jsondata.sfilename,\r\n                                slinkdescription:editObject.jsondata.sdescription,\r\n                                sfilesize:'',\r\n                                nfilesize:0,\r\n                                sfilename:'',\r\n                                sdescription:'',\r\n                            }\r\n                        } else {\r\n                            nlinkcode = defaultLink.length > 0 ?\r\n                             { \"label\": defaultLink[0].slinkname, \r\n                             \"value\": defaultLink[0].nlinkcode } : \"\"\r\n\r\n                             link = {\r\n                                slinkfilename:'',\r\n                                slinkdescription:'',\r\n                                sfilesize:editObject.jsondata.sfilesize,\r\n                                nfilesize:editObject.jsondata.nfilesize,\r\n                                sfilename:editObject.jsondata.sfilename,\r\n                                sdescription:editObject.jsondata.sdescription,\r\n                                sheader:editObject.jsondata.sheader,\r\n                            }\r\n                        }\r\n                        selectedRecord = {\r\n                        // ...editObject,\r\n                        ...link,\r\n                           dcreateddate:editObject.dcreateddate,\r\n                           groupingField:editObject.groupingField,\r\n                           nattachmenttypecode:editObject.nattachmenttypecode,\r\n                           nformcode:editObject.nformcode,\r\n                           npreregno:editObject.npreregno,\r\n                           nregattachmentcode:editObject.nregattachmentcode,\r\n                           nsampleattachmentcode: editObject.nsampleattachmentcode,\r\n                           nuserrolecode:editObject.nuserrolecode,\r\n                           sarno:editObject.sarno,\r\n                           screateddate:editObject.screateddate,\r\n                           sdisplayname:editObject.sdisplayname,\r\n                           ssystemfilename:editObject.ssystemfilename,\r\n                           stypename:editObject.stypename,\r\n                           susername:editObject.susername,\r\n                           suserrolename:editObject.suserrolename,\r\n                           nusercode:editObject.nusercode,\r\n                           ntestattachmentcode:editObject.ntestattachmentcode,\r\n                           ntransactionsamplecode:editObject.ntransactionsamplecode,\r\n                           ntransactiontestcode:editObject.ntransactiontestcode,\r\n                           nbatchfilecode:editObject.nbatchfilecode,\r\n                           nreleasebatchcode:editObject.nreleasebatchcode,\r\n                           nlinkcode,\r\n                           stestsynonym:editObject.jsondata.stestsynonym,\r\n                           nneedreport : editObject.jsondata.nneedreport\r\n                             // disabled: true\r\n                        };\r\n                    } else {\r\n                        selectedRecord = {\r\n                            nattachmenttypecode:response[0].data.AttachmentType.length>0?\r\n                            response[0].data.AttachmentType[0].nattachmenttypecode:attachmentType.FTP,\r\n                            nlinkcode: defaultLink.length > 0 ? { \"label\": defaultLink[0].slinkname, \"value\": defaultLink[0].nlinkcode } : \"\",\r\n                            disabled\r\n                        };\r\n                    }\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            [inputParam.modalName]: true,\r\n                            operation: inputParam.operation,\r\n                            screenName: inputParam.screenName,\r\n                            ncontrolCode: inputParam.ncontrolCode,\r\n                            selectedRecord, loading: false,\r\n                            linkMaster: linkmaster,\r\n                            modalType: 'attachment',\r\n                            modalName: [inputParam.modalName],\r\n                            editFiles: editObject.nattachmenttypecode === attachmentType.FTP ? editObject : {}\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                });\r\n        } else {\r\n            toast.warn(intl.formatMessage({ id: inputParam.masterAlertStatus }))\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteAttachment(deleteParam) {\r\n    return (dispatch) => {\r\n        const methodUrl = deleteParam.methodUrl;\r\n        const selected = deleteParam.selectedRecord;\r\n\r\n         const data=deleteParam.data;\r\n         let attachmentskip=deleteParam.skip;\r\n         let attachmenttake=deleteParam.take;\r\n         if(data.length===1){\r\n              if(attachmentskip>attachmenttake){\r\n                attachmentskip=attachmentskip-attachmenttake;\r\n              }\r\n             else if(attachmentskip>=attachmenttake){\r\n                attachmentskip=0;\r\n              }\r\n         }\r\n\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: selected,\r\n                nreleasebatchcode:deleteParam.nreleasebatchcode,\r\n                npreregno: deleteParam.npreregno,\r\n                ntransactiontestcode: deleteParam.ntransactiontestcode,\r\n                ntransactionsamplecode: deleteParam.ntransactionsamplecode,\r\n                userinfo: deleteParam.userInfo,\r\n                attachmentskip,\r\n                attachmenttake,\r\n    \r\n            },\r\n            classUrl: \"attachment\",\r\n            operation: 'delete',\r\n            methodUrl: methodUrl,\r\n            screenName: deleteParam.screenName,\r\n            attachmentskip,\r\n            attachmenttake,\r\n\r\n        }\r\n        const masterData = deleteParam.masterData;\r\n        if (showEsign(deleteParam.esignRights, deleteParam.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n           \r\n            // dispatch({\r\n            //     type: DEFAULT_RETURN,\r\n            //     payload: {\r\n            //         loadEsign: true,\r\n            //         screenData: { inputParam, masterData },\r\n            //         openAttachmentModal: true,\r\n            //         screenName: deleteParam.screenName,\r\n            //         operation: 'delete',\r\n            //         selectedRecord: {}\r\n            //     }\r\n            // });\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {   loadEsign: true,\r\n                            screenData: { inputParam, masterData },\r\n                            openAttachmentModal: true,\r\n                            screenName: deleteParam.screenName,\r\n                            operation: 'delete',\r\n                            selectedRecord: {} }\r\n            }\r\n            dispatch(updateStore(updateInfo));\r\n        } else {\r\n            dispatch(crudMaster(inputParam, masterData, \"openAttachmentModal\", {}));\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}