{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from\"react-toastify\";import{DEFAULT_RETURN}from\"./LoginTypes\";import rsapi from\"../rsapi\";import{constructOptionList}from\"../components/CommonScript\";import{initRequest}from\"./LoginAction\";import axios,{Axios}from\"axios\";export function getBarcodeTemplateComboService(addParam){return function(dispatch){dispatch(initRequest(true));var listURL=[];listURL[0]=rsapi.post(\"dynamicpreregdesign/getReactComponents\",{'userinfo':addParam.userInfo});listURL[1]=rsapi.post(\"dynamicpreregdesign/getReactInputFields\",{'userinfo':addParam.userInfo});listURL[2]=rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\",{'userinfo':addParam.userInfo});listURL[3]=rsapi.post(\"barcodetemplate/getBarcodeTemplateModal\",{'userinfo':addParam.userInfo});axios.all(listURL).then(function(response){var qualisMap=constructOptionList(response[3].data[\"QualisForm\"]||[],\"nformcode\",\"sformname\",undefined,undefined,true);var qualisList=qualisMap.get(\"OptionList\");var SqlMap=constructOptionList(response[3].data[\"SqlQuery\"]||[],\"nsqlquerycode\",\"ssqlqueryname\",undefined,undefined,true).get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{loading:false,qualisList:qualisList,ReactInputFields:response[1].data,ReactComponents:response[0].data.components,staticfiltertables:constructOptionList(response[2].data,'nquerybuilderstaticfiltercode','displayname').get(\"OptionList\"),ReactTables:constructOptionList(response[0].data.tables,'nquerybuildertablecode','sdisplayname').get(\"OptionList\"),ncontrolcode:addParam.controlId,openModal:true,operation:'create',reactTemplate:undefined,screenName:addParam.screenName,SqlQuery:SqlMap}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getEditBarcodeTemplateComboService(addParam){return function(dispatch){dispatch(initRequest(true));var listURL=[];listURL[0]=rsapi.post(\"dynamicpreregdesign/getReactComponents\",{'userinfo':addParam.userinfo});listURL[1]=rsapi.post(\"dynamicpreregdesign/getReactInputFields\",{'userinfo':addParam.userinfo});listURL[2]=rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\",{'userinfo':addParam.userinfo});listURL[3]=rsapi.post(\"barcodetemplate/getEditBarcodeTemplateModal\",{nbarcodetemplatecode:addParam.nbarcodetemplatecode,'userinfo':addParam.userinfo});axios.all(listURL).then(function(response){var selectedRecord=addParam.selectedRecord;var barcodeTemplate=response[3].data.SelectedBarcodeTemplate;var reactTemplate=undefined;selectedRecord['nformcode']={label:barcodeTemplate.sformname,value:barcodeTemplate.nformcode,item:{}};selectedRecord['ncontrolcode']={label:barcodeTemplate.scontrolname,value:barcodeTemplate.ncontrolcode,item:{stableprimarykeyname:barcodeTemplate.stableprimarykeyname,nquerybuildertablecode:barcodeTemplate.nquerybuildertablecode,stablename:barcodeTemplate.stablename,jnumericcolumns:barcodeTemplate.jnumericcolumns}};selectedRecord['nneedconfiguration']=barcodeTemplate.jsondata.nneedconfiguration?3:4;selectedRecord['nbarcodeprint']=barcodeTemplate.jsondata.nbarcodeprint?3:4;selectedRecord['nsqlqueryneed']=barcodeTemplate.jsondata.nsqlqueryneed?3:4;selectedRecord['nfiltersqlqueryneed']=barcodeTemplate.jsondata.nfiltersqlqueryneed?3:4;if(barcodeTemplate.jsondata.nsqlqueryneed&&barcodeTemplate.jsondata.nfiltersqlqueryneed===false){selectedRecord['nsqlquerycode']={label:barcodeTemplate.ssqlqueryname,value:barcodeTemplate.nsqlquerycode,item:{}};}else{selectedRecord['nsqlquerycode']=undefined;}var lstFilterlevel=[];var totalLevel=0;if(barcodeTemplate.jsondata.nneedconfiguration){reactTemplate={jsonString:JSON.stringify(barcodeTemplate.jsondata.screenfilter),valuemember:barcodeTemplate.jsondata.valuemember};var layout=barcodeTemplate.jsondata.screenfilter;layout.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.hasOwnProperty(\"children\")){component.children.map(function(componentrow){if(componentrow.inputtype===\"combo\"){totalLevel=totalLevel++;lstFilterlevel.push({slabelname:componentrow.label});}});}else{if(component.inputtype===\"combo\"){lstFilterlevel.push({slabelname:component.label});totalLevel=totalLevel++;}}});});});}var qualisMap=constructOptionList(response[3].data[\"QualisForm\"]||[],\"nformcode\",\"sformname\",undefined,undefined,true);var qualisList=qualisMap.get(\"OptionList\");var controlMap=constructOptionList(response[3].data[\"controlList\"]||[],\"ncontrolcode\",\"sdisplayname\",undefined,undefined,true);var controlList=controlMap.get(\"OptionList\");var SqlMap=constructOptionList(response[3].data[\"SqlQuery\"]||[],\"nsqlquerycode\",\"ssqlqueryname\",undefined,undefined,true).get(\"OptionList\");selectedRecord['totalLevel']=totalLevel;selectedRecord['lstFilterlevel']=lstFilterlevel;selectedRecord['reactTemplate']=reactTemplate;dispatch({type:DEFAULT_RETURN,payload:{loading:false,qualisList:qualisList,controlList:controlList,ncontrolcode:addParam.controlId,//   lstFilterlevel,\n//   totalLevel,\n//   reactTemplate: reactTemplate,\nopenModal:true,ReactInputFields:response[1].data,ReactComponents:response[0].data.components,staticfiltertables:constructOptionList(response[2].data,'nquerybuilderstaticfiltercode','displayname').get(\"OptionList\"),ReactTables:constructOptionList(response[0].data.tables,'nquerybuildertablecode','sdisplayname').get(\"OptionList\"),operation:'update',SqlQuery:SqlMap,selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getBarcodeTemplateControl(map,selectedRecord){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"barcodetemplate/getBarcodeTemplateControl\",{'userinfo':map.userInfo,nformcode:selectedRecord.nformcode.value}).then(function(response){//   const selectedRecord=map.selectedRecord;\nvar qualisMap=constructOptionList(response.data[\"controlList\"]||[],\"ncontrolcode\",\"sdisplayname\",undefined,undefined,true);var qualisList=qualisMap.get(\"OptionList\");//  selectedRecord['ncontrolcode']=undefined\n//  selectedRecord['reactTemplate']=undefined\n//  selectedRecord['lstFilterlevel']=[]\n//  selectedRecord['totalLevel']=0\ndispatch({type:DEFAULT_RETURN,payload:{loading:false,controlList:qualisList,selectedRecord:selectedRecord// reactTemplate:undefined,\n// lstFilterlevel:[],\n// totalLevel:0\n}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReactQuerybuilderTableRecord(userinfo){return function(dispatch){dispatch(initRequest(true));var listURL=[];listURL[0]=rsapi.post(\"dynamicpreregdesign/getReactComponents\",{userinfo:userinfo});listURL[1]=rsapi.post(\"dynamicpreregdesign/getReactInputFields\",{userinfo:userinfo});listURL[2]=rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\",{userinfo:userinfo});axios.all(listURL).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{openPortal:true,loading:false,ReactInputFields:response[1].data,ReactComponents:response[0].data.components,staticfiltertables:constructOptionList(response[2].data,'nquerybuilderstaticfiltercode','displayname').get(\"OptionList\"),ReactTables:constructOptionList(response[0].data.tables,'nquerybuildertablecode','sdisplayname').get(\"OptionList\"),openModal:false,design:[{\"id\":\"pv1OWbsMYq\",\"type\":\"row\",\"children\":[{\"id\":\"2zMtRhjb2t\",\"type\":\"column\",\"children\":[]}]}]}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getBarcodeTemplateDetail(barcodeTemplate,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"barcodetemplate/getBarcodeTemplate\",{nbarcodetemplatecode:barcodeTemplate.nbarcodetemplatecode,'userinfo':userInfo}).then(function(response){dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},masterData),{},{SelectedBarcodeTemplate:response.data.SelectedBarcodeTemplate}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/BarcodeTemplateAction.js"],"names":["toast","DEFAULT_RETURN","rsapi","constructOptionList","initRequest","axios","Axios","getBarcodeTemplateComboService","addParam","dispatch","listURL","post","userInfo","all","then","response","qualisMap","data","undefined","qualisList","get","SqlMap","type","payload","loading","ReactInputFields","ReactComponents","components","staticfiltertables","ReactTables","tables","ncontrolcode","controlId","openModal","operation","reactTemplate","screenName","SqlQuery","catch","error","status","message","warn","getEditBarcodeTemplateComboService","userinfo","nbarcodetemplatecode","selectedRecord","barcodeTemplate","SelectedBarcodeTemplate","label","sformname","value","nformcode","item","scontrolname","stableprimarykeyname","nquerybuildertablecode","stablename","jnumericcolumns","jsondata","nneedconfiguration","nbarcodeprint","nsqlqueryneed","nfiltersqlqueryneed","ssqlqueryname","nsqlquerycode","lstFilterlevel","totalLevel","jsonString","JSON","stringify","screenfilter","valuemember","layout","map","row","children","column","component","hasOwnProperty","componentrow","inputtype","push","slabelname","controlMap","controlList","getBarcodeTemplateControl","getReactQuerybuilderTableRecord","openPortal","design","getBarcodeTemplateDetail","masterData"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\nimport rsapi from \"../rsapi\";\r\nimport { constructOptionList } from \"../components/CommonScript\";\r\nimport { initRequest } from \"./LoginAction\";\r\nimport axios, { Axios } from \"axios\";\r\n\r\nexport function getBarcodeTemplateComboService(addParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const listURL = [];\r\n        listURL[0] = rsapi.post(\"dynamicpreregdesign/getReactComponents\", { 'userinfo': addParam.userInfo })\r\n        listURL[1] = rsapi.post(\"dynamicpreregdesign/getReactInputFields\", { 'userinfo': addParam.userInfo })\r\n        listURL[2] = rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\", { 'userinfo': addParam.userInfo })\r\n        listURL[3] = rsapi.post(\"barcodetemplate/getBarcodeTemplateModal\", { 'userinfo': addParam.userInfo })\r\n        axios.all(listURL).then(response => {\r\n            const qualisMap = constructOptionList(response[3].data[\"QualisForm\"] || [], \"nformcode\",\r\n                \"sformname\", undefined, undefined, true);\r\n            const qualisList = qualisMap.get(\"OptionList\");\r\n\r\n            const SqlMap = constructOptionList(response[3].data[\"SqlQuery\"] || [], \"nsqlquerycode\",\r\n                \"ssqlqueryname\", undefined, undefined, true).get(\"OptionList\");\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    loading: false,\r\n                    qualisList,\r\n                    ReactInputFields: response[1].data,\r\n                    ReactComponents: response[0].data.components,\r\n                    staticfiltertables: constructOptionList(response[2].data, 'nquerybuilderstaticfiltercode', 'displayname').get(\"OptionList\"),\r\n                    ReactTables: constructOptionList(response[0].data.tables, 'nquerybuildertablecode', 'sdisplayname').get(\"OptionList\"),\r\n                    ncontrolcode: addParam.controlId,\r\n                    openModal: true,\r\n                    operation: 'create',\r\n                    reactTemplate: undefined,\r\n                    screenName: addParam.screenName,\r\n                    SqlQuery: SqlMap\r\n                }\r\n            })\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getEditBarcodeTemplateComboService(addParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const listURL = [];\r\n        listURL[0] = rsapi.post(\"dynamicpreregdesign/getReactComponents\", { 'userinfo': addParam.userinfo })\r\n        listURL[1] = rsapi.post(\"dynamicpreregdesign/getReactInputFields\", { 'userinfo': addParam.userinfo })\r\n        listURL[2] = rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\", { 'userinfo': addParam.userinfo })\r\n        listURL[3] = rsapi.post(\"barcodetemplate/getEditBarcodeTemplateModal\", {\r\n            nbarcodetemplatecode: addParam.nbarcodetemplatecode\r\n            , 'userinfo': addParam.userinfo\r\n        })\r\n        axios.all(listURL).then(response => {\r\n            let selectedRecord = addParam.selectedRecord;\r\n\r\n            const barcodeTemplate = response[3].data.SelectedBarcodeTemplate\r\n\r\n            let reactTemplate = undefined\r\n\r\n            selectedRecord['nformcode'] = { label: barcodeTemplate.sformname, value: barcodeTemplate.nformcode, item: {} }\r\n            selectedRecord['ncontrolcode'] = {\r\n                label: barcodeTemplate.scontrolname,\r\n                value: barcodeTemplate.ncontrolcode,\r\n                item: {\r\n                    stableprimarykeyname: barcodeTemplate.stableprimarykeyname,\r\n                    nquerybuildertablecode: barcodeTemplate.nquerybuildertablecode,\r\n                    stablename: barcodeTemplate.stablename,\r\n                    jnumericcolumns: barcodeTemplate.jnumericcolumns\r\n                }\r\n            }\r\n\r\n\r\n            selectedRecord['nneedconfiguration'] = barcodeTemplate.jsondata.nneedconfiguration ? 3 : 4\r\n            selectedRecord['nbarcodeprint'] = barcodeTemplate.jsondata.nbarcodeprint ? 3 : 4\r\n            selectedRecord['nsqlqueryneed'] = barcodeTemplate.jsondata.nsqlqueryneed ? 3 : 4\r\n            selectedRecord['nfiltersqlqueryneed'] = barcodeTemplate.jsondata.nfiltersqlqueryneed ? 3 : 4\r\n\r\n            if (barcodeTemplate.jsondata.nsqlqueryneed&&barcodeTemplate.jsondata.nfiltersqlqueryneed===false) {\r\n                selectedRecord['nsqlquerycode'] = { label: barcodeTemplate.ssqlqueryname, value: barcodeTemplate.nsqlquerycode, item: {} }\r\n            } else {\r\n                selectedRecord['nsqlquerycode'] = undefined\r\n            }\r\n\r\n\r\n\r\n            const lstFilterlevel = []\r\n            let totalLevel = 0;\r\n            if (barcodeTemplate.jsondata.nneedconfiguration) {\r\n                reactTemplate = {\r\n                    jsonString: JSON.stringify(barcodeTemplate.jsondata.screenfilter),\r\n                    valuemember: barcodeTemplate.jsondata.valuemember\r\n                }\r\n\r\n\r\n                const layout = barcodeTemplate.jsondata.screenfilter;\r\n                layout.map(row => {\r\n                    row.children.map(column => {\r\n                        column.children.map(component => {\r\n                            if (component.hasOwnProperty(\"children\")) {\r\n                                component.children.map(componentrow => {\r\n                                    if (componentrow.inputtype === \"combo\") {\r\n                                        totalLevel = totalLevel++;\r\n                                        lstFilterlevel.push({ slabelname: componentrow.label })\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                if (component.inputtype === \"combo\") {\r\n                                    lstFilterlevel.push({ slabelname: component.label })\r\n                                    totalLevel = totalLevel++\r\n                                }\r\n\r\n                            }\r\n\r\n                        })\r\n                    })\r\n                })\r\n            }\r\n\r\n            const qualisMap = constructOptionList(response[3].data[\"QualisForm\"] || [], \"nformcode\",\r\n                \"sformname\", undefined, undefined, true);\r\n            const qualisList = qualisMap.get(\"OptionList\");\r\n\r\n            const controlMap = constructOptionList(response[3].data[\"controlList\"] || [], \"ncontrolcode\",\r\n                \"sdisplayname\", undefined, undefined, true);\r\n            const controlList = controlMap.get(\"OptionList\");\r\n\r\n            const SqlMap = constructOptionList(response[3].data[\"SqlQuery\"] || [], \"nsqlquerycode\",\r\n                \"ssqlqueryname\", undefined, undefined, true).get(\"OptionList\");\r\n            selectedRecord['totalLevel'] = totalLevel\r\n            selectedRecord['lstFilterlevel'] = lstFilterlevel\r\n            selectedRecord['reactTemplate'] = reactTemplate\r\n\r\n\r\n            dispatch({\r\n                type: DEFAULT_RETURN, payload: {\r\n                    loading: false,\r\n                    qualisList,\r\n                    controlList,\r\n                    ncontrolcode: addParam.controlId,\r\n                    //   lstFilterlevel,\r\n                    //   totalLevel,\r\n                    //   reactTemplate: reactTemplate,\r\n                    openModal: true,\r\n                    ReactInputFields: response[1].data,\r\n                    ReactComponents: response[0].data.components,\r\n                    staticfiltertables: constructOptionList(response[2].data, 'nquerybuilderstaticfiltercode', 'displayname').get(\"OptionList\"),\r\n                    ReactTables: constructOptionList(response[0].data.tables, 'nquerybuildertablecode', 'sdisplayname').get(\"OptionList\"),\r\n                    operation: 'update',\r\n                    SqlQuery: SqlMap,\r\n                    selectedRecord\r\n                }\r\n            })\r\n        })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getBarcodeTemplateControl(map,selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"barcodetemplate/getBarcodeTemplateControl\", { 'userinfo': map.userInfo, nformcode: selectedRecord.nformcode.value })\r\n            .then(response => {\r\n                //   const selectedRecord=map.selectedRecord;\r\n                const qualisMap = constructOptionList(response.data[\"controlList\"] || [], \"ncontrolcode\",\r\n                    \"sdisplayname\", undefined, undefined, true);\r\n                const qualisList = qualisMap.get(\"OptionList\");\r\n                //  selectedRecord['ncontrolcode']=undefined\r\n\r\n                //  selectedRecord['reactTemplate']=undefined\r\n                //  selectedRecord['lstFilterlevel']=[]\r\n                //  selectedRecord['totalLevel']=0\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        loading: false,\r\n                        controlList: qualisList,\r\n                        selectedRecord: selectedRecord,\r\n                        // reactTemplate:undefined,\r\n                        // lstFilterlevel:[],\r\n                        // totalLevel:0\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getReactQuerybuilderTableRecord(userinfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        const listURL = [];\r\n        listURL[0] = rsapi.post(\"dynamicpreregdesign/getReactComponents\", { userinfo })\r\n        listURL[1] = rsapi.post(\"dynamicpreregdesign/getReactInputFields\", { userinfo })\r\n        listURL[2] = rsapi.post(\"dynamicpreregdesign/getReactStaticFilterTables\", { userinfo })\r\n        axios.all(listURL)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openPortal: true,\r\n                        loading: false,\r\n                        ReactInputFields: response[1].data,\r\n                        ReactComponents: response[0].data.components,\r\n                        staticfiltertables: constructOptionList(response[2].data, 'nquerybuilderstaticfiltercode', 'displayname').get(\"OptionList\"),\r\n                        ReactTables: constructOptionList(response[0].data.tables, 'nquerybuildertablecode', 'sdisplayname').get(\"OptionList\"),\r\n                        openModal: false,\r\n                        design: [\r\n                            {\r\n                                \"id\": \"pv1OWbsMYq\",\r\n                                \"type\": \"row\",\r\n                                \"children\": [\r\n                                    {\r\n                                        \"id\": \"2zMtRhjb2t\",\r\n                                        \"type\": \"column\",\r\n                                        \"children\": []\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function getBarcodeTemplateDetail(barcodeTemplate, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"barcodetemplate/getBarcodeTemplate\", { nbarcodetemplatecode: barcodeTemplate.nbarcodetemplatecode, 'userinfo': userInfo })\r\n            .then(response => {\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: { ...masterData, SelectedBarcodeTemplate: response.data.SelectedBarcodeTemplate },\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}