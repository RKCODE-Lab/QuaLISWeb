{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _defineProperty from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{toast}from'react-toastify';import{injectIntl}from'react-intl';import rsapi from'../../rsapi';import{process}from'@progress/kendo-data-query';import{Row}from'react-bootstrap';import'../../assets/styles/lims-global-theme.css';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddSpecification from'./AddSpecification';import AddCodedResult from'./AddCodedResult';import AddParameter from'./AddParameter';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign,create_UUID,onDropAttachFileList,deleteAttachmentDropZone}from'../../components/CommonScript';import Esign from'../audittrail/Esign';import AddTestSection from'./AddTestSection';import AddTestMethod from'./AddTestMethod';import AddTestInstrumentCategory from'./AddTestInstrumentCategory';import AddFormula from'./AddFormula';import ValidateFormula from'./ValidateFormula';import AddFile from'./AddFile';import{parameterType,transactionStatus,operators,attachmentType,FORMULAFIELDTYPE}from'../../components/Enumeration';import CustomTab from'../../components/custom-tabs/custom-tabs.component';import TestSectionTab from'./TestSectionTab';import TestMethodTab from'./TestMethodTab';import TestInstrumentCategoryTab from'./TestInstrumentCategoryTab';import TestFileTab from'./TestFileTab';import AddTestContainerType from'./AddTestContainerType';import TestContainerTypeTab from'./TestContainerTypeTab';import ParameterTab from'./ParameterTab';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import{ChartLegendTitle}from'@progress/kendo-react-charts';var TestView=/*#__PURE__*/function(_Component){_inherits(TestView,_Component);var _super=_createSuper(TestView);function TestView(props){var _this;_classCallCheck(this,TestView);_this=_super.call(this,props);_this.deleteAttachment=function(event,file,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=deleteAttachmentDropZone(selectedRecord[fieldName],file);_this.setState({selectedRecord:selectedRecord,actionType:\"delete\"//fileToDelete:file.name \n});};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.tabDetail=function(){var tabMap=new Map();tabMap.set(\"IDS_PARAMETER\",/*#__PURE__*/React.createElement(ParameterTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,TestParameter:_this.props.masterData.TestParameter,masterData:_this.props.masterData,userInfo:_this.props.userInfo,getTestDetails:_this.props.getTestDetails,inputParam:_this.props.inputParam,addParameter:_this.props.addParameter,deleteAction:_this.props.deleteAction,ConfirmDelete:_this.ConfirmDelete,addCodedResult:_this.props.addCodedResult,addFormula:_this.props.addFormula,onSwitchChange:_this.onSwitchChange,addParameterSpecification:_this.props.addParameterSpecification,screenName:\"IDS_PARAMETER\"}));tabMap.set(\"IDS_SECTION\",/*#__PURE__*/React.createElement(TestSectionTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestSection\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_SECTION\"?_this.state.sectionDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_SECTION\"?_this.state.sectionDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({sectionDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestSection:_this.props.masterData.TestSection||[],screenName:\"IDS_SECTION\"}));tabMap.set(\"IDS_METHOD\",/*#__PURE__*/React.createElement(TestMethodTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestMethod\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHOD\"?_this.state.methodDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_METHOD\"?_this.state.methodDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({methodDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestMethod:_this.props.masterData.TestMethod||[],screenName:\"IDS_METHOD\"}));tabMap.set(\"IDS_FILE\",/*#__PURE__*/React.createElement(TestFileTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,TestFile:_this.props.masterData.TestFile||[],getAvailableData:_this.props.getAvailableData,addTestFile:_this.props.addTestFile,viewTestFile:_this.viewTestFile,defaultRecord:_this.defaultRecord,screenName:\"IDS_FILE\",settings:_this.props.settings}));tabMap.set(\"IDS_INSTRUMENTCATEGORY\",/*#__PURE__*/React.createElement(TestInstrumentCategoryTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"TestInstrumentCategory\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?_this.state.instrumentCatDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?_this.state.instrumentCatDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({instrumentCatDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestInstrumentCategory:_this.props.masterData.TestInstrumentCategory,screenName:\"IDS_INSTRUMENTCATEGORY\"}));tabMap.set(\"IDS_CONTAINERTYPE\",/*#__PURE__*/React.createElement(TestContainerTypeTab,{controlMap:_this.props.controlMap,userRoleControlRights:_this.props.userRoleControlRights,dataResult:process(_this.props.masterData[\"Containertype\"],_this.props.screenName===undefined||_this.props.screenName===\"IDS_CONTAINERTYPE\"?_this.state.containerTypeDataState:{skip:0,take:10}),dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_CONTAINERTYPE\"?_this.state.containerTypeDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({containerTypeDataState:event.dataState});},selectedTest:_this.props.masterData.SelectedTest,userInfo:_this.props.userInfo,inputParam:_this.props.inputParam,deleteRecord:_this.deleteRecord,defaultRecord:_this.defaultRecord,getAvailableData:_this.props.getAvailableData,TestContainerType:_this.props.masterData.Containertype,getActiveTestContainerTypeById:_this.props.getActiveTestContainerTypeById,intl:_this.props.intl,screenName:\"IDS_CONTAINERTYPE\"}));return tabMap;};_this.viewTestFile=function(filedata){var inputParam={inputData:{testfile:filedata,userinfo:_this.props.userInfo},classUrl:\"testmaster\",operation:\"view\",methodUrl:\"AttachedTestFile\",screenName:\"IDS_TEST\"};_this.props.viewAttachment(inputParam);};_this.deleteRecord=function(deleteParam){var _inputData;var methodUrl=deleteParam.methodUrl;var selected=deleteParam.selectedRecord;var dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataState=_this.state.sectionDataState;}else if(_this.props.screenName===\"IDS_METHOD\"){dataState=_this.state.methodDataState;}else if(_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){dataState=_this.state.instrumentCatDataState;}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){dataState=_this.state.containerTypeDataState;}var inputParam={inputData:(_inputData={},_defineProperty(_inputData,methodUrl.toLowerCase(),selected),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_inputData),classUrl:\"testmaster\",operation:deleteParam.operation,methodUrl:methodUrl,screenName:\"IDS_TEST\",dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"IDS_TEST\",operation:deleteParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.defaultRecord=function(defaultParam,event){var _inputData2;var methodUrl=defaultParam.methodUrl;var dataItem=defaultParam.selectedRecord;// dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\nvar dataState=undefined;if(_this.props.screenName===\"IDS_SECTION\"){dataState=_this.state.sectionDataState;}else if(_this.props.screenName===\"IDS_METHOD\"){dataState=_this.state.methodDataState;}else if(_this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){dataState=_this.state.instrumentCatDataState;}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){dataState=_this.state.containerTypeDataState;}var inputParam={inputData:(_inputData2={},_defineProperty(_inputData2,methodUrl.toLowerCase(),dataItem),_defineProperty(_inputData2,\"userinfo\",_this.props.userInfo),_inputData2),classUrl:\"testmaster\",operation:\"setDefault\",methodUrl:methodUrl,dataState:dataState};var masterData=_this.props.masterData;if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,defaultParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:masterData},openChildModal:true,screenName:\"Test\",operation:defaultParam.operation,selectedRecord:{}}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,masterData,\"openChildModal\",{});}};_this.onSwitchChange=function(item,key,methodUrl,event){var _inputData3;var dataItem=item;// dataItem[\"ndefaultstatus\"] = 3;\ndataItem['ndefaultstatus']=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;var inputParam={inputData:(_inputData3={},_defineProperty(_inputData3,key,dataItem),_defineProperty(_inputData3,\"userinfo\",_this.props.userInfo),_inputData3),classUrl:\"testmaster\",operation:\"setDefault\",methodUrl:methodUrl};_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\",{});};_this.hideValidateFormula=function(){_this.setState({openValidate:false,showCalculate:false,formulaScreenName:\"\",validateFormulaMandyFields:[]});};_this.validateFormula=function(testData){var sformulacalculationcode=_this.state.selectedRecord.sformulacalculationcode;if(sformulacalculationcode){if(sformulacalculationcode.includes(\"$D\")||sformulacalculationcode.includes(\"$P\")){rsapi.post(\"/testmaster/validateTestFormula\",{ntestcode:testData.ntestcode,\"sformula\":sformulacalculationcode,userinfo:_this.props.userInfo}).then(function(response){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[\"formulainput\"]={};var validateFormulaMandyFields=response.data.map(function(item,index){return{\"idsName\":\"IDS_FILLALLFIELDS\",\"dataField\":\"dynamicformulafield_\"+index,\"mandatory\":true};});_this.setState({openValidate:true,DynamicFields:response.data,dynamicField:[],selectedRecord:selectedRecord,formulaScreenName:\"IDS_VALIDATEFORMULA\",showCalculate:true,validateFormulaMandyFields:validateFormulaMandyFields});}).catch(function(error){toast.error(error.message);});}else{var inputParam={dynamicformulafields:[],sformulacalculationcode:_this.state.selectedRecord.sformulacalculationcode,userinfo:_this.props.userInfo};_this.calculateFormulaFunction(inputParam);}}else{toast.info(_this.props.intl.formatMessage({id:\"IDS_ENTERFORMULA\"}));}};_this.calculateFormula=function(){var dynamicField=_this.state.dynamicField;var dynamicformulafields=Object.keys(dynamicField).map(function(keyname){return dynamicField[keyname];});var inputParam={dynamicformulafields:dynamicformulafields,sformulacalculationcode:_this.state.selectedRecord.sformulacalculationcode,userinfo:_this.props.userInfo};_this.calculateFormulaFunction(inputParam);};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"||_this.props.operation===\"Default\"){loadEsign=false;openChildModal=false;selectedRecord={};}else{loadEsign=false;selectedRecord[\"agree\"]=4;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName,caseNo){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(fieldName===\"sparametername\"){selectedRecord[fieldName]=comboData;selectedRecord[\"sparametersynonym\"]=comboData.value;}else{selectedRecord[fieldName]=comboData;}_this.setState({selectedRecord:selectedRecord});break;case 2:var parameterData=_this.props.parameterData;var item=comboData['item'];var needUnit=true;var needRoundingDigit=true;var needCodedResult=true;var needActualResult=true;var npredefinedcode=4;if(item[\"nunitrequired\"]===3){needUnit=false;selectedRecord[\"nunitcode\"]=_this.props.parameterData.defaultUnit;}else{selectedRecord[\"nunitcode\"]=\"\";}if(item[\"nroundingrequired\"]===3){needRoundingDigit=false;}else{selectedRecord[\"nroundingdigits\"]=\"\";}if(item[\"npredefinedrequired\"]===3){needCodedResult=false;npredefinedcode=item[\"npredefinedcode\"];}else{selectedRecord[\"spredefinedname\"]=\"\";}if(item[\"ngraderequired\"]===3){needActualResult=false;selectedRecord[\"ngradecode\"]=_this.props.parameterData.defaultGrade;}else{selectedRecord[\"ngradecode\"]=\"\";}selectedRecord[fieldName]=comboData;var parameterInfo={typeName:DEFAULT_RETURN,data:{selectedRecord:selectedRecord,parameterData:_objectSpread(_objectSpread({},parameterData),{},{needUnit:needUnit,needRoundingDigit:needRoundingDigit,needCodedResult:needCodedResult,needActualResult:needActualResult,npredefinedcode:npredefinedcode})}};_this.props.updateStore(parameterInfo);break;case 3:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcategorycode:comboData.value,nFlag:2,userinfo:_this.props.userInfo},_this.props.formulaData,1,selectedRecord,'/changeTestCatgoryInFormula');break;case 4:selectedRecord[fieldName]=comboData;_this.props.formulaChangeFunction({ntestcode:comboData.value,nFlag:3,userinfo:_this.props.userInfo},_this.props.formulaData,2,selectedRecord,'/changeTestInFormula');break;default:break;}};_this.onEsignInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?3:4;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event,caseNo,optional){var selectedRecord=_this.state.selectedRecord||{};switch(caseNo){case 1:if(event.target.type==='checkbox'){selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else if(event.target.type==='radio'){selectedRecord[event.target.name]=optional;//  selectedRecord[\"sfilename\"]=\"\";\n}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 4:var inputValue=event.target.value;if(/^-?\\d*?\\.?\\d*?$/.test(inputValue)||inputValue===\"\"){selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});break;case 5:if(optional.ndynamicformulafieldcode===FORMULAFIELDTYPE.INTEGER&&optional.sdescription.indexOf('P$')===-1){var value=event.target.value.replace(/[^-^0-9]/g,'');var dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?$/.test(value)){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}else if(value===\"\"){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=value;dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:value};}_this.setState({dynamicField:dynamicField,selectedRecord:selectedRecord});break;}else{var _value=event.target.value.replace(/[^-^0-9.]/g,'');var _dynamicField=_this.state.dynamicField||[];if(/^-?\\d*?\\.?\\d*?$/.test(_value)||_value!==\"\"){if(!selectedRecord['formulainput']){selectedRecord['formulainput']={};}selectedRecord['formulainput'][event.target.name]=_value;_dynamicField[event.target.name]={sparameter:optional.sdescription,svalues:_value};}_this.setState({dynamicField:_dynamicField,selectedRecord:selectedRecord});break;}default:break;}};_this.onNumericInputChange=function(value,name){console.log(\"value:\",value,name);var selectedRecord=_this.state.selectedRecord||{};if(name===\"nroundingdigits\"){var values=value.target.value.replace(/[^-^0-9]/g,'');if(/^-?\\d*?$/.test(values)||values===\"\"){console.log(\"val:\",values);selectedRecord[name]=values;}}else{selectedRecord[name]=value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){var inputParam={};var defaultInput={};var isValidRequest=true;if(_this.props.screenName===\"IDS_PARAMETER\"){inputParam=_this.onSaveParameter(saveType,formRef);defaultInput={nparametertypecode:_this.state.selectedRecord.nparametertypecode,ngradecode:_this.state.selectedRecord.ngradecode,nunitcode:\"\"};}else if(_this.props.screenName===\"IDS_CODEDRESULT\"){inputParam=_this.onSaveCodedResult(saveType,formRef);}else if(_this.props.screenName===\"IDS_SPECIFICATION\"){var selectedRecord=_this.props.selectedRecord;if(selectedRecord[\"sminb\"]||selectedRecord[\"smina\"]||selectedRecord[\"smaxa\"]||selectedRecord[\"smaxa\"]||selectedRecord[\"sminlod\"]||selectedRecord[\"smaxlod\"]||selectedRecord[\"sminloq\"]||selectedRecord[\"smaxloq\"]||selectedRecord[\"sdisregard\"]||selectedRecord[\"sresultvalue\"]){inputParam=_this.onSaveSpecification(saveType,formRef);}else{toast.warn(_this.props.intl.formatMessage({id:\"IDS_ENTERSPECLIMIT\"}));isValidRequest=false;}}else if(_this.props.screenName===\"IDS_FORMULA\"){inputParam=_this.onSaveFormula(saveType,formRef);}else if(_this.props.screenName===\"IDS_TESTFILE\"){inputParam=_this.onSaveTestFile(saveType,formRef);}else if(_this.props.screenName===\"IDS_CONTAINERTYPE\"){inputParam=_this.saveContainerType(saveType,formRef);}else{inputParam=_this.saveTestData(saveType,formRef);}if(isValidRequest){if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\",defaultInput);}}};_this.onSaveParameter=function(saveType,formRef){var storeData=_this.props;var inputData={};var customobject=null;var userInfo=storeData.userInfo;var selectedRecord=_this.state.selectedRecord;var testColumns=[{\"ntestparametercode\":\"int\"},{\"nparametertypecode\":\"input\"},{\"nunitcode\":\"input\"},{\"sparametername\":\"input\"},{\"sparametersynonym\":\"string\"},{\"nroundingdigits\":\"int\"},{\"objPredefinedParameter\":\"customobject\"}];if(storeData.operation===\"create\"){inputData={\"testparameter\":{nisadhocparameter:transactionStatus.NO,nisvisible:transactionStatus.YES,nstatus:transactionStatus.ACTIVE}};}else{inputData={\"testparameter\":{}};}if(selectedRecord[\"nparametertypecode\"]){if(_this.props.parameterData.npredefinedcode===transactionStatus.YES){customobject={};customobject[\"ntestparametercode\"]=selectedRecord[\"ntestparametercode\"];customobject[\"ntestpredefinedcode\"]=selectedRecord[\"ntestpredefinedcode\"];customobject[\"spredefinedname\"]=selectedRecord[\"spredefinedname\"].trim();customobject[\"nstatus\"]=1;customobject[\"ndefaultstatus\"]=transactionStatus.YES;customobject[\"ngradecode\"]=selectedRecord[\"ngradecode\"]?selectedRecord[\"ngradecode\"].value?selectedRecord[\"ngradecode\"].value:-1:-1;}inputData[\"userinfo\"]=userInfo;testColumns.map(function(item){var key=Object.keys(item)[0];var value=Object.values(item)[0];if(value===\"input\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key].value?selectedRecord[key].value:-1:-1;}else if(value===\"int\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key]:0;}else if(value===\"string\"){return inputData[\"testparameter\"][key]=selectedRecord[key]?selectedRecord[key].trim():\"\";}else if(value===\"customobject\"){return inputData[\"testparameter\"][key]=customobject;}else{return null;}});inputData[\"testparameter\"][\"ntestcode\"]=storeData.masterData[\"SelectedTest\"][\"ntestcode\"];}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:storeData.operation,methodUrl:\"TestParameter\",saveType:saveType,formRef:formRef};return inputParam;};_this.onSaveSpecification=function(saveType,formRef){var selectedRecord=_this.props.selectedRecord;var columns=[{\"ntestparametercode\":\"int\"},{\"ntestparamnumericcode\":\"int\"},{\"sminb\":\"string\"},{\"smina\":\"string\"},{\"smaxa\":\"string\"},{\"smaxb\":\"string\"},{\"sminlod\":\"string\"},{\"smaxlod\":\"string\"},{\"sminloq\":\"string\"},{\"smaxloq\":\"string\"},{\"sdisregard\":\"string\"},{\"sresultvalue\":\"string\"}];var inputData={\"testparameternumeric\":{nstatus:1},userinfo:_this.props.userInfo};columns.map(function(item){var key=Object.keys(item)[0];var value=Object.values(item)[0];if(value===\"int\"){return inputData[\"testparameternumeric\"][key]=selectedRecord[key]?selectedRecord[key]:0;}else if(value===\"string\"){return inputData[\"testparameternumeric\"][key]=selectedRecord[key]?selectedRecord[key]===\"0\"?selectedRecord[key]:selectedRecord[key].replace(/^0+/,''):null;}else{return null;}});var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:_this.props.operation,methodUrl:\"TestParameterNumeric\",saveType:saveType,formRef:formRef};return inputParam;};_this.onSaveCodedResult=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var testPredefinedParameter={spredefinedname:selectedRecord[\"spredefinedname\"].trim(),ngradecode:selectedRecord[\"ngradecode\"]?selectedRecord[\"ngradecode\"].value?selectedRecord[\"ngradecode\"].value:-1:-1,ntestparametercode:selectedRecord[\"ntestparametercode\"],ntestpredefinedcode:selectedRecord[\"ntestpredefinedcode\"],nstatus:transactionStatus.ACTIVE,ndefaultstatus:selectedRecord[\"ndefaultstatus\"]//transactionStatus.NO\n};var inputParam={inputData:{testpredefinedparameter:testPredefinedParameter,userinfo:_this.props.userInfo},classUrl:\"testmaster\",operation:_this.props.operation,methodUrl:\"TestPredefinedParameter\",saveType:saveType,formRef:formRef};return inputParam;};_this.onSaveFormula=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var formulafield=[\"sformulaname\",\"sformulacalculationcode\",\"sformulacalculationdetail\"];var selectedParameter=_this.props.masterData.selectedParameter;var testformula={ntestcode:selectedParameter[\"ntestcode\"],ntestparametercode:selectedParameter[\"ntestparametercode\"],ndefaultstatus:transactionStatus.NO,nstatus:transactionStatus.ACTIVE};formulafield.map(function(field){return testformula[field]=selectedRecord[field].trim();});var inputParam={inputData:{testformula:testformula,userinfo:_this.props.userInfo},classUrl:\"testmaster\",operation:\"create\",methodUrl:\"TestFormula\",saveType:saveType,formRef:formRef};return inputParam;};_this.clearFormula=function(){var selectedRecord=_this.state.selectedRecord;selectedRecord[\"sformulacalculationcode\"]=\"\";selectedRecord[\"sformulacalculationdetail\"]=\"\";selectedRecord[\"userinput\"]=\"\";_this.setState({fieldFlag:true,operatorFlag:false,functionFlag:true,selectedRecord:selectedRecord,query:\"\",result:\"\",openValidate:false,sfunctionsyntax:\"\"});};_this.onUserInputs=function(event){var value=event.target.value.replace(/^0+/,'');var selectedRecord=_this.state.selectedRecord||{};if(event.keyCode===13){if(_this.state.fieldFlag){var sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";selectedRecord[\"sformulacalculationcode\"]=\"\".concat(sformulacalculationcode,\"$V\").concat(value,\"V$\");selectedRecord[\"sformulacalculationdetail\"]=\"\".concat(sformulacalculationdetail,\" \").concat(value);selectedRecord[event.target.name]=\"\";_this.setState({fieldFlag:false,functionFlag:false,operatorFlag:true,selectedRecord:selectedRecord});}}};_this.getSyntax=function(event){_this.setState({sfunctionsyntax:event.dataItem.sfunctionsyntax});};_this.onSaveTestFile=function(saveType,formRef){var selectedRecord=_this.state.selectedRecord;var acceptedFiles=selectedRecord.sfilename;var nattachmenttypecode=selectedRecord.nattachmenttypecode;var isFileEdited=transactionStatus.NO;var testFileArray=[];var testFile={ntestcode:_this.props.masterData.SelectedTest.ntestcode,ntestfilecode:selectedRecord.ntestfilecode?selectedRecord.ntestfilecode:0,nstatus:transactionStatus.ACTIVE,nattachmenttypecode:nattachmenttypecode,ndefaultstatus:selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]?selectedRecord[nattachmenttypecode===attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"]:4};var formData=new FormData();if(nattachmenttypecode===attachmentType.FTP){if(acceptedFiles&&Array.isArray(acceptedFiles)&&acceptedFiles.length>0){acceptedFiles.forEach(function(file,index){var tempData=Object.assign({},testFile);var splittedFileName=file.name.split('.');var fileExtension=file.name.split('.')[splittedFileName.length-1];var ssystemfilename=selectedRecord.ssystemfilename?selectedRecord.ssystemfilename.split('.'):\"\";var filesystemfileext=selectedRecord.ssystemfilename?file.name.split('.')[ssystemfilename.length-1]:\"\";var uniquefilename=nattachmenttypecode===attachmentType.FTP?selectedRecord.ntestfilecode&&selectedRecord.ntestfilecode>0&&selectedRecord.ssystemfilename!==\"\"?ssystemfilename[0]+'.'+filesystemfileext:create_UUID()+'.'+fileExtension:\"\";tempData[\"sfilename\"]=file.name;tempData[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";tempData[\"nlinkcode\"]=transactionStatus.NA;tempData[\"ssystemfilename\"]=uniquefilename;tempData[\"nfilesize\"]=file.size;formData.append(\"uploadedFile\"+index,file);formData.append(\"uniquefilename\"+index,uniquefilename);testFileArray.push(tempData);});formData.append(\"filecount\",acceptedFiles.length);isFileEdited=transactionStatus.YES;}else{testFile[\"sfilename\"]=selectedRecord.sfilename;testFile[\"sdescription\"]=selectedRecord.sdescription?selectedRecord.sdescription.trim():\"\";testFile[\"nlinkcode\"]=transactionStatus.NA;testFile[\"ssystemfilename\"]=selectedRecord.ssystemfilename;testFile[\"nfilesize\"]=selectedRecord.nfilesize;testFileArray.push(testFile);}}else{testFile[\"sfilename\"]=selectedRecord.slinkfilename.trim();testFile[\"sdescription\"]=selectedRecord.slinkdescription?selectedRecord.slinkdescription.trim():\"\";testFile[\"nlinkcode\"]=selectedRecord.nlinkcode.value?selectedRecord.nlinkcode.value:-1;testFile[\"ssystemfilename\"]=\"\";testFile[\"nfilesize\"]=0;testFileArray.push(testFile);}formData.append(\"isFileEdited\",isFileEdited);formData.append(\"testfile\",JSON.stringify(testFileArray));// formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\nvar inputParam={inputData:{userinfo:_this.props.userInfo},formData:formData,isFileupload:true,operation:_this.props.operation,classUrl:\"testmaster\",saveType:saveType,formRef:formRef,methodUrl:\"TestFile\"};return inputParam;};_this.onDropTestFile=function(attachedFiles,fieldName,maxSize){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=onDropAttachFileList(selectedRecord[fieldName],attachedFiles,maxSize);_this.setState({selectedRecord:selectedRecord,actionType:\"new\"});};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"]}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};_this.ConfirmDelete=function(item,operation,ncontrolCode,methodUrl,modalName){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.props.deleteAction(item,operation,ncontrolCode,methodUrl,modalName);});};_this.state={selectedRecord:{},fieldFlag:true,operatorFlag:false,functionFlag:true,sectionDataState:{skip:0,take:10},methodDataState:{skip:0,take:10},instrumentCatDataState:{skip:0,take:10},containerTypeDataState:{skip:0,take:10},formulaScreenName:\"\"};_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(TestView,[{key:\"render\",value:function render(){var _this2=this;var SelectedTest=this.props.masterData.SelectedTest;if(this.props.openChildModal||this.state.openValidate){this.mandatoryFields=this.findMandatoryFields(this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.formulaScreenName:this.props.screenName,this.state.selectedRecord,this.state.formulaScreenName);}return/*#__PURE__*/React.createElement(React.Fragment,null,SelectedTest&&/*#__PURE__*/React.createElement(CustomTab,{tabDetail:this.tabDetail(),onTabChange:this.onTabChange}),this.props.openChildModal&&/*#__PURE__*/React.createElement(SlideOutModal,{show:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.openValidate:this.props.openChildModal,size:this.props.screenName===\"IDS_FORMULA\"?'xl':'lg',closeModal:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.hideValidateFormula:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.formulaScreenName:this.props.screenName,esign:this.props.loadEsign,validateEsign:this.validateEsign,onSaveClick:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.calculateFormula:this.onSaveClick,showCalculate:this.state.showCalculate,showSaveContinue:this.props.showSaveContinue,selectedRecord:this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?this.state.selectedRecord['formulainput']:this.state.selectedRecord||{},mandatoryFields:this.mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onEsignInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_PARAMETER\"?/*#__PURE__*/React.createElement(AddParameter,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,onComboChange:this.onComboChange,parameterData:this.props.parameterData}):this.props.screenName===\"IDS_CODEDRESULT\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddCodedResult,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,parameterData:this.props.parameterData})):this.props.screenName===\"IDS_SPECIFICATION\"?/*#__PURE__*/React.createElement(AddSpecification,{selectedRecord:this.props.selectedRecord||{},onInputOnChange:this.onInputOnChange}):this.props.screenName===\"IDS_SECTION\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddTestSection,{selectedRecord:this.state.selectedRecord||{},section:this.props.otherTestData.section,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,isMulti:true})):this.props.screenName===\"IDS_METHOD\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddTestMethod,{selectedRecord:this.state.selectedRecord||{},method:this.props.otherTestData.method,onComboChange:this.onComboChange,isMulti:true})):this.state.formulaScreenName===\"\"&&this.props.screenName===\"IDS_FORMULA\"?/*#__PURE__*/React.createElement(AddFormula,{selectedRecord:this.state.selectedRecord||{},onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,onNumericInputChange:this.onNumericInputChange,onFormulaDrop:this.onFormulaDrop.bind(this),validateFormula:function validateFormula(){return _this2.validateFormula(_this2.props.masterData.selectedParameter,_this2.state.selectedRecord,_this2.props.formulaData);},clearFormula:this.clearFormula,onUserInputs:this.onUserInputs,operators:this.props.formulaData.operators,functions:this.props.formulaData.functions,testCategory:this.props.formulaData.testCategory,testMaster:this.props.formulaData.testMaster,dynamicFormulaFields:this.props.formulaData.dynamicFormulaFields,result:this.state.result?this.state.result:\"\",query:this.state.query?this.state.query:\"\",getSyntax:this.getSyntax,sfunctionsyntax:this.state.sfunctionsyntax}):this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddTestInstrumentCategory,{selectedRecord:this.state.selectedRecord||{},instrumentcategory:this.props.otherTestData.instrumentcategory,onComboChange:this.onComboChange,isMulti:true})):this.props.screenName===\"IDS_CONTAINERTYPE\"?/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(AddTestContainerType,{selectedRecord:this.state.selectedRecord||{},containertype:this.props.otherTestData.containertype,onComboChange:this.onComboChange,onInputOnChange:this.onInputOnChange,isMulti:false})):this.props.screenName===\"IDS_TESTFILE\"?/*#__PURE__*/React.createElement(AddFile,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onDrop:this.onDropTestFile,onDropAccepted:this.onDropAccepted,deleteAttachment:this.deleteAttachment,actionType:this.state.actionType,onComboChange:this.onComboChange,linkMaster:this.props.linkMaster,editFiles:this.props.editFiles,maxSize:20// maxFiles={this.props.operation === \"update\" ? 1 : 3}\n// multiple={this.props.operation === \"update\" ? false : true}\n,maxFiles:1,multiple:false,label:this.props.intl.formatMessage({id:\"IDS_TESTFILE\"}),name:\"testfilename\"}):this.state.formulaScreenName===\"IDS_VALIDATEFORMULA\"?/*#__PURE__*/React.createElement(ValidateFormula,{DynamicFormulaFields:this.state.DynamicFields,selectedRecord:this.state.selectedRecord,onInputOnChange:this.onInputOnChange}):\"\"}));}},{key:\"findMandatoryFields\",value:function findMandatoryFields(screenName,selectedRecord,optional){var mandyFields=[];if(screenName===\"IDS_SECTION\"){mandyFields=[{\"idsName\":\"IDS_SECTION\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_METHOD\"){mandyFields=[{\"idsName\":\"IDS_METHOD\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_INSTRUMENTCATEGORY\"){mandyFields=[{\"idsName\":\"IDS_INSTRUMENTCATEGORY\",\"dataField\":\"availableData\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else if(screenName===\"IDS_FORMULA\"&&optional===\"\"){mandyFields=[{\"idsName\":\"IDS_FORMULANAME\",\"dataField\":\"sformulaname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_FORMULA\",\"dataField\":\"sformulacalculationdetail\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else if(screenName===\"IDS_PARAMETER\"){mandyFields=[{\"idsName\":\"IDS_PARAMETERNAME\",\"dataField\":\"sparametername\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PARAMETERSYNONYM\",\"dataField\":\"sparametersynonym\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_PARAMETERTYPE\",\"dataField\":\"nparametertypecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];if(selectedRecord&&Object.values(selectedRecord).length>0&&selectedRecord[\"nparametertypecode\"]){if(selectedRecord[\"nparametertypecode\"].value===parameterType.NUMERIC){mandyFields.push({\"idsName\":\"IDS_ROUNDINGDIGITS\",\"dataField\":\"nroundingdigits\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_UNIT\",\"dataField\":\"nunitcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else if(selectedRecord[\"nparametertypecode\"].value===parameterType.PREDEFINED){mandyFields.push({\"idsName\":\"IDS_CODEDRESULT\",\"dataField\":\"spredefinedname\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_ACTUALRESULT\",\"dataField\":\"ngradecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}}}else if(screenName===\"IDS_VALIDATEFORMULA\"){mandyFields=this.state.validateFormulaMandyFields;}else if(screenName===\"IDS_TESTFILE\"){if(this.state.selectedRecord&&this.state.selectedRecord.nattachmenttypecode===attachmentType.LINK){mandyFields=[{\"idsName\":\"IDS_FILENAME\",\"dataField\":\"slinkfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"},{\"idsName\":\"IDS_LINKNAME\",\"dataField\":\"nlinkcode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}else{// if (this.props.operation !== 'update') {\nmandyFields=[{\"idsName\":\"IDS_FILE\",\"dataField\":\"sfilename\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_CHOOSE\",\"controlType\":\"file\"}];// }\n}}else if(screenName===\"IDS_CONTAINERTYPE\"){mandyFields=[{\"idsName\":\"IDS_CONTAINERTYPE\",\"dataField\":\"ncontainertypecode\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_QUANTITY\",\"dataField\":\"nquantity\",\"mandatory\":true,\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"}];}else{return[];}var finalMandyFields=[];mandyFields.forEach(function(item){return item.mandatory===true&&finalMandyFields.push(item);});return finalMandyFields;}},{key:\"calculateFormulaFunction\",value:function calculateFormulaFunction(inputParam){var _this3=this;rsapi.post(\"/testmaster/calculateFormula\",_objectSpread({},inputParam)).then(function(response){_this3.setState({openValidate:false,query:response.data[\"Query\"],result:response.data[\"Result\"],showCalculate:false,formulaScreenName:\"\"});}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{//toast.warn(error.response.data);\ntoast.warn(error.response.data[\"Result\"]);}});}},{key:\"saveContainerType\",value:function saveContainerType(saveType,formRef){var inputData={};var methodUrl=\"TestContainerType\";if(this.props.operation==\"create\"){var _inputData4;this.state.selectedRecord['ncontainertypecode']['item']['nquantity']=Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3);this.state.selectedRecord['ncontainertypecode']['item']['noutsourcecode']=parseInt(this.state.selectedRecord.noutsourcecode);inputData=(_inputData4={},_defineProperty(_inputData4,methodUrl.toLocaleLowerCase(),this.state.selectedRecord.ncontainertypecode.item),_defineProperty(_inputData4,\"ntestcontainertypecode\",this.state.selectedRecord.ntestcontainertypecode),_defineProperty(_inputData4,\"ntestcode\",this.state.selectedRecord.ntestcode),_defineProperty(_inputData4,\"userinfo\",this.props.userInfo),_defineProperty(_inputData4,\"testcode\",this.props.masterData.SelectedTest.ntestcode),_inputData4);}else{inputData={ntestcontainertypecode:this.state.selectedRecord.ntestcontainertypecode,ntestcode:this.state.selectedRecord.ntestcode,ncontainertypecode:this.state.selectedRecord.ncontainertypecode.value,nquantity:parseInt(Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3)),noutsourcecode:this.state.selectedRecord.noutsourcecode,userinfo:this.props.userInfo,testcode:this.props.masterData.SelectedTest.ntestcode};}var inputParam={inputData:inputData,classUrl:\"testmaster\",operation:this.props.operation,methodUrl:methodUrl,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"saveTestData\",value:function saveTestData(saveType,formRef){var _inputData5;var availableData=[];this.state.selectedRecord.availableData.map(function(data){return availableData.push(data.item);});var methodUrl=\"\";if(this.props.screenName===\"IDS_SECTION\"){//Test Section\nmethodUrl=\"TestSection\";}else if(this.props.screenName===\"IDS_METHOD\"){//Test Method\nmethodUrl=\"TestMethod\";}else if(this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){//Test Instrument Category\nmethodUrl=\"TestInstrumentCategory\";}else if(this.props.screenName===\"IDS_CONTAINERTYPE\"){//Test Instrument Category\nmethodUrl=\"TestContainerType\";}var inputParam={inputData:(_inputData5={},_defineProperty(_inputData5,methodUrl.toLocaleLowerCase(),availableData),_defineProperty(_inputData5,\"userinfo\",this.props.userInfo),_inputData5),classUrl:\"testmaster\",operation:\"create\",methodUrl:methodUrl,saveType:saveType,formRef:formRef};return inputParam;}},{key:\"onFormulaDrop\",value:function onFormulaDrop(data){var selectedRecord=this.state.selectedRecord;var formulaName=\"\";var formulaCalculationCode=\"\";var fieldFlag=this.state.fieldFlag;var functionFlag=this.state.functionFlag;var operatorFlag=this.state.operatorFlag;var sfunctionsyntax=\"\";var isDropped=false;if(data['testfields']!==\"\"){var testfields=JSON.parse(data['testfields']);if(this.state.fieldFlag){var sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";var sparametername=testfields.sparametername;var ntestparametercode=testfields.ntestparametercode;if(sparametername!==\"Parameter-Field\"&&sparametername!==\"Formula-Field\"&&sparametername!==\"Dynamic-Field\"){if(testfields.isformula===1){formulaName=\"\".concat(sformulacalculationdetail,\" (\").concat(sparametername,\") \");formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$O20O$\").concat(ntestparametercode,\"$O18O$\");}else{formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(sparametername);formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$P\").concat(ntestparametercode,\"P$\");}}else if(sparametername!==\"Formula-Field\"){formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(testfields.stestname);formulaCalculationCode=\"\".concat(sformulacalculationcode,\"$D\").concat(ntestparametercode,\"D$\");}else{formulaName=\"\".concat(sformulacalculationdetail,\" \").concat(testfields.stestname);formulaCalculationCode=\"\".concat(sformulacalculationcode).concat(testfields.sformulacalculationcode);}fieldFlag=false;functionFlag=false;operatorFlag=true;isDropped=true;}}else if(data['operatorfields']!==\"\"){var operatorfields=JSON.parse(data['operatorfields']);var noperatorcode=operatorfields.noperatorcode;var _sformulacalculationdetail=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var _sformulacalculationcode=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";if(this.state.operatorFlag){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");if(noperatorcode===operators.OPENPARENTHESIS){fieldFlag=true;functionFlag=true;operatorFlag=false;}else if(noperatorcode===operators.CLOSEPARENTHESIS){fieldFlag=false;functionFlag=false;operatorFlag=true;}else{fieldFlag=true;functionFlag=true;operatorFlag=false;}isDropped=true;}else if(noperatorcode===operators.OPENPARENTHESIS){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");fieldFlag=true;functionFlag=true;operatorFlag=false;isDropped=true;}else if(noperatorcode===operators.CLOSEPARENTHESIS){formulaName=\"\".concat(_sformulacalculationdetail,\" \").concat(operatorfields.soperator);formulaCalculationCode=\"\".concat(_sformulacalculationcode,\"$O\").concat(noperatorcode,\"O$\");fieldFlag=false;functionFlag=false;operatorFlag=true;isDropped=true;}}else if(data['functionfields']!==\"\"){if(this.state.functionFlag){var functionfields=JSON.parse(data['functionfields']);var _sformulacalculationdetail2=selectedRecord.sformulacalculationdetail?selectedRecord.sformulacalculationdetail:\"\";var _sformulacalculationcode2=selectedRecord.sformulacalculationcode?selectedRecord.sformulacalculationcode:\"\";formulaName=\"\".concat(_sformulacalculationdetail2).concat(functionfields.sfunctionname,\"(\");formulaCalculationCode=\"\".concat(_sformulacalculationcode2,\"$F\").concat(functionfields.nfunctioncode,\"F$$O20O$\");fieldFlag=true;functionFlag=false;operatorFlag=false;sfunctionsyntax=functionfields.sfunctionsyntax;isDropped=true;}}if(isDropped){var sliceFormulaName=formulaName.slice(0,512);if(sliceFormulaName.length<=512){selectedRecord[\"sformulacalculationcode\"]=formulaCalculationCode;selectedRecord[\"sformulacalculationdetail\"]=sliceFormulaName;this.setState({fieldFlag:fieldFlag,functionFlag:functionFlag,operatorFlag:operatorFlag,sfunctionsyntax:sfunctionsyntax,selectedRecord:selectedRecord});}else{selectedRecord[\"sformulacalculationdetail\"]=sliceFormulaName;this.setState({fieldFlag:fieldFlag,functionFlag:functionFlag,operatorFlag:operatorFlag,sfunctionsyntax:sfunctionsyntax,selectedRecord:selectedRecord});}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.isFormulaOpen){this.setState({fieldFlag:true,operatorFlag:false,functionFlag:true});var updateInfo={typeName:DEFAULT_RETURN,data:{isFormulaOpen:false}};this.props.updateStore(updateInfo);}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}if(this.props.masterData!==previousProps.masterData){var _this$state=this.state,sectionDataState=_this$state.sectionDataState,methodDataState=_this$state.methodDataState,instrumentCatDataState=_this$state.instrumentCatDataState,containerTypeDataState=_this$state.containerTypeDataState,selectedRecord=_this$state.selectedRecord;if(this.props.dataState===undefined){if(this.props.screenName===\"IDS_SECTION\"){sectionDataState={skip:0,take:10};}else if(this.props.screenName===\"IDS_METHOD\"){methodDataState={skip:0,take:10};}else if(this.props.screenName===\"IDS_INSTRUMENTCATEGORY\"){instrumentCatDataState={skip:0,take:10};}else if(this.props.screenName===\"IDS_CONTAINERTYPE\"){containerTypeDataState={skip:0,take:10};}else{sectionDataState={skip:0,take:10};methodDataState={skip:0,take:10};instrumentCatDataState={skip:0,take:10};}}this.setState({sectionDataState:sectionDataState,methodDataState:methodDataState,instrumentCatDataState:instrumentCatDataState,containerTypeDataState:containerTypeDataState,selectedRecord:selectedRecord});}}}]);return TestView;}(Component);export default injectIntl(TestView);","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/pages/testmanagement/TestView.jsx"],"names":["React","Component","toast","injectIntl","rsapi","process","Row","SlideOutModal","AddSpecification","AddCodedResult","AddParameter","DEFAULT_RETURN","showEsign","create_UUID","onDropAttachFileList","deleteAttachmentDropZone","Esign","AddTestSection","AddTestMethod","AddTestInstrumentCategory","AddFormula","ValidateFormula","AddFile","parameterType","transactionStatus","operators","attachmentType","FORMULAFIELDTYPE","CustomTab","TestSectionTab","TestMethodTab","TestInstrumentCategoryTab","TestFileTab","AddTestContainerType","TestContainerTypeTab","ParameterTab","ConfirmMessage","ChartLegendTitle","TestView","props","deleteAttachment","event","file","fieldName","selectedRecord","state","setState","actionType","onTabChange","tabProps","screenName","updateInfo","typeName","data","updateStore","tabDetail","tabMap","Map","set","controlMap","userRoleControlRights","masterData","TestParameter","userInfo","getTestDetails","inputParam","addParameter","deleteAction","ConfirmDelete","addCodedResult","addFormula","onSwitchChange","addParameterSpecification","undefined","sectionDataState","skip","take","dataState","SelectedTest","deleteRecord","defaultRecord","getAvailableData","TestSection","methodDataState","TestMethod","TestFile","addTestFile","viewTestFile","settings","instrumentCatDataState","TestInstrumentCategory","containerTypeDataState","Containertype","getActiveTestContainerTypeById","intl","filedata","inputData","testfile","userinfo","classUrl","operation","methodUrl","viewAttachment","deleteParam","selected","toLowerCase","esignRights","nformcode","ncontrolCode","loadEsign","screenData","openChildModal","crudMaster","defaultParam","dataItem","item","key","target","checked","YES","NO","hideValidateFormula","openValidate","showCalculate","formulaScreenName","validateFormulaMandyFields","validateFormula","testData","sformulacalculationcode","includes","post","ntestcode","then","response","map","index","DynamicFields","dynamicField","catch","error","message","dynamicformulafields","calculateFormulaFunction","info","formatMessage","id","calculateFormula","Object","keys","keyname","closeModal","onComboChange","comboData","caseNo","value","parameterData","needUnit","needRoundingDigit","needCodedResult","needActualResult","npredefinedcode","defaultUnit","defaultGrade","parameterInfo","formulaChangeFunction","ntestcategorycode","nFlag","formulaData","onEsignInputOnChange","type","name","onInputOnChange","optional","inputValue","test","ndynamicformulafieldcode","INTEGER","sdescription","indexOf","replace","sparameter","svalues","onNumericInputChange","console","log","values","onSaveClick","saveType","formRef","defaultInput","isValidRequest","onSaveParameter","nparametertypecode","ngradecode","nunitcode","onSaveCodedResult","onSaveSpecification","warn","onSaveFormula","onSaveTestFile","saveContainerType","saveTestData","storeData","customobject","testColumns","nisadhocparameter","nisvisible","nstatus","ACTIVE","trim","columns","testPredefinedParameter","spredefinedname","ntestparametercode","ntestpredefinedcode","ndefaultstatus","testpredefinedparameter","formulafield","selectedParameter","testformula","field","clearFormula","fieldFlag","operatorFlag","functionFlag","query","result","sfunctionsyntax","onUserInputs","keyCode","sformulacalculationdetail","getSyntax","acceptedFiles","sfilename","nattachmenttypecode","isFileEdited","testFileArray","testFile","ntestfilecode","LINK","formData","FormData","FTP","Array","isArray","length","forEach","tempData","assign","splittedFileName","split","fileExtension","ssystemfilename","filesystemfileext","uniquefilename","NA","size","append","push","nfilesize","slinkfilename","slinkdescription","nlinkcode","JSON","stringify","isFileupload","onDropTestFile","attachedFiles","maxSize","validateEsign","sreason","password","validateEsignCredential","modalName","confirmMessage","confirm","mandatoryFields","findMandatoryFields","showSaveContinue","otherTestData","section","method","onFormulaDrop","bind","functions","testCategory","testMaster","dynamicFormulaFields","instrumentcategory","containertype","onDropAccepted","linkMaster","editFiles","mandyFields","NUMERIC","PREDEFINED","finalMandyFields","mandatory","status","Number","parseFloat","nquantity","toFixed","parseInt","noutsourcecode","toLocaleLowerCase","ncontainertypecode","ntestcontainertypecode","testcode","availableData","formulaName","formulaCalculationCode","isDropped","testfields","parse","sparametername","isformula","stestname","operatorfields","noperatorcode","soperator","OPENPARENTHESIS","CLOSEPARENTHESIS","functionfields","sfunctionname","nfunctioncode","sliceFormulaName","slice","previousProps","isFormulaOpen"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { injectIntl } from 'react-intl';\r\nimport rsapi from '../../rsapi';\r\nimport { process } from '@progress/kendo-data-query';\r\nimport { Row } from 'react-bootstrap';\r\nimport '../../assets/styles/lims-global-theme.css';\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddSpecification from './AddSpecification';\r\nimport AddCodedResult from './AddCodedResult';\r\nimport AddParameter from './AddParameter';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport { showEsign, create_UUID, onDropAttachFileList, deleteAttachmentDropZone } from '../../components/CommonScript';\r\nimport Esign from '../audittrail/Esign';\r\nimport AddTestSection from './AddTestSection';\r\nimport AddTestMethod from './AddTestMethod';\r\nimport AddTestInstrumentCategory from './AddTestInstrumentCategory';\r\nimport AddFormula from './AddFormula';\r\nimport ValidateFormula from './ValidateFormula';\r\nimport AddFile from './AddFile';\r\nimport { parameterType, transactionStatus, operators, attachmentType, FORMULAFIELDTYPE } from '../../components/Enumeration';\r\nimport CustomTab from '../../components/custom-tabs/custom-tabs.component'\r\nimport TestSectionTab from './TestSectionTab';\r\nimport TestMethodTab from './TestMethodTab';\r\nimport TestInstrumentCategoryTab from './TestInstrumentCategoryTab';\r\nimport TestFileTab from './TestFileTab';\r\nimport AddTestContainerType from './AddTestContainerType';\r\nimport TestContainerTypeTab from './TestContainerTypeTab';\r\nimport ParameterTab from './ParameterTab';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport { ChartLegendTitle } from '@progress/kendo-react-charts';\r\nclass TestView extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            selectedRecord: {},\r\n            fieldFlag: true,\r\n            operatorFlag: false,\r\n            functionFlag: true,\r\n            sectionDataState: { skip: 0, take: 10 },\r\n            methodDataState: { skip: 0, take: 10 },\r\n            instrumentCatDataState: { skip: 0, take: 10 },\r\n            containerTypeDataState:{ skip: 0, take: 10 },\r\n            formulaScreenName: \"\"\r\n        });\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }\r\n\r\n    render() {\r\n        const { SelectedTest } = this.props.masterData;\r\n        if (this.props.openChildModal || this.state.openValidate) {\r\n            this.mandatoryFields = this.findMandatoryFields(this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.formulaScreenName :\r\n                this.props.screenName, this.state.selectedRecord, this.state.formulaScreenName)\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {SelectedTest && <CustomTab tabDetail={this.tabDetail()} onTabChange={this.onTabChange} />}\r\n\r\n                {this.props.openChildModal &&\r\n                    <SlideOutModal\r\n                        show={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.openValidate : this.props.openChildModal}\r\n                        size={this.props.screenName === \"IDS_FORMULA\" ? 'xl' : 'lg'}\r\n                        closeModal={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.hideValidateFormula : this.closeModal}\r\n                        operation={this.props.operation}\r\n                        inputParam={this.props.inputParam}\r\n                        screenName={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.formulaScreenName : this.props.screenName}\r\n                        esign={this.props.loadEsign}\r\n                        validateEsign={this.validateEsign}\r\n                        onSaveClick={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.calculateFormula : this.onSaveClick}\r\n                        showCalculate={this.state.showCalculate}\r\n                        showSaveContinue={this.props.showSaveContinue}\r\n                        selectedRecord={this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ? this.state.selectedRecord['formulainput'] : this.state.selectedRecord || {}}\r\n                        mandatoryFields={this.mandatoryFields}\r\n                        addComponent={this.props.loadEsign ?\r\n                            <Esign\r\n                                operation={this.props.operation}\r\n                                onInputOnChange={this.onEsignInputOnChange}\r\n                                inputParam={this.props.inputParam}\r\n                                selectedRecord={this.state.selectedRecord || {}}\r\n                            /> : this.props.screenName === \"IDS_PARAMETER\" ?\r\n                                <AddParameter\r\n                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                    onInputOnChange={this.onInputOnChange}\r\n                                    onNumericInputChange={this.onNumericInputChange}\r\n                                    onComboChange={this.onComboChange}\r\n                                    parameterData={this.props.parameterData}\r\n                                />\r\n                                : this.props.screenName === \"IDS_CODEDRESULT\" ?\r\n                                    <Row>\r\n                                        <AddCodedResult\r\n                                            selectedRecord={this.state.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                            onComboChange={this.onComboChange}\r\n                                            parameterData={this.props.parameterData}\r\n                                        />\r\n                                    </Row>\r\n                                    : this.props.screenName === \"IDS_SPECIFICATION\" ?\r\n                                        <AddSpecification\r\n                                            selectedRecord={this.props.selectedRecord || {}}\r\n                                            onInputOnChange={this.onInputOnChange}\r\n                                        />\r\n                                        : this.props.screenName === \"IDS_SECTION\" ?\r\n                                            <Row>\r\n                                                <AddTestSection\r\n                                                    selectedRecord={this.state.selectedRecord || {}}\r\n                                                    section={this.props.otherTestData.section}\r\n                                                    onComboChange={this.onComboChange}\r\n                                                    onInputOnChange={this.onInputOnChange}\r\n                                                    isMulti={true}\r\n                                                />\r\n                                            </Row>\r\n                                            : this.props.screenName === \"IDS_METHOD\" ?\r\n                                                <Row>\r\n                                                    <AddTestMethod\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        method={this.props.otherTestData.method}\r\n                                                        onComboChange={this.onComboChange}\r\n                                                        isMulti={true}\r\n                                                    />\r\n                                                </Row>\r\n                                                : this.state.formulaScreenName === \"\" && this.props.screenName === \"IDS_FORMULA\" ?\r\n                                                    <AddFormula\r\n                                                        selectedRecord={this.state.selectedRecord || {}}\r\n                                                        onComboChange={this.onComboChange}\r\n                                                        onInputOnChange={this.onInputOnChange}\r\n                                                        onNumericInputChange={this.onNumericInputChange}\r\n                                                        onFormulaDrop={this.onFormulaDrop.bind(this)}\r\n                                                        validateFormula={() => this.validateFormula(this.props.masterData.selectedParameter, this.state.selectedRecord, this.props.formulaData)}\r\n                                                        clearFormula={this.clearFormula}\r\n                                                        onUserInputs={this.onUserInputs}\r\n                                                        operators={this.props.formulaData.operators}\r\n                                                        functions={this.props.formulaData.functions}\r\n                                                        testCategory={this.props.formulaData.testCategory}\r\n                                                        testMaster={this.props.formulaData.testMaster}\r\n                                                        dynamicFormulaFields={this.props.formulaData.dynamicFormulaFields}\r\n                                                        result={this.state.result ? this.state.result : \"\"}\r\n                                                        query={this.state.query ? this.state.query : \"\"}\r\n                                                        getSyntax={this.getSyntax}\r\n                                                        sfunctionsyntax={this.state.sfunctionsyntax}\r\n                                                    />\r\n                                                    : this.props.screenName === \"IDS_INSTRUMENTCATEGORY\" ?\r\n                                                        <Row>\r\n                                                            <AddTestInstrumentCategory\r\n                                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                                instrumentcategory={this.props.otherTestData.instrumentcategory}\r\n                                                                onComboChange={this.onComboChange}\r\n                                                                isMulti={true}\r\n                                                            />\r\n                                                        </Row>\r\n                                                        : this.props.screenName === \"IDS_CONTAINERTYPE\" ?\r\n                                                        <Row>\r\n                                                            <AddTestContainerType\r\n                                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                                containertype={this.props.otherTestData.containertype}\r\n                                                                onComboChange={this.onComboChange}\r\n                                                                onInputOnChange={this.onInputOnChange}\r\n                                                                isMulti={false}\r\n                                                            />\r\n                                                        </Row>\r\n                                                        : this.props.screenName === \"IDS_TESTFILE\" ?\r\n                                                            <AddFile\r\n                                                                selectedRecord={this.state.selectedRecord || {}}\r\n                                                                onInputOnChange={this.onInputOnChange}\r\n                                                                onDrop={this.onDropTestFile}\r\n                                                                onDropAccepted={this.onDropAccepted}\r\n                                                                deleteAttachment={this.deleteAttachment}\r\n                                                                actionType={this.state.actionType}\r\n                                                                onComboChange={this.onComboChange}\r\n                                                                linkMaster={this.props.linkMaster}\r\n                                                                editFiles={this.props.editFiles}\r\n                                                                maxSize={20}\r\n                                                                // maxFiles={this.props.operation === \"update\" ? 1 : 3}\r\n                                                                // multiple={this.props.operation === \"update\" ? false : true}\r\n                                                                maxFiles={1 }\r\n                                                                multiple={false}\r\n                                                                label={this.props.intl.formatMessage({ id: \"IDS_TESTFILE\" })}\r\n                                                                name=\"testfilename\"\r\n                                                            />\r\n                                                            : this.state.formulaScreenName === \"IDS_VALIDATEFORMULA\" ?\r\n                                                                <ValidateFormula\r\n                                                                    DynamicFormulaFields={this.state.DynamicFields}\r\n                                                                    selectedRecord={this.state.selectedRecord}\r\n                                                                    onInputOnChange={this.onInputOnChange}\r\n                                                                />\r\n                                                                : \"\"\r\n                        }\r\n                    />\r\n                }\r\n            </>\r\n        );\r\n    }\r\n\r\n\r\n\r\n    deleteAttachment = (event, file, fieldName) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = deleteAttachmentDropZone(selectedRecord[fieldName], file)\r\n\r\n        this.setState({\r\n            selectedRecord, actionType: \"delete\" //fileToDelete:file.name \r\n        });\r\n    }\r\n\r\n\r\n\r\n    findMandatoryFields(screenName, selectedRecord, optional) {\r\n        let mandyFields = [];\r\n        if (screenName === \"IDS_SECTION\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_SECTION\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_METHOD\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_METHOD\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_INSTRUMENTCATEGORY\", \"dataField\": \"availableData\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_FORMULA\" && optional === \"\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_FORMULANAME\", \"dataField\": \"sformulaname\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_FORMULA\", \"dataField\": \"sformulacalculationdetail\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" }\r\n            ]\r\n        } else if (screenName === \"IDS_PARAMETER\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_PARAMETERNAME\", \"dataField\": \"sparametername\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_PARAMETERSYNONYM\", \"dataField\": \"sparametersynonym\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\"},\r\n                { \"idsName\": \"IDS_PARAMETERTYPE\", \"dataField\": \"nparametertypecode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n            ]\r\n            if (selectedRecord && Object.values(selectedRecord).length > 0 && selectedRecord[\"nparametertypecode\"]) {\r\n                if (selectedRecord[\"nparametertypecode\"].value === parameterType.NUMERIC) {\r\n                    mandyFields.push(\r\n                        { \"idsName\": \"IDS_ROUNDINGDIGITS\", \"dataField\": \"nroundingdigits\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                        { \"idsName\": \"IDS_UNIT\", \"dataField\": \"nunitcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                    );\r\n                } else if (selectedRecord[\"nparametertypecode\"].value === parameterType.PREDEFINED) {\r\n                    mandyFields.push(\r\n                        { \"idsName\": \"IDS_CODEDRESULT\", \"dataField\": \"spredefinedname\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                        { \"idsName\": \"IDS_ACTUALRESULT\", \"dataField\": \"ngradecode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                    );\r\n                }\r\n            }\r\n        } else if (screenName === \"IDS_VALIDATEFORMULA\") {\r\n            mandyFields = this.state.validateFormulaMandyFields;\r\n        } else if (screenName === \"IDS_TESTFILE\") {\r\n            if (this.state.selectedRecord && this.state.selectedRecord.nattachmenttypecode === attachmentType.LINK) {\r\n                mandyFields = [\r\n                    { \"idsName\": \"IDS_FILENAME\", \"dataField\": \"slinkfilename\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\" },\r\n                    { \"idsName\": \"IDS_LINKNAME\", \"dataField\": \"nlinkcode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n                ];\r\n            } else {\r\n                // if (this.props.operation !== 'update') {\r\n                mandyFields = [\r\n                    { \"idsName\": \"IDS_FILE\", \"dataField\": \"sfilename\", \"mandatory\": true , \"mandatoryLabel\":\"IDS_CHOOSE\", \"controlType\": \"file\"},\r\n                ];\r\n                // }\r\n            }\r\n        } \r\n        else if (screenName === \"IDS_CONTAINERTYPE\") {\r\n            mandyFields = [\r\n                { \"idsName\": \"IDS_CONTAINERTYPE\", \"dataField\": \"ncontainertypecode\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\" },\r\n                { \"idsName\": \"IDS_QUANTITY\", \"dataField\": \"nquantity\", \"mandatory\": true, \"mandatoryLabel\":\"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n\r\n            ]\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n        let finalMandyFields = [];\r\n        mandyFields.forEach(item => item.mandatory === true && finalMandyFields.push(item));\r\n        return finalMandyFields;\r\n    }\r\n\r\n    onTabChange = (tabProps) => {\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { screenName }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    tabDetail = () => {\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_PARAMETER\",\r\n            <ParameterTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                TestParameter={this.props.masterData.TestParameter}\r\n                masterData={this.props.masterData}\r\n                userInfo={this.props.userInfo}\r\n                getTestDetails={this.props.getTestDetails}\r\n                inputParam={this.props.inputParam}\r\n                addParameter={this.props.addParameter}\r\n                deleteAction={this.props.deleteAction}\r\n                ConfirmDelete={this.ConfirmDelete}\r\n                addCodedResult={this.props.addCodedResult}\r\n                addFormula={this.props.addFormula}\r\n                onSwitchChange={this.onSwitchChange}\r\n                addParameterSpecification={this.props.addParameterSpecification}\r\n                screenName=\"IDS_PARAMETER\"\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_SECTION\",\r\n            <TestSectionTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestSection\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? this.state.sectionDataState : { skip: 0, take: 10 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_SECTION\") ? this.state.sectionDataState : { skip: 0, take: 10 }}\r\n                dataStateChange={(event) => this.setState({ sectionDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestSection={this.props.masterData.TestSection || []}\r\n                screenName=\"IDS_SECTION\"\r\n            />);\r\n        tabMap.set(\"IDS_METHOD\",\r\n            <TestMethodTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestMethod\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_METHOD\") ? this.state.methodDataState : { skip: 0, take: 10 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_METHOD\") ? this.state.methodDataState : { skip: 0, take: 10 }}\r\n                dataStateChange={(event) => this.setState({ methodDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestMethod={this.props.masterData.TestMethod || []}\r\n                screenName=\"IDS_METHOD\"\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_FILE\",\r\n            <TestFileTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                TestFile={this.props.masterData.TestFile || []}\r\n                getAvailableData={this.props.getAvailableData}\r\n                addTestFile={this.props.addTestFile}\r\n                viewTestFile={this.viewTestFile}\r\n                defaultRecord={this.defaultRecord}\r\n                screenName=\"IDS_FILE\"\r\n                settings = {this.props.settings}\r\n            />);\r\n        tabMap.set(\"IDS_INSTRUMENTCATEGORY\",\r\n            <TestInstrumentCategoryTab\r\n                controlMap={this.props.controlMap}\r\n                userRoleControlRights={this.props.userRoleControlRights}\r\n                dataResult={process(this.props.masterData[\"TestInstrumentCategory\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") ? this.state.instrumentCatDataState : { skip: 0, take: 10 })}\r\n                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") ? this.state.instrumentCatDataState : { skip: 0, take: 10 }}\r\n                dataStateChange={(event) => this.setState({ instrumentCatDataState: event.dataState })}\r\n                selectedTest={this.props.masterData.SelectedTest}\r\n                userInfo={this.props.userInfo}\r\n                inputParam={this.props.inputParam}\r\n                deleteRecord={this.deleteRecord}\r\n                defaultRecord={this.defaultRecord}\r\n                getAvailableData={this.props.getAvailableData}\r\n                TestInstrumentCategory={this.props.masterData.TestInstrumentCategory}\r\n                screenName=\"IDS_INSTRUMENTCATEGORY\"\r\n            />\r\n        );\r\n        tabMap.set(\"IDS_CONTAINERTYPE\",\r\n        <TestContainerTypeTab\r\n            controlMap={this.props.controlMap}\r\n            userRoleControlRights={this.props.userRoleControlRights}\r\n            dataResult={process(this.props.masterData[\"Containertype\"], (this.props.screenName === undefined || this.props.screenName === \"IDS_CONTAINERTYPE\") ? this.state.containerTypeDataState : { skip: 0, take: 10 })}\r\n            dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_CONTAINERTYPE\") ? this.state.containerTypeDataState : { skip: 0, take: 10 }}\r\n            dataStateChange={(event) => this.setState({ containerTypeDataState: event.dataState })}\r\n            selectedTest={this.props.masterData.SelectedTest}\r\n            userInfo={this.props.userInfo}\r\n            inputParam={this.props.inputParam}\r\n            deleteRecord={this.deleteRecord}\r\n            defaultRecord={this.defaultRecord}\r\n            getAvailableData={this.props.getAvailableData}\r\n            TestContainerType={this.props.masterData.Containertype}\r\n            getActiveTestContainerTypeById={this.props.getActiveTestContainerTypeById}\r\n            intl={this.props.intl}\r\n            screenName=\"IDS_CONTAINERTYPE\"\r\n        />\r\n    );\r\n\r\n        return tabMap;\r\n    }\r\n\r\n    viewTestFile = (filedata) => {\r\n        const inputParam = {\r\n            inputData: {\r\n                testfile: filedata,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"view\",\r\n            methodUrl: \"AttachedTestFile\",\r\n            screenName: \"IDS_TEST\"\r\n        }\r\n        this.props.viewAttachment(inputParam);\r\n    }\r\n\r\n    deleteRecord = (deleteParam) => {\r\n        const methodUrl = deleteParam.methodUrl;\r\n        const selected = deleteParam.selectedRecord;\r\n        let dataState = undefined;\r\n        if (this.props.screenName === \"IDS_SECTION\") {\r\n            dataState = this.state.sectionDataState;\r\n        } else if (this.props.screenName === \"IDS_METHOD\") {\r\n            dataState = this.state.methodDataState;\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            dataState = this.state.instrumentCatDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            dataState = this.state.containerTypeDataState;\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: selected,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: deleteParam.operation,\r\n            methodUrl: methodUrl,\r\n            screenName: \"IDS_TEST\", dataState\r\n        }\r\n        const masterData = this.props.masterData;\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"IDS_TEST\", operation: deleteParam.operation, selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n    }\r\n\r\n    defaultRecord = (defaultParam, event) => {\r\n        const methodUrl = defaultParam.methodUrl;\r\n        let dataItem = defaultParam.selectedRecord;\r\n        // dataItem[\"ndefaultstatus\"] = transactionStatus.YES;\r\n        let dataState = undefined;\r\n        if (this.props.screenName === \"IDS_SECTION\") {\r\n            dataState = this.state.sectionDataState;\r\n        } else if (this.props.screenName === \"IDS_METHOD\") {\r\n            dataState = this.state.methodDataState;\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n            dataState = this.state.instrumentCatDataState;\r\n        }\r\n        else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            dataState = this.state.containerTypeDataState;\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLowerCase()]: dataItem,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"setDefault\",\r\n            methodUrl: methodUrl, dataState\r\n        }\r\n        const masterData = this.props.masterData;\r\n        if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, defaultParam.ncontrolCode)) {\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign: true, screenData: { inputParam, masterData },\r\n                    openChildModal: true, screenName: \"Test\", operation: defaultParam.operation, selectedRecord: {}\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        } else {\r\n            this.props.crudMaster(inputParam, masterData, \"openChildModal\", {});\r\n        }\r\n    }\r\n\r\n    onSwitchChange = (item, key, methodUrl,event) => {\r\n        let dataItem = item;\r\n        // dataItem[\"ndefaultstatus\"] = 3;\r\n        dataItem['ndefaultstatus'] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        const inputParam = {\r\n            inputData: {\r\n                [key]: dataItem,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"setDefault\",\r\n            methodUrl: methodUrl\r\n        }\r\n        this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\", {});\r\n    }\r\n\r\n    hideValidateFormula = () => {\r\n        this.setState({ openValidate: false, showCalculate: false, formulaScreenName: \"\", validateFormulaMandyFields: [] });\r\n    }\r\n\r\n    validateFormula = (testData) => {\r\n        const sformulacalculationcode = this.state.selectedRecord.sformulacalculationcode;\r\n        if (sformulacalculationcode) {\r\n            if (sformulacalculationcode.includes(\"$D\") || sformulacalculationcode.includes(\"$P\")) {\r\n                rsapi.post(\"/testmaster/validateTestFormula\", { ntestcode: testData.ntestcode, \"sformula\": sformulacalculationcode, userinfo: this.props.userInfo })\r\n                    .then(response => {\r\n                        let selectedRecord = this.state.selectedRecord || {};\r\n                        selectedRecord[\"formulainput\"] = {};\r\n                        const validateFormulaMandyFields = response.data.map((item, index) => {\r\n                            return { \"idsName\": \"IDS_FILLALLFIELDS\", \"dataField\": \"dynamicformulafield_\" + index, \"mandatory\": true }\r\n                        });\r\n                        this.setState({\r\n                            openValidate: true,\r\n                            DynamicFields: response.data,\r\n                            dynamicField: [],\r\n                            selectedRecord,\r\n                            formulaScreenName: \"IDS_VALIDATEFORMULA\",\r\n                            showCalculate: true, validateFormulaMandyFields\r\n                        });\r\n                    })\r\n                    .catch(error => {\r\n                        toast.error(error.message)\r\n                    });\r\n            } else {\r\n                const inputParam = {\r\n                    dynamicformulafields: [],\r\n                    sformulacalculationcode: this.state.selectedRecord.sformulacalculationcode,\r\n                    userinfo: this.props.userInfo\r\n                }\r\n                this.calculateFormulaFunction(inputParam);\r\n            }\r\n        } else {\r\n            toast.info(this.props.intl.formatMessage({ id: \"IDS_ENTERFORMULA\" }))\r\n        }\r\n    }\r\n\r\n    calculateFormulaFunction(inputParam) {\r\n        rsapi.post(\"/testmaster/calculateFormula\", {\r\n            ...inputParam\r\n        })\r\n            .then(response => {\r\n                this.setState({\r\n                    openValidate: false,\r\n                    query: response.data[\"Query\"],\r\n                    result: response.data[\"Result\"],\r\n                    showCalculate: false, formulaScreenName: \"\"\r\n                })\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    //toast.warn(error.response.data);\r\n                    toast.warn(error.response.data[\"Result\"]);\r\n                }\r\n            });\r\n    }\r\n\r\n    calculateFormula = () => {\r\n        const dynamicField = this.state.dynamicField;\r\n        const dynamicformulafields = Object.keys(dynamicField).map((keyname) => {\r\n            return dynamicField[keyname];\r\n        });\r\n        const inputParam = {\r\n            dynamicformulafields: dynamicformulafields,\r\n            sformulacalculationcode: this.state.selectedRecord.sformulacalculationcode,\r\n            userinfo: this.props.userInfo\r\n        }\r\n        this.calculateFormulaFunction(inputParam);\r\n    }\r\n\r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign) {\r\n            if (this.props.operation === \"delete\" || this.props.operation === \"Default\") {\r\n                loadEsign = false;\r\n                openChildModal = false;\r\n                selectedRecord = {};\r\n            } else {\r\n                loadEsign = false;\r\n                selectedRecord[\"agree\"] = 4;\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n            }\r\n        } else {\r\n            openChildModal = false;\r\n            selectedRecord = {};\r\n        }\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: { openChildModal, loadEsign, selectedRecord }\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n\r\n    onComboChange = (comboData, fieldName, caseNo) => {\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        switch (caseNo) {\r\n            case 1:\r\n                if (fieldName === \"sparametername\") {\r\n                    selectedRecord[fieldName] = comboData;\r\n                    selectedRecord[\"sparametersynonym\"] = comboData.value;\r\n                } else {\r\n                    selectedRecord[fieldName] = comboData;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 2:\r\n                const parameterData = this.props.parameterData;\r\n                let item = comboData['item'];\r\n                let needUnit = true;\r\n                let needRoundingDigit = true;\r\n                let needCodedResult = true;\r\n                let needActualResult = true;\r\n                let npredefinedcode = 4;\r\n                if (item[\"nunitrequired\"] === 3) {\r\n                    needUnit = false;\r\n                    selectedRecord[\"nunitcode\"] = this.props.parameterData.defaultUnit;\r\n                } else {\r\n                    selectedRecord[\"nunitcode\"] = \"\";\r\n                }\r\n                if (item[\"nroundingrequired\"] === 3) {\r\n                    needRoundingDigit = false;\r\n                } else {\r\n                    selectedRecord[\"nroundingdigits\"] = \"\";\r\n                }\r\n                if (item[\"npredefinedrequired\"] === 3) {\r\n                    needCodedResult = false;\r\n                    npredefinedcode = item[\"npredefinedcode\"];\r\n                } else {\r\n                    selectedRecord[\"spredefinedname\"] = \"\";\r\n                }\r\n                if (item[\"ngraderequired\"] === 3) {\r\n                    needActualResult = false;\r\n                    selectedRecord[\"ngradecode\"] = this.props.parameterData.defaultGrade;\r\n                } else {\r\n                    selectedRecord[\"ngradecode\"] = \"\";\r\n                }\r\n                selectedRecord[fieldName] = comboData;\r\n                const parameterInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: { selectedRecord, parameterData: { ...parameterData, needUnit, needRoundingDigit, needCodedResult, needActualResult, npredefinedcode } }\r\n                }\r\n                this.props.updateStore(parameterInfo);\r\n                break;\r\n\r\n            case 3:\r\n                selectedRecord[fieldName] = comboData;\r\n                this.props.formulaChangeFunction({ ntestcategorycode: comboData.value, nFlag: 2, userinfo: this.props.userInfo }, this.props.formulaData, 1, selectedRecord, '/changeTestCatgoryInFormula');\r\n                break;\r\n\r\n            case 4:\r\n                selectedRecord[fieldName] = comboData;\r\n                this.props.formulaChangeFunction({ ntestcode: comboData.value, nFlag: 3, userinfo: this.props.userInfo }, this.props.formulaData, 2, selectedRecord, '/changeTestInFormula');\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onEsignInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (event.target.type === 'checkbox') {\r\n            selectedRecord[event.target.name] = event.target.checked === true ? 3 : 4;\r\n        } else {\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onInputOnChange = (event, caseNo, optional) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        switch (caseNo) {\r\n            case 1:\r\n                if (event.target.type === 'checkbox') {\r\n                    selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n                } else if (event.target.type === 'radio') {\r\n                    selectedRecord[event.target.name] = optional;\r\n                  //  selectedRecord[\"sfilename\"]=\"\";\r\n                } else {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 4:\r\n                const inputValue = event.target.value;\r\n                if (/^-?\\d*?\\.?\\d*?$/.test(inputValue) || inputValue === \"\") {\r\n                    selectedRecord[event.target.name] = event.target.value;\r\n                }\r\n                this.setState({ selectedRecord });\r\n                break;\r\n\r\n            case 5:\r\n                if(optional.ndynamicformulafieldcode === FORMULAFIELDTYPE.INTEGER && optional.sdescription.indexOf('P$') === -1){\r\n                        const value = event.target.value.replace(/[^-^0-9]/g, '');\r\n                        const dynamicField = this.state.dynamicField || [];\r\n                        if ((/^-?\\d*?$/.test(value))) {\r\n                            if (!selectedRecord['formulainput']) {\r\n                                selectedRecord['formulainput'] = {};\r\n                            }\r\n                            selectedRecord['formulainput'][event.target.name] = value;\r\n                            dynamicField[event.target.name] = {\r\n                                sparameter: optional.sdescription,\r\n                                svalues: value\r\n                            };\r\n                        }else if(value === \"\"){\r\n                            if (!selectedRecord['formulainput']) {\r\n                                selectedRecord['formulainput'] = {};\r\n                            }\r\n                            selectedRecord['formulainput'][event.target.name] = value;\r\n                            dynamicField[event.target.name] = {\r\n                                sparameter: optional.sdescription,\r\n                                svalues: value\r\n                            };\r\n                        }\r\n                        this.setState({ dynamicField, selectedRecord });\r\n                        break;\r\n                }else{\r\n                    const value = event.target.value.replace(/[^-^0-9.]/g, '');\r\n                    const dynamicField = this.state.dynamicField || [];\r\n                    if ((/^-?\\d*?\\.?\\d*?$/.test(value)) || value !== \"\") {\r\n                        if (!selectedRecord['formulainput']) {\r\n                            selectedRecord['formulainput'] = {};\r\n                        }\r\n                        selectedRecord['formulainput'][event.target.name] = value;\r\n                        dynamicField[event.target.name] = {\r\n                            sparameter: optional.sdescription,\r\n                            svalues: value\r\n                        };\r\n                    }\r\n                    this.setState({ dynamicField, selectedRecord });\r\n                    break;\r\n                }\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    // onNumericInputChange = (value, name) => {\r\n    //     const selectedRecord = this.state.selectedRecord || {};\r\n    //     selectedRecord[name] = value;\r\n    //     this.setState({ selectedRecord });\r\n    // }\r\n\r\n    onNumericInputChange = (value, name) => {\r\n        console.log(\"value:\", value, name);\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        if (name === \"nroundingdigits\") {\r\n            const values = value.target.value.replace(/[^-^0-9]/g, '');\r\n            if (/^-?\\d*?$/.test(values) || values === \"\") {\r\n                console.log(\"val:\", values);\r\n                selectedRecord[name] = values;\r\n            }\r\n        }\r\n        else {\r\n            selectedRecord[name] = value;\r\n        }\r\n\r\n        this.setState({ selectedRecord });\r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n        let inputParam = {};\r\n        let defaultInput = {};\r\n        let isValidRequest = true;\r\n        if (this.props.screenName === \"IDS_PARAMETER\") {\r\n            inputParam = this.onSaveParameter(saveType, formRef);\r\n            defaultInput = {\r\n                nparametertypecode: this.state.selectedRecord.nparametertypecode,\r\n                ngradecode: this.state.selectedRecord.ngradecode,\r\n                nunitcode: \"\"\r\n            };\r\n        } else if (this.props.screenName === \"IDS_CODEDRESULT\") {\r\n            inputParam = this.onSaveCodedResult(saveType, formRef);\r\n        } else if (this.props.screenName === \"IDS_SPECIFICATION\") {\r\n            const selectedRecord = this.props.selectedRecord;\r\n            if (selectedRecord[\"sminb\"] || selectedRecord[\"smina\"] || selectedRecord[\"smaxa\"] || selectedRecord[\"smaxa\"]\r\n                || selectedRecord[\"sminlod\"] || selectedRecord[\"smaxlod\"] || selectedRecord[\"sminloq\"] || selectedRecord[\"smaxloq\"]\r\n                || selectedRecord[\"sdisregard\"] || selectedRecord[\"sresultvalue\"]) {\r\n                inputParam = this.onSaveSpecification(saveType, formRef);\r\n            } else {\r\n                toast.warn(this.props.intl.formatMessage({ id: \"IDS_ENTERSPECLIMIT\" }));\r\n                isValidRequest = false;\r\n            }\r\n        } else if (this.props.screenName === \"IDS_FORMULA\") {\r\n            inputParam = this.onSaveFormula(saveType, formRef);\r\n        } else if (this.props.screenName === \"IDS_TESTFILE\") {\r\n            inputParam = this.onSaveTestFile(saveType, formRef);\r\n        }else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n            inputParam = this.saveContainerType(saveType, formRef);\r\n        } \r\n         else {\r\n            inputParam = this.saveTestData(saveType, formRef);\r\n        }\r\n        if (isValidRequest) {\r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)) {\r\n                const updateInfo = {\r\n                    typeName: DEFAULT_RETURN,\r\n                    data: {\r\n                        loadEsign: true, screenData: { inputParam, masterData: this.props.masterData }, saveType\r\n                    }\r\n                }\r\n                this.props.updateStore(updateInfo);\r\n            }\r\n            else {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\", defaultInput);\r\n            }\r\n        }\r\n    }\r\n    saveContainerType(saveType, formRef) {\r\n let inputData={};\r\n        let methodUrl = \"TestContainerType\";\r\n        if(this.props.operation==\"create\"){\r\n        this.state.selectedRecord['ncontainertypecode']['item']['nquantity'] = Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3);\r\n        this.state.selectedRecord['ncontainertypecode']['item']['noutsourcecode'] = parseInt(this.state.selectedRecord.noutsourcecode);\r\n        inputData= {\r\n            [methodUrl.toLocaleLowerCase()]: this.state.selectedRecord.ncontainertypecode.item,\r\n            ntestcontainertypecode:this.state.selectedRecord.ntestcontainertypecode,\r\n            ntestcode:this.state.selectedRecord.ntestcode,\r\n\r\n\r\n            userinfo: this.props.userInfo,\r\n            testcode:this.props.masterData.SelectedTest.ntestcode\r\n        }\r\n         }\r\n         else\r\n         {\r\n    \r\n\r\n            inputData= {\r\n                ntestcontainertypecode:this.state.selectedRecord.ntestcontainertypecode,\r\n                ntestcode:this.state.selectedRecord.ntestcode,\r\n                ncontainertypecode : this.state.selectedRecord.ncontainertypecode.value,\r\n                nquantity:parseInt(Number.parseFloat(this.state.selectedRecord.nquantity).toFixed(3)),\r\n                noutsourcecode:this.state.selectedRecord.noutsourcecode,\r\n                userinfo: this.props.userInfo,\r\n                testcode:this.props.masterData.SelectedTest.ntestcode\r\n            }\r\n         }\r\n        const inputParam = {\r\n            inputData:inputData ,\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: methodUrl, saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n    saveTestData(saveType, formRef) {\r\n        let availableData = [];\r\n        this.state.selectedRecord.availableData.map(data => {\r\n            return availableData.push(data.item);\r\n        });\r\n        let methodUrl = \"\";\r\n        if (this.props.screenName === \"IDS_SECTION\") { //Test Section\r\n            methodUrl = \"TestSection\";\r\n        } else if (this.props.screenName === \"IDS_METHOD\") { //Test Method\r\n            methodUrl = \"TestMethod\";\r\n        } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") { //Test Instrument Category\r\n            methodUrl = \"TestInstrumentCategory\";\r\n        }else if (this.props.screenName === \"IDS_CONTAINERTYPE\") { //Test Instrument Category\r\n            methodUrl = \"TestContainerType\";\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                [methodUrl.toLocaleLowerCase()]: availableData,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"create\",\r\n            methodUrl: methodUrl, saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveParameter = (saveType, formRef) => {\r\n        const storeData = this.props;\r\n        let inputData = {};\r\n        let customobject = null;\r\n        const userInfo = storeData.userInfo;\r\n        const selectedRecord = this.state.selectedRecord;\r\n        let testColumns = [{ \"ntestparametercode\": \"int\" }, { \"nparametertypecode\": \"input\" }, { \"nunitcode\": \"input\" }, { \"sparametername\": \"input\" },\r\n        { \"sparametersynonym\": \"string\" }, { \"nroundingdigits\": \"int\" }, { \"objPredefinedParameter\": \"customobject\" }]\r\n        if (storeData.operation === \"create\") {\r\n            inputData = {\r\n                \"testparameter\": {\r\n                    nisadhocparameter: transactionStatus.NO,\r\n                    nisvisible: transactionStatus.YES,\r\n                    nstatus: transactionStatus.ACTIVE\r\n                }\r\n            };\r\n        } else {\r\n            inputData = { \"testparameter\": {} }\r\n        }\r\n        if (selectedRecord[\"nparametertypecode\"]) {\r\n            if (this.props.parameterData.npredefinedcode === transactionStatus.YES) {\r\n                customobject = {};\r\n                customobject[\"ntestparametercode\"] = selectedRecord[\"ntestparametercode\"];\r\n                customobject[\"ntestpredefinedcode\"] = selectedRecord[\"ntestpredefinedcode\"];\r\n                customobject[\"spredefinedname\"] = selectedRecord[\"spredefinedname\"].trim();\r\n                customobject[\"nstatus\"] = 1;\r\n                customobject[\"ndefaultstatus\"] = transactionStatus.YES;\r\n                customobject[\"ngradecode\"] = selectedRecord[\"ngradecode\"] ? selectedRecord[\"ngradecode\"].value ? selectedRecord[\"ngradecode\"].value : -1 : -1;\r\n            }\r\n            inputData[\"userinfo\"] = userInfo;\r\n            testColumns.map(item => {\r\n                const key = Object.keys(item)[0];\r\n                const value = Object.values(item)[0];\r\n                if (value === \"input\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key].value ? selectedRecord[key].value : -1 : -1;\r\n                } else if (value === \"int\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key] : 0;\r\n                } else if (value === \"string\") {\r\n                    return inputData[\"testparameter\"][key] = selectedRecord[key] ? selectedRecord[key].trim() : \"\";\r\n                } else if (value === \"customobject\") {\r\n                    return inputData[\"testparameter\"][key] = customobject;\r\n                } else {\r\n                    return null;\r\n                }\r\n            });\r\n            inputData[\"testparameter\"][\"ntestcode\"] = storeData.masterData[\"SelectedTest\"][\"ntestcode\"];\r\n        }\r\n        const inputParam = {\r\n            inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: storeData.operation,\r\n            methodUrl: \"TestParameter\",\r\n            saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveSpecification = (saveType, formRef) => {\r\n        const selectedRecord = this.props.selectedRecord;\r\n        const columns = [{ \"ntestparametercode\": \"int\" }, { \"ntestparamnumericcode\": \"int\" }, { \"sminb\": \"string\" },\r\n        { \"smina\": \"string\" }, { \"smaxa\": \"string\" }, { \"smaxb\": \"string\" }, { \"sminlod\": \"string\" }, { \"smaxlod\": \"string\" },\r\n        { \"sminloq\": \"string\" }, { \"smaxloq\": \"string\" }, { \"sdisregard\": \"string\" }, { \"sresultvalue\": \"string\" }];\r\n        let inputData = {\r\n            \"testparameternumeric\": {\r\n                nstatus: 1\r\n            },\r\n            userinfo: this.props.userInfo\r\n        };\r\n        columns.map(item => {\r\n            const key = Object.keys(item)[0];\r\n            const value = Object.values(item)[0];\r\n            if (value === \"int\") {\r\n                return inputData[\"testparameternumeric\"][key] = selectedRecord[key] ? selectedRecord[key] : 0;\r\n            } else if (value === \"string\") {\r\n                return inputData[\"testparameternumeric\"][key] = selectedRecord[key] ?\r\n                    selectedRecord[key] === \"0\" ? selectedRecord[key] : selectedRecord[key].replace(/^0+/, '') : null;\r\n            } else {\r\n                return null;\r\n            }\r\n        });\r\n        const inputParam = {\r\n            inputData,\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: \"TestParameterNumeric\",\r\n            saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveCodedResult = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const testPredefinedParameter = {\r\n            spredefinedname: selectedRecord[\"spredefinedname\"].trim(),\r\n            ngradecode: selectedRecord[\"ngradecode\"] ? selectedRecord[\"ngradecode\"].value ? selectedRecord[\"ngradecode\"].value : -1 : -1,\r\n            ntestparametercode: selectedRecord[\"ntestparametercode\"],\r\n            ntestpredefinedcode: selectedRecord[\"ntestpredefinedcode\"],\r\n            nstatus: transactionStatus.ACTIVE,\r\n            ndefaultstatus: selectedRecord[\"ndefaultstatus\"],//transactionStatus.NO\r\n        }\r\n        const inputParam = {\r\n            inputData: {\r\n                testpredefinedparameter: testPredefinedParameter,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: this.props.operation,\r\n            methodUrl: \"TestPredefinedParameter\",\r\n            saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onSaveFormula = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const formulafield = [\"sformulaname\", \"sformulacalculationcode\", \"sformulacalculationdetail\"];\r\n        const selectedParameter = this.props.masterData.selectedParameter;\r\n        let testformula = {\r\n            ntestcode: selectedParameter[\"ntestcode\"],\r\n            ntestparametercode: selectedParameter[\"ntestparametercode\"],\r\n            ndefaultstatus: transactionStatus.NO,\r\n            nstatus: transactionStatus.ACTIVE\r\n        }\r\n        formulafield.map(field => {\r\n            return testformula[field] = selectedRecord[field].trim()\r\n        })\r\n        const inputParam = {\r\n            inputData: {\r\n                testformula: testformula,\r\n                userinfo: this.props.userInfo\r\n            },\r\n            classUrl: \"testmaster\",\r\n            operation: \"create\",\r\n            methodUrl: \"TestFormula\", saveType, formRef\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    clearFormula = () => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        selectedRecord[\"sformulacalculationcode\"] = \"\";\r\n        selectedRecord[\"sformulacalculationdetail\"] = \"\";\r\n        selectedRecord[\"userinput\"] = \"\";\r\n        this.setState({\r\n            fieldFlag: true,\r\n            operatorFlag: false,\r\n            functionFlag: true,\r\n            selectedRecord,\r\n            query: \"\",\r\n            result: \"\",\r\n            openValidate: false,\r\n            sfunctionsyntax: \"\"\r\n        })\r\n    }\r\n\r\n    onFormulaDrop(data) {\r\n        let selectedRecord = this.state.selectedRecord;\r\n        let formulaName = \"\";\r\n        let formulaCalculationCode = \"\";\r\n        let fieldFlag = this.state.fieldFlag;\r\n        let functionFlag = this.state.functionFlag;\r\n        let operatorFlag = this.state.operatorFlag;\r\n        let sfunctionsyntax = \"\";\r\n        let isDropped = false;\r\n        if (data['testfields'] !== \"\") {\r\n            const testfields = JSON.parse(data['testfields']);\r\n            if (this.state.fieldFlag) {\r\n                let sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                let sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                const sparametername = testfields.sparametername;\r\n                const ntestparametercode = testfields.ntestparametercode;\r\n                if (sparametername !== \"Parameter-Field\" && sparametername !== \"Formula-Field\" && sparametername !== \"Dynamic-Field\") {\r\n                    if (testfields.isformula === 1) {\r\n                        formulaName = `${sformulacalculationdetail} (${sparametername}) `;\r\n                        formulaCalculationCode = `${sformulacalculationcode}$O20O$${ntestparametercode}$O18O$`;\r\n                    } else {\r\n                        formulaName = `${sformulacalculationdetail} ${sparametername}`;\r\n                        formulaCalculationCode = `${sformulacalculationcode}$P${ntestparametercode}P$`;\r\n                    }\r\n                } else if (sparametername !== \"Formula-Field\") {\r\n                    formulaName = `${sformulacalculationdetail} ${testfields.stestname}`;\r\n                    formulaCalculationCode = `${sformulacalculationcode}$D${ntestparametercode}D$`;\r\n                } else {\r\n                    formulaName = `${sformulacalculationdetail} ${testfields.stestname}`;\r\n                    formulaCalculationCode = `${sformulacalculationcode}${testfields.sformulacalculationcode}`;\r\n                }\r\n                fieldFlag = false;\r\n                functionFlag = false;\r\n                operatorFlag = true;\r\n                isDropped = true;\r\n            }\r\n        } else if (data['operatorfields'] !== \"\") {\r\n            const operatorfields = JSON.parse(data['operatorfields']);\r\n            const noperatorcode = operatorfields.noperatorcode;\r\n            const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n            const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n            if (this.state.operatorFlag) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                if (noperatorcode === operators.OPENPARENTHESIS) {\r\n                    fieldFlag = true;\r\n                    functionFlag = true;\r\n                    operatorFlag = false;\r\n                } else if (noperatorcode === operators.CLOSEPARENTHESIS) {\r\n                    fieldFlag = false\r\n                    functionFlag = false;\r\n                    operatorFlag = true;\r\n                } else {\r\n                    fieldFlag = true;\r\n                    functionFlag = true;\r\n                    operatorFlag = false;\r\n                }\r\n                isDropped = true;\r\n            } else if (noperatorcode === operators.OPENPARENTHESIS) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                fieldFlag = true;\r\n                functionFlag = true;\r\n                operatorFlag = false;\r\n                isDropped = true;\r\n            } else if (noperatorcode === operators.CLOSEPARENTHESIS) {\r\n                formulaName = `${sformulacalculationdetail} ${operatorfields.soperator}`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$O${noperatorcode}O$`;\r\n                fieldFlag = false;\r\n                functionFlag = false;\r\n                operatorFlag = true;\r\n                isDropped = true;\r\n            }\r\n        } else if (data['functionfields'] !== \"\") {\r\n            if (this.state.functionFlag) {\r\n                const functionfields = JSON.parse(data['functionfields']);\r\n                const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                formulaName = `${sformulacalculationdetail}${functionfields.sfunctionname}(`;\r\n                formulaCalculationCode = `${sformulacalculationcode}$F${functionfields.nfunctioncode}F$$O20O$`;\r\n                fieldFlag = true;\r\n                functionFlag = false;\r\n                operatorFlag = false;\r\n                sfunctionsyntax = functionfields.sfunctionsyntax;\r\n                isDropped = true;\r\n            }\r\n        }\r\n        if (isDropped) {\r\n            const sliceFormulaName = formulaName.slice(0, 512);\r\n            if (sliceFormulaName.length <= 512) {\r\n                selectedRecord[\"sformulacalculationcode\"] = formulaCalculationCode;\r\n                selectedRecord[\"sformulacalculationdetail\"] = sliceFormulaName;\r\n                this.setState({ fieldFlag, functionFlag, operatorFlag, sfunctionsyntax, selectedRecord });\r\n            } else {\r\n                selectedRecord[\"sformulacalculationdetail\"] = sliceFormulaName;\r\n                this.setState({ fieldFlag, functionFlag, operatorFlag, sfunctionsyntax, selectedRecord });\r\n            }\r\n        }\r\n    }\r\n\r\n    onUserInputs = (event) => {\r\n        const value = event.target.value.replace(/^0+/, '');\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        if (event.keyCode === 13) {\r\n            if (this.state.fieldFlag) {\r\n                const sformulacalculationdetail = selectedRecord.sformulacalculationdetail ? selectedRecord.sformulacalculationdetail : \"\";\r\n                const sformulacalculationcode = selectedRecord.sformulacalculationcode ? selectedRecord.sformulacalculationcode : \"\";\r\n                selectedRecord[\"sformulacalculationcode\"] = `${sformulacalculationcode}$V${value}V$`;\r\n                selectedRecord[\"sformulacalculationdetail\"] = `${sformulacalculationdetail} ${value}`;\r\n                selectedRecord[event.target.name] = \"\";\r\n                this.setState({\r\n                    fieldFlag: false,\r\n                    functionFlag: false,\r\n                    operatorFlag: true,\r\n                    selectedRecord\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    getSyntax = (event) => {\r\n        this.setState({ sfunctionsyntax: event.dataItem.sfunctionsyntax })\r\n    }\r\n\r\n    onSaveTestFile = (saveType, formRef) => {\r\n        const selectedRecord = this.state.selectedRecord;\r\n        const acceptedFiles = selectedRecord.sfilename;\r\n        const nattachmenttypecode = selectedRecord.nattachmenttypecode;\r\n        let isFileEdited = transactionStatus.NO;\r\n        let testFileArray = [];\r\n        let testFile = {\r\n            ntestcode: this.props.masterData.SelectedTest.ntestcode,\r\n            ntestfilecode: selectedRecord.ntestfilecode ? selectedRecord.ntestfilecode : 0,\r\n            nstatus: transactionStatus.ACTIVE,\r\n            nattachmenttypecode,\r\n            ndefaultstatus: selectedRecord[nattachmenttypecode === attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"] ? selectedRecord[nattachmenttypecode === attachmentType.LINK?\"nlinkdefaultstatus\":\"ndefaultstatus\"] : 4\r\n        };\r\n        const formData = new FormData();\r\n        if (nattachmenttypecode === attachmentType.FTP) {\r\n            if (acceptedFiles && Array.isArray(acceptedFiles) && acceptedFiles.length > 0) {\r\n                acceptedFiles.forEach((file, index) => {\r\n                    const tempData = Object.assign({}, testFile);\r\n                    const splittedFileName = file.name.split('.');\r\n                    const fileExtension = file.name.split('.')[splittedFileName.length - 1];\r\n                    const ssystemfilename = selectedRecord.ssystemfilename ? selectedRecord.ssystemfilename.split('.') : \"\";\r\n                    const filesystemfileext = selectedRecord.ssystemfilename ? file.name.split('.')[ssystemfilename.length - 1] : \"\";\r\n                    const uniquefilename = nattachmenttypecode === attachmentType.FTP ? selectedRecord.ntestfilecode && selectedRecord.ntestfilecode > 0\r\n                        && selectedRecord.ssystemfilename !== \"\" ? ssystemfilename[0] + '.' + filesystemfileext : create_UUID() + '.' + fileExtension : \"\";\r\n                    tempData[\"sfilename\"] = file.name;\r\n                    tempData[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                    tempData[\"nlinkcode\"] = transactionStatus.NA;\r\n                    tempData[\"ssystemfilename\"] = uniquefilename;\r\n                    tempData[\"nfilesize\"] = file.size;\r\n                    formData.append(\"uploadedFile\" + index, file);\r\n                    formData.append(\"uniquefilename\" + index, uniquefilename);\r\n                    testFileArray.push(tempData);\r\n                });\r\n                formData.append(\"filecount\", acceptedFiles.length);\r\n                isFileEdited = transactionStatus.YES;\r\n            } else {\r\n                testFile[\"sfilename\"] = selectedRecord.sfilename;\r\n                testFile[\"sdescription\"] = selectedRecord.sdescription ? selectedRecord.sdescription.trim() : \"\";\r\n                testFile[\"nlinkcode\"] = transactionStatus.NA;\r\n                testFile[\"ssystemfilename\"] = selectedRecord.ssystemfilename;\r\n                testFile[\"nfilesize\"] = selectedRecord.nfilesize;\r\n                testFileArray.push(testFile);\r\n            }\r\n        } else {\r\n            testFile[\"sfilename\"] = selectedRecord.slinkfilename.trim();\r\n            testFile[\"sdescription\"] = selectedRecord.slinkdescription ? selectedRecord.slinkdescription.trim() : \"\";\r\n            testFile[\"nlinkcode\"] = selectedRecord.nlinkcode.value ? selectedRecord.nlinkcode.value : -1;\r\n            testFile[\"ssystemfilename\"] = \"\";\r\n            testFile[\"nfilesize\"] = 0;\r\n            testFileArray.push(testFile);\r\n        }\r\n        formData.append(\"isFileEdited\", isFileEdited);\r\n        formData.append(\"testfile\", JSON.stringify(testFileArray));\r\n        // formData.append(\"userinfo\", JSON.stringify(this.props.userInfo));\r\n        const inputParam = {\r\n            inputData: { userinfo: this.props.userInfo },\r\n            formData: formData,\r\n            isFileupload: true,\r\n            operation: this.props.operation,\r\n            classUrl: \"testmaster\",\r\n            saveType, formRef, methodUrl: \"TestFile\"\r\n        }\r\n        return inputParam;\r\n    }\r\n\r\n    onDropTestFile = (attachedFiles, fieldName, maxSize) => {\r\n\r\n        let selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = onDropAttachFileList(selectedRecord[fieldName], attachedFiles, maxSize)\r\n        this.setState({ selectedRecord, actionType: \"new\" });\r\n    }\r\n\r\n    validateEsign = () => {\r\n        const inputParam = {\r\n            inputData: {\r\n                \"userinfo\": {\r\n                    ...this.props.userInfo,\r\n                    sreason: this.state.selectedRecord[\"esigncomments\"]\r\n                },\r\n                password: this.state.selectedRecord[\"esignpassword\"]\r\n            },\r\n            screenData: this.props.screenData\r\n        }\r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n    ConfirmDelete = (item, operation, ncontrolCode, methodUrl, modalName) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.props.deleteAction(item, operation, ncontrolCode, methodUrl, modalName));\r\n    }\r\n    componentDidUpdate(previousProps) {\r\n        if (this.props.isFormulaOpen) {\r\n            this.setState({\r\n                fieldFlag: true,\r\n                operatorFlag: false,\r\n                functionFlag: true\r\n            });\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { isFormulaOpen: false }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord) {\r\n            this.setState({ selectedRecord: this.props.selectedRecord });\r\n        }\r\n        if (this.props.masterData !== previousProps.masterData) {\r\n            let { sectionDataState, methodDataState, instrumentCatDataState,containerTypeDataState,selectedRecord } = this.state;\r\n            if (this.props.dataState === undefined) {\r\n                if (this.props.screenName === \"IDS_SECTION\") {\r\n                    sectionDataState = { skip: 0, take: 10 };\r\n                } else if (this.props.screenName === \"IDS_METHOD\") {\r\n                    methodDataState = { skip: 0, take: 10 };\r\n                } else if (this.props.screenName === \"IDS_INSTRUMENTCATEGORY\") {\r\n                    instrumentCatDataState = { skip: 0, take: 10 };\r\n                } \r\n                else if (this.props.screenName === \"IDS_CONTAINERTYPE\") {\r\n                    containerTypeDataState = { skip: 0, take: 10 };\r\n                }else {\r\n                    sectionDataState = { skip: 0, take: 10 };\r\n                    methodDataState = { skip: 0, take: 10 };\r\n                    instrumentCatDataState = { skip: 0, take: 10 };\r\n                }\r\n            }\r\n            this.setState({ sectionDataState, methodDataState, instrumentCatDataState,containerTypeDataState ,selectedRecord});\r\n        }\r\n    }\r\n}\r\n\r\nexport default injectIntl(TestView);"]},"metadata":{},"sourceType":"module"}