{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{toast}from\"react-toastify\";import{intl}from\"../components/App\";import{constructOptionList,replaceUpdatedObject,sortData}from\"../components/CommonScript\";import{reportCOAType,REPORTTYPE}from\"../components/Enumeration\";import TrainingUpdateChildTab from\"../pages/competencemanagement/trainingupdate/TrainingUpdateChildTab\";import rsapi from\"../rsapi\";import{initRequest}from\"./LoginAction\";import{DEFAULT_RETURN}from\"./LoginTypes\";export function getSubSampleBySample(methodParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getSubSampleBySample\",{nsitecode:methodParam.nsitecode,npreregno:methodParam.primaryKeyValue,userinfo:methodParam.userInfo}).then(function(response){// let releaseSubSample = response.data[\"ReleaseSubSample\"];  \nvar releaseSubSample=methodParam.masterData.releaseSubSample||new Map();releaseSubSample.set(parseInt(Object.keys(response.data[\"ReleaseSubSample\"])[0]),Object.values(response.data[\"ReleaseSubSample\"])[0]);var masterData=_objectSpread(_objectSpread({},methodParam.masterData),{},{releaseSubSample:releaseSubSample},response.data);//  sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:methodParam.data,releaseSubSample:releaseSubSample,dataState:methodParam.dataState,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedSamples(userInfo,controlId,selectedSampleData,data,flag){var npreregno=\"\";selectedSampleData.map(function(item,i){var s=\"\";npreregno=npreregno+item.npreregno;if(i<selectedSampleData.length){if(i<selectedSampleData.length-1){s=\",\";}npreregno=npreregno+s;}else{npreregno=item.npreregno;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedSample\",{npreregno:npreregno,nregtypecode:selectedSampleData[0].nregtypecode,nregsubtypecode:selectedSampleData[0].nregsubtypecode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){console.log(\"errordot\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedSubSamples(userInfo,controlId,selectedSubSampleData,data,flag){var ntransactionsamplecode=\"\";var npreregno=\"\";selectedSubSampleData.map(function(item,i){var s=\"\";ntransactionsamplecode=ntransactionsamplecode+item.ntransactionsamplecode;npreregno=npreregno+item.npreregno;if(i<selectedSubSampleData.length){if(i<selectedSubSampleData.length-1){s=\",\";}ntransactionsamplecode=ntransactionsamplecode+s;npreregno=npreregno+s;}else{ntransactionsamplecode=item.ntransactionsamplecode;npreregno=item.npreregno;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedSubSample\",{npreregno:npreregno,ntransactionsamplecode:ntransactionsamplecode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){console.log(\"errordot\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTestBySample(methodParam,kjkj){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getTestBySample\",{nsitecode:methodParam.nsitecode,npreregno:methodParam.viewRow.npreregno,ntransactionsamplecode:methodParam.viewRow.ntransactionsamplecode,userinfo:methodParam.userInfo}).then(function(response){var releaseTest=methodParam.masterData.releaseTest||new Map();releaseTest.set(parseInt(Object.keys(response.data[\"ReleaseTest\"])[0]),Object.values(response.data[\"ReleaseTest\"])[0]);var masterData=_objectSpread(_objectSpread({},methodParam.masterData),{},{releaseTest:releaseTest},response.data);//  sortData(masterData);\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:methodParam.data,releaseTest:releaseTest,dataState:methodParam.dataState,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSelectedTest(userInfo,controlId,selectedTestData,data,flag){var ntransactionsamplecode=\"\";var npreregno=\"\";var ntransactiontestcode=\"\";selectedTestData.map(function(item,i){var s=\"\";ntransactionsamplecode=ntransactionsamplecode+item.ntransactionsamplecode;npreregno=npreregno+item.npreregno;ntransactiontestcode=ntransactiontestcode+item.ntransactiontestcode;if(i<selectedTestData.length){if(i<selectedTestData.length-1){s=\",\";}ntransactionsamplecode=ntransactionsamplecode+s;npreregno=npreregno+s;ntransactiontestcode=ntransactiontestcode+s;}else{ntransactionsamplecode=item.ntransactionsamplecode;npreregno=item.npreregno;ntransactiontestcode=item.ntransactiontestcode;}});return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateReleasedTest\",{npreregno:npreregno,ntransactionsamplecode:ntransactionsamplecode,ntransactiontestcode:ntransactiontestcode,userinfo:userInfo}).then(function(response){// let releaseSubSample =response.data[\"ReleaseSample\"];           \nvar masterData=_objectSpread(_objectSpread({},data),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,data:response.data,loading:false}});}).catch(function(error){console.log(\"errordot\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}// export function getReleaseSelectedSampleSubSampleTest(userInfo, control, SampleArray1, SubSampleArray1, TestArray1,SampleArray,SubSampleArray,TestArray,Data1,k) {    \n//    let ntransactionsamplecode = \"\"\n//    let npreregno = \"\"\n//     let ntransactiontestcode = \"\" \n//     let bFlag = \"\" \n//     if (TestArray !== undefined) {\n//         TestArray.map(test => {\n//             ntransactionsamplecode += test.ntransactionsamplecode + ',';\n//             npreregno += test.npreregno + ',';\n//             ntransactiontestcode += test.ntransactiontestcode + ',';\n//         })\n//         TestArray = {\n//             ntransactionsamplecode: ntransactionsamplecode,\n//             npreregno: npreregno,\n//             ntransactiontestcode: ntransactiontestcode,\n//             bFlag:\"3\"\n//         }\n//     }   \n//     if (SubSampleArray !== undefined) {\n//         SubSampleArray.map(SubSample => {\n//             ntransactionsamplecode += SubSample.ntransactionsamplecode + ',';\n//             npreregno += SubSample.npreregno + ',';\n//             ntransactiontestcode += SubSample.ntransactiontestcode + ',';\n//             SubSampleArray = {\n//                 ntransactionsamplecode: ntransactionsamplecode,\n//                 npreregno: npreregno,\n//                 ntransactiontestcode: ntransactiontestcode,\n//                 bFlag:\"2\"\n//             }\n//         })\n//     }\n//     if (SampleArray !== undefined) {\n//         SampleArray.map(Sample => {\n//             ntransactionsamplecode += Sample.ntransactionsamplecode + ',';\n//             npreregno += Sample.npreregno + ',';\n//             ntransactiontestcode += Sample.ntransactiontestcode + ',';\n//         })\n//         SampleArray = {\n//             ntransactionsamplecode: ntransactionsamplecode,\n//             npreregno: npreregno,\n//             ntransactiontestcode: ntransactiontestcode,\n//             bFlag:\"1\"\n//         }\n//     }\n//     let allNpreregno = []\n//     if (SampleArray1 !== undefined) {\n//         SampleArray1.map(temp => {\n//             allNpreregno += temp + ','\n//         })\n//     }\n//     let allNtransactionsamplecode = []\n//     if (SubSampleArray1 !== undefined) {\n//         SubSampleArray1.map(temp => {\n//             allNtransactionsamplecode += temp + ','\n//         })\n//     }\n//     let allNtransactiontestcode = []\n//     if (TestArray1 !== undefined) {\n//         TestArray1.map(temp => {\n//             allNtransactiontestcode += temp + ','\n//         })\n//     }\n//     return function (dispatch) {  \n//     dispatch(initRequest(true));\n//     return rsapi.post(\"coarelease/updateStatus\", \n//         {\n//             SampleArray:SampleArray,\n//             SubSampleArray:SubSampleArray,\n//             TestArray: TestArray,\n//             userinfo: userInfo,\n//             allNtransactionsamplecode: allNtransactionsamplecode,\n//             allNtransactiontestcode: allNtransactiontestcode,\n//             allNpreregno:allNpreregno\n//         })\n//     .then(response=>{ \n//        // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \n//        let releaseSubSample = Data1.releaseSubSample || new Map();           \n//        let releaseTest = Data1.releaseTest || new Map();           \n//        releaseSubSample = Data1.releaseSubSample || new Map();           \n//              releaseTest = Data1.releaseTest || new Map();\n// if(response.data.body[\"cFlag\"]===\"3\"){\n//             releaseTest.set(parseInt(Object.keys(response.data.body[\"ReleaseTest\"])[0]), Object.values(response.data.body[\"ReleaseTest\"])[0]);\n//        }\n//       //  else {\n//         if(response.data.body[\"cFlag\"]===\"2\"){\n//             releaseSubSample.set(parseInt(Object.keys(response.data.body[\"ReleaseSubSample\"])[0]), Object.values(response.data.body[\"ReleaseSubSample\"])[0]);\n//         }\n//         let masterData = { ...Data1, releaseSubSample,releaseTest,...response.data.body};\n//             sortData(masterData);\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData,\n//                 data:releaseSubSample,releaseTest,\n//                       //  dataState:dataState,\n//                         loading:false\n//                     }});\n//         })\n//         .catch(error=>{\n//             dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\n//             if (error.response.status === 500){\n//                 toast.error(error.message);\n//             } \n//             else{               \n//                 toast.warn(error.response.data);\n//             }  \n//         })        \n//     }\n// }\nexport function getReleaseSelectedSampleSubSampleTest(userInfo,Data1,inputData){return function(dispatch){if(inputData!==undefined&&inputData.npreregno!==\"\"){dispatch(initRequest(true));return rsapi.post(\"coarelease/updateStatus\",inputData).then(function(response){if(response.data.statusCodeValue!==200){toast.warn(intl.formatMessage({id:response.data.body}));dispatch({type:DEFAULT_RETURN,payload:{loading:false}});}else{var groupBy=function groupBy(objectArray,property){return objectArray.reduce(function(acc,obj){var key=obj[property];if(!acc[key]){acc[key]=[];}acc[key].push(obj);return acc;},{});};// Data1.ReleaseSample.map(item => {\n//     delete item[\"expanded\"]\n// });\nvar selected=[];var expanded=[];var testdata=[];var subsampleData=[];var subsampleexpanded=[];var subsampleselected=[];var subsampleDataRes=[];var y=[];var a=[];var SubSample=Object.values(Data1.ReleaseSubSample).forEach(function(item1){item1.map(function(item2){subsampleData.push(item2);if(item2.expanded===true){subsampleexpanded.push({\"ntransactionsamplecode\":item2.ntransactionsamplecode,\"expanded\":item2.expanded});}if(item2.selected===true){subsampleselected.push({\"ntransactionsamplecode\":item2.ntransactionsamplecode,\"selected\":item2.selected});}});});var SubSampleRes=Object.values(response.data.body.ReleaseSubSample).forEach(function(item1){item1.map(function(item2){subsampleDataRes.push(item2);subsampleexpanded.map(function(item1){if(item1.ntransactionsamplecode===item2.ntransactionsamplecode){item2[\"expanded\"]=true;}});subsampleselected.map(function(item1){if(item1.ntransactionsamplecode===item2.ntransactionsamplecode){item2[\"selected\"]=true;}});});});var testDataRes=[];var testDataPrevious=[];var testDataSelected=[];var testDataExpanded=[];testDataSelected=Object.values(Data1.ReleaseTest).forEach(function(item1){item1.map(function(item2){testDataPrevious.push(item2);if(item2.selected===true){testdata.push({\"ntransactiontestcode\":item2.ntransactiontestcode});}});});testDataExpanded=Object.values(response.data.body.ReleaseTest||{}).forEach(function(item1){item1.map(function(item2){testDataRes.push(item2);testdata.map(function(x){if(item2.ntransactiontestcode===x.ntransactiontestcode){item2[\"selected\"]=true;}});});});var ReleaseTest=replaceUpdatedObject(testDataRes,testDataPrevious,'ntransactiontestcode');var ReleaseTest1=groupBy(ReleaseTest,'ntransactionsamplecode');var ReleaseSubSample=replaceUpdatedObject(subsampleDataRes,subsampleData,'ntransactionsamplecode');var ReleaseSubSample1=groupBy(ReleaseSubSample,'npreregno');Data1.ReleaseSample.map(function(item2){if(item2.expanded===true){expanded.push({\"npreregno\":item2.npreregno,\"expanded\":item2.expanded});}if(item2.selected===true){selected.push({\"npreregno\":item2.npreregno,\"selected\":item2.selected});}});response.data.body.ReleaseSample&&response.data.body.ReleaseSample.map(function(item2){expanded.map(function(item1){if(item1.npreregno===item2.npreregno){item2[\"expanded\"]=true;}});selected.map(function(item1){if(item1.npreregno===item2.npreregno){item2[\"selected\"]=true;}});});var masterData=_objectSpread(_objectSpread(_objectSpread({},Data1),response.data.body),{},{ReleaseTest:ReleaseTest1,ReleaseSubSample:ReleaseSubSample1,ReleaseSample:replaceUpdatedObject(response.data.body.ReleaseSample,Data1.ReleaseSample,'npreregno')});console.log(\"ReleasedTest,\",masterData);// sortData(masterData);\n//  dispatch(generateReport(inputData,masterData))\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,checkedflag:false,change:inputData.change,loading:false}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);console.log(\"ErrorRelease,\",error);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTANYONESAMPLE/SUBSAMPLE/TEST\"}));}};}export function getReleaseRegistrationType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getRegistrationType\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{SampleTypeValue:inputData.SampleTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseRegistrationSubType(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getRegistrationSubType\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegTypeValue:inputData.RegTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseFilterStatus(inputData){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getFilterStatus\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegSubTypeValue:inputData.RegSubTypeValue}),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseFilterBasedTest(inputData){return function(dispatch){if(inputData.napprovalversioncode){dispatch(initRequest(true));rsapi.post(\"coarelease/getFilterBasedTest\",inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread(_objectSpread({},inputData.masterData),responseData),{},{RegSubTypeValue:inputData.RegSubTypeValue,ndesigntemplatemappingcode:inputData.ndesigntemplatemappingcode,DesignTemplateMappingValue:inputData.DesignTemplateMappingValue}),loading:false}});if(response.data.rtn){toast.warn(response.data.rtn);}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{toast.warn(intl.formatMessage({id:\"IDS_PLSSELECTALLVALUESINFILTER\"}));}};}export function getReleaseApprovalVersion(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getApprovalVersion\",inputParam.inputData).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);dispatch({type:DEFAULT_RETURN,payload:{masterData:_objectSpread(_objectSpread({},inputParam.masterData),responseData),loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getReleaseSample(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"coarelease/getReleaseSample\",inputParam.inputData).then(function(response){var responseData=_objectSpread({},response.data);// responseData = sortData(responseData)\nvar masterData=_objectSpread(_objectSpread({},inputParam.masterData),responseData);if(inputParam.searchSampleRef!==undefined&&inputParam.searchSampleRef.current!==null){inputParam.searchSampleRef.current.value=\"\";masterData['searchedSample']=undefined;}if(inputParam.searchSubSampleRef!==undefined&&inputParam.searchSubSampleRef.current!==null){inputParam.searchSubSampleRef.current.value=\"\";masterData['searchedSubSample']=undefined;}if(inputParam.searchTestRef!==undefined&&inputParam.searchTestRef.current!==null){inputParam.searchTestRef.current.value=\"\";// masterData['searchedTest'] = undefined\nmasterData['searchedTests']=undefined;}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false,skip:0,take:inputParam.take,testskip:0,testtake:inputParam.testtake,resultDataState:_objectSpread(_objectSpread({},inputParam.resultDataState),{},{sort:undefined,filter:undefined}),instrumentDataState:_objectSpread(_objectSpread({},inputParam.instrumentDataState),{},{sort:undefined,filter:undefined}),materialDataState:_objectSpread(_objectSpread({},inputParam.materialDataState),{},{sort:undefined,filter:undefined}),taskDataState:_objectSpread(_objectSpread({},inputParam.taskDataState),{},{sort:undefined,filter:undefined}),documentDataState:_objectSpread(_objectSpread({},inputParam.documentDataState),{},{sort:undefined,filter:undefined}),resultChangeDataState:_objectSpread(_objectSpread({},inputParam.resultChangeDataState),{},{sort:undefined,filter:undefined}),testCommentDataState:_objectSpread(_objectSpread({},inputParam.testCommentDataState),{},{sort:undefined,filter:undefined}),historyDataState:_objectSpread(_objectSpread({},inputParam.historyDataState),{},{sort:undefined,filter:undefined}),samplePrintHistoryDataState:_objectSpread(_objectSpread({},inputParam.samplePrintHistoryDataState),{},{sort:undefined,filter:undefined}),sampleHistoryDataState:_objectSpread(_objectSpread({},inputParam.sampleHistoryDataState),{},{sort:undefined,filter:undefined}),checkedflag:false,npreregno:[]}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getCOAReportType(releaseParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"coarelease/getCOAReportType\",{userinfo:releaseParam.userInfo}).then(function(response){var reportType=[];var reportTypeMap=constructOptionList(response.data.ReportType||[],\"ncoareporttypecode\",\"scoareporttypename\",undefined,undefined,false);var ReportTypeList=reportTypeMap.get(\"OptionList\");var selectedRecord={\"ncoareporttypecode\":{\"value\":response.data.ReportType[0].ncoareporttypecode,\"label\":response.data.ReportType[0].scoareporttypename}};dispatch({type:DEFAULT_RETURN,payload:{operation:null,modalName:undefined,loading:false,dataState:undefined//,modalShow: true\n,ReportTypeList:ReportTypeList,modalTitle:\"IDS_RELEASEANDREPORTGENERATION\",selectedRecord:selectedRecord}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function generateReport(inputParam,Data){return function(dispatch){dispatch(initRequest(true));var inputData={npreregno:inputParam.npreregno,//   nsectioncode: inputParam.nsectioncode || -1,\nuserinfo:inputParam.userinfo,nprimarykey:inputParam.npreregno,ncoareporttypecode:reportCOAType.SAMPLEWISE,nreporttypecode:REPORTTYPE.COAREPORT,sprimarykeyname:\"npreregno\",ncontrolcode:inputParam.ncontrolCode,nregtypecode:inputParam.nregtypecode,nregsubtypecode:inputParam.nregsubtypecode,ntransactiontestcode:inputParam.ntransactiontestcode,napproveconfversioncode:inputParam.napprovalversioncode,action:inputParam.action};rsapi.post(\"approval/generateCOAReport\",inputData).then(function(response){if(response.data.rtn===\"Success\"){document.getElementById(\"download_data\").setAttribute(\"href\",response.data.filepath);document.getElementById(\"download_data\").click();}else{toast.warn(response.data.rtn);}dispatch({type:DEFAULT_RETURN,payload:{loading:false,change:inputParam.change,masterData:Data,modalShow:false,selectedRecord:{},loadEsign:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/COAReleaseAction.js"],"names":["toast","intl","constructOptionList","replaceUpdatedObject","sortData","reportCOAType","REPORTTYPE","TrainingUpdateChildTab","rsapi","initRequest","DEFAULT_RETURN","getSubSampleBySample","methodParam","dispatch","post","nsitecode","npreregno","primaryKeyValue","userinfo","userInfo","then","response","releaseSubSample","masterData","Map","set","parseInt","Object","keys","data","values","type","payload","dataState","loading","catch","error","status","message","warn","getReleaseSelectedSamples","controlId","selectedSampleData","flag","map","item","i","s","length","nregtypecode","nregsubtypecode","console","log","getReleaseSelectedSubSamples","selectedSubSampleData","ntransactionsamplecode","getTestBySample","kjkj","viewRow","releaseTest","getReleaseSelectedTest","selectedTestData","ntransactiontestcode","getReleaseSelectedSampleSubSampleTest","Data1","inputData","undefined","statusCodeValue","formatMessage","id","body","groupBy","objectArray","property","reduce","acc","obj","key","push","selected","expanded","testdata","subsampleData","subsampleexpanded","subsampleselected","subsampleDataRes","y","a","SubSample","ReleaseSubSample","forEach","item1","item2","SubSampleRes","testDataRes","testDataPrevious","testDataSelected","testDataExpanded","ReleaseTest","x","ReleaseTest1","ReleaseSubSample1","ReleaseSample","checkedflag","change","getReleaseRegistrationType","responseData","SampleTypeValue","getReleaseRegistrationSubType","RegTypeValue","getReleaseFilterStatus","RegSubTypeValue","getReleaseFilterBasedTest","napprovalversioncode","ndesigntemplatemappingcode","DesignTemplateMappingValue","rtn","getReleaseApprovalVersion","inputParam","getReleaseSample","searchSampleRef","current","value","searchSubSampleRef","searchTestRef","showFilter","skip","take","testskip","testtake","resultDataState","sort","filter","instrumentDataState","materialDataState","taskDataState","documentDataState","resultChangeDataState","testCommentDataState","historyDataState","samplePrintHistoryDataState","sampleHistoryDataState","getCOAReportType","releaseParam","reportType","reportTypeMap","ReportType","ReportTypeList","get","selectedRecord","ncoareporttypecode","scoareporttypename","operation","modalName","modalTitle","generateReport","Data","nprimarykey","SAMPLEWISE","nreporttypecode","COAREPORT","sprimarykeyname","ncontrolcode","ncontrolCode","napproveconfversioncode","action","document","getElementById","setAttribute","filepath","click","modalShow","loadEsign"],"mappings":"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AI,CAAErB,cADD,CACiBsB,OAAO,CAAE,CAC3BT,UAAU,CAAVA,UAD2B,CAE3BM,IAAI,CAAER,QAAQ,CAACQ,IAFY,CAG3BK,OAAO,CAAE,KAHkB,CAD1B,CAAD,CAAR,CAOH,CAtBE,EAuBFC,KAvBE,CAuBI,SAAAC,KAAK,CAAI,CACZe,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBhB,KAAxB,EACAvB,QAAQ,CAAC,CAAEkB,IAAI,CAAErB,cAAR,CAAwBsB,OAAO,CAAE,CAAEE,OAAO,CAAE,KAAX,CAAjC,CAAD,CAAR,CACA,GAAIE,KAAK,CAACf,QAAN,CAAegB,MAAf,GAA0B,GAA9B,CAAmC,CAC/BrC,KAAK,CAACoC,KAAN,CAAYA,KAAK,CAACE,OAAlB,EACH,CAFD,IAGK,CACDtC,KAAK,CAACuC,IAAN,CAAWH,KAAK,CAACf,QAAN,CAAeQ,IAA1B,EACH,CACJ,CAhCE,CAAP,CAiCH,CAnCD,CAoCH,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAO,SAASkC,CAAAA,qCAAT,CAA+C5C,QAA/C,CAAyD6C,KAAzD,CAAgEC,SAAhE,CAA2E,CAG9E,MAAO,UAAUpD,QAAV,CAAoB,CACzB,GAAIoD,SAAS,GAAKC,SAAd,E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","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport { intl } from \"../components/App\";\r\nimport { constructOptionList, replaceUpdatedObject, sortData } from \"../components/CommonScript\";\r\nimport { reportCOAType, REPORTTYPE } from \"../components/Enumeration\";\r\nimport TrainingUpdateChildTab from \"../pages/competencemanagement/trainingupdate/TrainingUpdateChildTab\";\r\nimport rsapi from \"../rsapi\";\r\nimport { initRequest } from \"./LoginAction\";\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\n\r\nexport function getSubSampleBySample(methodParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getSubSampleBySample\",\r\n            {\r\n                nsitecode: methodParam.nsitecode, npreregno: methodParam.primaryKeyValue,\r\n                userinfo: methodParam.userInfo\r\n            })\r\n            .then(response => {\r\n                // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \r\n                let releaseSubSample = methodParam.masterData.releaseSubSample || new Map();\r\n\r\n                releaseSubSample.set(parseInt(Object.keys(response.data[\"ReleaseSubSample\"])[0]), Object.values(response.data[\"ReleaseSubSample\"])[0]);\r\n                let masterData = { ...methodParam.masterData, releaseSubSample, ...response.data };\r\n\r\n                //  sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: methodParam.data, releaseSubSample,\r\n                        dataState: methodParam.dataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getReleaseSelectedSamples(userInfo, controlId, selectedSampleData, data, flag) {\r\n    let npreregno = \"\"\r\n    selectedSampleData.map((item, i) => {\r\n        let s = \"\"\r\n        npreregno = npreregno + item.npreregno;\r\n        if (i < selectedSampleData.length) {\r\n            if (i < selectedSampleData.length - 1) {\r\n                s = \",\"\r\n            }\r\n            npreregno = npreregno + s;\r\n        }\r\n        else {\r\n            npreregno = item.npreregno;\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedSample\",\r\n            {\r\n                npreregno: npreregno,\r\n                nregtypecode: selectedSampleData[0].nregtypecode,\r\n                nregsubtypecode: selectedSampleData[0].nregsubtypecode,\r\n\r\n                userinfo: userInfo\r\n            })\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(\"errordot\", error)\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSelectedSubSamples(userInfo, controlId, selectedSubSampleData, data, flag) {\r\n    let ntransactionsamplecode = \"\"\r\n    let npreregno = \"\"\r\n\r\n    selectedSubSampleData.map((item, i) => {\r\n        let s = \"\"\r\n        ntransactionsamplecode = ntransactionsamplecode + item.ntransactionsamplecode;\r\n        npreregno = npreregno + item.npreregno;\r\n\r\n        if (i < selectedSubSampleData.length) {\r\n            if (i < selectedSubSampleData.length - 1) {\r\n                s = \",\"\r\n            }\r\n            ntransactionsamplecode = ntransactionsamplecode + s;\r\n            npreregno = npreregno + s;\r\n\r\n        }\r\n        else {\r\n            ntransactionsamplecode = item.ntransactionsamplecode;\r\n            npreregno = item.npreregno;\r\n\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedSubSample\",\r\n            {\r\n\r\n                npreregno: npreregno,\r\n                ntransactionsamplecode: ntransactionsamplecode,\r\n\r\n                userinfo: userInfo\r\n            })\r\n\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(\"errordot\", error)\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getTestBySample(methodParam, kjkj) {\r\n\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getTestBySample\",\r\n            {\r\n                nsitecode: methodParam.nsitecode, npreregno: methodParam.viewRow.npreregno,\r\n                ntransactionsamplecode: methodParam.viewRow.ntransactionsamplecode,\r\n                userinfo: methodParam.userInfo\r\n            })\r\n            .then(response => {\r\n                let releaseTest = methodParam.masterData.releaseTest || new Map();\r\n                releaseTest.set(parseInt(Object.keys(response.data[\"ReleaseTest\"])[0]), Object.values(response.data[\"ReleaseTest\"])[0]);\r\n                let masterData = { ...methodParam.masterData, releaseTest, ...response.data };\r\n\r\n                //  sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: methodParam.data,\r\n                        releaseTest,\r\n                        dataState: methodParam.dataState,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSelectedTest(userInfo, controlId, selectedTestData, data, flag) {\r\n    let ntransactionsamplecode = \"\"\r\n    let npreregno = \"\"\r\n    let ntransactiontestcode = \"\"\r\n\r\n    selectedTestData.map((item, i) => {\r\n        let s = \"\"\r\n        ntransactionsamplecode = ntransactionsamplecode + item.ntransactionsamplecode;\r\n        npreregno = npreregno + item.npreregno;\r\n        ntransactiontestcode = ntransactiontestcode + item.ntransactiontestcode;\r\n\r\n        if (i < selectedTestData.length) {\r\n            if (i < selectedTestData.length - 1) {\r\n                s = \",\"\r\n            }\r\n            ntransactionsamplecode = ntransactionsamplecode + s;\r\n            npreregno = npreregno + s;\r\n            ntransactiontestcode = ntransactiontestcode + s;\r\n\r\n        }\r\n        else {\r\n            ntransactionsamplecode = item.ntransactionsamplecode;\r\n            npreregno = item.npreregno;\r\n            ntransactiontestcode = item.ntransactiontestcode;\r\n\r\n        }\r\n    })\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateReleasedTest\",\r\n            {\r\n\r\n                npreregno: npreregno,\r\n                ntransactionsamplecode: ntransactionsamplecode,\r\n                ntransactiontestcode: ntransactiontestcode,\r\n\r\n                userinfo: userInfo\r\n            })\r\n\r\n            .then(response => {\r\n                // let releaseSubSample =response.data[\"ReleaseSample\"];           \r\n                let masterData = { ...data, ...response.data };\r\n\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        data: response.data,\r\n                        loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(\"errordot\", error)\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n// export function getReleaseSelectedSampleSubSampleTest(userInfo, control, SampleArray1, SubSampleArray1, TestArray1,SampleArray,SubSampleArray,TestArray,Data1,k) {    \r\n//    let ntransactionsamplecode = \"\"\r\n//    let npreregno = \"\"\r\n//     let ntransactiontestcode = \"\" \r\n//     let bFlag = \"\" \r\n//     if (TestArray !== undefined) {\r\n//         TestArray.map(test => {\r\n//             ntransactionsamplecode += test.ntransactionsamplecode + ',';\r\n//             npreregno += test.npreregno + ',';\r\n//             ntransactiontestcode += test.ntransactiontestcode + ',';\r\n//         })\r\n//         TestArray = {\r\n//             ntransactionsamplecode: ntransactionsamplecode,\r\n//             npreregno: npreregno,\r\n//             ntransactiontestcode: ntransactiontestcode,\r\n//             bFlag:\"3\"\r\n\r\n//         }\r\n//     }   \r\n//     if (SubSampleArray !== undefined) {\r\n//         SubSampleArray.map(SubSample => {\r\n//             ntransactionsamplecode += SubSample.ntransactionsamplecode + ',';\r\n//             npreregno += SubSample.npreregno + ',';\r\n//             ntransactiontestcode += SubSample.ntransactiontestcode + ',';\r\n//             SubSampleArray = {\r\n//                 ntransactionsamplecode: ntransactionsamplecode,\r\n//                 npreregno: npreregno,\r\n//                 ntransactiontestcode: ntransactiontestcode,\r\n//                 bFlag:\"2\"\r\n\r\n//             }\r\n//         })\r\n//     }\r\n//     if (SampleArray !== undefined) {\r\n\r\n//         SampleArray.map(Sample => {\r\n//             ntransactionsamplecode += Sample.ntransactionsamplecode + ',';\r\n//             npreregno += Sample.npreregno + ',';\r\n//             ntransactiontestcode += Sample.ntransactiontestcode + ',';\r\n\r\n//         })\r\n//         SampleArray = {\r\n//             ntransactionsamplecode: ntransactionsamplecode,\r\n//             npreregno: npreregno,\r\n//             ntransactiontestcode: ntransactiontestcode,\r\n//             bFlag:\"1\"\r\n\r\n//         }\r\n//     }\r\n//     let allNpreregno = []\r\n//     if (SampleArray1 !== undefined) {\r\n\r\n//         SampleArray1.map(temp => {\r\n//             allNpreregno += temp + ','\r\n//         })\r\n//     }\r\n//     let allNtransactionsamplecode = []\r\n//     if (SubSampleArray1 !== undefined) {\r\n\r\n//         SubSampleArray1.map(temp => {\r\n//             allNtransactionsamplecode += temp + ','\r\n//         })\r\n//     }\r\n//     let allNtransactiontestcode = []\r\n//     if (TestArray1 !== undefined) {\r\n\r\n//         TestArray1.map(temp => {\r\n//             allNtransactiontestcode += temp + ','\r\n//         })\r\n//     }\r\n\r\n//     return function (dispatch) {  \r\n//     dispatch(initRequest(true));\r\n//     return rsapi.post(\"coarelease/updateStatus\", \r\n//         {\r\n//             SampleArray:SampleArray,\r\n//             SubSampleArray:SubSampleArray,\r\n//             TestArray: TestArray,\r\n//             userinfo: userInfo,\r\n//             allNtransactionsamplecode: allNtransactionsamplecode,\r\n//             allNtransactiontestcode: allNtransactiontestcode,\r\n//             allNpreregno:allNpreregno\r\n//         })\r\n//     .then(response=>{ \r\n//        // let releaseSubSample = response.data[\"ReleaseSubSample\"];  \r\n//        let releaseSubSample = Data1.releaseSubSample || new Map();           \r\n//        let releaseTest = Data1.releaseTest || new Map();           \r\n//        releaseSubSample = Data1.releaseSubSample || new Map();           \r\n\r\n//              releaseTest = Data1.releaseTest || new Map();\r\n// if(response.data.body[\"cFlag\"]===\"3\"){\r\n//             releaseTest.set(parseInt(Object.keys(response.data.body[\"ReleaseTest\"])[0]), Object.values(response.data.body[\"ReleaseTest\"])[0]);\r\n//        }\r\n//       //  else {\r\n//         if(response.data.body[\"cFlag\"]===\"2\"){\r\n\r\n\r\n//             releaseSubSample.set(parseInt(Object.keys(response.data.body[\"ReleaseSubSample\"])[0]), Object.values(response.data.body[\"ReleaseSubSample\"])[0]);\r\n\r\n//         }\r\n//         let masterData = { ...Data1, releaseSubSample,releaseTest,...response.data.body};\r\n\r\n//             sortData(masterData);\r\n//             dispatch({type: DEFAULT_RETURN, payload:{masterData,\r\n//                 data:releaseSubSample,releaseTest,\r\n//                       //  dataState:dataState,\r\n//                         loading:false\r\n//                     }});\r\n//         })\r\n//         .catch(error=>{\r\n//             dispatch({type: DEFAULT_RETURN, payload: {loading:false}})\r\n//             if (error.response.status === 500){\r\n//                 toast.error(error.message);\r\n//             } \r\n//             else{               \r\n//                 toast.warn(error.response.data);\r\n//             }  \r\n//         })        \r\n//     }\r\n// }\r\nexport function getReleaseSelectedSampleSubSampleTest(userInfo, Data1, inputData) {\r\n\r\n\r\n    return function (dispatch) {\r\n      if (inputData !== undefined &&inputData.npreregno!==\"\") {\r\n\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/updateStatus\",\r\n\r\n            inputData\r\n        )\r\n            .then(response => {\r\n                if (response.data.statusCodeValue !== 200) {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: response.data.body\r\n                    }));\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            loading: false\r\n                        }\r\n                    });\r\n\r\n\r\n                }\r\n                else {\r\n                    let selected = []\r\n                    let expanded = []\r\n                    let testdata = []\r\n                    let subsampleData = []\r\n                    let subsampleexpanded = []\r\n                    let subsampleselected = []\r\n                    let subsampleDataRes = []\r\n                    let y = []\r\n                    let a = []\r\n                    let SubSample = Object.values(Data1.ReleaseSubSample).forEach(item1 => {\r\n                        item1.map(item2 => {\r\n                            subsampleData.push(item2)\r\n                            if (item2.expanded === true) {\r\n                                subsampleexpanded.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"expanded\": item2.expanded })\r\n                            }\r\n                            if (item2.selected === true) {\r\n                                subsampleselected.push({ \"ntransactionsamplecode\": item2.ntransactionsamplecode, \"selected\": item2.selected })\r\n                            }\r\n\r\n                        })\r\n                    });\r\n                    let SubSampleRes = Object.values(response.data.body.ReleaseSubSample).forEach(item1 => {\r\n                        item1.map(item2 => {\r\n                            subsampleDataRes.push(item2)\r\n                            subsampleexpanded.map(item1 => {\r\n                                if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\r\n                                    item2[\"expanded\"] = true\r\n                                }\r\n                            })\r\n                            subsampleselected.map(item1 => {\r\n                                if (item1.ntransactionsamplecode === item2.ntransactionsamplecode) {\r\n                                    item2[\"selected\"] = true\r\n                                }\r\n                            })\r\n                        })\r\n                    });\r\n                    let testDataRes = []\r\n                    let testDataPrevious = []\r\n                    let testDataSelected = []\r\n                    let testDataExpanded = []\r\n                    testDataSelected = Object.values(Data1.ReleaseTest).forEach(item1 => {\r\n                        item1.map(item2 => {\r\n                            testDataPrevious.push(item2)\r\n                            if (item2.selected === true) {\r\n                                testdata.push({ \"ntransactiontestcode\": item2.ntransactiontestcode })\r\n                            }\r\n                        })\r\n                    });\r\n                    testDataExpanded = Object.values(response.data.body.ReleaseTest||{}).forEach(item1 => {\r\n                        item1.map(item2 => {\r\n                            testDataRes.push(item2)\r\n\r\n                            testdata.map(x => {\r\n                                if (item2.ntransactiontestcode === x.ntransactiontestcode) {\r\n                                    item2[\"selected\"] = true\r\n                                }\r\n                            })\r\n                        })\r\n                    });\r\n                    let ReleaseTest = replaceUpdatedObject(testDataRes, testDataPrevious, 'ntransactiontestcode');\r\n                    let ReleaseTest1 = groupBy(ReleaseTest, 'ntransactionsamplecode');\r\n                    let ReleaseSubSample = replaceUpdatedObject(subsampleDataRes, subsampleData, 'ntransactionsamplecode');\r\n                    let ReleaseSubSample1 = groupBy(ReleaseSubSample, 'npreregno');\r\n\r\n                    function groupBy(objectArray, property) {\r\n                        return objectArray.reduce((acc, obj) => {\r\n                            const key = obj[property];\r\n                            if (!acc[key]) {\r\n                                acc[key] = [];\r\n                            }\r\n                            acc[key].push(obj);\r\n                            return acc;\r\n                        }, {});\r\n                    }\r\n                    // Data1.ReleaseSample.map(item => {\r\n                    //     delete item[\"expanded\"]\r\n                    // });\r\n                    Data1.ReleaseSample.map(item2 => {\r\n                        if (item2.expanded === true) {\r\n                            expanded.push({ \"npreregno\": item2.npreregno, \"expanded\": item2.expanded })\r\n                        }\r\n                        if (item2.selected === true) {\r\n                            selected.push({ \"npreregno\": item2.npreregno, \"selected\": item2.selected })\r\n                        }\r\n                    })\r\n                    response.data.body.ReleaseSample&&response.data.body.ReleaseSample.map(item2 => {\r\n                        expanded.map(item1 => {\r\n                            if (item1.npreregno === item2.npreregno) {\r\n                                item2[\"expanded\"] = true\r\n                            }\r\n                        })\r\n                        selected.map(item1 => {\r\n                            if (item1.npreregno === item2.npreregno) {\r\n                                item2[\"selected\"] = true\r\n                            }\r\n                        })\r\n\r\n                    })\r\n\r\n                    let masterData = {\r\n\r\n                        ...Data1, ...response.data.body,\r\n                        ReleaseTest: ReleaseTest1,\r\n                        ReleaseSubSample: ReleaseSubSample1,\r\n\r\n                        ReleaseSample: replaceUpdatedObject(response.data.body.ReleaseSample, Data1.ReleaseSample, 'npreregno'),\r\n\r\n\r\n                    };\r\n\r\n                    console.log(\"ReleasedTest,\", masterData);\r\n                    // sortData(masterData);\r\n                  //  dispatch(generateReport(inputData,masterData))\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            checkedflag:false,\r\n                            change: inputData.change,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                    console.log(\"ErrorRelease,\", error);\r\n\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n\r\n\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_SELECTANYONESAMPLE/SUBSAMPLE/TEST\"\r\n            }));\r\n        }\r\n    }\r\n}\r\nexport function getReleaseRegistrationType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getRegistrationType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            SampleTypeValue: inputData.SampleTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseRegistrationSubType(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getRegistrationSubType\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            RegTypeValue: inputData.RegTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseFilterStatus(inputData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getFilterStatus\", inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputData.masterData,\r\n                            ...responseData,\r\n                            RegSubTypeValue: inputData.RegSubTypeValue\r\n                        },\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getReleaseFilterBasedTest(inputData) {\r\n    return function (dispatch) {\r\n        if (inputData.napprovalversioncode) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post(\"coarelease/getFilterBasedTest\", inputData)\r\n                .then(response => {\r\n\r\n\r\n                    let responseData = { ...response.data }\r\n                    responseData = sortData(responseData)\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData: {\r\n                                ...inputData.masterData,\r\n                                ...responseData,\r\n                                RegSubTypeValue: inputData.RegSubTypeValue,\r\n                                ndesigntemplatemappingcode: inputData.ndesigntemplatemappingcode,\r\n                                DesignTemplateMappingValue: inputData.DesignTemplateMappingValue\r\n                            },\r\n                            loading: false\r\n                        }\r\n                    })\r\n                    if (response.data.rtn) {\r\n                        toast.warn(response.data.rtn);\r\n                    }\r\n\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n            toast.warn(intl.formatMessage({\r\n                id: \"IDS_PLSSELECTALLVALUESINFILTER\"\r\n            }));\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function getReleaseApprovalVersion(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getApprovalVersion\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData: {\r\n                            ...inputParam.masterData,\r\n                            ...responseData,\r\n                            // fromDate: inputParam.inputData.dfrom,\r\n                            // toDate: inputParam.inputData.dto,\r\n                        },\r\n                        loading: false,\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getReleaseSample(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"coarelease/getReleaseSample\", inputParam.inputData)\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                // responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                if (inputParam.searchSampleRef !== undefined && inputParam.searchSampleRef.current !== null) {\r\n                    inputParam.searchSampleRef.current.value = \"\";\r\n                    masterData['searchedSample'] = undefined\r\n                }\r\n                if (inputParam.searchSubSampleRef !== undefined && inputParam.searchSubSampleRef.current !== null) {\r\n                    inputParam.searchSubSampleRef.current.value = \"\";\r\n                    masterData['searchedSubSample'] = undefined\r\n                }\r\n                if (inputParam.searchTestRef !== undefined && inputParam.searchTestRef.current !== null) {\r\n                    inputParam.searchTestRef.current.value = \"\"\r\n                    // masterData['searchedTest'] = undefined\r\n                    masterData['searchedTests'] = undefined\r\n\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false,\r\n                        skip: 0,\r\n                        take: inputParam.take,\r\n                        testskip: 0,\r\n                        testtake: inputParam.testtake,\r\n                        resultDataState: { ...inputParam.resultDataState, sort: undefined, filter: undefined },\r\n                        instrumentDataState: { ...inputParam.instrumentDataState, sort: undefined, filter: undefined },\r\n                        materialDataState: { ...inputParam.materialDataState, sort: undefined, filter: undefined },\r\n                        taskDataState: { ...inputParam.taskDataState, sort: undefined, filter: undefined },\r\n                        documentDataState: { ...inputParam.documentDataState, sort: undefined, filter: undefined },\r\n                        resultChangeDataState: { ...inputParam.resultChangeDataState, sort: undefined, filter: undefined },\r\n                        testCommentDataState: { ...inputParam.testCommentDataState, sort: undefined, filter: undefined },\r\n                        historyDataState: { ...inputParam.historyDataState, sort: undefined, filter: undefined },\r\n                        samplePrintHistoryDataState: { ...inputParam.samplePrintHistoryDataState, sort: undefined, filter: undefined },\r\n                        sampleHistoryDataState: { ...inputParam.sampleHistoryDataState, sort: undefined, filter: undefined },\r\n                        checkedflag:false,\r\n                        npreregno:[]\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getCOAReportType(releaseParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"coarelease/getCOAReportType\", {userinfo: releaseParam.userInfo })\r\n            .then(response => {\r\n                let reportType = [];\r\n\r\n                const reportTypeMap = constructOptionList(response.data.ReportType || [], \"ncoareporttypecode\",\r\n                    \"scoareporttypename\", undefined, undefined, false);\r\n\r\n                const ReportTypeList = reportTypeMap.get(\"OptionList\");\r\n                let selectedRecord = {\"ncoareporttypecode\": {\r\n                    \"value\": response.data.ReportType[0].ncoareporttypecode,\r\n                     \"label\": response.data.ReportType[0].scoareporttypename\r\n                 }};\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                     payload: {\r\n                        operation: null, modalName: undefined,\r\n                        loading: false, dataState: undefined//,modalShow: true\r\n                        ,ReportTypeList\r\n                        ,modalTitle:\"IDS_RELEASEANDREPORTGENERATION\"\r\n                       ,selectedRecord\r\n\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\nexport function generateReport(inputParam,Data) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        const inputData = {\r\n            npreregno: inputParam.npreregno,\r\n         //   nsectioncode: inputParam.nsectioncode || -1,\r\n            userinfo: inputParam.userinfo,\r\n            nprimarykey: inputParam.npreregno,\r\n            ncoareporttypecode: reportCOAType.SAMPLEWISE,\r\n            nreporttypecode: REPORTTYPE.COAREPORT,\r\n            sprimarykeyname: \"npreregno\",\r\n            ncontrolcode: inputParam.ncontrolCode,\r\n            nregtypecode: inputParam.nregtypecode,\r\n            nregsubtypecode: inputParam.nregsubtypecode,\r\n            ntransactiontestcode:inputParam.ntransactiontestcode,\r\n            napproveconfversioncode: inputParam.napprovalversioncode,\r\n            action:inputParam.action\r\n        }\r\n        rsapi.post(\"approval/generateCOAReport\", inputData)\r\n            .then(response => {\r\n\r\n                if (response.data.rtn === \"Success\") {\r\n                    document.getElementById(\"download_data\").setAttribute(\"href\", response.data.filepath);\r\n                    document.getElementById(\"download_data\").click();\r\n                } else {\r\n                    toast.warn(response.data.rtn);\r\n                }\r\n               \r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false,change: inputParam.change,masterData:Data,\r\n                    modalShow: false, selectedRecord: {}, loadEsign: false } })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}