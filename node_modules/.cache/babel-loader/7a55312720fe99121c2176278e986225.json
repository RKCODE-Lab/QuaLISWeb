{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import rsapi from'../rsapi';import{DEFAULT_RETURN}from'./LoginTypes';import{sortData,constructOptionList,rearrangeDateFormat,getFilterConditionsBasedonDataType,queryBuilderfillingColumns}from'../components/CommonScript';import{toast}from'react-toastify';import Axios from'axios';import{initRequest}from'./LoginAction';import{intl}from'../components/App';import{designProperties,SampleType,formCode}from'../components/Enumeration';import{Utils as QbUtils}from\"@react-awesome-query-builder/ui\";var checkTree=QbUtils.checkTree,loadTree=QbUtils.loadTree;export function getDesignTemplateMappingDetail(designtemplatemapping,userInfo,masterData){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\",{ndesigntemplatemappingcode:designtemplatemapping.ndesigntemplatemappingcode,nsampletypecode:designtemplatemapping.nsampletypecode,nregtypecode:designtemplatemapping.nregtypecode,nregsubtypecode:designtemplatemapping.nregsubtypecode,userinfo:userInfo,nformcode:designtemplatemapping.nformcode}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getDesignTemplateMappingComboService(param){return function(dispatch){var screenName=param.screenName;var operation=param.operation;var userInfo=param.userInfo;var nsampletypecode=param.realSampleValue;var nregtypecode=param.realRegTypeValue;var nregsubtypecode=param.realRegSubTypeValue;var ncontrolCode=param.controlId;var moduleTypeArray=param.moduleTypeArray;//if (//(operation === \"create\") && (nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1)) {\nvar isValid=true;//Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\nif(nsampletypecode!==SampleType.Masters&&nsampletypecode!==SampleType.GOODSIN&&nsampletypecode!==SampleType.PROTOCOL//&& nsampletypecode !== SampleType.STABILITY\n){if(nsampletypecode!=-1&&nregtypecode!=-1&&nregsubtypecode!=-1){isValid=true;}else{isValid=false;}}if(isValid){var designtemplatemappingService=rsapi.post(\"designtemplatemapping/getDynamicPreRegDesign\",{userinfo:userInfo,nsampletypecode:nsampletypecode,nregtypecode:nregtypecode,nregsubtypecode:nregsubtypecode});var urlArray=[designtemplatemappingService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var selectedRecord={nnewmodule:moduleTypeArray[0]};var designtemplatemappingMap=constructOptionList(response[0].data.DesignTemplateMapping||[],\"nreactregtemplatecode\",\"sregtemplatename\",undefined,undefined,true);var designtemplatemappingList=designtemplatemappingMap.get(\"OptionList\");var subSampleTemplateList=[];var testListFields={};var qualisModuleList=[];//Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\nif(nsampletypecode!==SampleType.Masters&&nsampletypecode!==SampleType.GOODSIN&&nsampletypecode!==SampleType.PROTOCOL){designtemplatemappingMap=constructOptionList(response[0].data.SubSampleTemplate||[],\"nreactregtemplatecode\",\"sregtemplatename\",undefined,undefined,true);subSampleTemplateList=designtemplatemappingMap.get(\"OptionList\");testListFields=response[0].data.TestListFields&&response[0].data.TestListFields.jsondata;}if(nsampletypecode===SampleType.Masters){var qualisModuleMap=constructOptionList(response[0].data.DT_QualisModule||[],\"nmodulecode\",\"sdisplayname\",undefined,undefined,true);qualisModuleList=qualisModuleMap.get(\"OptionList\");}dispatch({type:DEFAULT_RETURN,payload:{designtemplatemappingList:designtemplatemappingList,subSampleTemplateList:subSampleTemplateList,testListFields:testListFields,operation:operation,screenName:screenName,selectedRecord:selectedRecord,openModal:true,ncontrolCode:ncontrolCode,loading:false,designTemplateQualisModule:qualisModuleList}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});}else{toast.warn(intl.formatMessage({id:\"IDS_SELECTALLVALUESINFILTER\"}));}};}export function reloadDesignTemplateMapping(inputParam){return function(dispatch){dispatch(initRequest(true));rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\",_objectSpread({},inputParam.inputData)).then(function(response){var responseData=_objectSpread({},response.data);responseData=sortData(responseData);var masterData=_objectSpread(_objectSpread({},inputParam.masterData),responseData);//if (inputParam.searchRef !== undefined && inputParam.searchRef.current !== null) {\n//    inputParam.searchRef.current.value = \"\";\nmasterData['searchedData']=undefined;//}\ndispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,showFilter:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getTMPFilterRegType(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getTemplateRegType\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getTMPFilterRegSubType(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getTemplateRegSubType\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getTMPFilterSubmit(inputParam){return function(dispatch){dispatch(initRequest(true));return rsapi.post(\"designtemplatemapping/getFilterSubmit\",inputParam.inputData).then(function(response){var masterData=_objectSpread(_objectSpread({},inputParam.masterData),response.data);var listdesigntemplatemapping=sortData(response.data.DesignTemplateMapping);masterData=_objectSpread(_objectSpread({},masterData),{},{listdesigntemplatemapping:listdesigntemplatemapping});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getMappedFieldProps(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data.jsondataobj||{};//console.log(\"design:\", designData);\nif(inputParam[\"SampleType\"]===SampleType.Masters){// Object.keys(designData).map(formcode => {\ndataResult=[];designData.mastertemplatefields.map(function(field){return field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult.push({// label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],griditem:designData.griditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,gridmoreitem:designData.gridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});// })                   \n}else if(inputParam[\"SampleType\"]===SampleType.GOODSIN){dataResult=[];designData.templatefields.map(function(field){return field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult.push({// label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],griditem:designData.griditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,gridmoreitem:designData.gridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});}//Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\nelse if(inputParam[\"SampleType\"]===SampleType.PROTOCOL){dataResult=[];designData.templatefields.map(function(field){return field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult.push({// label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],listItem:designData.listItem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,displayFields:designData.displayFields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});}else if(inputParam[\"SampleType\"]===SampleType.STABILITY){{Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.sampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&formcode===\"246\"&&dataResult[formcode].push({// label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampledisplayfields:designData[formcode].sampledisplayfields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,// samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\nsamplelistitem:designData[formcode].samplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplelistmoreitems:designData[formcode].samplelistmoreitems?designData[formcode].samplelistmoreitems.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined:false,samplegriditem:designData[formcode].samplegriditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplegridmoreitem:designData[formcode].samplegridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplefilteritem:designData[formcode].samplefilteritem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}}else{// const regSubTypeVersionData = response[1].data;\n//if(regSubTypeVersionData &&  regSubTypeVersionData.jsondata.nneedsubsample === true){\nif(inputParam.operation===\"configuresubsample\"){Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.subsampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&formcode!==\"senttostoragefields\"&&field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult[formcode].push({//label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],subsamplelistitem:designData[formcode].subsamplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}else{Object.keys(designData).map(function(formcode){dataResult[formcode]=[];designData.sampletemplatefields.map(function(field){return!Array.isArray(designData[formcode])&&formcode!==\"senttostoragefields\"&&(formcode!==\"143\"?field[designProperties.VALUE]===\"sreportno\"?false:true:true)&&field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult[formcode].push({// label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampledisplayfields:designData[formcode].sampledisplayfields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,// samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\nsamplelistitem:designData[formcode].samplelistitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplelistmoreitems:designData[formcode].samplelistmoreitems?designData[formcode].samplelistmoreitems.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined:false,samplegriditem:designData[formcode].samplegriditem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplegridmoreitem:designData[formcode].samplegridmoreitem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,samplefilteritem:designData[formcode].samplefilteritem.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,realData:field});});});}}// console.log(\"response[1].data:\", response[1].data);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,dataResult:dataResult,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function combinationUniqueConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataList=[];var dataListCount=[];var designData=response[0].data.jsondataobj||{};var dataListSubSample=[];var dataListCountSubSample=[];if(inputParam[\"SampleType\"]===SampleType.Masters){dataList=designData.mastercombinationunique&&_toConsumableArray(designData.mastercombinationunique)||[];designData.mastercombinationunique&&designData.mastercombinationunique.map(function(item,index){dataListCount.push(index);});}//Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\nelse if(inputParam[\"SampleType\"]===SampleType.GOODSIN||inputParam[\"SampleType\"]===SampleType.PROTOCOL){dataList=designData.combinationunique&&_toConsumableArray(designData.combinationunique)||[];designData.combinationunique&&designData.combinationunique.map(function(item,index){dataListCount.push(index);});}else{dataList=designData.samplecombinationunique&&_toConsumableArray(designData.samplecombinationunique)||[];designData.samplecombinationunique&&designData.samplecombinationunique.map(function(item,index){dataListCount.push(index);});dataListSubSample=designData.subsamplecombinationunique&&_toConsumableArray(designData.subsamplecombinationunique)||[];designData.subsamplecombinationunique&&designData.subsamplecombinationunique.map(function(item,index){dataListCountSubSample.push(index);});}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,dataList:dataList,dataListCount:dataListCount,dataListSubSample:dataListSubSample,dataListCountSubSample:dataListCountSubSample,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolcode:inputParam.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}////Modified the function by sonia on 11th NOV 2024 for jira id:ALPD-5025\nexport function editFieldConfigService(inputParam){return function(dispatch){var filterStatusService=[];var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});if(inputParam[\"SampleType\"]!==SampleType.Masters&&inputParam[\"SampleType\"]!==SampleType.GOODSIN&&inputParam[\"SampleType\"]!==SampleType.PROTOCOL){filterStatusService=rsapi.post('registration/getRegistrationFilterStatus',{nregtypecode:inputParam.inputData.nregtypecode,nregsubtypecode:inputParam.inputData.nregsubtypecode,userinfo:_objectSpread(_objectSpread({},inputParam.inputData.userinfo),{},{nformcode:43})});}else if(inputParam[\"SampleType\"]==SampleType.PROTOCOL){filterStatusService=rsapi.post('protocol/getEditFilterStatus',{userinfo:_objectSpread(_objectSpread({},inputParam.inputData.userinfo),{},{nformcode:formCode.PROTOCOL})});}var urlArray=[fieldService,filterStatusService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data.jsondataobj||{};var filterStatus=response[1].data||[];var list=filterStatus.filter(function(item){return item[\"ntransactionstatus\"]!==0;});filterStatus=list;var selectedRecord={};if(inputParam[\"SampleType\"]===SampleType.Masters){dataResult=[];designData.mastertemplatefields.map(function(field){return dataResult.push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});});}else if(inputParam[\"SampleType\"]===SampleType.PROTOCOL){//Object.keys(designData).map(formcode => {\ndataResult=[];selectedRecord={};var editArray=designData[\"editable\"]||[];designData.templatefields.map(function(field){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nif(!Array.isArray(designData)&&field[designProperties.LISTITEM]!==\"label\"){var index=editArray.findIndex(function(x){return x.label===field[designProperties.VALUE];});if(index!==-1){var fieldEditStatus=editArray[index];if(fieldEditStatus.editableuntill.length>0){var statusArray=[];filterStatus.map(function(item1){var foundIndex=fieldEditStatus.editableuntill.findIndex(function(x){return x===item1.ntransactionstatus;});if(foundIndex!==-1){statusArray.push({label:item1.stransdisplaystatus,value:item1.ntransactionstatus,item:item1});}});selectedRecord[field[designProperties.VALUE]]=statusArray;dataResult.push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}else{dataResult.push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}}}});//})\n}else{if(inputParam.operation===\"configuresubsampleedit\"){Object.keys(designData).map(function(formcode){dataResult[formcode]=[];selectedRecord[formcode]={};var editArray=designData[formcode][\"subsampleeditable\"]||[];designData.subsampletemplatefields.map(function(field){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nif(!Array.isArray(designData[formcode])&&field[designProperties.LISTITEM]!==\"label\"){var index=editArray.findIndex(function(x){return x.label===field[designProperties.VALUE];});if(index!==-1){var fieldEditStatus=editArray[index];if(fieldEditStatus.editableuntill.length>0){var statusArray=[];filterStatus.map(function(item1){var foundIndex=fieldEditStatus.editableuntill.findIndex(function(x){return x===item1.ntransactionstatus;});if(foundIndex!==-1){statusArray.push({label:item1.stransdisplaystatus,value:item1.ntransactionstatus,item:item1});}});selectedRecord[formcode][field[designProperties.VALUE]]=statusArray;dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}else{dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}}}});});}else{Object.keys(designData).map(function(formcode){dataResult[formcode]=[];selectedRecord[formcode]={};var editArray=designData[formcode][\"sampleeditable\"]||[];designData.sampletemplatefields.map(function(field){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nif(field[designProperties.LISTITEM]!==\"label\"&&!Array.isArray(designData[formcode])){var index=editArray.findIndex(function(x){return x.label===field[designProperties.VALUE];});if(index!==-1){var fieldEditStatus=editArray[index];if(fieldEditStatus.editableuntill.length>0){var statusArray=[];filterStatus.map(function(item1){var foundIndex=fieldEditStatus.editableuntill.findIndex(function(x){return x===item1.ntransactionstatus;});if(foundIndex!==-1){statusArray.push({label:item1.stransdisplaystatus,value:item1.ntransactionstatus,item:item1});}});selectedRecord[formcode][field[designProperties.VALUE]]=statusArray;dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}else{dataResult[formcode].push({label:field[designProperties.VALUE],editablestatus:filterStatus,realData:field});}}}});});}}// console.log(\"selectedRecord:\", selectedRecord);\ndispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,editFieldDesignData:designData,//response[0].data.jsondataobj,\n//approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\neditFieldDataResult:dataResult,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode,selectedRecord:selectedRecord}});}).catch(function(error){//console.log(\"error:\", error);\ndispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function mappingFieldConfigService(inputParam){return function(dispatch){var urlArray=[];var regSubTypeVersionService;var fieldService=[];fieldService=rsapi.post(\"designtemplatemapping/getMappedfield\",{\"ndesigntemplatemappingcode\":inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.ndesigntemplatemappingcode,\"userinfo\":inputParam.inputData.userinfo});if(inputParam.inputData[\"napprovalconfigcode\"]){regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});}urlArray=[regSubTypeVersionService,fieldService];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var _payload;var dateSubSamLablesNumber=[];var dateSubSamLablesComboBox=[];var selectedValue=[];var data={};var count=1;var dateLablesnumber=[];var dateLablescombobox=[];if(response[1].data.mappedFields[0].jsondataobj!==null){response[1].data.mappedFields.map(function(row){var displaynameSampleqty={\"displayname\":row.jsondataobj.samplefields.nsampleqty['1']};var displaynameSubSampleqty={\"displayname\":row.jsondataobj.subsamplefields.nsampleqty['1']};var displaynameSampleunit={\"displayname\":row.jsondataobj.samplefields.nunitcode['1']};var displaynameSubSampleunit={\"displayname\":row.jsondataobj.subsamplefields.nunitcode['1']};var Quantity={\"label\":row.jsondataobj.samplefields.nsampleqty['2'],\"value\":1,\"item\":displaynameSampleqty};var Unit={\"label\":row.jsondataobj.samplefields.nunitcode['2'],\"value\":2,\"item\":displaynameSampleunit};var SubUnit={\"label\":row.jsondataobj.subsamplefields.nunitcode['2'],\"value\":3,\"item\":displaynameSubSampleunit};var SubQuantity={\"label\":row.jsondataobj.subsamplefields.nsampleqty['2'],\"value\":4,\"item\":displaynameSubSampleqty};var value={\"Quantity\":Quantity,\"Unit\":Unit,\"SubQuantity\":SubQuantity,\"SubUnit\":SubUnit};selectedValue.push(value);});}var needsubsample=response[0].data.jsondata.nneedsubsample!==undefined?response[0].data.jsondata.nneedsubsample:false;var samplename=inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.sregtemplatename;var mainSample=inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.jsondata;var subSample=inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.subsamplejsondata;mainSample.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.children){component.children.map(function(componentrow){if(componentrow.children){if(componentrow.componentname==='Number'){data={\"LableName\":componentrow.label,\"displayvalue\":count++,\"displayname\":componentrow.displayname};dateLablesnumber.push(data);}if(componentrow.componentname==='Combo Box'||componentrow.componentname==='Drop Down'){data={\"LableName\":componentrow.label,\"displayvalue\":count++,\"displayname\":componentrow.displayname};dateLablescombobox.push(data);}}else{if(componentrow.componentname==='Number'){data={\"LableName\":componentrow.label,\"displayvalue\":count++,\"displayname\":componentrow.displayname};dateLablesnumber.push(data);}if(componentrow.componentname==='Combo Box'||componentrow.componentname==='Drop Down'){data={\"LableName\":componentrow.label,\"displayvalue\":count++,\"displayname\":componentrow.displayname};dateLablescombobox.push(data);}}});}else{if(component.componentname==='Number'){data={\"LableName\":component.label,\"displayvalue\":count++,\"displayname\":component.displayname};dateLablesnumber.push(data);}if(component.componentname==='Combo Box'||component.componentname==='Drop Down'){data={\"LableName\":component.label,\"displayvalue\":count++,\"displayname\":component.displayname};dateLablescombobox.push(data);}}});});});var countsubsample=1;subSample.map(function(row){row.children.map(function(column){column.children.map(function(component){if(component.children){component.children.map(function(componentrow){if(componentrow.children){if(componentrow.componentname==='Number'){data={\"LableName\":componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":componentrow.displayname};dateSubSamLablesNumber.push(data);}if(componentrow.componentname==='Combo Box'||componentrow.componentname==='Drop Down'){data={\"LableName\":componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":componentrow.displayname};dateSubSamLablesComboBox.push(data);}}else{if(componentrow.componentname==='Number'){data={\"LableName\":componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":componentrow.displayname};dateSubSamLablesNumber.push(data);}if(componentrow.componentname==='Combo Box'||componentrow.componentname==='Drop Down'){data={\"LableName\":componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":componentrow.displayname};dateSubSamLablesComboBox.push(data);}}});}else{if(component.componentname==='Number'){data={\"LableName\":component.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":component.displayname};dateSubSamLablesNumber.push(data);}if(component.componentname==='Combo Box'||component.componentname==='Drop Down'){data={\"LableName\":component.displayname[inputParam.inputData.userinfo.slanguagetypecode],\"displayvalue\":countsubsample++,\"displayname\":component.displayname};dateSubSamLablesComboBox.push(data);}}});});});var sample=constructOptionList(dateLablesnumber||[],\"displayvalue\",\"LableName\",\"displayvalue\",undefined,true);var SampleTemplateNumber=sample.get(\"OptionList\");var sampleCombox=constructOptionList(dateLablescombobox||[],\"displayvalue\",\"LableName\",\"displayvalue\",undefined,true);var SampleTemplatecombobox=sampleCombox.get(\"OptionList\");var subSampleListNumber=constructOptionList(dateSubSamLablesNumber||[],\"displayvalue\",\"LableName\",\"displayvalue\",undefined,undefined);var subSampleTemplateNumber=subSampleListNumber.get(\"OptionList\");var subSampleListComboBox=constructOptionList(dateSubSamLablesComboBox||[],\"displayvalue\",\"LableName\",\"displayvalue\",undefined,undefined);var subSampleTemplateCombobox=subSampleListComboBox.get(\"OptionList\");var value=response[1].data.mappedFields[0].jsondataobj;dispatch({type:DEFAULT_RETURN,payload:(_payload={openModal:true,loading:false,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode,needsubsample:needsubsample,SampleTemplateNumber:SampleTemplateNumber,SampleTemplatecombobox:SampleTemplatecombobox,subSampleTemplateNumber:subSampleTemplateNumber,subSampleTemplateCombobox:subSampleTemplateCombobox,samplename:samplename},_defineProperty(_payload,\"needsubsample\",needsubsample),_defineProperty(_payload,\"selectedValue\",selectedValue),_defineProperty(_payload,\"selectedRecord\",value!==null?selectedValue[0]:\"\"),_payload)});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function auditFieldConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getAuditMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo,nregtypecode:inputParam.inputData.nregtypecode,nregsubtypecode:inputParam.inputData.nregsubtypecode});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var dataResult={};var designData=response[0].data[\"MappedTemplateFieldProps\"].jsondataobj||{};var dynamicTable=response[0].data[\"DynamicAuditRecordTable\"]?Object.keys(response[0].data[\"DynamicAuditRecordTable\"]):{};var auditData=response[0].data[\"DynamicAuditRecordTable\"]||{};console.log(\"design:\",designData,inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode);console.log(\"auditData:\",auditData);if(inputParam[\"SampleType\"]===SampleType.Masters){var formcode=Object.keys(auditData)[0];dataResult[formcode]={\"dynamicmaster\":[]};//const tableArray = Object.keys(auditData[formcode]) || [];\n// tableArray.map(item => dataResult[formcode][item] = []);\ndesignData.mastertemplatefields.map(function(field){field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\n//if(!Array.isArray(designData))\n//  {    \ndataResult[formcode][\"dynamicmaster\"].push({//label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleauditfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.auditcapturefields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,sampleauditeditfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});});designData=_defineProperty({},formcode,_objectSpread(_objectSpread({},designData),{},{\"dynamicmaster\":{sampleauditfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.auditcapturefields,sampleauditeditfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields,multilingualfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.multilingualfields}}));// designData = {[formcode] : {\"dynamicmaster\": {...designData, \n//                                                 sampleauditeditfields : auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields, \n//                                                 multilingualfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.multilingualfields\n//                                             }\n//                                         }};\n// }\n//})                                \n}else if(inputParam[\"SampleType\"]===SampleType.GOODSIN){var _formcode=Object.keys(auditData)[0];dataResult[_formcode]={\"goodsinsample\":[]};designData.templatefields.map(function(field){field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult[_formcode][\"goodsinsample\"].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleauditfields:auditData[_formcode][\"goodsinsample\"].jsondataobj.auditcapturefields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,sampleauditeditfields:auditData[_formcode][\"goodsinsample\"].jsondataobj.editmandatoryfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});});designData=_defineProperty({},_formcode,_objectSpread(_objectSpread({},designData),{},{\"goodsinsample\":{sampleauditfields:auditData[_formcode][\"goodsinsample\"].jsondataobj.auditcapturefields,sampleauditeditfields:auditData[_formcode][\"goodsinsample\"].jsondataobj.editmandatoryfields,multilingualfields:auditData[_formcode][\"goodsinsample\"].jsondataobj.multilingualfields}}));}//Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\nelse if(inputParam[\"SampleType\"]===SampleType.PROTOCOL){var _formcode2=Object.keys(auditData)[0];dataResult[_formcode2]={\"protocol\":[]};designData.templatefields.map(function(field){field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult[_formcode2][\"protocol\"].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleauditfields:auditData[_formcode2][\"protocol\"].jsondataobj.auditcapturefields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,sampleauditeditfields:auditData[_formcode2][\"protocol\"].jsondataobj.editmandatoryfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});});designData=_defineProperty({},_formcode2,_objectSpread(_objectSpread({},designData),{},{\"protocol\":{sampleauditfields:auditData[_formcode2][\"protocol\"].jsondataobj.auditcapturefields,sampleauditeditfields:auditData[_formcode2][\"protocol\"].jsondataobj.editmandatoryfields,multilingualfields:auditData[_formcode2][\"protocol\"].jsondataobj.multilingualfields}}));}else{Object.keys(designData).map(function(formcode){if(parseInt(formcode)===formCode.SAMPLEREGISTRATION){dataResult[formcode]=[];var tableArray=Object.keys(auditData[formcode])||[];tableArray.map(function(item){return dataResult[formcode][item]=[];});designData.sampletemplatefields.map(function(field){if(!Array.isArray(designData[formcode])&&field[designProperties.VALUE]!=='sreportno'&&field[designProperties.VALUE]!=='ntestcount'&&field[designProperties.LISTITEM]!==\"label\"){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\ndataResult[formcode][\"registration\"].push({//label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleauditfields:auditData[formcode][\"registration\"].jsondataobj.auditcapturefields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,sampleauditeditfields:auditData[formcode][\"registration\"].jsondataobj.editmandatoryfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});designData[formcode][\"registration\"]=_objectSpread(_objectSpread({},designData[formcode][\"registration\"]),{},{sampleauditfields:auditData[formcode][\"registration\"].jsondataobj.auditcapturefields,multilingualfields:auditData[formcode][\"registration\"].jsondataobj.auditData});designData[formcode][\"registration\"]=_objectSpread(_objectSpread({},designData[formcode][\"registration\"]),{},{sampleauditeditfields:auditData[formcode][\"registration\"].jsondataobj.editmandatoryfields,multilingualfields:auditData[formcode][\"registration\"].jsondataobj.multilingualfields});}});if(inputParam.inputData.nneedsubsample){designData.subsampletemplatefields.map(function(field){if(!Array.isArray(designData[formcode])&&field[designProperties.LISTITEM]!==\"label\"){dataResult[formcode][\"registrationsample\"].push({//label: field[designProperties.VALUE],\nlabel:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],subsampleauditfields:auditData[formcode][\"registrationsample\"].jsondataobj.auditcapturefields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,subsampleauditeditfields:auditData[formcode][\"registrationsample\"].jsondataobj.editmandatoryfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});designData[formcode][\"registrationsample\"]=_objectSpread(_objectSpread({},designData[formcode][\"registrationsample\"]),{},{subsampleauditfields:auditData[formcode][\"registrationsample\"].jsondataobj.auditcapturefields,multilingualfields:auditData[formcode][\"registrationsample\"].jsondataobj.multilingualfields});designData[formcode][\"registrationsample\"]=_objectSpread(_objectSpread({},designData[formcode][\"registrationsample\"]),{},{subsampleauditeditfields:auditData[formcode][\"registrationsample\"].jsondataobj.editmandatoryfields,multilingualfields:auditData[formcode][\"registrationsample\"].jsondataobj.multilingualfields});}});}}});}console.log(\"response[1].data:\",designData,\"dataResult:\",dataResult);dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,auditFieldDesignData:designData,//response[0].data.jsondataobj,\napprovedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,auditFieldDataResult:dataResult,auditData:auditData,auditTable:dynamicTable,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolCode:inputParam.ncontrolcode}});}).catch(function(error){console.log(\"error:\",error);dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function exportFieldConfigService(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var sampleexportdataResult={};var designData=inputParam.SampleType===SampleType.STABILITY?response[0].data.jsondataobj[formCode.STUDYALLOCATION]||{}:response[0].data.jsondataobj[formCode.SAMPLEREGISTRATION]||{};if(inputParam[\"SampleType\"]===SampleType.Masters){sampleexportdataResult['master']=[];response[0].data.jsondataobj.mastertemplatefields.map(function(field){field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nsampleexportdataResult['master'].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleexportfields:response[0].data.jsondataobj.masterexportfields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});});}else if(inputParam[\"SampleType\"]===SampleType.GOODSIN){sampleexportdataResult['master']=[];response[0].data.jsondataobj.nonmandatoryExportFields.map(function(field){field[designProperties.LISTITEM]!==\"label\"&&//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nsampleexportdataResult['master'].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleexportfields:response[0].data.jsondataobj.exportFields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,//  sampleexportfields: response[0].data.jsondataobj.exportFields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\nrealData:field});});}else{sampleexportdataResult['sample']=[];response[0].data.jsondataobj.sampletemplatefields.map(function(field){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nif(field[designProperties.VALUE]!==\"sarno\"&&field[designProperties.VALUE]!==\"sspecname\"&&field[designProperties.VALUE]!==\"dregdate\"&&field[designProperties.VALUE]!==\"stransdisplaystatus\"&&field[designProperties.VALUE]!==\"sreportno\"&&field[designProperties.VALUE]!==\"ntestcount\"&&field[designProperties.LISTITEM]!==\"label\"&&response[0].data.jsondataobj.sampletemplatemandatory.findIndex(function(x){return x===field[designProperties.VALUE];})===-1){sampleexportdataResult[\"sample\"].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleexportfields:designData.sampleExportFields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});}});if(inputParam.inputData.nneedsubsample||inputParam.SampleType===SampleType.STABILITY){sampleexportdataResult['subsample']=[];response[0].data.jsondataobj.subsampletemplatefields.map(function(field){if(field[designProperties.VALUE]!==\"sarno\"&&field[designProperties.VALUE]!==\"ssamplearno\"&&field[designProperties.VALUE]!==\"stransdisplaystatus\"&&field[designProperties.LISTITEM]!==\"label\"){sampleexportdataResult[\"subsample\"].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],sampleexportfields:designData.subSampleExportFields.findIndex(function(x){return x===field[designProperties.VALUE];})!==-1,realData:field});}});}}dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:response[0].data.jsondataobj,approvedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1]&&response[1].data:undefined,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolcode:inputParam.ncontrolcode,sampleexportdataResult:sampleexportdataResult}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function configureCheckList(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getConfigureCheckList',{ndesigntemplatemappingcode:inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode,userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService];var fieldService1=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});urlArray.push(fieldService1);if(inputParam.inputData[\"napprovalconfigcode\"]){var regSubTypeVersionService=rsapi.post(\"registrationsubtype/getApprovedVersion\",{napprovalconfigcode:inputParam.inputData.napprovalconfigcode});urlArray.push(regSubTypeVersionService);}dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var data=response[0].data.ChecklistVersion;var dataQB=response[0].data.ChecklistVersionQB;dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,approvedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[2].data:undefined,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolcode:inputParam.ncontrolcode,checkListData:data,checkListQB:dataQB,designData:response[1].data.jsondataobj}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function getConfigureCheckListLatestVersion(userinfo){return function(dispatch){dispatch(initRequest(true));rsapi.post('designtemplatemapping/getConfigureCheckListLatestVersion',{userinfo:userinfo}).then(function(response){var data=constructOptionList(response.data||[],'nchecklistversioncode','schecklistname').get(\"OptionList\");dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,checkList:data,operation:\"configurechecklistadd\"}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}export function reportFilterType(inputParam){return function(dispatch){var fieldService=rsapi.post('designtemplatemapping/getMappedFieldProps',{designtemplatemapping:inputParam.inputData.designtemplatemapping,userinfo:inputParam.inputData.userinfo});var filterFields=rsapi.post('designtemplatemapping/getReleaseSampleFilterFields',{userinfo:inputParam.inputData.userinfo});var urlArray=[fieldService,filterFields];dispatch(initRequest(true));Axios.all(urlArray).then(function(response){var sampleReportFilterTypeData={};var designData=response[0].data.jsondataobj[formCode.SAMPLEREGISTRATION]||{};var designStructure=response[0].data.jsondataobj[formCode.RELEASE]||{};var jsonParseList=response[1].data||{};var sampleFilterFields=[];jsonParseList.map(function(x){return sampleFilterFields.push(JSON.parse(x.jsondata.value));});sampleReportFilterTypeData['sample']=[];var comboValues=[];response[0].data.jsondataobj.sampletemplatefields.map(function(field){//ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\nif(field[designProperties.VALUE]!==\"sarno\"&&field[designProperties.VALUE]!==\"sspecname\"&&field[designProperties.VALUE]!==\"dregdate\"&&field[designProperties.VALUE]!==\"stransdisplaystatus\"&&field[designProperties.VALUE]!==\"sreportno\"&&field[designProperties.VALUE]!==\"ntestcount\"&&field[designProperties.LISTITEM]!==\"label\"){sampleReportFilterTypeData[\"sample\"].push({label:field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],samplefiltertypefields:designData.samplefiltertypefields&&designData.samplefiltertypefields.find(function(val){return val[\"2\"]===field[designProperties.VALUE];})!==undefined,ismandatory:designData.samplefiltertypefields&&designData.samplefiltertypefields.find(function(val){return val[\"2\"]===field[designProperties.VALUE]&&val[\"ismandatory\"];})!==undefined,//designData.samplefiltertypefields && designData.samplefiltertypefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\nrealData:field});comboValues=field[designProperties.LISTITEM]===\"combo\"?_objectSpread(_objectSpread({},comboValues),{},_defineProperty({},field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],[{\"value\":-1,\"title\":'NA'}])):_objectSpread({},comboValues);}});sampleFilterFields.map(function(x){sampleReportFilterTypeData[\"sample\"].push(_objectSpread(_objectSpread({},x),{},{samplefiltertypefields:designData.samplefiltertypefields&&designData.samplefiltertypefields.find(function(val){return val[\"2\"]===x.realData[designProperties.VALUE];})!==undefined,ismandatory:designData.samplefiltertypefields&&designData.samplefiltertypefields.find(function(val){return val[\"2\"]===x.realData[designProperties.VALUE]&&val[\"ismandatory\"];})!==undefined}));comboValues=x.realData[designProperties.LISTITEM]===\"combo\"?_objectSpread(_objectSpread({},comboValues),{},_defineProperty({},x.realData[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],[{\"value\":-1,\"title\":'NA'}])):_objectSpread({},comboValues);});var extractedColumnList=queryBuilderfillingColumns(sampleReportFilterTypeData[\"sample\"],inputParam.inputData.userinfo.slanguagetypecode);var fields=getFilterConditionsBasedonDataType(extractedColumnList,comboValues);var awesomeTree=designStructure.defaultstructure&&designStructure.defaultstructure.awesomeTree&&checkTree(loadTree(designStructure.defaultstructure.awesomeTree),designStructure.defaultstructure.awesomeConfig);var filterQueryTreeStr=designStructure.defaultstructure&&designStructure.defaultstructure.filterQueryTreeStr;var filterquery=designStructure.defaultstructure&&designStructure.defaultstructure.filterquery;dispatch({type:DEFAULT_RETURN,payload:{openModal:true,loading:false,designData:response[0].data.jsondataobj,approvedRegSubTypeVersion:inputParam.inputData[\"napprovalconfigcode\"]?response[1].data:undefined,operation:inputParam.operation,screenName:inputParam.screenName,ncontrolcode:inputParam.ncontrolcode,sampleReportFilterTypeData:sampleReportFilterTypeData,awesomeConfig:designStructure.defaultstructure&&designStructure.defaultstructure.awesomeConfig,awesomeTree:awesomeTree,fields:fields,comboValues:comboValues,isInitialRender:true,extractedColumnList:extractedColumnList,filterQueryTreeStr:filterQueryTreeStr,filterquery:filterquery}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(intl.formatMessage({id:error.message}));}else{toast.warn(intl.formatMessage({id:error.response.data}));}});};}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/actions/DesignTemplateMappingAction.js"],"names":["rsapi","DEFAULT_RETURN","sortData","constructOptionList","rearrangeDateFormat","getFilterConditionsBasedonDataType","queryBuilderfillingColumns","toast","Axios","initRequest","intl","designProperties","SampleType","formCode","Utils","QbUtils","checkTree","loadTree","getDesignTemplateMappingDetail","designtemplatemapping","userInfo","masterData","dispatch","post","ndesigntemplatemappingcode","nsampletypecode","nregtypecode","nregsubtypecode","userinfo","nformcode","then","response","data","type","payload","loading","catch","error","status","formatMessage","id","message","warn","getDesignTemplateMappingComboService","param","screenName","operation","realSampleValue","realRegTypeValue","realRegSubTypeValue","ncontrolCode","controlId","moduleTypeArray","isValid","Masters","GOODSIN","PROTOCOL","designtemplatemappingService","urlArray","all","selectedRecord","nnewmodule","designtemplatemappingMap","DesignTemplateMapping","undefined","designtemplatemappingList","get","subSampleTemplateList","testListFields","qualisModuleList","SubSampleTemplate","TestListFields","jsondata","qualisModuleMap","DT_QualisModule","openModal","designTemplateQualisModule","reloadDesignTemplateMapping","inputParam","inputData","responseData","showFilter","getTMPFilterRegType","getTMPFilterRegSubType","getTMPFilterSubmit","listdesigntemplatemapping","getMappedFieldProps","fieldService","regSubTypeVersionService","napprovalconfigcode","push","dataResult","designData","jsondataobj","mastertemplatefields","map","field","LISTITEM","label","LABEL","slanguagetypecode","griditem","find","val","VALUE","gridmoreitem","realData","templatefields","listItem","displayFields","STABILITY","Object","keys","formcode","sampletemplatefields","Array","isArray","sampledisplayfields","samplelistitem","samplelistmoreitems","samplegriditem","samplegridmoreitem","samplefilteritem","subsampletemplatefields","subsamplelistitem","approvedRegSubTypeVersion","ncontrolcode","combinationUniqueConfigService","dataList","dataListCount","dataListSubSample","dataListCountSubSample","mastercombinationunique","item","index","combinationunique","samplecombinationunique","subsamplecombinationunique","editFieldConfigService","filterStatusService","filterStatus","list","filter","editablestatus","editArray","findIndex","x","fieldEditStatus","editableuntill","length","statusArray","item1","foundIndex","ntransactionstatus","stransdisplaystatus","value","editFieldDesignData","editFieldDataResult","mappingFieldConfigService","dateSubSamLablesNumber","dateSubSamLablesComboBox","selectedValue","count","dateLablesnumber","dateLablescombobox","mappedFields","row","displaynameSampleqty","samplefields","nsampleqty","displaynameSubSampleqty","subsamplefields","displaynameSampleunit","nunitcode","displaynameSubSampleunit","Quantity","Unit","SubUnit","SubQuantity","needsubsample","nneedsubsample","samplename","sregtemplatename","mainSample","subSample","subsamplejsondata","children","column","component","componentrow","componentname","displayname","countsubsample","sample","SampleTemplateNumber","sampleCombox","SampleTemplatecombobox","subSampleListNumber","subSampleTemplateNumber","subSampleListComboBox","subSampleTemplateCombobox","auditFieldConfigService","dynamicTable","auditData","console","log","sampleauditfields","auditcapturefields","sampleauditeditfields","editmandatoryfields","multilingualfields","parseInt","SAMPLEREGISTRATION","tableArray","subsampleauditfields","subsampleauditeditfields","auditFieldDesignData","auditFieldDataResult","auditTable","exportFieldConfigService","sampleexportdataResult","STUDYALLOCATION","sampleexportfields","masterexportfields","nonmandatoryExportFields","exportFields","sampletemplatemandatory","sampleExportFields","subSampleExportFields","configureCheckList","fieldService1","ChecklistVersion","dataQB","ChecklistVersionQB","checkListData","checkListQB","getConfigureCheckListLatestVersion","checkList","reportFilterType","filterFields","sampleReportFilterTypeData","designStructure","RELEASE","jsonParseList","sampleFilterFields","JSON","parse","comboValues","samplefiltertypefields","ismandatory","extractedColumnList","fields","awesomeTree","defaultstructure","awesomeConfig","filterQueryTreeStr","filterquery","isInitialRender"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\nimport { DEFAULT_RETURN } from './LoginTypes';\r\nimport { sortData, constructOptionList, rearrangeDateFormat,getFilterConditionsBasedonDataType,queryBuilderfillingColumns } from '../components/CommonScript'\r\nimport { toast } from 'react-toastify';\r\nimport Axios from 'axios';\r\nimport { initRequest } from './LoginAction';\r\nimport { intl } from '../components/App';\r\nimport { designProperties, SampleType, formCode } from '../components/Enumeration';\r\nimport { Utils as QbUtils } from \"@react-awesome-query-builder/ui\";\r\n    const { checkTree, loadTree } = QbUtils;\r\n\r\nexport function getDesignTemplateMappingDetail(designtemplatemapping, userInfo, masterData) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n\r\n        return rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\", {\r\n            ndesigntemplatemappingcode: designtemplatemapping.ndesigntemplatemappingcode,\r\n            nsampletypecode: designtemplatemapping.nsampletypecode,\r\n            nregtypecode: designtemplatemapping.nregtypecode,\r\n            nregsubtypecode: designtemplatemapping.nregsubtypecode,\r\n            userinfo: userInfo,\r\n            nformcode: designtemplatemapping.nformcode,\r\n        })\r\n            .then(response => {\r\n\r\n                masterData = { ...masterData, ...response.data };\r\n                sortData(masterData);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { masterData, loading: false } });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({ id: error.message }));\r\n                }\r\n                else {\r\n\r\n                    toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function getDesignTemplateMappingComboService(param) {\r\n    return function (dispatch) {\r\n\r\n        const screenName = param.screenName;\r\n        const operation = param.operation;\r\n        const userInfo = param.userInfo;\r\n        const nsampletypecode = param.realSampleValue;\r\n        const nregtypecode = param.realRegTypeValue;\r\n        const nregsubtypecode = param.realRegSubTypeValue;\r\n        const ncontrolCode = param.controlId;\r\n        const moduleTypeArray = param.moduleTypeArray;\r\n        //if (//(operation === \"create\") && (nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1)) {\r\n\r\n        let isValid = true;\r\n        //Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\n        if (nsampletypecode !== SampleType.Masters && nsampletypecode !== SampleType.GOODSIN \r\n            && nsampletypecode !== SampleType.PROTOCOL //&& nsampletypecode !== SampleType.STABILITY\r\n        ) {\r\n            if ((nsampletypecode != -1) && (nregtypecode != -1) && (nregsubtypecode != -1)) {\r\n                isValid = true;\r\n            }\r\n            else {\r\n                isValid = false;\r\n            }\r\n        }\r\n\r\n        if (isValid) {\r\n            const designtemplatemappingService = rsapi.post(\"designtemplatemapping/getDynamicPreRegDesign\", { userinfo: userInfo, nsampletypecode, nregtypecode, nregsubtypecode });\r\n            let urlArray = [designtemplatemappingService];\r\n            dispatch(initRequest(true));\r\n            Axios.all(urlArray)\r\n                .then(response => {\r\n                    let selectedRecord = { nnewmodule: moduleTypeArray[0] };\r\n                    let designtemplatemappingMap = constructOptionList(response[0].data.DesignTemplateMapping || [], \"nreactregtemplatecode\",\r\n                        \"sregtemplatename\", undefined, undefined, true);\r\n                    const designtemplatemappingList = designtemplatemappingMap.get(\"OptionList\");\r\n\r\n                    let subSampleTemplateList = [];\r\n                    let testListFields = {};\r\n                    let qualisModuleList = [];\r\n                    //Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\n                    if (nsampletypecode !== SampleType.Masters && nsampletypecode !== SampleType.GOODSIN \r\n                        && nsampletypecode !== SampleType.PROTOCOL) {\r\n\r\n                        designtemplatemappingMap = constructOptionList(response[0].data.SubSampleTemplate || [], \"nreactregtemplatecode\",\r\n                            \"sregtemplatename\", undefined, undefined, true);\r\n\r\n                        subSampleTemplateList = designtemplatemappingMap.get(\"OptionList\");\r\n\r\n                        testListFields = response[0].data.TestListFields && response[0].data.TestListFields.jsondata;\r\n                    }\r\n\r\n                    if (nsampletypecode === SampleType.Masters) {\r\n                        const qualisModuleMap = constructOptionList(response[0].data.DT_QualisModule || [], \"nmodulecode\",\r\n                            \"sdisplayname\", undefined, undefined, true);\r\n\r\n                        qualisModuleList = qualisModuleMap.get(\"OptionList\");\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n\r\n                            designtemplatemappingList,\r\n                            subSampleTemplateList,\r\n                            testListFields,\r\n                            operation, screenName, selectedRecord, openModal: true,\r\n                            ncontrolCode, loading: false,\r\n                            designTemplateQualisModule: qualisModuleList\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(intl.formatMessage({ id: error.message }));\r\n                    }\r\n                    else {\r\n\r\n                        toast.warn(intl.formatMessage({ id: error.response.data }));\r\n                    }\r\n                })\r\n        }\r\n        else {\r\n\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTALLVALUESINFILTER\" }));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function reloadDesignTemplateMapping(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post(\"designtemplatemapping/getDesignTemplateMapping\", { ...inputParam.inputData })\r\n            .then(response => {\r\n                let responseData = { ...response.data }\r\n                responseData = sortData(responseData)\r\n                let masterData = {\r\n                    ...inputParam.masterData,\r\n                    ...responseData,\r\n                }\r\n                //if (inputParam.searchRef !== undefined && inputParam.searchRef.current !== null) {\r\n                //    inputParam.searchRef.current.value = \"\";\r\n                masterData['searchedData'] = undefined\r\n                //}\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        showFilter: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterRegType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getTemplateRegType\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterRegSubType(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getTemplateRegSubType\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getTMPFilterSubmit(inputParam) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        return rsapi.post(\"designtemplatemapping/getFilterSubmit\", inputParam.inputData)\r\n            .then(response => {\r\n                let masterData = { ...inputParam.masterData, ...response.data }\r\n                let listdesigntemplatemapping = sortData(response.data.DesignTemplateMapping);\r\n                masterData = { ...masterData, listdesigntemplatemapping }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData, loading: false\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n\r\n}\r\n\r\nexport function getMappedFieldProps(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        let urlArray = [fieldService];\r\n\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n                let designData = response[0].data.jsondataobj || {};\r\n                //console.log(\"design:\", designData);\r\n\r\n                if (inputParam[\"SampleType\"] === SampleType.Masters) {\r\n                    // Object.keys(designData).map(formcode => {\r\n                    dataResult = [];\r\n                    designData.mastertemplatefields.map(field =>\r\n                        (field[designProperties.LISTITEM]!==\"label\") &&  //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        dataResult.push({\r\n                            // label: field[designProperties.VALUE],\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            griditem: designData.griditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            gridmoreitem: designData.gridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            realData: field\r\n                        })\r\n                    )\r\n                    // })                   \r\n                } else if (inputParam[\"SampleType\"] === SampleType.GOODSIN) {\r\n                    dataResult = [];\r\n                    designData.templatefields.map(field =>\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        dataResult.push({\r\n                            // label: field[designProperties.VALUE],\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            griditem: designData.griditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            gridmoreitem: designData.gridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            realData: field\r\n                        })\r\n                    )\r\n                }\r\n                //Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\n                else if (inputParam[\"SampleType\"] === SampleType.PROTOCOL) {\r\n                    dataResult = [];\r\n                    designData.templatefields.map(field =>\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        dataResult.push({\r\n                            // label: field[designProperties.VALUE],\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            listItem: designData.listItem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            displayFields: designData.displayFields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                            realData: field\r\n                        })\r\n                    )\r\n                }\r\n                else if (inputParam[\"SampleType\"] === SampleType.STABILITY) {\r\n                    {\r\n                        Object.keys(designData).map(formcode => {\r\n                            dataResult[formcode] = [];\r\n                            designData.sampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode]) && formcode === \"246\"  &&\r\n                                dataResult[formcode].push({\r\n                                    // label: field[designProperties.VALUE],\r\n                                    label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                    sampledisplayfields: designData[formcode].sampledisplayfields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    // samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\r\n                                    samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplelistmoreitems: designData[formcode].samplelistmoreitems ? designData[formcode].samplelistmoreitems.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined : false,\r\n                                    samplegriditem: designData[formcode].samplegriditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplegridmoreitem: designData[formcode].samplegridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplefilteritem: designData[formcode].samplefilteritem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData: field\r\n                                })\r\n                            )\r\n                        })\r\n                    }\r\n                }\r\n\r\n                else {\r\n                    // const regSubTypeVersionData = response[1].data;\r\n                    //if(regSubTypeVersionData &&  regSubTypeVersionData.jsondata.nneedsubsample === true){\r\n                    if (inputParam.operation === \"configuresubsample\") {\r\n                        Object.keys(designData).map(formcode => {\r\n                            dataResult[formcode] = [];\r\n                            designData.subsampletemplatefields.map(field =>\r\n                                !Array.isArray(designData[formcode]) && formcode !== \"senttostoragefields\" &&\r\n                                (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                                dataResult[formcode].push({\r\n                                    //label: field[designProperties.VALUE],\r\n                                    label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                    subsamplelistitem: designData[formcode].subsamplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData: field\r\n                                })\r\n                            )\r\n                        })\r\n                    }\r\n                    else {\r\n                        Object.keys(designData).map(formcode => {\r\n                            dataResult[formcode] = [];\r\n                            designData.sampletemplatefields.map(field =>\r\n                                 \r\n                                !Array.isArray(designData[formcode]) && formcode !== \"senttostoragefields\"\r\n                                 && (formcode !== \"143\" ? field[designProperties.VALUE] === \"sreportno\" ? false : true : true) &&\r\n                                 (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                                dataResult[formcode].push({\r\n                                    // label: field[designProperties.VALUE],\r\n                                    label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                    sampledisplayfields: designData[formcode].sampledisplayfields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    // samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) === undefined ? \"none\" : true,\r\n                                    samplelistitem: designData[formcode].samplelistitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplelistmoreitems: designData[formcode].samplelistmoreitems ? designData[formcode].samplelistmoreitems.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined : false,\r\n                                    samplegriditem: designData[formcode].samplegriditem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplegridmoreitem: designData[formcode].samplegridmoreitem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    samplefilteritem: designData[formcode].samplefilteritem.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                    realData: field\r\n                                })\r\n                            )\r\n                        })\r\n                    }\r\n                }\r\n                // console.log(\"response[1].data:\", response[1].data);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data : undefined,\r\n                        dataResult,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function combinationUniqueConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        let urlArray = [fieldService];\r\n\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataList = [];\r\n                let dataListCount = [];\r\n                let designData = response[0].data.jsondataobj || {};\r\n\r\n                let dataListSubSample = []\r\n                let dataListCountSubSample = [];\r\n\r\n                if (inputParam[\"SampleType\"] === SampleType.Masters) {\r\n                    dataList = designData.mastercombinationunique && [...designData.mastercombinationunique] || []\r\n                    designData.mastercombinationunique && designData.mastercombinationunique.map((item, index) => { dataListCount.push(index) })\r\n                }\r\n                //Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\n                else if (inputParam[\"SampleType\"] === SampleType.GOODSIN || inputParam[\"SampleType\"] === SampleType.PROTOCOL) {\r\n                    dataList = designData.combinationunique && [...designData.combinationunique] || []\r\n                    designData.combinationunique && designData.combinationunique.map((item, index) => { dataListCount.push(index) })\r\n\r\n                }\r\n                else {\r\n                    dataList = designData.samplecombinationunique && [...designData.samplecombinationunique] || []\r\n                    designData.samplecombinationunique && designData.samplecombinationunique.map((item, index) => { dataListCount.push(index) })\r\n\r\n                    dataListSubSample = designData.subsamplecombinationunique && [...designData.subsamplecombinationunique] || []\r\n                    designData.subsamplecombinationunique && designData.subsamplecombinationunique.map((item, index) => { dataListCountSubSample.push(index) })\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data : undefined,\r\n                        dataList, dataListCount, dataListSubSample, dataListCountSubSample,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolcode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n////Modified the function by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\nexport function editFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        let filterStatusService =[];\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n\r\n        if(inputParam[\"SampleType\"] !== SampleType.Masters && inputParam[\"SampleType\"] !== SampleType.GOODSIN && inputParam[\"SampleType\"] !== SampleType.PROTOCOL){\r\n            filterStatusService = rsapi.post('registration/getRegistrationFilterStatus',\r\n                {   \r\n                    nregtypecode: inputParam.inputData.nregtypecode,\r\n                    nregsubtypecode: inputParam.inputData.nregsubtypecode,\r\n                    userinfo: { ...inputParam.inputData.userinfo, nformcode: 43 }\r\n                });\r\n        }else if(inputParam[\"SampleType\"] == SampleType.PROTOCOL){\r\n            filterStatusService = rsapi.post('protocol/getEditFilterStatus',\r\n                {   \r\n                  \r\n                    userinfo: { ...inputParam.inputData.userinfo, nformcode: formCode.PROTOCOL}\r\n                });\r\n        }\r\n        \r\n        let urlArray = [fieldService, filterStatusService];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n                let designData = response[0].data.jsondataobj || {};\r\n                let filterStatus = response[1].data || [];\r\n\r\n                const list = filterStatus.filter(item => item[\"ntransactionstatus\"] !== 0)\r\n                filterStatus = list;\r\n\r\n                let selectedRecord = {};\r\n                if (inputParam[\"SampleType\"] === SampleType.Masters) {\r\n                    dataResult = [];\r\n                    designData.mastertemplatefields.map(field =>\r\n                        dataResult.push({ label: field[designProperties.VALUE], editablestatus: filterStatus, realData: field })\r\n                    )\r\n                }else if(inputParam[\"SampleType\"] === SampleType.PROTOCOL) {\r\n                    //Object.keys(designData).map(formcode => {\r\n                        dataResult= [];\r\n                        selectedRecord = {};\r\n                        const editArray = designData[\"editable\"] || [];\r\n\r\n                        designData.templatefields.map(field => {\r\n                            //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                            if (!Array.isArray(designData) &&  (field[designProperties.LISTITEM]!==\"label\")) {\r\n\r\n                                const index = editArray.findIndex(x => x.label === field[designProperties.VALUE]);\r\n                                if (index !== -1) {\r\n                                    const fieldEditStatus = editArray[index];\r\n                                    if (fieldEditStatus.editableuntill.length > 0) {\r\n                                        const statusArray = [];\r\n                                        filterStatus.map(item1 => {\r\n\r\n                                            const foundIndex = fieldEditStatus.editableuntill.findIndex(x => x === item1.ntransactionstatus);\r\n\r\n                                            if (foundIndex !== -1) {\r\n                                                statusArray.push({ label: item1.stransdisplaystatus, value: item1.ntransactionstatus, item: item1 });\r\n                                            }\r\n                                        })\r\n                                        selectedRecord[field[designProperties.VALUE]] = statusArray;\r\n\r\n                                        dataResult.push({\r\n                                            label: field[designProperties.VALUE],\r\n                                            editablestatus: filterStatus,\r\n                                            realData: field\r\n                                        })\r\n                                    } else {\r\n\r\n                                        dataResult.push({\r\n                                            label: field[designProperties.VALUE],\r\n                                            editablestatus: filterStatus,\r\n                                            realData: field\r\n                                        })\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n                        })\r\n\r\n                    //})\r\n                }\r\n                \r\n                else {\r\n                    if (inputParam.operation === \"configuresubsampleedit\") {\r\n                        Object.keys(designData).map(formcode => {\r\n                            dataResult[formcode] = [];\r\n                            selectedRecord[formcode] = {};\r\n                            const editArray = designData[formcode][\"subsampleeditable\"] || [];\r\n\r\n                            designData.subsampletemplatefields.map(field => {\r\n                                //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                                if (!Array.isArray(designData[formcode]) &&  (field[designProperties.LISTITEM]!==\"label\")) {\r\n                                    const index = editArray.findIndex(x => x.label === field[designProperties.VALUE]);\r\n                                    if (index !== -1) {\r\n                                        const fieldEditStatus = editArray[index];\r\n                                        if (fieldEditStatus.editableuntill.length > 0) {\r\n                                            const statusArray = [];\r\n                                            filterStatus.map(item1 => {\r\n\r\n                                                const foundIndex = fieldEditStatus.editableuntill.findIndex(x => x === item1.ntransactionstatus);\r\n\r\n                                                if (foundIndex !== -1) {\r\n                                                    statusArray.push({ label: item1.stransdisplaystatus, value: item1.ntransactionstatus, item: item1 });\r\n                                                }\r\n                                            })\r\n                                            selectedRecord[formcode][field[designProperties.VALUE]] = statusArray;\r\n\r\n                                            dataResult[formcode].push({\r\n                                                label: field[designProperties.VALUE],\r\n                                                editablestatus: filterStatus,\r\n                                                realData: field\r\n                                            })\r\n                                        } else {\r\n\r\n                                            dataResult[formcode].push({\r\n                                                label: field[designProperties.VALUE],\r\n                                                editablestatus: filterStatus,\r\n                                                realData: field\r\n                                            })\r\n                                        }\r\n\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        })\r\n                    }\r\n                    else {\r\n                        Object.keys(designData).map(formcode => {\r\n                            dataResult[formcode] = [];\r\n                            selectedRecord[formcode] = {};\r\n                            const editArray = designData[formcode][\"sampleeditable\"] || [];\r\n\r\n                            designData.sampletemplatefields.map(field => {\r\n                                //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                                if ((field[designProperties.LISTITEM]!==\"label\") && !Array.isArray(designData[formcode])) {\r\n\r\n                                    const index = editArray.findIndex(x => x.label === field[designProperties.VALUE]);\r\n                                    if (index !== -1) {\r\n                                        const fieldEditStatus = editArray[index];\r\n                                        if (fieldEditStatus.editableuntill.length > 0) {\r\n                                            const statusArray = [];\r\n                                            filterStatus.map(item1 => {\r\n\r\n                                                const foundIndex = fieldEditStatus.editableuntill.findIndex(x => x === item1.ntransactionstatus);\r\n\r\n                                                if (foundIndex !== -1) {\r\n                                                    statusArray.push({ label: item1.stransdisplaystatus, value: item1.ntransactionstatus, item: item1 });\r\n                                                }\r\n                                            })\r\n                                            selectedRecord[formcode][field[designProperties.VALUE]] = statusArray;\r\n\r\n                                            dataResult[formcode].push({\r\n                                                label: field[designProperties.VALUE],\r\n                                                editablestatus: filterStatus,\r\n                                                realData: field\r\n                                            })\r\n                                        } else {\r\n\r\n                                            dataResult[formcode].push({\r\n                                                label: field[designProperties.VALUE],\r\n                                                editablestatus: filterStatus,\r\n                                                realData: field\r\n                                            })\r\n                                        }\r\n\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        })\r\n                    }\r\n                }\r\n\r\n                // console.log(\"selectedRecord:\", selectedRecord);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        editFieldDesignData: designData,//response[0].data.jsondataobj,\r\n                        //approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data :undefined,\r\n                        editFieldDataResult: dataResult,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode,\r\n                        selectedRecord\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                //console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function mappingFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        let urlArray = [];\r\n        let regSubTypeVersionService;\r\n        let fieldService = [];\r\n        fieldService = rsapi.post(\"designtemplatemapping/getMappedfield\",\r\n            { \"ndesigntemplatemappingcode\": inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.ndesigntemplatemappingcode, \"userinfo\": inputParam.inputData.userinfo });\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n\r\n            regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n        }\r\n        urlArray = [regSubTypeVersionService, fieldService];\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dateSubSamLablesNumber = [];\r\n                let dateSubSamLablesComboBox = [];\r\n                let selectedValue = [];\r\n                let data = {};\r\n                let count = 1;\r\n                let dateLablesnumber = [];\r\n                let dateLablescombobox = [];\r\n                if (response[1].data.mappedFields[0].jsondataobj !== null) {\r\n                    response[1].data.mappedFields.map((row) => {\r\n                        let displaynameSampleqty = { \"displayname\": row.jsondataobj.samplefields.nsampleqty['1'] }\r\n                        let displaynameSubSampleqty = { \"displayname\": row.jsondataobj.subsamplefields.nsampleqty['1'] }\r\n                        let displaynameSampleunit = { \"displayname\": row.jsondataobj.samplefields.nunitcode['1'] }\r\n                        let displaynameSubSampleunit = { \"displayname\": row.jsondataobj.subsamplefields.nunitcode['1'] }\r\n                        const Quantity = { \"label\": row.jsondataobj.samplefields.nsampleqty['2'], \"value\": 1, \"item\": displaynameSampleqty };\r\n                        const Unit = { \"label\": row.jsondataobj.samplefields.nunitcode['2'], \"value\": 2, \"item\": displaynameSampleunit }\r\n                        const SubUnit = { \"label\": row.jsondataobj.subsamplefields.nunitcode['2'], \"value\": 3, \"item\": displaynameSubSampleunit }\r\n                        const SubQuantity = { \"label\": row.jsondataobj.subsamplefields.nsampleqty['2'], \"value\": 4, \"item\": displaynameSubSampleqty }\r\n                        const value = { \"Quantity\": Quantity, \"Unit\": Unit, \"SubQuantity\": SubQuantity, \"SubUnit\": SubUnit }\r\n                        selectedValue.push(value);\r\n                    });\r\n                }\r\n                const needsubsample = response[0].data.jsondata.nneedsubsample !== undefined ? response[0].data.jsondata.nneedsubsample : false;\r\n                const samplename = inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.sregtemplatename;\r\n                const mainSample = inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.jsondata;\r\n                const subSample = inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode.subsamplejsondata;\r\n                mainSample.map((row) => {\r\n                    row.children.map((column) => {\r\n                        column.children.map((component) => {\r\n                            if (component.children) {\r\n                                component.children.map((componentrow) => {\r\n                                    if (componentrow.children) {\r\n                                        if (componentrow.componentname === 'Number') {\r\n                                            data = { \"LableName\": componentrow.label, \"displayvalue\": count++, \"displayname\": componentrow.displayname }\r\n                                            dateLablesnumber.push(data)\r\n                                        }\r\n                                        if (componentrow.componentname === 'Combo Box' || componentrow.componentname === 'Drop Down') {\r\n                                            data = { \"LableName\": componentrow.label, \"displayvalue\": count++, \"displayname\": componentrow.displayname }\r\n                                            dateLablescombobox.push(data)\r\n\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        if (componentrow.componentname === 'Number') {\r\n                                            data = { \"LableName\": componentrow.label, \"displayvalue\": count++, \"displayname\": componentrow.displayname }\r\n                                            dateLablesnumber.push(data)\r\n                                        }\r\n                                        if (componentrow.componentname === 'Combo Box' || componentrow.componentname === 'Drop Down') {\r\n                                            data = { \"LableName\": componentrow.label, \"displayvalue\": count++, \"displayname\": componentrow.displayname }\r\n                                            dateLablescombobox.push(data)\r\n\r\n                                        }\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                if (component.componentname === 'Number') {\r\n                                    data = { \"LableName\": component.label, \"displayvalue\": count++, \"displayname\": component.displayname }\r\n                                    dateLablesnumber.push(data)\r\n                                }\r\n                                if (component.componentname === 'Combo Box' || component.componentname === 'Drop Down') {\r\n                                    data = { \"LableName\": component.label, \"displayvalue\": count++, \"displayname\": component.displayname }\r\n                                    dateLablescombobox.push(data)\r\n\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n                let countsubsample = 1\r\n                subSample.map((row) => {\r\n                    row.children.map((column) => {\r\n                        column.children.map((component) => {\r\n                            if (component.children) {\r\n                                component.children.map((componentrow) => {\r\n                                    if (componentrow.children) {\r\n                                        if (componentrow.componentname === 'Number') {\r\n                                            data = { \"LableName\": componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": componentrow.displayname }\r\n                                            dateSubSamLablesNumber.push(data)\r\n\r\n                                        }\r\n                                        if (componentrow.componentname === 'Combo Box' || componentrow.componentname === 'Drop Down') {\r\n                                            data = { \"LableName\": componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": componentrow.displayname }\r\n                                            dateSubSamLablesComboBox.push(data)\r\n\r\n                                        }\r\n                                    } else {\r\n                                        if (componentrow.componentname === 'Number') {\r\n                                            data = { \"LableName\": componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": componentrow.displayname }\r\n                                            dateSubSamLablesNumber.push(data)\r\n\r\n                                        }\r\n                                        if (componentrow.componentname === 'Combo Box' || componentrow.componentname === 'Drop Down') {\r\n                                            data = { \"LableName\": componentrow.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": componentrow.displayname }\r\n                                            dateSubSamLablesComboBox.push(data)\r\n\r\n                                        }\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                if (component.componentname === 'Number') {\r\n                                    data = { \"LableName\": component.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": component.displayname }\r\n                                    dateSubSamLablesNumber.push(data)\r\n                                }\r\n                                if (component.componentname === 'Combo Box' || component.componentname === 'Drop Down') {\r\n                                    data = { \"LableName\": component.displayname[inputParam.inputData.userinfo.slanguagetypecode], \"displayvalue\": countsubsample++, \"displayname\": component.displayname }\r\n                                    dateSubSamLablesComboBox.push(data)\r\n\r\n                                }\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n                const sample = constructOptionList(dateLablesnumber || [], \"displayvalue\",\r\n                    \"LableName\", \"displayvalue\", undefined, true);\r\n                let SampleTemplateNumber = sample.get(\"OptionList\");\r\n                const sampleCombox = constructOptionList(dateLablescombobox || [], \"displayvalue\",\r\n                    \"LableName\", \"displayvalue\", undefined, true);\r\n                let SampleTemplatecombobox = sampleCombox.get(\"OptionList\");\r\n                const subSampleListNumber = constructOptionList(dateSubSamLablesNumber || [], \"displayvalue\",\r\n                    \"LableName\", \"displayvalue\", undefined, undefined);\r\n                let subSampleTemplateNumber = subSampleListNumber.get(\"OptionList\");\r\n                const subSampleListComboBox = constructOptionList(dateSubSamLablesComboBox || [], \"displayvalue\",\r\n                    \"LableName\", \"displayvalue\", undefined, undefined);\r\n                let subSampleTemplateCombobox = subSampleListComboBox.get(\"OptionList\");\r\n                const value = response[1].data.mappedFields[0].jsondataobj;\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode,\r\n                        needsubsample, SampleTemplateNumber, SampleTemplatecombobox,\r\n                        subSampleTemplateNumber, subSampleTemplateCombobox, samplename, needsubsample,\r\n                        selectedValue, selectedRecord: value !== null ? selectedValue[0] : \"\"\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function auditFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getAuditMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo,\r\n                nregtypecode:inputParam.inputData.nregtypecode,\r\n                nregsubtypecode:inputParam.inputData.nregsubtypecode\r\n            });\r\n        let urlArray = [fieldService];\r\n\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let dataResult = {};\r\n\r\n                let designData = response[0].data[\"MappedTemplateFieldProps\"].jsondataobj || {};\r\n\r\n                const dynamicTable = response[0].data[\"DynamicAuditRecordTable\"] ?\r\n                    Object.keys(response[0].data[\"DynamicAuditRecordTable\"]) : {};\r\n                let auditData = response[0].data[\"DynamicAuditRecordTable\"] || {};\r\n\r\n                console.log(\"design:\", designData, inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode);\r\n\r\n                console.log(\"auditData:\", auditData);\r\n                if (inputParam[\"SampleType\"] === SampleType.Masters) {\r\n\r\n                    const formcode = Object.keys(auditData)[0];\r\n\r\n                    dataResult[formcode] = { \"dynamicmaster\": [] };\r\n\r\n                    //const tableArray = Object.keys(auditData[formcode]) || [];\r\n                    // tableArray.map(item => dataResult[formcode][item] = []);\r\n\r\n                    designData.mastertemplatefields.map(field => {\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        //if(!Array.isArray(designData))\r\n                        //  {    \r\n                        dataResult[formcode][\"dynamicmaster\"].push({\r\n                            //label: field[designProperties.VALUE],\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            sampleauditfields: auditData[formcode][\"dynamicmaster\"].jsondataobj.auditcapturefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            sampleauditeditfields: auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            realData: field\r\n                        })\r\n                    })\r\n                    designData = {\r\n                        [formcode]: {\r\n                            ...designData, \"dynamicmaster\": {\r\n                                sampleauditfields: auditData[formcode][\"dynamicmaster\"].jsondataobj.auditcapturefields,\r\n                                sampleauditeditfields: auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields,\r\n                                multilingualfields: auditData[formcode][\"dynamicmaster\"].jsondataobj.multilingualfields\r\n                            }\r\n                        }\r\n                    };\r\n                    // designData = {[formcode] : {\"dynamicmaster\": {...designData, \r\n                    //                                                 sampleauditeditfields : auditData[formcode][\"dynamicmaster\"].jsondataobj.editmandatoryfields, \r\n                    //                                                 multilingualfields:auditData[formcode][\"dynamicmaster\"].jsondataobj.multilingualfields\r\n                    //                                             }\r\n                    //                                         }};\r\n                    // }\r\n                    //})                                \r\n\r\n                }else if(inputParam[\"SampleType\"] === SampleType.GOODSIN){\r\n                    const formcode = Object.keys(auditData)[0];\r\n                    dataResult[formcode] = { \"goodsinsample\": [] };\r\n\r\n                    designData.templatefields.map(field => {\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        dataResult[formcode][\"goodsinsample\"].push({\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            sampleauditfields: auditData[formcode][\"goodsinsample\"].jsondataobj.auditcapturefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            sampleauditeditfields: auditData[formcode][\"goodsinsample\"].jsondataobj.editmandatoryfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            realData: field\r\n                        })\r\n                    })\r\n\r\n                    designData = {\r\n                        [formcode]: {\r\n                            ...designData, \"goodsinsample\": {\r\n                                sampleauditfields: auditData[formcode][\"goodsinsample\"].jsondataobj.auditcapturefields,\r\n                                sampleauditeditfields: auditData[formcode][\"goodsinsample\"].jsondataobj.editmandatoryfields,\r\n                                multilingualfields: auditData[formcode][\"goodsinsample\"].jsondataobj.multilingualfields\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                }\r\n                //Added by sonia on 11th NOV 2024 for jira id:ALPD-5025\r\n                else if(inputParam[\"SampleType\"] === SampleType.PROTOCOL){\r\n                    const formcode = Object.keys(auditData)[0];\r\n                    dataResult[formcode] = { \"protocol\": [] };\r\n\r\n                    designData.templatefields.map(field => {\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        dataResult[formcode][\"protocol\"].push({\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            sampleauditfields: auditData[formcode][\"protocol\"].jsondataobj.auditcapturefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            sampleauditeditfields: auditData[formcode][\"protocol\"].jsondataobj.editmandatoryfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            realData: field\r\n                        })\r\n                    })\r\n\r\n                    designData = {\r\n                        [formcode]: {\r\n                            ...designData, \"protocol\": {\r\n                                sampleauditfields: auditData[formcode][\"protocol\"].jsondataobj.auditcapturefields,\r\n                                sampleauditeditfields: auditData[formcode][\"protocol\"].jsondataobj.editmandatoryfields,\r\n                                multilingualfields: auditData[formcode][\"protocol\"].jsondataobj.multilingualfields\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                }\r\n                else {\r\n                    Object.keys(designData).map(formcode => {\r\n                        if (parseInt(formcode) === formCode.SAMPLEREGISTRATION) {\r\n                            dataResult[formcode] = [];\r\n\r\n                            const tableArray = Object.keys(auditData[formcode]) || [];\r\n                            tableArray.map(item => dataResult[formcode][item] = []);\r\n\r\n                            designData.sampletemplatefields.map(field => {\r\n                                if (!Array.isArray(designData[formcode]) && field[designProperties.VALUE]!=='sreportno'\r\n                                 && field[designProperties.VALUE]!=='ntestcount'  && (field[designProperties.LISTITEM]!==\"label\") ) { //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                                    dataResult[formcode][\"registration\"].push({\r\n                                        //label: field[designProperties.VALUE],\r\n                                        label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                        sampleauditfields: auditData[formcode][\"registration\"].jsondataobj.auditcapturefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                        sampleauditeditfields: auditData[formcode][\"registration\"].jsondataobj.editmandatoryfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                        realData: field\r\n                                    })\r\n\r\n                                    designData[formcode][\"registration\"] = { ...designData[formcode][\"registration\"], sampleauditfields: auditData[formcode][\"registration\"].jsondataobj.auditcapturefields, multilingualfields: auditData[formcode][\"registration\"].jsondataobj.auditData };\r\n                                    designData[formcode][\"registration\"] = { ...designData[formcode][\"registration\"], sampleauditeditfields: auditData[formcode][\"registration\"].jsondataobj.editmandatoryfields, multilingualfields: auditData[formcode][\"registration\"].jsondataobj.multilingualfields };\r\n                                }\r\n                            })\r\n\r\n                            if (inputParam.inputData.nneedsubsample) {\r\n                                designData.subsampletemplatefields.map(field => {\r\n                                    if (!Array.isArray(designData[formcode]) && (field[designProperties.LISTITEM]!==\"label\")) {\r\n                                        dataResult[formcode][\"registrationsample\"].push({\r\n                                            //label: field[designProperties.VALUE],\r\n                                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                            subsampleauditfields: auditData[formcode][\"registrationsample\"].jsondataobj.auditcapturefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                            subsampleauditeditfields: auditData[formcode][\"registrationsample\"].jsondataobj.editmandatoryfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                            realData: field\r\n                                        })\r\n\r\n                                        designData[formcode][\"registrationsample\"] = { ...designData[formcode][\"registrationsample\"], subsampleauditfields: auditData[formcode][\"registrationsample\"].jsondataobj.auditcapturefields, multilingualfields: auditData[formcode][\"registrationsample\"].jsondataobj.multilingualfields };\r\n                                        designData[formcode][\"registrationsample\"] = { ...designData[formcode][\"registrationsample\"], subsampleauditeditfields: auditData[formcode][\"registrationsample\"].jsondataobj.editmandatoryfields, multilingualfields: auditData[formcode][\"registrationsample\"].jsondataobj.multilingualfields };\r\n                                    }\r\n                                }\r\n                                )\r\n                            }\r\n                        }\r\n\r\n                    })\r\n\r\n                }\r\n                console.log(\"response[1].data:\", designData, \"dataResult:\", dataResult);\r\n\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        auditFieldDesignData: designData,//response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data : undefined,\r\n                        auditFieldDataResult: dataResult,\r\n                        auditData,\r\n                        auditTable: dynamicTable,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolCode: inputParam.ncontrolcode\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(\"error:\", error);\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function exportFieldConfigService(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        let urlArray = [fieldService];\r\n\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let sampleexportdataResult = {};\r\n                let designData = inputParam.SampleType===SampleType.STABILITY?response[0].data.jsondataobj[formCode.STUDYALLOCATION] || {}\r\n                : response[0].data.jsondataobj[formCode.SAMPLEREGISTRATION] || {};\r\n\r\n                if (inputParam[\"SampleType\"] === SampleType.Masters) {\r\n                    sampleexportdataResult['master'] = []\r\n                    response[0].data.jsondataobj.mastertemplatefields.map(field => {\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        sampleexportdataResult['master'].push({\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            sampleexportfields: response[0].data.jsondataobj.masterexportfields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            realData: field\r\n                        })\r\n                    })\r\n\r\n                }else if(inputParam[\"SampleType\"] === SampleType.GOODSIN){\r\n                    sampleexportdataResult['master'] = []\r\n                    response[0].data.jsondataobj.nonmandatoryExportFields.map(field => {\r\n                        (field[designProperties.LISTITEM]!==\"label\") && //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        sampleexportdataResult['master'].push({\r\n                            label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                            sampleexportfields: response[0].data.jsondataobj.exportFields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                          //  sampleexportfields: response[0].data.jsondataobj.exportFields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                            realData: field\r\n                        })\r\n                    })\r\n                } \r\n                else {\r\n                    sampleexportdataResult['sample'] = []\r\n                    response[0].data.jsondataobj.sampletemplatefields.map(field => {\r\n                        //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                        if (field[designProperties.VALUE] !== \"sarno\" && field[designProperties.VALUE] !== \"sspecname\" && field[designProperties.VALUE] !==\r\n                            \"dregdate\" && field[designProperties.VALUE] !== \"stransdisplaystatus\" && field[designProperties.VALUE]!==\"sreportno\" \r\n                            && field[designProperties.VALUE]!==\"ntestcount\" &&  (field[designProperties.LISTITEM]!==\"label\")  \r\n                            && response[0].data.jsondataobj.sampletemplatemandatory.findIndex(x => x === field[designProperties.VALUE]) === -1) {\r\n\r\n                            sampleexportdataResult[\"sample\"].push({\r\n                                label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                sampleexportfields: designData.sampleExportFields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                realData: field\r\n                            })\r\n                        }\r\n                    })\r\n\r\n                    if (inputParam.inputData.nneedsubsample||inputParam.SampleType===SampleType.STABILITY) {\r\n                        sampleexportdataResult['subsample'] = []\r\n\r\n                        response[0].data.jsondataobj.subsampletemplatefields.map(field => {\r\n\r\n                            if (field[designProperties.VALUE] !== \"sarno\" && field[designProperties.VALUE] !== \"ssamplearno\" && field[designProperties.VALUE] !==\r\n                                \"stransdisplaystatus\" && (field[designProperties.LISTITEM]!==\"label\")) {\r\n                                sampleexportdataResult[\"subsample\"].push({\r\n                                    label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                    sampleexportfields: designData.subSampleExportFields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                    realData: field\r\n                                })\r\n                            }\r\n\r\n\r\n                        })\r\n\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ?response[1] && response[1].data : undefined,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolcode: inputParam.ncontrolcode, sampleexportdataResult\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\nexport function configureCheckList(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getConfigureCheckList',\r\n            {\r\n                ndesigntemplatemappingcode: inputParam.inputData.designtemplatemapping.ndesigntemplatemappingcode,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        let urlArray = [fieldService];\r\n\r\n        const fieldService1 = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        urlArray.push(fieldService1);\r\n\r\n\r\n        if (inputParam.inputData[\"napprovalconfigcode\"]) {\r\n            const regSubTypeVersionService = rsapi.post(\"registrationsubtype/getApprovedVersion\",\r\n                { napprovalconfigcode: inputParam.inputData.napprovalconfigcode });\r\n\r\n            urlArray.push(regSubTypeVersionService);\r\n        }\r\n\r\n\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                const data = response[0].data.ChecklistVersion\r\n                const dataQB = response[0].data.ChecklistVersionQB\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[2].data : undefined,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolcode: inputParam.ncontrolcode,\r\n                        checkListData: data,\r\n                        checkListQB: dataQB,\r\n                        designData: response[1].data.jsondataobj,\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function getConfigureCheckListLatestVersion(userinfo) {\r\n    return function (dispatch) {\r\n\r\n        dispatch(initRequest(true));\r\n        rsapi.post('designtemplatemapping/getConfigureCheckListLatestVersion',\r\n            {\r\n                userinfo: userinfo\r\n            })\r\n            .then(response => {\r\n\r\n                const data = constructOptionList(response.data || [], 'nchecklistversioncode', 'schecklistname').get(\"OptionList\")\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        checkList: data,\r\n                        operation: \"configurechecklistadd\"\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function reportFilterType(inputParam) {\r\n    return function (dispatch) {\r\n        const fieldService = rsapi.post('designtemplatemapping/getMappedFieldProps',\r\n            {\r\n                designtemplatemapping: inputParam.inputData.designtemplatemapping,\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n            const filterFields = rsapi.post('designtemplatemapping/getReleaseSampleFilterFields',\r\n            {\r\n                userinfo: inputParam.inputData.userinfo\r\n            });\r\n        let urlArray = [fieldService,filterFields];\r\n\r\n        dispatch(initRequest(true));\r\n        Axios.all(urlArray)\r\n            .then(response => {\r\n                let sampleReportFilterTypeData = {};\r\n                let designData = response[0].data.jsondataobj[formCode.SAMPLEREGISTRATION] || {};\r\n                let designStructure = response[0].data.jsondataobj[formCode.RELEASE] || {};\r\n                let jsonParseList=response[1].data||{};\r\n                let sampleFilterFields=[];\r\n\r\n                jsonParseList.map(x=>\r\n                    sampleFilterFields.push(JSON.parse(x.jsondata.value))\r\n                    )\r\n\r\n               \r\n                    sampleReportFilterTypeData['sample'] = []\r\n                    let comboValues = []\r\n                    response[0].data.jsondataobj.sampletemplatefields.map(field => {\r\n                    //ALPD-5328 added by Dhanushya RI,to hide label input type in template mapping screen\r\n                         if (field[designProperties.VALUE] !== \"sarno\" && field[designProperties.VALUE] !== \"sspecname\" && field[designProperties.VALUE] !==\r\n                             \"dregdate\" && field[designProperties.VALUE] !== \"stransdisplaystatus\" && field[designProperties.VALUE]!==\"sreportno\" \r\n                             && field[designProperties.VALUE]!==\"ntestcount\" &&  (field[designProperties.LISTITEM]!==\"label\"))\r\n                         {\r\n\r\n                                sampleReportFilterTypeData[\"sample\"].push({\r\n                                label: field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode],\r\n                                samplefiltertypefields: designData.samplefiltertypefields && designData.samplefiltertypefields.find(val => val[\"2\"] === field[designProperties.VALUE]) !== undefined,\r\n                                ismandatory: designData.samplefiltertypefields && designData.samplefiltertypefields.find(val => val[\"2\"] === field[designProperties.VALUE] && val[\"ismandatory\"] ) !== undefined,\r\n                                //designData.samplefiltertypefields && designData.samplefiltertypefields.findIndex(x => x === field[designProperties.VALUE]) !== -1,\r\n                                realData: field\r\n                                                        })\r\n                                             \r\n                                    comboValues= field[designProperties.LISTITEM]===\"combo\" ? {...comboValues,\r\n                                    [field[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode]]:[{\"value\":-1,\"title\":'NA'}]}:{...comboValues}\r\n                                    \r\n                                \r\n                       }\r\n                    })\r\n                    sampleFilterFields.map(x=>{\r\n                        sampleReportFilterTypeData[\"sample\"].push({...x,\r\n                            samplefiltertypefields: designData.samplefiltertypefields && designData.samplefiltertypefields.find(val => val[\"2\"] === x.realData[designProperties.VALUE]) !== undefined,\r\n                            ismandatory: designData.samplefiltertypefields && designData.samplefiltertypefields.find(val => val[\"2\"] === x.realData[designProperties.VALUE] && val[\"ismandatory\"] ) !== undefined,\r\n                             })\r\n                             comboValues= x.realData[designProperties.LISTITEM]===\"combo\" ? {...comboValues,\r\n                                [x.realData[designProperties.LABEL][inputParam.inputData.userinfo.slanguagetypecode]]:[{\"value\":-1,\"title\":'NA'}]}:{...comboValues} } );\r\n\r\n                    let  extractedColumnList=queryBuilderfillingColumns(sampleReportFilterTypeData[\"sample\"],inputParam.inputData.userinfo.slanguagetypecode)\r\n                    let fields =getFilterConditionsBasedonDataType(extractedColumnList,comboValues);\r\n                    \r\n                    let awesomeTree=  designStructure.defaultstructure && designStructure.defaultstructure.awesomeTree && \r\n                     checkTree(loadTree(designStructure.defaultstructure.awesomeTree),designStructure.defaultstructure.awesomeConfig) \r\n                    let filterQueryTreeStr=  designStructure.defaultstructure && designStructure.defaultstructure.filterQueryTreeStr\r\n                    let filterquery=  designStructure.defaultstructure && designStructure.defaultstructure.filterquery\r\n                \r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: {\r\n                        openModal: true,\r\n                        loading: false,\r\n                        designData: response[0].data.jsondataobj,\r\n                        approvedRegSubTypeVersion: inputParam.inputData[\"napprovalconfigcode\"] ? response[1].data : undefined,\r\n                        operation: inputParam.operation,\r\n                        screenName: inputParam.screenName,\r\n                        ncontrolcode: inputParam.ncontrolcode, sampleReportFilterTypeData,\r\n                        awesomeConfig: designStructure.defaultstructure && designStructure.defaultstructure.awesomeConfig,\r\n                        awesomeTree:awesomeTree,fields,comboValues,isInitialRender:true,extractedColumnList,filterQueryTreeStr,filterquery\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } });\r\n                if (error.response.status === 500) {\r\n                    toast.error(intl.formatMessage({\r\n                        id: error.message\r\n                    }));\r\n                } else {\r\n                    toast.warn(intl.formatMessage({\r\n                        id: error.response.data\r\n                    }));\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}