{"ast":null,"code":"import rsapi from '../rsapi';\nimport { toast } from 'react-toastify';\nimport { sortData, searchData } from '../components/CommonScript';\nimport { DEFAULT_RETURN } from './LoginTypes';\nexport function selectProductHistoryDetail(ProductHistory, masterData, userInfo) {\n  return function (dispatch) {\n    rsapi.post(\"/producthistory/getProductManufByProductID\", {\n      \"nproducthistorycode\": parseInt(ProductHistory.nproducthistorycode),\n      'userinfo': userInfo\n    }).then(response => {\n      masterData = { ...masterData,\n        ...response.data\n      };\n      sortData(masterData);\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData\n        }\n      });\n      console.log(response.data);\n    }).catch(error => {\n      if (error.response.status === 500) {\n        toast.error(error.message);\n      } else {\n        toast.warn(error.response.data);\n      }\n    });\n  };\n}\nexport function filterProductHistoryColumnData(filterValue, masterData, userInfo) {\n  return function (dispatch) {\n    let productHistoryCode = 0;\n    let searchedData = undefined;\n\n    if (filterValue === \"\") {\n      productHistoryCode = masterData[\"ProductHistory\"][0].nproducthistorycode;\n    } else {\n      searchedData = searchData(filterValue, masterData[\"ProductHistory\"]);\n\n      if (searchedData.length > 0) {\n        productHistoryCode = searchedData[0].nproducthistorycode;\n      }\n    }\n\n    if (productHistoryCode !== 0) {\n      return rsapi.post(\"producthistory/getProductManufByProductID\", {\n        nproducthistorycode: parseInt(productHistoryCode),\n        userinfo: userInfo\n      }).then(response => {\n        masterData[\"searchedData\"] = searchedData;\n        masterData[\"selectedProductHistory\"] = response.data[\"selectedProductHistory\"];\n        masterData[\"ProductManufacturerHistory\"] = response.data[\"ProductManufacturerHistory\"];\n        masterData[\"ProductMAholderHistory\"] = response.data[\"ProductMAholderHistory\"];\n        dispatch({\n          type: DEFAULT_RETURN,\n          payload: {\n            masterData\n          }\n        });\n      }).catch(error => {\n        if (error.response.status === 500) {\n          toast.error(error.message);\n        } else {\n          toast.warn(error.response.data);\n        }\n      });\n    } else {\n      masterData[\"searchedData\"] = [];\n      masterData[\"selectedProductHistory\"] = [];\n      masterData[\"ProductManufacturerHistory\"] = [];\n      masterData[\"ProductMAholderHistory\"] = [];\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData\n        }\n      });\n    }\n  };\n}\nexport function getProductMaHolderHistory(inputParam) {\n  return function (dispatch) {\n    let ProductMaholderHistory = inputParam.objProductManufacturerHistory;\n    let Map = {};\n    Map[\"nproductmanufhistorycode\"] = parseInt(ProductMaholderHistory.nproductmanufhistorycode);\n    Map[\"userinfo\"] = inputParam.userInfo;\n    rsapi.post(\"/producthistory/getproductMAholderHistoryByID\", Map).then(response => {\n      dispatch({\n        type: DEFAULT_RETURN,\n        payload: {\n          masterData: { ...inputParam.masterData,\n            ProductMAholderHistory: response.data,\n            SelectedProductManufHistory: inputParam.objProductManufacturerHistory\n          }\n        }\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-FINAL/SOURCE-513-ALPD-4991/QuaLISWeb/src/actions/ProductHistoryAction.js"],"names":["rsapi","toast","sortData","searchData","DEFAULT_RETURN","selectProductHistoryDetail","ProductHistory","masterData","userInfo","dispatch","post","parseInt","nproducthistorycode","then","response","data","type","payload","console","log","catch","error","status","message","warn","filterProductHistoryColumnData","filterValue","productHistoryCode","searchedData","undefined","length","userinfo","getProductMaHolderHistory","inputParam","ProductMaholderHistory","objProductManufacturerHistory","Map","nproductmanufhistorycode","ProductMAholderHistory","SelectedProductManufHistory"],"mappings":"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","sourcesContent":["import rsapi from '../rsapi';\r\n\r\nimport {\r\n    toast\r\n} from 'react-toastify';\r\nimport {\r\n    sortData,\r\n    searchData\r\n} from '../components/CommonScript'\r\nimport {\r\n    DEFAULT_RETURN\r\n} from './LoginTypes';\r\n\r\nexport function selectProductHistoryDetail(ProductHistory, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        rsapi.post(\"/producthistory/getProductManufByProductID\", {\r\n            \"nproducthistorycode\":\r\n                parseInt(ProductHistory.nproducthistorycode),\r\n            'userinfo': userInfo\r\n        })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data\r\n                };\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData\r\n                    }\r\n                });\r\n                console.log(response.data);\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                } else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n\r\n            })\r\n    }\r\n}\r\n\r\nexport function filterProductHistoryColumnData(filterValue, masterData, userInfo) {\r\n    return function (dispatch) {\r\n\r\n        let productHistoryCode = 0;\r\n        let searchedData = undefined;\r\n        if (filterValue === \"\") {\r\n            productHistoryCode = masterData[\"ProductHistory\"][0].nproducthistorycode;\r\n        } else {\r\n            searchedData = searchData(filterValue, masterData[\"ProductHistory\"]);\r\n\r\n            if (searchedData.length > 0) {\r\n                productHistoryCode = searchedData[0].nproducthistorycode;\r\n            }\r\n        }\r\n\r\n        if (productHistoryCode !== 0) {\r\n            return rsapi.post(\"producthistory/getProductManufByProductID\", {\r\n                nproducthistorycode: parseInt(productHistoryCode),\r\n                userinfo: userInfo\r\n            })\r\n                .then(response => {\r\n\r\n                    masterData[\"searchedData\"] = searchedData;\r\n                    masterData[\"selectedProductHistory\"] = response.data[\"selectedProductHistory\"];\r\n                    masterData[\"ProductManufacturerHistory\"] = response.data[\"ProductManufacturerHistory\"];\r\n                    masterData[\"ProductMAholderHistory\"] = response.data[\"ProductMAholderHistory\"]\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    } else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        } else {\r\n            masterData[\"searchedData\"] = [];\r\n            masterData[\"selectedProductHistory\"] = [];\r\n            masterData[\"ProductManufacturerHistory\"] = [];\r\n            masterData[\"ProductMAholderHistory\"] = []\r\n            dispatch({\r\n                type: DEFAULT_RETURN,\r\n                payload: {\r\n                    masterData\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport function getProductMaHolderHistory(inputParam) {\r\n    return function (dispatch) {\r\n\r\n        let ProductMaholderHistory = inputParam.objProductManufacturerHistory\r\n        let Map = {};\r\n        Map[\"nproductmanufhistorycode\"] = parseInt(ProductMaholderHistory.nproductmanufhistorycode);\r\n        Map[\"userinfo\"] = inputParam.userInfo;\r\n\r\n        rsapi.post(\"/producthistory/getproductMAholderHistoryByID\", Map)\r\n            .then(response => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData:{\r\n                            ...inputParam.masterData,\r\n                            ProductMAholderHistory: response.data,\r\n                            SelectedProductManufHistory:inputParam.objProductManufacturerHistory\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}