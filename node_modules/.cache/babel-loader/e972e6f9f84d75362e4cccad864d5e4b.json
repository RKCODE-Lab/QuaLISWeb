{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Chart,ChartLegend,ChartSeries,ChartSeriesItem,ChartTooltip,ChartSeriesLabels}from'@progress/kendo-react-charts';import{PDFExport}from\"@progress/kendo-react-pdf\";import{faFilePdf}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{Breadcrumb,Col,Nav,Row}from'react-bootstrap';import{ProductList}from'../../../pages/product/product.styled';import{ReactComponent as ChartRefresh}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/image/chart-refresh.svg\";import{injectIntl}from'react-intl';import{convertDatetoStringByTimeZone,rearrangeDateFormat}from'../../../components/CommonScript';import ScrollContainer from'react-indiana-drag-scroll';import{designComponents}from'../../../components/Enumeration';import{toast}from'react-toastify';import{Attachments}from'../../../components/dropzone/dropzone.styles';// const mapStateToProps = state => {\n//     return ({ Login: state.Login })\n// }\nvar PieChart=/*#__PURE__*/function(_React$Component){_inherits(PieChart,_React$Component);var _super=_createSuper(PieChart);function PieChart(props){var _this;_classCallCheck(this,PieChart);_this=_super.call(this,props);_this.exportPDF=function(){_this.pdfExportComponent?_this.pdfExportComponent.save():toast.info(_this.props.intl.formatMessage({id:\"IDS_NODATATOEXPORT\"}));};_this.getValueByComponent=function(param,value){var componentCode=param.ndesigncomponentcode;switch(componentCode){case 4:return value?convertDatetoStringByTimeZone(_this.props.userInfo,value):\"-\";default:return value;}};_this.state={data:[],masterStatus:\"\",error:\"\",selectedRecord:{}};return _this;}_createClass(PieChart,[{key:\"breadcrumDesign\",value:function breadcrumDesign(viewDashBoardDesignConfigList){var _this2=this;var breadCrumValue=\"\";var arryalist=[];var selectedRecord=this.props.selectedRecord||{};viewDashBoardDesignConfigList.forEach(function(item){if(item.ndesigncomponentcode===designComponents.DATEPICKER){var date=rearrangeDateFormat(_this2.props.userInfo,item.dataList[0]);breadCrumValue=selectedRecord?selectedRecord[item.sfieldname]?convertDatetoStringByTimeZone(_this2.props.userInfo,selectedRecord[item.sfieldname]):convertDatetoStringByTimeZone(_this2.props.userInfo,date):convertDatetoStringByTimeZone(_this2.props.userInfo,date);}else if(item.ndesigncomponentcode===designComponents.COMBOBOX){var listvalue=[];if(selectedRecord&&selectedRecord[item.sfieldname]){listvalue.push(_defineProperty({},item.sdisplaymember,selectedRecord[item.sfieldname].label));}else{listvalue=item.dataList.filter(function(lst){return lst[item.sfieldname]===parseInt(item.sdefaultvalue);});}breadCrumValue=listvalue&&listvalue.length>0?listvalue[0][item.sdisplaymember]:\"-\";}else if(item.ndesigncomponentcode===designComponents.USERINFO){var _listvalue=[];//commenting now for restricting breadcrumbs\n// if(selectedRecord && selectedRecord[item.sfieldname]) {\n//     listvalue.push({ [item.sfieldname]: selectedRecord[item.sfieldname] })\n// }else{\n//     listvalue.push({ [item.sfieldname]: this.props.userInfo && this.props.userInfo[item.sfieldname] })\n// }\n//breadCrumValue = listvalue && listvalue.length > 0 ? listvalue[0][item.sfieldname] : \"-\";\nbreadCrumValue=_listvalue&&_listvalue.length==0?\"\":\"-\";}else{breadCrumValue=selectedRecord?selectedRecord[item.sfieldname]?selectedRecord[item.sfieldname]:item.sdefaultvalue:item.sdefaultvalue;}if(item.ndesigncomponentcode!==designComponents.USERINFO){arryalist.push({\"label\":item.sdisplayname,\"value\":breadCrumValue});}});// console.log(\"data:\", arryalist);\nreturn/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:12,className:\"p-0\"},arryalist.length>0?/*#__PURE__*/React.createElement(ScrollContainer,{className:\"breadcrumbs-scroll-container\"},/*#__PURE__*/React.createElement(Breadcrumb,{className:\"filter-breadcrumbs\"},arryalist.map(function(item,index){return/*#__PURE__*/React.createElement(Breadcrumb.Item,{key:index},/*#__PURE__*/React.createElement(\"span\",null,item[\"label\"],\" \",\" \",\" \"),/*#__PURE__*/React.createElement(\"span\",null,item[\"value\"]));}))):\"\"));}},{key:\"render\",value:function render(){var _this3=this;// console.log(\"pt:\", this.props);\nvar labelContent=function labelContent(props){return\"\".concat(props.category,\" : \").concat(props.value);};var renderTooltip=function renderTooltip(context){var _ref=context.point||context,category=_ref.category,value=_ref.value;return/*#__PURE__*/React.createElement(\"div\",null,category,\": \",value);};// let breadCrumValue = \"\";\n// let arryalist = []\n// this.props.viewDashBoardDesignConfigList && this.props.viewDashBoardDesignConfigList.forEach(item => {\n//     if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\n//         breadCrumValue = this.covertDatetoString(new Date(item.dataList[0]));\n//     }\n//     else if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\n//         let listvalue = item.dataList.filter(lst => {\n//             return lst[item.sfieldname] === parseInt(item.sdefaultvalue);\n//         });\n//         breadCrumValue = listvalue && listvalue.length > 0? listvalue[0][item.sdisplaymember]: \"\";\n//     }\n//     else {\n//         breadCrumValue = item.sdefaultvalue;\n//     }\n//     arryalist.push({ \"label\": item.sdisplayname, \"value\": breadCrumValue });\n// })\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"p-2\"},/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(\"h4\",{className:\"text-left\"},this.props.isStaticDashBoard?this.props.staticTitle:this.props.dashBoardType.selectedDashBoardTypes&&this.props.dashBoardType.selectedDashBoardTypes.sdashboardtypename)),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(ProductList,{className:\"d-inline dropdown badget_menu d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{//className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" \nhref:\"#\",className:\"btn btn-circle outline-grey mr-2\",hidden:this.props.hiddenParam// title={\"ChartRefresh\"}\n,\"data-tip\":this.props.intl.formatMessage({id:\"IDS_REFRESHCHART\"}),onClick:function onClick(e){return _this3.props.checkParametersAvailable(_this3.props.dashBoardType.selectedDashBoardTypes,_this3.props.userInfo,_this3.props.masterData,_this3.props.dashBoardTypeNo,_this3.props.templateCode);}},/*#__PURE__*/React.createElement(ChartRefresh,{className:\"custom_icons\",width:\"20\",height:\"20\",style:{marginLeft:'0.35rem'}})),/*#__PURE__*/React.createElement(Nav.Link,{className:\"btn btn-circle outline-grey mr-2 action-icons-wrap\",\"data-tip\":this.props.intl.formatMessage({id:\"IDS_DOWNLOADPDF\"}),href:\"#\",hidden:this.props.hiddenExport},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFilePdf,className:\"ActionIconColor\",onClick:function onClick(){return _this3.exportPDF();}}))))),this.props.dashBoardType.viewDashBoardDesignConfigList&&this.breadcrumDesign(this.props.dashBoardType.viewDashBoardDesignConfigList),this.props.series&&this.props.series.length>0?/*#__PURE__*/React.createElement(PDFExport,{ref:function ref(component){return _this3.pdfExportComponent=component;},paperSize:\"auto\",margin:40},this.props.chartTypeName===\"pie\"?/*#__PURE__*/React.createElement(Chart,{style:this.props.style},/*#__PURE__*/React.createElement(ChartTooltip,{render:renderTooltip}),/*#__PURE__*/React.createElement(ChartLegend,{position:\"bottom\"}),/*#__PURE__*/React.createElement(ChartSeries,null,/*#__PURE__*/React.createElement(ChartSeriesItem,{autoFit:\"autofit\",type:\"pie\",data:this.props.series,field:this.props.valueField,categoryField:this.props.categoryField,labels:{visible:true,content:labelContent},overlay:{gradient:\"roundedBevel\"}}))):/*#__PURE__*/React.createElement(Chart,{style:this.props.style,onSeriesClick:function onSeriesClick(item){return _this3.props.chartItemClick(item);}},/*#__PURE__*/React.createElement(ChartTooltip,{render:renderTooltip}),/*#__PURE__*/React.createElement(ChartLegend,{position:\"bottom\"}),/*#__PURE__*/React.createElement(ChartSeries,null,/*#__PURE__*/React.createElement(ChartSeriesItem,{autoFit:\"autofit\",type:\"donut\",data:this.props.series,field:this.props.valueField,categoryField:this.props.categoryField},/*#__PURE__*/React.createElement(ChartSeriesLabels,{position:\"outsideEnd\",background:\"none\",content:labelContent}))))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Attachments,{className:\"norecordchart\"},this.props.intl.formatMessage({id:\"IDS_NORECORDSAVAILABLE\"}))));}// covertDatetoString = (value) => {\n//     const userInfo = this.props.userInfo;\n//     const dateValue = new Date(value);\n//     const prevMonth = validateTwoDigitDate(String(dateValue.getMonth() + 1));\n//     const prevDay = validateTwoDigitDate(String(dateValue.getDate()));\n//     const dateArray = [];\n//     const splitChar = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\") !== -1 ? \"/\" : \"-\";\n//     const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0];\n//     const secondField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[1];\n//         if (firstField === \"dd\"){\n//             dateArray.push(prevDay);\n//             dateArray.push(splitChar);\n//             if (secondField === \"MM\"){\n//                 dateArray.push(prevMonth);\n//                 dateArray.push(splitChar);\n//                 dateArray.push(dateValue.getFullYear());\n//             }\n//             else{\n//                 dateArray.push(dateValue.getFullYear());\n//                 dateArray.push(splitChar);\n//                 dateArray.push(prevMonth);\n//             }\n//         }\n//         else  if (firstField === \"MM\"){\n//             dateArray.push(prevMonth);               \n//             dateArray.push(splitChar);\n//             if (secondField === \"dd\"){\n//                 dateArray.push(prevDay);\n//                 dateArray.push(splitChar);\n//                 dateArray.push(dateValue.getFullYear());\n//             }\n//             else{\n//                 dateArray.push(dateValue.getFullYear());\n//                 dateArray.push(splitChar);\n//                 dateArray.push(prevDay);                \n//             }\n//         }\n//         else{\n//             dateArray.push(dateValue.getFullYear());\n//             dateArray.push(splitChar);\n//             if (secondField === \"dd\"){\n//                 dateArray.push(prevDay);\n//                 dateArray.push(splitChar);\n//                 dateArray.push(prevMonth);       \n//             }\n//             else{\n//                 dateArray.push(prevMonth);       \n//                 dateArray.push(splitChar);\n//                 dateArray.push(prevDay);                \n//             }\n//         }\n//      return dateArray;\n//     // const fromDateOnly = dateValue.getFullYear() + '-' + prevMonth + '-' + prevDay\n//     // return fromDateOnly;\n// }\n}]);return PieChart;}(React.Component);export default injectIntl(PieChart);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-512/QuaLISWeb/src/pages/dashboardtypes/charts/PieChart.jsx"],"names":["React","Chart","ChartLegend","ChartSeries","ChartSeriesItem","ChartTooltip","ChartSeriesLabels","PDFExport","faFilePdf","FontAwesomeIcon","Breadcrumb","Col","Nav","Row","ProductList","injectIntl","convertDatetoStringByTimeZone","rearrangeDateFormat","ScrollContainer","designComponents","toast","Attachments","PieChart","props","exportPDF","pdfExportComponent","save","info","intl","formatMessage","id","getValueByComponent","param","value","componentCode","ndesigncomponentcode","userInfo","state","data","masterStatus","error","selectedRecord","viewDashBoardDesignConfigList","breadCrumValue","arryalist","forEach","item","DATEPICKER","date","dataList","sfieldname","COMBOBOX","listvalue","push","sdisplaymember","label","filter","lst","parseInt","sdefaultvalue","length","USERINFO","sdisplayname","map","index","labelContent","category","renderTooltip","context","point","isStaticDashBoard","staticTitle","dashBoardType","selectedDashBoardTypes","sdashboardtypename","hiddenParam","e","checkParametersAvailable","masterData","dashBoardTypeNo","templateCode","marginLeft","hiddenExport","breadcrumDesign","series","component","chartTypeName","style","valueField","categoryField","visible","content","gradient","chartItemClick","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Chart, ChartLegend, ChartSeries, ChartSeriesItem, ChartTooltip, ChartSeriesLabels } from '@progress/kendo-react-charts';\r\nimport { PDFExport } from \"@progress/kendo-react-pdf\";\r\nimport { faFilePdf } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Breadcrumb, Col, Nav, Row } from 'react-bootstrap';\r\nimport { ProductList } from '../../../pages/product/product.styled';\r\nimport { ReactComponent as ChartRefresh } from '../../../assets/image/chart-refresh.svg';\r\nimport { injectIntl } from 'react-intl';\r\nimport { convertDatetoStringByTimeZone, rearrangeDateFormat } from '../../../components/CommonScript';\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { designComponents } from '../../../components/Enumeration';\r\nimport { toast } from 'react-toastify';\r\nimport { Attachments } from '../../../components/dropzone/dropzone.styles';\r\n\r\n// const mapStateToProps = state => {\r\n//     return ({ Login: state.Login })\r\n// }\r\n\r\nclass PieChart extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: [], masterStatus: \"\", error: \"\", selectedRecord: {}\r\n        }\r\n    }\r\n\r\n    exportPDF = () => {\r\n        this.pdfExportComponent ? this.pdfExportComponent.save()\r\n            : toast.info(this.props.intl.formatMessage({ id: \"IDS_NODATATOEXPORT\" }));\r\n    }\r\n\r\n    breadcrumDesign(viewDashBoardDesignConfigList) {\r\n        let breadCrumValue = \"\";\r\n        let arryalist = [];\r\n        let selectedRecord = this.props.selectedRecord || {}\r\n        \r\n        viewDashBoardDesignConfigList.forEach(item => {\r\n\r\n            if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n                let date = rearrangeDateFormat(this.props.userInfo,item.dataList[0])\r\n                breadCrumValue = selectedRecord ? selectedRecord[item.sfieldname] ? convertDatetoStringByTimeZone(this.props.userInfo, selectedRecord[item.sfieldname]) :\r\n                    convertDatetoStringByTimeZone(this.props.userInfo, date) : convertDatetoStringByTimeZone(this.props.userInfo, date);\r\n            }\r\n            else if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n                let listvalue = [];\r\n                if (selectedRecord && selectedRecord[item.sfieldname]) {\r\n                    listvalue.push({ [item.sdisplaymember]: selectedRecord[item.sfieldname].label })\r\n                } else {\r\n                    listvalue = item.dataList.filter(lst => {\r\n                        return lst[item.sfieldname] === parseInt(item.sdefaultvalue);\r\n                    });\r\n                }\r\n\r\n                breadCrumValue = listvalue && listvalue.length > 0 ? listvalue[0][item.sdisplaymember] : \"-\";\r\n            }\r\n            else if (item.ndesigncomponentcode === designComponents.USERINFO) {\r\n                let listvalue = [];\r\n                //commenting now for restricting breadcrumbs\r\n                // if(selectedRecord && selectedRecord[item.sfieldname]) {\r\n                //     listvalue.push({ [item.sfieldname]: selectedRecord[item.sfieldname] })\r\n                // }else{\r\n                //     listvalue.push({ [item.sfieldname]: this.props.userInfo && this.props.userInfo[item.sfieldname] })\r\n                // }\r\n                //breadCrumValue = listvalue && listvalue.length > 0 ? listvalue[0][item.sfieldname] : \"-\";\r\n               breadCrumValue = listvalue && listvalue.length == 0 ? \"\" : \"-\";\r\n            }\r\n            else {\r\n                breadCrumValue = selectedRecord ? selectedRecord[item.sfieldname] ? selectedRecord[item.sfieldname] : item.sdefaultvalue : item.sdefaultvalue;\r\n            }\r\n            if(item.ndesigncomponentcode !== designComponents.USERINFO){\r\n                arryalist.push({ \"label\": item.sdisplayname, \"value\": breadCrumValue });\r\n            }\r\n            \r\n        });\r\n        // console.log(\"data:\", arryalist);\r\n\r\n        return (\r\n\r\n            < Row >\r\n                <Col md={12} className=\"p-0\">\r\n                    {arryalist.length > 0 ?\r\n                        < ScrollContainer className=\"breadcrumbs-scroll-container\">\r\n                            <Breadcrumb className=\"filter-breadcrumbs\">\r\n                                {arryalist.map((item, index) =>\r\n                                    <Breadcrumb.Item key={index}>\r\n                                        <span>{item[\"label\"]}{\" \"} {\" \"}</span>\r\n                                        <span>{item[\"value\"]}</span>\r\n                                    </Breadcrumb.Item>\r\n                                )}\r\n                            </Breadcrumb>\r\n                        </ScrollContainer> : \"\"}\r\n                </Col >\r\n            </Row >\r\n        )\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        // console.log(\"pt:\", this.props);\r\n        const labelContent = (props) => {\r\n            return `${props.category} : ${props.value}`;\r\n        }\r\n        const renderTooltip = (context) => {\r\n            const { category, value } = context.point || context;\r\n            return (<div>{category}: {value}</div>);\r\n        };\r\n        // let breadCrumValue = \"\";\r\n        // let arryalist = []\r\n        // this.props.viewDashBoardDesignConfigList && this.props.viewDashBoardDesignConfigList.forEach(item => {\r\n\r\n        //     if (item.ndesigncomponentcode === designComponents.DATEPICKER) {\r\n        //         breadCrumValue = this.covertDatetoString(new Date(item.dataList[0]));\r\n        //     }\r\n        //     else if (item.ndesigncomponentcode === designComponents.COMBOBOX) {\r\n        //         let listvalue = item.dataList.filter(lst => {\r\n        //             return lst[item.sfieldname] === parseInt(item.sdefaultvalue);\r\n        //         });\r\n        //         breadCrumValue = listvalue && listvalue.length > 0? listvalue[0][item.sdisplaymember]: \"\";\r\n        //     }\r\n        //     else {\r\n        //         breadCrumValue = item.sdefaultvalue;\r\n        //     }\r\n        //     arryalist.push({ \"label\": item.sdisplayname, \"value\": breadCrumValue });\r\n        // })\r\n\r\n\r\n        return (\r\n            <>\r\n                {//this.props.filterParam && \r\n                    // this.props.masterData.viewDashBoardDesignConfigList && this.props.selectedRecord &&\r\n                    //     <Row>\r\n                    //         <Col md={12} className=\"p-0\">\r\n                    //             <ScrollContainer className=\"breadcrumbs-scroll-container\">\r\n                    //                 <Breadcrumb className=\"filter-breadcrumbs\">\r\n                    //                     {//this.props.filterParam\r\n                    //                     this.props.viewDashBoardDesignConfigList.map((param, index) =>\r\n                    //                         <Breadcrumb.Item key={index}>\r\n                    //                             <span>{param.sdisplayname}{\" \"}:{\" \"}</span>\r\n                    //                             <span>{this.getValueByComponent(param, this.props.selectedRecord[param.sfieldname])}</span>\r\n                    //                         </Breadcrumb.Item>\r\n                    //                     )}\r\n                    //                 </Breadcrumb>\r\n                    //             </ScrollContainer>\r\n                    //         </Col>\r\n                    //     </Row>\r\n                }\r\n\r\n\r\n                {/* {this.props.dashBoardType.viewDashBoardDesignConfigList &&\r\n                    this.breadcrumDesign(this.props.dashBoardType.viewDashBoardDesignConfigList)\r\n                }  */}\r\n\r\n                <Row className=\"p-2\">\r\n                    <Col md={8} >\r\n                        {/* <h4 hidden={this.props.hiddenExport} className=\"text-left\"> */}\r\n                        <h4 className=\"text-left\">\r\n                            {this.props.isStaticDashBoard ? this.props.staticTitle : this.props.dashBoardType.selectedDashBoardTypes\r\n                                && this.props.dashBoardType.selectedDashBoardTypes.sdashboardtypename}\r\n                        </h4>\r\n                    </Col>\r\n                    <Col md={4} >\r\n                        <ProductList className=\"d-inline dropdown badget_menu d-flex justify-content-end\">\r\n                            <Nav.Link\r\n                                //className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\" \r\n                                href=\"#\"\r\n                                className=\"btn btn-circle outline-grey mr-2\"\r\n                                hidden={this.props.hiddenParam}\r\n                                // title={\"ChartRefresh\"}\r\n                                data-tip={this.props.intl.formatMessage({ id: \"IDS_REFRESHCHART\" })}\r\n                                onClick={(e) => this.props.checkParametersAvailable(this.props.dashBoardType.selectedDashBoardTypes, this.props.userInfo, this.props.masterData,\r\n                                    this.props.dashBoardTypeNo, this.props.templateCode)} >\r\n                                <ChartRefresh className=\"custom_icons\" width=\"20\" height=\"20\" style={{ marginLeft: '0.35rem' }} />\r\n\r\n                            </Nav.Link>\r\n                            <Nav.Link className=\"btn btn-circle outline-grey mr-2 action-icons-wrap\"\r\n                                data-tip={this.props.intl.formatMessage({ id: \"IDS_DOWNLOADPDF\" })}\r\n                                href=\"#\" hidden={this.props.hiddenExport}\r\n                            >\r\n                                <FontAwesomeIcon icon={faFilePdf} className=\"ActionIconColor\"\r\n                                    onClick={() => this.exportPDF()} />\r\n                            </Nav.Link>\r\n                        </ProductList>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {this.props.dashBoardType.viewDashBoardDesignConfigList &&\r\n                    this.breadcrumDesign(this.props.dashBoardType.viewDashBoardDesignConfigList)\r\n                }\r\n                {\r\n                    this.props.series && this.props.series.length > 0 ?\r\n                        <PDFExport\r\n                            ref={component => (this.pdfExportComponent = component)}\r\n                            paperSize=\"auto\"\r\n                            margin={40}\r\n                        >\r\n                            {this.props.chartTypeName === \"pie\" ?\r\n\r\n                                <Chart style={this.props.style} >\r\n                                    <ChartTooltip render={renderTooltip} />\r\n                                    <ChartLegend position=\"bottom\" />\r\n                                    <ChartSeries>\r\n                                        <ChartSeriesItem autoFit=\"autofit\"\r\n                                            type=\"pie\"\r\n                                            data={this.props.series}\r\n                                            field={this.props.valueField}\r\n                                            categoryField={this.props.categoryField}\r\n                                            labels={{ visible: true, content: labelContent }}\r\n                                            overlay={{ gradient: \"roundedBevel\" }}\r\n                                        />\r\n                                    </ChartSeries>\r\n                                </Chart>\r\n\r\n                                :\r\n\r\n                                <Chart style={this.props.style} onSeriesClick={(item) => this.props.chartItemClick(item)}>\r\n                                    <ChartTooltip render={renderTooltip} />\r\n                                    <ChartLegend position=\"bottom\" />\r\n                                    <ChartSeries>\r\n                                        <ChartSeriesItem autoFit=\"autofit\" type=\"donut\" data={this.props.series} field={this.props.valueField} categoryField={this.props.categoryField} >\r\n                                            <ChartSeriesLabels position=\"outsideEnd\" background=\"none\" content={labelContent} />\r\n                                        </ChartSeriesItem>\r\n                                    </ChartSeries>\r\n                                </Chart>\r\n\r\n\r\n                            }\r\n                        </PDFExport>\r\n                        :\r\n                        <>\r\n                            <Attachments className = \"norecordchart\">\r\n                                {this.props.intl.formatMessage({ id: \"IDS_NORECORDSAVAILABLE\" })}\r\n                            </Attachments>\r\n                        </>\r\n                }\r\n            </>\r\n        );\r\n    }\r\n\r\n    getValueByComponent = (param, value) => {\r\n        let componentCode = param.ndesigncomponentcode;\r\n        switch (componentCode) {\r\n            case 4: return value ? convertDatetoStringByTimeZone(this.props.userInfo, value) : \"-\"\r\n            default: return value\r\n        }\r\n    }\r\n\r\n    // covertDatetoString = (value) => {\r\n    //     const userInfo = this.props.userInfo;\r\n    //     const dateValue = new Date(value);\r\n    //     const prevMonth = validateTwoDigitDate(String(dateValue.getMonth() + 1));\r\n    //     const prevDay = validateTwoDigitDate(String(dateValue.getDate()));\r\n    //     const dateArray = [];\r\n\r\n    //     const splitChar = userInfo.ssitedatetime && userInfo.ssitedatetime.indexOf(\"/\") !== -1 ? \"/\" : \"-\";\r\n    //     const firstField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[0];\r\n    //     const secondField = userInfo.ssitedatetime && userInfo.ssitedatetime.split(splitChar)[1];\r\n\r\n    //         if (firstField === \"dd\"){\r\n    //             dateArray.push(prevDay);\r\n    //             dateArray.push(splitChar);\r\n    //             if (secondField === \"MM\"){\r\n    //                 dateArray.push(prevMonth);\r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(dateValue.getFullYear());\r\n    //             }\r\n    //             else{\r\n    //                 dateArray.push(dateValue.getFullYear());\r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(prevMonth);\r\n    //             }\r\n    //         }\r\n    //         else  if (firstField === \"MM\"){\r\n    //             dateArray.push(prevMonth);               \r\n    //             dateArray.push(splitChar);\r\n    //             if (secondField === \"dd\"){\r\n    //                 dateArray.push(prevDay);\r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(dateValue.getFullYear());\r\n    //             }\r\n    //             else{\r\n    //                 dateArray.push(dateValue.getFullYear());\r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(prevDay);                \r\n    //             }\r\n    //         }\r\n    //         else{\r\n    //             dateArray.push(dateValue.getFullYear());\r\n    //             dateArray.push(splitChar);\r\n    //             if (secondField === \"dd\"){\r\n    //                 dateArray.push(prevDay);\r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(prevMonth);       \r\n    //             }\r\n    //             else{\r\n    //                 dateArray.push(prevMonth);       \r\n    //                 dateArray.push(splitChar);\r\n    //                 dateArray.push(prevDay);                \r\n    //             }\r\n    //         }\r\n    //      return dateArray;\r\n    //     // const fromDateOnly = dateValue.getFullYear() + '-' + prevMonth + '-' + prevDay\r\n    //     // return fromDateOnly;\r\n    // }\r\n}\r\nexport default injectIntl(PieChart);"]},"metadata":{},"sourceType":"module"}