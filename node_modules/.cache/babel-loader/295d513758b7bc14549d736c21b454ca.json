{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import{faSave}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import React from'react';import{Button,Card,Modal,Row}from'react-bootstrap';import{FormattedMessage,injectIntl}from'react-intl';import{toast}from'react-toastify';import{DEFAULT_RETURN}from'../actions/LoginTypes';import{ModalInner}from'./App.styles';import{transactionStatus}from'./Enumeration';var ModalShow=/*#__PURE__*/function(_React$Component){_inherits(ModalShow,_React$Component);var _super=_createSuper(ModalShow);function ModalShow(props){var _this;_classCallCheck(this,ModalShow);_this=_super.call(this,props);_this.formRef=React.createRef();_this.state={masterStatus:\"\",failedControls:[]};_this.handleSaveClick=function(saveType){var failedControls=[];var startLabel=[];var label=\"IDS_ENTER\";var mandatoryFields=_this.props.mandatoryFields||[];if(_this.props.esign){mandatoryFields=[{\"idsName\":\"IDS_PASSWORD\",\"dataField\":\"esignpassword\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_COMMENTS\",\"dataField\":\"esigncomments\",\"mandatoryLabel\":\"IDS_ENTER\",\"controlType\":\"textbox\"},{\"idsName\":\"IDS_REASON\",\"dataField\":\"esignreason\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"}];}mandatoryFields.forEach(function(item){if(_this.props.selectedRecord[item.dataField]===undefined||_this.props.selectedRecord[item.dataField]===null){var alertMessage=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(alertMessage);startLabel.push(item.mandatoryLabel);//\"IDS_PROVIDE\";\n}else{if(item.validateFunction){var validateData=item.validateFunction;if(validateData(_this.props.selectedRecord[item.dataField])===false){var _alertMessage=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage);startLabel.push(item.mandatoryLabel);}}else{if(typeof _this.props.selectedRecord[item.dataField]===\"object\"){//to validate FormSelectSearch component\nif(_this.props.selectedRecord[item.dataField].length===0){var _alertMessage2=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage2);startLabel.push(item.mandatoryLabel);//\"IDS_SELECT\";\n}}else if(typeof _this.props.selectedRecord[item.dataField]===\"string\"){//to handle string field -- added trim function\nif(_this.props.selectedRecord[item.dataField].trim().length===0){var _alertMessage3=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage3);startLabel.push(item.mandatoryLabel);}}else{//number field\nif(_this.props.selectedRecord[item.dataField].length===0){var _alertMessage4=(item.alertPreFix?item.alertPreFix+\" \":'')+_this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?\" \"+item.alertSuffix:'');failedControls.push(_alertMessage4);startLabel.push(item.mandatoryLabel);}}}}// else{\n//     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\n//     failedControls.push(alertMessage);\n// }\n});// console.log(\"validationPassed:\", failedControls);\nif(failedControls.length===0){if(saveType===4){_this.props.onExecuteClick(_this.formRef);}else if(saveType===3){if(_this.props.selectedRecord.agree&&_this.props.selectedRecord.agree===transactionStatus.NO){toast.info(_this.props.intl.formatMessage({id:\"IDS_CHECKAGREE\"}));}else{_this.props.validateEsign();}}else{_this.props.onSaveClick();}}else{//toast.info(`${this.props.intl.formatMessage({id:\"IDS_ENTER\"})} ${failedControls.join(\",\")}`);\nlabel=startLabel[0]===undefined?label:startLabel[0];toast.info(\"\".concat(_this.props.intl.formatMessage({id:label}),\" \").concat(failedControls[0]));}};_this.myRef=React.createRef();return _this;}_createClass(ModalShow,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;var masterStatus=this.props.masterStatus;if(masterStatus!==\"\"&&masterStatus!==undefined){toast.warn(masterStatus);var updateInfo={typeName:DEFAULT_RETURN,data:{masterStatus:\"\"}};this.props.updateStore(updateInfo);masterStatus=\"\";}if(this.props.innerPopup!==this.state.innerTop){setTimeout(function(){var scrollDoc=_this2.props.modalEvent&&_this2.props.modalEvent.id?document.getElementById(_this2.props.modalEvent.id):null;if(_this2.myRef&&_this2.myRef.current){_this2.myRef.current.scrollIntoView({behavior:'smooth'});}if(scrollDoc){scrollDoc.scrollIntoView({behavior:'smooth'});}},100);this.setState({innerTop:this.props.innerPopup});}return null;}},{key:\"render\",value:function render(){var _this3=this;var saveType=1;if(this.props.ignoreFormValidation){saveType=5;}var buttonLabel=\"Save\";var idsLabel=\"IDS_SAVE\";if(this.props.buttonLabel){buttonLabel=this.props.buttonLabel;idsLabel='IDS_'.concat(buttonLabel.toUpperCase());}return/*#__PURE__*/React.createElement(Modal,{show:this.props.modalShow,size:this.props.size?this.props.size:'',onHide:this.closeModal,backdrop:\"static\",className:\"dashboard-parameter\",dialogClassName:\"freakerstop\"},/*#__PURE__*/React.createElement(Modal.Header,{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(Modal.Title,{id:\"password\",className:\"header-primary flex-grow-1\"},this.props.esign===true?/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_ESIGN\",defaultMessage:\"Esign\"}):/*#__PURE__*/React.createElement(FormattedMessage,{id:this.props.modalTitle})),this.props.removeCancel?\"\":/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-cancel\",variant:\"\",onClick:this.props.closeModal},this.props.rulesenginealret?/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_NO\",defaultMessage:\"No\"}):/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_CANCEL\",defaultMessage:\"Cancel\"})),this.props.esign===true||this.props.needSubmit?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.props.needSubmit?_this3.handleSaveClick(1):_this3.handleSaveClick(3);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",this.props.rulesenginealret?/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_YES\",defaultMessage:\"Yes\"}):/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SUBMIT\",defaultMessage:\"Submit\"})):// (this.props.operation === \"create\" || this.props.operation === \"update\")\n//   && this.props.esign !== true && this.props.showExecute === true && this.props.showSave ?\nthis.props.needSave===true?\"\":this.props.modalTitle===\"IDS_RELEASEANDREPORTGENERATION\"?/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(1);}},/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_OK\",defaultMessage:\"Ok\"})):/*#__PURE__*/React.createElement(Button,{className:\"btn-user btn-primary-blue\",onClick:function onClick(){return _this3.handleSaveClick(1);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSave}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SAVE\",defaultMessage:\"Save\"}))),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(ModalInner,null,/*#__PURE__*/React.createElement(Card,{className:\"border-0\"},/*#__PURE__*/React.createElement(Card.Body,null,this.props.modalBody)))));}}]);return ModalShow;}(React.Component);export default injectIntl(ModalShow);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/components/ModalShow.jsx"],"names":["faSave","FontAwesomeIcon","React","Button","Card","Modal","Row","FormattedMessage","injectIntl","toast","DEFAULT_RETURN","ModalInner","transactionStatus","ModalShow","props","formRef","createRef","state","masterStatus","failedControls","handleSaveClick","saveType","startLabel","label","mandatoryFields","esign","forEach","item","selectedRecord","dataField","undefined","alertMessage","alertPreFix","intl","formatMessage","id","idsName","alertSuffix","push","mandatoryLabel","validateFunction","validateData","length","trim","onExecuteClick","agree","NO","info","validateEsign","onSaveClick","myRef","warn","updateInfo","typeName","data","updateStore","innerPopup","innerTop","setTimeout","scrollDoc","modalEvent","document","getElementById","current","scrollIntoView","behavior","setState","ignoreFormValidation","buttonLabel","idsLabel","concat","toUpperCase","modalShow","size","closeModal","modalTitle","removeCancel","rulesenginealret","needSubmit","needSave","modalBody","Component"],"mappings":"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","sourcesContent":["import { faSave } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Button, Card, Modal ,Row} from 'react-bootstrap';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport { toast } from 'react-toastify';\r\nimport { DEFAULT_RETURN } from '../actions/LoginTypes';\r\nimport { ModalInner } from './App.styles';\r\nimport { transactionStatus } from './Enumeration';\r\n\r\nclass ModalShow extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.myRef = React.createRef()\r\n    }\r\n    formRef = React.createRef();\r\n    state = { masterStatus: \"\", failedControls: [] }\r\n\r\n    handleSaveClick = (saveType) => {\r\n        const failedControls = [];\r\n        const startLabel = [];\r\n        let label = \"IDS_ENTER\";\r\n        let mandatoryFields = this.props.mandatoryFields || [];\r\n        if (this.props.esign) {\r\n            mandatoryFields = [\r\n                { \"idsName\": \"IDS_PASSWORD\", \"dataField\": \"esignpassword\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_COMMENTS\", \"dataField\": \"esigncomments\", \"mandatoryLabel\": \"IDS_ENTER\", \"controlType\": \"textbox\" },\r\n                { \"idsName\": \"IDS_REASON\", \"dataField\": \"esignreason\", \"mandatoryLabel\": \"IDS_SELECT\", \"controlType\": \"selectbox\" }\r\n           \r\n            ]\r\n        }\r\n        mandatoryFields.forEach(item => {\r\n            if (this.props.selectedRecord[item.dataField] === undefined || this.props.selectedRecord[item.dataField] === null) {\r\n                const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                failedControls.push(alertMessage);\r\n                startLabel.push(item.mandatoryLabel)//\"IDS_PROVIDE\";\r\n            }\r\n            else {\r\n                if (item.validateFunction) {\r\n                    const validateData = item.validateFunction;\r\n                    if (validateData(this.props.selectedRecord[item.dataField]) === false) {\r\n                        const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                        failedControls.push(alertMessage);\r\n                        startLabel.push(item.mandatoryLabel)\r\n                    }\r\n                }\r\n                else {\r\n                    if (typeof this.props.selectedRecord[item.dataField] === \"object\") {\r\n                        //to validate FormSelectSearch component\r\n                        if (this.props.selectedRecord[item.dataField].length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)//\"IDS_SELECT\";\r\n                        }\r\n                    }\r\n                    else if (typeof this.props.selectedRecord[item.dataField] === \"string\") {\r\n                        //to handle string field -- added trim function\r\n                        if (this.props.selectedRecord[item.dataField].trim().length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                    else {\r\n                        //number field\r\n                        if (this.props.selectedRecord[item.dataField].length === 0) {\r\n                            const alertMessage = (item.alertPreFix ? item.alertPreFix + \" \" : '') + this.props.intl.formatMessage({ id: item.idsName }) + (item.alertSuffix ? \" \" + item.alertSuffix : '')\r\n                            failedControls.push(alertMessage);\r\n                            startLabel.push(item.mandatoryLabel)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // else{\r\n            //     const alertMessage=(item.alertPreFix?item.alertPreFix:'')+this.props.intl.formatMessage({id:item.idsName})+(item.alertSuffix?item.alertSuffix:'')\r\n            //     failedControls.push(alertMessage);\r\n            // }\r\n        });\r\n        // console.log(\"validationPassed:\", failedControls);\r\n\r\n        if (failedControls.length === 0) {\r\n            if (saveType === 4) {\r\n                this.props.onExecuteClick(this.formRef);\r\n            }\r\n            else if (saveType === 3) {\r\n                if (this.props.selectedRecord.agree && this.props.selectedRecord.agree === transactionStatus.NO) {\r\n\r\n                    toast.info(this.props.intl.formatMessage({ id: \"IDS_CHECKAGREE\" }));\r\n\r\n                } else {\r\n\r\n                    this.props.validateEsign();\r\n                }\r\n            }\r\n            else {\r\n                this.props.onSaveClick();\r\n            }\r\n        }\r\n        else {\r\n            //toast.info(`${this.props.intl.formatMessage({id:\"IDS_ENTER\"})} ${failedControls.join(\",\")}`);\r\n            label = startLabel[0] === undefined ? label : startLabel[0];\r\n            toast.info(`${this.props.intl.formatMessage({ id: label })} ${failedControls[0]}`);\r\n        }\r\n\r\n    }\r\n    componentDidUpdate() {\r\n        let masterStatus = this.props.masterStatus;\r\n        if (masterStatus !== \"\" && masterStatus !== undefined) {\r\n            toast.warn(masterStatus);\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: { masterStatus: \"\" }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n            masterStatus = \"\";\r\n        }\r\n        if (this.props.innerPopup !== this.state.innerTop) {\r\n            setTimeout(() => {\r\n                let scrollDoc = this.props.modalEvent && this.props.modalEvent.id ? document.getElementById(this.props.modalEvent.id) : null;\r\n                if (this.myRef && this.myRef.current) {\r\n                    this.myRef.current.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n                if (scrollDoc) {\r\n                    scrollDoc.scrollIntoView({ behavior: 'smooth' })\r\n                }\r\n            }, 100)\r\n            this.setState({\r\n                innerTop: this.props.innerPopup\r\n            })\r\n        }\r\n        return null;\r\n\r\n    }\r\n    render() {\r\n        let saveType = 1;\r\n        if (this.props.ignoreFormValidation) {\r\n            saveType = 5;\r\n        }\r\n        let buttonLabel = \"Save\";\r\n        let idsLabel = \"IDS_SAVE\";\r\n        if (this.props.buttonLabel) {\r\n            buttonLabel = this.props.buttonLabel;\r\n            idsLabel = 'IDS_'.concat(buttonLabel.toUpperCase());\r\n        }\r\n        return (\r\n            <Modal show={this.props.modalShow} size={this.props.size?this.props.size:''}\r\n                onHide={this.closeModal} backdrop=\"static\" className=\"dashboard-parameter\" dialogClassName=\"freakerstop\">\r\n                <Modal.Header className=\"d-flex align-items-center\">\r\n                    <Modal.Title id=\"password\" className=\"header-primary flex-grow-1\">\r\n                        {this.props.esign === true ?\r\n                            <FormattedMessage id={\"IDS_ESIGN\"} defaultMessage=\"Esign\" /> :\r\n                            <FormattedMessage id={this.props.modalTitle} />\r\n\r\n                        }\r\n                    </Modal.Title>\r\n                    {this.props.removeCancel?\"\" : \r\n                     <Button className=\"btn-user btn-cancel\" variant=\"\" onClick={this.props.closeModal}>\r\n                        {this.props.rulesenginealret ?<FormattedMessage id='IDS_NO' defaultMessage='No' /> : <FormattedMessage id='IDS_CANCEL' defaultMessage='Cancel' />}\r\n                        \r\n                    </Button> }\r\n                    {this.props.esign === true ||this.props.needSubmit ?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() =>this.props.needSubmit? this.handleSaveClick(1) :this.handleSaveClick(3)}>\r\n                            <FontAwesomeIcon icon={faSave} /> { }\r\n                            {this.props.rulesenginealret ?<FormattedMessage id='IDS_YES' defaultMessage='Yes' /> : <FormattedMessage id='IDS_SUBMIT' defaultMessage='Submit' />}\r\n                            {/* <FormattedMessage id='IDS_SUBMIT' defaultMessage='Submit' /> */}\r\n                        </Button>\r\n                        :\r\n                        // (this.props.operation === \"create\" || this.props.operation === \"update\")\r\n                        //   && this.props.esign !== true && this.props.showExecute === true && this.props.showSave ?\r\n                        this.props.needSave===true?\"\":this.props.modalTitle===\"IDS_RELEASEANDREPORTGENERATION\"?\r\n                        <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(1)}>\r\n                        <FormattedMessage id='IDS_OK' defaultMessage='Ok' />\r\n                    </Button>:\r\n                    <Button className=\"btn-user btn-primary-blue\" onClick={() => this.handleSaveClick(1)}>\r\n                    <FontAwesomeIcon icon={faSave} /> { }\r\n                    <FormattedMessage id='IDS_SAVE' defaultMessage='Save' />\r\n                </Button>\r\n\r\n                      \r\n                        \r\n                    }\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <ModalInner>\r\n                    <Card className=\"border-0\">\r\n                        <Card.Body>\r\n                           \r\n                                {this.props.modalBody}\r\n                            \r\n                        </Card.Body>\r\n                        </Card>\r\n                    </ModalInner>\r\n                </Modal.Body>\r\n            </Modal>\r\n        );\r\n\r\n    }\r\n}\r\nexport default injectIntl(ModalShow);\r\n"]},"metadata":{},"sourceType":"module"}