{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{createIntl,createIntlCache,IntlProvider}from'react-intl';import{Switch,Route,Redirect,withRouter}from'react-router';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.min.css';import messages_en from'../assets/translations/en.json';import messages_de from'../assets/translations/de.json';import messages_ru from'../assets/translations/ru.json';import messages_tg from'../assets/translations/tg.json';import messages_fr from'../assets/translations/fr.json';import'./App.css';import Layout from'./layout/layout.component.jsx';import Login from'../pages/Login/Login.jsx';import rsapi from'../rsapi';import PortalApp from'../PortalApp';import ReactTooltip from'react-tooltip';var messages={'en-US':messages_en,'ko-KR':messages_de,'ru-RU':messages_ru,'tg-TG':messages_tg,'fr-FR':messages_fr};// This is optional but highly recommended\n// since it prevents memory leak\nvar cache=createIntlCache();// Call it once in your app. At the root of your app is the best place\ntoast.configure();//Create the `intl` object\nexport var intl=createIntl({// Locale of the application\nlocale:'en-US',// Locale of the fallback defaultMessage\ndefaultLocale:'en-US',messages:messages['en-US']},cache);var mapStateToProps=function mapStateToProps(state){return{Login:state.Login};};//ALPD-715 Fix\nexport function createIntlReinitilize(language){return intl=createIntl({locale:language,defaultLocale:language,messages:messages[language]},cache);}var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.handleEndConcert=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));_this.handleUnload=_this.handleUnload.bind(_assertThisInitialized(_this));_this.handleEndConcert=_this.handleEndConcert.bind(_assertThisInitialized(_this));// Store the previous pathname and search strings\n_this.currentPathname=null;_this.currentSearch=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('beforeunload',this.handleUnload);window.addEventListener('unload',this.handleEndConcert);var history=this.props.history;history.listen(function(newLocation,action){if(action===\"PUSH\"){if(newLocation.pathname!==_this2.currentPathname||newLocation.search!==_this2.currentSearch){// Save new location\n_this2.currentPathname=newLocation.pathname;_this2.currentSearch=newLocation.search;// Clone location object and push it to history\nhistory.push({pathname:newLocation.pathname,search:newLocation.search});}}else{// Send user back if they try to navigate back\nhistory.go(1);}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('beforeunload',this.handleUnload);window.removeEventListener('unload',this.handleEndConcert);this.handleEndConcert();}},{key:\"handleUnload\",value:function handleUnload(e){var message=\"\\o/\";if(this.props.Login.userInfo.susername&&this.props.Login.userInfo.susername!==\"\"){var uRL=\"\";var inputData=[];uRL='login/insertAuditAction';inputData={userinfo:this.props.Login.userInfo,scomments:\"User Name:\".concat(this.props.Login.userInfo.susername,\", Login ID:\").concat(this.props.Login.userInfo.sloginid),sauditaction:\"IDS_IMPROPERLOGOUT\",nFlag:2};rsapi.post(uRL,inputData).then(function(response){(e||window.event).returnValue=message;//Gecko + IE\nreturn message;}).catch(function(error){if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}else{(e||window.event).returnValue=message;//Gecko + IE\nreturn message;}}},{key:\"render\",value:function render(){var _this$props$Login=this.props.Login,language=_this$props$Login.language,navigation=_this$props$Login.navigation;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IntlProvider,{locale:language,messages:messages[language]},/*#__PURE__*/React.createElement(ReactTooltip,{place:\"top\",globalEventOff:\"click\",className:\"react-tooltip\"}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/login\",name:\"Login\",render:function render(props){return/*#__PURE__*/React.createElement(Login,props);}}),/*#__PURE__*/React.createElement(Route,{path:\"/\",name:\"Home\",render:function render(props){return/*#__PURE__*/React.createElement(Layout,props);}})),/*#__PURE__*/React.createElement(Redirect,{push:true,exact:true,to:\"/\"+navigation}),navigation!==\"login\"&&/*#__PURE__*/React.createElement(PortalApp,null)));}}]);return App;}(React.Component);export default connect(mapStateToProps)(withRouter(App));","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/components/App.js"],"names":["React","connect","createIntl","createIntlCache","IntlProvider","Switch","Route","Redirect","withRouter","toast","messages_en","messages_de","messages_ru","messages_tg","messages_fr","Layout","Login","rsapi","PortalApp","ReactTooltip","messages","cache","configure","intl","locale","defaultLocale","mapStateToProps","state","createIntlReinitilize","language","App","props","handleEndConcert","handleUnload","bind","currentPathname","currentSearch","window","addEventListener","history","listen","newLocation","action","pathname","search","push","go","removeEventListener","e","message","userInfo","susername","uRL","inputData","userinfo","scomments","sloginid","sauditaction","nFlag","post","then","response","event","returnValue","catch","error","status","warn","data","navigation","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect } from 'react-redux';\nimport { createIntl, createIntlCache, IntlProvider } from 'react-intl';\nimport { Switch, Route, Redirect, withRouter } from 'react-router';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.min.css';\n\nimport messages_en from '../assets/translations/en.json';\nimport messages_de from '../assets/translations/de.json';\nimport messages_ru from '../assets/translations/ru.json';\nimport messages_tg from '../assets/translations/tg.json';\nimport messages_fr from '../assets/translations/fr.json';\n\nimport './App.css';\n\nimport Layout from './layout/layout.component.jsx';\nimport Login from '../pages/Login/Login.jsx'\n import rsapi from '../rsapi';\nimport PortalApp from '../PortalApp';\nimport ReactTooltip from 'react-tooltip';\n\nconst messages = {\n  'en-US': messages_en,\n  'ko-KR': messages_de,\n  'ru-RU': messages_ru,\n  'tg-TG': messages_tg,\n  'fr-FR': messages_fr\n\n}\n\n// This is optional but highly recommended\n// since it prevents memory leak\nconst cache = createIntlCache()\n\n// Call it once in your app. At the root of your app is the best place\ntoast.configure()\n\n//Create the `intl` object\nexport let intl = createIntl(\n  {\n    // Locale of the application\n    locale: 'en-US',\n    // Locale of the fallback defaultMessage\n    defaultLocale: 'en-US',\n    messages: messages['en-US'],\n  },\n  cache,\n)\n\nconst mapStateToProps = (state) => {\n  return {\n    Login: state.Login\n  }\n}\n\n//ALPD-715 Fix\nexport function createIntlReinitilize(language)\n{\n  return  intl = createIntl(\n    {\n      locale: language,\n      defaultLocale: language,\n      messages: messages[language],\n    },\n    cache,\n  )\n}\n\nclass App extends React.Component {\n    constructor(props) {\n      super(props);\n      this.handleUnload = this.handleUnload.bind(this);\n      this.handleEndConcert = this.handleEndConcert.bind(this);\n      // Store the previous pathname and search strings\n      this.currentPathname = null;\n      this.currentSearch = null;\n    }\n    \n    componentDidMount() {\n      window.addEventListener('beforeunload', this.handleUnload);\n      window.addEventListener('unload', this.handleEndConcert)\n      const { history } = this.props;\n  \n      history.listen((newLocation, action) => {\n        if (action === \"PUSH\") {\n          if (\n            newLocation.pathname !== this.currentPathname ||\n            newLocation.search !== this.currentSearch\n          ) {\n            // Save new location\n            this.currentPathname = newLocation.pathname;\n            this.currentSearch = newLocation.search;\n  \n            // Clone location object and push it to history\n            history.push({\n              pathname: newLocation.pathname,\n              search: newLocation.search\n            });\n          }\n        } else {\n          // Send user back if they try to navigate back\n          history.go(1);\n        }\n      });\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('beforeunload', this.handleUnload);\n      window.removeEventListener('unload', this.handleEndConcert)\n      this.handleEndConcert()\n    }\n\n   handleUnload(e) {\n      const message = \"\\o/\";\n      if (this.props.Login.userInfo.susername && this.props.Login.userInfo.susername !== \"\") {\n        let uRL = \"\";\n        let inputData = [];\n        uRL = 'login/insertAuditAction';\n        inputData = {\n          userinfo: this.props.Login.userInfo,\n          scomments: `User Name:${this.props.Login.userInfo.susername}, Login ID:${this.props.Login.userInfo.sloginid}`,\n          sauditaction: \"IDS_IMPROPERLOGOUT\", nFlag: 2\n        }\n\n        rsapi.post(uRL, inputData)\n          .then(response => {\n            (e || window.event).returnValue = message; //Gecko + IE\n            return message;\n          })\n          .catch(error => {\n            if (error.response.status === 500) {\n              toast.error(error.message);\n            } else {\n              toast.warn(error.response.data);\n            }\n          })\n      } else {\n        (e || window.event).returnValue = message; //Gecko + IE\n        return message;\n      }\n    }\n\n    handleEndConcert = async () => {\n      // Write a code to handle Leave button clicked\n      // await fetcher({\n      //   url: endConcert(concert.id),\n      //   method: 'PUT'\n      // })\n    }\n\n  render() {\n\n    const { language, navigation } = this.props.Login;\n\n    return (<>\n        <IntlProvider locale={language} messages={messages[language]}>\n        <ReactTooltip place=\"top\"   globalEventOff='click' className='react-tooltip'/>\n          <Switch>\n            <Route exact path=\"/login\" name=\"Login\" render={props=> <Login {...props} />} />\n            <Route path=\"/\" name=\"Home\" render={props=> <Layout {...props} />} /> \n          </Switch>\n          <Redirect push exact to={\"/\" + navigation} />\n          { navigation !== \"login\" && <PortalApp />}\n        </IntlProvider>\n      </>);\n  }\n}\nexport default connect(mapStateToProps)(withRouter(App));\n"]},"metadata":{},"sourceType":"module"}