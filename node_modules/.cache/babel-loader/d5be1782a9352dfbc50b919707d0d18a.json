{"ast":null,"code":"import _defineProperty from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\WorkingFolder\\\\React_Postgres\\\\ALPD\\\\SOURCE-512\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{FormattedMessage,injectIntl}from'react-intl';// import { process } from '@progress/kendo-data-query';\nimport{toast}from'react-toastify';import{Row,Col,Card,Nav}from'react-bootstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus}from'@fortawesome/free-solid-svg-icons';import SlideOutModal from'../../components/slide-out-modal/SlideOutModal';import AddUserMultiRole from'./AddUserMultiRole';import AddUserMultiDeputy from'./AddUserMultiDeputy';import AddUserSite from'./AddUserSite';import Esign from'../audittrail/Esign';import UserMultiRoleTab from'./UserMultiRoleTab';import UserMultiDeputyTab from'./UserMultiDeputyTab';import{DEFAULT_RETURN}from'../../actions/LoginTypes';import{showEsign}from'../../components/CommonScript';import{transactionStatus}from'../../components/Enumeration';import UserTabsAccordion from'./UserTabsAccordion';import ConfirmMessage from'../../components/confirm-alert/confirm-message.component';import CustomAccordion from'../../components/custom-accordion/custom-accordion.component';var UserTabs=/*#__PURE__*/function(_React$Component){_inherits(UserTabs,_React$Component);var _super=_createSuper(UserTabs);function UserTabs(props){var _this;_classCallCheck(this,UserTabs);_this=_super.call(this,props);_this.userSiteAccordion=function(userSiteList){var selectedUserSite=_this.props.masterData.UsersSite;var foundIndex=userSiteList.findIndex(function(x){return x[\"nusersitecode\"]===selectedUserSite.nusersitecode;});userSiteList[foundIndex]=selectedUserSite;var accordionMap=new Map();userSiteList.map(function(userSite){return accordionMap.set(userSite.nusersitecode,/*#__PURE__*/React.createElement(UserTabsAccordion,{userSite:userSite,accordionTitle:\"ssitename\",userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,userInfo:_this.props.userInfo,getUserSiteComboService:_this.props.getUserSiteComboService,masterData:_this.props.masterData,ConfirmDelete:_this.ConfirmDelete,tabDetail:_this.tabDetail(userSite),onTabChange:_this.onTabChange}));});return accordionMap;};_this.ConfirmDelete=function(obj){_this.confirmMessage.confirm(\"deleteMessage\",_this.props.intl.formatMessage({id:\"IDS_DELETE\"}),_this.props.intl.formatMessage({id:\"IDS_DEFAULTCONFIRMMSG\"}),_this.props.intl.formatMessage({id:\"IDS_OK\"}),_this.props.intl.formatMessage({id:\"IDS_CANCEL\"}),function(){return _this.deleteRecord(obj);});};_this.tabDetail=function(userSite){var tabMap=new Map();tabMap.set(\"IDS_USERMULTIROLE\",/*#__PURE__*/React.createElement(UserMultiRoleTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_ROLE\",resetPassword:_this.resetPassword,getUserMultiRoleComboDataService:_this.props.getUserMultiRoleComboDataService,masterData:_this.props.masterData,userSite:userSite,dataResult:_this.props.masterData[\"UserMultiRole\"]||[]// dataResult={process(this.props.masterData[\"UserMultiRole\"],(this.props.screenName === undefined || this.props.screenName === \"IDS_ROLE\") ?this.state.roleDataState :{skip:0, take:10})}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_ROLE\"?_this.state.roleDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({roleDataState:event.dataState});},multiRoleColumnList:_this.multiRoleColumnList,deleteRecord:_this.deleteRecord,selectedId:_this.props.selectedId}));tabMap.set(\"IDS_USERMULTIDEPUTY\",/*#__PURE__*/React.createElement(UserMultiDeputyTab,{userRoleControlRights:_this.props.userRoleControlRights,controlMap:_this.props.controlMap,inputParam:_this.props.inputParam,userInfo:_this.props.userInfo,screenName:\"IDS_DEPUTY\",getUserMultiDeputyComboDataService:_this.props.getUserMultiDeputyComboDataService,masterData:_this.props.masterData,userSite:userSite,dataResult:_this.props.masterData[\"UserMultiDeputy\"]||[]// dataResult={process(this.props.masterData[\"UserMultiDeputy\"],(this.props.screenName === undefined || this.props.screenName === \"IDS_DEPUTY\") ?this.state.deputyDataState :  {skip:0, take:10})}\n,dataState:_this.props.screenName===undefined||_this.props.screenName===\"IDS_DEPUTY\"?_this.state.deputyDataState:{skip:0,take:10},dataStateChange:function dataStateChange(event){return _this.setState({deputyDataState:event.dataState});},multiDeputyColumnList:_this.multiDeputyColumnList,deleteRecord:_this.deleteRecord,selectedId:_this.props.selectedId}));return tabMap;};_this.onTabChange=function(tabProps){var screenName=tabProps.screenName;var updateInfo={typeName:DEFAULT_RETURN,data:{screenName:screenName}};_this.props.updateStore(updateInfo);};_this.closeModal=function(){var loadEsign=_this.props.loadEsign;var openChildModal=_this.props.openChildModal;var selectedRecord=_this.props.selectedRecord;if(_this.props.loadEsign){if(_this.props.operation===\"delete\"||_this.props.operation===\"reset\"){loadEsign=false;openChildModal=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}else{loadEsign=false;selectedRecord['esignpassword']=\"\";selectedRecord['esigncomments']=\"\";selectedRecord['esignreason']=\"\";}}else{openChildModal=false;selectedRecord={};}var updateInfo={typeName:DEFAULT_RETURN,data:{openChildModal:openChildModal,loadEsign:loadEsign,selectedRecord:selectedRecord,selectedId:null}};_this.props.updateStore(updateInfo);};_this.onComboChange=function(comboData,fieldName){var selectedRecord=_this.state.selectedRecord||{};selectedRecord[fieldName]=comboData;if(fieldName===\"ndeputyusersitecode\"){if(comboData===null){selectedRecord[\"sdeputyname\"]=\"\";}else{_this.props.deputyUserList.map(function(dataItem){if(dataItem.item.nusersitecode===comboData.value){selectedRecord[\"sdeputyname\"]=dataItem.item.sfirstname+\" \"+dataItem.item.slastname;}return null;});}}_this.setState({selectedRecord:selectedRecord});};_this.onInputOnChange=function(event){var selectedRecord=_this.state.selectedRecord||{};if(event.target.type==='checkbox'){if(event.target.name===\"ntransactionstatus\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.ACTIVE:transactionStatus.DEACTIVE;else if(event.target.name===\"nlockmode\")selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.UNLOCK:transactionStatus.LOCK;else selectedRecord[event.target.name]=event.target.checked===true?transactionStatus.YES:transactionStatus.NO;}else{selectedRecord[event.target.name]=event.target.value;}_this.setState({selectedRecord:selectedRecord});};_this.onSaveClick=function(saveType,formRef){//add / edit  \nvar inputParam={};var clearSelectedRecordField=[];if(_this.props.screenName===\"IDS_ROLE\"){inputParam=_this.saveRole(saveType,formRef);clearSelectedRecordField=[{\"idsName\":\"IDS_DEFAULTROLE\",\"dataField\":\"ndefaultrole\",\"width\":\"100px\",\"isClearField\":true,\"preSetValue\":4},{\"idsName\":\"IDS_ISACTIVE\",\"dataField\":\"ntransactionstatus\",\"width\":\"100px\",\"isClearField\":true,\"preSetValue\":1}];}else if(_this.props.screenName===\"IDS_DEPUTY\"){inputParam=_this.saveDeputy(saveType,formRef);}else if(_this.props.screenName===\"IDS_SITE\"){inputParam=_this.saveUserSite(saveType,formRef);clearSelectedRecordField=[{\"idsName\":\"IDS_DEFAULTSITE\",\"dataField\":\"ndefaultsite\",\"width\":\"100px\",\"isClearField\":true,\"preSetValue\":4}];}if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},saveType:saveType}};_this.props.updateStore(updateInfo);}else{if(_this.props.screenName===\"IDS_SITE\"||_this.props.screenName===\"IDS_ROLE\"){_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\",\"\",\"\",clearSelectedRecordField);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.resetPassword=function(){if(_this.props.masterData.SelectedUser.ntransactionstatus===transactionStatus.RETIRED){toast.warn(_this.props.intl.formatMessage({id:\"IDS_CANNOTRESETPWDRETIREDUSER\"}));}else{var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:\"Password\",inputData:{\"users\":_this.props.masterData.SelectedUser,\"userinfo\":_this.props.userInfo,\"nusersitecode\":_this.props.masterData.UsersSite.nusersitecode},operation:\"reset\",dataState:_this.state.roleDataState,selectedRecord:_objectSpread({},_this.state.selectedRecord)};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,_this.props.controlMap.get(\"ResetPassword\").ncontrolcode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:\"IDS_ROLE\",operation:\"reset\"}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.deleteRecord=function(deleteParam){if(_this.props.masterData.SelectedUser.ntransactionstatus===transactionStatus.RETIRED){//const message = \"IDS_CANNOTDELETE\"+deleteParam.screenName.toUpperCase() +\"RETIREDUSER\";\nvar message=\"IDS_CANNOTDELETE\"+deleteParam.screenName.split(\"IDS_\")[1].toUpperCase()+\"RETIREDUSER\";toast.warn(_this.props.intl.formatMessage({id:message}));}else{var _inputData;var dataState=undefined;if(_this.props.screenName===\"IDS_ROLE\"){dataState=_this.state.roleDataState;}else if(_this.props.screenName===\"IDS_DEPUTY\"){dataState=_this.state.deputyDataState;}var postParam={inputListName:\"Users\",selectedObject:\"SelectedUser\",primaryKeyField:\"nusercode\",primaryKeyValue:_this.props.masterData.SelectedUser.nusercode,fetchUrl:\"users/getUsers\",fecthInputObject:{userinfo:_this.props.userInfo}};var inputParam={classUrl:_this.props.inputParam.classUrl,methodUrl:deleteParam.methodUrl,inputData:(_inputData={},_defineProperty(_inputData,deleteParam.methodUrl.toLowerCase(),deleteParam.selectedRecord),_defineProperty(_inputData,\"userinfo\",_this.props.userInfo),_defineProperty(_inputData,\"users\",_this.props.masterData.SelectedUser),_inputData),operation:deleteParam.operation,dataState:dataState,postParam:postParam,selectedRecord:_objectSpread({},_this.state.selectedRecord)};if(showEsign(_this.props.esignRights,_this.props.userInfo.nformcode,deleteParam.ncontrolCode)){var updateInfo={typeName:DEFAULT_RETURN,data:{loadEsign:true,screenData:{inputParam:inputParam,masterData:_this.props.masterData},openChildModal:true,screenName:deleteParam.screenName,operation:deleteParam.operation}};_this.props.updateStore(updateInfo);}else{_this.props.crudMaster(inputParam,_this.props.masterData,\"openChildModal\");}}};_this.validateEsign=function(){var inputParam={inputData:{\"userinfo\":_objectSpread(_objectSpread({},_this.props.userInfo),{},{sreason:_this.state.selectedRecord[\"esigncomments\"],nreasoncode:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].value,spredefinedreason:_this.state.selectedRecord[\"esignreason\"]&&_this.state.selectedRecord[\"esignreason\"].label}),password:_this.state.selectedRecord[\"esignpassword\"]},screenData:_this.props.screenData};_this.props.validateEsignCredential(inputParam,\"openChildModal\");};var roleDataState={skip:0,take:10};var deputyDataState={skip:0,take:10};_this.state={selectedRecord:{},dataResult:[],roleDataState:roleDataState,deputyDataState:deputyDataState};_this.multiRoleColumnList=[{\"idsName\":\"IDS_ROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"},{\"idsName\":\"IDS_DEFAULTROLE\",\"dataField\":\"sdefaultstatus\",\"width\":\"200px\"},{\"idsName\":\"IDS_ACTIVESTATUS\",\"dataField\":\"sactivestatus\",\"width\":\"200px\"}];_this.multiDeputyColumnList=[{\"idsName\":\"IDS_ROLE\",\"dataField\":\"suserrolename\",\"width\":\"150px\"},{\"idsName\":\"IDS_DEPUTYID\",\"dataField\":\"sdeputyid\",\"width\":\"150px\"},{\"idsName\":\"IDS_DEPUTYNAME\",\"dataField\":\"sdeputyname\",\"width\":\"150px\"},{\"idsName\":\"IDS_ACTIVESTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"150px\"}];_this.confirmMessage=new ConfirmMessage();return _this;}_createClass(UserTabs,[{key:\"render\",value:function render(){var _this2=this;var addUsersSiteId=this.props.controlMap.has(\"AddSite\")&&this.props.controlMap.get(\"AddSite\").ncontrolcode;var usersSiteList=this.props.masterData.UsersSiteList;var mandatoryFields=[];if(this.props.screenName===\"IDS_SITE\"){mandatoryFields.push({\"idsName\":\"IDS_SITE\",\"dataField\":\"nsitecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else if(this.props.screenName===\"IDS_ROLE\"){mandatoryFields.push({\"idsName\":\"IDS_USERROLE\",\"dataField\":\"nuserrolecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}else{mandatoryFields.push({\"idsName\":\"IDS_DEPUTYID\",\"dataField\":\"ndeputyusersitecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"},{\"idsName\":\"IDS_USERROLE\",\"dataField\":\"nuserrolecode\",\"mandatoryLabel\":\"IDS_SELECT\",\"controlType\":\"selectbox\"});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(Card,{className:\"at-tabs border-0\"},/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-end\"},/*#__PURE__*/React.createElement(Nav.Link,{name:\"addSite\",className:\"add-txt-btn\",hidden:this.props.userRoleControlRights.indexOf(addUsersSiteId)===-1,onClick:function onClick(){return _this2.props.getUserSiteComboService(\"IDS_SITE\",\"create\",\"nusersitecode\",-2,_this2.props.masterData,_this2.props.userInfo,addUsersSiteId);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}),\" \",/*#__PURE__*/React.createElement(FormattedMessage,{id:\"IDS_SITE\",defaultMessage:\"Site\"}))))),/*#__PURE__*/React.createElement(Row,{noGutters:true},/*#__PURE__*/React.createElement(Col,{md:12},usersSiteList.length>0&&this.props.masterData.UsersSite?/*#__PURE__*/React.createElement(CustomAccordion,{key:\"filter\",accordionTitle:\"ssitename\",accordionComponent:this.userSiteAccordion(usersSiteList),inputParam:{masterData:this.props.masterData,userInfo:this.props.userInfo},accordionClick:this.props.getUserSiteDetail,accordionPrimaryKey:\"nusersitecode\",accordionObjectName:\"userSite\",selectedKey:this.props.masterData.UsersSite.nusersitecode}):\"\"))))),this.props.openChildModal?/*#__PURE__*/React.createElement(SlideOutModal,{show:this.props.openChildModal,closeModal:this.closeModal,operation:this.props.operation,inputParam:this.props.inputParam,screenName:this.props.screenName,showSaveContinue:this.props.screenName===\"IDS_SITE\"||this.props.screenName===\"IDS_ROLE\"?true:false,onSaveClick:this.onSaveClick,updateStore:this.props.updateStore,esign:this.props.loadEsign,validateEsign:this.validateEsign,selectedRecord:this.state.selectedRecord||{},mandatoryFields:mandatoryFields,addComponent:this.props.loadEsign?/*#__PURE__*/React.createElement(Esign,{operation:this.props.operation,onInputOnChange:this.onInputOnChange,inputParam:this.props.inputParam,selectedRecord:this.state.selectedRecord||{}}):this.props.screenName===\"IDS_SITE\"?/*#__PURE__*/React.createElement(AddUserSite,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,siteList:this.props.siteList||[],selectedUser:this.props.masterData.SelectedUser||{}}):this.props.screenName===\"IDS_ROLE\"?/*#__PURE__*/React.createElement(AddUserMultiRole,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,roleList:this.props.roleList||[],selectedUser:this.props.masterData.SelectedUser||{}}):/*#__PURE__*/React.createElement(AddUserMultiDeputy,{selectedRecord:this.state.selectedRecord||{},onInputOnChange:this.onInputOnChange,onComboChange:this.onComboChange,userRoleList:this.props.userRoleList||[],deputyUserList:this.props.deputyUserList||[],selectedUser:this.props.masterData.selectedUser||{},operation:this.props.operation})}):\"\");}},{key:\"componentDidUpdate\",value:function componentDidUpdate(previousProps){if(this.props.masterData!==previousProps.masterData){var _this$state=this.state,roleDataState=_this$state.roleDataState,deputyDataState=_this$state.deputyDataState;if(this.props.dataState===undefined){if(this.props.screenName===\"IDS_ROLE\"){roleDataState={skip:0,take:10};}else if(this.props.screenName===\"IDS_DEPUTY\"){deputyDataState={skip:0,take:10};}else// if (this.props.screenName === \"IDS_SITE\")\n{roleDataState={skip:0,take:10};deputyDataState={skip:0,take:10};}}this.setState({roleDataState:roleDataState,deputyDataState:deputyDataState});}if(this.props.selectedRecord!==previousProps.selectedRecord){this.setState({selectedRecord:this.props.selectedRecord});}}},{key:\"saveRole\",value:function saveRole(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"users\"]=this.props.masterData.SelectedUser;inputData[\"usermultirole\"]={};var dataState=undefined;var selectedId=null;var postParam=undefined;if(this.props.operation===\"update\"){// edit\npostParam={inputListName:\"Users\",selectedObject:\"SelectedUser\",primaryKeyField:\"nusercode\"};inputData[\"usermultirole\"]=JSON.parse(JSON.stringify(this.props.selectedRecord));selectedId=this.props.selectedRecord.nusermultirolecode;dataState=this.state.roleDataState;}if(inputData[\"usermultirole\"].hasOwnProperty('esignpassword')){if(inputData[\"usermultirole\"]['esignpassword']===''){delete inputData[\"usermultirole\"]['esigncomments'];delete inputData[\"usermultirole\"]['esignpassword'];delete inputData[\"usermultirole\"]['esignreason'];}}inputData[\"usermultirole\"][\"nuserrolecode\"]=this.state.selectedRecord[\"nuserrolecode\"]?this.state.selectedRecord[\"nuserrolecode\"].value:\"\";inputData[\"usermultirole\"][\"nusersitecode\"]=this.props.masterData.UsersSite.nusersitecode;inputData[\"usermultirole\"][\"ndefaultrole\"]=this.state.selectedRecord[\"ndefaultrole\"]?this.state.selectedRecord[\"ndefaultrole\"]:transactionStatus.NO;inputData[\"usermultirole\"][\"ntransactionstatus\"]=this.state.selectedRecord[\"ntransactionstatus\"];var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"UserMultiRole\",inputData:inputData,selectedId:selectedId,dataState:dataState,postParam:postParam,operation:this.props.operation,saveType:saveType,formRef:formRef,selectedRecord:_objectSpread({},this.state.selectedRecord)};return inputParam;}},{key:\"saveDeputy\",value:function saveDeputy(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"users\"]=this.props.masterData.SelectedUser;inputData[\"usermultideputy\"]={};var dataState=undefined;var selectedId=null;var postParam=undefined;if(this.props.operation===\"update\"){// edit\npostParam={inputListName:\"Users\",selectedObject:\"SelectedUser\",primaryKeyField:\"nusercode\"};inputData[\"usermultideputy\"]=JSON.parse(JSON.stringify(this.props.selectedRecord));selectedId=this.props.selectedRecord.nusermultideputycode;dataState=this.state.deputyDataState;}if(inputData[\"usermultideputy\"].hasOwnProperty('esignpassword')){if(inputData[\"usermultideputy\"]['esignpassword']===''){delete inputData[\"usermultideputy\"]['esigncomments'];delete inputData[\"usermultideputy\"]['esignpassword'];delete inputData[\"usermultideputy\"]['esignreason'];}}inputData[\"usermultideputy\"][\"nuserrolecode\"]=this.state.selectedRecord[\"nuserrolecode\"]?this.state.selectedRecord[\"nuserrolecode\"].value:\"\";inputData[\"usermultideputy\"][\"nusersitecode\"]=this.props.masterData.UsersSite.nusersitecode;inputData[\"usermultideputy\"][\"ndeputyusersitecode\"]=this.state.selectedRecord[\"ndeputyusersitecode\"]?this.state.selectedRecord[\"ndeputyusersitecode\"].value:\"\";inputData[\"usermultideputy\"][\"ntransactionstatus\"]=this.state.selectedRecord[\"ntransactionstatus\"];var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"UserMultiDeputy\",inputData:inputData,selectedId:selectedId,dataState:dataState,postParam:postParam,operation:this.props.operation,saveType:saveType,formRef:formRef,selectedRecord:_objectSpread({},this.state.selectedRecord)};return inputParam;}},{key:\"saveUserSite\",value:function saveUserSite(saveType,formRef){var inputData=[];inputData[\"userinfo\"]=this.props.userInfo;inputData[\"userssite\"]={};var postParam=undefined;if(this.props.operation===\"update\"){// edit\npostParam={inputListName:\"Users\",selectedObject:\"SelectedUser\",primaryKeyField:\"nusercode\"};inputData[\"userssite\"]=JSON.parse(JSON.stringify(this.props.selectedRecord));}inputData[\"userssite\"][\"nusercode\"]=this.props.masterData.SelectedUser.nusercode;inputData[\"userssite\"][\"nsitecode\"]=this.state.selectedRecord[\"nsitecode\"]?this.state.selectedRecord[\"nsitecode\"].value:\"\";inputData[\"userssite\"][\"ndefaultsite\"]=this.state.selectedRecord[\"ndefaultsite\"]?this.state.selectedRecord[\"ndefaultsite\"]:transactionStatus.NO;var inputParam={classUrl:this.props.inputParam.classUrl,methodUrl:\"UsersSite\",inputData:inputData,dataState:undefined,postParam:postParam,operation:this.props.operation,saveType:saveType,formRef:formRef,selectedRecord:_objectSpread({},this.state.selectedRecord)};return inputParam;}}]);return UserTabs;}(React.Component);export default injectIntl(UserTabs);","map":{"version":3,"sources":["E:/WorkingFolder/React_Postgres/ALPD/branches/SOURCE-513-PROD/SOURCE-513-ALPD-5500/QuaLISWeb/src/pages/credentialmanagement/UserTabs.jsx"],"names":["React","FormattedMessage","injectIntl","toast","Row","Col","Card","Nav","FontAwesomeIcon","faPlus","SlideOutModal","AddUserMultiRole","AddUserMultiDeputy","AddUserSite","Esign","UserMultiRoleTab","UserMultiDeputyTab","DEFAULT_RETURN","showEsign","transactionStatus","UserTabsAccordion","ConfirmMessage","CustomAccordion","UserTabs","props","userSiteAccordion","userSiteList","selectedUserSite","masterData","UsersSite","foundIndex","findIndex","x","nusersitecode","accordionMap","Map","map","userSite","set","userRoleControlRights","controlMap","userInfo","getUserSiteComboService","ConfirmDelete","tabDetail","onTabChange","obj","confirmMessage","confirm","intl","formatMessage","id","deleteRecord","tabMap","inputParam","resetPassword","getUserMultiRoleComboDataService","screenName","undefined","state","roleDataState","skip","take","event","setState","dataState","multiRoleColumnList","selectedId","getUserMultiDeputyComboDataService","deputyDataState","multiDeputyColumnList","tabProps","updateInfo","typeName","data","updateStore","closeModal","loadEsign","openChildModal","selectedRecord","operation","onComboChange","comboData","fieldName","deputyUserList","dataItem","item","value","sfirstname","slastname","onInputOnChange","target","type","name","checked","ACTIVE","DEACTIVE","UNLOCK","LOCK","YES","NO","onSaveClick","saveType","formRef","clearSelectedRecordField","saveRole","saveDeputy","saveUserSite","esignRights","nformcode","ncontrolCode","screenData","crudMaster","SelectedUser","ntransactionstatus","RETIRED","warn","classUrl","methodUrl","inputData","get","ncontrolcode","deleteParam","message","split","toUpperCase","postParam","inputListName","selectedObject","primaryKeyField","primaryKeyValue","nusercode","fetchUrl","fecthInputObject","userinfo","toLowerCase","validateEsign","sreason","nreasoncode","spredefinedreason","label","password","validateEsignCredential","dataResult","addUsersSiteId","has","usersSiteList","UsersSiteList","mandatoryFields","push","indexOf","length","getUserSiteDetail","siteList","roleList","userRoleList","selectedUser","previousProps","JSON","parse","stringify","nusermultirolecode","hasOwnProperty","nusermultideputycode","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\n// import { process } from '@progress/kendo-data-query';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport {Row, Col, Card, Nav} from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus} from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport SlideOutModal from '../../components/slide-out-modal/SlideOutModal';\r\nimport AddUserMultiRole from './AddUserMultiRole';\r\nimport AddUserMultiDeputy from './AddUserMultiDeputy';\r\nimport AddUserSite from './AddUserSite';\r\nimport Esign from '../audittrail/Esign';\r\nimport UserMultiRoleTab from './UserMultiRoleTab';\r\nimport UserMultiDeputyTab from './UserMultiDeputyTab';\r\nimport { DEFAULT_RETURN } from '../../actions/LoginTypes';\r\nimport {showEsign} from '../../components/CommonScript';\r\nimport {transactionStatus} from '../../components/Enumeration';\r\nimport UserTabsAccordion from './UserTabsAccordion';\r\nimport ConfirmMessage from '../../components/confirm-alert/confirm-message.component';\r\nimport CustomAccordion from '../../components/custom-accordion/custom-accordion.component';\r\n\r\n\r\nclass UserTabs extends React.Component{\r\n    constructor(props){\r\n        super(props);  \r\n        const roleDataState = {\r\n            skip: 0,\r\n            take: 10,\r\n        }; \r\n        const deputyDataState = {\r\n            skip: 0,\r\n            take: 10,\r\n        };       \r\n        this.state = { \r\n                        selectedRecord:{},  dataResult:[],\r\n                        roleDataState, deputyDataState};\r\n\r\n                     \r\n        this.multiRoleColumnList=[{\"idsName\":\"IDS_ROLE\",\"dataField\":\"suserrolename\",\"width\":\"200px\"},\r\n                                    {\"idsName\":\"IDS_DEFAULTROLE\",\"dataField\":\"sdefaultstatus\",\"width\":\"200px\"},\r\n                                    {\"idsName\":\"IDS_ACTIVESTATUS\",\"dataField\":\"sactivestatus\",\"width\":\"200px\"},\r\n                                    ];\r\n\r\n        this.multiDeputyColumnList=[{\"idsName\":\"IDS_ROLE\",\"dataField\":\"suserrolename\",\"width\":\"150px\"},\r\n                                    {\"idsName\":\"IDS_DEPUTYID\",\"dataField\":\"sdeputyid\",\"width\":\"150px\"},\r\n                                    {\"idsName\":\"IDS_DEPUTYNAME\",\"dataField\":\"sdeputyname\",\"width\":\"150px\"},\r\n                                    {\"idsName\":\"IDS_ACTIVESTATUS\",\"dataField\":\"sdisplaystatus\",\"width\":\"150px\"},\r\n                                    ];      \r\n\r\n        this.confirmMessage = new ConfirmMessage();\r\n    }    \r\n\r\n    render(){\r\n\r\n        const addUsersSiteId = this.props.controlMap.has(\"AddSite\") && this.props.controlMap.get(\"AddSite\").ncontrolcode;\r\n        const usersSiteList = this.props.masterData.UsersSiteList ;\r\n\r\n        let mandatoryFields =[];\r\n        if (this.props.screenName === \"IDS_SITE\"){\r\n            mandatoryFields.push({\"idsName\":\"IDS_SITE\",\"dataField\":\"nsitecode\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"});\r\n        }\r\n        else if (this.props.screenName === \"IDS_ROLE\"){\r\n            mandatoryFields.push({\"idsName\":\"IDS_USERROLE\",\"dataField\":\"nuserrolecode\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"});\r\n        }\r\n        else{\r\n            mandatoryFields.push({\"idsName\":\"IDS_DEPUTYID\",\"dataField\":\"ndeputyusersitecode\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"},\r\n                                    {\"idsName\":\"IDS_USERROLE\",\"dataField\":\"nuserrolecode\" , \"mandatoryLabel\":\"IDS_SELECT\", \"controlType\": \"selectbox\"});\r\n        }\r\n\r\n        return(\r\n            <>\r\n                <Row noGutters>\r\n                    <Col md={12}>  \r\n                        <Card className=\"at-tabs border-0\">\r\n                            <Row noGutters>\r\n                                <Col md={12}>\r\n                                    <div className=\"d-flex justify-content-end\">\r\n                                    <Nav.Link name=\"addSite\" className=\"add-txt-btn\" \r\n                                              hidden={this.props.userRoleControlRights.indexOf(addUsersSiteId) === -1}\r\n                                              onClick={()=>this.props.getUserSiteComboService(\"IDS_SITE\", \"create\", \"nusersitecode\", -2, this.props.masterData, this.props.userInfo, addUsersSiteId)}>\r\n                                        <FontAwesomeIcon icon={faPlus} /> { }\r\n                                        <FormattedMessage id='IDS_SITE' defaultMessage='Site' />\r\n                                    </Nav.Link>\r\n                                    </div>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row noGutters>\r\n                                <Col md={12}>\r\n                                {usersSiteList.length > 0 && this.props.masterData.UsersSite ?\r\n                                    <CustomAccordion    key=\"filter\"   \r\n                                                        accordionTitle={\"ssitename\"}                                                                     \r\n                                                        accordionComponent={this.userSiteAccordion(usersSiteList)}\r\n                                                        inputParam={{masterData:this.props.masterData, userInfo:this.props.userInfo}}                                    \r\n                                                        accordionClick={this.props.getUserSiteDetail}  \r\n                                                        accordionPrimaryKey={\"nusersitecode\"}  \r\n                                                        accordionObjectName={\"userSite\"} \r\n                                                        selectedKey={this.props.masterData.UsersSite.nusersitecode}\r\n                                                        />\r\n                                 :\"\"}\r\n                                </Col>\r\n                            </Row>\r\n                         </Card>   \r\n                    </Col>\r\n                </Row>\r\n                \r\n                {/* Below Condition Added to avoid unwanted rendering of SlideOut */}\r\n                {this.props.openChildModal ? \r\n                <SlideOutModal show={this.props.openChildModal} \r\n                    closeModal={this.closeModal}  \r\n                    operation={this.props.operation}\r\n                    inputParam={this.props.inputParam}  \r\n                    screenName={this.props.screenName}\r\n                    showSaveContinue={this.props.screenName === \"IDS_SITE\" || this.props.screenName === \"IDS_ROLE\" ? true:false}    \r\n                    onSaveClick={this.onSaveClick} \r\n                    updateStore={this.props.updateStore}\r\n                    esign={this.props.loadEsign}\r\n                    validateEsign={this.validateEsign}   \r\n                    selectedRecord={this.state.selectedRecord || {}}\r\n                    mandatoryFields={mandatoryFields}           \r\n                    addComponent ={this.props.loadEsign ? \r\n                                <Esign  operation={this.props.operation}\r\n                                        onInputOnChange={this.onInputOnChange}\r\n                                        inputParam={this.props.inputParam}                                               \r\n                                        selectedRecord={this.state.selectedRecord ||{}}\r\n                                 /> :\r\n                                 this.props.screenName === \"IDS_SITE\" ? \r\n                                    <AddUserSite selectedRecord={this.state.selectedRecord || {}} \r\n                                                        onInputOnChange={this.onInputOnChange}                                 \r\n                                                        onComboChange={this.onComboChange}                                                      \r\n                                                        siteList={this.props.siteList || []}\r\n                                                        selectedUser={this.props.masterData.SelectedUser || {}}/>\r\n                                    : this.props.screenName === \"IDS_ROLE\" ? \r\n                                        <AddUserMultiRole selectedRecord={this.state.selectedRecord || {}}                                  \r\n                                                            onInputOnChange={this.onInputOnChange}\r\n                                                            onComboChange={this.onComboChange}                                                      \r\n                                                            roleList={this.props.roleList || []}\r\n                                                            selectedUser={this.props.masterData.SelectedUser || {}}\r\n                                                            /> \r\n                                         : <AddUserMultiDeputy selectedRecord={this.state.selectedRecord ||{}}                                  \r\n                                                            onInputOnChange={this.onInputOnChange}\r\n                                                            onComboChange={this.onComboChange}                                                           \r\n                                                            userRoleList={this.props.userRoleList || []}\r\n                                                            deputyUserList={this.props.deputyUserList || []}\r\n                                                            selectedUser={this.props.masterData.selectedUser ||{}}\r\n                                                            operation={this.props.operation}\r\n                                                         />\r\n                                    }               \r\n                        \r\n                />:\"\"}\r\n            </>\r\n        ) \r\n    }\r\n\r\n    userSiteAccordion = (userSiteList) => {\r\n        const selectedUserSite = this.props.masterData.UsersSite;\r\n        const foundIndex = userSiteList.findIndex(\r\n            x => x[\"nusersitecode\"] === selectedUserSite.nusersitecode\r\n        );\r\n        userSiteList[foundIndex] = selectedUserSite; \r\n\r\n        const accordionMap = new Map();\r\n        userSiteList.map((userSite)=>\r\n            accordionMap.set(userSite.nusersitecode, \r\n                <UserTabsAccordion  userSite={userSite}  \r\n                                    accordionTitle=\"ssitename\"                                 \r\n                                    userRoleControlRights={this.props.userRoleControlRights}\r\n                                    controlMap={this.props.controlMap}\r\n                                    userInfo={this.props.userInfo} \r\n                                    getUserSiteComboService={this.props.getUserSiteComboService}\r\n                                    masterData={this.props.masterData}\r\n                                    ConfirmDelete={this.ConfirmDelete}\r\n                                    tabDetail={this.tabDetail(userSite)}   \r\n                                    onTabChange = {this.onTabChange}                                                                              \r\n                    />)\r\n        )\r\n        return accordionMap;\r\n    }\r\n    ConfirmDelete = (obj) => {\r\n        this.confirmMessage.confirm(\"deleteMessage\", this.props.intl.formatMessage({ id: \"IDS_DELETE\" }), this.props.intl.formatMessage({ id: \"IDS_DEFAULTCONFIRMMSG\" }),\r\n            this.props.intl.formatMessage({ id: \"IDS_OK\" }), this.props.intl.formatMessage({ id: \"IDS_CANCEL\" }),\r\n            () => this.deleteRecord(obj));\r\n    }\r\n    tabDetail = (userSite) => {\r\n        const tabMap = new Map();\r\n        tabMap.set(\"IDS_USERMULTIROLE\", <UserMultiRoleTab   userRoleControlRights={this.props.userRoleControlRights}\r\n                                                            controlMap={this.props.controlMap}\r\n                                                            inputParam={this.props.inputParam}\r\n                                                            userInfo={this.props.userInfo}  \r\n                                                            screenName={\"IDS_ROLE\"}                                                            \r\n                                                            resetPassword={this.resetPassword}                                                            \r\n                                                            getUserMultiRoleComboDataService={this.props.getUserMultiRoleComboDataService}\r\n                                                            masterData={this.props.masterData}\r\n                                                            userSite={userSite}\r\n                                                            dataResult={this.props.masterData[\"UserMultiRole\"]||[]}\r\n                                                            // dataResult={process(this.props.masterData[\"UserMultiRole\"],(this.props.screenName === undefined || this.props.screenName === \"IDS_ROLE\") ?this.state.roleDataState :{skip:0, take:10})}\r\n                                                            dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_ROLE\") ?  \r\n                                                                            this.state.roleDataState :{skip:0, take:10}}\r\n                                                            dataStateChange={(event)=> this.setState({roleDataState: event.dataState})}\r\n                                                            multiRoleColumnList={this.multiRoleColumnList}\r\n                                                            deleteRecord={this.deleteRecord} \r\n                                                            selectedId={this.props.selectedId}\r\n                                                    />)\r\n        tabMap.set(\"IDS_USERMULTIDEPUTY\", <UserMultiDeputyTab   userRoleControlRights={this.props.userRoleControlRights}\r\n                                                                controlMap={this.props.controlMap}\r\n                                                                inputParam={this.props.inputParam}\r\n                                                                userInfo={this.props.userInfo}   \r\n                                                                screenName={\"IDS_DEPUTY\"} \r\n                                                                getUserMultiDeputyComboDataService={this.props.getUserMultiDeputyComboDataService}\r\n                                                                masterData={this.props.masterData}\r\n                                                                userSite={userSite}\r\n                                                                dataResult={this.props.masterData[\"UserMultiDeputy\"]||[]}\r\n                                                                // dataResult={process(this.props.masterData[\"UserMultiDeputy\"],(this.props.screenName === undefined || this.props.screenName === \"IDS_DEPUTY\") ?this.state.deputyDataState :  {skip:0, take:10})}\r\n                                                                dataState={(this.props.screenName === undefined || this.props.screenName === \"IDS_DEPUTY\") ? \r\n                                                                                this.state.deputyDataState :  {skip:0, take:10}}\r\n                                                                dataStateChange={(event)=> this.setState({deputyDataState: event.dataState})}\r\n                                                                multiDeputyColumnList={this.multiDeputyColumnList}\r\n                                                                deleteRecord={this.deleteRecord} \r\n                                                                selectedId={this.props.selectedId}\r\n                                                    />)\r\n       return tabMap;\r\n    }    \r\n\r\n    onTabChange = (tabProps) =>{\r\n        const screenName = tabProps.screenName;\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {screenName}\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n    }\r\n    \r\n    closeModal = () => {\r\n        let loadEsign = this.props.loadEsign;\r\n        let openChildModal = this.props.openChildModal;\r\n        let selectedRecord = this.props.selectedRecord;\r\n        if (this.props.loadEsign){          \r\n            if (this.props.operation === \"delete\" || this.props.operation === \"reset\"){\r\n                loadEsign = false;\r\n                openChildModal =  false;\r\n\r\n                selectedRecord['esignpassword'] = \"\"\r\n                selectedRecord['esigncomments'] = \"\"\r\n                selectedRecord['esignreason']=\"\"\r\n            }\r\n            else{\r\n                loadEsign = false;\r\n                selectedRecord['esignpassword'] = \"\"\r\n              selectedRecord['esigncomments'] = \"\"\r\n              selectedRecord['esignreason']=\"\"\r\n            }\r\n        }\r\n        else{\r\n            openChildModal =  false;\r\n            selectedRecord={};\r\n        }\r\n\r\n        const updateInfo = {\r\n            typeName: DEFAULT_RETURN,\r\n            data: {openChildModal, loadEsign, selectedRecord, selectedId:null}\r\n        }\r\n        this.props.updateStore(updateInfo);\r\n        \r\n    }\r\n\r\n    onComboChange = (comboData, fieldName) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n        selectedRecord[fieldName] = comboData;\r\n       \r\n        if(fieldName === \"ndeputyusersitecode\"){\r\n            if (comboData === null){\r\n                selectedRecord[\"sdeputyname\"] =\"\";\r\n            }\r\n            else{\r\n                this.props.deputyUserList.map(dataItem=>{\r\n                    if (dataItem.item.nusersitecode === comboData.value){\r\n                        selectedRecord[\"sdeputyname\"] =  dataItem.item.sfirstname + \" \" +dataItem.item.slastname \r\n                    }\r\n                    return null;      \r\n                }) \r\n            }        \r\n        }\r\n        this.setState({selectedRecord});\r\n        \r\n    }\r\n\r\n    onInputOnChange = (event) => {\r\n        const selectedRecord = this.state.selectedRecord || {};\r\n      \r\n        if (event.target.type === 'checkbox')\r\n        {\r\n            if (event.target.name === \"ntransactionstatus\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.ACTIVE : transactionStatus.DEACTIVE;\r\n            else if (event.target.name === \"nlockmode\")\r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.UNLOCK : transactionStatus.LOCK;\r\n            else    \r\n                selectedRecord[event.target.name] = event.target.checked === true ? transactionStatus.YES : transactionStatus.NO;\r\n        }\r\n        else{\r\n            selectedRecord[event.target.name] = event.target.value;\r\n        }\r\n        this.setState({selectedRecord});\r\n    }\r\n\r\n    componentDidUpdate(previousProps){       \r\n        if (this.props.masterData !== previousProps.masterData ){    \r\n            let {roleDataState, deputyDataState} = this.state;\r\n                if(this.props.dataState === undefined){\r\n                    if (this.props.screenName === \"IDS_ROLE\")\r\n                    {\r\n                        roleDataState = {skip:0,take:10};\r\n                    }\r\n                    else if (this.props.screenName === \"IDS_DEPUTY\")\r\n                    {\r\n                        deputyDataState = {skip:0,take:10};\r\n                    }\r\n                    else// if (this.props.screenName === \"IDS_SITE\")\r\n                    {\r\n                        roleDataState = {skip:0,take:10};\r\n                        deputyDataState = {skip:0,take:10};\r\n                    }\r\n                }         \r\n            this.setState({ roleDataState, deputyDataState});\r\n        }\r\n\r\n        if (this.props.selectedRecord !== previousProps.selectedRecord ){             \r\n            this.setState({selectedRecord:this.props.selectedRecord});\r\n         }       \r\n    }\r\n\r\n    onSaveClick = (saveType, formRef) => {\r\n              //add / edit  \r\n        let inputParam = {};\r\n        let clearSelectedRecordField =[];\r\n        if (this.props.screenName === \"IDS_ROLE\")\r\n        {\r\n            inputParam = this.saveRole(saveType, formRef);\r\n\r\n            clearSelectedRecordField =[\r\n                \r\n                { \"idsName\": \"IDS_DEFAULTROLE\", \"dataField\": \"ndefaultrole\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":4},\r\n                { \"idsName\": \"IDS_ISACTIVE\", \"dataField\": \"ntransactionstatus\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":1},\r\n                \r\n            ]\r\n        }\r\n        else if (this.props.screenName === \"IDS_DEPUTY\")\r\n        {\r\n            inputParam = this.saveDeputy(saveType, formRef);\r\n        }\r\n        else if (this.props.screenName === \"IDS_SITE\")\r\n        {\r\n            inputParam = this.saveUserSite(saveType, formRef);\r\n\r\n            clearSelectedRecordField =[\r\n                \r\n                { \"idsName\": \"IDS_DEFAULTSITE\", \"dataField\": \"ndefaultsite\", \"width\": \"100px\",\"isClearField\":true,\"preSetValue\":4},\r\n                \r\n            ]\r\n        }\r\n      \r\n       if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.ncontrolCode)){\r\n            const updateInfo = {\r\n                typeName: DEFAULT_RETURN,\r\n                data: {\r\n                    loadEsign:true, screenData:{inputParam, masterData:this.props.masterData}, saveType\r\n                }\r\n            }\r\n            this.props.updateStore(updateInfo);\r\n        }\r\n        else{\r\n            if(this.props.screenName === \"IDS_SITE\" || this.props.screenName === \"IDS_ROLE\")\r\n            {\r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\",\"\",\"\",clearSelectedRecordField);\r\n            }\r\n            else\r\n            {\r\n               this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n            }\r\n        }\r\n           \r\n    }\r\n    \r\n    saveRole(saveType, formRef ){\r\n       \r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"users\"] = this.props.masterData.SelectedUser;\r\n        inputData[\"usermultirole\"] = {};\r\n  \r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n\r\n        let postParam = undefined;\r\n        if ( this.props.operation === \"update\"){\r\n            // edit\r\n            postParam =  { inputListName : \"Users\", selectedObject : \"SelectedUser\", primaryKeyField : \"nusercode\" };\r\n           \r\n            inputData[\"usermultirole\"] = JSON.parse(JSON.stringify(this.props.selectedRecord));      \r\n            selectedId = this.props.selectedRecord.nusermultirolecode; \r\n            dataState = this.state.roleDataState;  \r\n        }\r\n        if (inputData[\"usermultirole\"].hasOwnProperty('esignpassword')) {\r\n            if (inputData[\"usermultirole\"]['esignpassword'] === '') {\r\n                delete inputData[\"usermultirole\"]['esigncomments']\r\n                delete inputData[\"usermultirole\"]['esignpassword']\r\n                delete inputData[\"usermultirole\"]['esignreason']\r\n\r\n            }\r\n        }        \r\n        inputData[\"usermultirole\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : \"\";\r\n        inputData[\"usermultirole\"][\"nusersitecode\"] = this.props.masterData.UsersSite.nusersitecode;\r\n     \r\n        inputData[\"usermultirole\"][\"ndefaultrole\"] = this.state.selectedRecord[\"ndefaultrole\"] ? this.state.selectedRecord[\"ndefaultrole\"]:transactionStatus.NO;\r\n        inputData[\"usermultirole\"][\"ntransactionstatus\"] = this.state.selectedRecord[\"ntransactionstatus\"];\r\n        const inputParam = {\r\n                                classUrl: this.props.inputParam.classUrl,\r\n                                methodUrl: \"UserMultiRole\", \r\n                                inputData: inputData, selectedId, dataState, postParam,\r\n                                operation: this.props.operation , saveType, formRef , selectedRecord:{...this.state.selectedRecord}      \r\n                            }       \r\n        return inputParam;\r\n    }\r\n\r\n    saveDeputy(saveType, formRef ){\r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"users\"] = this.props.masterData.SelectedUser;\r\n        inputData[\"usermultideputy\"]  = {};\r\n  \r\n        let dataState = undefined;\r\n        let selectedId = null;\r\n\r\n        let postParam = undefined;\r\n\r\n        if ( this.props.operation === \"update\"){\r\n            // edit\r\n            postParam =  { inputListName : \"Users\", selectedObject : \"SelectedUser\", primaryKeyField : \"nusercode\" };\r\n           \r\n            inputData[\"usermultideputy\"] = JSON.parse(JSON.stringify(this.props.selectedRecord));  \r\n            selectedId = this.props.selectedRecord.nusermultideputycode; \r\n            dataState = this.state.deputyDataState;       \r\n        }\r\n        if (inputData[\"usermultideputy\"].hasOwnProperty('esignpassword')) {\r\n            if (inputData[\"usermultideputy\"]['esignpassword'] === '') {\r\n                delete inputData[\"usermultideputy\"]['esigncomments']\r\n                delete inputData[\"usermultideputy\"]['esignpassword']\r\n                delete inputData[\"usermultideputy\"]['esignreason']\r\n            }\r\n        }     \r\n        inputData[\"usermultideputy\"][\"nuserrolecode\"] = this.state.selectedRecord[\"nuserrolecode\"] ? this.state.selectedRecord[\"nuserrolecode\"].value : \"\";\r\n        inputData[\"usermultideputy\"][\"nusersitecode\"] = this.props.masterData.UsersSite.nusersitecode;\r\n        inputData[\"usermultideputy\"][\"ndeputyusersitecode\"] = this.state.selectedRecord[\"ndeputyusersitecode\"] ? this.state.selectedRecord[\"ndeputyusersitecode\"].value : \"\";                                      \r\n        inputData[\"usermultideputy\"][\"ntransactionstatus\"] = this.state.selectedRecord[\"ntransactionstatus\"];\r\n\r\n        const inputParam = {\r\n                                classUrl: this.props.inputParam.classUrl,\r\n                                methodUrl: \"UserMultiDeputy\",                         \r\n                                inputData: inputData, selectedId, dataState, postParam,\r\n                                operation: this.props.operation, saveType, formRef  , selectedRecord:{...this.state.selectedRecord}     \r\n                            }\r\n        return inputParam;\r\n    }\r\n\r\n    saveUserSite(saveType, formRef ){      \r\n        let inputData = [];\r\n        inputData[\"userinfo\"] = this.props.userInfo;\r\n        inputData[\"userssite\"] = {};\r\n  \r\n        let postParam = undefined;\r\n        if ( this.props.operation === \"update\"){\r\n            // edit\r\n            postParam =  { inputListName : \"Users\", selectedObject : \"SelectedUser\", primaryKeyField : \"nusercode\" };\r\n           \r\n            inputData[\"userssite\"] = JSON.parse(JSON.stringify(this.props.selectedRecord));         \r\n        }\r\n        inputData[\"userssite\"][\"nusercode\"] = this.props.masterData.SelectedUser.nusercode;  \r\n        inputData[\"userssite\"][\"nsitecode\"] = this.state.selectedRecord[\"nsitecode\"] ? this.state.selectedRecord[\"nsitecode\"].value : \"\";\r\n        inputData[\"userssite\"][\"ndefaultsite\"] = this.state.selectedRecord[\"ndefaultsite\"] ? this.state.selectedRecord[\"ndefaultsite\"]:transactionStatus.NO;\r\n        const inputParam = {\r\n                                classUrl: this.props.inputParam.classUrl,\r\n                                methodUrl: \"UsersSite\", \r\n                                inputData: inputData, dataState :undefined, postParam,\r\n                                operation: this.props.operation, saveType, formRef ,selectedRecord:{...this.state.selectedRecord}      \r\n                            }       \r\n        return inputParam;\r\n    }\r\n\r\n    resetPassword = () =>{\r\n        if (this.props.masterData.SelectedUser.ntransactionstatus === transactionStatus.RETIRED){\r\n            toast.warn(this.props.intl.formatMessage({id: \"IDS_CANNOTRESETPWDRETIREDUSER\"}));\r\n        }\r\n        else{\r\n            const inputParam = {\r\n                                    classUrl: this.props.inputParam.classUrl,\r\n                                    methodUrl:\"Password\",                                  \r\n                                    inputData: {\"users\":this.props.masterData.SelectedUser,\r\n                                                \"userinfo\": this.props.userInfo,\r\n                                                \"nusersitecode\":this.props.masterData.UsersSite.nusersitecode\r\n                                            },\r\n                                    operation:\"reset\",\r\n                                    dataState:this.state.roleDataState,\r\n                                    selectedRecord:{...this.state.selectedRecord}    \r\n                            }     \r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, this.props.controlMap.get(\"ResetPassword\").ncontrolcode)){\r\n                const updateInfo = {\r\n                        typeName: DEFAULT_RETURN,\r\n                        data: {\r\n                            loadEsign:true, screenData:{inputParam, masterData:this.props.masterData}, \r\n                            openChildModal:true, screenName:\"IDS_ROLE\", operation:\"reset\"\r\n                            }\r\n                        }\r\n                    this.props.updateStore(updateInfo);\r\n            }\r\n            else{              \r\n                this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\"); \r\n            }          \r\n        }\r\n    }\r\n\r\n    deleteRecord = (deleteParam) =>{       \r\n       \r\n        if (this.props.masterData.SelectedUser.ntransactionstatus === transactionStatus.RETIRED){\r\n            //const message = \"IDS_CANNOTDELETE\"+deleteParam.screenName.toUpperCase() +\"RETIREDUSER\";\r\n            const message = \"IDS_CANNOTDELETE\"+deleteParam.screenName.split(\"IDS_\")[1].toUpperCase() +\"RETIREDUSER\";\r\n            toast.warn(this.props.intl.formatMessage({id:message}));\r\n        }\r\n        else{\r\n            let dataState = undefined;\r\n            if (this.props.screenName === \"IDS_ROLE\")\r\n            {\r\n                dataState = this.state.roleDataState;\r\n            }\r\n            else if (this.props.screenName === \"IDS_DEPUTY\")\r\n            {\r\n                dataState = this.state.deputyDataState;\r\n            }\r\n            const postParam = { inputListName : \"Users\", selectedObject : \"SelectedUser\",\r\n                                primaryKeyField : \"nusercode\", \r\n                                primaryKeyValue : this.props.masterData.SelectedUser.nusercode,\r\n                                fetchUrl : \"users/getUsers\",\r\n                                fecthInputObject : {userinfo:this.props.userInfo},\r\n        } \r\n            const inputParam = {\r\n                                    classUrl: this.props.inputParam.classUrl,\r\n                                    methodUrl:deleteParam.methodUrl,                                  \r\n                                    inputData: {[deleteParam.methodUrl.toLowerCase()] :deleteParam.selectedRecord,\r\n                                                \"userinfo\": this.props.userInfo,\r\n                                                \"users\":this.props.masterData.SelectedUser},\r\n                                    operation:deleteParam.operation , dataState, postParam,\r\n                                    selectedRecord:{...this.state.selectedRecord}\r\n                                }        \r\n         \r\n            if (showEsign(this.props.esignRights, this.props.userInfo.nformcode, deleteParam.ncontrolCode)){\r\n                const updateInfo = {\r\n                     typeName: DEFAULT_RETURN,\r\n                     data: {\r\n                         loadEsign:true, screenData:{inputParam, masterData:this.props.masterData}, \r\n                         openChildModal:true, screenName:deleteParam.screenName, operation:deleteParam.operation\r\n                         }\r\n                     }\r\n                 this.props.updateStore(updateInfo);\r\n             }\r\n             else{\r\n                 this.props.crudMaster(inputParam, this.props.masterData, \"openChildModal\");\r\n             }\r\n        }\r\n    }  \r\n\r\n    validateEsign = () =>{       \r\n        const inputParam = {\r\n                                inputData: {\"userinfo\": {...this.props.userInfo, \r\n                                                        sreason: this.state.selectedRecord[\"esigncomments\"],\r\n                                                        nreasoncode:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].value,\r\n                                                        spredefinedreason:this.state.selectedRecord[\"esignreason\"] && this.state.selectedRecord[\"esignreason\"].label,\r\n                                                    },\r\n                                             password : this.state.selectedRecord[\"esignpassword\"]\r\n                                            },\r\n                                screenData : this.props.screenData\r\n                            }        \r\n        this.props.validateEsignCredential(inputParam, \"openChildModal\");\r\n    }\r\n}\r\n\r\nexport default injectIntl(UserTabs);"]},"metadata":{},"sourceType":"module"}