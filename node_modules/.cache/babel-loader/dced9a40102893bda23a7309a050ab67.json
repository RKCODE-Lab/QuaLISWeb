{"ast":null,"code":"import _objectSpread from\"D:\\\\LIMSWFH\\\\LIMSPOSTGRESQL\\\\QuaLISWeb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import Axios from\"axios\";import{toast}from\"react-toastify\";import{constructOptionList,sortData}from\"../components/CommonScript\";import{transactionStatus}from\"../components/Enumeration\";import rsapi from\"../rsapi\";import{initRequest}from\"./LoginAction\";import{intl}from'../components/App';import{DEFAULT_RETURN}from\"./LoginTypes\";export function getSeqNoFormats(inputObj,selectedRecord){return function(dispatch){dispatch(initRequest(true));var URL=[rsapi.post('/registrationsubtype/getAllSeqNoFormats',{userinfo:inputObj.userInfo})];URL.push(rsapi.post('/registrationsubtype/getPeriods',{userinfo:inputObj.userInfo}));URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormats',{userinfo:inputObj.userInfo}));URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormatsRelease',{userinfo:inputObj.userInfo}));URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease',{userinfo:inputObj.userInfo}));Axios.all(URL).then(function(response){var periodMap=constructOptionList(response[1].data||[],'nperiodcode','speriodname');var periodList=periodMap.get(\"OptionList\");var periodDefault=periodMap.get(\"DefaultValue\");if(periodDefault!==undefined){selectedRecord={\"nperiodcode\":{\"value\":periodDefault.value,\"label\":periodDefault.label}};}dispatch({type:DEFAULT_RETURN,payload:{existingFormats:response[0].data,sitewiseexistingFormats:response[2].data,sitewiseexistingFormatsRelease:response[3].data,sreleaseexistingFormats:response[4].data,periodList:periodList,selectedRecord:selectedRecord,openChildModal:true,loading:false,operation:'create',screenName:\"Version\",ncontrolcode:inputObj.ncontrolcode}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getRegistrationSubTypeOnReload(userInfo,searchRef){return function(dispatch){dispatch(initRequest(true));rsapi.post('registrationsubtype/getRegistrationSubType',{userinfo:userInfo}).then(function(res){var masterData=_objectSpread({},res.data);if(searchRef!==undefined&&searchRef.current!==null){searchRef.current.value=\"\";//masterData['searchedData'] = undefined\n}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false,reloadData:true}});}).catch(function(err){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(err.response.status===500)toast.error(err.message);else toast.warn(err.response.data);});};}export function getRegistrationSubTypeMaster(selectedSampleType,selectedRegType,masterData,userInfo,searchRef){return function(dispatch){if(selectedRegType.value===undefined){toast.warn(intl.formatMessage({id:\"IDS_SELECTALLVALUESINFILTER\"}));}else{dispatch(initRequest(true));rsapi.post('registrationsubtype/getRegistrationSubTypeMaster',{nregtypecode:selectedRegType.value,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread({},masterData),response.data);if(searchRef!==undefined&&searchRef.current!==null){searchRef.current.value=\"\";masterData['searchedData']=undefined;}sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,realSampleType:selectedSampleType,realRegtype:selectedRegType,loading:false}});}).catch(function(err){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(err.response.status===500)toast.error(err.message);else toast.warn(err.response.data);});}};}export function selectRegistrationSubType(selectedRegSubType,masterData,userInfo){return function(dispatch){dispatch(initRequest(true));rsapi.post('/registrationsubtype/getRegistrationSubTypeById',{nregsubtypecode:selectedRegSubType.nregsubtypecode,userinfo:userInfo}).then(function(response){masterData=_objectSpread(_objectSpread(_objectSpread({},masterData),response.data),{},{selectedRegistrationSubType:selectedRegSubType});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(err){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(err.response.status===500)toast.error(err.message);else toast.warn(err.response.data);});};}export function getEditRegSubType(nregsubtypecode,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));rsapi.post('/registrationsubtype/getEditRegSubType',{nregsubtypecode:nregsubtypecode,userinfo:userInfo}).then(function(response){var selectedRecord=_objectSpread({nregsubtypecode:response.data.nregsubtypecode,nregtypecode:response.data.nregtypecode},response.data.jsondata);dispatch({type:DEFAULT_RETURN,payload:{selectedRecord:selectedRecord,loading:false,openModal:true,screenName:\"IDS_REGISTRATIONSUBTYPE\",ncontrolcode:ncontrolcode,operation:\"update\"}});}).catch(function(err){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(err.response.status===500)toast.error(err.message);else toast.warn(err.response.data);});};}export function getRegSubTypeDetails(inputObj){var version=inputObj.version,masterData=inputObj.masterData,userInfo=inputObj.userInfo;return function(dispatch){if(!(masterData.selectedVersion.nregsubtypeversioncode===version.nregsubtypeversioncode)){dispatch(initRequest(true));rsapi.post('registrationsubtype/getVersionDetails',{userinfo:userInfo,nregsubtypeversioncode:version.nregsubtypeversioncode}).then(function(res){masterData=_objectSpread(_objectSpread({},masterData),{},{selectedVersion:res.data});sortData(masterData);dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,loading:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});}};}export function getVersionById(primaryKey,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));var URL=[];URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormats',{userinfo:userInfo}));URL.push(rsapi.post('/registrationsubtype/getPeriods',{userinfo:userInfo}));URL.push(rsapi.post('registrationsubtype/getVersionDetails',{userinfo:userInfo,nregsubtypeversioncode:primaryKey}));Axios.all(URL).then(function(res){if(res[2].data.ntransactionstatus===transactionStatus.DRAFT){var periodList=constructOptionList(res[1].data||[],'nperiodcode','speriodname').get(\"OptionList\");var nperiodcode=periodList.filter(function(period){return period.value===res[2].data.nperiodcode;});var selectedRecord={};selectedRecord=_objectSpread(_objectSpread({},res[2].data.jsondata),{},{nperiodcode:nperiodcode[0],nregsubtypeversioncode:primaryKey});dispatch({type:DEFAULT_RETURN,payload:{existingFormats:res[0].data,periodList:periodList,selectedRecord:selectedRecord,openChildModal:true,operation:'update',ncontrolcode:ncontrolcode,loading:false,screenName:\"Version\"}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterStatus:\"IDS_SELECTDRAFTRECORD\"}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getRegistrationTypeBySampleType(comboData,masterData,userInfo,realRegtype){return function(dispatch){dispatch(initRequest(true));rsapi.post('registrationtype/getRegistrationTypeBySampleType',{nsampletypecode:comboData.value,userinfo:userInfo}).then(function(res){masterData=_objectSpread(_objectSpread({},masterData),{},{RegistrationTypes:res.data});dispatch({type:DEFAULT_RETURN,payload:{masterData:masterData,selectedSampleType:comboData,realRegtype:realRegtype,loading:false,reloadData:false}});}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}export function getVersionByReleaseNo(primaryKey,userInfo,ncontrolcode){return function(dispatch){dispatch(initRequest(true));var URL=[];URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease',{userinfo:userInfo}));URL.push(rsapi.post('/registrationsubtype/getPeriods',{userinfo:userInfo}));URL.push(rsapi.post('registrationsubtype/getVersionDetailsByRelease',{userinfo:userInfo,nregsubtypeversioncode:primaryKey}));Axios.all(URL).then(function(res){if(res[2].data.ntransactionstatus===transactionStatus.DRAFT){var periodList=constructOptionList(res[1].data||[],'nperiodcode','speriodname').get(\"OptionList\");var nperiodcode=periodList.filter(function(period){return period.value===res[2].data.nperiodcode;});var selectedRecord={};selectedRecord=_objectSpread(_objectSpread({},res[2].data.jsondata),{},{nperiodcode:nperiodcode[0],nregsubtypeversionreleasecode:res[2].data.nregsubtypeversionreleasecode});dispatch({type:DEFAULT_RETURN,payload:{sreleaseexistingFormats:res[0].data,periodList:periodList,selectedRecord:selectedRecord,openChildModal:true,operation:'update',ncontrolcode:ncontrolcode,loading:false,screenName:\"IDS_RELEASEARNO\"}});}else{dispatch({type:DEFAULT_RETURN,payload:{loading:false,masterStatus:\"IDS_SELECTDRAFTRECORD\"}});}}).catch(function(error){dispatch({type:DEFAULT_RETURN,payload:{loading:false}});if(error.response.status===500){toast.error(error.message);}else{toast.warn(error.response.data);}});};}","map":{"version":3,"sources":["D:/LIMSWFH/LIMSPOSTGRESQL/QuaLISWeb/src/actions/RegistrationSubTypeAction.js"],"names":["Axios","toast","constructOptionList","sortData","transactionStatus","rsapi","initRequest","intl","DEFAULT_RETURN","getSeqNoFormats","inputObj","selectedRecord","dispatch","URL","post","userinfo","userInfo","push","all","then","response","periodMap","data","periodList","get","periodDefault","undefined","value","label","type","payload","existingFormats","sitewiseexistingFormats","sitewiseexistingFormatsRelease","sreleaseexistingFormats","openChildModal","loading","operation","screenName","ncontrolcode","catch","error","status","message","warn","getRegistrationSubTypeOnReload","searchRef","res","masterData","current","reloadData","err","getRegistrationSubTypeMaster","selectedSampleType","selectedRegType","formatMessage","id","nregtypecode","realSampleType","realRegtype","selectRegistrationSubType","selectedRegSubType","nregsubtypecode","selectedRegistrationSubType","getEditRegSubType","jsondata","openModal","getRegSubTypeDetails","version","selectedVersion","nregsubtypeversioncode","getVersionById","primaryKey","ntransactionstatus","DRAFT","nperiodcode","filter","period","masterStatus","getRegistrationTypeBySampleType","comboData","nsampletypecode","RegistrationTypes","getVersionByReleaseNo","nregsubtypeversionreleasecode"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { constructOptionList, sortData } from \"../components/CommonScript\";\r\nimport { transactionStatus } from \"../components/Enumeration\";\r\nimport rsapi from \"../rsapi\"\r\nimport { initRequest } from \"./LoginAction\"\r\nimport { intl } from '../components/App';\r\nimport { DEFAULT_RETURN } from \"./LoginTypes\";\r\n\r\nexport function getSeqNoFormats(inputObj,selectedRecord) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = [rsapi.post('/registrationsubtype/getAllSeqNoFormats', { userinfo: inputObj.userInfo })]\r\n\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormats', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getSiteWiseAllSeqNoFormatsRelease', { userinfo: inputObj.userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', { userinfo: inputObj.userInfo }))\r\n\r\n        Axios.all(URL)\r\n            .then(response => {\r\n                let periodMap = constructOptionList(response[1].data || [], 'nperiodcode', 'speriodname');\r\n                let periodList = periodMap.get(\"OptionList\")\r\n                const periodDefault = periodMap.get(\"DefaultValue\");\r\n\r\n                if (periodDefault !== undefined) {\r\n                    selectedRecord = {\r\n                        \"nperiodcode\": {\r\n                            \"value\": periodDefault.value,\r\n                            \"label\": periodDefault.label\r\n                        },\r\n                    }\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        existingFormats: response[0].data,\r\n                        sitewiseexistingFormats: response[2].data,\r\n                        sitewiseexistingFormatsRelease: response[3].data,\r\n                        sreleaseexistingFormats: response[4].data,\r\n                        periodList,\r\n                        selectedRecord,\r\n                        openChildModal: true,\r\n                        loading: false,\r\n                        operation: 'create',\r\n                        screenName: \"Version\",\r\n                        ncontrolcode:inputObj.ncontrolcode\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationSubTypeOnReload(userInfo,searchRef) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('registrationsubtype/getRegistrationSubType', { userinfo: userInfo })\r\n            .then(res => {\r\n                let masterData = {\r\n                    ...res.data\r\n                }\r\n                if (searchRef !== undefined && searchRef.current !== null) {\r\n                    searchRef.current.value = \"\";\r\n                    //masterData['searchedData'] = undefined\r\n                }\r\n                sortData(masterData)\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false,\r\n                        reloadData: true\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationSubTypeMaster(selectedSampleType, selectedRegType, masterData, userInfo,searchRef) {\r\n    return function (dispatch) {\r\n        if(selectedRegType.value === undefined){\r\n            toast.warn(intl.formatMessage({ id: \"IDS_SELECTALLVALUESINFILTER\" }));\r\n        }\r\n        else{\r\n            dispatch(initRequest(true));\r\n            rsapi.post('registrationsubtype/getRegistrationSubTypeMaster', { nregtypecode: selectedRegType.value, userinfo: userInfo })\r\n                .then(response => {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        ...response.data\r\n                    }\r\n                    if (searchRef !== undefined && searchRef.current !== null) {\r\n                        searchRef.current.value = \"\";\r\n                        masterData['searchedData'] = undefined\r\n                    }\r\n                    sortData(masterData);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN,\r\n                        payload: {\r\n                            masterData,\r\n                            realSampleType: selectedSampleType,\r\n                            realRegtype: selectedRegType,\r\n                            loading: false\r\n                        }\r\n                    })\r\n                })\r\n                .catch(err => {\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: { loading: false }\r\n                    })\r\n                    if (err.response.status === 500)\r\n                        toast.error(err.message);\r\n                    else\r\n                        toast.warn(err.response.data)\r\n                })\r\n            }\r\n    }\r\n}\r\nexport function selectRegistrationSubType(selectedRegSubType, masterData, userInfo) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('/registrationsubtype/getRegistrationSubTypeById', { nregsubtypecode: selectedRegSubType.nregsubtypecode, userinfo: userInfo })\r\n            .then(response => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    ...response.data,\r\n                    selectedRegistrationSubType: selectedRegSubType\r\n                }\r\n                sortData(masterData);\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        loading: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getEditRegSubType(nregsubtypecode, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('/registrationsubtype/getEditRegSubType', { nregsubtypecode, userinfo: userInfo })\r\n            .then(response => {\r\n                let selectedRecord = {\r\n                    nregsubtypecode: response.data.nregsubtypecode,\r\n                    nregtypecode: response.data.nregtypecode,\r\n                    ...response.data.jsondata\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        selectedRecord,\r\n                        loading: false,\r\n                        openModal: true,\r\n                        screenName: \"IDS_REGISTRATIONSUBTYPE\",\r\n                        ncontrolcode,\r\n                        operation: \"update\"\r\n                    }\r\n                })\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: DEFAULT_RETURN, payload: { loading: false }\r\n                })\r\n                if (err.response.status === 500)\r\n                    toast.error(err.message);\r\n                else\r\n                    toast.warn(err.response.data)\r\n            })\r\n    }\r\n}\r\nexport function getRegSubTypeDetails(inputObj) {\r\n    let { version, masterData, userInfo } = inputObj;\r\n    return function (dispatch) {\r\n        if (!(masterData.selectedVersion.nregsubtypeversioncode === version.nregsubtypeversioncode)) {\r\n            dispatch(initRequest(true));\r\n            rsapi.post('registrationsubtype/getVersionDetails', { userinfo: userInfo, nregsubtypeversioncode: version.nregsubtypeversioncode })\r\n                .then(res => {\r\n                    masterData = {\r\n                        ...masterData,\r\n                        selectedVersion: res.data\r\n                    }\r\n                    sortData(masterData);\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            masterData,\r\n                            loading: false\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                    if (error.response.status === 500) {\r\n                        toast.error(error.message);\r\n                    }\r\n                    else {\r\n                        toast.warn(error.response.data);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n}\r\nexport function getVersionById(primaryKey, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = []\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormats', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('registrationsubtype/getVersionDetails', { userinfo: userInfo, nregsubtypeversioncode: primaryKey }))\r\n        Axios.all(URL)\r\n            .then(res => {\r\n                if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\r\n                    let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\")\r\n                    let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode)\r\n                    let selectedRecord = {}\r\n                    selectedRecord = {\r\n                        ...res[2].data.jsondata,\r\n                        nperiodcode:nperiodcode[0],\r\n                        nregsubtypeversioncode: primaryKey\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            existingFormats: res[0].data,\r\n                            periodList,\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n                            operation: 'update',\r\n                            ncontrolcode,\r\n                            loading: false,\r\n                            screenName:\"Version\"\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterStatus: \"IDS_SELECTDRAFTRECORD\" } });\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\nexport function getRegistrationTypeBySampleType(comboData, masterData, userInfo, realRegtype) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        rsapi.post('registrationtype/getRegistrationTypeBySampleType', { nsampletypecode: comboData.value, userinfo: userInfo })\r\n            .then(res => {\r\n                masterData = {\r\n                    ...masterData,\r\n                    RegistrationTypes: res.data\r\n                }\r\n                dispatch({\r\n                    type: DEFAULT_RETURN,\r\n                    payload: {\r\n                        masterData,\r\n                        selectedSampleType: comboData,\r\n                        realRegtype,\r\n                        loading: false,\r\n                        reloadData: false\r\n                    }\r\n                })\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport function getVersionByReleaseNo(primaryKey, userInfo, ncontrolcode) {\r\n    return function (dispatch) {\r\n        dispatch(initRequest(true));\r\n        let URL = []\r\n        URL.push(rsapi.post('/registrationsubtype/getAllSeqNoFormatsByRelease', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('/registrationsubtype/getPeriods', { userinfo: userInfo }))\r\n        URL.push(rsapi.post('registrationsubtype/getVersionDetailsByRelease', { userinfo: userInfo, nregsubtypeversioncode: primaryKey }))\r\n        Axios.all(URL)\r\n            .then(res => {\r\n                if (res[2].data.ntransactionstatus === transactionStatus.DRAFT) {\r\n                    let periodList = constructOptionList(res[1].data || [], 'nperiodcode', 'speriodname').get(\"OptionList\")\r\n                    let nperiodcode = periodList.filter(period => period.value === res[2].data.nperiodcode)\r\n                    let selectedRecord = {}\r\n                    selectedRecord = {\r\n                        ...res[2].data.jsondata,\r\n                        nperiodcode:nperiodcode[0],\r\n                        nregsubtypeversionreleasecode: res[2].data.nregsubtypeversionreleasecode\r\n\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: DEFAULT_RETURN, payload: {\r\n                            sreleaseexistingFormats: res[0].data,\r\n                            periodList,\r\n                            selectedRecord,\r\n                            openChildModal: true,\r\n                            operation: 'update',\r\n                            ncontrolcode,\r\n                            loading: false,\r\n                            screenName:\"IDS_RELEASEARNO\"\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({ type: DEFAULT_RETURN, payload: { loading: false, masterStatus: \"IDS_SELECTDRAFTRECORD\" } });\r\n\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch({ type: DEFAULT_RETURN, payload: { loading: false } })\r\n                if (error.response.status === 500) {\r\n                    toast.error(error.message);\r\n                }\r\n                else {\r\n                    toast.warn(error.response.data);\r\n                }\r\n            })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}