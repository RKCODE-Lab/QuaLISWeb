!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("prosemirror-state"),require("prosemirror-model"),require("prosemirror-transform"),require("prosemirror-view"),require("prosemirror-schema-list"),require("prosemirror-commands"),require("prosemirror-tables"),require("prosemirror-history"),require("prosemirror-inputrules"),require("prosemirror-dropcursor"),require("prosemirror-gapcursor"),require("prosemirror-keymap")):"function"==typeof define&&define.amd?define(["prosemirror-state","prosemirror-model","prosemirror-transform","prosemirror-view","prosemirror-schema-list","prosemirror-commands","prosemirror-tables","prosemirror-history","prosemirror-inputrules","prosemirror-dropcursor","prosemirror-gapcursor","prosemirror-keymap"],t):"object"==typeof exports?exports.KendoEditorCommon=t(require("prosemirror-state"),require("prosemirror-model"),require("prosemirror-transform"),require("prosemirror-view"),require("prosemirror-schema-list"),require("prosemirror-commands"),require("prosemirror-tables"),require("prosemirror-history"),require("prosemirror-inputrules"),require("prosemirror-dropcursor"),require("prosemirror-gapcursor"),require("prosemirror-keymap")):e.KendoEditorCommon=t(e["prosemirror-state"],e["prosemirror-model"],e["prosemirror-transform"],e["prosemirror-view"],e["prosemirror-schema-list"],e["prosemirror-commands"],e["prosemirror-tables"],e["prosemirror-history"],e["prosemirror-inputrules"],e["prosemirror-dropcursor"],e["prosemirror-gapcursor"],e["prosemirror-keymap"])}(window,(function(e,t,r,n,o,i,a,s,l,u,c,f){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(t,r){t.exports=e},function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return o})),r.d(t,"__assign",(function(){return i})),r.d(t,"__rest",(function(){return a})),r.d(t,"__decorate",(function(){return s})),r.d(t,"__param",(function(){return l})),r.d(t,"__metadata",(function(){return u})),r.d(t,"__awaiter",(function(){return c})),r.d(t,"__generator",(function(){return f})),r.d(t,"__createBinding",(function(){return d})),r.d(t,"__exportStar",(function(){return p})),r.d(t,"__values",(function(){return m})),r.d(t,"__read",(function(){return g})),r.d(t,"__spread",(function(){return v})),r.d(t,"__spreadArrays",(function(){return h})),r.d(t,"__await",(function(){return y})),r.d(t,"__asyncGenerator",(function(){return k})),r.d(t,"__asyncDelegator",(function(){return b})),r.d(t,"__asyncValues",(function(){return _})),r.d(t,"__makeTemplateObject",(function(){return M})),r.d(t,"__importStar",(function(){return x})),r.d(t,"__importDefault",(function(){return S})),r.d(t,"__classPrivateFieldGet",(function(){return w})),r.d(t,"__classPrivateFieldSet",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function s(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function h(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function k(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof y?Promise.resolve(r.value.v).then(l,u):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:y(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=r(0),i=r(11);t.changeStylesString=function(e,t){var r=t.style,n=t.value,o=t.newValue;if(!e)return{changed:!1,style:null};var i=e.split(/\s*;\s*/).filter((function(e){return Boolean(e)})),a=i.filter((function(e){var t=e.split(/\s*:\s*/);return!(t[0].toLowerCase()===r&&n.test(t[1]))}));return o&&a.push(r+": "+o),{style:a.join("; ")+(a.length?";":""),changed:Boolean(o)||a.length!==i.length}},t.canInsert=function(e,t){for(var r=e.selection.$from,n=r.depth;n>=0;n--){var o=r.index(n);if(r.node(n).canReplaceWith(o,o,t))return!0}return!1};var a=function(e){return e instanceof n.Node?e.type.name:e.name};t.findNthParentNodeOfType=function(e,t){return void 0===t&&(t=1),function(r){return function(e,t){return void 0===t&&(t=1),function(r){for(var n=r.$from,o=n.depth;o>0;o--){var i=n.node(o);if(e(i)&&0===(t-=1))return{depth:o,node:i}}}}((function(t){return a(t)===a(e)}),t)(r)}},t.insertNode=function(e,t){return function(r,n){var o=r.tr.replaceSelectionWith(e);t&&o.scrollIntoView(),n(o)}},t.hasSameMarkup=function(e,t,r,o){var a=n.Fragment.from(i.parseContent(e,r,o)),s=n.Fragment.from(i.parseContent(t,r,o));return a.eq(s)},t.getSelectionText=function(e){var t=e.selection;if(t instanceof o.TextSelection||t instanceof o.AllSelection){var r=t.content().content;return r.textBetween(0,r.size)}return""},t.getNodeFromSelection=function(e){if(e.selection instanceof o.NodeSelection)return e.selection.node},t.selectedLineTextOnly=function(e){var r="",n=!1,o=e.selection,i=e.doc,a=o.$from,s=o.$to,l=o.from,u=o.to;return a.sameParent(s)&&(i.nodesBetween(l,u,(function(e){n=n||e.isLeaf&&!e.isText})),n||(r=t.getSelectionText(e))),r},t.indentHtml=function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},t.shallowEqual=function(e,t){var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every((function(r){return e[r]===t[r]}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(2);t.markApplies=function(e,t,r){for(var n=function(n){var o=t[n],i=o.$from,a=o.$to,s=0===i.depth&&e.type.allowsMarkType(r);if(e.nodesBetween(i.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(r)})),s)return{v:!0}},o=0;o<t.length;o++){var i=n(o);if(i)return i.v}return!1},t.toggleMark=function(e,r,n){return function(o,i){var a=o.selection,s=a.empty,l=a.$cursor,u=a.ranges;if(s&&!l||!t.markApplies(o.doc,u,e))return!1;if(i)if(l)e.isInSet(o.storedMarks||l.marks())?i(n.removeStoredMark(e)):i(n.addStoredMark(e.create(r)));else{for(var c=!1,f=0;!c&&f<u.length;f++){var d=u[f],p=d.$from,m=d.$to;c=o.doc.rangeHasMark(p.pos,m.pos,e)}for(f=0;f<u.length;f++){var g=u[f];p=g.$from,m=g.$to;c?n.removeMark(p.pos,m.pos,e):n.addMark(p.pos,m.pos,e.create(r))}i(n.scrollIntoView())}return!0}},t.removeMark=function(e,t,r,i){void 0===i&&(i=null);var a=[],s=0;return e.doc.nodesBetween(t,r,(function(e,n){if(e.isInline){s++;var l=null;if(i instanceof o.MarkType){var u=i.isInSet(e.marks);u&&(l=[u])}else i?i.isInSet(e.marks)&&(l=[i]):l=e.marks;if(l&&l.length)for(var c=Math.min(n+e.nodeSize,r),f=0;f<l.length;f++){for(var d=l[f],p=void 0,m=0;m<a.length;m++){var g=a[m];g.step===s-1&&d.eq(g.style)&&(p=g)}p?(p.to=c,p.step=s):a.push({style:d,from:Math.max(n,t),to:c,step:s})}}})),a.forEach((function(t){return e.step(new n.RemoveMarkStep(t.from,t.to,t.style))})),e},t.removeMarks=function(e,r,n,o){var i=r.selection,a=i.$cursor,s=i.ranges;if(o=o||r.tr,a)e.forEach((function(e){e.isInSet(r.storedMarks||a.marks())&&n(o.removeStoredMark(e))}));else{for(var l=function(r){var n=s[r],i=n.$from,a=n.$to;e.forEach((function(e){t.removeMark(o,i.pos,a.pos,e)}))},u=0;u<s.length;u++)l(u);n(o.scrollIntoView())}return!0};t.removeAllMarks=function(e){var r=(void 0===e?{}:e).except,n=void 0===r?[]:r;return function(e,r){var o,i=e.tr;t.cleanMarks(i,{except:(o=n,o instanceof Array?o:[o])}),i.docChanged&&r(i)}},t.cleanMarks=function(e,t){var r=t.except,n=e.doc,o=e.selection,i=n.type.schema,a=o.empty,s=o.ranges,l=(r||[]).map((function(e){return e.name}));if(!a){var u=Object.keys(i.marks).map((function(e){return i.marks[e]})).filter((function(e){return-1===l.indexOf(e.name)}));s.forEach((function(t){var r=t.$from,n=t.$to;u.forEach((function(t){return e.removeMark(r.pos,n.pos,t)}))}))}},t.hasMark=function(e,r){var n,o=e.schema.marks,i=(r.altMarks||[]).filter((function(e){return o[e]})),a=r.altStyle,s=e.selection,l=s.from,u=s.$from,c=s.to,f=s.empty,d=o[r.mark],p=e.doc,m=!1;return f?(n=e.storedMarks||u.marks(),m=d&&d.isInSet(n)||i.some((function(e){return o[e].isInSet(n)}))):m=d&&p.rangeHasMark(l,c,d)||i.some((function(e){return p.rangeHasMark(l,c,o[e])})),!m&&a&&o.style?t.selectionMarks(e,o.style).some((function(e){return null!==t.styleValue(e,a)})):Boolean(m)},t.styleValue=function(e,t){for(var r=(e&&e.attrs.style||"").split(/\s*;\s*/).filter((function(e){return Boolean(e)})),n=0;n<r.length;n++){var o=r[n].split(/\s*:\s*/);if(o[0].toLowerCase()===t.name&&t.value.test(o[1]))return o[1]}return null},t.selectionMarks=function(e,t){var r=e.selection,n=r.from,o=r.$from,i=r.to,a=r.empty,s=[];return a?s.push(t.isInSet(e.storedMarks||o.marks())):e.doc.nodesBetween(n,i,(function(e){e.isInline&&s.push(t.isInSet(e.marks))})),s},t.getMark=function(e,r){var n=t.selectionMarks(e,r),o=n.filter((function(e){return Boolean(e)}));return n.length===o.length?n[0]:void 0},t.getActiveMarks=function(e,r){var n=t.selectionMarks(e,r),o=n.filter((function(e){return Boolean(e)}));return{hasNodesWithoutMarks:n.length!==o.length,marks:o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(4),i=r(3),a=r(2),s=r(0);t.changeTextBlock=function(e,t,r,n){if(!r.isTextblock)return!1;e.selection.ranges.forEach((function(o){var s=e.steps.length,l=o.$from.pos,u=o.$to.pos;e.doc.nodesBetween(l,u,(function(o,l){if(o.eq(t)&&o.isTextblock&&!o.hasMarkup(r,n)&&function(e,t,r){var n=e.resolve(t),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}(e.doc,e.mapping.slice(s).map(l),r)){e.clearIncompatible(e.mapping.slice(s).map(l,1),r);var u=e.mapping.slice(s),c=u.map(l,1),f=u.map(l+o.nodeSize,1),d=new a.Slice(a.Fragment.from(r.create(n,null,o.marks)),0,0);return e.step(new i.ReplaceAroundStep(c,f,c+1,f-1,d,1,!0)),!1}}))}))},t.blockNodes=function(e,t){void 0===t&&(t={blocksInSelection:!1});var r=e.doc,n=e.selection,o=n.$from,i=n.ranges,a=t.blocksInSelection,l=[],u=n instanceof s.NodeSelection?n.node:void 0;return u?u.isBlock?(l.push(u),u.nodesBetween(0,u.content.size,(function(e){e.isBlock&&l.push(e)}))):!a&&o.parent&&o.parent.isBlock&&l.push(o.parent):i.forEach((function(e){var t=e.$from.pos,n=e.$to.pos;r.nodesBetween(t,n,(function(e,r,o,i){e.isBlock&&(!a||r>=t&&r+e.content.size+2<=n)&&l.push(e)}))})),l},t.formatBlockElements=function(e,r){return function(o,i){var a=t.blockNodes(o),s=o.schema.nodes,l=o.tr;l.setMeta("commandName",r),l.setMeta("args",{value:e}),a.forEach((function(r){if(r.type.isTextblock)if("p"===e){var o=r.attrs,i=o.level,a=n.__rest(o,["level"]);t.changeTextBlock(l,r,s.paragraph,a)}else if(/^h[1-6]$/i.test(e)){i=parseInt(e.substr(1),10);t.changeTextBlock(l,r,s.heading,n.__assign({},r.attrs,{level:i}))}else if("blockquote"===e){var u=r.attrs;i=u.level,a=n.__rest(u,["level"]);t.changeTextBlock(l,r,s.blockquote,a)}}));var u=l.docChanged;return u&&i(l.scrollIntoView()),u}},t.cleanTextBlockFormatting=function(e,r){void 0===r&&(r={blocksInSelection:!0});var o=e.doc,i=e.selection,a=r.blocksInSelection,s=r.blockNodeType;t.blockNodes({doc:o,selection:i},{blocksInSelection:a}).filter((function(e){return e.isTextblock})).forEach((function(r){var o=r.attrs||{},i=o.style,a=void 0===i?"":i,l=o.class,u=void 0===l?"":l,c=n.__rest(o,["style","class"]),f=s||r.type;(a||u||f!==r.type)&&t.changeTextBlock(e,r,f,c)}))},t.getBlockFormats=function(e){var r=t.blockNodes(e),n=e.schema.nodes,o=[];return r.forEach((function(e){e.type===n.paragraph?o.push("p"):e.type===n.heading?o.push("h"+e.attrs.level):e.type===n.blockquote&&o.push("blockquote")})),o},t.addStyles=function(e,t){var r,n,i=e.attrs.style;i&&t.forEach((function(e){n={style:e.name,value:/^.+$/,newValue:e.value},r=o.changeStylesString(i,n),i=r.changed?r.style:i}));return i=i||t.reduce((function(e,t){return(e&&t.value?e+" ":"")+t.value?t.name+": "+t.value+";":""}),""),Object.assign({},e.attrs,{style:i||null})},t.hasNode=function(e,t){var r=e.selection,n=r.from,o=r.to,i=!1;return e.doc.nodesBetween(n,o,(function(e){return!(i=i||e.type===t)})),i},t.parentBlockFormat=function(e){var r=t.getBlockFormats(e);return 1===new Set(r).size?r[0]:null},t.activeNode=function(e){return{tag:t.parentBlockFormat(e)||""}}},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(4),a=r(5),s=function(e,t){var r=e.find((function(e){return"style"===e.type.name})),n=r&&r.attrs.style;return i.changeStylesString(n,t)},l=function(e,t,r,i,a){var l=a.create({style:i.style}),u=[],c=[],f=null,d=null;return e.doc.nodesBetween(t,r,(function(e,p,m){if(e.isInline){var g=e.marks;if(!l.isInSet(g)&&m.type.allowsMarkType(l.type)){var v=Math.max(p,t),h=Math.min(p+e.nodeSize,r),y=s(g,i);if(y.changed||i.newValue){for(var k=y.changed?{style:y.style||null}:{style:[i.style]+": "+i.newValue+";"},b=a.isInSet(g)?g.find((function(e){return"style"===e.type.name})):null,_=b?n.__assign({},b.attrs,k):k,M=a.create(_),x=M.addToSet(g),S=0;S<g.length;S++)g[S].isInSet(x)||(f&&f.to===v&&f.mark.eq(g[S])?f.to=h:(f=new o.RemoveMarkStep(v,h,g[S]),u.push(f)));var w=d&&d.to===v,T=w&&M.attrs.style===d.mark.attrs.style;w&&T?d.to=h:Object.keys(_).some((function(e){return null!==_[e]}))&&(d=new o.AddMarkStep(v,h,M),c.push(d))}}}})),u.forEach((function(t){return e.step(t)})),c.forEach((function(t){return e.step(t)})),u.length+c.length>0};t.getInlineStyles=function(e,t){var r=e.schema.marks.style;return(r?a.selectionMarks(e,r):[]).map((function(e){return a.styleValue(e,t)})).filter((function(e){return null!==e}))};var u=function(e,t){return function(r,o,u){var c=r.selection,f=c.empty,d=c.$cursor,p=c.ranges;if(f&&!d||!a.markApplies(r.doc,p,e))return!1;var m=!1;if(o)if(u=u||r.tr,d){var g=r.storedMarks||d.marks();if(e.isInSet(g)){var v=s(g,t),h=g.find((function(e){return"style"===e.type.name})),y=n.__assign({},h?h.attrs:{},{style:v.style||null});if(i.shallowEqual(h.attrs,y))return!1;o(u.removeStoredMark(e)),Object.keys(y).some((function(e){return null!==y[e]}))&&o(u.addStoredMark(e.create(y))),m=!0}}else{for(var k=0;k<p.length;k++){var b=p[k],_=b.$from,M=b.$to;m=l(u,_.pos,M.pos,t,e)}m&&(u.scrollIntoView(),o(u))}return m}};t.toggleInlineFormat=function(e,t,r){return function(n,o){var i=n.schema.marks,s=e.altStyle,l=e.altMarks,c=void 0===l?[]:l,f=e.mark;t=t||n.tr;var d=!1,p=!1,m=function(){return p=!0};s&&i.style&&(d=u(i.style,{style:s.name,value:s.value})(n,m,t));var g=[f].concat(c).filter((function(e){return i[e]})).map((function(e){return a.hasMark(n,{mark:e})&&i[e]})).filter((function(e){return e}));return g.length?a.removeMarks(g,n,m,t):d||a.toggleMark(i[f],r,t)(n,m),p&&o(t),p}},t.applyInlineStyle=function(e,t){return function(r,o){var s=r.schema.marks.style,l={style:e.style,value:/^.+$/,newValue:e.value},c=r.tr;t&&c.setMeta("commandName",t),c.setMeta("args",e);var f=r.selection,d=f.empty,p=f.$cursor,m=f.ranges;if(d&&!p||!s||!a.markApplies(r.doc,m,s))return!1;if(p){var g=r.storedMarks||p.marks(),v=s.isInSet(g)?g.find((function(e){return"style"===e.type.name})):null,h={style:null};if(v&&v.attrs.style){var y=i.changeStylesString(v.attrs.style,l);y.changed&&y.style&&(h.style=y.style)}else l.newValue&&(h.style=[l.style]+": "+l.newValue+";");var k=v?n.__assign({},v.attrs,h):h;return Object.keys(k).some((function(e){return null!==k[e]}))?o(c.addStoredMark(s.create(k))):o(c.removeStoredMark(s)),!0}return u(s,l)(r,o,c)}}},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=r(0),i=["div","ol","ul","li","table","tbody","thead","tfoot","td","th","p","tr","col","colgroup","article","main","nav","header","footer","aside","section"];t.trimWhitespace=function(e,t){void 0===t&&(t=i);var r=t.join("|");return e.replace(new RegExp("\\s*(<(?:"+r+")(?:\\s[^>]*?)?>)","g"),"$1").replace(new RegExp("(<\\/(?:"+r+")(?:\\s[^>]*?)?>)\\s*","g"),"$1")},t.parseContent=function(e,t,r){var o,i=document.createElement("template");"content"in i?(i.innerHTML=e,o=i.content):o=(new DOMParser).parseFromString(e,"text/html").body||document.createDocumentFragment();return n.DOMParser.fromSchema(t).parse(o,r)},t.getHtml=function(e){var t=n.DOMSerializer.fromSchema(e.schema).serializeFragment(e.doc.content),r=document.createElement("div");return r.appendChild(t),r.innerHTML},t.setHtml=function(e,r,n){return void 0===r&&(r="setHTML"),void 0===n&&(n={preserveWhitespace:"full"}),function(i,a){return a(i.tr.setSelection(new o.AllSelection(i.doc)).replaceSelectionWith(t.parseContent(e,i.schema,n)).setMeta("commandName",r))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(13);t.indentRules={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:n.__assign({},o.listsTypes)},t.outdentRules={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:n.__assign({},o.listsTypes)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.listsTypes={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},t.orderedList={listType:t.listsTypes.orderedList,types:n.__assign({},t.listsTypes)},t.bulletList={listType:t.listsTypes.bulletList,types:n.__assign({},t.listsTypes)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(2),i=r(0),a=r(3),s=r(10),l=r(9),u=r(13),c=function(e,t,r){for(var n=t.depth,o=e.nodes[r.bulletList],i=e.nodes[r.orderedList],a=e.nodes[r.listItem],s=t.depth;s>0;s--){var l=t.node(s);if(l.type!==o&&l.type!==i||(n=s),l.type!==o&&l.type!==i&&l.type!==a)break}return n-1};function f(e){return function(t,r,n){if(!n)return!1;var o,i=(t=n.state).schema.nodes[e.listType],a=t.selection,u=a.$from,c=a.$to,f=u.node(-2),d=u.node(-3),m=function(e,t,r,n){return 0===function(e,t,r){var n=Array(),o=function(e,t){var r=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;var n=t.node(t.depth),o=t;for(;t.depth>=1;)t=e.resolve(t.before(t.depth)),(n=t.node(t.depth))&&-1!==r.indexOf(n.type.name)&&(o=t);return o}(e,t).depth,i=e.resolve(t.start(o));for(;i.pos<=r.start(r.depth);){var a=Math.min(i.depth,o),s=i.node(a);if(s&&n.push(s),0===a)break;var l=e.resolve(i.after(a));if(l.start(a)>=e.nodeSize-2)break;l.depth!==i.depth&&(l=e.resolve(l.pos+2)),i=l.depth?e.resolve(l.start(l.depth)):e.resolve(l.end(l.depth))}return n}(e,t,r).filter((function(e){return e.type!==n})).length}(t.doc,u,c,i);return(f&&f.type===i||d&&d.type===i)&&m?p(e)(t,r):(m||(p(e)(t,r),t=n.state),(o=i,s.autoJoin(l.wrapInList(o),(function(e,t){return e.type===t.type&&e.type===o})))(t,r))}}function d(e,t,r,n){n||(n=e.schema.nodes.listItem);var i=t.$from,s=t.$to,l=i.blockRange(s,(function(e){return e.childCount&&e.firstChild.type===n}));if(!l||l.depth<2||i.node(l.depth-1).type!==n)return r;var u=l.end,c=s.end(l.depth);return u<c&&(r.step(new a.ReplaceAroundStep(u-1,c,u,c,new o.Slice(o.Fragment.from(n.create(void 0,l.parent.copy())),1,0),1,!0)),l=new o.NodeRange(r.doc.resolve(i.pos),r.doc.resolve(c),l.depth)),r.lift(l,a.liftTarget(l)).scrollIntoView()}function p(e){return function(t,r){var n=t.tr,o=t.selection,s=o.$from,l=o.$to;return n.doc.nodesBetween(s.pos,l.pos,(function(r,o){if(r.isTextblock||"blockquote"===r.type.name||"div"===r.type.name){var s=new i.NodeSelection(n.doc.resolve(n.mapping.map(o))),l=s.$from.blockRange(s.$to);if(!l||s.$from.parent.type!==t.schema.nodes[e.listItem])return!1;var u=l&&a.liftTarget(l);if(null==u)return!1;n.lift(l,u)}})),r&&r(n),!0}}t.toggleList=function(e,t,r,n,o){var a=n.listType,s=e.selection,l=s.$from.node(s.$from.depth-2),u=s.$to.node(s.$to.depth-2);if(l&&l.type.name===a&&u&&u.type.name===a){var p=r.state.schema.nodes,m={bulletList:p[n.bulletList],orderedList:p[n.orderedList],listItem:p[n.listItem]},g=function(e,t){for(var r,n=t.bulletList,o=t.orderedList,i=t.listItem,a=e.depth-1;a>0;a--){var s=e.node(a);if(s.type!==n&&s.type!==o||(r=a),s.type!==n&&s.type!==o&&s.type!==i)break}return r}(s.$to,m),v=function(e,t,r,n,o,a){a||(a=e.schema.nodes.listItem);var s=!1;return o.doc.nodesBetween(t,r,(function(r,l){if(!s&&r.type===a&&l>t){s=!0;for(var u=n+3;u>n+2;){var c=o.doc.resolve(o.mapping.map(l));u=c.depth;var f=o.doc.resolve(o.mapping.map(l+r.textContent.length)),p=new i.TextSelection(c,f);o=d(e,p,o,a)}}})),o}(e,s.$to.pos,s.$to.end(g),g,r.state.tr,m.listItem);return(v=function(e,t,r){var n=e.selection,o=n.from,i=n.to,a=e.schema.nodes,s=a.paragraph,l=a.heading,u=[];t.doc.nodesBetween(o,i,(function(e,t){e.type!==s&&e.type!==l||u.push({node:e,pos:t})}));for(var f=u.length-1;f>=0;f--){var d=u[f],p=t.doc.resolve(t.mapping.map(d.pos));if(p.depth>0){var m=void 0;m=d.node.textContent&&d.node.textContent.length>0?t.doc.resolve(t.mapping.map(d.pos+d.node.textContent.length)):t.doc.resolve(t.mapping.map(d.pos+1));var g=p.blockRange(m);g&&t.lift(g,c(e.schema,p,r))}}return t}(e,v,n)).setMeta("commandName",o),t(v),!0}return f(n)(e,t,r)},t.toggleUnorderedList=function(e,r,o){return t.toggleList(e,r,o,n.__assign({listType:u.bulletList.listType},u.bulletList.types))},t.toggleOrderedList=function(e,r,o){return t.toggleList(e,r,o,n.__assign({listType:u.orderedList.listType},u.orderedList.types))},t.splitListItemKeepMarks=function(e){return function(t,r){return l.splitListItem(e)(t,(function(e){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();n&&e.ensureMarks(n),r(e)}))}}},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bold={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},t.italic={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},t.underline={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},t.strikethrough={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},t.subscript={mark:"sub"},t.superscript={mark:"sup"},t.link={mark:"link"},t.unlink={mark:"link"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,o=function(e){return/^MsoListParagraph/.test(e.className)},i=function(e){var t=e.innerHTML;return t=(t=t.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},a=function(e,t){var r=document.createElement(e);return r.style.listStyleType=t,r},s=function(e){var t=null;return/^\d/.test(e)||(t=(/^[a-z]/.test(e)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(e)?"roman":"alpha")),t},l=function(e,t){var r=[];Array.from(e).forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE){var n=e;n.getAttribute("datalist")?(r.push(e),t.add(r)):o(n)&&r.length?r.push(e):(r=[],"DIV"===n.nodeName?l(n.children,t):"TABLE"===n.nodeName&&Array.from(n.querySelectorAll("td,th")).forEach((function(e){l(e.children,t)})))}}))},u=function(e){var t,r=e.innerHTML,n=function(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return r=r.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(r)?{tag:"ul",style:(t=n(i(e)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(t)?null:/^o/.test(t)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(r)?{tag:"ol",style:s(n(i(e)))}:void 0},c=function(e){var t,r=e.nodeName.toLowerCase();e.firstChild&&e.firstChild.nodeType===Node.COMMENT_NODE&&e.removeChild(e.firstChild),1===e.childNodes.length?t=e.firstChild.nodeType===Node.TEXT_NODE?i(e):e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(e.removeChild(e.firstChild),3===e.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue)&&e.removeChild(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&e.removeChild(e.firstChild),t="p"!==r?"<"+r+">"+e.innerHTML+"</"+r+">":e.innerHTML),e.parentNode.removeChild(e);var n=document.createElement("li");return n.innerHTML=t,n};t.convertMsLists=function(e){var t=document.createElement("div");t.innerHTML=function(e){return e=e.replace(n,(function(e,t,r){return'datalist="'+t+'" datalevel="'+r+'" '+e}))}(e);var r=new Set;return l(t.children,r),r.forEach((function(e){return function(e){var t,r,n,i,s,l,f,d,p,m,g,v,h,y=-1,k={};for(d=0;d<e.length;d++){var b=(h={datalist:(p=e[d]).getAttribute("datalist"),datalevel:p.getAttribute("datalevel")}).datalist,_=u(p);if(m=_&&_.tag){if(g=h.datalevel||parseFloat(p.style.marginLeft||0),h.datalevel||p.style.marginLeft){var M=m+b;k[g]||(k[g]={}),(!r||r<0)&&(r=g,n=b,i=(f=e.filter((function(e){return e.getAttribute("datalist")===String(n)})))[f.length-1],l=a(m,_&&_.style),p.parentNode.insertBefore(l,p),y=g,k[g][M]=l),s=i===p,v=k[g][M],(g>y||!v)&&(v=a(m,_&&_.style),k[g][M]=v,t.appendChild(v)),t=c(p),v.appendChild(t),s?r=y=-1:y=g}}else!t||s&&!o(p)||(p.style.marginLeft&&(p.style.marginLeft=""),p.style.marginLeft&&(p.style.margin=""),t.appendChild(p))}}(e)})),t.innerHTML}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(11);t.getHtml=o.getHtml,t.setHtml=o.setHtml,t.parseContent=o.parseContent,t.trimWhitespace=o.trimWhitespace;var i=r(8);t.applyInlineStyle=i.applyInlineStyle,t.getInlineStyles=i.getInlineStyles,t.toggleInlineFormat=i.toggleInlineFormat;var a=r(21);t.applyLink=a.applyLink,t.removeLink=a.removeLink;var s=r(22);t.insertText=s.insertText;var l=r(23);t.insertImage=l.insertImage;var u=r(24);t.alignBlocks=u.alignBlocks,t.isAligned=u.isAligned;var c=r(25);t.cleanFormatting=c.cleanFormatting;var f=r(6);t.hasNode=f.hasNode,t.activeNode=f.activeNode,t.formatBlockElements=f.formatBlockElements,t.getBlockFormats=f.getBlockFormats,t.parentBlockFormat=f.parentBlockFormat,t.changeTextBlock=f.changeTextBlock,t.blockNodes=f.blockNodes,t.cleanTextBlockFormatting=f.cleanTextBlockFormatting;var d=r(5);t.hasMark=d.hasMark,t.getMark=d.getMark,t.getActiveMarks=d.getActiveMarks,t.removeAllMarks=d.removeAllMarks,t.cleanMarks=d.cleanMarks,t.selectionMarks=d.selectionMarks;var p=r(26);t.indent=p.indent,t.canIndentAsListItem=p.canIndentAsListItem,t.outdent=p.outdent,t.canOutdentAsListItem=p.canOutdentAsListItem,t.isIndented=p.isIndented,t.canBeIndented=p.canBeIndented,t.indentBlocks=p.indentBlocks;var m=r(14);t.toggleOrderedList=m.toggleOrderedList,t.toggleUnorderedList=m.toggleUnorderedList,t.toggleList=m.toggleList;var g=r(4);t.hasSameMarkup=g.hasSameMarkup,t.getSelectionText=g.getSelectionText,t.getNodeFromSelection=g.getNodeFromSelection,t.selectedLineTextOnly=g.selectedLineTextOnly,t.canInsert=g.canInsert,t.insertNode=g.insertNode,t.indentHtml=g.indentHtml;var v=r(27);t.alignLeftRules=v.alignLeftRules,t.alignCenterRules=v.alignCenterRules,t.alignRightRules=v.alignRightRules,t.alignJustifyRules=v.alignJustifyRules,t.alignRemoveRules=v.alignRemoveRules;var h=r(12);t.indentRules=h.indentRules,t.outdentRules=h.outdentRules;var y=r(28);t.nodes=y.nodes,t.marks=y.marks;var k=r(29);t.buildKeymap=k.buildKeymap,t.buildListKeymap=k.buildListKeymap;var b=r(18);t.bold=b.bold,t.italic=b.italic,t.underline=b.underline,t.strikethrough=b.strikethrough,t.subscript=b.subscript,t.superscript=b.superscript,t.link=b.link;var _=r(30);t.sanitize=_.sanitize,t.removeComments=_.removeComments,t.removeTag=_.removeTag,t.pasteCleanup=_.pasteCleanup,t.sanitizeClassAttr=_.sanitizeClassAttr,t.sanitizeStyleAttr=_.sanitizeStyleAttr,t.removeAttribute=_.removeAttribute,t.replaceImageSourcesFromRtf=_.replaceImageSourcesFromRtf;var M=r(19);t.convertMsLists=M.convertMsLists;var x=r(31);t.createTable=x.createTable;var S=r(32);t.find=S.find,t.findAt=S.findAt,t.findAll=S.findAll,t.replace=S.replace,t.replaceAll=S.replaceAll;var w=r(33);t.placeholder=w.placeholder;var T=r(34);t.spacesFix=T.spacesFix;var O=r(35);t.textHighlight=O.textHighlight,t.textHighlightKey=O.textHighlightKey,n.__exportStar(r(10),t),n.__exportStar(r(36),t),n.__exportStar(r(37),t),n.__exportStar(r(16),t),n.__exportStar(r(17),t),n.__exportStar(r(38),t),n.__exportStar(r(2),t),n.__exportStar(r(9),t),n.__exportStar(r(0),t),n.__exportStar(r(15),t),n.__exportStar(r(3),t),n.__exportStar(r(7),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(5),i=r(0);t.removeLink=function(e,t){return function(r,i){var a=r.selection.$cursor;if(a){var s=a.parent,l=a.index(),u=r.schema.marks[e.mark],c=s.child(l).marks.find((function(e){return e.type===u})),f=s.childCount,d=a.pos-a.textOffset,p=s.child(l).nodeSize,m=void 0,g=void 0;for(m=l-1;m>=0&&c.isInSet(s.child(m).marks);)p+=g=s.child(m).nodeSize,d-=g,m-=1;for(m=l+1;m<f&&c.isInSet(s.child(m).marks);)p+=s.child(m).nodeSize,m+=1;i(o.removeMark(t||r.tr,d,d+p,c))}else n.toggleInlineFormat(e,t)(r,i)}};t.applyLink=function(e,r){var a=e.mark,s=e.attrs;return void 0===r&&(r="link"),function(e,l){var u=e.schema.marks,c=e.tr;r&&(c.setMeta("commandName",r),c.setMeta("args",s));var f=!1,d=function(){return f=!0};if(function(e,t){var r=o.selectionMarks(e,t);return 1===r.length&&r[0]?r[0]:null}(e,u[a]))!function(e,t){return function(r,n){var o=r.selection,i=o.$cursor,a=o.from,s=o.to,l=r.schema.marks[e.mark];if(i){var u=i.parent,c=i.index(),f=u.child(c).marks.find((function(e){return e.type===l})),d=u.childCount,p=i.pos-i.textOffset,m=u.child(c).nodeSize,g=void 0,v=void 0;for(g=c-1;g>=0&&f.isInSet(u.child(g).marks);)m+=v=u.child(g).nodeSize,p-=v,g-=1;for(g=c+1;g<d&&f.isInSet(u.child(g).marks);)m+=u.child(g).nodeSize,g+=1;t.removeMark(p,p+m,l),t.addMark(p,p+m,l.create(e.attrs)),n(t)}else t.doc.nodesBetween(a,s,(function(r,o){r.isInline&&l.isInSet(r.marks)&&(t.removeMark(o,o+r.nodeSize,l),t.addMark(o,o+r.nodeSize,l.create(e.attrs)),n(t))}))}}({mark:a,attrs:s},c)(e,d);else{var p=e;o.hasMark(e,{mark:a})&&(t.removeLink({mark:a,attrs:s},c)(e,d),p=i.EditorState.create({doc:c.doc,selection:c.selection})),f?o.toggleMark(u[a],s,c)(p,d):n.toggleInlineFormat({mark:a},c,s)(p,d)}return f&&l(c),f}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertText=function(e){return function(t,r){r(t.tr.insertText(e.text,e.from,e.to))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.insertImage=function(e){return function(t,r){var o=t.schema.nodes.image,i=o.createAndFill(e);n.insertNode(i)(t,(function(t){return r(t.setMeta("commandName","insertImage").setMeta("args",e))}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6);t.alignBlocks=function(e,t){return function(r,o){var i=n.blockNodes(r),a=r.tr;a.setMeta("commandName",t),i.forEach((function(t){if(t.type.isTextblock){var r={},o=e.find((function(e){return e.node===t.type.name}));o&&(r=n.addStyles(t,o.style)),n.changeTextBlock(a,t,t.type,r)}}));var s=a.docChanged;return s&&o(a.scrollIntoView()),s}},t.isAligned=function(e,t){var r=n.blockNodes(e),o=!1;return r.forEach((function(e){if(!o&&e.type.isTextblock&&e.attrs.style){var r=t.find((function(t){return t.node===e.type.name}));r&&(o=r.style.every((function(t){return!!t.value&&new RegExp(t.name+":\\s?"+t.value,"i").test(e.attrs.style)})))}})),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=r(5);t.cleanFormatting=function(e){return void 0===e&&(e={blocksInSelection:!0}),function(t,r){var i=t.tr,a=e.blocksInSelection,s=e.blockNodeType,l=(e.exceptMarks||[t.schema.marks.link]).filter(Boolean);o.cleanMarks(i,{except:l}),n.cleanTextBlockFormatting(i,{blocksInSelection:a,blockNodeType:s});var u=i.docChanged;return u&&r&&r(i),u}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(12),i=r(6),a=r(4);t.indentBlocks=function(e,t,r){return function(n,o){var a=i.blockNodes(n),s=n.tr;s.setMeta("commandName",t),a.forEach((function(t){if(t.type.isTextblock){var n=void 0,o=e.find((function(e){return e.node===t.type.name}));if(o){var a="rtl"===r?o.rtlStyle:o.style,l={name:a,value:o.step>0?""+o.step+o.unit:""};if(t.attrs.style){var u=new RegExp(a+":\\s?(\\d+)"+o.unit,"i"),c=t.attrs.style.match(u);if(c){var f=parseFloat(c[1])+o.step;f=f<=0?"":f,l.value=""+f+(f?o.unit:"")}}n=i.addStyles(t,[l])}n&&i.changeTextBlock(s,t,t.type,n)}}));var l=s.docChanged;return l&&o(s.scrollIntoView()),l}},t.isIndented=function(e,t,r){var n=i.blockNodes(e),o=!1;return n.forEach((function(e){if(!o&&e.type.isTextblock&&e.attrs.style){var n=t.find((function(t){return t.node===e.type.name}));if(n){var i="rtl"===r?n.rtlStyle:n.style,a=new RegExp(i+":\\s?\\d+"+n.unit,"i");o=a.test(e.attrs.style)}}})),o},t.canIndentAsListItem=function(e,t){return n.sinkListItem(t)(e)},t.canOutdentAsListItem=function(e,t){var r=e.schema.nodes[t.listsTypes.listItem],o=e.schema.nodes[t.listsTypes.orderedList],i=e.schema.nodes[t.listsTypes.bulletList],s=!!a.findNthParentNodeOfType(o,2)(e.selection),l=!!a.findNthParentNodeOfType(i,2)(e.selection);return(s||l)&&n.liftListItem(r)(e)},t.canBeIndented=function(e,r){var n=e.schema.nodes,a=n[o.indentRules.listsTypes.listItem];return(t.isIndented(e,r.nodes)||o.indentRules.nodes.some((function(t){return n[t.node]&&i.hasNode(e,n[t.node])})))&&!i.hasNode(e,a)},t.indent=function(e,r){var i=e.schema.nodes[o.indentRules.listsTypes.listItem],a=t.canBeIndented(e,o.indentRules);t.canIndentAsListItem(e,i)?n.sinkListItem(i)(e,r):a&&t.indentBlocks(o.indentRules.nodes)(e,r)},t.outdent=function(e,r){var i=e.schema.nodes[o.outdentRules.listsTypes.listItem],a=t.canBeIndented(e,o.outdentRules);t.canOutdentAsListItem(e,o.outdentRules)?n.liftListItem(i)(e,r):a&&t.indentBlocks(o.outdentRules.nodes)(e,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return{name:e,value:t}};t.alignLeftRules=[{node:"paragraph",style:[n("text-align","left")]},{node:"heading",style:[n("text-align","left")]}],t.alignRightRules=[{node:"paragraph",style:[n("text-align","right")]},{node:"heading",style:[n("text-align","right")]}],t.alignCenterRules=[{node:"paragraph",style:[n("text-align","center")]},{node:"heading",style:[n("text-align","center")]}],t.alignJustifyRules=[{node:"paragraph",style:[n("text-align","justify")]},{node:"heading",style:[n("text-align","justify")]}],t.alignRemoveRules=[{node:"paragraph",style:[n("text-align","")]},{node:"heading",style:[n("text-align","")]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(15),i=["blockquote",0],a=["hr"],s=["pre",["code",0]],l=["ol",0],u=["ul",0],c=["li",0],f=function(e){for(var t,r={},n=e.attributes,o=0;o<n.length;o++)r[(t=n[o]).name]=t.value;return r},d=function(e,t){for(var r in e)if(r&&null!==e[r]&&r!==t)return!0;return!1},p=function(e,t){var r={};for(var n in e)n&&null!==e[n]&&n!==t&&(r[n]=e[n]);return r},m=function(e){var t;return(t={})[e]={name:e,inclusive:!0,parseDOM:[{tag:e}],toDOM:function(){return[e,0]}},t},g=n.__assign({link:{attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}},{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:f}],toDOM:function(e){return["a",p(e.attrs),0]}}},m("strong"),m("b"),m("em"),m("i"),m("u"),m("del"),m("sub"),m("sup"),m("code"),{style:{attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"span",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["span",p(e.attrs),0]:["span",0]}}});t.marks=g;var v=n.__assign({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"p",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["p",p(e.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"div",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["div",p(e.attrs),0]:["div",0]}},blockquote:{attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["blockquote",p(e.attrs),0]:i}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return a}},heading:{attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}},{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(e){return n.__assign({},f(e),{level:1})}},{tag:"h2",getAttrs:function(e){return n.__assign({},f(e),{level:2})}},{tag:"h3",getAttrs:function(e){return n.__assign({},f(e),{level:3})}},{tag:"h4",getAttrs:function(e){return n.__assign({},f(e),{level:4})}},{tag:"h5",getAttrs:function(e){return n.__assign({},f(e),{level:5})}},{tag:"h6",getAttrs:function(e){return n.__assign({},f(e),{level:6})}}],toDOM:function(e){return d(e.attrs,"level")?["h"+e.attrs.level,p(e.attrs,"level"),0]:["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return s}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:n.__assign({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["img",p(e.attrs)]:["img"]}},hard_break:{inline:!0,attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["br",p(e.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}},{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(e){return n.__assign({},f(e),{order:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"1",10):1})}}],toDOM:function(e){return 1===e.attrs.order?d(e.attrs,"order")?["ol",p(e.attrs,"order"),0]:l:["ol",n.__assign({},p(e.attrs,"order"),{start:e.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"ul",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["ul",p(e.attrs),0]:u}},list_item:{content:"(paragraph | heading) block*",attrs:n.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"li",getAttrs:f}],toDOM:function(e){return d(e.attrs)?["li",p(e.attrs),0]:c},defining:!0}},o.tableNodes({tableGroup:"block",cellContent:"block+",cellAttributes:{}}));t.nodes=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(16),i=r(17),a=r(14),s=r(18),l=r(8),u="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);t.buildKeymap=function(e){var t={};if(t["Mod-z"]=o.undo,t["Shift-Mod-z"]=o.redo,t.Backspace=n.chainCommands(i.undoInputRule,n.deleteSelection,n.joinBackward,n.selectNodeBackward),t.Enter=n.chainCommands(n.newlineInCode,n.createParagraphNear,n.liftEmptyBlock,n.splitBlockKeepMarks),u||(t["Mod-y"]=o.redo),e.marks.strong&&(t["Mod-b"]=l.toggleInlineFormat(s.bold)),e.marks.em&&(t["Mod-i"]=l.toggleInlineFormat(s.italic)),e.marks.underline&&(t["Mod-u"]=l.toggleInlineFormat(s.underline)),e.nodes.hard_break){var r=e.nodes.hard_break,a=n.chainCommands(n.exitCode,(function(e,t){return t(e.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));t["Shift-Enter"]=a}return t},t.buildListKeymap=function(e){var t={};return e.nodes.list_item&&(t.Enter=a.splitListItemKeepMarks(e.nodes.list_item)),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);t.sanitize=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")},t.removeComments=function(e){return e.replace(/<!--[\s\S]+?-->/g,"")},t.removeTag=function(e,t){return e.replace(new RegExp("<\\/?("+t+")(?:\\s[^>]*?)?>","gi"),"")},t.removeAttribute=function(e){e.ownerElement&&e.ownerElement.removeAttribute(e.name)},t.sanitizeClassAttr=function(e){/^Mso/.test(e.value)&&t.removeAttribute(e)};var o=/\s*;\s*/,i=/\s*:\s*/;t.sanitizeStyleAttr=function(e){var r,n,a=e.value.split(o).filter((function(e){return Boolean(e)})),s=e.ownerElement.style,l="";a.forEach((function(e){var t;t=e.split(i),r=t[0],n=t[1],void 0!==s[r]&&(l+=r+": "+n+"; ")})),(l=l.trim())?e.value=l:t.removeAttribute(e)};function a(e){for(var t=e.length,r=new Array(t/2),n=0;n<t;n+=2)r[n]=String.fromCharCode(parseInt(e.substring(n,n+2),16));return btoa(r.join(""))}t.pasteCleanup=function(e,r){var o=e;if(r.convertMsLists&&(o=n.convertMsLists(o)),r.stripTags&&(o=t.removeTag(o,r.stripTags)),r.attributes){var i=document.createElement("div");i.innerHTML=o,Array.from(i.querySelectorAll("*")).forEach((function(e){return function(e,t){if(e.nodeType===Node.ELEMENT_NODE){for(var r=e.attributes.length-1;r>=0;r--){var n=e.attributes[r];t[n.name]?t[n.name](n):t["*"]&&t["*"](n)}"SPAN"===e.nodeName&&0===e.attributes.length&&function(e){var t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}}(e)}}(e,r.attributes)})),o=i.innerHTML}return o};var s=/<img\s[^>]*?src=(?:'|")file:\/[^'"]+(?:'|")[^>]*>/gi,l=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,u=new RegExp("(?:("+l.source+"))([\\da-fA-F\\s]+)\\}","g"),c=/[^\da-fA-F]/g,f=/file:\/[^'"]+\.(jpg|png|gif)/i,d=/\\(png|jpeg)blip\\/;t.replaceImageSourcesFromRtf=function(e,t){var r=e.match(s);if(!r||-1===t.types.indexOf("text/rtf"))return e;var n=t.getData("text/rtf"),o=[],i=n.match(u);if(!n||!i)return e;for(var p=0,m=i;p<m.length;p++){var g=m[p],v=d.exec(g);if(v){var h=g.replace(l,"").replace(c,"");o.push("data:image/"+v[1]+";base64,"+a(h))}}return r.length!==o.length?e:e.replace(s,(function(e){var t=o.shift()||"";return e.replace(f,t)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=function(e,t,r){for(var n,o=e.table,i=e.table_row,a=e.table_cell,s=[],l=0;l<t+1;l++){n=[];for(var u=0;u<r+1;u++)n.push(a.createAndFill());s.push(i.createAndFill(void 0,n))}return o.createAndFill(void 0,s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0);t.findAt=function(e,t,r,n,i){var l,u,c,f,d,p,m=[],g=[],v=t.matchCase,h=t.matchWord,y=t.useRegExp,k=t.text;if(y&&(/^\\$/.test(k)||/[^\\]\\$/.test(k))&&(k=k.substring(0,k.length-1)),!k)return m;var b=v?"g":"gi",_=y?new RegExp(k,b):s(k,b);return e.nodesBetween(r,n,(function(t,s,v){if(i(m))return!1;t.inlineContent&&s+t.content.size>=r&&(g.length=0,t.nodesBetween(0,t.content.size,(function(t,v,y,k){if(i(m))return!1;var b=1+s+v;if(t.isText&&b+t.nodeSize>=r){if(d=t.text||"",p=y.childCount-1>=k+1&&y.child(k+1),g.push(r<=b?{text:d,start:b}:{text:d.slice(r-b),start:r}),p&&p.isText)return;for(u=g.map((function(e){return e.text})).join(""),l=_.exec(u);null!==l&&(c=g[0].start+l.index,f=c+l[0].length,r<=c&&n>=f&&a(l,h)&&m.push(o.TextSelection.create(e,c,f)),!i(m));)l=_.exec(u)}else g.length=0})))})),m},t.find=function(e,r){var o=r.backward,i=r.matchCyclic,a=n.__rest(r,["backward","matchCyclic"]),s=o?function(){return!1}:function(e){return e.length>0},l=e.doc,u=e.selection,c=[];return o?!(c=t.findAt(l,a,0,u.from,s)).length&&i&&(c=t.findAt(l,a,u.from,l.content.size,s)):!(c=t.findAt(l,a,u.to,l.content.size,s)).length&&i&&(c=t.findAt(l,a,0,u.to,s)),c.length?c[c.length-1]:null},t.findAll=function(e,r){return t.findAt(e,r,0,e.content.size,(function(){return!1}))},t.replace=function(e,t,r){var n=e.from,i=e.to;return r.insertText(t,n,i).setSelection(o.TextSelection.create(r.doc,n,n+t.length)),r},t.replaceAll=function(e,r,n){var o=t.findAll(e.doc,n);if(0===o.length)return null;for(var i=e.tr,a=o.length-1;a>=0;a--)i.insertText(r,o[a].from,o[a].to);return i};var i=/^[\s0-9~`!@#$%\^&*\(\)_\-=+\\|\[\]{};:'"\?/.,<>]?$/,a=function(e,t){if(t){if(!0===t){var r=e.input,n=r.charAt(e.index-1),o=r.charAt(e.index+e[0].length);return i.test(n)&&i.test(o)}return t(e)}return!0},s=function(e,t){var r=e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/\s/g,"\\s");return new RegExp(r,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(7);t.placeholder=function(e){var t={class:"k-placeholder","data-placeholder":e};return new n.Plugin({key:new n.PluginKey("placeholder"),props:{decorations:function(e){var r=e.doc,n=r.content.firstChild;if(!(0===r.childCount||1===r.childCount&&n.inlineContent&&0===n.childCount))return o.DecorationSet.empty;var i=[];return r.descendants((function(e,r){i.push(o.Decoration.node(r,r+e.nodeSize,t))})),o.DecorationSet.create(r,i)}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(7),i=/\s+/g,a=/text-align/;t.spacesFix=function(){return new n.Plugin({key:new n.PluginKey("spaces-fix"),props:{decorations:function(e){var t,r,n,s,l=[],u=e.doc;return u.nodesBetween(0,u.content.size,(function(e,u,c){if(e.type.isText&&function(e){return a.test(e&&e.attrs&&e.attrs.style||"")}(c))for(r=i.exec(e.text||"");null!==r;){if(t=u+r.index,n=r[0].length,r.index+n<r.input.length)for(s=0;s<=n-1;s+=2)l.push(o.Decoration.inline(t+s,t+s+1,{style:"white-space: normal"}));r=i.exec(e.text||"")}})),o.DecorationSet.create(u,l)}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(7);t.textHighlightKey=new n.PluginKey("highlight"),t.textHighlight=function(e){return void 0===e&&(e=t.textHighlightKey),new n.Plugin({key:e,state:{init:function(){return null},apply:function(e){return e.getMeta(this.spec.key)}},props:{decorations:function(e){var t=(this.spec.key.getState(e)||[]).map((function(e){return o.Decoration.inline(e.from,e.to,e.attrs)}));return o.DecorationSet.create(e.doc,t)}}})}},function(e,t){e.exports=u},function(e,t){e.exports=c},function(e,t){e.exports=f}])}));